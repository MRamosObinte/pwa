(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"//0j":function(t,e){t.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmFormaCobroDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivarFormulario" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarFormaCobro" (click)="insertarInvVentasFormaCobro(frmFormaCobroDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarFormaCobro" (click)="actualizarInvVentasFormaCobro(frmFormaCobroDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarFormaCobro" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarFormaCobro" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario Forma de Cobro--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseFormaCobroInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseFormaCobroInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO CUENTA--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CUENTA}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" class="form-control form-control-sm mousetrap text-uppercase"\r\n                name="txtCuentaCodigo" maxlength="20" placeholder="{{constantes.TAG_OBLIGATORIO}}" id="cuenta" (keydown)="buscarConCuentas($event)"\r\n                (blur)="validarCuenta()" [(ngModel)]="invVentasFormaCobroTO.ctaCodigo" appUppercase required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n\r\n              <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_CUENTA}}"\r\n                container="body" *ngIf="accion !== constantes.ACCION_CONSULTAR"></span>\r\n            </div>\r\n            \x3c!--DETALLE CUENTA--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE_CUENTA}}</b>\r\n              </label>\r\n              <input class="form-control form-control-sm mousetrap text-uppercase" name="detalle" maxlength="150" type="text"\r\n                placeholder="{{constantes.TAG_SIN_DETALLE}}" [(ngModel)]="invVentasFormaCobroTO.fcDetalle" id="detalle"\r\n                required disabled appUppercase>\r\n            </div>\r\n            \x3c!--SECTOR--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_SECTOR}}</b>\r\n                &nbsp;\r\n                <a (click)="listarSectores()" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                    container="body"></span>\r\n                </a>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})</label>\r\n              <select [appFocus]="accion === constantes.ACCION_EDITAR" [(ngModel)]="sectorSeleccionado" name="sectorSeleccionado"\r\n                class="form-control form-control-sm mousetrap" required *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option selected [ngValue]="sector" *ngFor="let sector of listaSectores">{{sector.secNombre}}\r\n                  ({{sector.secCodigo}})</option>\r\n              </select>\r\n            </div>\r\n            \x3c!--TIPO--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_TIPO}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{invVentasFormaCobroTO.fcTipoPrincipal}}</label>\r\n              <select class="form-control form-control-sm mousetrap" name="tipo" required [(ngModel)]="invVentasFormaCobroTO.fcTipoPrincipal"\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option [ngValue]="tipo" *ngFor="let tipo of listaTipos">{{tipo}}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"/l4/":function(t,e){t.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmMotivoCompraDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="insertarInvComprasMotivoTO(frmMotivoCompraDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="actualizarInvComprasMotivoTO(frmMotivoCompraDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelar" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button class="btn btn-sm btn-default mr-1" id="btnCancelar" type="button" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario Forma de Pago--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseMotivoCompraInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseMotivoCompraInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO CUENTA--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CODIGO}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="invComprasMotivoTO.cmCodigo"\r\n                pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                class="form-control form-control-sm mousetrap text-uppercase" required maxlength="20" appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body"></span>\r\n            </div>\r\n            \x3c!--DETALLE--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap text-uppercase"\r\n                name="detalle" maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invComprasMotivoTO.cmDetalle"\r\n                appUppercase id="detalle" required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n            \x3c!--TIPO COMPROBANTE--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_TIPO_COMPROBANTES}}</b>\r\n                &nbsp;\r\n                <a (click)="listarTipos()" *ngIf="accion !== constantes.ACCION_CONSULTAR">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_TIPOS_COMPROBANTES}}"\r\n                    container="body"></span>\r\n                </a>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{tipoSeleccionado.tipDetalle}} ({{tipoSeleccionado.tipCodigo}})</label>\r\n              <select class="form-control form-control-sm mousetrap" name="ts" required [(ngModel)]="tipoSeleccionado"\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="ts" *ngFor="let ts of listaTipos">{{ts.tipDetalle}} ({{ts.tipCodigo}})</option>\r\n              </select>\r\n            </div>\r\n            \x3c!--FORMA CONTABILIZAR--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FORMA_CONTABILIZAR}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{formaContabilizarSeleccionado}}</label>\r\n              <select class="form-control form-control-sm mousetrap" name="fc" required [(ngModel)]="formaContabilizarSeleccionado"\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option [ngValue]="fc" *ngFor="let fc of listaFormaContabilizar">{{fc}}</option>\r\n              </select>\r\n            </div>\r\n            \x3c!--FORMA IMPRIMIR--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FORMA_IMPRIMIR}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{formaImprimirSeleccionado}}</label>\r\n              <select class="form-control form-control-sm mousetrap" name="fi" required [(ngModel)]="formaImprimirSeleccionado"\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option [ngValue]="fi" *ngFor="let fi of listaFormaImprimir">{{fi}}</option>\r\n              </select>\r\n            </div>\r\n            \x3c!--AJUSTE INVENTARIO--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <input type="checkbox" [(ngModel)]="invComprasMotivoTO.cmAjustesDeInventario" name="ajusteInv" [disabled]="accion === constantes.ACCION_CONSULTAR" class="mt-4"/>\r\n              &nbsp; {{constantes.TAG_AJUSTE_INVENTARIO}}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"04q1":function(t,e){t.exports=""},"1Lm5":function(t,e){t.exports=""},"3P36":function(t,e){t.exports=""},"4aFg":function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i> <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frm=\'ngForm\' name="frm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="bodega" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n              optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [maxDate]="fechaHasta" [appMaxDate]="fechaHasta"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [minDate]="fechaDesde" [appMinDate]="fechaDesde"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="text-right">\r\n            <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarVentasConsClientes(frm)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultadoVentasConsClientes?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_CLIENTE_VENTA_CONSOLIDANDO_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirVentasConsClientes" (click)="imprimirVentasConsClientes()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarVentasConsClientes" (click)="exportarVentasConsClientes()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirVentasConsClientes" (click)="imprimirVentasConsClientes()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarVentasConsClientes" (click)="exportarVentasConsClientes()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoVentasConsClientes" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [frameworkComponents]="frameworkComponents" [context]="context" (gridReady)="onGridReady($event)"\r\n          (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"4qws":function(t,e){t.exports='<div class="row" [hidden]="mostrarKardex">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--FORMULARIO DE FILTRADO--\x3e\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmAnalisisVentasVsCosto="ngForm" autocomplete="off">\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada();limpiarResultado();"\r\n              required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarBodegas()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre"\r\n              optionLabel="bodNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CLIENTE}}</b>\r\n            </label>\r\n            <input [appFocus]="true" id="codCliente" name="txtCodigoCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n              type="text" (blur)="validarCliente()" (keydown)="buscarCliente($event);" [(ngModel)]="cliente.invClientePK.cliCodigo"\r\n              placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" (ngModelChange)="limpiarResultado();" [showIcon]="true"\r\n              [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true" [maxDate]="fechaHasta"\r\n              [appMaxDate]="fechaHasta"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" (ngModelChange)="limpiarResultado();" [showIcon]="true"\r\n              [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true" [minDate]="fechaDesde"\r\n              [appMinDate]="fechaDesde" [maxDate]="fechaActual" [appMaxDate]="fechaActual"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer">\r\n        <div class="text-right">\r\n          <button id="btnBuscarAnalisisVentasVsCostos" type="button" class="btn btn-sm btn-primary" (click)="buscarAnalisisVentasVsCosto(frmAnalisisVentasVsCosto)">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n\r\n    <div class="card m-0" *ngIf="listaResultadoAnalisisVentasVsCostos?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarAnalisisVentasVsCostos" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_ANALISIS_VENTAS_VS_COSTO_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirAnalisisVentasVsCostos" (click)="imprimirAnalisisVentasVsCosto()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarAnalisisVentasVsCostos" (click)="exportarAnalisisVentasVsCosto()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirAnalisisVentasVsCostos" (click)="imprimirAnalisisVentasVsCosto()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarAnalisisVentasVsCostos" (click)="exportarAnalisisVentasVsCosto()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoAnalisisVentasVsCostos" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="analisisVentasVsCostosSeleccionado = $event.node.data" (filterChanged)="actualizarFilas()"\r\n          (cellFocused)="filaFocused($event)" (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()"\r\n          (cellDoubleClicked)="consultarKardex()" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="mostrarKardex && objetoDesdeFuera">\r\n  <app-kardex [objetoDesdeFuera]="objetoDesdeFuera" (cerrarKardex)="cerrarKardex($event)"></app-kardex>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"5fqR":function(t,e){t.exports=""},"7tqN":function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmlistaResultadoPreciosStock=\'ngForm\' name="frmlistaResultadoPreciosStock" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarBodegas()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre"\r\n              optionLabel="bodNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CATEGORIA}}</b>\r\n              &nbsp;\r\n              <a (click)="listarCategorias()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CATEGORIAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaCategorias" name="categoria" [showClear]="true" [(ngModel)]="categoriaSeleccionada"\r\n              optionLabel="catDetalle" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}"\r\n              class="mousetrap">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{categoriaSeleccionada?.catDetalle}} ({{categoriaSeleccionada?.catCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.catDetalle}} ({{fs.value.catCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_BUSQUEDA}}</b>\r\n            </label>\r\n            <input class="form-control form-control-sm mousetrap text-uppercase" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n              name="busqueda" [(ngModel)]="busqueda" (ngModelChange)="limpiarResultado()" appUppercase [appFocus]="true">\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnBuscarListadoProductosPreciosStock" (click)="buscarListadoProductosPreciosStock()"\r\n            title="{{constantes.ATAJO_BUSCAR}}">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarListadoProductosPreciosStock" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS"\r\n          (click)="activar= !activar" type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <b> {{constantes.INVENTARIO_PRODUCTO_PRECIO_STOCK_LISTADO}}</b>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirListadoProductosPreciosStock"\r\n              (click)="imprimirListadoProductosPreciosStock()" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n              container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarListadoProductosPreciosStock"\r\n              (click)="exportarListadoProductosPreciosStock()" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n              container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirListadoProductosPreciosStock"\r\n              (click)="imprimirListadoProductosPreciosStock()" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n              container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarListadoProductosPreciosStock"\r\n              (click)="exportarListadoProductosPreciosStock()" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n              container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objectSelect = $event.node.data" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"8AwN":function(t,e){t.exports=""},"8fXX":function(t,e){t.exports=""},"9UHE":function(t,e){t.exports='<div class="row" [hidden]="mostrarKardex">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i> <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frm=\'ngForm\' name="frm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarBodegas()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre"\r\n              optionLabel="bodNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [maxDate]="fechaHasta" [appMaxDate]="fechaHasta"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [minDate]="fechaDesde" [appMinDate]="fechaDesde"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarComprasConsProdMensual(false,frm)">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="buscarComprasConsProdMensual(true,frm)">\r\n                  {{constantes.TAG_INCLUIR_CANTIDADES}}</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_PRODUCTOS_COMPRA_MENSUAL_CONSOLIDANDO_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarComprasConsProdMensual()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarComprasConsProdMensual()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()" [frameworkComponents]="frameworkComponents"\r\n          (rowSelected)="comprasConsProductoMenSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (cellDoubleClicked)="consultarKardex()" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="mostrarKardex && objetoDesdeFuera">\r\n  <app-kardex [objetoDesdeFuera]="objetoDesdeFuera" (cerrarKardex)="cerrarKardex($event)"></app-kardex>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"AM/o":function(t,e){t.exports='<div class="row" *ngIf="!mostrarKardex">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmConsolidadoProductos=\'ngForm\' name="frmConsolidadoProductos">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="listarBodegas(); limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarBodegas()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre"\r\n              optionLabel="bodNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_PROVEEDOR}}</strong>\r\n            </label>\r\n            <input [appFocus]="true" id="provCodigo" name="provCodigo" [(ngModel)]="proveedor.provCodigo" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n              pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n              maxlength="500" (keydown)="buscarProveedor($event)" (blur)="validarProveedor()" [ngbTooltip]="proveedor.provRazonSocial ? proveedor.provRazonSocial : null"\r\n              appUppercase>\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="iniFecha" name="iniFecha" id="fechaDesde" [(ngModel)]="fechaInicio" (ngModelChange)="limpiarResultado()"\r\n              [maxDate]="fechaFin" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMaxDate]="fechaFin"\r\n              [required]="true"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="finFecha" name="finFecha" [(ngModel)]="fechaFin" (ngModelChange)="limpiarResultado()"\r\n              [minDate]="fechaInicio" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMinDate]="fechaInicio"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual" [required]="true"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscarConsProdCompras" class="btn btn-sm btn-primary" (click)="buscarConsolidadoProductos(frmConsolidadoProductos)">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultadoComprasConsProd?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarComprasConsProductos" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_PRODUCTOS_COMPRA_CONSOLIDANDO_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirConsProdCompras" (click)="imprimirConsProdCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarConsProdCompra" (click)="exportarConsProdCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirConsProdCompras" (click)="imprimirConsProdCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarConsProdCompra" (click)="exportarConsProdCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoComprasConsProd" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (rowSelected)="comprasConsProductoSeleccionado = $event.node.data"\r\n          (cellFocused)="filaFocused($event)" (cellDoubleClicked)="consultarKardex()" (gridReady)="onGridReady($event)"\r\n          (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()"\r\n          (contextmenu)="!this.isModal?$event.preventDefault():null" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="mostrarKardex && objetoDesdeFuera">\r\n  <app-kardex [objetoDesdeFuera]="objetoDesdeFuera" (cerrarKardex)="cerrarKardex($event)"></app-kardex>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},Alqk:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activarProveedor}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmProveedor=\'ngForm\' name="frmProveedor">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CATEGORIA}}</b>\r\n              &nbsp;\r\n              <a (click)="listarInvProveedorCategoriaTO()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CATEGORIAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaCategorias" name="categoria" [showClear]="true" [(ngModel)]="categoriaSeleccionada"\r\n              optionLabel="pcDetalle" (ngModelChange)="limpiarResultado()" [disabled]="vistaFormulario" placeholder="{{constantes.TAG_TODOS}}"\r\n              class="mousetrap">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{categoriaSeleccionada?.pcDetalle}} ({{categoriaSeleccionada?.pcCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.pcDetalle}} ({{fs.value.pcCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted" *ngIf="!vistaFormulario">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button type="button" class="btn btn-sm btn-primary" id="btnBuscarProveedor" (click)="buscarProveedores(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarProveedores(true)">{{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activarProveedor,\'col-lg-12 col-md-12 col-sm-12\':activarProveedor}">\r\n    <div class="card m-0" *ngIf="listaResultadoProveedores?.length>0 && vistaListado">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarProveedor" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activarProveedor= !activarProveedor"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <b> {{constantes.INVENTARIO_PROVEEDORES_LISTADO}}</b>\r\n        <div class="card-header-actions">\r\n          \x3c!--sm--\x3e\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirProveedor" (click)="imprimirProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n            </button>\r\n            \x3c!--Exportar filtrado--\x3e\r\n            <div class="btn-group">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnExportarProveedor" (click)="exportarTodos()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split mr-1"\r\n                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" (click)="abrirExportar()">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item"> <input type="checkbox" [(ngModel)]="exportarTodosEstado" (change)="cambiarEstadoExportar()" />&nbsp;\r\n                  <b>{{constantes.TAG_OPCIONES}}</b> </a>\r\n                <a class="dropdown-item" *ngFor="let item of columnDefsExportar"><input type="checkbox" [(ngModel)]="item.check"\r\n                    (change)="cambiarEstadoItemExportar()" />&nbsp;{{item.headerName}}</a>\r\n                <a class="dropdown-item text-right">\r\n                  <button type="button" class="btn btn-sm btn-primary" id="btnExportarProveedor" (click)="exportarProveedor()">\r\n                    <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n                  </button>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            \x3c!--Fin de exportar filtrado--\x3e\r\n          </div>\r\n          \x3c!--lg--\x3e\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirProveedor" (click)="imprimirProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            \x3c!--Exportar filtrado--\x3e\r\n            <div class="btn-group">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnExportarProveedor" (click)="exportarTodos()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split mr-1"\r\n                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" (click)="abrirExportar()">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item"> <input type="checkbox" [(ngModel)]="exportarTodosEstado" (change)="cambiarEstadoExportar()" />&nbsp;\r\n                  <b>{{constantes.TAG_OPCIONES}}</b> </a>\r\n                <a class="dropdown-item" *ngFor="let item of columnDefsExportar"><input type="checkbox" [(ngModel)]="item.check"\r\n                    (change)="cambiarEstadoItemExportar()" />&nbsp;{{item.headerName}}</a>\r\n                <a class="dropdown-item text-right">\r\n                  <button type="button" class="btn btn-sm btn-primary" id="btnExportarProveedor" (click)="exportarProveedor()">\r\n                    <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n                  </button>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            \x3c!--Fin de exportar filtrado--\x3e\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoProveedores" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()"\r\n          (rowSelected)="objectSelect = $event.node.data" (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (cellDoubleClicked)="consultarProveedor()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n    <div *ngIf="vistaFormulario">\r\n      <app-proveedor-formulario [parametros]="parametrosFormulario" (cerrarFormularioProveedor)="cerrarFormularioProveedor($event)"\r\n        (activarEstado)="cambiarEstadoActivar($event)"></app-proveedor-formulario>\r\n    </div>\r\n  </div>\r\n\r\n  <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},BFID:function(t,e){t.exports=""},BgDo:function(t,e){t.exports=""},BtYB:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmFormaPago=\'ngForm\' name="frmFormaPago">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarInvComprasFormaPagoTO(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}" *ngIf="!vistaFormulario">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              *ngIf="!vistaFormulario">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarInvComprasFormaPagoTO(true)">\r\n                {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevo" (click)="operacionesFormaPago(constantes.ACCION_CREAR)"\r\n            title="{{constantes.ATAJO_NUEVO}}" *ngIf="!vistaFormulario">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_FORMA_PAGO_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirFormaPago" (click)="imprimirFormaPago()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarFormaPago" (click)="exportarFormaPago()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirFormaPago" (click)="imprimirFormaPago()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarFormaPago" (click)="exportarFormaPago()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--listado de forma de pago--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="!this.isModal?$event.preventDefault():null" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; operacionesFormaPago(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n        \x3c!--end listado de forma de pago--\x3e\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--Formulario Forma Cobro--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-forma-pago-formulario *ngIf="vistaFormulario" [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n      (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event" (enviarAccion)="ejecutarAccion($event)">\r\n    </app-forma-pago-formulario>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},C8O7:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmProducto=\'ngForm\' name="frmProducto" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset [disabled]="vistaFormulario || mostrarClaveAcceso">\r\n        <div class="card-header">\r\n          <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n          <b>{{constantes.TITULO_FILTROS}}</b>\r\n        </div>\r\n        <div class="card-body  pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_PERIODO}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarPeriodos()" *ngIf="!vistaFormulario && !mostrarClaveAcceso">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_PERIODOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listadoPeriodos" name="Periodo" [showClear]="true" [(ngModel)]="periodoSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="TODOS" optionLabel="perDetalle" class="mousetrap"\r\n              [readonly]="vistaFormulario" [disabled]="vistaFormulario || mostrarClaveAcceso">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{periodoSeleccionado?.sisPeriodoPK?.perCodigo}} | {{periodoSeleccionado?.perDetalle}}\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.sisPeriodoPK.perCodigo}} | {{fs.value.perDetalle}}</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarMotivos()" *ngIf="!vistaFormulario && !mostrarClaveAcceso">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaMotivos" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="cmDetalle"\r\n              [disabled]="vistaFormulario || mostrarClaveAcceso">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{motivoSeleccionado?.cmDetalle}} ( {{motivoSeleccionado?.cmCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.cmDetalle}} ({{fs.value.cmCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_BUSQUEDA}}</b>\r\n            </label>\r\n            <input class="form-control form-control-sm mousetrap text-uppercase" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n              name="busqueda" [(ngModel)]="busqueda" (ngModelChange)="limpiarResultado()" appUppercase [appFocus]="true">\r\n          </div>\r\n        </div>\r\n\r\n        <div class="card-footer text-muted" *ngIf="!vistaFormulario && !mostrarClaveAcceso">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnBuscarCompras" (click)="buscarCompras(20)"\r\n                title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class=" {{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n                id="btnInactivo">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="buscarCompras(50)">{{constantes.TAG_ULTIMOS_50}} </a>\r\n                <a class="dropdown-item" (click)="buscarCompras(100)">{{constantes.TAG_ULTIMOS_100}}</a>\r\n                <a class="dropdown-item" (click)="buscarCompras(null)">{{constantes.TAG_TODOS}}</a>\r\n              </div>\r\n            </div>\r\n            <div class="btn-group">\r\n              <button class="btn btn-sm btn-primary" type="button" id="btnNuevaCompra" title="{{constantes.ATAJO_NUEVO}}"\r\n                (click)="operaciones(constantes.ACCION_CREAR) ">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n                id="btnOC">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="importarOC()">{{constantes.TAG_IMPORTAR_ORDEN_DE_COMPRA}}\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="!mostrarRetencionCompras && !mostrarAccionesContabilidad">\r\n    \x3c!--Listado--\x3e\r\n    <div class="card m-0" *ngIf="listadoCompras?.length>0 && !mostrarClaveAcceso" [hidden]="vistaFormulario">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarCompras" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_COMPRAS_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnImprimirCompras" (click)="imprimirComprasListado()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> </span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="imprimirComprasLote()">{{constantes.LABEL_IMPRIMIR_INDIVIDUAL}}</a>\r\n              </div>\r\n            </div>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarCompras" (click)="exportarCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnImprimirCompras" (click)="imprimirComprasListado()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n                <span class="d-none d-md-inline"> </span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="imprimirComprasLote()">{{constantes.LABEL_IMPRIMIR_INDIVIDUAL}}</a>\r\n              </div>\r\n            </div>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarCompras" (click)="exportarCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div class="card-body" style="padding: 0 0 0 0">\r\n\r\n          <div class="row">\r\n            <div class="col-sm-5 col-md-6">\r\n              <div class="input-group p-1">\r\n                <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                  placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n                <div class="input-group-append">\r\n                  <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-7 col-md-6">\r\n              <div class="float-right pr-1">\r\n                <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                  maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n            [rowData]="listadoCompras" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n            [frameworkComponents]="frameworkComponents" [rowSelection]="rowSelection" [enableColResize]="true"\r\n            [components]="components" [context]="context" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n            (gridColumnsChanged)="redimensionarColumnas()" (gridSizeChanged)="redimensionarColumnas()" (rowSelected)="compraSeleccionada = $event.node.data"\r\n            (cellFocused)="filaFocused($event)" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n            (contextmenu)="$event.preventDefault()">\r\n          </ag-grid-angular>\r\n          <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    \x3c!--Clave de acceso--\x3e\r\n    <div *ngIf="mostrarClaveAcceso">\r\n      <app-comprobante-electronico-compras [esImportarOC]="esImportarOC" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarAccion)="operacionesCompras($event)"></app-comprobante-electronico-compras>\r\n    </div>\r\n\r\n    \x3c!--Formulario--\x3e\r\n    <app-compras-formulario [data]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada" (enviarAccion)="operacionesCompras($event)"\r\n      *ngIf="parametrosFormulario && !mostrarClaveAcceso"></app-compras-formulario>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="parametrosRetencion || mostrarAccionesContabilidad">\r\n    \x3c!--Retencion compras--\x3e\r\n    <div *ngIf="parametrosRetencion">\r\n      <app-retencion-compras [empresaSeleccionada]="empresaSeleccionada" [activar]="activar"\r\n        [comprobarRetencionAutorizadaProcesamiento]="false" [parametrosRetencion]="parametrosRetencion" (enviarAccion)="accionRetencion($event)"\r\n        (mostrarRetencionCompras)="mostrarRetencionCompras=$event"></app-retencion-compras>\r\n    </div>\r\n    \x3c!--Contable--\x3e\r\n    <div *ngIf="mostrarAccionesContabilidad">\r\n      <app-contable-formulario [data]="parametrosContabilidad" (cargandoEstado)="cargando=$event"\r\n        (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivarContabilidad($event)"></app-contable-formulario>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf="cargando">\r\n    <app-cargando></app-cargando>\r\n  </div>'},DH89:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCliente=\'ngForm\' name="frmCliente" class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <div class="form-group form-group-sm">\r\n          <label class="control-label">\r\n            <b>{{constantes.TAG_EMPRESA}}</b>\r\n          </label>\r\n          <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n            (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n            <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n            <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n              ({{empresa.empCodigo}})</option>\r\n          </select>\r\n        </div>\r\n        <div class="form-group form-group-sm has-feedback">\r\n          <label class="control-label">\r\n            <b>{{constantes.TAG_CATEGORIA}}</b>\r\n            &nbsp;\r\n            <a (click)="listarCategorias()">\r\n              <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CATEGORIAS}}"\r\n                container="body"></span>\r\n            </a>\r\n          </label>\r\n          <p-dropdown [options]="listadoCategorias" name="categoria" [showClear]="true" [(ngModel)]="categoriaSeleccionada"\r\n            (ngModelChange)="limpiarResultado()" optionLabel="ccDetalle" placeholder="{{constantes.TAG_TODOS}}" class="mousetrap">\r\n            <ng-template let-item pTemplate="selectedItem">\r\n              {{categoriaSeleccionada?.ccDetalle}} ({{categoriaSeleccionada?.ccCodigo}})\r\n            </ng-template>\r\n            <ng-template let-fs pTemplate="item">\r\n              <div class="">{{fs.value.ccDetalle}} ({{fs.value.ccCodigo}})</div>\r\n            </ng-template>\r\n          </p-dropdown>\r\n        </div>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button type="button" class="btn btn-sm btn-primary" id="btnBuscarCliente" (click)="buscarClientes(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarClientes(true)">{{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div *ngIf="vistaListado">\r\n      <app-cliente-listado [parametros]="parametro" [isModal]="false" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarActivar)="activar=!$event" (enviarAccion)="accionLista($event)"></app-cliente-listado>\r\n    </div>\r\n    <div *ngIf="vistaFormulario && !vistaListado">\r\n      <app-cliente-formulario [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        [listadoCategorias]="listadoCategorias" (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event"></app-cliente-formulario>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf="cargando">\r\n    <app-cargando></app-cargando>\r\n  </div>'},DswH:function(t,e){t.exports=""},E1AQ:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmVentaMotivo=\'ngForm\' name="frmVentaMotivo">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarInvVentaMotivo(true)"\r\n              title="{{constantes.ATAJO_BUSCAR}}" *ngIf="!vistaFormulario">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              *ngIf="!vistaFormulario">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarInvVentaMotivo(false)"> {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevo" (click)="operacionesMotivoVentas(constantes.ACCION_CREAR)"\r\n            title="{{constantes.ATAJO_NUEVO}}" *ngIf="!vistaFormulario">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="!vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_MOTIVO_VENTA_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoVenta" (click)="imprimirMotivoVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoVenta" (click)="exportarMotivoVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoVenta" (click)="imprimirMotivoVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoVenta" (click)="exportarMotivoVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="!this.isModal?$event.preventDefault():null" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; operacionesMotivoVentas(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-motivo-ventas-formulario *ngIf="vistaFormulario" [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n      (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event" (enviarAccion)="ejecutarAccion($event)">\r\n    </app-motivo-ventas-formulario>\r\n  </div>\r\n\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},E6uV:function(t,e){t.exports=""},"F+GH":function(t,e){t.exports='<form #frm=\'ngForm\' autocomplete="off" class="card m-0" *ngIf="!mostrarAccionesProveedor && mostrarFormulario">\r\n  <div class="card-header" style="padding: 0.5rem 0.5rem;">\r\n    <button id="btnActivarCompra" class="btn btn-sm btn-primary" *ngIf="!screamXS" (click)="cambiarEstadoActivar()"\r\n      type="button">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{titulo}}</b>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        <button id="btnImportarOrdenCompra" *ngIf="esImportarOC" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.TAG_IMPORTAR_ORDEN_DE_COMPRA}}" (click)="obtenerOrdenCompra(frm)">\r\n          <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarCompra"\r\n          ngbTooltip="{{constantes.LABEL_CANCELAR}}" (click)="cancelar()">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button id="btnImportarOrdenCompra" *ngIf="esImportarOC" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.TAG_IMPORTAR_ORDEN_DE_COMPRA}}" (click)="obtenerOrdenCompra(frm)">\r\n          <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.TAG_IMPORTAR}}\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarCompra"\r\n          (click)="cancelar()" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body">\r\n    <form #frm=\'ngForm\' name="frm" autocomplete="off">\r\n      <div class="row" *ngIf="esImportarOC">\r\n        <div class="form-group form-group-sm col-lg-4 col-sm-4 has-feedback">\r\n          <label class="control-label">\r\n            <strong>{{constantes.TAG_SECTOR}}</strong>\r\n            &nbsp;\r\n            <a (click)="listarSectores()">\r\n              <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                container="body"></span>\r\n            </a>\r\n          </label>\r\n          <select class="form-control form-control-sm mousetrap" name="sector" required [(ngModel)]="sectorSeleccionado"\r\n            (ngModelChange)="listarMotivos()">\r\n            <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n            <option [ngValue]="sector" *ngFor="let sector of listaSectores">{{sector.secCodigo}}\r\n              ({{sector.secNombre}})</option>\r\n          </select>\r\n        </div>\r\n        <div class="form-group form-group-sm col-lg-4 col-sm-4 has-feedback">\r\n          <label class="control-label">\r\n            <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n            &nbsp;\r\n            <a (click)="listarMotivos()">\r\n              <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                container="body"></span>\r\n            </a>\r\n          </label>\r\n          <select class="form-control form-control-sm mousetrap" name="motivo" required [(ngModel)]="motivoSeleccionado">\r\n            <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n            <option [ngValue]="motivo" *ngFor="let motivo of listaMotivos">{{motivo.ocmCodigo}}\r\n              ({{motivo.ocmDetalle}})</option>\r\n          </select>\r\n        </div>\r\n        <div class="form-group form-group-sm col-lg-4 col-sm-4 has-feedback">\r\n          <label class="control-label">\r\n            <b>{{constantes.TAG_NUMERO}}</b>\r\n          </label>\r\n          <input class="form-control form-control-sm text-uppercase mousetrap" name="numero" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n            id="numero" (keypress)="soloNumeros($event)" (blur)="completarCeros()" [(ngModel)]="ordenCompra.numero"\r\n            appUppercase required>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <form #frmClaveAcceso=\'ngForm\' name="frmClaveAcceso" autocomplete="off">\r\n      <div class="row" *ngIf="!esImportarOC">\r\n        <div class="col-md-6 offset-md-3 text-center">\r\n          <h2>Comprobante electr\xf3nico</h2>\r\n          <div class="switch">\r\n            <label>\r\n              <input id="radioComprobante" name="radioComprobante" type="checkbox" [(ngModel)]="radioComprobante">\r\n              <span class="lever"></span>\r\n            </label>\r\n          </div>\r\n          <div class="form-group form-group-sm" *ngIf="radioComprobante">\r\n            <input class="form-control form-control-sm mousetrap text-uppercase" name="claveAcceso" [(ngModel)]="claveAcceso"\r\n              placeholder="Clave de acceso" onkeypress=\'return event.charCode >= 48 && event.charCode <= 57\' maxlength="49"\r\n              required>\r\n          </div>\r\n          <br>\r\n          <button type="button" class="btn btn-primary btn-sm" (click)="buscarComprobanteElectronico(frmClaveAcceso)">{{constantes.LABEL_CONTINUAR}}</button>\r\n          <br>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n  </div>\r\n</form>\r\n\r\n\r\n<div *ngIf="mostrarAccionesProveedor">\r\n  <app-proveedor-formulario [parametros]="parametrosFormulario" (cerrarFormularioProveedor)="cerrarFormularioProveedor($event)"\r\n    (activarEstado)="cambiarEstadoActivar($event)"></app-proveedor-formulario>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},F6hq:function(t,e){t.exports=""},HwmX:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <app-venta-busqueda [ruta]="ruta" [vistaFormulario]="vistaFormulario" [tipoDocumento]="tipoDocumento"\r\n      (enviarAccion)="ejecutarAccion($event)"></app-venta-busqueda>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div *ngIf="vistaFormulario">\r\n      <app-venta-formulario [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        [tipoDocumento]="tipoDocumento" (enviarAccion)="ejecutarAccion($event)"></app-venta-formulario>\r\n    </div>\r\n    <div [hidden]="vistaFormulario">\r\n      <app-venta-listado [parametrosBusqueda]="parametrosLista" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarActivar)="activar=!$event" (enviarAccion)="ejecutarAccion($event)"></app-venta-listado>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},IMsv:function(t,e){t.exports=""},INjq:function(t,e){t.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmFormaPagoDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivarFormulario" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="insertarInvComprasFormaPagoTO(frmFormaPagoDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="actualizarInvComprasFormaPagoTO(frmFormaPagoDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarFormaPago" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button class="btn btn-sm btn-default mr-1" type="button" id="btnCancelarFormaPago" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario Forma de Pago--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseFormPagoInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseFormPagoInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO CUENTA--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CUENTA}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{invComprasFormaPagoTO.ctaCodigo}} </label>\r\n              <input [appFocus]="true" class="form-control form-control-sm text-uppercase mousetrap" name="txtCuentaCodigo"\r\n                #conCuenta maxlength="20" placeholder="{{constantes.TAG_OBLIGATORIO}}" id="cuenta" (keydown)="buscarConCuentas($event)"\r\n                (blur)="validarCuenta()" [(ngModel)]="invComprasFormaPagoTO.ctaCodigo" appUppercase required *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n              <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_CUENTA}}"\r\n                container="body" *ngIf="accion !== constantes.ACCION_CONSULTAR"></span>\r\n            </div>\r\n            \x3c!--DETALLE CUENTA--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE_CUENTA}}</b>\r\n              </label>\r\n              <input class="form-control form-control-sm mousetrap text-uppercase " name="detalle" maxlength="150" type="text"\r\n                placeholder="{{constantes.TAG_SIN_DETALLE}}" [(ngModel)]="invComprasFormaPagoTO.fpDetalle" id="detalle"\r\n                required disabled>\r\n            </div>\r\n            \x3c!--SECTOR--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_SECTOR}}</b>\r\n                &nbsp;\r\n                <a (click)="listarSectores()" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                    container="body"></span>\r\n                </a>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{sectorSeleccionado.secNombre}} ({{sectorSeleccionado.secCodigo}})</label>\r\n              <select [(ngModel)]="sectorSeleccionado" name="sectorSeleccionado" class="form-control form-control-sm"\r\n                required *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option selected [ngValue]="sector" *ngFor="let sector of listaSectores">{{sector.secNombre}}\r\n                  ({{sector.secCodigo}})</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},IqVD:function(t,e){t.exports=""},IuDZ:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{classIcon}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmMotivoProforma=\'ngForm\' name="frmMotivoProforma">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscarMotivoProforma" class="btn btn-sm btn-primary" (click)="buscarInvProformaMotivo(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}" *ngIf="!vistaFormulario">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              *ngIf="!vistaFormulario">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarInvProformaMotivo(true)"> {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevoMotivoProforma" (click)="operacionesProformaMotivo(constantes.ACCION_CREAR)"\r\n            title="{{constantes.ATAJO_NUEVO}}" *ngIf="!vistaFormulario">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultadoMotivoProforma?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarMotivoProforma" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_MOTIVO_PROFORMAS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoProforma" (click)="imprimirMotivoProforma()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoProforma" (click)="exportarMotivoProforma()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoProforma" (click)="imprimirMotivoProforma()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoProforma" (click)="exportarMotivoProforma()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoMotivoProforma" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()"\r\n          (gridReady)="onGridReady($event)" (rowSelected)="proformaMotivoSeleccionado = $event.node.data"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n          (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)"\r\n          (cellDoubleClicked)="proformaMotivoSeleccionado = $event.node.data; operacionesProformaMotivo(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-motivo-proformas-formulario *ngIf="vistaFormulario" [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n      (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event" (enviarAccion)="ejecutarAccion($event)">\r\n    </app-motivo-proformas-formulario>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},JFi0:function(t,e){t.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmMotivoProformaDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n        title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarMotivoConsumo" (click)="insertarInvConsumoMotivo(frmMotivoProformaDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarMotivoConsumo" (click)="actualizarInvConsumoMotivo(frmMotivoProformaDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarMotivoConsumo" (click)="cancelar()"\r\n          title="{{constantes.ATAJO_CANCELAR}}" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarMotivoConsumo" (click)="cancelar()"\r\n          title="{{constantes.ATAJO_CANCELAR}}" *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario de Motivo de Consumo--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseMotivoInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseMotivoInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CODIGO}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="invConsumosMotivoTO.cmCodigo"\r\n                pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                class="form-control form-control-sm mousetrap text-uppercase" required maxlength="20" appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body"></span>\r\n            </div>\r\n            \x3c!--DETALLE--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap text-uppercase"\r\n                name="detalle" maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invConsumosMotivoTO.cmDetalle"\r\n                appUppercase id="detalle" required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n            \x3c!--FORMA DE CONTABILIZAR--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FORMA_CONTABILIZAR}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{invConsumosMotivoTO.cmFormaContabilizar}} </label>\r\n              <select class="form-control form-control-sm mousetrap mt-2" name="fc" required [(ngModel)]="invConsumosMotivoTO.cmFormaContabilizar"\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option [ngValue]="fc" *ngFor="let fc of listaFormaContabilizar">{{fc}}</option>\r\n              </select>\r\n            </div>\r\n            \x3c!--SECTOR--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_SECTOR}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})</label>\r\n              <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n                (ngModelChange)="verificarAntesDeGuardar()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <ng-template let-item pTemplate="selectedItem">\r\n                  {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n                </ng-template>\r\n                <ng-template let-fs pTemplate="item">\r\n                  <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n                </ng-template>\r\n              </p-dropdown>\r\n            </div>\r\n            \x3c!--BODEGA--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{bodegaSeleccionada?.bodNombre}} ({{bodegaSeleccionada?.bodCodigo}})</label>\r\n              <p-dropdown [options]="listadoBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n                (ngModelChange)="verificarAntesDeGuardar()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre"\r\n                optionLabel="bodNombre" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <ng-template let-item pTemplate="selectedItem">\r\n                  {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n                </ng-template>\r\n                <ng-template let-fs pTemplate="item">\r\n                  <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n                </ng-template>\r\n              </p-dropdown>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},JUoh:function(t,e){t.exports=""},KE7M:function(t,e){t.exports=""},KP4f:function(t,e){t.exports=""},LLCE:function(t,e){t.exports=""},LSET:function(t,e){t.exports=""},N4y1:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <b>\r\n          <i class="{{constantes.ICON_FILTRAR}}"></i> {{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmNumeraciones=\'ngForm\' name="frmNumeraciones" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm  mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}}\r\n                )</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_PERIODO}}</b>\r\n              &nbsp;\r\n              <a (click)="listarPeriodos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_PERIODOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaPeriodos" name="periodo" [showClear]="true" [(ngModel)]="periodoSeleccionado"\r\n              optionLabel="perDetalle" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}"\r\n              class="mousetrap">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{periodoSeleccionado?.perDetalle}}\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.perDetalle}}</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_MOTIVO}}</b>\r\n              &nbsp;\r\n              <a (click)="listarMotivosCompra()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaComprasMotivo" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n              optionLabel="cmDetalle" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" class="mousetrap">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{motivoSeleccionado?.cmDetalle}} ({{motivoSeleccionado?.cmCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.cmDetalle}} ({{fs.value.cmCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarNumeraciones()" title="{{constantes.ATAJO_BUSCAR}}">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultadoNumeracionCompra?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_NUMERACION_COMPRAS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirNumeracionCompra" (click)="imprimirNumeracionCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarNumeracionCompra" (click)="exportarNumeracionCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirNumeracionCompra" (click)="imprimirNumeracionCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarNumeracionCompra" (click)="exportarNumeracionCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoNumeracionCompra" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()"\r\n          (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},NOyn:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{classIcon}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmCategoria=\'ngForm\' name="frmCategoria">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada" (ngModelChange)="cambiarEmpresaSeleccionada()"\r\n              [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}} ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n        \x3c!--FORMULARIO OPERACIONES--\x3e\r\n        <form #frmCategoriaDatos=\'ngForm\' autocomplete="off">\r\n          <div *ngIf="accion && accion !== constantes.ACCION_ELIMINAR">\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CODIGO}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="invClienteCategoriaTO.ccCodigo"\r\n                pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                class="form-control input-sm mousetrap" required maxlength="20" (ngModelChange)="invClienteCategoriaTO.ccCodigo = invClienteCategoriaTO.ccCodigo.toUpperCase()">\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}"\r\n                container="body"></span>\r\n            </div>\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap" name="detalle" maxlength="150"\r\n                type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invClienteCategoriaTO.ccDetalle" (ngModelChange)="invClienteCategoriaTO.ccDetalle = invClienteCategoriaTO.ccDetalle.toUpperCase()"\r\n                id="detalle" required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary mr-1" (click)="listarInvClienteCategoriaTO()" \r\n          title="{{constantes.ATAJO_BUSCAR}}">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevo" (click)="operacionesCategoria(constantes.ACCION_CREAR)" \r\n          title="{{constantes.ATAJO_NUEVO}}">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n      <div class="card-footer text-muted" *ngIf="accion && accion !== constantes.ACCION_ELIMINAR">\r\n        <div class="text-right">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="insertarCategoria(frmCategoriaDatos)"\r\n            *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button type="button" class="btn btn-sm btn-primary  mr-1" id="btnGuardar" (click)="actualizarCategoria(frmCategoriaDatos)"\r\n            *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button class="btn btn-sm btn-default" type="button" (click)="resetear()" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar" type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_CATEGORIA_CLIENTE_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirCategoriaCliente" (click)="imprimirCategoriaCliente()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarCategoriaCliente" (click)="exportarCategoriaCliente()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirCategoriaCliente" (click)="imprimirCategoriaCliente()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarCategoriaCliente" (click)="exportarCategoriaCliente()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--listado cliente categoria--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="!this.isModal?$event.preventDefault():null" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)">\r\n        </ag-grid-angular>\r\n        \x3c!--end listado categoria--\x3e\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},Nrf3:function(t,e){t.exports=""},OppO:function(t,e){t.exports=""},QBEZ:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <b>\r\n          <i class="{{constantes.ICON_FILTRAR}}"></i> {{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmNumeraciones=\'ngForm\' name="frmNumeraciones" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm  mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}} )</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_PERIODO}}</b>\r\n              &nbsp;\r\n              <a (click)="listarPeriodos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_PERIODOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaPeriodos" name="periodo" [showClear]="true" [(ngModel)]="periodoSeleccionado"\r\n              optionLabel="perDetalle" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}"\r\n              class="mousetrap">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{periodoSeleccionado?.perDetalle}}\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.perDetalle}}</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_MOTIVO}}</b>\r\n              &nbsp;\r\n              <a (click)="listarMotivosVenta()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaVentasMotivo" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n              optionLabel="vmDetalle" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" class="mousetrap">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{motivoSeleccionado?.vmDetalle}} ({{motivoSeleccionado?.vmCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.vmDetalle}} ({{fs.value.vmCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarNumeraciones()" title="{{constantes.ATAJO_BUSCAR}}">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultadoNumeracionVenta?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_NUMERACION_VENTAS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirNumeracionVenta" (click)="imprimirNumeracionVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarNumeracionVenta" (click)="exportarNumeracionVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirNumeracionVenta" (click)="imprimirNumeracionVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarNumeracionVenta" (click)="exportarNumeracionVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--listado de numeracion consumos--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoNumeracionVenta" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n        \x3c!--end listado de numeracion consumos--\x3e\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},SDh6:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n          <i class="{{constantes.ICON_FILTRAR}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmFormaCobro=\'ngForm\' name="frmFormaCobro">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscarFormaCobro" class="btn btn-sm btn-primary" (click)="buscarInvVentasFormaCobro(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}" *ngIf="!vistaFormulario">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              *ngIf="!vistaFormulario">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarInvVentasFormaCobro(true)"> {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevoFormaCobro" (click)="operacionesFormaCobro(constantes.ACCION_CREAR)"\r\n            *ngIf="!vistaFormulario">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_FORMA_COBRO_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirFormaCobro" (click)="imprimirFormaCobro()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarFormaCobro" (click)="exportarFormaCobro()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirFormaCobro" (click)="imprimirFormaCobro()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarFormaCobro" (click)="exportarFormaCobro()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--listado de forma de cobro--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="!this.isModal?$event.preventDefault():null" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)"\r\n          (cellDoubleClicked)="objetoSeleccionado = $event.node.data; operacionesFormaCobro(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n        \x3c!--end listado de forma de cobro--\x3e\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--Formulario Forma Cobro--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-forma-cobro-formulario *ngIf="vistaFormulario" [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n      (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event" (enviarAccion)="ejecutarAccion($event)">\r\n    </app-forma-cobro-formulario>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},Shwt:function(t,e,o){"use strict";o.r(e);var a=o("CcnG"),i=o("ZYCi"),n=o("LlOB"),r=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},s=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){var o=this;this.router=t,this.appSistemaService=e,this.showIndex=!1,this.router.events.subscribe(function(t){o.showIndex="/modulos/inventario"===o.router.url})}return t.prototype.ngOnInit=function(){this.listaAccesoRapido=[{item:"Compras",url:"comprasTrans",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Transacciones","comprasTrans")},{item:"Ventas",url:"ventaFacturaVenta",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Transacciones","ventaFacturaVenta")},{item:"Producto",url:"productoInv",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Archivo","productoInv")},{item:"Cliente",url:"clienteInv",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Archivo","clienteInv")},{item:"Listado de compras",url:"compraListado",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Consultas","comprasListado")},{item:"Listado de ventas",url:"ventaListado",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Consultas","ventasListado")}]},t=r([Object(a.Component)({selector:"app-inventario",template:o("rfiV")}),s("design:paramtypes",[i.Router,n.a])],t)}(),l=o("DixL"),d=o("8fiX"),p=o("mwBN"),m=o("pZ6e"),u=o("yccp"),h=o("pwhb"),v=o("CDHH"),C=o("CEfs"),f=o("nR5P"),A=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},g=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e,o,a,i){this.route=t,this.atajoService=e,this.clienteService=o,this.filasService=a,this.utilService=i,this.listaEmpresas=new Array,this.listadoCategorias=new Array,this.empresaSeleccionada=new d.a,this.busqueda=null,this.parametro={},this.parametrosFormulario={},this.cargando=!1,this.vistaFormulario=!1,this.vistaListado=!1,this.activar=!1,this.cliente=new m.a,this.constantes=p.a,this.iniciarAtajos()}return t.prototype.ngOnInit=function(){this.listaEmpresas=this.route.snapshot.data.clienteInv,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo)},t.prototype.cambiarEmpresaSelect=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.activar=!1,this.vistaFormulario=!1,this.vistaListado=!1},t.prototype.iniciarAtajos=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){return t.activar=!t.activar,!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(e){return!t.vistaFormulario&&t.listarClientes(!1),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(e){return t.nuevoCliente(),!1}))},t.prototype.verificarPermiso=function(t,e){return this.clienteService.verificarPermiso(t,this,e)},t.prototype.listarClientes=function(t){this.parametro={},this.parametro.empresa=p.a.KEY_EMPRESA_SELECT,this.parametro.categoria=null,this.parametro.busqueda=this.busqueda,this.parametro.debeBuscar=!0,this.parametro.mostrarInactivo=t,this.vistaListado=!0,this.vistaFormulario=!1},t.prototype.nuevoCliente=function(){this.vistaFormulario=!0,this.vistaListado=!1,this.parametrosFormulario={accion:p.a.ACCION_NUEVO,objetoSeleccionado:new h.a,categoriaSeleccionada:null}},t.prototype.limpiarResultado=function(){this.parametro=null,this.parametrosFormulario=null,this.vistaListado=!1,this.vistaFormulario=!1,this.filasService.actualizarFilas(0,0),this.busqueda?(document.getElementById("btnBuscarCliente").disabled=!1,document.getElementById("btnInactivo").disabled=!1):(document.getElementById("btnBuscarCliente").disabled=!0,document.getElementById("btnInactivo").disabled=!0)},t.prototype.cancelar=function(t){t&&(this.parametro&&null!=this.parametro.mostrarInactivo?this.listarClientes(this.parametro.mostrarInactivo):(this.limpiarResultado(),this.activar=!1,this.vistaListado=!1,this.parametrosFormulario=null,this.vistaFormulario=!1,this.parametro=null),this.iniciarAtajos())},t.prototype.accionLista=function(t){switch(t.accion){case p.a.ACCION_NUEVO:this.nuevoCliente();break;case p.a.ACCION_EDITAR:case p.a.ACCION_CONSULTAR:this.mostrarFormulario(t)}},t.prototype.mostrarFormulario=function(t){this.vistaFormulario=!0,this.vistaListado=!1,this.parametrosFormulario={accion:t.accion,objetoSeleccionado:t.objetoSeleccionado}},t=A([Object(a.Component)({selector:"app-cliente",template:o("dpfQ"),styles:[o("JUoh")]}),g("design:paramtypes",[i.ActivatedRoute,u.HotkeysService,v.a,C.a,f.a])],t)}(),S=o("/zAd"),O=o("K3zs"),R=o("awBf"),I=o("nxr/"),T=o("hyxj"),E=o("SZbH"),_=o("z5Y/"),y=o("6E6y"),M=o("mmnz"),N=o("9wkQ"),P=o("EnEm"),L=o("Ungd"),F=o("zkCp"),D=o("madF"),w=o("gLZI"),x=o("+JJ7"),G=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},U=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},j=function(){function t(t,e,o,a,i,n,r,s,c,l){this.planContableService=t,this.route=e,this.api=o,this.toastr=a,this.filasService=i,this.sectorService=n,this.formaCobroService=r,this.atajoService=s,this.archivoService=c,this.utilService=l,this.listaResultado=[],this.listaSectores=[],this.listaTipos=p.a.LISTA_TIPOS_FORMA_COBRO,this.objetoSeleccionado=new N.a,this.invVentasFormaCobroTO=new N.a,this.sectorSeleccionado=new I.a,this.listaEmpresas=[],this.constantes=p.a,this.tamanioEstructura=0,this.indexTablaEditar=0,this.accion=null,this.codigoCuenta=null,this.tituloForm=p.a.TITULO_FILTROS,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.vistaFormulario=!1,this.parametrosFormulario={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.formaCobroInv,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},t.prototype.buscarInvVentasFormaCobro=function(t){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivos:t};this.filasTiempo.iniciarContador(),this.formaCobroService.listarInvListaInvVentasFormaCobroTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvListarInvVentasFormaCobroTO=function(t){this.filasTiempo.finalizarContador(),this.listaResultado=t||[],this.cargando=!1},t.prototype.listarSectores=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.operacionesFormaCobro=function(t){var e=this;switch(t){case p.a.ACCION_ELIMINAR:this.formaCobroService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.invVentasFormaCobroTO=new N.a(this.objetoSeleccionado),this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.eliminarInvVentasFormaCobro());break;case p.a.ACCION_CREAR:this.formaCobroService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={invVentasFormaCobroTO:new N.a,listaSectores:this.listaSectores,accion:p.a.ACCION_CREAR,tamanioEstructura:this.tamanioEstructura});break;case p.a.ACCION_CONSULTAR:this.vistaFormulario=!0,this.parametrosFormulario={invVentasFormaCobroTO:new N.a(this.objetoSeleccionado),listaSectores:this.listaSectores,accion:p.a.ACCION_CONSULTAR,tamanioEstructura:this.tamanioEstructura,indexTablaEditar:this.invVentasFormaCobroTO.fcSecuencial?this.listaResultado.findIndex(function(t){return t.fcSecuencial===e.invVentasFormaCobroTO.fcSecuencial}):this.listaResultado.findIndex(function(t){return t.ctaCodigo===e.invVentasFormaCobroTO.ctaCodigo})};break;case p.a.ACCION_EDITAR:this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={invVentasFormaCobroTO:new N.a(this.objetoSeleccionado),listaSectores:this.listaSectores,accion:p.a.ACCION_EDITAR,tamanioEstructura:this.tamanioEstructura,listaResultado:this.listaResultado});break;case p.a.ACCION_EDITAR_ESTADO:this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.invVentasFormaCobroTO=new N.a(this.objetoSeleccionado),this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.indexTablaEditar=this.invVentasFormaCobroTO.fcSecuencial?this.listaResultado.findIndex(function(t){return t.fcSecuencial===e.invVentasFormaCobroTO.fcSecuencial}):this.listaResultado.findIndex(function(t){return t.ctaCodigo===e.invVentasFormaCobroTO.ctaCodigo}),this.actualizarEstadoInvVentasFormaCobro())}},t.prototype.ejecutarAccion=function(t){switch(t.accionChar){case"I":this.accionInvVentasFormaCobroTO(t.invVentasFormaCobroCopia,"I"),this.accion=p.a.ACCION_CREAR;break;case"M":this.accionInvVentasFormaCobroTO(t.invVentasFormaCobroCopia,"M"),this.accion=p.a.ACCION_EDITAR,this.indexTablaEditar=t.indexTablaEditar}},t.prototype.accionInvVentasFormaCobroTO=function(t,e){var o=this;this.api.post("todocompuWS/inventarioWebController/accionInvVentasFormaCobro",{invVentasFormaCobroTO:t,accion:e},p.a.KEY_EMPRESA_SELECT).then(function(e){if(o.cargando=!1,e&&e.extraInfo){switch(o.accion){case p.a.ACCION_CREAR:t.fcSecuencial=e.extraInfo.fcSecuencial,o.refrescarTabla(t,"I"),o.vistaFormulario=!1;break;case p.a.ACCION_EDITAR:o.refrescarTabla(t,"U"),o.vistaFormulario=!1;break;case p.a.ACCION_ELIMINAR:o.refrescarTabla(t,"D")}o.toastr.success(e.operacionMensaje,"Aviso"),o.resetear()}else o.accion===p.a.ACCION_ELIMINAR&&o.resetear(),o.toastr.warning(e.operacionMensaje,"Aviso")}).catch(function(t){return o.utilService.handleError(t,o)})},t.prototype.actualizarEstadoInvVentasFormaCobro=function(){var t=this;if(this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invVentasFormaCobroTO)),o={title:e.fcInactivo?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(e.fcInactivo?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Forma de cobro: "+e.fcDetalle,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,e.fcInactivo=!e.fcInactivo,e.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.api.post("todocompuWS/inventarioWebController/modificarEstadoInvVentasFormaCobroTO",{invVentasFormaCobroTO:e,estado:e.fcInactivo},p.a.KEY_EMPRESA_SELECT).then(function(o){t.cargando=!1,o&&o.extraInfo?(t.refrescarTabla(e,"U"),t.toastr.success(o.operacionMensaje,"Aviso")):t.toastr.warning(o.operacionMensaje,"Aviso"),t.resetear()}).catch(function(e){return t.utilService.handleError(e,t)})):t.resetear()})}},t.prototype.eliminarInvVentasFormaCobro=function(){var t=this;if(this.formaCobroService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invVentasFormaCobroTO));e.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim();var o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,t.accionInvVentasFormaCobroTO(e,"E")):t.resetear()})}},t.prototype.imprimirFormaCobro=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoFormaCobro:this.listaResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteFormaCobro",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoFormacobro.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarFormaCobro=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoFormaCobro:this.listaResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteFormaCobro",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoFormaCobro_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.cambiarEmpresaSeleccionada=function(){var t=this;p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listaResultado=[],this.planContableService.getTamanioListaConEstructura({empresa:p.a.KEY_EMPRESA_SELECT},p.a.KEY_EMPRESA_SELECT).then(function(e){t.tamanioEstructura=e[0].estGrupo1+e[0].estGrupo2+e[0].estGrupo3+e[0].estGrupo4+e[0].estGrupo5+e[0].estGrupo6}).catch(function(e){t.utilService.handleError(e,t)}),this.listarSectores(),this.filasService.actualizarFilas("0","0")},t.prototype.resetear=function(){this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.actualizarFilas()},t.prototype.cancelar=function(t){this.vistaFormulario=!1,this.activar=!1},t.prototype.generarOpciones=function(){var t=this,e=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,o=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&!this.objetoSeleccionado.fcInactivo,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.objetoSeleccionado.fcInactivo,i=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesFormaCobro(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(){return e?t.operacionesFormaCobro(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!i,command:function(){return i?t.operacionesFormaCobro(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?t.operacionesFormaCobro(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!o,command:function(){return o?t.operacionesFormaCobro(p.a.ACCION_EDITAR_ESTADO):null}}]},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return t.listaResultado.length>0&&(t.activar=!t.activar),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarFormaCobro");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevoFormaCobro");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EDITAR,function(){return t.listaResultado.length>0&&t.operacionesFormaCobro(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ELIMINAR,function(){return t.listaResultado.length>0&&t.operacionesFormaCobro(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardarFormaCobro");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(t){var e=document.getElementById("btnImprimirFormaCobro");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(t){var e=document.getElementById("btnExportarFormaCobro");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelarFormaCobro");return t&&t.click(),!1}))},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultado.length>0)(o=this.listaResultado.slice()).unshift(t),this.listaResultado=o,this.seleccionarFila(0);break;case"U":(o=this.listaResultado.slice())[this.indexTablaEditar]=t,this.listaResultado=o,this.seleccionarFila(this.indexTablaEditar);break;case"D":var o,a=this.listaResultado.findIndex(function(e){return e.ctaCodigo===t.ctaCodigo});(o=this.listaResultado.slice()).splice(a,1),this.listaResultado=o,this.listaResultado.length>0&&this.seleccionarFila(0===a?0:a-1)}},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.formaCobroService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.objetoSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.objetoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},G([Object(a.ViewChild)("menuOpciones"),U("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),G([Object(a.HostListener)("window:resize",["$event"]),U("design:type",Function),U("design:paramtypes",[]),U("design:returntype",void 0)],t.prototype,"onResize",null),t=G([Object(a.Component)({selector:"app-forma-cobro",template:o("SDh6"),styles:[o("1Lm5")]}),U("design:paramtypes",[y.a,i.ActivatedRoute,_.a,E.b,C.a,T.a,M.a,u.HotkeysService,L.a,f.a])],t)}(),V=o("9s7+"),k=o("BPXi"),B=o("bodW"),J=o("EF/R"),z=o("cyv6"),W=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},H=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},K=function(){function t(t,e,o,a,i,n,r,s,c,l){this.tipoContableService=t,this.auth=e,this.route=o,this.api=a,this.toastr=i,this.filasService=n,this.atajoService=r,this.utilService=s,this.archivoService=c,this.motivoComprasService=l,this.listaFormaImprimir=p.a.LISTA_MOTIVOS_COMPRA_FORMA_IMPRIMIR,this.listaFormaContabilizar=p.a.LISTA_MOTIVOS_COMPRA_FORMA_CONTABILIZAR,this.listaResultado=[],this.listaTipos=[],this.listaEmpresas=[],this.objetoSeleccionado=new V.a,this.invComprasMotivoTO=new V.a,this.tipoSeleccionado=new k.a,this.formaContabilizarSeleccionado="",this.formaImprimirSeleccionado="",this.constantes=p.a,this.tamanioEstructura=0,this.accion=null,this.codigoCuenta=null,this.tituloForm=p.a.TITULO_FILTROS,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.vistaFormulario=!1,this.parametrosFormulario={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.motivoCompras,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},t.prototype.buscarInvComprasMotivoTO=function(t){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,activos:t};this.filasTiempo.iniciarContador(),this.motivoComprasService.listarInvComprasMotivoTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvComprasMotivoTO=function(t){this.listaResultado=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.operacionesMotivoCompras=function(t){switch(t){case p.a.ACCION_CONSULTAR:this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.activar=!1,this.vistaFormulario=!0,this.parametrosFormulario={invCompraMotivoTO:new V.a(this.objetoSeleccionado),listaTipos:this.listaTipos,accion:p.a.ACCION_CONSULTAR});break;case p.a.ACCION_CREAR:this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.activar=!1,this.vistaFormulario=!0,this.parametrosFormulario={invComprasMotivoTO:new V.a,listaTipos:this.listaTipos,accion:p.a.ACCION_CREAR});break;case p.a.ACCION_EDITAR:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.activar=!1,this.vistaFormulario=!0,this.parametrosFormulario={invCompraMotivoTO:new V.a(this.objetoSeleccionado),listaTipos:this.listaTipos,accion:p.a.ACCION_EDITAR});break;case p.a.ACCION_EDITAR_ESTADO:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.invComprasMotivoTO=new V.a(this.objetoSeleccionado),this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.actualizarEstadoInvComprasMotivoTO());break;case p.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.invComprasMotivoTO=new V.a(this.objetoSeleccionado),this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.eliminarInvComprasMotivoTO())}},t.prototype.actualizarEstadoInvComprasMotivoTO=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invComprasMotivoTO)),o={title:e.cmInactivo?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(e.cmInactivo?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Motivo de compra: "+e.cmDetalle,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,e.cmInactivo=!e.cmInactivo,t.api.post("todocompuWS/inventarioWebController/modificarEstadoInvComprasMotivoTO",{invCompraMotivoTO:e},p.a.KEY_EMPRESA_SELECT).then(function(o){t.cargando=!1,o&&o.extraInfo?(t.refrescarTabla(e,"U"),t.toastr.success(o.operacionMensaje,"Aviso")):t.toastr.warning(o.operacionMensaje,"Aviso"),t.resetear()}).catch(function(e){return t.utilService.handleError(e,t)})):t.resetear()})}else this.resetear()},t.prototype.eliminarInvComprasMotivoTO=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invComprasMotivoTO)),o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,t.api.post("todocompuWS/inventarioWebController/eliminarInvComprasMotivoTO",{invCompraMotivoTO:e},p.a.KEY_EMPRESA_SELECT).then(function(o){t.cargando=!1,o&&o.extraInfo?(t.refrescarTabla(e,"D"),t.toastr.success(o.operacionMensaje,"Aviso")):t.toastr.warning(o.operacionMensaje,"Aviso"),t.resetear()}).catch(function(e){return t.utilService.handleError(e,t)})):t.resetear()})}else this.resetear()},t.prototype.imprimirMotivoCompra=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteMotivoCompra",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoMotivoCompras.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarMotivoCompra=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteMotivoCompra",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoMotivoCompras_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.tipoSeleccionado=null,this.listarTipos(),this.limpiarResultado()},t.prototype.resetear=function(){this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.actualizarFilas()},t.prototype.cancelar=function(t){this.vistaFormulario=!1,this.activar=!1,this.refreshGrid()},t.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasService.actualizarFilas("0","0")},t.prototype.generarOpciones=function(){var t=this,e=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,o=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&!this.objetoSeleccionado.cmInactivo,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.objetoSeleccionado.cmInactivo,i=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesMotivoCompras(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(){return e?t.operacionesMotivoCompras(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!i,command:function(){return i?t.operacionesMotivoCompras(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?t.operacionesMotivoCompras(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!o,command:function(){return o?t.operacionesMotivoCompras(p.a.ACCION_EDITAR_ESTADO):null}}]},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CONSULTAR,function(){return t.listaResultado.length>0&&t.operacionesMotivoCompras(p.a.ACCION_CONSULTAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EDITAR,function(){return t.listaResultado.length>0&&t.operacionesMotivoCompras(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ELIMINAR,function(){return t.listaResultado.length>0&&t.operacionesMotivoCompras(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(t){var e=document.getElementById("btnImprimirMotivoCompra");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(t){var e=document.getElementById("btnExportarMotivoCompra");return e&&e.click(),!1}))},t.prototype.ejecutarAccion=function(t){switch(t.accionChar){case"I":this.refrescarTabla(t.invCompraMotivoTOCopia,"I"),this.vistaFormulario=!1;break;case"U":this.refrescarTabla(t.invCompraMotivoTOCopia,"U"),this.vistaFormulario=!1}},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultado.length>0)(a=this.listaResultado.slice()).unshift(t),this.listaResultado=a,this.seleccionarFila(0);break;case"U":var o=this.listaResultado.findIndex(function(e){return e.cmCodigo===t.cmCodigo});(a=this.listaResultado.slice())[o]=t,this.listaResultado=a,this.seleccionarFila(o);break;case"D":var a;o=this.listaResultado.findIndex(function(e){return e.cmCodigo===t.cmCodigo});(a=this.listaResultado.slice()).splice(o,1),this.listaResultado=a,this.listaResultado.length>0&&this.seleccionarFila(0===o?0:o-1)}},t.prototype.listarTipos=function(){this.listaTipos=[];var t={empresa:p.a.KEY_EMPRESA_SELECT};this.tipoContableService.listarTipoContable(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarTipoContable=function(t){var e=this;this.listaTipos=t||[],this.listaTipos.length>0?this.tipoSeleccionado=this.tipoSeleccionado?this.listaTipos.find(function(t){return t.tipCodigo===e.tipoSeleccionado.tipCodigo}):this.listaTipos[0]:this.tipoSeleccionado=null},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.motivoComprasService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){this.setObjetoSeleccionado(t.rowIndex)},t.prototype.setObjetoSeleccionado=function(t){var e=this.gridApi?this.gridApi.getRowNode(t):null;this.objetoSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.objetoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.onResize=function(){this.isScreamMd=window.innerWidth>p.a.WINDOW_WIDTH_XS},W([Object(a.ViewChild)("menuOpciones"),H("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),W([Object(a.HostListener)("window:resize",["$event"]),H("design:type",Function),H("design:paramtypes",[]),H("design:returntype",void 0)],t.prototype,"onResize",null),t=W([Object(a.Component)({selector:"app-motivo-compras",template:o("j+WX"),styles:[o("oyPh")]}),H("design:paramtypes",[B.a,J.a,i.ActivatedRoute,_.a,E.b,C.a,u.HotkeysService,f.a,L.a,z.a])],t)}(),Y=function(){function t(t){this.vmEmpresa=null,this.vmCodigo=null,this.vmDetalle=null,this.vmFormaContabilizar=null,this.vmFormaImprimir=null,this.vmInactivo=!1,this.tipCodigo=null,this.usrCodigo=null,this.usrFechaInserta=null,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.vmEmpresa=t.vmEmpresa?t.vmEmpresa:this.vmEmpresa,this.vmCodigo=t.vmCodigo?t.vmCodigo:this.vmCodigo,this.vmDetalle=t.vmDetalle?t.vmDetalle:this.vmDetalle,this.vmFormaContabilizar=t.vmFormaContabilizar?t.vmFormaContabilizar:this.vmFormaContabilizar,this.vmFormaImprimir=t.vmFormaImprimir?t.vmFormaImprimir:this.vmFormaImprimir,this.vmInactivo=t.vmInactivo?t.vmInactivo:this.vmInactivo,this.tipCodigo=t.tipCodigo?t.tipCodigo:this.tipCodigo,this.usrCodigo=t.usrCodigo?t.usrCodigo:this.usrCodigo,this.usrFechaInserta=t.usrFechaInserta?t.usrFechaInserta:this.usrFechaInserta},t}(),X=o("FJOi"),$=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},q=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Z=function(){function t(t,e,o,a,i,n,r,s,c){this.tipoContableService=t,this.route=e,this.api=o,this.toastr=a,this.filasService=i,this.atajoService=n,this.utilService=r,this.archivoService=s,this.motivoVentasService=c,this.listaFormaImprimir=p.a.LISTA_MOTIVOS_VENTA_FORMA_IMPRIMIR,this.listaFormaContabilizar=p.a.LISTA_MOTIVOS_VENTA_FORMA_CONTABILIZAR,this.listaResultado=[],this.listaTipos=[],this.listaEmpresas=[],this.objetoSeleccionado=new Y,this.invVentaMotivoTO=new Y,this.tipoSeleccionado=new k.a,this.formaContabilizarSeleccionado="",this.formaImprimirSeleccionado="",this.constantes=p.a,this.tamanioEstructura=0,this.accion=null,this.codigoCuenta=null,this.tituloForm=p.a.TITULO_FILTROS,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.vistaFormulario=!1,this.parametrosFormulario={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.motivoVentas,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},t.prototype.operacionesMotivoVentas=function(t){switch(t){case p.a.ACCION_CONSULTAR:this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.invVentaMotivoTO=new Y(this.objetoSeleccionado),this.vistaFormulario=!0,this.parametrosFormulario={invVentaMotivoTO:new Y(this.objetoSeleccionado),listaTipos:this.listaTipos,accion:p.a.ACCION_CONSULTAR});break;case p.a.ACCION_CREAR:this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={invVentaMotivoTO:new Y,listaTipos:this.listaTipos,accion:p.a.ACCION_CREAR});break;case p.a.ACCION_EDITAR:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={invVentaMotivoTO:new Y(this.objetoSeleccionado),listaTipos:this.listaTipos,accion:p.a.ACCION_EDITAR});break;case p.a.ACCION_EDITAR_ESTADO:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.invVentaMotivoTO=new Y(this.objetoSeleccionado),this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.actualizarEstadoInvVentaMotivoTO());break;case p.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.invVentaMotivoTO=new Y(this.objetoSeleccionado),this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.eliminarInvVentaMotivoTO())}},t.prototype.actualizarEstadoInvVentaMotivoTO=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invVentaMotivoTO)),o={title:e.vmInactivo?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(e.vmInactivo?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Motivo de venta: "+e.vmDetalle,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,e.vmInactivo=!e.vmInactivo,t.api.post("todocompuWS/inventarioWebController/modificarEstadoInvVentaMotivoTO",{invVentaMotivoTO:e},p.a.KEY_EMPRESA_SELECT).then(function(o){t.cargando=!1,o&&o.extraInfo?(t.refrescarTabla(e,"U"),t.toastr.success(o.operacionMensaje,"Aviso")):t.toastr.warning(o.operacionMensaje,"Aviso"),t.resetear()}).catch(function(e){return t.utilService.handleError(e,t)})):t.resetear()})}else this.resetear()},t.prototype.eliminarInvVentaMotivoTO=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invVentaMotivoTO)),o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,t.api.post("todocompuWS/inventarioWebController/eliminarInvVentaMotivoTO",{invVentaMotivoTO:e},p.a.KEY_EMPRESA_SELECT).then(function(o){t.cargando=!1,o&&o.extraInfo?(t.refrescarTabla(e,"D"),t.toastr.success(o.operacionMensaje,"Aviso")):t.toastr.warning(o.operacionMensaje,"Aviso"),t.resetear()}).catch(function(e){return t.utilService.handleError(e,t)})):t.resetear()})}else this.resetear()},t.prototype.imprimirMotivoVenta=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteMotivoVenta",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoMotivoVenta.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarMotivoVenta=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteMotivoVenta",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoMotivoVenta_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.tipoSeleccionado=null,this.listarTipos(),this.limpiarResultado()},t.prototype.resetear=function(){this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.refreshGrid()},t.prototype.cancelar=function(t){this.vistaFormulario=!1,this.refreshGrid()},t.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasService.actualizarFilas("0","0")},t.prototype.generarOpciones=function(){var t=this,e=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,o=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&!this.objetoSeleccionado.vmInactivo,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.objetoSeleccionado.vmInactivo,i=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesMotivoVentas(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(){return e?t.operacionesMotivoVentas(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!i,command:function(){return i?t.operacionesMotivoVentas(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?t.operacionesMotivoVentas(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!o,command:function(){return o?t.operacionesMotivoVentas(p.a.ACCION_EDITAR_ESTADO):null}}]},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return t.listaResultado.length>0&&(t.activar=!t.activar),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EDITAR,function(){return t.listaResultado.length>0&&t.operacionesMotivoVentas(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ELIMINAR,function(){return t.listaResultado.length>0&&t.operacionesMotivoVentas(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirMotivoVenta");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarMotivoVenta");return t&&t.click(),!1}))},t.prototype.ejecutarAccion=function(t){switch(t.accionChar){case"I":this.refrescarTabla(t.invVentaMotivoTOCopia,"I"),this.vistaFormulario=!1;break;case"U":this.refrescarTabla(t.invVentaMotivoTOCopia,"U"),this.vistaFormulario=!1}},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultado.length>0)(a=this.listaResultado.slice()).unshift(t),this.listaResultado=a,this.seleccionarFila(0);break;case"U":var o=this.listaResultado.findIndex(function(e){return e.vmCodigo===t.vmCodigo});(a=this.listaResultado.slice())[o]=t,this.listaResultado=a,this.seleccionarFila(o);break;case"D":var a;o=this.listaResultado.findIndex(function(e){return e.vmCodigo===t.vmCodigo});(a=this.listaResultado.slice()).splice(o,1),this.listaResultado=a,this.listaResultado.length>0&&this.seleccionarFila(0===o?0:o-1)}},t.prototype.buscarInvVentaMotivo=function(t){this.cargando=!0,this.limpiarResultado(),this.filasTiempo.iniciarContador();var e={empresa:this.empresaSeleccionada.empCodigo,activos:t};this.motivoVentasService.listarInvVentaMotivoTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvVentaMotivoTO=function(t){this.listaResultado=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.listarTipos=function(){this.listaTipos=[];var t={empresa:p.a.KEY_EMPRESA_SELECT};this.tipoContableService.listarTipoContable(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarTipoContable=function(t){var e=this;this.listaTipos=t||[],this.listaTipos.length>0?this.tipoSeleccionado=this.tipoSeleccionado?this.listaTipos.find(function(t){return t.tipCodigo===e.tipoSeleccionado.tipCodigo}):this.listaTipos[0]:this.tipoSeleccionado=null},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.motivoVentasService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.objetoSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.objetoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},$([Object(a.ViewChild)("menuOpciones"),q("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),$([Object(a.HostListener)("window:resize",["$event"]),q("design:type",Function),q("design:paramtypes",[]),q("design:returntype",void 0)],t.prototype,"onResize",null),t=$([Object(a.Component)({selector:"app-motivo-ventas",template:o("E1AQ"),styles:[o("DswH")]}),q("design:paramtypes",[B.a,i.ActivatedRoute,_.a,E.b,C.a,u.HotkeysService,f.a,L.a,X.a])],t)}(),Q=function(){function t(t){this.fpSecuencial=null,this.fpDetalle=null,this.fpInactivo=!1,this.secCodigo=null,this.ctaCodigo=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.fpSecuencial=t.fpSecuencial?t.fpSecuencial:this.fpSecuencial,this.fpDetalle=t.fpDetalle?t.fpDetalle:this.fpDetalle,this.fpInactivo=t.fpInactivo?t.fpInactivo:this.fpInactivo,this.secCodigo=t.secCodigo?t.secCodigo:this.secCodigo,this.ctaCodigo=t.ctaCodigo?t.ctaCodigo:this.ctaCodigo,this.usrEmpresa=t.usrEmpresa?t.usrEmpresa:this.usrEmpresa,this.usrCodigo=t.usrCodigo?t.usrCodigo:this.usrCodigo,this.usrFechaInserta=t.usrFechaInserta?t.usrFechaInserta:this.usrFechaInserta},t}(),tt=o("kPjv"),et=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ot=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},at=function(){function t(t,e,o,a,i,n,r,s,c,l){this.planContableService=t,this.route=e,this.api=o,this.toastr=a,this.filasService=i,this.sectorService=n,this.formaPagoService=r,this.atajoService=s,this.archivoService=c,this.utilService=l,this.listaResultado=[],this.listaSectores=[],this.sectorSeleccionado=new I.a,this.objetoSeleccionado=new Q,this.invComprasFormaPagoTO=new Q,this.listaEmpresas=[],this.constantes=p.a,this.tamanioEstructura=0,this.indexTablaEditar=0,this.accion=null,this.codigoCuenta=null,this.tituloForm=p.a.TITULO_FILTROS,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.vistaFormulario=!1,this.parametrosFormulario={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.formaPagoInv,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},t.prototype.buscarInvComprasFormaPagoTO=function(t){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivos:t};this.filasTiempo.iniciarContador(),this.formaPagoService.listarInvListaComprasFormaPagoTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvListaComprasFormaPagoTO=function(t){this.listaResultado=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.listarSectores=function(){this.listaSectores=[],this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.operacionesFormaPago=function(t){var e=this;switch(t){case p.a.ACCION_ELIMINAR:this.formaPagoService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.invComprasFormaPagoTO=new Q(this.objetoSeleccionado),this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.eliminarInvComprasFormaPagoTO());break;case p.a.ACCION_CREAR:this.formaPagoService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CREAR,listaSectores:this.listaSectores,tamanioEstructura:this.tamanioEstructura,invComprasFormaPagoTO:this.invComprasFormaPagoTO});break;case p.a.ACCION_CONSULTAR:this.vistaFormulario=!0,this.parametrosFormulario={invComprasFormaPagoTO:new Q(this.objetoSeleccionado),listaSectores:this.listaSectores,accion:p.a.ACCION_CONSULTAR,tamanioEstructura:this.tamanioEstructura};break;case p.a.ACCION_EDITAR:this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={invComprasFormaPagoTO:new Q(this.objetoSeleccionado),accion:p.a.ACCION_EDITAR,listaSectores:this.listaSectores,tamanioEstructura:this.tamanioEstructura,listaResultado:this.listaResultado});break;case p.a.ACCION_EDITAR_ESTADO:this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.invComprasFormaPagoTO=new Q(this.objetoSeleccionado),this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.indexTablaEditar=this.invComprasFormaPagoTO.fpSecuencial?this.listaResultado.findIndex(function(t){return t.fpSecuencial===e.invComprasFormaPagoTO.fpSecuencial}):this.listaResultado.findIndex(function(t){return t.ctaCodigo===e.invComprasFormaPagoTO.ctaCodigo}),this.actualizarEstadoInvComprasFormaPagoTO())}},t.prototype.ejecutarAccion=function(t){switch(t.accionChar){case"I":this.accionInvComprasFormaPagoTO(t.invComprasFormaPagoCopia,"I"),this.accion=p.a.ACCION_CREAR;break;case"M":this.accionInvComprasFormaPagoTO(t.invComprasFormaPagoCopia,"M"),this.accion=p.a.ACCION_EDITAR,this.indexTablaEditar=t.indexTablaEditar}},t.prototype.accionInvComprasFormaPagoTO=function(t,e){var o=this;this.api.post("todocompuWS/inventarioWebController/accionInvComprasPagosForma",{invComprasFormaPagoTO:t,accion:e},p.a.KEY_EMPRESA_SELECT).then(function(e){if(o.cargando=!1,e&&e.extraInfo){switch(o.accion){case p.a.ACCION_CREAR:t.fpSecuencial=e.extraInfo.fpSecuencial,o.refrescarTabla(t,"I"),o.vistaFormulario=!1;break;case p.a.ACCION_EDITAR:o.refrescarTabla(t,"U"),o.vistaFormulario=!1;break;case p.a.ACCION_ELIMINAR:o.refrescarTabla(t,"D")}o.toastr.success(e.operacionMensaje,"Aviso"),o.resetear()}else o.accion===p.a.ACCION_ELIMINAR&&o.resetear(),o.toastr.warning(e.operacionMensaje,"Aviso")}).catch(function(t){return o.utilService.handleError(t,o)})},t.prototype.actualizarEstadoInvComprasFormaPagoTO=function(){var t=this;if(this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invComprasFormaPagoTO)),o={title:e.fpInactivo?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(e.fpInactivo?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Forma de pago: "+e.fpDetalle,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,e.fpInactivo=!e.fpInactivo,e.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.api.post("todocompuWS/inventarioWebController/modificarEstadoInvComprasPagosForma",{invComprasFormaPagoTO:e},p.a.KEY_EMPRESA_SELECT).then(function(o){t.cargando=!1,o&&o.extraInfo?(t.refrescarTabla(e,"U"),t.toastr.success(o.operacionMensaje,"Aviso")):t.toastr.warning(o.operacionMensaje,"Aviso"),t.resetear()}).catch(function(e){return t.utilService.handleError(e,t)})):t.resetear()})}},t.prototype.eliminarInvComprasFormaPagoTO=function(){var t=this;if(this.formaPagoService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invComprasFormaPagoTO));e.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim();var o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,t.accionInvComprasFormaPagoTO(e,"E")):t.resetear()})}},t.prototype.imprimirFormaPago=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoFormaPago:this.listaResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteFormaPago",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoFormaPago.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarFormaPago=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoFormaPago:this.listaResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteFormaPago",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoFormaPago_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.cambiarEmpresaSeleccionada=function(){var t=this;p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listaResultado=[],this.sectorSeleccionado=null,this.planContableService.getTamanioListaConEstructura({empresa:p.a.KEY_EMPRESA_SELECT},p.a.KEY_EMPRESA_SELECT).then(function(e){t.tamanioEstructura=e[0].estGrupo1+e[0].estGrupo2+e[0].estGrupo3+e[0].estGrupo4+e[0].estGrupo5+e[0].estGrupo6}).catch(function(e){t.utilService.handleError(e,t)}),this.listarSectores(),this.filasService.actualizarFilas("0","0")},t.prototype.resetear=function(){this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.actualizarFilas()},t.prototype.cancelar=function(){this.accion=null,this.vistaFormulario=!1,this.activar=!1},t.prototype.generarOpciones=function(){var t=this,e=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,o=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&!this.objetoSeleccionado.fpInactivo,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.objetoSeleccionado.fpInactivo,i=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesFormaPago(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(){return e?t.operacionesFormaPago(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!i,command:function(){return i?t.operacionesFormaPago(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?t.operacionesFormaPago(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!o,command:function(){return o?t.operacionesFormaPago(p.a.ACCION_EDITAR_ESTADO):null}}]},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return t.listaResultado.length>0&&(t.activar=!t.activar),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EDITAR,function(){return t.listaResultado.length>0&&t.operacionesFormaPago(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ELIMINAR,function(){return t.listaResultado.length>0&&t.operacionesFormaPago(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirFormaPago");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarFormaPago");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelarFormaPago");return t&&t.click(),!1}))},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultado.length>0)(o=this.listaResultado.slice()).unshift(t),this.listaResultado=o,this.seleccionarFila(0);break;case"U":(o=this.listaResultado.slice())[this.indexTablaEditar]=t,this.listaResultado=o,this.seleccionarFila(this.indexTablaEditar);break;case"D":var o,a=this.listaResultado.findIndex(function(e){return e.ctaCodigo===t.ctaCodigo});(o=this.listaResultado.slice()).splice(a,1),this.listaResultado=o,this.listaResultado.length>0&&this.seleccionarFila(0===a?0:a-1)}},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.formaPagoService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.objetoSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.objetoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},et([Object(a.ViewChild)("menuOpciones"),ot("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),et([Object(a.HostListener)("window:resize",["$event"]),ot("design:type",Function),ot("design:paramtypes",[]),ot("design:returntype",void 0)],t.prototype,"onResize",null),t=et([Object(a.Component)({selector:"app-forma-pago",template:o("BtYB"),styles:[o("IMsv")]}),ot("design:paramtypes",[y.a,i.ActivatedRoute,_.a,E.b,C.a,T.a,tt.a,u.HotkeysService,L.a,f.a])],t)}(),it=o("ydE8"),nt=o("iQoG"),rt=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},st=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ct=function(){function t(t,e,o,a,i,n,r,s,c){this.clienteCategoriaService=t,this.route=e,this.api=o,this.toastr=a,this.filasService=i,this.atajoService=n,this.auth=r,this.archivoService=s,this.utilService=c,this.listaResultado=[],this.objetoSeleccionado=new it.a,this.invClienteCategoriaTO=new it.a,this.listaEmpresas=[],this.constantes=p.a,this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.classIcon=p.a.ICON_FILTRAR,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.categoriaClienteInv,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},t.prototype.listarInvClienteCategoriaTO=function(){this.cargando=!0,this.filasTiempo.iniciarContador();var t={empresa:this.empresaSeleccionada.empCodigo};this.clienteCategoriaService.listarInvClienteCategoriaTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvClienteCategoriaTO=function(t){this.filasTiempo.finalizarContador(),this.listaResultado=t,this.cargando=!1},t.prototype.operacionesCategoria=function(t){switch(t){case p.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.invClienteCategoriaTO=new it.a(this.objetoSeleccionado),this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.classIcon=p.a.ICON_FILTRAR,this.eliminarCategoria());break;case p.a.ACCION_CREAR:this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.invClienteCategoriaTO=new it.a,this.accion=p.a.ACCION_CREAR,this.activar=!1,this.tituloForm=p.a.TITULO_FORM_NUEVO_CATEGORIA_CLIENTE,this.classIcon=p.a.ICON_FILTRO_NUEVO);break;case p.a.ACCION_EDITAR:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.invClienteCategoriaTO=new it.a(this.objetoSeleccionado),this.accion=p.a.ACCION_EDITAR,this.activar=!1,this.tituloForm=p.a.TITULO_FORM_EDITAR_CATEGORIA_CLIENTE,this.classIcon=p.a.ICON_FILTRO_EDITAR)}},t.prototype.accionesCategoria=function(t,e){var o=this;this.api.post("todocompuWS/inventarioWebController/accionInvClienteCategoria",{invClienteCategoriaTO:t,accion:e},p.a.KEY_EMPRESA_SELECT).then(function(e){if(o.cargando=!1,e&&e.extraInfo){switch(o.accion){case p.a.ACCION_CREAR:o.refrescarTabla(t,"I");break;case p.a.ACCION_EDITAR:o.refrescarTabla(t,"U");break;case p.a.ACCION_ELIMINAR:o.refrescarTabla(t,"D")}o.toastr.success(e.operacionMensaje,p.a.TAG_AVISO),o.resetear()}else o.accion===p.a.ACCION_ELIMINAR&&o.resetear(),o.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO)}).catch(function(t){return o.utilService.handleError(t,o)})},t.prototype.insertarCategoria=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invClienteCategoriaTO));this.setearValoresCategoria(o),this.accionesCategoria(o,"I")}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.actualizarCategoria=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invClienteCategoriaTO));this.setearValoresCategoria(o),this.accionesCategoria(o,"M")}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.eliminarCategoria=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invClienteCategoriaTO));e.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim();var o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,t.accionesCategoria(e,"E")):t.resetear()})}},t.prototype.imprimirCategoriaCliente=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoCategorias:this.listaResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteCategoriaCliente",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoCategoriasCliente.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarCategoriaCliente=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoCategorias:this.listaResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteCategoriaCliente",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoCategoriasCliente_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.setearValoresCategoria=function(t){t.ccEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.usrCodigo=this.auth.getCodigoUser()},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listaResultado=[],this.filasService.actualizarFilas("0","0")},t.prototype.resetear=function(){this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.filasService.actualizarFilas(this.listaResultado.length,this.filasTiempo.getTiempo())},t.prototype.generarOpciones=function(){var t=this,e=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,o=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(){return e?t.operacionesCategoria(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?t.operacionesCategoria(p.a.ACCION_ELIMINAR):null}}]},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return t.listaResultado.length>0&&(t.activar=!t.activar),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EDITAR,function(){return t.listaResultado.length>0&&t.operacionesCategoria(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ELIMINAR,function(){return t.listaResultado.length>0&&t.operacionesCategoria(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){return document.getElementById("btnGuardar").click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(e){t.listaResultado.length>0&&document.getElementById("btnImprimirCategoriaCliente").click();return!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(e){t.listaResultado.length>0&&document.getElementById("btnExportarCategoriaCliente").click();return!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(){return t.resetear(),!1}))},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultado.length>0)(o=this.listaResultado.slice()).unshift(t),this.listaResultado=o,this.seleccionarFila(0);break;case"U":var o,a=this.listaResultado.findIndex(function(e){return e.ccCodigo===t.ccCodigo});(o=this.listaResultado.slice())[a]=t,this.listaResultado=o,this.seleccionarFila(a);break;case"D":a=this.listaResultado.findIndex(function(e){return e.ccCodigo===t.ccCodigo});this.listaResultado=this.listaResultado.filter(function(t,e){return e!=a}),this.listaResultado.length>0&&this.seleccionarFila(0===a?0:a-1)}},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.clienteCategoriaService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.objetoSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.objetoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},rt([Object(a.ViewChild)("menuOpciones"),st("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),rt([Object(a.HostListener)("window:resize",["$event"]),st("design:type",Function),st("design:paramtypes",[]),st("design:returntype",void 0)],t.prototype,"onResize",null),t=rt([Object(a.Component)({selector:"app-cliente-categoria",template:o("NOyn"),styles:[o("F6hq")]}),st("design:paramtypes",[nt.a,i.ActivatedRoute,_.a,E.b,C.a,u.HotkeysService,J.a,L.a,f.a])],t)}(),lt=o("QcxW"),dt=o("c3nV"),pt=o("40E6"),mt=o("egWh"),ut=o("gKqU"),ht=o("d+pv"),vt=o("X2CA"),Ct=o("G059"),ft=o("S3MV"),At=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},gt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},bt=function(){function t(t,e,o,a,i,n,r,s){this.route=t,this.toastr=e,this.filasService=o,this.atajoService=a,this.utilService=i,this.proveedorService=n,this.archivoService=r,this.proveedorCategoriaService=s,this.listaResultadoProveedores=[],this.listaCategorias=[],this.listaEmpresas=[],this.proveeedorSeleccionado=new ht.a,this.categoriaSeleccionada=new ft.a,this.constantes=p.a,this.cargando=!1,this.activarProveedor=!1,this.isScreamMd=!0,this.parametrosFormulario={accion:null,empresaSeleccionada:null,invProveedorTO:null,listadoCategorias:[],tituloFormulario:null,activar:!1},this.vistaListado=!0,this.vistaFormulario=!1,this.filasTiempo=new P.a,this.filtroGlobal="",this.busqueda=null,this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.proveedorInv,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},t.prototype.operacionesProveedor=function(t){switch(t){case p.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.activarProveedor=!1,this.parametrosFormulario.empresa=this.empresaSeleccionada,this.parametrosFormulario.accion=p.a.ACCION_ELIMINAR,this.parametrosFormulario.invProveedorTO=this.proveeedorSeleccionado,this.vistaFormulario=!0,this.vistaListado=!0);break;case p.a.ACCION_CREAR:this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&this.empresaSeleccionada.listaSisPermisoTO.gruCrearProveedores&&(this.parametrosFormulario.empresa=this.empresaSeleccionada,this.parametrosFormulario.accion=p.a.ACCION_CREAR,this.parametrosFormulario.invProveedorTO=new ht.a,this.parametrosFormulario.listadoCategorias=this.listaCategorias,this.parametrosFormulario.tituloFormulario=p.a.TITULO_FORM_NUEVO_PROVEEDOR,this.parametrosFormulario.activar=!0,this.activarProveedor=!0,this.vistaFormulario=!0,this.vistaListado=!1);break;case p.a.ACCION_EDITAR:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&this.empresaSeleccionada.listaSisPermisoTO.gruModificarProveedores&&(this.parametrosFormulario.empresa=this.empresaSeleccionada,this.parametrosFormulario.accion=p.a.ACCION_EDITAR,this.parametrosFormulario.invProveedorTO=this.proveeedorSeleccionado,this.parametrosFormulario.listadoCategorias=this.listaCategorias,this.parametrosFormulario.tituloFormulario=p.a.TITULO_FORM_EDITAR_PROVEEDOR,this.parametrosFormulario.activar=!0,this.activarProveedor=!0,this.vistaFormulario=!0,this.vistaListado=!1);break;case p.a.ACCION_EDITAR_ESTADO:this.utilService.verificarPermiso(p.a.ACCION_EDITAR_ESTADO,this,!0)&&this.empresaSeleccionada.listaSisPermisoTO.gruModificarProveedores&&(this.parametrosFormulario.empresa=this.empresaSeleccionada,this.parametrosFormulario.accion=p.a.ACCION_EDITAR_ESTADO,this.parametrosFormulario.invProveedorTO=this.proveeedorSeleccionado,this.vistaFormulario=!0,this.vistaListado=!0);break;case p.a.ACCION_CONSULTAR:this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)&&(this.parametrosFormulario.empresa=this.empresaSeleccionada,this.parametrosFormulario.accion=p.a.ACCION_CONSULTAR,this.parametrosFormulario.invProveedorTO=this.proveeedorSeleccionado,this.parametrosFormulario.listadoCategorias=this.listaCategorias,this.parametrosFormulario.tituloFormulario=p.a.TITULO_FORM_CONSULTAR_PROVEEDOR,this.parametrosFormulario.activar=!0,this.activarProveedor=!0,this.vistaFormulario=!0,this.vistaListado=!1)}},t.prototype.listarProveedores=function(t){this.limpiarResultado(),this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,categoria:null,busqueda:this.busqueda,inactivos:t};this.proveedorService.listarInvProveedorTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvProveedorTO=function(t){this.cargando=!1,0!=t.length&&(this.listaResultadoProveedores=t)},t.prototype.listarInvProveedorCategoriaTO=function(){this.cargando=!0,this.proveedorCategoriaService.listarInvProveedorCategoria({empresa:this.empresaSeleccionada.empCodigo},this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvProveedorCategoriaTO=function(t){var e=this;this.listaCategorias=t,this.listaCategorias.length>0?this.categoriaSeleccionada=this.categoriaSeleccionada&&this.categoriaSeleccionada.pcCodigo?this.listaCategorias.find(function(t){return t.pcCodigo===e.categoriaSeleccionada.pcCodigo}):this.listaCategorias[0]:this.categoriaSeleccionada=null,this.cargando=!1},t.prototype.imprimirProveedor=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoProveedores:this.listaResultadoProveedores};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteProveedor",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoProveedores.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarProveedor=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoProveedores:this.listaResultadoProveedores};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteProveedor",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoProveedores_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado(),this.listarInvProveedorCategoriaTO()},t.prototype.limpiarResultado=function(){this.listaResultadoProveedores=[],this.filtroGlobal="",this.filasService.actualizarFilas("0","0"),this.busqueda?(document.getElementById("btnBuscarProveedor").disabled=!1,document.getElementById("btnInactivo").disabled=!1):(document.getElementById("btnBuscarProveedor").disabled=!0,document.getElementById("btnInactivo").disabled=!0)},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarProveedor");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarProveedor");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevoProveedor");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(t){var e=document.getElementById("btnImprimirProveedor");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(t){var e=document.getElementById("btnExportarProveedor");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EDITAR,function(){return t.listaResultadoProveedores.length>0&&t.operacionesProveedor(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ELIMINAR,function(){return t.listaResultadoProveedores.length>0&&t.operacionesProveedor(p.a.ACCION_ELIMINAR),!1}))},t.prototype.generarOpciones=function(){var t=this,e=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.empresaSeleccionada.listaSisPermisoTO.gruModificarProveedores,o=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.empresaSeleccionada.listaSisPermisoTO.gruModificarProveedores&&!this.proveeedorSeleccionado.provInactivo,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.empresaSeleccionada.listaSisPermisoTO.gruModificarProveedores&&this.proveeedorSeleccionado.provInactivo,i=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesProveedor(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(){return e?t.operacionesProveedor(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!i,command:function(){return i?t.operacionesProveedor(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?t.operacionesProveedor(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!o,command:function(){return o?t.operacionesProveedor(p.a.ACCION_EDITAR_ESTADO):null}}]},t.prototype.consultarProveedor=function(){this.operacionesProveedor(p.a.ACCION_CONSULTAR)},t.prototype.cambiarEstadoActivar=function(t){this.activarProveedor=t},t.prototype.cerrarFormularioProveedor=function(t){this.vistaFormulario=t.mostrarFormulario,t.accion&&(this.listarInvProveedorCategoriaTO(),t.accion===p.a.ACCION_CREAR?this.refrescarTabla(t.invProveedorTO,"I"):t.accion===p.a.ACCION_EDITAR||t.accion===p.a.ACCION_EDITAR_ESTADO?this.refrescarTabla(t.invProveedorTO,"U"):t.accion===p.a.ACCION_ELIMINAR&&this.refrescarTabla(t.invProveedorTO,"D")),this.generarAtajosTeclado(),this.vistaListado=!0,this.activarProveedor=!1},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultadoProveedores.length>0)(a=this.listaResultadoProveedores.slice()).unshift(t),this.listaResultadoProveedores=a,this.seleccionarFila(0);break;case"U":var o=this.listaResultadoProveedores.findIndex(function(e){return e.provCodigo===t.provCodigo});(a=this.listaResultadoProveedores.slice())[o]=t,this.listaResultadoProveedores=a,this.seleccionarFila(o);break;case"D":var a;o=this.listaResultadoProveedores.findIndex(function(e){return e.provCodigo===t.provCodigo});(a=this.listaResultadoProveedores.slice()).splice(o,1),this.listaResultadoProveedores=a,this.listaResultadoProveedores.length>0&&this.seleccionarFila(0===o?0:o-1)}},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.proveedorService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.proveeedorSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.proveeedorSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},At([Object(a.ViewChild)("menuOpciones"),gt("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),At([Object(a.HostListener)("window:resize",["$event"]),gt("design:type",Function),gt("design:paramtypes",[]),gt("design:returntype",void 0)],t.prototype,"onResize",null),t=At([Object(a.Component)({selector:"app-proveedor",template:o("qBRU"),styles:[o("KP4f")]}),gt("design:paramtypes",[i.ActivatedRoute,E.b,C.a,u.HotkeysService,f.a,vt.a,L.a,Ct.a])],t)}(),St=o("5TEY"),Ot=o("dXti"),Rt=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},It=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Tt=function(){function t(t,e,o,a,i,n,r,s,c){this.auth=t,this.api=e,this.route=o,this.filasService=a,this.toastr=i,this.atajoService=n,this.utilService=r,this.archivoService=s,this.motivoConsumoService=c,this.listaFormaContabilizar=p.a.LISTA_MOTIVOS_CONSUMOS_FORMA_CONTABILIZAR,this.listaResultadoConsumosMotivo=[],this.listaEmpresas=[],this.consumoMotivoSeleccionado=new St.a,this.invConsumosMotivoTO=new St.a,this.constantes=p.a,this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new P.a,this.filtroGlobal="",this.vistaFormulario=!1,this.parametrosFormulario={},this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.motivoConsumos,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajos(),this.iniciarAgGrid()},t.prototype.buscarInvConsumoMotivo=function(t){this.limpiarResultado(),this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivos:t};this.filasTiempo.iniciarContador(),this.motivoConsumoService.listarInvConsumosMotivoTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvConsumosMotivoTO=function(t){this.listaResultadoConsumosMotivo=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.operacionesConsumosMotivo=function(t){switch(t){case p.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.invConsumosMotivoTO=new St.a(this.consumoMotivoSeleccionado),this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.eliminarInvConsumoMotivo());break;case p.a.ACCION_CREAR:this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={invConsumosMotivoTO:new St.a,accion:p.a.ACCION_CREAR});break;case p.a.ACCION_CONSULTAR:this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CONSULTAR,invConsumosMotivoTO:new St.a(this.consumoMotivoSeleccionado)});break;case p.a.ACCION_EDITAR:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_EDITAR,invConsumosMotivoTO:new St.a(this.consumoMotivoSeleccionado)});break;case p.a.ACCION_EDITAR_ESTADO:this.utilService.verificarPermiso(p.a.ACCION_EDITAR_ESTADO,this,!0)&&(this.invConsumosMotivoTO=new St.a(this.consumoMotivoSeleccionado),this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.actualizarEstadoInvConsumoMotivo())}},t.prototype.actualizarEstadoInvConsumoMotivo=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invConsumosMotivoTO)),o={title:e.cmInactivo?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(e.cmInactivo?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Motivo de consumo: "+e.cmDetalle,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,e.cmInactivo=!e.cmInactivo,t.setearValoresInvConsumoMotivo(e),t.api.post("todocompuWS/inventarioWebController/modificarEstadoInvConsumosMotivoTO",{invConsumosMotivoTO:e},p.a.KEY_EMPRESA_SELECT).then(function(o){t.cargando=!1,o&&o.extraInfo?(t.refrescarTabla(e,"U"),t.toastr.success(o.operacionMensaje,"Aviso")):t.toastr.warning(o.operacionMensaje,"Aviso"),t.resetearFormulario()}).catch(function(e){return t.utilService.handleError(e,t)})):t.resetearFormulario()})}},t.prototype.eliminarInvConsumoMotivo=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invConsumosMotivoTO));e.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim();var o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,t.accionInvConsumoMotivo(e,"E")):t.resetearFormulario()})}},t.prototype.imprimirMotivoConsumo=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultadoConsumosMotivo};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteMotivoConsumo",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoMotivoConsumo.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarMotivoConsumo=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultadoConsumosMotivo};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteMotivoConsumo",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoMotivoConsumo_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.ejecutarAccion=function(t){switch(t.accionChar){case"I":this.accionInvConsumoMotivo(t.invConsumoMotivoCopia,"I"),this.accion=p.a.ACCION_CREAR;break;case"M":this.accionInvConsumoMotivo(t.invConsumoMotivoCopia,"M"),this.accion=p.a.ACCION_EDITAR}},t.prototype.accionInvConsumoMotivo=function(t,e){var o=this;this.api.post("todocompuWS/inventarioWebController/accionInvConsumosMotivo",{invConsumosMotivoTO:t,accion:e},p.a.KEY_EMPRESA_SELECT).then(function(e){if(o.cargando=!1,e&&e.extraInfo){switch(o.accion){case p.a.ACCION_CREAR:o.refrescarTabla(t,"I"),o.vistaFormulario=!1;break;case p.a.ACCION_EDITAR:o.refrescarTabla(t,"U"),o.vistaFormulario=!1;break;case p.a.ACCION_EDITAR_ESTADO:o.refrescarTabla(t,"U");break;case p.a.ACCION_ELIMINAR:o.refrescarTabla(t,"D")}o.toastr.success(e.operacionMensaje,"Aviso"),o.resetearFormulario()}else o.accion===p.a.ACCION_ELIMINAR&&o.resetearFormulario(),o.toastr.warning(e.operacionMensaje,"Aviso")}).catch(function(t){return o.utilService.handleError(t,o)})},t.prototype.setearValoresInvConsumoMotivo=function(t){t.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.usrCodigo=this.auth.getCodigoUser().trim()},t.prototype.cancelar=function(t){this.vistaFormulario=!1,this.activar=!1},t.prototype.resetearFormulario=function(){this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.invConsumosMotivoTO=new St.a,this.refreshGrid()},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado()},t.prototype.limpiarResultado=function(){this.listaResultadoConsumosMotivo=[],this.filasService.actualizarFilas("0","0")},t.prototype.generarAtajos=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarMotivoConsumo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarMotivoconsumo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirMotivoConsumo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarMotivoConsumo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevoMotivoConsumo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EDITAR,function(){return!t.accion&&t.listaResultadoConsumosMotivo.length>0&&t.operacionesConsumosMotivo(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ELIMINAR,function(){return!t.accion&&t.listaResultadoConsumosMotivo.length>0&&t.operacionesConsumosMotivo(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardarMotivoConsumo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelarMotivoConsumo");return t&&t.click(),!1}))},t.prototype.generarOpciones=function(){var t=this,e=this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0),o=this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&!this.consumoMotivoSeleccionado.cmInactivo,a=this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&this.consumoMotivoSeleccionado.cmInactivo,i=this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0);this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesConsumosMotivo(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(){return e?t.operacionesConsumosMotivo(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!i,command:function(){return i?t.operacionesConsumosMotivo(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?t.operacionesConsumosMotivo(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!o,command:function(){return o?t.operacionesConsumosMotivo(p.a.ACCION_EDITAR_ESTADO):null}}]},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultadoConsumosMotivo.length>0)(a=this.listaResultadoConsumosMotivo.slice()).unshift(t),this.listaResultadoConsumosMotivo=a,this.seleccionarFila(0);break;case"U":var o=this.listaResultadoConsumosMotivo.findIndex(function(e){return e.cmCodigo===t.cmCodigo});(a=this.listaResultadoConsumosMotivo.slice())[o]=t,this.listaResultadoConsumosMotivo=a,this.seleccionarFila(o);break;case"D":var a;o=this.listaResultadoConsumosMotivo.findIndex(function(e){return e.cmCodigo===t.cmCodigo});(a=this.listaResultadoConsumosMotivo.slice()).splice(o,1),this.listaResultadoConsumosMotivo=a,this.listaResultadoConsumosMotivo.length>0&&this.seleccionarFila(0===o?0:o-1)}},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.motivoConsumoService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.consumoMotivoSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.consumoMotivoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.onResize=function(){this.isScreamMd=window.innerWidth>p.a.WINDOW_WIDTH_XS},Rt([Object(a.ViewChild)("menuOpciones"),It("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),Rt([Object(a.HostListener)("window:resize",["$event"]),It("design:type",Function),It("design:paramtypes",[]),It("design:returntype",void 0)],t.prototype,"onResize",null),t=Rt([Object(a.Component)({selector:"app-motivo-consumos",template:o("sFG0"),styles:[o("Nrf3")]}),It("design:paramtypes",[J.a,_.a,i.ActivatedRoute,C.a,E.b,u.HotkeysService,f.a,L.a,Ot.a])],t)}(),Et=function(){function t(t){this.pmEmpresa="",this.pmCodigo="",this.pmDetalle="",this.pmInactivo=!1,this.usrCodigo="",this.usrFechaInserta="",t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.pmEmpresa=t.pmEmpresa?t.pmEmpresa:this.pmEmpresa,this.pmCodigo=t.pmCodigo?t.pmCodigo:this.pmCodigo,this.pmDetalle=t.pmDetalle?t.pmDetalle:this.pmDetalle,this.pmInactivo=t.pmInactivo?t.pmInactivo:this.pmInactivo,this.usrCodigo=t.usrCodigo?t.usrCodigo:this.usrCodigo,this.usrFechaInserta=t.usrFechaInserta?t.usrFechaInserta:this.usrFechaInserta},t}(),_t=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},yt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Mt=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvProformaMotivoTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvProformaMotivoTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvProformaMotivoTO(t.extraInfo):(e.despuesDeListarInvProformaMotivoTO([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,e)})},t.prototype.insertarInvProformasMotivoTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/insertarInvProformaMotivoTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeInsertarProformasMotivoTO(t):(a.toastr.warning(t.operacionMensaje,"Aviso"),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,e)})},t.prototype.actualizarInvProformasMotivo=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarInvProformaMotivoTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeActualizarProformasMotivoTO(t):(a.toastr.warning(t.operacionMensaje,"Aviso"),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,e)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_CODIGO,field:"pmCodigo",width:100,minWidth:100},{headerName:p.a.TAG_DETALLE,field:"pmDetalle",width:400,minWidth:400},{headerName:p.a.TAG_INACTIVO,headerClass:"text-md-center",field:"pmInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},t=_t([Object(a.Injectable)({providedIn:"root"}),yt("design:paramtypes",[_.a,E.b,f.a])],t)}(),Nt=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Pt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Lt=function(){function t(t,e,o,a,i,n,r,s,c){this.auth=t,this.api=e,this.route=o,this.filasService=a,this.toastr=i,this.atajoService=n,this.utilService=r,this.archivoService=s,this.proformaMotivoService=c,this.listaResultadoMotivoProforma=[],this.proformaMotivoSeleccionado=new Et,this.invProformaMotivoTO=new Et,this.listaEmpresas=[],this.constantes=p.a,this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.vistaFormulario=!1,this.parametrosFormulario={},this.classIcon=""}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.motivoProformas,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajos(),this.iniciarAgGrid()},t.prototype.buscarInvProformaMotivo=function(t){this.limpiarResultado(),this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivos:t};this.filasTiempo.iniciarContador(),this.proformaMotivoService.listarInvProformaMotivoTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvProformaMotivoTO=function(t){this.listaResultadoMotivoProforma=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.actualizarEstadoProformaMotivo=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invProformaMotivoTO)),o={title:e.pmInactivo?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(e.pmInactivo?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Motivo de proforma: "+e.pmDetalle,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0,e.pmInactivo=!e.pmInactivo;var a={pmEmpresa:e.pmEmpresa,pmCodigo:e.pmCodigo};t.api.post("todocompuWS/inventarioWebController/modificarEstadoInvProformaMotivoTO",{invProformasMotivoPK:a,estado:e.pmInactivo},p.a.KEY_EMPRESA_SELECT).then(function(o){t.cargando=!1,o&&o.extraInfo?(t.refrescarTabla(e,"U"),t.toastr.success(o.operacionMensaje,"Aviso")):t.toastr.warning(o.operacionMensaje,"Aviso"),t.resetearFormulario()}).catch(function(e){return t.utilService.handleError(e,t)})}else t.resetearFormulario()})}else this.resetearFormulario()},t.prototype.eliminarProformaMotivo=function(t){var e=this;if(this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){e.cargando=!0;var a={invProformaMotivoTO:t};e.api.post("todocompuWS/inventarioWebController/eliminarInvProformaMotivoTO",a,p.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?(e.toastr.success(o.operacionMensaje,p.a.TOAST_CORRECTO),e.refrescarTabla(t,"D")):e.toastr.warning(o.operacionMensaje),e.resetearFormulario(),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}else e.resetearFormulario()})}},t.prototype.imprimirMotivoProforma=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultadoMotivoProforma};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteMotivoProforma",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoMotivoProforma.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarMotivoProforma=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultadoMotivoProforma};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteMotivoProforma",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoMotivoProforma_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.operacionesProformaMotivo=function(t){switch(t){case p.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.eliminarProformaMotivo(this.proformaMotivoSeleccionado));break;case p.a.ACCION_CONSULTAR:this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CONSULTAR,invProformaMotivoTO:new Et(this.proformaMotivoSeleccionado)};break;case p.a.ACCION_CREAR:this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={invProformaMotivoTO:new Et,accion:p.a.ACCION_CREAR});break;case p.a.ACCION_EDITAR:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.invProformaMotivoTO=new Et(this.proformaMotivoSeleccionado),this.vistaFormulario=!0,this.parametrosFormulario={invProformaMotivoTO:new Et(this.proformaMotivoSeleccionado),accion:p.a.ACCION_EDITAR});break;case p.a.ACCION_EDITAR_ESTADO:this.utilService.verificarPermiso(p.a.ACCION_EDITAR_ESTADO,this,!0)&&(this.invProformaMotivoTO=new Et(this.proformaMotivoSeleccionado),this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.actualizarEstadoProformaMotivo())}},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado()},t.prototype.limpiarResultado=function(){this.listaResultadoMotivoProforma=[],this.filasService.actualizarFilas("0","0")},t.prototype.generarOpciones=function(){var t=this,e=this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this),o=this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this),a=this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this)&&!this.proformaMotivoSeleccionado.pmInactivo,i=this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this)&&this.proformaMotivoSeleccionado.pmInactivo;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesProformaMotivo(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(o){return e?t.operacionesProformaMotivo(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!o,command:function(e){return o?t.operacionesProformaMotivo(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!i,command:function(){return i?t.operacionesProformaMotivo(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!a,command:function(){return a?t.operacionesProformaMotivo(p.a.ACCION_EDITAR_ESTADO):null}}]},t.prototype.generarAtajos=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(t){var e=document.getElementById("btnActivarMotivoProforma");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(t){var e=document.getElementById("btnBuscarMotivoProforma");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(t){var e=document.getElementById("btnImprimirMotivoProforma");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(t){var e=document.getElementById("btnExportarMotivoProforma");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(t){var e=document.getElementById("btnNuevoMotivoProforma");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EDITAR,function(e){return!t.accion&&t.listaResultadoMotivoProforma.length>0&&t.operacionesProformaMotivo(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ELIMINAR,function(e){return!t.accion&&t.listaResultadoMotivoProforma.length>0&&t.operacionesProformaMotivo(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(t){var e=document.getElementById("btnGuardarMotivoProforma");return e&&e.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(t){var e=document.getElementById("btnCancelarMotivoProforma");return e&&e.click(),!1}))},t.prototype.ejecutarAccion=function(t){switch(t.accion){case p.a.ACCION_CREAR:this.refrescarTabla(t.invProformaMotivoCopia,"I"),this.vistaFormulario=!1;break;case p.a.ACCION_EDITAR:this.refrescarTabla(t.invProformaMotivoCopia,"U"),this.vistaFormulario=!1}},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultadoMotivoProforma.length>0)(a=this.listaResultadoMotivoProforma.slice()).unshift(t),this.listaResultadoMotivoProforma=a,this.seleccionarFila(0);break;case"U":var o=this.listaResultadoMotivoProforma.findIndex(function(e){return e.pmCodigo===t.pmCodigo});(a=this.listaResultadoMotivoProforma.slice())[o]=t,this.listaResultadoMotivoProforma=a,this.seleccionarFila(o);break;case"D":var a;o=this.listaResultadoMotivoProforma.findIndex(function(e){return e.pmCodigo===t.pmCodigo});(a=this.listaResultadoMotivoProforma.slice()).splice(o,1),this.listaResultadoMotivoProforma=a,this.listaResultadoMotivoProforma.length>0&&this.seleccionarFila(0===o?0:o-1)}},t.prototype.resetearFormulario=function(){this.tituloForm=p.a.TITULO_FILTROS,this.invProformaMotivoTO=new Et,this.accion=null,this.refreshGrid()},t.prototype.cancelar=function(t){this.vistaFormulario=!1,this.activar=!1},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.proformaMotivoService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.proformaMotivoSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.proformaMotivoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},Nt([Object(a.ViewChild)("menuOpciones"),Pt("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),Nt([Object(a.HostListener)("window:resize",["$event"]),Pt("design:type",Function),Pt("design:paramtypes",[]),Pt("design:returntype",void 0)],t.prototype,"onResize",null),t=Nt([Object(a.Component)({selector:"app-motivo-proformas",template:o("IuDZ"),styles:[o("cWC+")]}),Pt("design:paramtypes",[J.a,_.a,i.ActivatedRoute,C.a,E.b,u.HotkeysService,f.a,L.a,Mt])],t)}(),Ft=o("i8Jn"),Dt=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},wt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},xt=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvNumeracionCompraTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvNumeracionCompraTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvNumeracionCompraTO(t.extraInfo):(e.despuesDeListarInvNumeracionCompraTO([]),a.toastr.warning(t.operacionMensaje,"Aviso"),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,e)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PERIODO,field:"numPeriodo",width:100,minWidth:100},{headerName:p.a.TAG_MOTIVO,field:"numMotivo",width:400,minWidth:400},{headerName:p.a.TAG_SECUENCIA,field:"numSecuencia",width:400,minWidth:400}]},t=Dt([Object(a.Injectable)({providedIn:"root"}),wt("design:paramtypes",[_.a,E.b,f.a])],t)}(),Gt=o("0cNW"),Ut=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},jt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Vt=function(){function t(t,e,o,a,i,n,r,s,c){this.route=t,this.numeracionCompraService=e,this.atajoService=o,this.filasService=a,this.periodoService=i,this.archivoService=n,this.toastr=r,this.utilService=s,this.motivoComprasService=c,this.listaResultadoNumeracionCompra=[],this.listaComprasMotivo=[],this.listaEmpresas=[],this.listaPeriodos=[],this.periodoSeleccionado=new Ft.a,this.motivoSeleccionado=new V.a,this.constantes=p.a,this.activar=!1,this.isScreamMd=!0,this.cargando=!1,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.numeracionCompras,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},t.prototype.listarPeriodos=function(){this.listaPeriodos=[],this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT};this.periodoService.listarPeriodos(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarPeriodos=function(t){var e=this;this.listaPeriodos=t,this.listaPeriodos.length>0?this.periodoSeleccionado=this.periodoSeleccionado&&this.periodoSeleccionado.sisPeriodoPK.perCodigo?this.listaPeriodos.find(function(t){return t.sisPeriodoPK.perCodigo===e.periodoSeleccionado.sisPeriodoPK.perCodigo}):this.listaPeriodos[0]:this.periodoSeleccionado=null,this.cargando=!1},t.prototype.listarMotivosCompra=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,activos:!0};this.motivoComprasService.listarInvComprasMotivoTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvComprasMotivoTO=function(t){var e=this;this.listaComprasMotivo=t,this.listaComprasMotivo.length>0?this.motivoSeleccionado=this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.listaComprasMotivo.find(function(t){return t.cmCodigo===e.motivoSeleccionado.cmCodigo}):this.listaComprasMotivo[0]:this.motivoSeleccionado=null,this.cargando=!1},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listarPeriodos(),this.listarMotivosCompra(),this.limpiarResultado()},t.prototype.limpiarResultado=function(){this.listaResultadoNumeracionCompra=[],this.filasService.actualizarFilas("0","0")},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return t.listaResultadoNumeracionCompra.length>0&&(t.activar=!t.activar),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirNumeracionCompra");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarNumeracionCompra");return t&&t.click(),!1}))},t.prototype.buscarNumeraciones=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT,periodo:this.periodoSeleccionado&&this.periodoSeleccionado.sisPeriodoPK.perCodigo?this.periodoSeleccionado.sisPeriodoPK.perCodigo:"",motivo:this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.motivoSeleccionado.cmCodigo:""};this.filasTiempo.iniciarContador(),this.numeracionCompraService.listarInvNumeracionCompraTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvNumeracionCompraTO=function(t){this.cargando=!1,this.listaResultadoNumeracionCompra=t,this.filasTiempo.finalizarContador()},t.prototype.imprimirNumeracionCompra=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoNumeracion:this.listaResultadoNumeracionCompra};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteNumeracionCompra",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoNumeracionCompra.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarNumeracionCompra=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoNumeracion:this.listaResultadoNumeracionCompra};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteNumeracionCompra",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoNumeracionCompra_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.numeracionCompraService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={toolTip:w.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t=Ut([Object(a.Component)({selector:"app-numeracion-compras",template:o("N4y1"),styles:[o("tqD0")]}),jt("design:paramtypes",[i.ActivatedRoute,xt,u.HotkeysService,C.a,Gt.a,L.a,E.b,f.a,z.a])],t)}(),kt=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Bt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Jt=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvNumeracionConsumoTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvNumeracionConsumoTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvNumeracionConsumoTO(t.extraInfo):(e.despuesDeListarInvNumeracionConsumoTO([]),a.toastr.warning(t.operacionMensaje,"Aviso"),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,e)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PERIODO,field:"numPeriodo",width:100,minWidth:100},{headerName:p.a.TAG_MOTIVO,field:"numMotivo",width:400,minWidth:400},{headerName:p.a.TAG_SECUENCIA,field:"numSecuencia",width:400,minWidth:400}]},t=kt([Object(a.Injectable)({providedIn:"root"}),Bt("design:paramtypes",[_.a,E.b,f.a])],t)}(),zt=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Wt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ht=function(){function t(t,e,o,a,i,n,r,s,c){this.route=t,this.numeracionConsumoService=e,this.atajoService=o,this.filasService=a,this.periodoService=i,this.archivoService=n,this.toastr=r,this.utilService=s,this.motivoConsumoService=c,this.listaResultadoNumeracionConsumo=[],this.listaConsumoMotivo=[],this.listaEmpresas=[],this.listaPeriodos=[],this.periodoSeleccionado=new Ft.a,this.motivoSeleccionado=new St.a,this.constantes=p.a,this.activar=!1,this.isScreamMd=!0,this.cargando=!1,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.numeracionConsumos,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},t.prototype.listarPeriodos=function(){this.listaPeriodos=[],this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT};this.periodoService.listarPeriodos(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarPeriodos=function(t){var e=this;this.listaPeriodos=t,this.listaPeriodos.length>0?this.periodoSeleccionado=this.periodoSeleccionado&&this.periodoSeleccionado.sisPeriodoPK.perCodigo?this.listaPeriodos.find(function(t){return t.sisPeriodoPK.perCodigo===e.periodoSeleccionado.sisPeriodoPK.perCodigo}):this.listaPeriodos[0]:this.periodoSeleccionado=null,this.cargando=!1},t.prototype.listarMotivosVenta=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,inactivos:!1};this.motivoConsumoService.listarInvConsumosMotivoTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvConsumosMotivoTO=function(t){var e=this;this.listaConsumoMotivo=t,this.listaConsumoMotivo.length>0?this.motivoSeleccionado=this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.listaConsumoMotivo.find(function(t){return t.cmCodigo===e.motivoSeleccionado.cmCodigo}):this.listaConsumoMotivo[0]:this.motivoSeleccionado=null,this.cargando=!1},t.prototype.buscarNumeraciones=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,periodo:this.periodoSeleccionado&&this.periodoSeleccionado.sisPeriodoPK.perCodigo?this.periodoSeleccionado.sisPeriodoPK.perCodigo:"",motivo:this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.motivoSeleccionado.cmCodigo:""};this.filasTiempo.iniciarContador(),this.numeracionConsumoService.listarInvNumeracionConsumoTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvNumeracionConsumoTO=function(t){this.cargando=!1,this.listaResultadoNumeracionConsumo=t,this.filasTiempo.finalizarContador()},t.prototype.imprimirNumeracionConsumo=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoNumeracion:this.listaResultadoNumeracionConsumo};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteNumeracionConsumo",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoNumeracionConsumo.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarNumeracionConsumo=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoNumeracion:this.listaResultadoNumeracionConsumo};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteNumeracionConsumo",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoNumeracionConsumo_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.periodoSeleccionado=null,this.motivoSeleccionado=null,this.listarPeriodos(),this.listarMotivosVenta(),this.limpiarResultado()},t.prototype.limpiarResultado=function(){this.listaResultadoNumeracionConsumo=[],this.filasService.actualizarFilas("0","0")},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return t.listaResultadoNumeracionConsumo.length>0&&(t.activar=!t.activar),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirNumeracionConsumo");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarNumeracionConsumo");return t&&t.click(),!1}))},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.numeracionConsumoService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={toolTip:w.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t=zt([Object(a.Component)({selector:"app-numeracion-consumos",template:o("rFGH"),styles:[o("E6uV")]}),Wt("design:paramtypes",[i.ActivatedRoute,Jt,u.HotkeysService,C.a,Gt.a,L.a,E.b,f.a,Ot.a])],t)}(),Kt=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Yt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Xt=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvNumeracionVentaTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvNumeracionVentaTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvNumeracionVentaTO(t.extraInfo):(e.despuesDeListarInvNumeracionVentaTO([]),a.toastr.warning(t.operacionMensaje,"Aviso"),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,e)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PERIODO,field:"numPeriodo",width:100,minWidth:100},{headerName:p.a.TAG_MOTIVO,field:"numMotivo",width:400,minWidth:400},{headerName:p.a.TAG_SECUENCIA,field:"numSecuencia",width:400,minWidth:400}]},t=Kt([Object(a.Injectable)({providedIn:"root"}),Yt("design:paramtypes",[_.a,E.b,f.a])],t)}(),$t=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},qt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Zt=function(){function t(t,e,o,a,i,n,r,s,c){this.route=t,this.numeracionVentaService=e,this.atajoService=o,this.filasService=a,this.periodoService=i,this.motivoVentaService=n,this.archivoService=r,this.toastr=s,this.utilService=c,this.listaResultadoNumeracionVenta=[],this.listaVentasMotivo=[],this.listaEmpresas=[],this.listaPeriodos=[],this.periodoSeleccionado=new Ft.a,this.motivoSeleccionado=new Y,this.constantes=p.a,this.activar=!1,this.isScreamMd=!0,this.cargando=!1,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.numeracionVentas,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},t.prototype.listarPeriodos=function(){this.listaPeriodos=[],this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT};this.periodoService.listarPeriodos(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarPeriodos=function(t){var e=this;this.listaPeriodos=t,this.listaPeriodos.length>0?this.periodoSeleccionado=this.periodoSeleccionado&&this.periodoSeleccionado.sisPeriodoPK.perCodigo?this.listaPeriodos.find(function(t){return t.sisPeriodoPK.perCodigo===e.periodoSeleccionado.sisPeriodoPK.perCodigo}):this.listaPeriodos[0]:this.periodoSeleccionado=null,this.cargando=!1},t.prototype.listarMotivosVenta=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,activos:!0};this.motivoVentaService.listarInvVentaMotivoTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvVentaMotivoTO=function(t){var e=this;this.listaVentasMotivo=t,this.listaVentasMotivo.length>0?this.motivoSeleccionado=this.motivoSeleccionado&&this.motivoSeleccionado.vmCodigo?this.listaVentasMotivo.find(function(t){return t.vmCodigo===e.motivoSeleccionado.vmCodigo}):this.listaVentasMotivo[0]:this.motivoSeleccionado=null,this.cargando=!1},t.prototype.buscarNumeraciones=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT,periodo:this.periodoSeleccionado&&this.periodoSeleccionado.sisPeriodoPK.perCodigo?this.periodoSeleccionado.sisPeriodoPK.perCodigo:"",motivo:this.motivoSeleccionado&&this.motivoSeleccionado.vmCodigo?this.motivoSeleccionado.vmCodigo:""};this.filasTiempo.iniciarContador(),this.numeracionVentaService.listarInvNumeracionVentaTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvNumeracionVentaTO=function(t){this.cargando=!1,this.listaResultadoNumeracionVenta=t,this.filasTiempo.finalizarContador()},t.prototype.imprimirNumeracionVenta=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoNumeracion:this.listaResultadoNumeracionVenta};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteNumeracionVenta",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoNumeracionVenta.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarNumeracionVenta=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoNumeracion:this.listaResultadoNumeracionVenta};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteNumeracionVenta",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoNumeracionVenta_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.periodoSeleccionado=null,this.motivoSeleccionado=null,this.listarPeriodos(),this.listarMotivosVenta(),this.limpiarResultado()},t.prototype.limpiarResultado=function(){this.listaResultadoNumeracionVenta=[],this.filasService.actualizarFilas("0","0")},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return t.listaResultadoNumeracionVenta.length>0&&(t.activar=!t.activar),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirNumeracionVenta");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarNumeracionVenta");return t&&t.click(),!1}))},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.numeracionVentaService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t=$t([Object(a.Component)({selector:"app-numeracion-ventas",template:o("QBEZ"),styles:[o("LLCE")]}),qt("design:paramtypes",[i.ActivatedRoute,Xt,u.HotkeysService,C.a,Gt.a,X.a,L.a,E.b,f.a])],t)}(),Qt=o("jKV4"),te=o("V4Aq"),ee=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},oe=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ae=function(){function t(t,e,o,a,i,n,r,s,c){this.auth=t,this.api=e,this.route=o,this.filasService=a,this.toastr=i,this.atajoService=n,this.utilService=r,this.archivoService=s,this.motivoTransferenciaService=c,this.listaResultadoMotivoTransferencia=[],this.transferenciaMotivoSeleccionado=new te.a,this.invTransferenciaMotivoTO=new te.a,this.listaEmpresas=[],this.constantes=p.a,this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new P.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.vistaFormulario=!1,this.parametrosFormulario={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.motivoTransferencias,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajos(),this.iniciarAgGrid()},t.prototype.buscarInvTransferenciaMotivo=function(t){this.limpiarResultado(),this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivos:t};this.filasTiempo.iniciarContador(),this.motivoTransferenciaService.listarInvTransferenciaMotivoTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvTransferenciaMotivoTO=function(t){this.listaResultadoMotivoTransferencia=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.actualizarMotivoTransferencia=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.utilService.establecerFormularioTocado(t)&&t&&t.valid){var e=JSON.parse(JSON.stringify(this.invTransferenciaMotivoTO));this.motivoTransferenciaService.setearValoresInvTransferenciaMotivo(e),this.accionInvTransferenciaMotivo(e,"M")}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.actualizarEstadoMotivoTransferencia=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var e=JSON.parse(JSON.stringify(this.invTransferenciaMotivoTO)),o={title:e.tmInactivo?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(e.tmInactivo?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Motivo de transferencia: "+e.tmDetalle,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(t.cargando=!0,e.tmInactivo=!e.tmInactivo,t.motivoTransferenciaService.setearValoresInvTransferenciaMotivo(e),t.api.post("todocompuWS/inventarioWebController/modificarEstadoInvTransferenciaMotivoTO",{invTransferenciaMotivoTO:e},p.a.KEY_EMPRESA_SELECT).then(function(o){t.cargando=!1,o&&o.extraInfo?(t.refrescarTabla(e,"U"),t.toastr.success(o.operacionMensaje,"Aviso")):t.toastr.warning(o.operacionMensaje,"Aviso"),t.resetearFormulario()}).catch(function(e){return t.utilService.handleError(e,t)})):t.resetearFormulario()})}else this.resetearFormulario()},t.prototype.eliminarTransferenciaMotivo=function(t){var e=this;if(this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(e.cargando=!0,e.accionInvTransferenciaMotivo(t,"E")):e.resetearFormulario()})}},t.prototype.imprimirMotivoTransferencia=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultadoMotivoTransferencia};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteMotivoTransferencia",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoMotivoTransferencia.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarMotivoTransferencia=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoMotivo:this.listaResultadoMotivoTransferencia};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteMotivoTransferencia",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoMotivoTransferencia_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.ejecutarAccion=function(t){switch(t.accionChar){case"I":this.accionInvTransferenciaMotivo(t.invTransferenciaMotivoCopia,"I"),this.accion=p.a.ACCION_CREAR,this.vistaFormulario=!1;break;case"M":this.accionInvTransferenciaMotivo(t.invTransferenciaMotivoCopia,"M"),this.accion=p.a.ACCION_EDITAR,this.vistaFormulario=!1}},t.prototype.accionInvTransferenciaMotivo=function(t,e){var o=this;this.api.post("todocompuWS/inventarioWebController/accionInvTransferenciaMotivo",{invTransferenciaMotivoTO:t,accion:e},p.a.KEY_EMPRESA_SELECT).then(function(e){if(o.cargando=!1,e&&e.extraInfo){switch(o.accion){case p.a.ACCION_CREAR:o.refrescarTabla(t,"I");break;case p.a.ACCION_EDITAR:case p.a.ACCION_EDITAR_ESTADO:o.refrescarTabla(t,"U");break;case p.a.ACCION_ELIMINAR:o.refrescarTabla(t,"D")}o.toastr.success(e.operacionMensaje,"Aviso"),o.resetearFormulario()}else o.accion===p.a.ACCION_ELIMINAR&&o.resetearFormulario(),o.toastr.warning(e.operacionMensaje,"Aviso")}).catch(function(t){return o.utilService.handleError(t,o)})},t.prototype.operacionesTransferenciaMotivo=function(t){switch(t){case p.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.eliminarTransferenciaMotivo(this.transferenciaMotivoSeleccionado));break;case p.a.ACCION_CONSULTAR:this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CONSULTAR,invTransferenciaMotivoTO:new te.a(this.transferenciaMotivoSeleccionado)});break;case p.a.ACCION_CREAR:this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CREAR,invTransferenciaMotivoTO:new te.a});break;case p.a.ACCION_EDITAR:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_EDITAR,invTransferenciaMotivoTO:new te.a(this.transferenciaMotivoSeleccionado)});break;case p.a.ACCION_EDITAR_ESTADO:this.utilService.verificarPermiso(p.a.ACCION_EDITAR_ESTADO,this,!0)&&(this.invTransferenciaMotivoTO=new te.a(this.transferenciaMotivoSeleccionado),this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.actualizarEstadoMotivoTransferencia())}},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado()},t.prototype.limpiarResultado=function(){this.listaResultadoMotivoTransferencia=[],this.filasService.actualizarFilas("0","0")},t.prototype.generarOpciones=function(){var t=this,e=this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this),o=this.utilService.verificarPermiso(p.a.ACCION_ELIMINAR,this),a=this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this)&&!this.transferenciaMotivoSeleccionado.tmInactivo,i=this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this)&&this.transferenciaMotivoSeleccionado.tmInactivo;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesTransferenciaMotivo(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(){return e?t.operacionesTransferenciaMotivo(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?t.operacionesTransferenciaMotivo(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!i,command:function(){return i?t.operacionesTransferenciaMotivo(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!a,command:function(){return a?t.operacionesTransferenciaMotivo(p.a.ACCION_EDITAR_ESTADO):null}}]},t.prototype.generarAtajos=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarMotivoTransferencia");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarMotivoTransferencia");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirMotivoTransferencia");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarMotivoTransferencia");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevoMotivoTransferencia");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EDITAR,function(){return!t.accion&&t.listaResultadoMotivoTransferencia.length>0&&t.operacionesTransferenciaMotivo(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ELIMINAR,function(){return!t.accion&&t.listaResultadoMotivoTransferencia.length>0&&t.operacionesTransferenciaMotivo(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardarMotivoTransferencia");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelarMotivoTransferencia");return t&&t.click(),!1}))},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultadoMotivoTransferencia.length>0)(a=this.listaResultadoMotivoTransferencia.slice()).unshift(t),this.listaResultadoMotivoTransferencia=a,this.seleccionarFila(0);break;case"U":var o=this.listaResultadoMotivoTransferencia.findIndex(function(e){return e.tmCodigo===t.tmCodigo});(a=this.listaResultadoMotivoTransferencia.slice())[o]=t,this.listaResultadoMotivoTransferencia=a,this.seleccionarFila(o);break;case"D":var a;o=this.listaResultadoMotivoTransferencia.findIndex(function(e){return e.tmCodigo===t.tmCodigo});(a=this.listaResultadoMotivoTransferencia.slice()).splice(o,1),this.listaResultadoMotivoTransferencia=a,this.listaResultadoMotivoTransferencia.length>0&&this.seleccionarFila(0===o?0:o-1)}},t.prototype.resetearFormulario=function(){this.tituloForm=p.a.TITULO_FILTROS,this.invTransferenciaMotivoTO=new te.a,this.accion=null,this.refreshGrid()},t.prototype.cancelar=function(t){this.vistaFormulario=!1,this.activar=!1},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.motivoTransferenciaService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.transferenciaMotivoSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.transferenciaMotivoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},ee([Object(a.ViewChild)("menuOpciones"),oe("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),ee([Object(a.HostListener)("window:resize",["$event"]),oe("design:type",Function),oe("design:paramtypes",[]),oe("design:returntype",void 0)],t.prototype,"onResize",null),t=ee([Object(a.Component)({selector:"app-motivo-transferencias",template:o("i5+7"),styles:[o("jCOt")]}),oe("design:paramtypes",[J.a,_.a,i.ActivatedRoute,C.a,E.b,u.HotkeysService,f.a,L.a,Qt.a])],t)}(),ie=o("8RnM"),ne=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},re=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},se=function(){function t(t,e,o,a,i){this.route=t,this.atajoService=e,this.filasService=o,this.clienteCategoriaService=a,this.utilService=i,this.listaEmpresas=[],this.listadoClientes=new Array,this.listadoCategorias=[],this.empresaSeleccionada=new d.a,this.categoriaSeleccionada=new it.a,this.activar=!1,this.cargando=!1,this.constantes=p.a,this.filasTiempo=new P.a,this.vistaFormulario=!1,this.vistaListado=!1,this.parametrosFormulario={},this.parametro={}}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.listadoCliente,this.generarAtgajosTeclado(),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada()},t.prototype.generarAtgajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return t.activar=!t.activar,!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){return!t.vistaFormulario&&t.buscarClientes(!1),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.categoriaSeleccionada=null,this.limpiarResultado(),this.listarCategorias()},t.prototype.limpiarResultado=function(){this.listadoClientes=[],this.vistaListado=!1,this.vistaFormulario=!1,this.filasService.actualizarFilas("0","0")},t.prototype.listarCategorias=function(){this.cargando=!0,this.limpiarResultado(),this.listadoCategorias=[],this.clienteCategoriaService.listarInvClienteCategoriaTO({empresa:p.a.KEY_EMPRESA_SELECT},this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvClienteCategoriaTO=function(t){var e=this;this.listadoCategorias=t,this.listadoCategorias.length>0?this.categoriaSeleccionada=this.categoriaSeleccionada&&this.categoriaSeleccionada.ccCodigo?this.listadoCategorias.find(function(t){return t.ccCodigo===e.categoriaSeleccionada.ccCodigo}):null:this.categoriaSeleccionada=null,this.cargando=!1},t.prototype.buscarClientes=function(t){this.parametro={},this.parametro.empresa=p.a.KEY_EMPRESA_SELECT,this.parametro.categoria=this.categoriaSeleccionada&&this.categoriaSeleccionada.ccCodigo?this.categoriaSeleccionada.ccCodigo:null,this.parametro.busqueda=null,this.parametro.mostrarInactivo=t,this.parametro.soloEditarConsultar=!0,this.parametro.debeBuscar=!0,this.vistaListado=!0,this.vistaFormulario=!1},t.prototype.accionLista=function(t){switch(t.accion){case p.a.ACCION_EDITAR:case p.a.ACCION_CONSULTAR:this.mostrarFormulario(t)}},t.prototype.mostrarFormulario=function(t){this.vistaFormulario=!0,this.vistaListado=!1,this.parametrosFormulario={accion:t.accion,objetoSeleccionado:t.objetoSeleccionado}},t.prototype.cancelar=function(t){t&&(this.parametro&&null!=this.parametro.mostrarInactivo?this.buscarClientes(this.parametro.mostrarInactivo):this.limpiarResultado(),this.generarAtgajosTeclado())},t=ne([Object(a.Component)({selector:"app-listado-cliente",template:o("DH89"),styles:[o("oI0Q")]}),re("design:paramtypes",[i.ActivatedRoute,u.HotkeysService,C.a,nt.a,f.a])],t)}(),ce=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},le=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},de=function(){function t(t,e,o,a,i,n,r,s){this.route=t,this.toastr=e,this.filasService=o,this.atajoService=a,this.utilService=i,this.proveedorService=n,this.archivoService=r,this.proveedorCategoriaService=s,this.listaResultadoProveedores=[],this.listaCategorias=[],this.listaEmpresas=[],this.proveeedorSeleccionado=new ht.a,this.categoriaSeleccionada=new ft.a,this.constantes=p.a,this.cargando=!1,this.activarProveedor=!1,this.filasTiempo=new P.a,this.parametrosFormulario={accion:null,empresaSeleccionada:null,invProveedorTO:null,listadoCategorias:[],tituloFormulario:null,activar:!1},this.vistaListado=!0,this.vistaFormulario=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.exportarTodosEstado=!0,this.columnDefsExportar=[]}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.listadoProveedor,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado()},t.prototype.listarInvProveedorCategoriaTO=function(){this.cargando=!0,this.proveedorCategoriaService.listarInvProveedorCategoria({empresa:this.empresaSeleccionada.empCodigo},this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvProveedorCategoriaTO=function(t){var e=this;this.listaCategorias=t,this.listaCategorias.length>0?this.categoriaSeleccionada=this.categoriaSeleccionada&&this.categoriaSeleccionada.pcCodigo?this.listaCategorias.find(function(t){return t.pcCodigo===e.categoriaSeleccionada.pcCodigo}):null:this.categoriaSeleccionada=null,this.cargando=!1},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado(),this.listarInvProveedorCategoriaTO()},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){if(t.listaResultadoProveedores.length>0){var e=document.getElementById("btnActivarProveedor");e&&e.click()}return!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarProveedor");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){return document.getElementById("btnImprimirProveedor").click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){return document.getElementById("btnExportarProveedor").click(),!1}))},t.prototype.limpiarResultado=function(){this.listaResultadoProveedores=[],this.filasService.actualizarFilas("0","0")},t.prototype.generarOpciones=function(){var t=this,e=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.empresaSeleccionada.listaSisPermisoTO.gruModificarProveedores;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesProveedor(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!e,command:function(){return e?t.operacionesProveedor(p.a.ACCION_EDITAR):null}}]},t.prototype.cerrarFormularioProveedor=function(t){this.vistaFormulario=t.mostrarFormulario,t.accion===p.a.ACCION_CREAR?this.refrescarTabla(t.invProveedorTO,"I"):t.accion!==p.a.ACCION_EDITAR&&t.accion!==p.a.ACCION_EDITAR_ESTADO||this.refrescarTabla(t.invProveedorTO,"U"),this.generarAtajosTeclado(),this.vistaListado=!0,this.activarProveedor=!1},t.prototype.refrescarTabla=function(t,e){switch(e){case"I":if(this.listaResultadoProveedores.length>0)(o=this.listaResultadoProveedores.slice()).unshift(t),this.listaResultadoProveedores=o,this.actualizarFilas();break;case"U":var o,a=this.listaResultadoProveedores.findIndex(function(e){return e.provCodigo===t.provCodigo});(o=this.listaResultadoProveedores.slice())[a]=t,this.listaResultadoProveedores=o}},t.prototype.cambiarEstadoActivar=function(t){this.activarProveedor=t},t.prototype.buscarProveedores=function(t){this.limpiarResultado(),this.cargando=!0,this.filasTiempo.iniciarContador();var e={empresa:this.empresaSeleccionada.empCodigo,categoria:this.categoriaSeleccionada?this.categoriaSeleccionada.pcCodigo:null};this.proveedorService.listarInvFunListadoProveedorTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvFunListadoProveedorTO=function(t){this.cargando=!1,this.listaResultadoProveedores=t,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},t.prototype.imprimirProveedor=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={ListadoProveedores:this.listaResultadoProveedores};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteProveedor",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoProveedores.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarProveedor=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={ListadoProveedores:this.listaResultadoProveedores,listaFiltradoProveedores:this.columnDefsExportar};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteProveedor",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoProveedores_"):t.toastr.warning(p.a.MSJ_NO_RESULTADOS,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.abrirExportar=function(){this.exportarTodosEstado=!0,this.columnDefsExportar=this.proveedorService.generarColumnasTodo()},t.prototype.exportarTodos=function(){this.abrirExportar(),this.exportarProveedor()},t.prototype.cambiarEstadoExportar=function(){this.utilService.cambiarEstadoExportar(this.columnDefsExportar,this.exportarTodosEstado)},t.prototype.cambiarEstadoItemExportar=function(){this.utilService.cambiarEstadoItemExportar(this.columnDefsExportar,this)},t.prototype.operacionesProveedor=function(t){switch(t){case p.a.ACCION_EDITAR:this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&this.empresaSeleccionada.listaSisPermisoTO.gruModificarProveedores&&(this.parametrosFormulario.empresa=this.empresaSeleccionada,this.parametrosFormulario.accion=p.a.ACCION_EDITAR,this.parametrosFormulario.invProveedorTO=this.proveeedorSeleccionado,this.parametrosFormulario.listadoCategorias=this.listaCategorias,this.parametrosFormulario.tituloFormulario=p.a.TITULO_FORM_EDITAR_PROVEEDOR,this.parametrosFormulario.activar=!0,this.activarProveedor=!0,this.vistaFormulario=!0,this.vistaListado=!1);break;case p.a.ACCION_CONSULTAR:this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)&&(this.parametrosFormulario.empresa=this.empresaSeleccionada,this.parametrosFormulario.accion=p.a.ACCION_CONSULTAR,this.parametrosFormulario.invProveedorTO=this.proveeedorSeleccionado,this.parametrosFormulario.listadoCategorias=this.listaCategorias,this.parametrosFormulario.tituloFormulario=p.a.TITULO_FORM_CONSULTAR_PROVEEDOR,this.parametrosFormulario.activar=!0,this.activarProveedor=!0,this.vistaFormulario=!0,this.vistaListado=!1)}},t.prototype.consultarProveedor=function(){this.operacionesProveedor(p.a.ACCION_CONSULTAR)},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.proveedorService.generarColumnasGenerales(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.proveeedorSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.proveeedorSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},ce([Object(a.ViewChild)("menuOpciones"),le("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),ce([Object(a.HostListener)("window:resize",["$event"]),le("design:type",Function),le("design:paramtypes",[]),le("design:returntype",void 0)],t.prototype,"onResize",null),t=ce([Object(a.Component)({selector:"app-listado-proveedor",template:o("Alqk"),styles:[o("04q1")]}),le("design:paramtypes",[i.ActivatedRoute,E.b,C.a,u.HotkeysService,f.a,vt.a,L.a,Ct.a])],t)}(),pe=o("Ip0R"),me=o("ctD9"),ue=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},he=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ve=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarDatoFunListaProductosImpresionPlaca=function(t,e,o){var a=this;e.filasTiempo&&e.filasTiempo.iniciarContador(),this.api.post("todocompuWS/inventarioWebController/getDatoFunListaProductosImpresionPlaca",t,o).then(function(t){e.filasTiempo&&e.filasTiempo.finalizarContador(),t&&t.extraInfo?e.despuesDeListarDatoFunListaProductosImpresionPlaca(t.extraInfo):(e.despuesDeListarDatoFunListaProductosImpresionPlaca([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(t){return[{headerComponent:"checkHeader",headerComponentParams:{value:t.estadoGeneral,tooltipText:"Estado"},headerClass:"text-center",cellClass:"text-center",field:"estado",width:80,minWidth:80,cellRendererFramework:me.a},{headerName:p.a.TAG_CODIGO,field:"lpspCodigoPrincipal",width:100,minWidth:100},{headerName:p.a.TAG_CODIGO_BARRAS,field:"lpspCodigoBarra",width:120,minWidth:100},{headerName:p.a.TAG_PRODUCTO,field:"lpspNombre",width:250,minWidth:250},{headerName:p.a.TAG_PRODUCTO_EMPAQUE,field:"proEmpaque",width:120,minWidth:100},{headerName:p.a.TAG_PRECIO_1,field:"lpspPrecio1",width:120,minWidth:120,valueFormatter:Ce,cellClass:"text-right"},{headerName:p.a.TAG_PRECIO_2,field:"lpspPrecio2",width:120,minWidth:120,valueFormatter:Ce,cellClass:"text-right"},{headerName:p.a.TAG_PRECIO_3,field:"lpspPrecio3",width:120,minWidth:120,valueFormatter:Ce,cellClass:"text-right"}]},t=ue([Object(a.Injectable)({providedIn:"root"}),he("design:paramtypes",[_.a,E.b,f.a])],t)}();function Ce(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var fe=o("HnUa"),Ae=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ge=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},be=function(){function t(t,e,o,a,i,n,r){this.route=t,this.toastr=e,this.filasService=o,this.atajoService=a,this.utilService=i,this.imprimirPlacaProductoService=n,this.archivoService=r,this.listaResultadoProductoPlaca=[],this.listaEmpresas=[],this.constantes=p.a,this.cargando=!1,this.activarProductoPlaca=!1,this.filasTiempo=new P.a,this.codigoProducto=null,this.estadoGeneral=!0,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.imprimirPlacasProductos,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado()},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarProductoPlaca");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarProductoPlaca");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){return document.getElementById("btnImprimirProductoPlaca").click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){return document.getElementById("btnExportarProductoPlaca").click(),!1}))},t.prototype.limpiarResultado=function(){this.listaResultadoProductoPlaca=[],this.filasService.actualizarFilas("0","0")},t.prototype.buscarProductoPlaca=function(){this.limpiarResultado(),this.cargando=!0;var t={empresa:this.empresaSeleccionada.empCodigo,producto:this.codigoProducto?this.codigoProducto:" ",estado:!0};this.imprimirPlacaProductoService.listarDatoFunListaProductosImpresionPlaca(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarDatoFunListaProductosImpresionPlaca=function(t){this.cargando=!1,this.listaResultadoProductoPlaca=t,this.iniciarAgGrid()},t.prototype.imprimirProductoPlaca=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={listProductosImpresionPlaca:this.listaResultadoProductoPlaca};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteImpresionPlaca",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoImprimirPlacasProductos.pdf",e):t.toastr.warning("El reporte no existe o tiene errores"),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarProductoPlaca=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={listProductosImpresionPlaca:this.listaResultadoProductoPlaca};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteProductoImprimirPlacas",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoImprimirPlacasProductos_"):t.toastr.warning("No se encontraron resultados"),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.imprimirPlacaProductoService.generarColumnas(this),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.components={},this.frameworkComponents={checkHeader:fe.a}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.cambiarEstadoGeneral=function(t){var e=this;this.estadoGeneral=t,this.gridApi.forEachNode(function(t){t.data.estado=e.estadoGeneral}),this.refreshGrid()},t.prototype.verificarEstado=function(t){},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Ae([Object(a.HostListener)("window:resize",["$event"]),ge("design:type",Function),ge("design:paramtypes",[]),ge("design:returntype",void 0)],t.prototype,"onResize",null),t=Ae([Object(a.Component)({selector:"app-imprimir-placas-productos",template:o("fFj4"),styles:[o("8fXX")]}),ge("design:paramtypes",[i.ActivatedRoute,E.b,C.a,u.HotkeysService,f.a,ve,L.a])],t)}(),Se=function(){function t(t){this.id=0,this.ccpProducto=null,this.ccpCodigo=null,this.ccpMedida=null,this.ccpCantidad=null,this.ccpTotal=null,this.ccpPorcentaje=null,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.id=t.id?t.id:this.id,this.ccpProducto=t.ccpProducto?t.ccpProducto:this.ccpProducto,this.ccpCodigo=t.ccpCodigo?t.ccpCodigo:this.ccpCodigo,this.ccpMedida=t.ccpMedida?t.ccpMedida:this.ccpMedida,this.ccpCantidad=t.ccpCantidad?t.ccpCantidad:this.ccpCantidad,this.ccpTotal=t.ccpTotal?t.ccpTotal:this.ccpTotal,this.ccpPorcentaje=t.ccpPorcentaje?t.ccpPorcentaje:this.ccpPorcentaje},t}(),Oe=o("VO10"),Re=o("eUd/"),Ie=o("dGCu"),Te=o("RDZc"),Ee=o("wd/R"),_e=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ye=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Me=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvFunComprasConsolidandoProductosTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunComprasConsolidandoProductosTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvFunComprasConsolidandoProductosTO(t.extraInfo):(e.despuesDeListarInvFunComprasConsolidandoProductosTO([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PRODUCTO,field:"ccpProducto",width:250,minWidth:250,cellClass:function(t){return t.data.ccpCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_CODIGO,field:"ccpCodigo",width:150,minWidth:150,cellClass:function(t){return t.data.ccpCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_MEDIDA,field:"ccpMedida",width:150,minWidth:150,cellClass:function(t){return t.data.ccpCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_CANTIDAD,field:"ccpCantidad",width:150,minWidth:150,valueFormatter:Ne,cellClass:function(t){return t.data.ccpCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_TOTAL,field:"ccpTotal",width:150,minWidth:150,valueFormatter:Ne,cellClass:function(t){return t.data.ccpCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_PORCENTAJE,field:"ccpPorcentaje",width:150,minWidth:150,valueFormatter:Ne,cellClass:function(t){return t.data.ccpCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(t){return t.data.ccpCodigo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.MSJ_CONSULTAR_KARDEX,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},t=_e([Object(a.Injectable)({providedIn:"root"}),ye("design:paramtypes",[_.a,E.b,f.a])],t)}();function Ne(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var Pe=o("yqOf"),Le=o("sXuD"),Fe=o("/TJv"),De=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},we=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},xe=function(){function t(t,e,o,a,i,n,r,s,c,l,d,m){this.modalService=t,this.toastr=e,this.utilService=o,this.sectorService=a,this.route=i,this.bodegaService=n,this.filasService=r,this.atajoService=s,this.archivoService=c,this.sistemaService=l,this.productoService=d,this.consolidadoProductosService=m,this.listaResultadoComprasConsProd=[],this.listaBodegas=[],this.listaSectores=[],this.listaEmpresas=[],this.sectorSeleccionado=new I.a,this.bodegaSeleccionada=new Oe.a,this.comprasConsProductoSeleccionado=new Se,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new P.a,this.proveedor=new ht.a,this.codigoProveedor=null,this.fechaInicio=new Date,this.fechaFin=new Date,this.fechaActual=new Date,this.es={},this.mostrarKardex=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return t.prototype.ngOnInit=function(){Ee.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.comprasConsolProductos,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.obtenerFechaInicioActualMes()},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){if(t.listaResultadoComprasConsProd.length>0){var e=document.getElementById("btnActivarComprasConsProductos");e&&e.click()}return!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarConsProdCompras");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){t.listaResultadoComprasConsProd.length>0&&document.getElementById("btnImprimirConsProdCompras").click();return!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){t.listaResultadoComprasConsProd.length>0&&document.getElementById("btnExportarConsProdCompra").click();return!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.bodegaSeleccionada=null,this.listarSectores(),this.limpiarResultado()},t.prototype.obtenerFechaInicioActualMes=function(){var t=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(e){t.fechaInicio=e[0],t.fechaFin=e[1],t.fechaActual=e[1]}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.listarBodegas=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,inactivo:!0,sector:this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectorSeleccionado.secCodigo:null};this.bodegaService.listarInvListaBodegasPorSector(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvListaBodegasPorSector=function(t){var e=this;this.listaBodegas=t,this.listaBodegas.length>0?this.bodegaSeleccionada=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.listaBodegas.find(function(t){return t.bodCodigo===e.bodegaSeleccionada.bodCodigo}):this.listaBodegas[0]:this.bodegaSeleccionada=null,this.cargando=!1},t.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?(this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):null,null!=this.sectorSeleccionado&&this.listarBodegas()):this.sectorSeleccionado=null,this.cargando=!1},t.prototype.limpiarResultado=function(){this.listaResultadoComprasConsProd=[],this.filasTiempo.resetearContador(),this.actualizarFilas(),this.proveedor.provCodigo="",this.proveedor.provRazonSocial=""},t.prototype.buscarProveedor=function(t){var e=this;if(this.utilService.validarKeyBuscar(t.keyCode)&&!this.esValidoProveedor())if(this.proveedor&&this.proveedor.provCodigo.length>0){var o=this.proveedor.provCodigo.toUpperCase(),a={empresa:p.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:o};t.srcElement.blur(),t.preventDefault();var i=this.modalService.open(Ie.a,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.result.then(function(t){t&&(e.proveedor=new ht.a(t),e.codigoProveedor=e.proveedor.provCodigo)},function(){e.focusProveedorCodigo()})}else this.toastr.info(p.a.MSJ_ENTERTOMODAL,p.a.TAG_AVISO)},t.prototype.focusProveedorCodigo=function(){var t=document.getElementById("provCodigo");t&&t.focus()},t.prototype.esValidoProveedor=function(){return""!=this.proveedor.provCodigo&&this.proveedor.provCodigo===this.codigoProveedor},t.prototype.validarProveedor=function(){this.proveedor.provCodigo!==this.codigoProveedor&&(this.proveedor=new ht.a,this.codigoProveedor=null)},t.prototype.ejecutarAccion=function(t){this.comprasConsProductoSeleccionado=t,this.consultarKardex()},t.prototype.consultarKardex=function(){this.comprasConsProductoSeleccionado&&this.comprasConsProductoSeleccionado.ccpCodigo&&(this.objetoDesdeFuera={empresa:this.empresaSeleccionada,bodega:this.bodegaSeleccionada,fechaDesde:this.fechaInicio,fechaHasta:this.fechaFin,productoSeleccionado:null},this.obtenerInvProductoTO())},t.prototype.obtenerInvProductoTO=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,codigo:this.comprasConsProductoSeleccionado.ccpCodigo?this.comprasConsProductoSeleccionado.ccpCodigo:""};this.productoService.obtenerProducto(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerProducto=function(t){this.objetoDesdeFuera.productoSeleccionado=t?new Le.a:null,this.objetoDesdeFuera.productoSeleccionado.proCodigoPrincipal=t?t.proCodigoPrincipal:null,this.objetoDesdeFuera.productoSeleccionado.proCategoria=t?t.catCodigo:null,this.objetoDesdeFuera.productoSeleccionado.proNombre=t?t.proNombre:null,this.objetoDesdeFuera.productoSeleccionado.detalleMedida=t?t.medCodigo:null,this.cargando=!1,this.objetoDesdeFuera=t?this.objetoDesdeFuera:null,this.mostrarKardex=!!t},t.prototype.cerrarKardex=function(t){this.mostrarKardex=t,this.objetoDesdeFuera=null,this.generarAtajosTeclado()},t.prototype.buscarConsolidadoProductos=function(t){if(this.cargando=!0,this.limpiarResultado(),t&&t.valid){var e={empresa:this.empresaSeleccionada.empCodigo,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),sector:this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectorSeleccionado.secCodigo:null,bodega:this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.bodegaSeleccionada.bodCodigo:null,proveedor:this.codigoProveedor};this.filasTiempo.iniciarContador(),this.consolidadoProductosService.listarInvFunComprasConsolidandoProductosTO(e,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeListarInvFunComprasConsolidandoProductosTO=function(t){this.listaResultadoComprasConsProd=t,this.cargando=!1,this.iniciarAgGrid(),this.filasTiempo.finalizarContador()},t.prototype.imprimirConsProdCompra=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaInicio),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaFin),bodega:this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.bodegaSeleccionada.bodNombre:"",proveedor:this.codigoProveedor?this.proveedor.provRazonSocial:"",listInvFunComprasConsolidandoProductosTO:this.listaResultadoComprasConsProd};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteConsolidadoCompraProducto",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoComprasConsolidandoProductos.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarConsProdCompra=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={listInvFunComprasConsolidandoProductosTO:this.listaResultadoComprasConsProd};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteComprasConsolidandoProductos",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoComprasConsolidandoProductos_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.generarOpciones=function(){var t=this;this.opciones=[{label:p.a.MSJ_CONSULTAR_KARDEX,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.consultarKardex()}}]},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.consolidadoProductosService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.frameworkComponents={botonOpciones:Fe.a,toolTip:w.a},this.context={componentParent:this},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.comprasConsProductoSeleccionado=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.comprasConsProductoSeleccionado=t,this.comprasConsProductoSeleccionado.ccpCodigo&&(this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation())},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},De([Object(a.ViewChild)("menuOpciones"),we("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),De([Object(a.HostListener)("window:resize",["$event"]),we("design:type",Function),we("design:paramtypes",[]),we("design:returntype",void 0)],t.prototype,"onResize",null),t=De([Object(a.Component)({selector:"app-compras-consolidado-productos",template:o("AM/o"),styles:[o("ogeQ")]}),we("design:paramtypes",[Re.b,E.b,f.a,T.a,i.ActivatedRoute,Te.a,C.a,u.HotkeysService,L.a,n.a,Pe.a,Me])],t)}(),Ge=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Ue=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},je=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvFunVentasConsolidandoProductosTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunVentasConsolidandoProductosTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvFunVentasConsolidandoProductosTO(t.extraInfo):(e.despuesDeListarInvFunVentasConsolidandoProductosTO([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PRODUCTO,field:"vcpProducto",width:200,minWidth:200,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_CODIGO,field:"vcpCodigo",width:150,minWidth:150,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_MEDIDA,field:"vcpMedida",width:200,minWidth:200,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_CANTIDAD,field:"vcpCantidad",width:150,minWidth:150,valueFormatter:Ve,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_TOTAL,field:"vcpTotal",width:100,minWidth:100,valueFormatter:Ve,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_PORCENTAJE,field:"vcpPorcentaje",width:100,minWidth:100,valueFormatter:Ve,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(t){return t.data.vcpCodigo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.MSJ_CONSULTAR_KARDEX,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},t=Ge([Object(a.Injectable)({providedIn:"root"}),Ue("design:paramtypes",[_.a,E.b,f.a])],t)}();function Ve(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var ke=o("Mk4X"),Be=o("uhNP"),Je=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ze=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},We=function(){function t(t,e,o,a,i,n,r,s,c,l,d,m){this.modalService=t,this.toastr=e,this.utilService=o,this.sectorService=a,this.route=i,this.bodegaService=n,this.filasService=r,this.atajoService=s,this.archivoService=c,this.sistemaService=l,this.productoService=d,this.consolidadoProductosService=m,this.listaResultado=[],this.listaBodegas=[],this.listaSectores=[],this.listaEmpresas=[],this.sectorSeleccionado=new I.a,this.bodegaSeleccionada=new Oe.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.screamXS=!0,this.filasTiempo=new P.a,this.cliente=new ke.a,this.codigoCliente=null,this.fechaInicio=new Date,this.fechaFin=new Date,this.fechaActual=new Date,this.es={},this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.mostrarKardex=!1}return t.prototype.ngOnInit=function(){Ee.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.ventasConsolProductos,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.obtenerFechaInicioActualMes(),this.generarAtajosTeclado(),this.iniciarAgGrid(),this.focusClienteCodigo()},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){if(t.listaResultado.length>0){var e=document.getElementById("btnActivar");e&&e.click()}return!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){t.listaResultado.length>0&&document.getElementById("btnImprimirConsProdVenta").click();return!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){t.listaResultado.length>0&&document.getElementById("btnExportarConsProdVenta").click();return!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.bodegaSeleccionada=null,this.listarBodegas(),this.listarSectores(),this.limpiarResultado()},t.prototype.obtenerFechaInicioActualMes=function(){var t=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(e){t.fechaInicio=e[0],t.fechaFin=e[1],t.fechaActual=e[1]}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.listarBodegas=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,inactivo:!0};this.bodegaService.listarInvListaBodegasTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvListaBodegasTO=function(t){var e=this;this.listaBodegas=t,this.listaBodegas.length>0?this.bodegaSeleccionada=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.listaBodegas.find(function(t){return t.bodCodigo===e.bodegaSeleccionada.bodCodigo}):null:this.bodegaSeleccionada=null,this.cargando=!1},t.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.cliente.cliCodigo="",this.cliente.cliRazonSocial=""},t.prototype.ejecutarAccion=function(t){this.ventaConsolSeleccionado=t,this.consultarKardex()},t.prototype.consultarKardex=function(){this.ventaConsolSeleccionado&&this.ventaConsolSeleccionado.vcpCodigo&&(this.objetoDesdeFuera={empresa:this.empresaSeleccionada,bodega:this.bodegaSeleccionada,fechaDesde:this.fechaInicio,fechaHasta:this.fechaFin,productoSeleccionado:null},this.obtenerInvProductoTO())},t.prototype.obtenerInvProductoTO=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,codigo:this.ventaConsolSeleccionado.vcpCodigo?this.ventaConsolSeleccionado.vcpCodigo:""};this.productoService.obtenerProducto(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerProducto=function(t){this.objetoDesdeFuera.productoSeleccionado=t?new Le.a:null,this.objetoDesdeFuera.productoSeleccionado.proCodigoPrincipal=t?t.proCodigoPrincipal:null,this.objetoDesdeFuera.productoSeleccionado.proCategoria=t?t.catCodigo:null,this.objetoDesdeFuera.productoSeleccionado.proNombre=t?t.proNombre:null,this.objetoDesdeFuera.productoSeleccionado.detalleMedida=t?t.medCodigo:null,this.cargando=!1,this.objetoDesdeFuera=t?this.objetoDesdeFuera:null,this.mostrarKardex=!!t},t.prototype.cerrarKardex=function(t){this.mostrarKardex=t,this.objetoDesdeFuera=null,this.generarAtajosTeclado()},t.prototype.buscarConsolidadoProductos=function(t){if(this.cargando=!0,t&&t.valid){var e={empresa:this.empresaSeleccionada.empCodigo,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),sector:this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectorSeleccionado.secCodigo:null,bodega:this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.bodegaSeleccionada.bodCodigo:null,proveedor:this.codigoCliente};this.filasTiempo.iniciarContador(),this.consolidadoProductosService.listarInvFunVentasConsolidandoProductosTO(e,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeListarInvFunVentasConsolidandoProductosTO=function(t){this.listaResultado=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.imprimirConsProdVenta=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaInicio),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaFin),bodega:this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.bodegaSeleccionada.bodNombre:"",cliente:this.codigoCliente?this.cliente.cliRazonSocial:"",listInvFunVentasConsolidandoProductosTO:this.listaResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteConsolidadoVentaProducto",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoVentasConsolidandoProductos.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarConsProdVenta=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={listInvFunVentasConsolidandoProductosTO:this.listaResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteVentasConsolidandoProductos",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoVentasConsolidandoProductos_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.buscarCliente=function(t){var e=this;if(this.utilService.validarKeyBuscar(t.keyCode)&&!this.esValidoCliente()){var o={empresa:p.a.KEY_EMPRESA_SELECT,busqueda:this.cliente.cliCodigo,mostrarInactivo:!1};t.srcElement.blur(),t.preventDefault();var a=this.modalService.open(Be.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.parametros=o,a.componentInstance.isModal=!0,a.result.then(function(t){t&&(e.cliente=t,e.codigoCliente=e.cliente.cliCodigo)},function(){e.focusClienteCodigo()})}},t.prototype.focusClienteCodigo=function(){var t=document.getElementById("clienteCodigo");t&&t.focus()},t.prototype.esValidoCliente=function(){return""!=this.cliente.cliCodigo&&this.cliente.cliCodigo===this.codigoCliente},t.prototype.validarCliente=function(){this.cliente.cliCodigo!==this.codigoCliente&&(this.cliente=new ke.a,this.codigoCliente=null)},t.prototype.generarOpciones=function(){var t=this;this.opciones=[{label:p.a.MSJ_CONSULTAR_KARDEX,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.consultarKardex()}}]},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.consolidadoProductosService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.components={},this.frameworkComponents={botonOpciones:Fe.a,toolTip:w.a}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.ventaConsolSeleccionado=e?e.data:null},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.ventaConsolSeleccionado=t,this.ventaConsolSeleccionado.vcpCodigo&&(this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation())},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Je([Object(a.ViewChild)("menuOpciones"),ze("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),Je([Object(a.HostListener)("window:resize",["$event"]),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],t.prototype,"onResize",null),t=Je([Object(a.Component)({selector:"app-ventas-consolidado-productos",template:o("ribN"),styles:[o("BFID")]}),ze("design:paramtypes",[Re.b,E.b,f.a,T.a,i.ActivatedRoute,Te.a,C.a,u.HotkeysService,L.a,n.a,Pe.a,je])],t)}(),He=o("UwNZ"),Ke=o("TsNY"),Ye=o("lpxS"),Xe=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},$e=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},qe=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvFunVentasConsolidandoProductosCoberturaTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunVentasConsolidandoProductosCoberturaTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvFunVentasConsolidandoProductosCoberturaTO(t.extraInfo):(e.despuesDeListarInvFunVentasConsolidandoProductosCoberturaTO([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PRODUCTO,field:"vcpProducto",width:200,minWidth:200,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_CODIGO,field:"vcpCodigo",width:150,minWidth:150,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_MEDIDA,field:"vcpMedida",width:200,minWidth:200,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_CANTIDAD,field:"vcpCantidad",width:150,minWidth:150,valueFormatter:Ze,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_TOTAL,field:"vcpTotal",width:100,minWidth:100,valueFormatter:Ze,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_PORCENTAJE,field:"vcpPorcentaje",width:100,minWidth:100,valueFormatter:Ze,cellClass:function(t){return t.data.vcpCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(t){return t.data.vcpCodigo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.MSJ_CONSULTAR_KARDEX,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},t=Xe([Object(a.Injectable)({providedIn:"root"}),$e("design:paramtypes",[_.a,E.b,f.a])],t)}();function Ze(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var Qe=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},to=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},eo=function(){function t(t,e,o,a,i,n,r,s,c,l,d,m,u){this.toastr=t,this.utilService=e,this.route=o,this.filasService=a,this.atajoService=i,this.archivoService=n,this.sistemaService=r,this.sectorService=s,this.bodegaService=c,this.motivoVentaService=l,this.modalService=d,this.productoService=m,this.ventasConsolidadoProductosCoberturaService=u,this.listadoResultadoVentasConsProdCob=[],this.listaEmpresas=[],this.listaSectores=[],this.listaBodegas=[],this.listaMotivos=[],this.bodegaSeleccionada=new Oe.a,this.sectorSeleccionado=new I.a,this.motivoSeleccionado=new Ye.a,this.cliente=new ke.a,this.constantes=p.a,this.es={},this.cargando=!1,this.activar=!1,this.screamXS=!0,this.filasTiempo=new P.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.codigoCliente=null,this.mostrarKardex=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return t.prototype.ngOnInit=function(){Ee.locale("es"),this.constantes=p.a,this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.ventasConsolProductosCobertura,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.obtenerFechaInicioActualMes(),this.iniciarAgGrid()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarVentasConsProdCob");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarVentasConsProdCob");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarVentasConsProdCob");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirVentasConsProdCob");return t&&t.click(),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.motivoSeleccionado=null,this.bodegaSeleccionada=null,this.limpiarResultado(),this.listarSectores(),this.listarBodegas(),this.listarMotivos()},t.prototype.limpiarResultado=function(){this.listadoResultadoVentasConsProdCob=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0")},t.prototype.obtenerFechaInicioActualMes=function(){var t=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(e){t.fechaDesde=e[0],t.fechaHasta=e[1],t.fechaActual=e[1]}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.listarSectores=function(){this.cargando=!0,this.listaSectores=[],this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.listarBodegas=function(){this.cargando=!0,this.listaBodegas=[],this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,inactivo:!1};this.bodegaService.listarInvListaBodegasTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvListaBodegasTO=function(t){var e=this;this.listaBodegas=t,this.listaBodegas.length>0?this.bodegaSeleccionada=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.listaBodegas.find(function(t){return t.bodCodigo===e.bodegaSeleccionada.bodCodigo}):null:this.bodegaSeleccionada=null,this.cargando=!1},t.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[],this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,filtrarInactivos:!1};this.motivoVentaService.listarVentaMotivoComboTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarVentaMotivoComboTO=function(t){var e=this;this.listaMotivos=t,this.listaMotivos.length>0?this.motivoSeleccionado=this.motivoSeleccionado&&this.motivoSeleccionado.vmCodigo?this.listaMotivos.find(function(t){return t.vmCodigo===e.motivoSeleccionado.vmCodigo}):null:this.motivoSeleccionado=null,this.cargando=!1},t.prototype.buscarCliente=function(t){var e=this;if(this.utilService.validarKeyBuscar(t.keyCode)&&!this.esValidoCliente()){var o={empresa:p.a.KEY_EMPRESA_SELECT,busqueda:this.cliente.cliCodigo,mostrarInactivo:!1};t.srcElement.blur(),t.preventDefault();var a=this.modalService.open(Be.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.parametros=o,a.componentInstance.isModal=!0,a.result.then(function(t){t&&(e.cliente=t,e.codigoCliente=e.cliente.cliCodigo)},function(t){e.focusClienteCodigo()})}},t.prototype.esValidoCliente=function(){return""!=this.cliente.cliCodigo&&this.cliente.cliCodigo===this.codigoCliente},t.prototype.validarCliente=function(){this.cliente.cliCodigo!==this.codigoCliente&&(this.cliente=new ke.a,this.codigoCliente=null)},t.prototype.focusClienteCodigo=function(){var t=document.getElementById("clienteCodigo");t&&t.focus()},t.prototype.buscarVentasConsProdCob=function(t){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o={empresa:this.empresaSeleccionada.empCodigo,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),sector:this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectorSeleccionado.secCodigo:null,bodega:this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.bodegaSeleccionada.bodCodigo:null,motivo:this.motivoSeleccionado&&this.motivoSeleccionado.vmCodigo?this.motivoSeleccionado.vmCodigo:null,cliente:this.codigoCliente};this.filasTiempo.iniciarContador(),this.ventasConsolidadoProductosCoberturaService.listarInvFunVentasConsolidandoProductosCoberturaTO(o,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeListarInvFunVentasConsolidandoProductosCoberturaTO=function(t){this.filasTiempo.finalizarContador(),this.listadoResultadoVentasConsProdCob=t,this.cargando=!1,this.generarAtajosTeclado()},t.prototype.imprimirVentasConsProdCob=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),bodega:this.bodegaSeleccionada?this.bodegaSeleccionada.bodCodigo:"",motivo:this.motivoSeleccionado?this.motivoSeleccionado.vmCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",cliente:this.codigoCliente?this.codigoCliente:"",listInvFunVentasConsolidandoProductosCoberturaTO:this.listadoResultadoVentasConsProdCob};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteConsolidadoVentaProductoCobertura",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoConsolidandoVentaProductoCobertura.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarVentasConsProdCob=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",listInvFunVentasConsolidandoProductosCoberturaTO:this.listadoResultadoVentasConsProdCob};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteInvFunVentasConsolidandoProductosCoberturaTO",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"consolidandoVentaProductoCobertura_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.ejecutarAccion=function(t){this.ventaConsProdCobSeleccionado=t,this.consultarKardex()},t.prototype.consultarKardex=function(){this.ventaConsProdCobSeleccionado&&this.ventaConsProdCobSeleccionado.vcpCodigo&&(this.objetoDesdeFuera={empresa:this.empresaSeleccionada,bodega:this.bodegaSeleccionada?this.bodegaSeleccionada:null,fechaDesde:this.fechaDesde,fechaHasta:this.fechaHasta,productoSeleccionado:null},this.obtenerInvProductoTO())},t.prototype.obtenerInvProductoTO=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,codigo:this.ventaConsProdCobSeleccionado.vcpCodigo?this.ventaConsProdCobSeleccionado.vcpCodigo:""};this.productoService.obtenerProducto(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerProducto=function(t){this.objetoDesdeFuera.productoSeleccionado=t?new Le.a:null,this.objetoDesdeFuera.productoSeleccionado.proCodigoPrincipal=t?t.proCodigoPrincipal:null,this.objetoDesdeFuera.productoSeleccionado.proCategoria=t?t.catCodigo:null,this.objetoDesdeFuera.productoSeleccionado.proNombre=t?t.proNombre:null,this.objetoDesdeFuera.productoSeleccionado.detalleMedida=t?t.medCodigo:null,this.cargando=!1,this.objetoDesdeFuera=t?this.objetoDesdeFuera:null,this.mostrarKardex=!!t},t.prototype.cerrarKardex=function(t){this.mostrarKardex=t,this.objetoDesdeFuera=null,this.generarAtajosTeclado()},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.ventasConsolidadoProductosCoberturaService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.components={},this.frameworkComponents={botonOpciones:Fe.a,toolTip:w.a}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.ventaConsProdCobSeleccionado=e?e.data:null},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Qe([Object(a.HostListener)("window:resize",["$event"]),to("design:type",Function),to("design:paramtypes",[]),to("design:returntype",void 0)],t.prototype,"onResize",null),t=Qe([Object(a.Component)({selector:"app-ventas-consolidado-productos-cobertura",template:o("v4GV"),styles:[o("lUXf")]}),to("design:paramtypes",[E.b,f.a,i.ActivatedRoute,C.a,u.HotkeysService,L.a,n.a,T.a,Te.a,X.a,Re.b,Pe.a,qe])],t)}(),oo=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ao=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},io=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvFunVentasConsolidandoClientesTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunVentasConsolidandoClientesTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvFunVentasConsolidandoClientesTO(t.extraInfo):(e.despuesDeListarInvFunVentasConsolidandoClientesTO([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_N_IDENTIFICACION,field:"vtaIdentificacion",width:200,minWidth:200,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:p.a.TAG_NUMERO_IDENTIFICACION,text:p.a.TAG_N_IDENTIFICACION},cellClass:function(t){return t.data.vtaNombreCliente?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_NOMBRE,field:"vtaNombreCliente",width:150,minWidth:150,cellClass:function(t){return t.data.vtaNombreCliente?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_N_COMPLEMENTO,field:"vtaNumeroComprobantes",width:200,minWidth:200,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:p.a.TAG_NUMERO_COMPLEMENTO,text:p.a.TAG_N_COMPLEMENTO},cellClass:function(t){return t.data.vtaNombreCliente?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_BASE_0,field:"vtaBase0",width:150,minWidth:150,valueFormatter:no,cellClass:function(t){return t.data.vtaNombreCliente?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_BASE_IMPONIBLE,field:"vtaBaseimponible",width:100,minWidth:100,valueFormatter:no,cellClass:function(t){return t.data.vtaNombreCliente?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_MONTO_IVA,field:"vtaMontoiva",width:100,minWidth:100,valueFormatter:no,cellClass:function(t){return t.data.vtaNombreCliente?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_TOTAL,field:"vtaTotal",width:100,minWidth:100,valueFormatter:no,cellClass:function(t){return t.data.vtaNombreCliente?"text-whitespace text-right":"tr-negrita text-right"}}]},t=oo([Object(a.Injectable)({providedIn:"root"}),ao("design:paramtypes",[_.a,E.b,f.a])],t)}();function no(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var ro=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},so=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},co=function(){function t(t,e,o,a,i,n,r,s,c){this.toastr=t,this.utilService=e,this.sectorService=o,this.route=a,this.filasService=i,this.atajoService=n,this.archivoService=r,this.sistemaService=s,this.ventasConsolidadoClientesService=c,this.listaResultadoVentasConsClientes=[],this.listaEmpresas=[],this.listaSectores=[],this.sectorSeleccionado=new I.a,this.constantes=p.a,this.es={},this.cargando=!1,this.activar=!1,this.screamXS=!0,this.filasTiempo=new P.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.columnDefs=[],this.columnDefsSelected=[],this.components={},Ee.locale("es"),this.constantes=p.a,this.es=this.utilService.setLocaleDate()}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.ventasConsolidadoClientes,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.obtenerFechaInicioActualMes(),this.iniciarAgGrid()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarVentasConsClientes");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirVentasConsClientes");return t&&t.click(),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.limpiarResultado(),this.listarSectores()},t.prototype.limpiarResultado=function(){this.listaResultadoVentasConsClientes=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0")},t.prototype.obtenerFechaInicioActualMes=function(){var t=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(e){t.fechaDesde=e[0],t.fechaHasta=e[1],t.fechaActual=e[1]}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.buscarVentasConsClientes=function(t){this.limpiarResultado(),this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o={empresa:this.empresaSeleccionada.empCodigo,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),sector:this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectorSeleccionado.secCodigo:null};this.filasTiempo.iniciarContador(),this.ventasConsolidadoClientesService.listarInvFunVentasConsolidandoClientesTO(o,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeListarInvFunVentasConsolidandoClientesTO=function(t){this.filasTiempo.finalizarContador(),this.listaResultadoVentasConsClientes=t,this.cargando=!1},t.prototype.imprimirVentasConsClientes=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",listInvFunVentasConsolidandoClientesTO:this.listaResultadoVentasConsClientes};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteConsolidadoVentaCliente",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoSaldoBodegaComprobacionMontos.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarVentasConsClientes=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",listInvFunVentasConsolidandoClientesTO:this.listaResultadoVentasConsClientes};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteInvFunVentasConsolidandoClientesTO",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ventasConsolidandoClientes_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.ventasConsolidadoClientesService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.frameworkComponents={botonOpciones:Fe.a,toolTip:w.a},this.context={componentParent:this},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},ro([Object(a.HostListener)("window:resize",["$event"]),so("design:type",Function),so("design:paramtypes",[]),so("design:returntype",void 0)],t.prototype,"onResize",null),t=ro([Object(a.Component)({selector:"app-ventas-consolidado-clientes",template:o("4aFg"),styles:[o("OppO")]}),so("design:paramtypes",[E.b,f.a,T.a,i.ActivatedRoute,C.a,u.HotkeysService,L.a,n.a,io])],t)}(),lo=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},po=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},mo=function(){function t(t,e,o){this.api=t,this.utilService=e,this.toastr=o}return t.prototype.listarComprasPorPeriodo=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getComprasPorPeriodo",t,o).then(function(t){if(t&&t.extraInfo){var o=a.utilService.convertirMatrizEnLista(t.extraInfo.datos),i={columnas:t.extraInfo.columnas,listado:o,datos:t.extraInfo.datos,columnasFaltantes:t.extraInfo.columnasFaltantes};e.despuesDeListarComprasPorPeriodo(i)}else a.toastr.warning(t.operacionMensaje,"Aviso"),e.despuesDeListarComprasPorPeriodo(null),e.cargando=!1}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.convertirCabeceraObjetoConEstilo=function(t){var e=[],o=0;return t.forEach(function(t){var a={headerName:null,width:null,field:null,cellClass:null,valueFormatter:null,pinned:null};a.headerName=t,a.field=o+"",a.width="Producto"===t?350:100,a.pinned="Producto"===t||"C\xf3digo"===t||"Medida"===t?"left":null,a.cellClass=function(e){var o="Producto"===t||"C\xf3digo"===t||"Medida"===t?"text-sm-left ":"text-sm-right ";return e.data[1]?o+="text-whitespace":o+="tr-negrita "},a.valueFormatter="Producto"===t||"C\xf3digo"===t||"Medida"===t?null:uo,e.push(a),o+=1}),e.push({headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(t){return t.data[1]?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.MSJ_CONSULTAR_KARDEX,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}),e},t=lo([Object(a.Injectable)({providedIn:"root"}),po("design:paramtypes",[_.a,f.a,E.b])],t)}();function uo(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var ho=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},vo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Co=function(){function t(t,e,o,a,i,n,r,s,c,l,d){this.toastr=t,this.utilService=e,this.sectorService=o,this.route=a,this.filasService=i,this.atajoService=n,this.archivoService=r,this.sistemaService=s,this.productoService=c,this.bodegaService=l,this.comprasConsProdMensualService=d,this.listaEmpresas=[],this.listaSectores=[],this.listaBodegas=[],this.sectorSeleccionado=new I.a,this.bodegaSeleccionada=new Oe.a,this.constantes=p.a,this.es={},this.cargando=!1,this.activar=!1,this.filasTiempo=new P.a,this.listaResultado=[],this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.columnas=[],this.columnasFaltantes=[],this.mostrarKardex=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,Ee.locale("es"),this.constantes=p.a,this.es=this.utilService.setLocaleDate()}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.comprasConsolProductosMensual,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.obtenerFechaInicioActualMes()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportar");return t&&t.click(),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.bodegaSeleccionada=null,this.limpiarResultado(),this.listarSectores(),this.listarBodegas()},t.prototype.limpiarResultado=function(){this.datos=[],this.gridApi=null,this.gridColumnApi=null,this.listaResultado=[],this.filasTiempo.resetearContador(),this.actualizarFilas()},t.prototype.obtenerFechaInicioActualMes=function(){var t=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(e){t.fechaDesde=e[0],t.fechaHasta=e[1],t.fechaActual=e[1]}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.listarBodegas=function(){this.cargando=!0,this.listaBodegas=[],this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,inactivo:!1};this.bodegaService.listarInvListaBodegasTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvListaBodegasTO=function(t){var e=this;this.listaBodegas=t,this.listaBodegas.length>0?this.bodegaSeleccionada=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.listaBodegas.find(function(t){return t.bodCodigo===e.bodegaSeleccionada.bodCodigo}):null:this.bodegaSeleccionada=null,this.cargando=!1},t.prototype.ejecutarAccion=function(t){this.comprasConsProductoMenSeleccionado=t,this.consultarKardex()},t.prototype.consultarKardex=function(){this.comprasConsProductoMenSeleccionado&&this.comprasConsProductoMenSeleccionado[1]&&(this.objetoDesdeFuera={empresa:this.empresaSeleccionada,bodega:this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.bodegaSeleccionada:null,fechaDesde:this.fechaDesde,fechaHasta:this.fechaHasta,productoSeleccionado:null},this.obtenerInvProductoTO())},t.prototype.obtenerInvProductoTO=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,codigo:this.comprasConsProductoMenSeleccionado[1]?this.comprasConsProductoMenSeleccionado[1]:""};this.productoService.obtenerProducto(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerProducto=function(t){this.objetoDesdeFuera.productoSeleccionado=t?new Le.a:null,this.objetoDesdeFuera.productoSeleccionado.proCodigoPrincipal=t?t.proCodigoPrincipal:null,this.objetoDesdeFuera.productoSeleccionado.proCategoria=t?t.catCodigo:null,this.objetoDesdeFuera.productoSeleccionado.proNombre=t?t.proNombre:null,this.objetoDesdeFuera.productoSeleccionado.detalleMedida=t?t.medCodigo:null,this.cargando=!1,this.objetoDesdeFuera=t?this.objetoDesdeFuera:null,this.mostrarKardex=!!t},t.prototype.cerrarKardex=function(t){this.mostrarKardex=t,this.objetoDesdeFuera=null,this.generarAtajosTeclado()},t.prototype.buscarComprasConsProdMensual=function(t,e){this.limpiarResultado(),this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a={empresa:this.empresaSeleccionada.empCodigo,fechaInicio:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaFin:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),codigoSector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,chk:t};this.filasTiempo.iniciarContador(),this.comprasConsProdMensualService.listarComprasPorPeriodo(a,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeListarComprasPorPeriodo=function(t){this.filasTiempo.finalizarContador(),this.datos=t?t.datos:[],this.columnasFaltantes=t?t.columnasFaltantes:[],t&&(this.columnas=t.columnas?t.columnas:[],this.columnDefs=this.comprasConsProdMensualService.convertirCabeceraObjetoConEstilo(t.columnas?t.columnas:[]),this.listaResultado=t?t.listado:[],this.iniciarAgGrid()),this.cargando=!1},t.prototype.exportarComprasConsProdMensual=function(){var t=this;this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)&&(this.cargando=!0,this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteComprasPorPeriodo",{datos:this.datos,columnas:this.columnas,columnasFaltantes:this.columnasFaltantes},this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"comprasConsolidandoProductosMensual_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)}))},t.prototype.generarOpciones=function(){var t=this;this.opciones=[{label:p.a.MSJ_CONSULTAR_KARDEX,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.consultarKardex()}}]},t.prototype.iniciarAgGrid=function(){this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:Fe.a,toolTip:w.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.comprasConsProductoMenSeleccionado=e?e.data:null},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.comprasConsProductoMenSeleccionado=t,this.comprasConsProductoMenSeleccionado[1]&&(this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation())},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},ho([Object(a.ViewChild)("menuOpciones"),vo("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),ho([Object(a.HostListener)("window:resize",["$event"]),vo("design:type",Function),vo("design:paramtypes",[]),vo("design:returntype",void 0)],t.prototype,"onResize",null),t=ho([Object(a.Component)({selector:"app-compras-consolidado-productos-mensual",template:o("9UHE"),styles:[o("BgDo")]}),vo("design:paramtypes",[E.b,f.a,T.a,i.ActivatedRoute,C.a,u.HotkeysService,L.a,n.a,Pe.a,Te.a,mo])],t)}(),fo=function(){function t(t){this.id=null,this.vcProducto=null,this.vcCodigo=null,this.vcMedida=null,this.vcCantidad=null,this.vcTotalVentas=null,this.vcTotalCosto=null,this.vcPorcentaje=null,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.id=t.id?t.id:this.id,this.vcProducto=t.vcProducto?t.vcProducto:this.vcProducto,this.vcCodigo=t.vcCodigo?t.bodResponsable:this.vcCodigo,this.vcMedida=t.vcMedida?t.vcMedida:this.vcMedida,this.vcCantidad=t.vcCantidad?t.vcCantidad:this.vcCantidad,this.vcTotalVentas=t.vcTotalVentas?t.vcTotalVentas:this.vcTotalVentas,this.vcTotalCosto=t.vcTotalCosto?t.vcTotalCosto:this.vcTotalCosto,this.vcPorcentaje=t.vcPorcentaje?t.vcPorcentaje:this.vcPorcentaje},t}(),Ao=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},go=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},bo=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvFunVentasVsCostoTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunVentasVsCostoTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvFunVentasVsCostoTO(t.extraInfo):(e.despuesDeListarInvFunVentasVsCostoTO([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PRODUCTO,field:"vcProducto",width:250,minWidth:250,cellClass:function(t){return t.data.vcCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_CODIGO,field:"vcCodigo",width:150,minWidth:150,cellClass:function(t){return t.data.vcCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_MEDIDA,field:"vcMedida",width:150,minWidth:150,cellClass:function(t){return t.data.vcCodigo?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_CANTIDAD,field:"vcCantidad",width:150,minWidth:150,valueFormatter:So,cellClass:function(t){return t.data.vcCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_TOTAL_VENTA,field:"vcTotalVentas",width:150,minWidth:150,valueFormatter:So,cellClass:function(t){return t.data.vcCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_TOTAL_COSTO,field:"vcTotalCosto",width:150,minWidth:150,valueFormatter:So,cellClass:function(t){return t.data.vcCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_PORCENTAJE,field:"vcPorcentaje",width:150,minWidth:150,valueFormatter:So,cellClass:function(t){return t.data.vcCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-center",cellRendererParams:function(t){return t.data.vcCodigo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.MSJ_CONSULTAR_KARDEX,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},t=Ao([Object(a.Injectable)({providedIn:"root"}),go("design:paramtypes",[_.a,E.b,f.a])],t)}();function So(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var Oo=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Ro=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Io=function(){function t(t,e,o,a,i,n,r,s,c,l,u){this.route=t,this.toastr=e,this.atajoService=o,this.filasService=a,this.utilService=i,this.archivoService=n,this.sistemaService=r,this.bodegaService=s,this.modalService=c,this.productoService=l,this.analisisVentasVsCostosService=u,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.listaBodegas=[],this.listaResultadoAnalisisVentasVsCostos=[],this.analisisVentasVsCostosSeleccionado=new fo,this.bodegaSeleccionada=new Oe.a,this.cliente=new m.a,this.clienteCodigo=null,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.filasTiempo=new P.a,this.mostrarKardex=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return t.prototype.ngOnInit=function(){this.constantes=p.a,Ee.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.analisisVentasVsCostos,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.obtenerFechaInicioActualMes(),this.focusClienteCodigo()},t.prototype.iniciarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarAnalisisVentasVsCostos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarAnalisisVentasVsCostos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirAnalisisVentasVsCostos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarAnalisisVentasVsCostos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CONSULTAR,function(){return t.listaResultadoAnalisisVentasVsCostos.length>0&&t.consultarKardex(),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.bodegaSeleccionada=null,this.limpiarResultado(),this.cliente.invClientePK.cliCodigo="",this.cliente.cliRazonSocial="",this.listarBodegas()},t.prototype.limpiarResultado=function(){this.listaResultadoAnalisisVentasVsCostos=[],this.filasService.actualizarFilas("0","0")},t.prototype.obtenerFechaInicioActualMes=function(){var t=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(e){t.fechaDesde=e[0],t.fechaHasta=e[1],t.fechaActual=e[1]}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.listarBodegas=function(){this.cargando=!0,this.listaBodegas=[],this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,inactivo:!1};this.bodegaService.listarInvListaBodegasTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvListaBodegasTO=function(t){var e=this;this.listaBodegas=t,this.listaBodegas.length>0?this.bodegaSeleccionada=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.listaBodegas.find(function(t){return t.bodCodigo===e.bodegaSeleccionada.bodCodigo}):null:this.bodegaSeleccionada=null,this.cargando=!1},t.prototype.buscarCliente=function(t){if(this.utilService.validarKeyBuscar(t.keyCode)&&this.cliente.invClientePK.cliCodigo&&!(this.cliente.invClientePK.cliCodigo&&this.clienteCodigo&&this.cliente.invClientePK.cliCodigo===this.clienteCodigo)){var e={empresa:p.a.KEY_EMPRESA_SELECT,busqueda:this.cliente.invClientePK.cliCodigo,mostrarInactivo:!1};t.srcElement.blur(),t.preventDefault(),this.abrirModalCliente(e)}},t.prototype.abrirModalCliente=function(t){var e=this,o=this.modalService.open(Be.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=t,o.componentInstance.isModal=!0,o.result.then(function(t){t?(e.clienteCodigo=t?t.cliCodigo:null,e.cliente.invClientePK.cliCodigo=t?t.cliCodigo:null,e.cliente.cliRazonSocial=t?t.cliRazonSocial:null,e.cliente.invClienteGrupoEmpresarial.geNombre=t?t.cliGrupoEmpresarialNombre:null,e.focusClienteCodigo()):e.focusClienteCodigo()},function(){e.focusClienteCodigo()})},t.prototype.validarCliente=function(){this.cliente.invClientePK.cliCodigo!==this.clienteCodigo&&(this.clienteCodigo=null,this.cliente=new m.a)},t.prototype.focusClienteCodigo=function(){var t=document.getElementById("codCliente");t&&t.focus()},t.prototype.ejecutarAccion=function(t){this.analisisVentasVsCostosSeleccionado=t,this.consultarKardex()},t.prototype.consultarKardex=function(){this.analisisVentasVsCostosSeleccionado&&this.analisisVentasVsCostosSeleccionado.vcCodigo&&(this.objetoDesdeFuera={empresa:this.empresaSeleccionada,bodega:this.bodegaSeleccionada,fechaDesde:this.fechaDesde,fechaHasta:this.fechaHasta,productoSeleccionado:null},this.obtenerInvProductoTO())},t.prototype.obtenerInvProductoTO=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,codigo:this.analisisVentasVsCostosSeleccionado.vcCodigo?this.analisisVentasVsCostosSeleccionado.vcCodigo:""};this.productoService.obtenerProducto(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerProducto=function(t){this.objetoDesdeFuera.productoSeleccionado=t?new Le.a:null,this.objetoDesdeFuera.productoSeleccionado.proCodigoPrincipal=t?t.proCodigoPrincipal:null,this.objetoDesdeFuera.productoSeleccionado.proCategoria=t?t.catCodigo:null,this.objetoDesdeFuera.productoSeleccionado.proNombre=t?t.proNombre:null,this.objetoDesdeFuera.productoSeleccionado.detalleMedida=t?t.medCodigo:null,this.cargando=!1,this.objetoDesdeFuera=t?this.objetoDesdeFuera:null,this.mostrarKardex=!!t},t.prototype.cerrarKardex=function(t){this.mostrarKardex=t,this.objetoDesdeFuera=null,this.iniciarAtajosTeclado()},t.prototype.buscarAnalisisVentasVsCosto=function(t){if(this.cargando=!0,this.limpiarResultado(),this.utilService.establecerFormularioTocado(t)&&t&&t.valid){this.filasTiempo.iniciarContador();var e={desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),empresa:this.empresaSeleccionada.empCodigo,bodega:this.bodegaSeleccionada?this.bodegaSeleccionada.bodCodigo:null,cliente:this.clienteCodigo};this.analisisVentasVsCostosService.listarInvFunVentasVsCostoTO(e,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeListarInvFunVentasVsCostoTO=function(t){this.listaResultadoAnalisisVentasVsCostos=t,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},t.prototype.imprimirAnalisisVentasVsCosto=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),bodega:this.bodegaSeleccionada?this.bodegaSeleccionada.bodCodigo:"",clienteId:"",invFunVentasVsCostoTO:this.listaResultadoAnalisisVentasVsCostos};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteInvFunVentasVsCosto",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("listadoAnalisisVentasVsCosto.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarAnalisisVentasVsCosto=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={listInvFunVentasVsCostoTO:this.listaResultadoAnalisisVentasVsCostos};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteInvFunVentasVsCosto",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"analisisVentasVsCosto_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.generarOpciones=function(){var t=this;this.opciones=[{label:p.a.MSJ_CONSULTAR_KARDEX,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.consultarKardex()}}]},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.analisisVentasVsCostosService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.frameworkComponents={botonOpciones:Fe.a,toolTip:w.a},this.context={componentParent:this},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.analisisVentasVsCostosSeleccionado=e?e.data:null},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.analisisVentasVsCostosSeleccionado=t,this.analisisVentasVsCostosSeleccionado.vcCodigo&&(this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation())},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Oo([Object(a.ViewChild)("menuOpciones"),Ro("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),Oo([Object(a.HostListener)("window:resize",["$event"]),Ro("design:type",Function),Ro("design:paramtypes",[]),Ro("design:returntype",void 0)],t.prototype,"onResize",null),t=Oo([Object(a.Component)({selector:"app-analisis-ventas-vs-costos",template:o("4qws"),styles:[o("ikmz")]}),Ro("design:paramtypes",[i.ActivatedRoute,E.b,u.HotkeysService,C.a,f.a,L.a,n.a,Te.a,Re.b,Pe.a,bo])],t)}(),To=o("WCC+"),Eo=o("Vlg3"),_o=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},yo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Mo=function(){function t(t,e,o,a,i){this.route=t,this.filasService=e,this.atajoService=o,this.productoCategoriaService=a,this.utilService=i,this.listaCategorias=[],this.listaEmpresas=[],this.listadoProductos=[],this.categoriaSeleccionada=new To.a,this.filasTiempo=new P.a,this.cargando=!1,this.activar=!1,this.constantes=p.a,this.busqueda=null,this.parametro=null,this.parametrosFormulario=null,this.vistaFormulario=!1,this.vistaListado=!1,this.listarProductosEstado=!1}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.listadoProducto,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado()},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.categoriaSeleccionada=null,this.busqueda=null,this.limpiarResultado(),this.listarCategorias()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarProductos");return t&&t.click(),!1}))},t.prototype.limpiarResultado=function(){this.listadoProductos=[],this.parametro=null,this.parametrosFormulario=null,this.vistaListado=!1,this.vistaFormulario=!1,this.listarProductosEstado=!1,this.objetoNuevoEditado={producto:null,accion:null},this.filasService.actualizarFilas("0","0")},t.prototype.listarCategorias=function(){this.cargando=!0,this.listaCategorias=[],this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT,tipoComprobante:"",accion:p.a.ACCION_COMBO};this.productoCategoriaService.listarInvProductoCategoriaTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvProductoCategoriaTO=function(t){var e=this;this.listaCategorias=t,this.listaCategorias.length>0?this.categoriaSeleccionada=this.categoriaSeleccionada&&this.categoriaSeleccionada.catCodigo?this.listaCategorias.find(function(t){return t.catCodigo===e.categoriaSeleccionada.catCodigo}):null:this.categoriaSeleccionada=null,this.cargando=!1},t.prototype.buscarProductos=function(t){this.limpiarResultado(),this.parametro={empresa:p.a.KEY_EMPRESA_SELECT,categoria:this.categoriaSeleccionada&&this.categoriaSeleccionada.catCodigo?this.categoriaSeleccionada.catCodigo:null,busqueda:this.busqueda?this.busqueda:null,incluirInactivos:t,limite:!1,activar:!1,vista:"listadoProductos"},this.listarProductosEstado=!0,this.activar=!1,this.vistaListado=!0,this.vistaFormulario=!1},t.prototype.accionLista=function(t){switch(t.accion){case p.a.ACCION_CANCELAR:this.activar=!1,this.vistaListado=!0,this.parametrosFormulario=null,this.vistaFormulario=!1,this.listarProductosEstado=!1,this.objetoNuevoEditado={producto:null,accion:null};break;case p.a.ACCION_MODIFICADO:this.objetoNuevoEditado={accion:t.accion,producto:t.objeto},this.parametrosFormulario=null,this.vistaFormulario=!1,this.activar=!1,this.vistaListado=!0,this.listarProductosEstado=!1;break;case p.a.ACCION_EDITAR:case p.a.ACCION_CONSULTAR:this.objetoNuevoEditado={accion:null,producto:null},this.mostrarFormulario(t);break;default:this.buscarProductos(!1)}this.generarAtajosTeclado()},t.prototype.mostrarFormulario=function(t){this.vistaFormulario=!0,this.vistaListado=!1,this.activar=!0,this.parametrosFormulario={accion:t.accion,activar:!0,objetoSeleccionado:t.objetoSeleccionado}},t=_o([Object(a.Component)({selector:"app-listado-producto",template:o("jo2z"),styles:[o("bK3+")]}),yo("design:paramtypes",[i.ActivatedRoute,C.a,u.HotkeysService,Eo.a,f.a])],t)}(),No=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Po=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Lo=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarListadoProductosPreciosStock=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaProductosTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarListadoProductosPreciosStock(t.extraInfo):(e.despuesDeListarListadoProductosPreciosStock([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_CODIGO,field:"proCodigoPrincipal",width:150,minWidth:150},{headerName:p.a.TAG_NOMBRE,field:"proNombre",width:250,minWidth:250},{headerName:p.a.TAG_CATEGORIA,field:"proCategoria",width:150,minWidth:150},{headerName:p.a.TAG_STOCK,field:"stockSaldo",width:150,minWidth:150,valueFormatter:Fo,valueGetter:function(t){return t.data.stockSaldo?t.data.stockSaldo:0},cellClass:"text-right"},{headerName:p.a.TAG_MEDIDA,field:"detalleMedida",width:150,minWidth:150},{headerName:p.a.TAG_PRECIO_1,field:"stockPrecio1",width:150,minWidth:150,valueFormatter:Fo,cellClass:"text-right"},{headerName:p.a.TAG_PRECIO_2,field:"stockPrecio2",width:150,minWidth:150,valueFormatter:Fo,cellClass:"text-right"},{headerName:p.a.TAG_PRECIO_3,field:"stockPrecio3",width:150,minWidth:150,valueFormatter:Fo,cellClass:"text-right"}]},t=No([Object(a.Injectable)({providedIn:"root"}),Po("design:paramtypes",[_.a,E.b,f.a])],t)}();function Fo(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var Do=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},wo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},xo=function(){function t(t,e,o,a,i,n,r,s,c){this.route=t,this.filasService=e,this.atajoService=o,this.utilService=a,this.archivoService=i,this.toastr=n,this.bodegaService=r,this.listadoProductoPrecioStockService=s,this.productoCategoriaService=c,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.listaCategorias=[],this.listaBodegas=[],this.listaResultado=[],this.bodegaSeleccionada=new Oe.a,this.categoriaSeleccionada=new To.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.busqueda=null,this.filasTiempo=new P.a,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.listadoProductosPreciosStock,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado()},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.categoriaSeleccionada=null,this.bodegaSeleccionada=null,this.limpiarResultado(),this.listarCategorias(),this.listarBodegas()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarListadoProductosPreciosStock");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarListadoProductosPreciosStock");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){return document.getElementById("btnImprimirListadoProductosPreciosStock").click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){return document.getElementById("btnExportarListadoProductosPreciosStock").click(),!1}))},t.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasService.actualizarFilas("0","0")},t.prototype.listarCategorias=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,tipoComprobante:"",accion:p.a.ACCION_COMBO};this.productoCategoriaService.listarInvProductoCategoriaTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvProductoCategoriaTO=function(t){var e=this;this.listaCategorias=t,this.listaCategorias.length>0?this.categoriaSeleccionada=this.categoriaSeleccionada&&this.categoriaSeleccionada.catCodigo?this.listaCategorias.find(function(t){return t.catCodigo===e.categoriaSeleccionada.catCodigo}):null:this.categoriaSeleccionada=null,this.cargando=!1},t.prototype.listarBodegas=function(){this.cargando=!0,this.listaBodegas=[];var t={empresa:this.empresaSeleccionada.empCodigo,inactivo:!1};this.bodegaService.listarInvListaBodegasTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvListaBodegasTO=function(t){var e=this;this.listaBodegas=t,this.listaBodegas.length>0?this.bodegaSeleccionada=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.listaBodegas.find(function(t){return t.bodCodigo===e.bodegaSeleccionada.bodCodigo}):null:this.bodegaSeleccionada=null,this.cargando=!1},t.prototype.buscarListadoProductosPreciosStock=function(){this.cargando=!0,this.filtroGlobal="",this.listaResultado=new Array,this.filasTiempo.iniciarContador();var t={empresa:p.a.KEY_EMPRESA_SELECT,bodega:this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.bodegaSeleccionada.bodCodigo:null,categoria:this.categoriaSeleccionada&&this.categoriaSeleccionada.catCodigo?this.categoriaSeleccionada.catCodigo:null,busqueda:this.busqueda,incluirInactivos:!0,limite:!1,activar:!1};this.listadoProductoPrecioStockService.listarListadoProductosPreciosStock(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarListadoProductosPreciosStock=function(t){this.filasTiempo.finalizarContador(),this.listaResultado=t,this.cargando=!1,this.iniciarAgGrid()},t.prototype.imprimirListadoProductosPreciosStock=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={bodega:this.bodegaSeleccionada?this.bodegaSeleccionada.bodCodigo:"",listInvListaProductosTO:this.listaResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteListaProductos",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoPDF("listadoProductosPreciosStock"+t.utilService.obtenerHorayFechaActual()+".pdf",e):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarListadoProductosPreciosStock=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={listInvListaProductosTO:this.listaResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarListadoProductosPreciosStock",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"listadoProductosPreciosStock_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.listadoProductoPrecioStockService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(e){t.push(e.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Do([Object(a.HostListener)("window:resize",["$event"]),wo("design:type",Function),wo("design:paramtypes",[]),wo("design:returntype",void 0)],t.prototype,"onResize",null),t=Do([Object(a.Component)({selector:"app-listado-productos-precios-stock",template:o("7tqN"),styles:[o("8AwN")]}),wo("design:paramtypes",[i.ActivatedRoute,C.a,u.HotkeysService,f.a,L.a,E.b,Te.a,Lo,Eo.a])],t)}(),Go=function(){function t(t){this.id=null,this.errBodega="",this.errProductoCodigo="",this.errProductoNombre="",this.errCantidad=null,this.errDesde="",this.errHasta="",t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.id=t.id?t.id:this.id,this.errBodega=t.errBodega?t.errBodega:this.errBodega,this.errProductoCodigo=t.errProductoCodigo?t.errProductoCodigo:this.errProductoCodigo,this.errProductoNombre=t.errProductoNombre?t.errProductoNombre:this.errProductoNombre,this.errCantidad=t.errCantidad?t.errCantidad:this.errCantidad,this.errDesde=t.errDesde?t.errDesde:this.errDesde,this.errHasta=t.errHasta?t.errHasta:this.errHasta},t}(),Uo=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},jo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Vo=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvProductosConErrorTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListadoProductosConError",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvProductosConErrorTO(t.extraInfo):(e.despuesDeListarInvProductosConErrorTO([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_BODEGA,field:"errBodega",width:250,minWidth:250},{headerName:p.a.TAG_CODIGO,field:"errProductoCodigo",width:150,minWidth:150},{headerName:p.a.TAG_NOMBRE,field:"errProductoNombre",width:150,minWidth:150},{headerName:p.a.TAG_CANTIDAD,field:"errCantidad",width:150,minWidth:150,valueFormatter:ko,cellClass:"text-right"},{headerName:p.a.TAG_DESDE,field:"errDesde",width:100,minWidth:100},{headerName:p.a.TAG_HASTA,field:"errHasta",width:100,minWidth:100},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(t){return t.data.errProductoCodigo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.MSJ_CONSULTAR_KARDEX_VALORIZADO,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},t=Uo([Object(a.Injectable)({providedIn:"root"}),jo("design:paramtypes",[_.a,E.b,f.a])],t)}();function ko(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var Bo=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Jo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},zo=function(){function t(t,e,o,a,i,n,r,s){this.route=t,this.toastr=e,this.atajoService=o,this.filasService=a,this.utilService=i,this.archivoService=n,this.productoService=r,this.reconstruccionSaldosCostosService=s,this.listaEmpresas=[],this.listaResultadoReconstruccionSaldoCosto=[],this.reconsSaldoCostoSeleccionado=new Go,this.empresaSeleccionada=new d.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new P.a,this.mostrarKardex=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.reconstruccionSaldosCostos,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado()},t.prototype.iniciarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarReconstruccionSaldoCostos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarReconstruccionSaldoCostos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirReconstruccionSaldoCostos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarReconstruccionSaldoCostos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CONSULTAR,function(){return t.listaResultadoReconstruccionSaldoCosto.length>0&&t.consultarKardexValorizado(),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado()},t.prototype.limpiarResultado=function(){this.listaResultadoReconstruccionSaldoCosto=[],this.filasService.actualizarFilas("0","0")},t.prototype.ejecutarAccion=function(t){this.reconsSaldoCostoSeleccionado=t,this.consultarKardexValorizado()},t.prototype.consultarKardexValorizado=function(){this.reconsSaldoCostoSeleccionado&&this.reconsSaldoCostoSeleccionado.errProductoCodigo&&(this.objetoDesdeFuera={empresa:this.empresaSeleccionada,bodega:this.reconsSaldoCostoSeleccionado.errBodega,fechaDesde:new Date(this.reconsSaldoCostoSeleccionado.errDesde),fechaHasta:new Date(this.reconsSaldoCostoSeleccionado.errHasta),productoSeleccionado:null},this.obtenerInvProductoTO())},t.prototype.obtenerInvProductoTO=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,codigo:this.reconsSaldoCostoSeleccionado.errProductoCodigo?this.reconsSaldoCostoSeleccionado.errProductoCodigo:""};this.productoService.obtenerProducto(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerProducto=function(t){this.objetoDesdeFuera.productoSeleccionado=t?new Le.a:null,this.objetoDesdeFuera.productoSeleccionado.proCodigoPrincipal=t?t.proCodigoPrincipal:null,this.objetoDesdeFuera.productoSeleccionado.proCategoria=t?t.catCodigo:null,this.objetoDesdeFuera.productoSeleccionado.proNombre=t?t.proNombre:null,this.objetoDesdeFuera.productoSeleccionado.detalleMedida=t?t.medCodigo:null,this.cargando=!1,this.objetoDesdeFuera=t?this.objetoDesdeFuera:null,this.mostrarKardex=!!t},t.prototype.cerrarKardex=function(t){this.mostrarKardex=t,this.objetoDesdeFuera=null,this.iniciarAtajosTeclado()},t.prototype.buscarReconstruccionSaldoCostos=function(){this.cargando=!0,this.limpiarResultado(),this.filasTiempo.iniciarContador(),this.reconstruccionSaldosCostosService.listarInvProductosConErrorTO({empresa:this.empresaSeleccionada.empCodigo},this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvProductosConErrorTO=function(t){this.listaResultadoReconstruccionSaldoCosto=t,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},t.prototype.imprimirReconstruccionSaldoCostos=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={listInvProductosConErrorTO:this.listaResultadoReconstruccionSaldoCosto};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteInvProductosConError",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("reconstruccionSaldoCostos.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarReconstruccionSaldoCostos=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={listInvProductosConErrorTO:this.listaResultadoReconstruccionSaldoCosto};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReconstruccionSaldosCostos",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"reconstruccionSaldoCostos_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.generarOpciones=function(){var t=this;this.opciones=[{label:p.a.MSJ_CONSULTAR_KARDEX_VALORIZADO,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.consultarKardexValorizado()}}]},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.reconstruccionSaldosCostosService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.frameworkComponents={botonOpciones:Fe.a,toolTip:w.a},this.context={componentParent:this},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.reconsSaldoCostoSeleccionado=e?e.data:null},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.reconsSaldoCostoSeleccionado=t,this.reconsSaldoCostoSeleccionado.errProductoCodigo&&(this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation())},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Bo([Object(a.ViewChild)("menuOpciones"),Jo("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),Bo([Object(a.HostListener)("window:resize",["$event"]),Jo("design:type",Function),Jo("design:paramtypes",[]),Jo("design:returntype",void 0)],t.prototype,"onResize",null),t=Bo([Object(a.Component)({selector:"app-reconstruccion-saldos-costos",template:o("T2lK"),styles:[o("t3rB")]}),Jo("design:paramtypes",[i.ActivatedRoute,E.b,u.HotkeysService,C.a,f.a,L.a,Pe.a,Vo])],t)}(),Wo=function(){function t(t){this.id=null,this.compNumeroSistema=null,this.compFecha=null,this.compProveedorRuc=null,this.compProveedorNombre=null,this.compDocumentoTipo=null,this.compDocumentoNumero=null,this.compDocumentoAutorizacion=null,this.compFormaPago=null,this.compObservaciones=null,this.compBase0=null,this.compBaseImponible=null,this.compMontoIva=null,this.compTotal=null,this.compPendiente=!1,this.compAnulado=!1,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.id=t.id?t.id:this.id,this.compNumeroSistema=t.compNumeroSistema?t.compNumeroSistema:this.compNumeroSistema,this.compFecha=t.compFecha?t.compFecha:this.compFecha,this.compProveedorRuc=t.compProveedorRuc?t.compProveedorRuc:this.compProveedorRuc,this.compProveedorNombre=t.compProveedorNombre?t.compProveedorNombre:this.compProveedorNombre,this.compDocumentoTipo=t.compDocumentoTipo?t.compDocumentoTipo:this.compDocumentoTipo,this.compDocumentoNumero=t.compDocumentoNumero?t.compDocumentoNumero:this.compDocumentoNumero,this.compDocumentoAutorizacion=t.compDocumentoAutorizacion?t.compDocumentoAutorizacion:this.compDocumentoAutorizacion,this.compFormaPago=t.compFormaPago?t.compFormaPago:this.compFormaPago,this.compObservaciones=t.compObservaciones?t.compObservaciones:this.compObservaciones,this.compBase0=t.compBase0?t.compBase0:this.compBase0,this.compBaseImponible=t.compBaseImponible?t.compBaseImponible:this.compBaseImponible,this.compMontoIva=t.compMontoIva?t.compMontoIva:this.compMontoIva,this.compTotal=t.compTotal?t.compTotal:this.compTotal,this.compPendiente=t.compPendiente?t.compPendiente:this.compPendiente,this.compAnulado=t.compAnulado?t.compAnulado:this.compAnulado},t}(),Ho=o("yaVs"),Ko=o("VYM3"),Yo=o("L5HG"),Xo=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},$o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},qo=function(){function t(t,e,o){this.api=t,this.toastr=e,this.utilService=o}return t.prototype.listarInvFunComprasTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunComprasTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvFunComprasTO(t.extraInfo):(e.despuesDeListarInvFunComprasTO([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(t){var e=[];return e.push({headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-center",cellRendererParams:function(t){return"<...>"===t.data.compObservaciones?{icono:p.a.ICON_IMAGENES,tooltip:"",accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_IMAGENES,tooltip:p.a.TAG_OPCIONES,text:""}},{headerName:p.a.TAG_ESTADO,headerClass:"text-center",width:100,minWidth:90,cellClass:"text-center",cellRendererFramework:Yo.a,valueGetter:function(t){return t.data.compAnulado?(t.value=p.a.ETIQUETA_ANULADO,t.value):t.data.compPendiente?(t.value=p.a.ETIQUETA_PENDIENTE,t.value):""}},{headerName:p.a.TAG_NUMERO,field:"compNumeroSistema",width:180,minWidth:150,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_FECHA,field:"compFecha",width:120,minWidth:100,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace":"tr-negrita"}}),t.codigoProveedor||e.push({headerName:p.a.TAG_PROVEEDOR,field:"compProveedorNombre",width:250,minWidth:250,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace":"tr-negrita"}}),e.push({headerName:p.a.TAG_DOCUMENTO,field:"compDocumentoNumero",width:180,minWidth:150,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_BASE_0,field:"compBase0",width:150,minWidth:150,valueFormatter:Zo,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_BASE_IMPONIBLE,field:"compBaseImponible",width:150,minWidth:150,valueFormatter:Zo,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_MONTO_IVA,field:"compMontoIva",width:150,minWidth:150,valueFormatter:Zo,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_TOTAL,field:"compTotal",width:150,minWidth:150,valueFormatter:Zo,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_FORMA_PAGO,field:"compFormaPago",width:180,minWidth:150,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace":"tr-negrita"}},{headerName:p.a.TAG_OBSERVACIONES,field:"compObservaciones",width:350,minWidth:300,cellClass:function(t){return t.data.compNumeroSistema?"text-whitespace":"tr-negrita"}}),e},t=Xo([Object(a.Injectable)({providedIn:"root"}),$o("design:paramtypes",[_.a,E.b,f.a])],t)}();function Zo(t){return new pe.DecimalPipe("en-US").transform(t.value,"1.2-2")}var Qo=o("EEhU"),ta=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ea=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},oa=function(){function t(t,e,o,a,i,n,r,s,c,l,d,m){this.route=t,this.toastr=e,this.filasService=o,this.atajoService=a,this.utilService=i,this.archivoService=n,this.motivoService=r,this.modalService=s,this.sistemaService=c,this.tipoDocumentoService=l,this.listadoCompraService=d,this.api=m,this.listaResultadoCompras=[],this.listaEmpresas=[],this.listaMotivos=[],this.listaTipoComprobante=[],this.motivoSeleccionado=new V.a,this.tipoComprobanteSeleccionado=new Ko.a,this.proveedor=new ht.a,this.constantes=p.a,this.cargando=!1,this.activarCompras=!1,this.filasTiempo=new P.a,this.codigoProveedor=null,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.es={},this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.comprasSeleccionado=new Wo}return t.prototype.ngOnInit=function(){Ee.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.comprasListado,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.obtenerFechaInicioActualMes()},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.tipoComprobanteSeleccionado=null,this.motivoSeleccionado=null,this.proveedor=new ht.a,this.codigoProveedor=null,this.limpiarResultado(),this.listarMotivos(),this.listarTiposComprobante()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarCompras");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarCompras");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){return document.getElementById("btnImprimirCompras").click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){return document.getElementById("btnExportarCompras").click(),!1}))},t.prototype.limpiarResultado=function(){this.listaResultadoCompras=[],this.filasService.actualizarFilas("0","0")},t.prototype.obtenerFechaInicioActualMes=function(){var t=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(e){t.fechaDesde=e[0],t.fechaHasta=e[1],t.fechaActual=e[1]}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[],this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,activos:!0};this.motivoService.listarInvComprasMotivoTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvComprasMotivoTO=function(t){var e=this;this.listaMotivos=t,this.listaMotivos.length>0?this.motivoSeleccionado=this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.listaMotivos.find(function(t){return t.cmCodigo===e.motivoSeleccionado.cmCodigo}):null:this.motivoSeleccionado=null,this.cargando=!1},t.prototype.listarTiposComprobante=function(){this.cargando=!0,this.listaTipoComprobante=[],this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,codigoTipoTransaccion:null};this.tipoDocumentoService.listarAnxTipoComprobanteComboTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarAnxTipoComprobanteComboTO=function(t){var e=this;this.listaTipoComprobante=t,this.listaTipoComprobante.length>0?this.tipoComprobanteSeleccionado=this.tipoComprobanteSeleccionado&&this.tipoComprobanteSeleccionado.tcCodigo?this.listaTipoComprobante.find(function(t){return t.tcCodigo===e.tipoComprobanteSeleccionado.tcCodigo}):null:this.tipoComprobanteSeleccionado=null,this.cargando=!1},t.prototype.buscarProveedor=function(t){var e=this;if(this.utilService.validarKeyBuscar(t.keyCode)&&!this.esValidoProveedor())if(this.proveedor&&this.proveedor.provCodigo.length>0){var o=this.proveedor.provCodigo.toUpperCase(),a={empresa:p.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:o};t.srcElement.blur(),t.preventDefault();var i=this.modalService.open(Ie.a,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.result.then(function(t){t&&(e.proveedor=new ht.a(t),e.codigoProveedor=e.proveedor.provCodigo)},function(){e.focusProveedorCodigo()})}else this.toastr.info(p.a.MSJ_ENTERTOMODAL,p.a.TAG_AVISO)},t.prototype.focusProveedorCodigo=function(){var t=document.getElementById("provCodigo");t&&t.focus()},t.prototype.esValidoProveedor=function(){return""!=this.proveedor.provCodigo&&this.proveedor.provCodigo===this.codigoProveedor},t.prototype.validarProveedor=function(){this.proveedor.provCodigo!==this.codigoProveedor&&(this.proveedor=new ht.a,this.codigoProveedor=null)},t.prototype.ejecutarAccion=function(t){this.comprasSeleccionado=t,this.formarListadoComprasPK(),this.verImagenes()},t.prototype.verImagenes=function(){var t=this;this.formarListadoComprasPK();var e=this.comprasSeleccionado.compNumeroSistema.split("|"),o=e[0].split(" "),a=e[1].split(" "),i={empresa:this.empresaSeleccionada.empCodigo,periodo:this.periodo,motivo:o[0],numero:a[1]};this.api.post("todocompuWS/inventarioWebController/obtenerAdjuntosCompraListado",i,p.a.KEY_EMPRESA_SELECT).then(function(e){if(e&&e.estadoOperacion===p.a.KEY_EXITO){var o=e.extraInfo?e.extraInfo:[];if(o&&o.length>0){var a=[];o.forEach(function(t){a.push({source:t.imagenString,alt:t.adjTipo,title:t.adjTipo})}),t.modalService.open(Qo.a,{size:"lg",windowClass:"miSize",backdrop:"static"}).componentInstance.listaImagenes=a}else t.toastr.warning(p.a.MSJ_NO_HAY_IMAGENES,p.a.TAG_AVISO)}else t.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO)}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.formarListadoComprasPK=function(){var t=this.comprasSeleccionado.compFecha.split("-"),e=t[0],o=t[1];this.periodo=e+"-"+o},t.prototype.obtenerContablePk=function(){return{conContablePK:this.utilService.obtenerConContablePK(this.listadoComprasPK,p.a.KEY_EMPRESA_SELECT,"|")}},t.prototype.buscarCompras=function(t){this.limpiarResultado(),this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o={empresa:this.empresaSeleccionada.empCodigo,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),documento:this.tipoComprobanteSeleccionado&&this.tipoComprobanteSeleccionado.tcCodigo?this.tipoComprobanteSeleccionado.tcCodigo:null,motivo:this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.motivoSeleccionado.cmCodigo:null,proveedor:this.codigoProveedor};this.filasTiempo.iniciarContador(),this.listadoCompraService.listarInvFunComprasTO(o,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeListarInvFunComprasTO=function(t){this.listaResultadoCompras=t,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},t.prototype.imprimirCompras=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),documento:this.tipoComprobanteSeleccionado?this.tipoComprobanteSeleccionado.tcCodigo:"",motivo:this.motivoSeleccionado?this.motivoSeleccionado.cmCodigo:"",proveedorId:this.codigoProveedor?this.codigoProveedor:"",listInvFunComprasTO:this.listaResultadoCompras};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteListadoCompras",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoCompras.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarCompras=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),listInvFunComprasTO:this.listaResultadoCompras};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteListadoCompras",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoCompras_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.generarOpciones=function(){var t=this;this.opciones=[{label:p.a.LABEL_CONSULTAR_COMPRA,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.consultarCompra()}}]},t.prototype.consultarCompra=function(){if(this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){var t=this.comprasSeleccionado.compNumeroSistema.split("|"),e=t[0].split(" "),o=t[1].split(" "),a=this.comprasSeleccionado.compFecha.split("-");this.parametrosCompra={accion:p.a.ACCION_CONSULTAR,parametroBusqueda:{empresa:p.a.KEY_EMPRESA_SELECT,periodo:a[0]+"-"+a[1],motivo:e[0],numero:o[1]}}}},t.prototype.ejecutarAccionCompras=function(t){switch(t.accion){case p.a.ACCION_ACTIVAR:this.activarCompras=t.activar;break;case p.a.ACCION_CANCELAR:this.generarAtajosTeclado(),this.parametrosCompra=null}},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.listadoCompraService.generarColumnas(this),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.components={},this.frameworkComponents={botonOpciones:Fe.a,toolTip:w.a}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.comprasSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},ta([Object(a.ViewChild)("menuOpciones"),ea("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),ta([Object(a.HostListener)("window:resize",["$event"]),ea("design:type",Function),ea("design:paramtypes",[]),ea("design:returntype",void 0)],t.prototype,"onResize",null),t=ta([Object(a.Component)({selector:"app-listado-compras",template:o("yoU0"),styles:[o("IqVD")]}),ea("design:paramtypes",[i.ActivatedRoute,E.b,C.a,u.HotkeysService,f.a,L.a,z.a,Re.b,n.a,Ho.a,qo,_.a])],t)}(),aa=function(){function t(t){this.id=null,this.compNumeroSistema="",this.compFecha="",this.compObservaciones="",this.compPendiente=!1,this.compAnulado=!1,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.id=t.id?t.id:this.id,this.compNumeroSistema=t.compNumeroSistema?t.compNumeroSistema:this.compNumeroSistema,this.compFecha=t.compFecha?t.compFecha:this.compFecha,this.compObservaciones=t.compObservaciones?t.compObservaciones:this.compObservaciones,this.compPendiente=t.compPendiente?t.compPendiente:this.compPendiente,this.compAnulado=t.compAnulado?t.compAnulado:this.compAnulado},t}(),ia=o("FmtH"),na=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ra=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},sa=function(){function t(t,e,o,a){this.api=t,this.toastr=e,this.utilService=o,this.archivoService=a}return t.prototype.listarInvFunConsumosTO=function(t,e,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunConsumosTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarInvFunConsumosTO(t.extraInfo):(e.despuesDeListarInvFunConsumosTO([]),a.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.imprimirInvFunConsumosTO=function(t,e,o){var a=this;this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteListadoConsumos",t,o).then(function(t){t._body.byteLength>0?a.utilService.descargarArchivoPDF("ListadoConsumos.pdf",t):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),e.cargando=!1}).catch(function(t){return a.utilService.handleError(t,a)})},t.prototype.generarColumnas=function(){return[{headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,maxWidth:40},{headerName:p.a.TAG_ESTADO,headerClass:"text-center",width:45,minWidth:45,cellClass:"text-center",cellRendererFramework:Yo.a,valueGetter:function(t){return t.data.compAnulado?(t.value=p.a.ETIQUETA_ANULADO,t.value):t.data.compPendiente?(t.value=p.a.ETIQUETA_PENDIENTE,t.value):""}},{headerName:p.a.TAG_NUMERO,field:"compNumeroSistema",width:100,minWidth:100},{headerName:p.a.TAG_FECHA,field:"compFecha",width:50,minWidth:50},{headerName:p.a.TAG_OBSERVACIONES,field:"compObservaciones",width:300,minWidth:300},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:40,minWidth:40,cellRenderer:"botonOpciones",cellClass:"text-center",cellRendererParams:function(t){return{icono:p.a.ICON_CONSULTAR,tooltip:p.a.ACCION_CONSULTAR_CONSUMO,accion:p.a.ACCION_CONSULTAR}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},t.prototype.formatearReporteConsumos=function(t,e){for(var o=new Array,a=0;a<t.length;a++){var i=new ia.a,n=t[a].compNumeroSistema.split("|"),r=n[0].split(" "),s=n[1].split(" "),c=n[2].split(" ");if(i.consPeriodo=r[0],i.consMotivo=s[1],i.consNumero=c[1],i.consEmpresa=e,o.push(i),!0===t[a].compPendiente||!0===t[a].compAnulado)return null}return o},t=na([Object(a.Injectable)({providedIn:"root"}),ra("design:paramtypes",[_.a,E.b,f.a,L.a])],t)}(),ca=o("qFWa"),la=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},da=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},pa=function(){function t(t,e,o,i,n,r,s,c,l){this.route=t,this.toastr=e,this.filasService=o,this.atajoService=i,this.utilService=n,this.archivoService=r,this.motivoService=s,this.sistemaService=c,this.listadoConsumoService=l,this.listaResultadoConsumos=[],this.listaEmpresas=[],this.listaMotivos=[],this.motivoSeleccionado=new St.a,this.constantes=p.a,this.cargando=!1,this.activarConsumos=!1,this.filasTiempo=new P.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.es={},this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.objetoSeleccionado=new aa,this.vistaFormulario=!1,this.listaConsumoMotivo=[],this.mostrandoFormulario=new a.EventEmitter,this.enviarActivar=new a.EventEmitter}return t.prototype.ngOnInit=function(){Ee.locale("es"),this.constantes=p.a,this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.consumosListadoInv,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.obtenerFechaInicioActualMes(),this.iniciarAgGrid()},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.motivoSeleccionado=null,this.limpiarResultado(),this.listarMotivos()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarConsumos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarConsumos");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){return document.getElementById("btnImprimirConsumos").click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){return document.getElementById("btnExportarConsumos").click(),!1}))},t.prototype.limpiarResultado=function(){this.listaResultadoConsumos=[],this.filasService.actualizarFilas("0","0")},t.prototype.obtenerFechaInicioActualMes=function(){var t=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(e){t.fechaDesde=e[0],t.fechaHasta=e[1],t.fechaActual=e[1]}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[],this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,inactivos:!1};this.motivoService.listarInvConsumosMotivoTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvConsumosMotivoTO=function(t){var e=this;this.listaMotivos=t,this.listaMotivos.length>0?this.motivoSeleccionado=this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.listaMotivos.find(function(t){return t.cmCodigo===e.motivoSeleccionado.cmCodigo}):null:this.motivoSeleccionado=null,this.cargando=!1},t.prototype.buscarConsumos=function(t){this.limpiarResultado(),this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o={empresa:this.empresaSeleccionada.empCodigo,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),motivo:this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.motivoSeleccionado.cmCodigo:null};this.filasTiempo.iniciarContador(),this.listadoConsumoService.listarInvFunConsumosTO(o,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeListarInvFunConsumosTO=function(t){this.listaResultadoConsumos=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.consultarConsumoFormulario=function(){var t=new ca.a;t.consFecha=this.objetoSeleccionado.compFecha,t.consNumero=this.objetoSeleccionado.compNumeroSistema,t.consObservaciones=this.objetoSeleccionado.compObservaciones,t.consStatus=null,this.parametrosFormularioConsumo={accion:p.a.ACCION_CONSULTAR,seleccionado:t},this.vistaFormulario=!0,this.mostrandoFormulario.emit(!0)},t.prototype.ejecutarAccionConsumos=function(t){switch(t.accion){case p.a.ACCION_CANCELAR:this.cancelar()}},t.prototype.cancelar=function(){this.generarAtajosTeclado(),this.vistaFormulario=!1,this.parametrosFormularioConsumo=null,this.mostrandoFormulario.emit(!1)},t.prototype.imprimirConsumos=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listInvFunConsumosTO:this.listaResultadoConsumos};this.listadoConsumoService.imprimirInvFunConsumosTO(t,this,this.empresaSeleccionada)}},t.prototype.imprimirConsumoIndividual=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e=this.utilService.getAGSelectedData(this.gridApi);if(e&&0===e.length)this.toastr.warning(p.a.MSJ_NO_ITEM_SELECCIONADO,p.a.TOAST_INFORMACION),this.cargando=!1;else{var o=this.listadoConsumoService.formatearReporteConsumos(e,p.a.KEY_EMPRESA_SELECT);if(o){var a={invConsumosTOs:o,ordenado:!0};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteConsumoDetalle",a,this.empresaSeleccionada).then(function(e){e&&e._body&&e._body.byteLength>0?t.utilService.descargarArchivoPDF("consumos"+t.utilService.obtenerHorayFechaActual()+".pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.cargando=!1,this.toastr.warning(p.a.MSJ_HAY_CONSUMOS_PENDIENTES_SELECCIONADOS,p.a.TAG_AVISO)}}},t.prototype.exportarConsumos=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),listInvFunConsumosTO:this.listaResultadoConsumos};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteListadoConsumos",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoConsumos_"):t.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.generarOpciones=function(){var t=this;this.opciones=[{label:p.a.ACCION_CONSULTAR_CONSUMO,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.consultarConsumoFormulario()}}]},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.listadoConsumoService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="multiple",this.context={componentParent:this},this.components={},this.frameworkComponents={inputEstado:x.a,botonOpciones:Fe.a,toolTip:w.a}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.ejecutarAccion=function(t){this.objetoSeleccionado=t,this.consultarConsumoFormulario()},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},la([Object(a.Output)(),da("design:type",a.EventEmitter)],t.prototype,"mostrandoFormulario",void 0),la([Object(a.Output)(),da("design:type",a.EventEmitter)],t.prototype,"enviarActivar",void 0),la([Object(a.ViewChild)("menuOpciones"),da("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),la([Object(a.HostListener)("window:resize",["$event"]),da("design:type",Function),da("design:paramtypes",[]),da("design:returntype",void 0)],t.prototype,"onResize",null),t=la([Object(a.Component)({selector:"app-listado-consumos",template:o("tgn8"),styles:[o("Y1js")]}),da("design:paramtypes",[i.ActivatedRoute,E.b,C.a,u.HotkeysService,f.a,L.a,Ot.a,n.a,sa])],t)}(),ma=o("JmMb"),ua=o("uuNs"),ha=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},va=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ca=function(){function t(t,e,o,a,i,n,r,s,c,l,d,m,u){this.tipoDocumentoService=t,this.filasService=e,this.sistemaService=o,this.utilService=a,this.route=i,this.toastr=n,this.sectorService=r,this.modalService=s,this.atajoService=c,this.motivoService=l,this.archivoService=d,this.ventasListadoService=m,this.cdRef=u,this.listaResultadoVentas=[],this.listaEmpresas=[],this.listaSectores=[],this.listaMotivos=[],this.listaTipoComprobante=[],this.motivoSeleccionado=new Y,this.sectorSeleccionado=new I.a,this.tipoComprobanteSeleccionado=new Ko.a,this.cliente=new ke.a,this.codigoCliente=null,this.constantes=p.a,this.cargando=!1,this.activarVentas=!1,this.filasTiempo=new P.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.es={},this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.parametrosFormulario={},this.vistaFormulario=!1,this.tipoDocumento=null,this.objetoContableEnviar=null,this.tamanioEstructura=0,this.mostrarContabilidaAcciones=!1}return t.prototype.ngOnInit=function(){Ee.locale("es"),this.constantes=p.a,this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.ventasListado,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.obtenerFechaInicioActualMes(),this.generarAtajosTeclado(),this.iniciarAgGrid(),this.focusClienteCodigo()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarListadoVentas");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarListadoVentas");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirListadoVentas");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarListadoVentas");return t&&t.click(),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.motivoSeleccionado=null,this.tipoComprobanteSeleccionado=null,this.listarMotivos(),this.listarSectores(),this.listarTiposComprobante(),this.cliente=new ke.a,this.codigoCliente=null,this.limpiarResultado()},t.prototype.obtenerFechaInicioActualMes=function(){var t=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(e){t.fechaDesde=e[0],t.fechaHasta=e[1],t.fechaActual=e[1]}).catch(function(e){return t.utilService.handleError(e,t)})},t.prototype.listarTiposComprobante=function(){this.cargando=!0,this.listaTipoComprobante=[],this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,codigoTipoTransaccion:null};this.tipoDocumentoService.listarAnxTipoComprobanteComboTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarAnxTipoComprobanteComboTO=function(t){var e=this;this.listaTipoComprobante=t,this.listaTipoComprobante.length>0?this.tipoComprobanteSeleccionado=this.tipoComprobanteSeleccionado&&this.tipoComprobanteSeleccionado.tcCodigo?this.listaTipoComprobante.find(function(t){return t.tcCodigo===e.tipoComprobanteSeleccionado.tcCodigo}):null:this.tipoComprobanteSeleccionado=null,this.cargando=!1},t.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[],this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,activos:!0};this.motivoService.listarVentaMotivoComboTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarVentaMotivoComboTO=function(t){var e=this;this.listaMotivos=t,this.listaMotivos.length>0?this.motivoSeleccionado=this.motivoSeleccionado&&this.motivoSeleccionado.vmCodigo?this.listaMotivos.find(function(t){return t.vmCodigo===e.motivoSeleccionado.vmCodigo}):null:this.motivoSeleccionado=null,this.cargando=!1},t.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.buscarCliente=function(t){var e=this;if(this.utilService.validarKeyBuscar(t.keyCode)&&!this.esValidoCliente()){var o={empresa:p.a.KEY_EMPRESA_SELECT,busqueda:this.cliente.cliCodigo,mostrarInactivo:!1};t.srcElement.blur(),t.preventDefault();var a=this.modalService.open(Be.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.parametros=o,a.componentInstance.isModal=!0,a.result.then(function(t){t&&(e.cliente=t,e.codigoCliente=e.cliente.cliCodigo)},function(){e.focusClienteCodigo()})}},t.prototype.focusClienteCodigo=function(){var t=document.getElementById("clienteCodigo");t&&t.focus()},t.prototype.esValidoCliente=function(){return""!=this.cliente.cliCodigo&&this.cliente.cliCodigo===this.codigoCliente},t.prototype.validarCliente=function(){this.cliente.cliCodigo!==this.codigoCliente&&(this.cliente=new ke.a,this.codigoCliente=null)},t.prototype.limpiarResultado=function(){this.listaResultadoVentas=[],this.filasService.actualizarFilas("0","0")},t.prototype.buscarListadoVentas=function(t){this.limpiarResultado(),this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o={empresa:this.empresaSeleccionada.empCodigo,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),documento:this.tipoComprobanteSeleccionado&&this.tipoComprobanteSeleccionado.tcCodigo?this.tipoComprobanteSeleccionado.tcCodigo:null,motivo:this.motivoSeleccionado&&this.motivoSeleccionado.vmCodigo?this.motivoSeleccionado.vmCodigo:null,sector:this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectorSeleccionado.secCodigo:null,cliente:this.codigoCliente};this.filasTiempo.iniciarContador(),this.ventasListadoService.listarInvFunVentasTO(o,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeListarInvFunVentasTO=function(t){this.listaResultadoVentas=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.imprimirListadoVentas=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),motivo:this.motivoSeleccionado?this.motivoSeleccionado.vmDetalle:"",cliente:this.codigoCliente?this.codigoCliente:"",documento:this.tipoComprobanteSeleccionado?this.tipoComprobanteSeleccionado.tcCodigo:"",listInvFunVentasTO:this.listaResultadoVentas};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteListadoVentas",e,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("ListadoVentas.pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.exportarListadoVentas=function(){var t=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),motivo:this.motivoSeleccionado?this.motivoSeleccionado.vmDetalle:"",cliente:this.codigoCliente?this.codigoCliente:"",documento:this.tipoComprobanteSeleccionado?this.tipoComprobanteSeleccionado.tcDescripcion:"",listInvFunVentasTO:this.listaResultadoVentas};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteListadoVentas",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"ListadoVentas_"):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.consultarVenta=function(){this.ventaSeleccionada.vtaIdNumero&&(this.tipoDocumento=this.ventaSeleccionada.vtaDocumentoTipo,this.parametrosFormulario={accion:p.a.ACCION_CONSULTAR,seleccionado:{cliCodigo:this.ventaSeleccionada.vtaIdNumero,cliNombre:this.ventaSeleccionada.vtaCliente,conNumero:this.ventaSeleccionada.vtaDocumentoNumero,id:null,vtaBase:this.ventaSeleccionada.vtaBase0,vtaBaseImponible:this.ventaSeleccionada.vtaBaseImponible,vtaFecha:this.ventaSeleccionada.vtaFecha,vtaFormaPago:this.ventaSeleccionada.vtaFormaPago,vtaMontoIva:this.ventaSeleccionada.vtaMontoIva,vtaNumero:this.ventaSeleccionada.vtaNumeroSistema,vtaObservaciones:this.ventaSeleccionada.vtaObservaciones,vtaStatus:this.ventaSeleccionada.vtaPendiente?p.a.ETIQUETA_PENDIENTE:this.ventaSeleccionada.vtaAnulado?p.a.ETIQUETA_ANULADO:null,vtaTotal:this.ventaSeleccionada.vtaTotal}},this.vistaFormulario=!0,this.activarVentas=!0)},t.prototype.cancelar=function(){this.vistaFormulario=!1,this.activarVentas=!1},t.prototype.ejecutarAccion=function(t){switch(t.accion){case p.a.ACCION_ACTIVAR:this.activarVentas=t.estado;break;case p.a.ACCION_CANCELAR:this.cancelar()}},t.prototype.consultarContable=function(){if(this.ventaSeleccionada.vtaIdNumero){var t=this.ventaSeleccionada.vtaNumeroSistema.split("|"),e=t[0],o=t[2];this.cargando=!0,this.objetoContableEnviar={accion:p.a.ACCION_CONSULTAR,contable:e+"|C-VEN |"+o,listadoSectores:[],tamanioEstructura:this.tamanioEstructura,empresaSeleccionada:this.empresaSeleccionada,activar:!0,tipoContable:null,listaPeriodos:[],volverACargar:!1}}},t.prototype.cambiarEstadoCargando=function(t){this.cargando=t},t.prototype.cambiarEstadoActivar=function(t){this.activarVentas=t,this.cdRef.detectChanges()},t.prototype.cerrarContabilidadAcciones=function(t){this.activarVentas=!!t.objetoEnviar&&t.objetoEnviar.activar,this.objetoContableEnviar=t.objetoEnviar,this.mostrarContabilidaAcciones=t.mostrarContilidadAcciones,this.actualizarFilas(),this.cdRef.detectChanges(),this.generarAtajosTeclado()},t.prototype.generarOpciones=function(){var t=this,e=this.ventaSeleccionada.vtaIdNumero;this.opciones=[{label:p.a.LABEL_CONSULTAR_VENTA,icon:p.a.ICON_CONSULTAR,disabled:!e,command:function(){return e?t.consultarVenta():null}},{label:p.a.ACCION_CONSULTAR_CONTABLE,icon:p.a.ICON_CONSULTAR,disabled:!e,command:function(){return e?t.consultarContable():null}}]},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.ventasListadoService.generarColumnasListadoVentas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.ventaSeleccionada=e?e.data:null},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.ventaSeleccionada=t,this.ventaSeleccionada.vtaIdNumero&&(this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation())},t.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},ha([Object(a.ViewChild)("menuOpciones"),va("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),ha([Object(a.HostListener)("window:resize",["$event"]),va("design:type",Function),va("design:paramtypes",[]),va("design:returntype",void 0)],t.prototype,"onResize",null),t=ha([Object(a.Component)({selector:"app-listado-ventas",template:o("Znq1"),styles:[o("o49v")]}),va("design:paramtypes",[Ho.a,C.a,n.a,f.a,i.ActivatedRoute,E.b,T.a,Re.b,u.HotkeysService,X.a,L.a,ua.a,a.ChangeDetectorRef])],t)}(),fa=o("VxUY"),Aa=o("auvS"),ga=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ba=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Sa=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Oa=function(){function t(t,e,o,a){this.clienteService=t,this.auth=e,this.ventaService=o,this.route=a,this.ruta="",this.tipoDocumento="",this.cargando=!1,this.activar=!1,this.vistaFormulario=!1,this.permisoVenta=!1,this.caja=new fa.a,this.parametrosFormulario={},this.parametrosLista={}}return t.prototype.ngOnInit=function(){this.ruta=this.route.snapshot.data.ruta,this.tipoDocumento=this.route.snapshot.data.tipoDocumento},t.prototype.nuevaVenta=function(t){this.permisoVenta?(this.vistaFormulario=!0,this.empresaSeleccionada=t.empresa,this.parametrosFormulario.accion=p.a.ACCION_CREAR,this.activar=!0):(this.cancelar(),this.ventaService.mostrarSwalNoPermiso())},t.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1},t.prototype.actualizarTabla=function(t){this.vistaFormulario=!1,this.empresaSeleccionada=t.empresa;var e=ga({},this.parametrosLista);e.vtaResultante=t.vtaResultante,e.listar=!1,this.parametrosLista=e,this.activar=!1},t.prototype.listarVentas=function(t){this.empresaSeleccionada=t.empresaSeleccionada,this.parametrosLista=t,this.parametrosLista.listar=!0,this.vistaFormulario=!1,"ventaNotaCredito"===this.ruta?this.parametrosLista.titulo=p.a.INVENTARIO_NOTA_CREDITO_LISTADO:this.parametrosLista.titulo=p.a.INVENTARIO_VENTA_LISTADO},t.prototype.ejecutarAccion=function(t){switch(t.accion){case p.a.ACCION_CREAR:this.nuevaVenta(t);break;case p.a.ACCION_LISTAR:this.listarVentas(t);break;case p.a.ACCION_CAMBIAR_EMPRESA:this.cambiarEmpresaSeleccionada(t);break;case p.a.ACCION_ACTIVAR:this.activar=t.estado;break;case p.a.ACCION_CANCELAR:this.cancelar();break;case p.a.ACCION_CREADO:this.actualizarTabla(t);break;case p.a.ACCION_CONSULTAR:case p.a.ACCION_ANULAR:case p.a.ACCION_MAYORIZAR:case p.a.ACCION_RESTAURAR:this.irAlHijo(t)}},t.prototype.cambiarEmpresaSeleccionada=function(t){this.empresaSeleccionada=t.empresa,p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.permisoVenta=!1,this.obtenerPermisosDeCaja(),this.parametrosLista={},this.parametrosLista.listar=!1,this.parametrosFormulario.accion=p.a.ACCION_CREAR,this.vistaFormulario=!1},t.prototype.irAlHijo=function(t){this.parametrosFormulario.accion=t.accion,this.parametrosFormulario.seleccionado=t.objetoSeleccionado,this.vistaFormulario=!0,this.activar=!0},t.prototype.obtenerPermisosDeCaja=function(){var t={empresa:p.a.KEY_EMPRESA_SELECT,usuarioCodigo:this.auth.getCodigoUser()};this.cargando=!0,this.clienteService.obtenerPermisosDeCaja(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerPermisosDeCaja=function(t){switch(this.caja=t,this.tipoDocumento){case"18":this.caja.permisoSecuencialFacturas&&(this.permisoVenta=!0);break;case"04":this.caja.permisoSecuencialNotasCredito&&(this.permisoVenta=!0);break;case"05":this.caja.permisoSecuencialNotasDebito&&(this.permisoVenta=!0);break;case"00":this.permisoVenta=!0}this.cargando=!1},t=ba([Object(a.Component)({selector:"app-venta",template:o("HwmX")}),Sa("design:paramtypes",[v.a,J.a,Aa.a,i.ActivatedRoute])],t)}(),Ra=o("aoE9"),Ia=function(){function t(t){this.tmCodigo=null,this.tmDetalle=null,this.usrEmpresa=null,this.usrCodigo=null,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.tmCodigo=t.tmCodigo?t.tmCodigo:this.tmCodigo,this.tmDetalle=t.tmDetalle?t.tmDetalle:this.tmDetalle,this.usrEmpresa=t.usrEmpresa?t.usrEmpresa:this.usrEmpresa,this.usrCodigo=t.usrCodigo?t.usrCodigo:this.usrCodigo},t}(),Ta=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Ea=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_a=function(){function t(t,e,o,a,i,n,r,s,c){this.route=t,this.toastr=e,this.atajoService=o,this.filasService=a,this.transferenciaService=i,this.utilService=n,this.periodoService=r,this.motivoTransferenciaService=s,this.cdRef=c,this.listaEmpresas=[],this.empresaSeleccionada=new d.a,this.screamXS=!0,this.es={},this.constantes=p.a,this.cargando=!1,this.activar=!1,this.listadoPeriodos=new Array,this.periodoSeleccionado=new Ft.a,this.listadoMotivos=new Array,this.motivoSeleccionado=new Ia,this.listaResultado=[],this.filtro="",this.rowClassRules={},this.vistaFormulario=!1,this.objetoTransferenciaEnviar=null,this.mostrarTransferenciaAcciones=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new P.a}return t.prototype.ngOnInit=function(){this.constantes=p.a,Ee.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.transferenciasTrans,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.iniciarAgGrid(),this.generarAtajosTeclado()},t.prototype.generarAtajosTeclado=function(){var t=this;this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarTransferencia");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarTransferencias");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirTransferencia");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarTransferencia");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(e){return t.nuevaTransferencia(),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado(),this.motivoSeleccionado=null,this.periodoSeleccionado=null,this.objetoTransferenciaEnviar=null,this.listarPeriodos(),this.listarInvTransferenciaMotivoComboTO(!1)},t.prototype.listarPeriodos=function(){var t={empresa:p.a.KEY_EMPRESA_SELECT};this.cargando=!0,this.periodoService.listarPeriodos(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarPeriodos=function(t){var e=this;this.listadoPeriodos=t||[],this.cargando=!1,this.listadoPeriodos.length>0?this.periodoSeleccionado=this.periodoSeleccionado?this.listadoPeriodos.find(function(t){return t.sisPeriodoPK.perCodigo===e.periodoSeleccionado.sisPeriodoPK.perCodigo}):this.listadoPeriodos[0]:this.periodoSeleccionado=null},t.prototype.listarInvTransferenciaMotivoComboTO=function(t){var e={empresa:p.a.KEY_EMPRESA_SELECT,inactivos:t};this.cargando=!0,this.motivoTransferenciaService.listarInvTransferenciaMotivoTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvTransferenciaMotivoTO=function(t){var e=this;this.listadoMotivos=t||[],this.cargando=!1,this.listadoMotivos.length>0?this.motivoSeleccionado=this.motivoSeleccionado?this.listadoMotivos.find(function(t){return t.tmCodigo===e.motivoSeleccionado.tmCodigo}):this.listadoMotivos[0]:this.motivoSeleccionado=null},t.prototype.listarTransferencia=function(t){if(this.filtro=this.filtro?this.filtro.trim():"",this.motivoSeleccionado||this.periodoSeleccionado||this.filtro){this.limpiarResultado();var e={empresa:this.empresaSeleccionada.empCodigo,periodo:this.periodoSeleccionado?this.periodoSeleccionado.sisPeriodoPK.perCodigo:"",motivo:this.motivoSeleccionado?this.motivoSeleccionado.tmCodigo:"",busqueda:this.filtro,nRegistros:t};this.cargando=!0,this.filasTiempo.iniciarContador(),this.transferenciaService.listarTransferencias(e,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.warning(p.a.MSJ_INGRESE_AL_MENOS_PERIODO_MOTIVO_BUSQUEDA,p.a.TAG_AVISO)},t.prototype.despuesDeListarTransferencia=function(t){this.filasTiempo.finalizarContador(),this.listaResultado=t,this.cargando=!1},t.prototype.limpiarResultado=function(){this.gridApi=null,this.gridColumnApi=null,this.filtroGlobal="",this.listaResultado=[],this.filasService.actualizarFilas("0","0"),this.filasTiempo.resetearContador(),this.actualizarFilas(),this.filtro=""},t.prototype.nuevaTransferencia=function(){this.vistaFormulario=!0,this.objetoTransferenciaEnviar={accion:p.a.ACCION_NUEVO,listadoMotivos:this.listadoMotivos,motivoSeleccionado:this.motivoSeleccionado,periodoSeleccionado:this.periodoSeleccionado.sisPeriodoPK.perCodigo,empresaSeleccionada:this.empresaSeleccionada,activar:!1,volverACargar:!1},this.cdRef.detectChanges()},t.prototype.desmayorizarTransferenciaPorLote=function(){if(this.utilService.verificarPermiso(p.a.ACCION_DESMAYORIZAR,this,!0)&&this.empresaSeleccionada.listaSisPermisoTO.gruDesmayorizarTransferencias){this.cargando=!0;var t=this.utilService.getAGSelectedData(this.gridApi);if(t&&0===t.length)this.toastr.warning(p.a.MSJ_NO_ITEM_SELECCIONADO,p.a.TOAST_INFORMACION),this.cargando=!1;else if(t&&1===t.length)this.desmayorizar();else{var e={empresa:this.empresaSeleccionada.empCodigo,listadoTransferenciaPK:t};this.transferenciaService.desmayorizarTransferenciaPorLote(e,this,p.a.KEY_EMPRESA_SELECT)}}},t.prototype.despuesDeDesmayorizarPorLote=function(t){this.cargando=!1,this.utilService.generarSwal(p.a.ACCION_DESMAYORIZAR+" "+p.a.TAG_TRANSFERENCIA,p.a.SWAL_SUCCESS,t.extraInfo),this.listarTransferencia(20)},t.prototype.imprimirTransferencia=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={empresa:this.empresaSeleccionada.empCodigo,usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",numero:[this.objetoSeleccionado.transNumero]};this.transferenciaService.imprimirTransferencia(t,this,this.empresaSeleccionada)}},t.prototype.imprimirReporteTransferenciaPorLote=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t=this.utilService.getAGSelectedData(this.gridApi);if(t&&0===t.length)this.toastr.warning(p.a.MSJ_NO_ITEM_SELECCIONADO,p.a.TOAST_INFORMACION),this.cargando=!1;else{var e=this.transferenciaService.getTransferenciasPKDeListaConContableTO(t),o={empresa:this.empresaSeleccionada.empCodigo,usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",numero:e};this.transferenciaService.imprimirTransferenciaPorLote(o,this,this.empresaSeleccionada)}}},t.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1},t.prototype.generarOpciones=function(){var t=this,e=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruMayorizarTransferencias&&this.objetoSeleccionado.transStatus===p.a.ETIQUETA_PENDIENTE,o=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruDesmayorizarTransferencias&&this.objetoSeleccionado.transStatus!==p.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.transStatus!==p.a.ETIQUETA_ANULADO,a=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruAnularTransferencias&&this.objetoSeleccionado.transStatus!==p.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.transStatus!==p.a.ETIQUETA_ANULADO,i=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruAnularTransferencias&&(this.objetoSeleccionado.transStatus===p.a.ETIQUETA_ANULADO||this.objetoSeleccionado.transStatus===p.a.ETIQUETA_REVERSADO),n=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruImprimir&&this.objetoSeleccionado.transStatus!==p.a.ETIQUETA_PENDIENTE;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionTransferenciaListado(p.a.ACCION_CONSULTAR,!0)}},{label:p.a.ACCION_MAYORIZAR,icon:p.a.ICON_MAYORIZAR,disabled:!e,command:function(){return e?t.operacionTransferenciaListado(p.a.ACCION_MAYORIZAR,e):null}},{label:p.a.ACCION_DESMAYORIZAR,icon:p.a.ICON_DESMAYORIZAR,disabled:!o,command:function(){return o?t.desmayorizar():null}},{label:p.a.ACCION_ANULAR,icon:p.a.ICON_ANULAR,disabled:!a,command:function(){return a?t.operacionTransferenciaListado(p.a.ACCION_ANULAR,a):null}},{label:p.a.ACCION_RESTAURAR,icon:p.a.ICON_RESTAURAR,disabled:!i,command:function(){return i?t.operacionTransferenciaListado(p.a.ACCION_RESTAURAR,i):null}},{label:p.a.ACCION_IMPRIMIR,icon:p.a.ICON_IMPRIMIR,disabled:!n,command:function(){return n?t.imprimirTransferencia():null}}]},t.prototype.operacionTransferenciaListado=function(t,e){e&&(this.vistaFormulario=!0,this.objetoTransferenciaEnviar={accion:t,transferencia:this.objetoSeleccionado.transNumero,empresaSeleccionada:this.empresaSeleccionada,listadoMotivos:this.listadoMotivos,activar:!0,volverACargar:!1,periodoSeleccionado:this.periodoSeleccionado},this.cdRef.detectChanges())},t.prototype.desmayorizar=function(){var t=this.objetoSeleccionado.transNumero.split("|"),e=t[0],o=t[1],a=t[2],i={empresa:p.a.KEY_EMPRESA_SELECT,periodo:e,motivo:o,numero:a};this.cargando=!0,this.transferenciaService.desmayorizarTransferencias(i,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeDesmayorizarTransferencia=function(t){var e=this;this.objetoSeleccionado.transStatus="PENDIENTE";var o={title:p.a.TOAST_CORRECTO,texto:t.extraInfo+"<br>"+p.a.MSJ_PREGUNTA_MAYORIZAR,type:p.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+p.a.ICON_MAYORIZAR+"'></i>  "+p.a.ACCION_MAYORIZAR,cancelButtonText:p.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(t){if(t){e.cargando=!1;var o=e.objetoSeleccionado&&e.objetoSeleccionado.transStatus===p.a.ETIQUETA_PENDIENTE;e.actualizarTabla(e.objetoSeleccionado),e.operacionTransferenciaListado(p.a.ACCION_MAYORIZAR,o)}else e.actualizarTabla(e.objetoSeleccionado),e.cargando=!1})},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.transferenciaService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a},this.components={},this.rowClassRules={"fila-pendiente":function(t){return"PENDIENTE"===t.data.transStatus}}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.objetoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.getDataSelected=function(){return this.utilService.getAGSelectedData(this.gridApi)},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.cambiarEstadoActivar=function(t){this.activar=t,this.cdRef.detectChanges()},t.prototype.ejecutarAccion=function(t){switch(t.accion){case p.a.ACCION_CANCELAR:this.cancelar();break;case p.a.ACCION_CREADO:case p.a.ACCION_MODIFICADO:case p.a.ACCION_DESMAYORIZAR:this.actualizarTabla(t)}},t.prototype.actualizarTabla=function(t){var e=t.consResultante||t,o=this.listaResultado.findIndex(function(t){return t.transNumero==e.transNumero});o>=0?(e.id=o,this.listaResultado[o]=e,this.gridApi&&this.gridApi.getRowNode(""+o).setData(e)):(e.id=this.listaResultado.length+1,this.listaResultado.unshift(e),this.gridApi&&this.gridApi.updateRowData({add:[e]}));this.vistaFormulario=!1},Ta([Object(a.ViewChild)("menuOpciones"),Ea("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),t=Ta([Object(a.Component)({selector:"app-transferencias",template:o("SmVl"),styles:[o("3P36")]}),Ea("design:paramtypes",[i.ActivatedRoute,E.b,u.HotkeysService,C.a,Ra.a,f.a,Gt.a,Qt.a,a.ChangeDetectorRef])],t)}(),ya=o("eeDj"),Ma=o("BV+X"),Na=o("PSD3"),Pa=o.n(Na),La=o("bioR"),Fa=o("Pdok"),Da=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},wa=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},xa=function(){function t(t,e,o,a,i,n,r,s,c,l,m){this.archivoService=t,this.route=e,this.utilService=o,this.periodoService=a,this.motivoService=i,this.atajoService=n,this.comprasService=r,this.filasService=s,this.toastr=c,this.clienteService=l,this.auth=m,this.listaEmpresas=new Array,this.listadoPeriodos=[],this.listadoCompras=[],this.periodoSeleccionado=new Ft.a,this.constantes=p.a,this.busqueda=null,this.cargando=!1,this.activar=!1,this.empresaSeleccionada=new d.a,this.listaMotivos=[],this.motivoSeleccionado=new V.a,this.parametrosFormulario=null,this.vistaFormulario=!1,this.caja=new fa.a,this.mostrarClaveAcceso=!1,this.mostrarAccionesContabilidad=!1,this.parametrosContabilidad={},this.parametrosRetencion=null,this.mostrarRetencionCompras=!1,this.esImportarOC=!1,this.filasTiempo=new P.a,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.ordenCompra={},this.listInvComprasDetalleTO=[],this.proveedor=null,this.fechaEmision=null,this.fechaAutorizacion=null,this.fechaCaduca=null,this.invCompraTO=new Fa.a,this.minimoCompra=0,this.maximoCompra=0}return t.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.comprasTrans,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.definirAtajosDeTeclado(),this.iniciarAgGrid()},t.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarCompras");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarCompras");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevaCompra");return t&&t.click(),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.motivoSeleccionado=null,this.periodoSeleccionado=null,this.caja=null,this.obtenerPermisosDeCaja(),this.listarMotivos(),this.listarPeriodos(),this.limpiarResultado()},t.prototype.obtenerPermisosDeCaja=function(){var t={empresa:p.a.KEY_EMPRESA_SELECT,usuarioCodigo:this.auth.getCodigoUser()};this.cargando=!0,this.clienteService.obtenerPermisosDeCaja(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerPermisosDeCaja=function(t){this.caja=t,this.cargando=!1},t.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[];var t={empresa:this.empresaSeleccionada.empCodigo,activos:!0};this.motivoService.listarInvComprasMotivoTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvComprasMotivoTO=function(t){var e=this;this.listaMotivos=t,this.listaMotivos.length>0?this.motivoSeleccionado=this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.listaMotivos.find(function(t){return t.cmCodigo===e.motivoSeleccionado.cmCodigo}):this.listaMotivos[0]:this.motivoSeleccionado=null,this.cargando=!1},t.prototype.listarPeriodos=function(){this.cargando=!0,this.periodoService.listarPeriodos({empresa:p.a.KEY_EMPRESA_SELECT},this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarPeriodos=function(t){var e=this;this.listadoPeriodos=t,this.listadoPeriodos.length>0?this.periodoSeleccionado=this.periodoSeleccionado&&this.periodoSeleccionado.sisPeriodoPK&&this.periodoSeleccionado.sisPeriodoPK.perCodigo?this.listadoPeriodos.find(function(t){return t.sisPeriodoPK.perCodigo===e.periodoSeleccionado.sisPeriodoPK.perCodigo}):this.listadoPeriodos[0]:this.periodoSeleccionado=null,this.cargando=!1},t.prototype.verificarPermiso=function(t,e){return this.comprasService.verificarPermiso(t,this,e)},t.prototype.limpiarResultado=function(){this.parametrosFormulario=null,this.vistaFormulario=!1,this.mostrarClaveAcceso=!1,this.esImportarOC=!1,this.listadoCompras=[],this.filasService.actualizarFilas(0,0)},t.prototype.generarOpciones=function(){var t=this,e=this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this),o=this.comprasService.verificarPermiso(p.a.ACCION_MAYORIZAR,this)&&this.compraSeleccionada.compStatus===p.a.ETIQUETA_PENDIENTE&&this.caja,a=this.comprasService.verificarPermiso(p.a.ACCION_DESMAYORIZAR,this)&&" "===this.compraSeleccionada.compStatus,i=this.comprasService.verificarPermiso(p.a.ACCION_ANULAR,this)&&this.compraSeleccionada.compStatus!==p.a.ETIQUETA_PENDIENTE&&this.compraSeleccionada.compStatus!==p.a.ETIQUETA_ANULADO,n=this.comprasService.verificarPermiso(p.a.ACCION_RESTAURAR,this)&&this.compraSeleccionada.compStatus===p.a.ETIQUETA_ANULADO,r=this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this)&&this.compraSeleccionada.conContable,s=this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this)&&this.compraSeleccionada.compDocumentoNumero,c=this.comprasService.verificarPermiso(p.a.ACCION_IMPRIMIR,this)&&this.compraSeleccionada.compStatus!==p.a.ETIQUETA_PENDIENTE&&this.compraSeleccionada.compStatus!==p.a.ETIQUETA_ANULADO;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!e,command:function(){return e?t.operaciones(p.a.ACCION_CONSULTAR):null}},{label:p.a.ACCION_CONSULTAR_RETENCION,icon:p.a.ICON_CONSULTAR,disabled:!s,command:function(){return s?t.operaciones(p.a.ACCION_CONSULTAR_RETENCION):null}},{label:p.a.ACCION_CONSULTAR_CONTABLE,icon:p.a.ICON_CONSULTAR,disabled:!r,command:function(){return r?t.operaciones(p.a.ACCION_CONSULTAR_CONTABLE):null}},{label:p.a.ACCION_MAYORIZAR,icon:p.a.ICON_MAYORIZAR,disabled:!o,command:function(){return o?t.operaciones(p.a.ACCION_MAYORIZAR):null}},{label:p.a.ACCION_DESMAYORIZAR,icon:p.a.ICON_DESMAYORIZAR,disabled:!a,command:function(){return a?t.operaciones(p.a.ACCION_DESMAYORIZAR):null}},{label:p.a.ACCION_ANULAR,icon:p.a.ICON_ANULAR,disabled:!i,command:function(){return i?t.operaciones(p.a.ACCION_ANULAR):null}},{label:p.a.ACCION_RESTAURAR,icon:p.a.ICON_RESTAURAR,disabled:!n,command:function(){return n?t.operaciones(p.a.ACCION_RESTAURAR):null}},{label:p.a.ACCION_IMPRIMIR,icon:p.a.ICON_IMPRIMIR,disabled:!c,command:function(){return c?t.imprimirIndividual():null}}]},t.prototype.buscarCompras=function(t){this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,periodo:this.periodoSeleccionado?this.periodoSeleccionado.sisPeriodoPK.perCodigo:"",motivo:this.motivoSeleccionado?this.motivoSeleccionado.cmCodigo:"",busqueda:this.busqueda,nRegistros:t};this.cargando=!0,this.filtroGlobal="",this.filasTiempo.iniciarContador(),this.comprasService.listarInvConsultaCompra(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvConsultaCompra=function(t){this.filasTiempo.finalizarContador(),this.listadoCompras=t,this.cargando=!1},t.prototype.nuevaCompra=function(){this.comprasService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&this.caja?this.parametrosFormulario={accion:p.a.ACCION_CREAR,activar:this.activar,ordenCompra:this.ordenCompra,invCompraTO:this.invCompraTO,anxCompraTO:this.anxCompraTO,proveedor:this.proveedor,fechaEmision:this.fechaEmision,fechaAutorizacion:this.fechaAutorizacion,fechaCaduca:this.fechaCaduca,listInvComprasDetalleTO:this.listInvComprasDetalleTO,parametroBusqueda:{},minimoCompra:this.minimoCompra,maximoCompra:this.maximoCompra,motivoSeleccionado:this.motivoSeleccionado&&this.motivoSeleccionado.cmCodigo?this.motivoSeleccionado:null}:this.comprasService.mostrarSwalNoPermiso()},t.prototype.obtenerCompra=function(t){this.mostrarClaveAcceso=!1,this.parametrosFormulario={accion:t,activar:this.activar,parametroBusqueda:{empresa:this.empresaSeleccionada.empCodigo,periodo:this.compraSeleccionada.compNumero.split("|")[0],motivo:this.compraSeleccionada.compNumero.split("|")[1],numero:this.compraSeleccionada.compNumero.split("|")[2]}}},t.prototype.desmayorizarCompra=function(){if(this.compraSeleccionada.compNumero){var t=new Ma.a({compEmpresa:this.empresaSeleccionada.empCodigo,compPeriodo:this.compraSeleccionada.compNumero.split("|")[0],compMotivo:this.compraSeleccionada.compNumero.split("|")[1],compNumero:this.compraSeleccionada.compNumero.split("|")[2]});this.cargando=!0,this.comprasService.desmayorizarCompra({invComprasPK:t},this,p.a.KEY_EMPRESA_SELECT)}},t.prototype.despuesDeDesmayorizarCompra=function(t){var e=this;this.cargando=!1,this.compraSeleccionada.compStatus=p.a.ETIQUETA_PENDIENTE;var o=this.listadoCompras.findIndex(function(t){return t.id==e.compraSeleccionada.id});this.refrescarTabla(o,this.compraSeleccionada),this.toastr.success(t.operacionMensaje,p.a.TOAST_CORRECTO),this.comprasService.verificarPermiso(p.a.ACCION_MAYORIZAR,this,!0)&&this.caja&&Pa()(this.utilService.generarSwalConfirmationOption(p.a.MSJ_TITULO_MAYORIZAR,p.a.MSJ_PREGUNTA_MAYORIZAR,p.a.SWAL_QUESTION)).then(function(t){t.value&&e.obtenerCompra(p.a.ACCION_MAYORIZAR)})},t.prototype.importarOC=function(){this.comprasService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&this.caja?(this.mostrarClaveAcceso=!0,this.esImportarOC=!0):this.comprasService.mostrarSwalNoPermiso()},t.prototype.operaciones=function(t){switch(t){case p.a.ACCION_CREAR:this.comprasService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&this.caja?this.mostrarClaveAcceso=!0:this.comprasService.mostrarSwalNoPermiso();break;case p.a.ACCION_CONSULTAR:this.obtenerCompra(p.a.ACCION_CONSULTAR);break;case p.a.ACCION_CONSULTAR_RETENCION:this.consultarRetencion();break;case p.a.ACCION_CONSULTAR_CONTABLE:this.consultarContable();break;case p.a.ACCION_DESMAYORIZAR:this.comprasService.verificarPermiso(p.a.ACCION_DESMAYORIZAR,this,!0)&&this.desmayorizarCompra();break;case p.a.ACCION_MAYORIZAR:this.comprasService.verificarPermiso(p.a.ACCION_MAYORIZAR,this,!0)&&this.caja?this.obtenerCompra(p.a.ACCION_MAYORIZAR):this.comprasService.mostrarSwalNoPermiso();break;case p.a.ACCION_ANULAR:this.comprasService.verificarPermiso(p.a.ACCION_ANULAR,this,!0)&&this.obtenerCompra(p.a.ACCION_ANULAR);break;case p.a.ACCION_RESTAURAR:this.comprasService.verificarPermiso(p.a.ACCION_RESTAURAR,this,!0)&&this.obtenerCompra(p.a.ACCION_RESTAURAR)}},t.prototype.operacionesCompras=function(t){var e=this;switch(t.accion){case p.a.ACCION_CANCELAR:this.limpiarFormulario();break;case p.a.ACCION_MOSTRAR_FORMULARIO:this.vistaFormulario=t.vistaFormulario;break;case p.a.ACCION_ACTIVAR:this.activar=t.activar;break;case p.a.ACCION_CREAR:this.limpiarFormulario();var o=t.objetoEnviar;"OC"===o.tipo?(this.ordenCompra=o.ordenCompra,this.listInvComprasDetalleTO=o.listadoDetalle,this.proveedor=o.proveedor):"XML"===o.tipo&&(this.fechaEmision=o.fechaEmision,this.fechaAutorizacion=o.fechaAutorizacion,this.fechaCaduca=o.fechaCaduca,this.anxCompraTO=o.anxCompraTO,this.invCompraTO=o.invCompraTO,this.proveedor=o.proveedor,this.minimoCompra=o.minimo,this.maximoCompra=o.maximo),this.nuevaCompra();break;case p.a.ACCION_CREADO:var a=this.listadoCompras.findIndex(function(t){return t.id==e.compraSeleccionada.id}),i=this.comprasService.convertirInvCompraEnInvListaConsultaCompraTO(t.invCompraTO,this.compraSeleccionada,t.proveedor);this.refrescarTabla(a,i),this.limpiarFormulario()}},t.prototype.refrescarTabla=function(t,e){this.gridApi&&this.gridApi.getRowNode(""+t).setData(e)},t.prototype.limpiarFormulario=function(){this.ordenCompra={},this.proveedor=null,this.listInvComprasDetalleTO=[],this.fechaEmision=null,this.fechaAutorizacion=null,this.fechaCaduca=null,this.anxCompraTO=new La.a,this.invCompraTO=new Fa.a,this.minimoCompra=0,this.maximoCompra=0,0===this.listadoCompras.length&&(this.activar=!1),this.parametrosFormulario=null,this.vistaFormulario=!1,this.esImportarOC=!1,this.mostrarClaveAcceso=!1},t.prototype.exportarCompras=function(){var t=this;if(this.comprasService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={listado:this.listadoCompras};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteCompras",e,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoExcel(e._body,"Compras"+t.utilService.obtenerHorayFechaActual()):t.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},t.prototype.imprimiListado=function(t){var e=this;this.cargando=!0,this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteCompra",{listaPk:t},this.empresaSeleccionada).then(function(t){t&&t._body&&t._body.byteLength>0?e.utilService.descargarArchivoPDF("Compra"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},t.prototype.imprimirIndividual=function(){this.cargando=!0;var t=new Ma.a({compEmpresa:this.empresaSeleccionada.empCodigo,compPeriodo:this.compraSeleccionada.compNumero.split("|")[0],compMotivo:this.compraSeleccionada.compNumero.split("|")[1],compNumero:this.compraSeleccionada.compNumero.split("|")[2]}),e=[];e.push(t),this.imprimiListado(e)},t.prototype.imprimirComprasLote=function(){if(this.comprasService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t=this.utilService.getAGSelectedData(this.gridApi),e=this.comprasService.algunaFilaPendienteOAnulada(t.slice(),this.empresaSeleccionada.empCodigo);e.isPendienteAnulado?(this.cargando=!1,this.toastr.warning(p.a.MSJ_HAY_COMPRAS_PENDIENTES_ANULADOS_SELECCIONADOS,p.a.TAG_AVISO)):t.length>0?this.imprimiListado(e.listadoPk):(this.cargando=!1,this.toastr.warning(p.a.MSJ_NO_ITEM_SELECCIONADO,p.a.TAG_AVISO))}},t.prototype.imprimirComprasListado=function(){var t=this;this.comprasService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)&&(this.cargando=!0,this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirCompras",{listado:this.listadoCompras},this.empresaSeleccionada).then(function(e){e&&e._body&&e._body.byteLength>0?t.utilService.descargarArchivoPDF("CompraListado"+t.utilService.obtenerHorayFechaActual()+".pdf",e):t.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)}))},t.prototype.iniciarAgGrid=function(){this.columnDefs=this.comprasService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={botonOpciones:D.a,toolTip:w.a,inputEstado:x.a},this.components={}},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimensionarColumnas(),this.seleccionarFila(0)},t.prototype.filaFocused=function(t){var e=this.gridApi?this.gridApi.getRowNode(t.rowIndex):null;this.compraSeleccionada=e?e.data:null},t.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.seleccionarFila=function(t){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(t,e)}},t.prototype.mostrarOpciones=function(t,e){this.mostrarContextMenu(e,t)},t.prototype.mostrarContextMenu=function(t,e){this.compraSeleccionada=t,this.generarOpciones(),this.menuOpciones.show(e),e.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},t.prototype.consultarContable=function(){var t=this.compraSeleccionada;t.conContable&&(this.cargando=!0,this.parametrosContabilidad={accion:p.a.ACCION_CONSULTAR,contable:t.conContable.split("|")[0].trim()+" | "+t.conContable.split("|")[1].trim()+" | "+t.conContable.split("|")[2].trim(),empresaSeleccionada:this.empresaSeleccionada,activar:this.activar,volverACargar:!1,listadoSectores:[],tamanioEstructura:null,tipoContable:t.conContable.split("|")[1].trim(),listaPeriodos:[]},this.mostrarAccionesContabilidad=!0)},t.prototype.cerrarContabilidadAcciones=function(t){t.noIniciarAtajoPadre||(this.activar=t.objetoEnviar?t.objetoEnviar.activar:this.activar,this.parametrosContabilidad=null,this.mostrarAccionesContabilidad=!1,this.definirAtajosDeTeclado())},t.prototype.cambiarEstadoActivarContabilidad=function(t){this.activar=t},t.prototype.consultarRetencion=function(){var t=this.compraSeleccionada;t.compDocumentoNumero&&(this.parametrosRetencion={parametrosBusqueda:{empresa:this.empresaSeleccionada.empCodigo,periodo:t.compNumero.split("|")[0].trim(),motivo:t.compNumero.split("|")[1].trim(),numero:t.compNumero.split("|")[2].trim(),usuarioCodigo:this.auth.getCodigoUser()},accion:p.a.ACCION_CONSULTAR})},t.prototype.accionRetencion=function(t){switch(t.accion){case p.a.ACCION_CANCELAR:this.parametrosRetencion=null,this.mostrarRetencionCompras=!1,this.definirAtajosDeTeclado();break;case p.a.ACCION_ACTIVAR:this.activar=t.activar;break;default:this.mostrarRetencionCompras=!1}},Da([Object(a.ViewChild)("menuOpciones"),wa("design:type",F.ContextMenu)],t.prototype,"menuOpciones",void 0),t=Da([Object(a.Component)({selector:"app-compras",template:o("C8O7"),styles:[o("T9Cl")]}),wa("design:paramtypes",[L.a,i.ActivatedRoute,f.a,Gt.a,z.a,u.HotkeysService,ya.a,C.a,E.b,v.a,J.a])],t)}(),Ga=o("kZx3"),Ua=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ja=[{path:"",component:c,children:[{path:"configuracionPrecios",component:Ga.a,resolve:{configuracionPrecios:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"bodegaInv",component:R.a,resolve:{bodegaInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"formaPagoInv",component:at,resolve:{formaPagoInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"formaCobroInv",component:j,resolve:{formaCobroInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"motivoCompras",component:K,resolve:{motivoCompras:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"motivoVentas",component:Z,resolve:{motivoVentas:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"categoriaClienteInv",component:ct,resolve:{categoriaClienteInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"categoriaProveedorInv",component:lt.a,resolve:{categoriaProveedorInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"clienteInv",component:b,resolve:{clienteInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"productoInv",component:ut.a,resolve:{productoInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"medidaProductoInv",component:pt.a,resolve:{medidaProducto:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"tipoProductoInv",component:O.a,resolve:{tipoProducto:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"categoriaProductoInv",component:mt.a,resolve:{categoriaProductoInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"proveedorInv",component:bt,resolve:{proveedorInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"motivoConsumos",component:Tt,resolve:{motivoConsumos:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"motivoProformas",component:Lt,resolve:{motivoProformas:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"motivoTransferencias",component:ae,resolve:{motivoTransferencias:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"numeracionCompras",component:Vt,resolve:{numeracionCompras:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"numeracionConsumos",component:Ht,resolve:{numeracionConsumos:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"numeracionVentas",component:Zt,resolve:{numeracionVentas:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"transferenciasTrans",component:_a,resolve:{transferenciasTrans:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventaFacturaVenta",component:Oa,resolve:{ventaFacturaVenta:l.a,ruta:"ventaFacturaVenta",tipoDocumento:"18",breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventaNotaCredito",component:Oa,resolve:{ventaNotaCredito:l.a,ruta:"ventaNotaCredito",tipoDocumento:"04",breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventaNotaDebito",component:Oa,resolve:{ventaNotaDebito:l.a,ruta:"ventaNotaDebito",tipoDocumento:"05",breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventaNotaEntrega",component:Oa,resolve:{ventaNotaEntrega:l.a,ruta:"ventaNotaEntrega",tipoDocumento:"00",breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"comprasTrans",component:xa,resolve:{comprasTrans:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"kardexValorizado",component:ma.a,resolve:{kardexValorizado:l.a,tipoKardex:"kValorizado",breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"invKardex",component:dt.a,resolve:{kardex:l.a,tipoKardex:"kSimple",breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"saldoBodegaInv",component:ie.a,resolve:{saldoBodegaInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"listadoCliente",component:se,resolve:{listadoCliente:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"listadoProveedor",component:de,resolve:{listadoProveedor:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"imprimirPlacasProductos",component:be,resolve:{imprimirPlacasProductos:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"comprasConsolProductos",component:xe,resolve:{comprasConsolProductos:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventasConsolProductos",component:We,resolve:{ventasConsolProductos:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"saldoBodegaComprobacionMontos",component:He.a,resolve:{saldoBodegaComprobacionMontos:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"saldoBodegaGeneral",component:Ke.a,resolve:{saldoBodegaGeneral:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventasConsolProductosCobertura",component:eo,resolve:{ventasConsolProductosCobertura:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventasConsolidadoClientes",component:co,resolve:{ventasConsolidadoClientes:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"comprasConsolProductosMensual",component:Co,resolve:{comprasConsolProductosMensual:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"analisisVentasVsCostos",component:Io,resolve:{analisisVentasVsCostos:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"listadoProducto",component:Mo,resolve:{listadoProducto:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"listadoProductosPreciosStock",component:xo,resolve:{listadoProductosPreciosStock:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"reconstruccionSaldosCostos",component:zo,resolve:{reconstruccionSaldosCostos:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventasConsolidadoClientes",component:co,resolve:{ventasConsolidadoClientes:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventasConsolProductosCobertura",component:eo,resolve:{ventasConsolProductosCobertura:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"comprasListado",component:oa,resolve:{comprasListado:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"consumosListadoInv",component:pa,resolve:{consumosListadoInv:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"},{path:"ventasListado",component:Ca,resolve:{ventasListado:l.a,breadcrumb:S.a},runGuardsAndResolvers:"always"}]}],Va=function(){function t(){}return t=Ua([Object(a.NgModule)({imports:[i.RouterModule.forChild(ja)],exports:[i.RouterModule],providers:[{provide:"ventaFacturaVenta",useValue:function(t,e){return"ventaFacturaVenta"}},{provide:"ventaNotaCredito",useValue:function(t,e){return"ventaNotaCredito"}},{provide:"ventaNotaDebito",useValue:function(t,e){return"ventaNotaDebito"}},{provide:"ventaNotaEntrega",useValue:function(t,e){return"ventaNotaEntrega"}},{provide:"18",useValue:function(t,e){return"18"}},{provide:"04",useValue:function(t,e){return"04"}},{provide:"05",useValue:function(t,e){return"05"}},{provide:"00",useValue:function(t,e){return"00"}},{provide:"kValorizado",useValue:function(t,e){return"kValorizado"}},{provide:"kSimple",useValue:function(t,e){return"kSimple"}}]})],t)}(),ka=o("Q8hO"),Ba=o("vrQg"),Ja=o("YEjl"),za=o("Kqy8"),Wa=o("mEBT"),Ha=o("gIcY"),Ka=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ya=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Xa=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},$a=function(){function t(t,e,o,i,n,r,s){this.utilService=t,this.toastr=e,this.auth=o,this.atajoService=i,this.motivoConsumoService=n,this.sectorService=r,this.bodegaService=s,this.enviarCancelar=new a.EventEmitter,this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activar=!1,this.tituloForm="",this.constantes=p.a,this.invConsumosMotivoTO=new St.a,this.listaFormaContabilizar=p.a.LISTA_MOTIVOS_CONSUMOS_FORMA_CONTABILIZAR,this.listaSectores=[],this.sectorSeleccionado=new I.a,this.listadoBodegas=new Array,this.bodegaSeleccionada=new Wa.a,this.listadoBodegasCopia=new Array}return t.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.invConsumosMotivoTO=Ka({},this.parametros.invConsumosMotivoTO),this.obtenerDatosParaMotivoConsumos(),this.extraerValoresIniciales(),this.generarAtajosTeclado()},t.prototype.extraerValoresIniciales=function(){var t=this;setTimeout(function(){t.valoresIniciales=JSON.parse(JSON.stringify(t.frmMotivoProformaDatos?t.frmMotivoProformaDatos.value:null)),t.motivoConsumoInicial=JSON.parse(JSON.stringify(t.invConsumosMotivoTO?t.invConsumosMotivoTO:null))},60)},t.prototype.obtenerDatosParaMotivoConsumos=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,inactivo:!1,activo:!0};this.motivoConsumoService.obtenerDatosParaMotivoConsumos(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerDatosParaMotivoConsumos=function(t){this.listaSectores=t?t.listaSector:[],this.sectorSeleccionado=this.listaSectores[0],this.listadoBodegas=t?t.listaBodega:[],this.listadoBodegasCopia=this.listadoBodegas.slice(),this.bodegaSeleccionada=this.listadoBodegas[0],this.operaciones()},t.prototype.listarSectores=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.listarInvBodegaComboTO=function(){var t={empresa:p.a.KEY_EMPRESA_SELECT};this.cargando=!0,this.bodegaService.listarInvComboBodegaTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvComboBodegaTO=function(t){this.listadoBodegas=t||[],this.bodegaSeleccionada=this.listadoBodegas[0],this.cargando=!1},t.prototype.verificarAntesDeGuardar=function(){this.sectorSeleccionado?(this.listadoBodegas=this.listadoBodegasCopia,this.bodegaSeleccionada=this.listadoBodegas[0]):(this.bodegaSeleccionada=null,this.listadoBodegas=null)},t.prototype.operaciones=function(){switch(this.accion){case p.a.ACCION_CREAR:this.tituloForm=p.a.ACCION_NUEVO+" "+p.a.INVENTARIO_MOTIVO_CONSUMO,this.obtenerDatosNuevoMotivo();break;case p.a.ACCION_CONSULTAR:this.obtenerDatosConsultarEditarMotivo(),this.tituloForm=p.a.ACCION_CONSULTAR+" "+p.a.INVENTARIO_MOTIVO_CONSUMO+" : C\xf3digo: "+this.invConsumosMotivoTO.cmCodigo;break;case p.a.ACCION_EDITAR:this.obtenerDatosConsultarEditarMotivo(),this.tituloForm=p.a.ACCION_EDITAR+" "+p.a.INVENTARIO_MOTIVO_CONSUMO+" : C\xf3digo: "+this.invConsumosMotivoTO.cmCodigo}},t.prototype.obtenerDatosNuevoMotivo=function(){this.cargando=!0,this.invConsumosMotivoTO=new St.a,this.invConsumosMotivoTO.cmFormaContabilizar=this.listaFormaContabilizar[0],this.cargando=!1},t.prototype.insertarInvConsumoMotivo=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invConsumosMotivoTO));this.setearValoresInvConsumoMotivo(o);var a={accionChar:"I",invConsumoMotivoCopia:o};this.cargando=!1,this.enviarAccion.emit(a)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.obtenerDatosConsultarEditarMotivo=function(){this.cargando=!0,this.invConsumosMotivoTO=this.parametros.invConsumosMotivoTO,this.llenarCombos(),this.cargando=!1},t.prototype.actualizarInvConsumoMotivo=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_EDITAR,this,!0))if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoProformaDatos))this.toastr.warning(p.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,p.a.TOAST_INFORMACION),this.enviarCancelar.emit();else{this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invConsumosMotivoTO));this.setearValoresInvConsumoMotivo(o);var a={accionChar:"M",invConsumoMotivoCopia:o};this.cargando=!1,this.enviarAccion.emit(a)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.setearValoresInvConsumoMotivo=function(t){t.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.usrCodigo=this.auth.getCodigoUser().trim(),t.cmBodega=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.bodegaSeleccionada.bodCodigo:null,t.cmSector=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectorSeleccionado.secCodigo:null},t.prototype.llenarCombos=function(){this.bodegaSeleccionada=this.motivoConsumoService.seleccionarBodega(this.listadoBodegas,this.invConsumosMotivoTO.cmBodega),this.sectorSeleccionado=this.motivoConsumoService.seleccionarSector(this.listaSectores,this.invConsumosMotivoTO.cmSector)},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivar");return t&&t.click(),!1}))},t.prototype.cancelar=function(){var t=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoProformaDatos))this.enviarCancelar.emit();else switch(this.accion){case p.a.ACCION_EDITAR:case p.a.ACCION_CREAR:var e={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI,cancelButtonText:p.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&t.enviarCancelar.emit()});break;default:this.enviarCancelar.emit()}},t.prototype.cambiarActivar=function(t){this.activar=!t,this.enviarActivar.emit(t)},Ya([Object(a.Input)(),Xa("design:type",d.a)],t.prototype,"empresaSeleccionada",void 0),Ya([Object(a.Output)(),Xa("design:type",Object)],t.prototype,"enviarCancelar",void 0),Ya([Object(a.Output)(),Xa("design:type",Object)],t.prototype,"enviarActivar",void 0),Ya([Object(a.Output)(),Xa("design:type",Object)],t.prototype,"enviarAccion",void 0),Ya([Object(a.Input)(),Xa("design:type",Object)],t.prototype,"parametros",void 0),Ya([Object(a.ViewChild)("frmMotivoProformaDatos"),Xa("design:type",Ha.NgForm)],t.prototype,"frmMotivoProformaDatos",void 0),t=Ya([Object(a.Component)({selector:"app-motivo-consumos-formulario",template:o("JFi0"),styles:[o("bOfo")]}),Xa("design:paramtypes",[f.a,E.b,J.a,u.HotkeysService,Ot.a,T.a,Te.a])],t)}(),qa=o("K/pM"),Za=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Qa=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ti=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ei=function(){function t(t,e,o,i,n,r){this.utilService=t,this.toastr=e,this.auth=o,this.sectorService=i,this.bodegaService=n,this.atajoService=r,this.enviarCancelar=new a.EventEmitter,this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activar=!1,this.tituloForm="",this.constantes=p.a,this.invBodegaTO=new qa.a,this.invListaBodegaTO=new Oe.a,this.listaSectores=[],this.sectorSeleccionado=new I.a}return t.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.invBodegaTO=Za({},this.parametros.invBodegaTO),this.generarAtajosTeclado(),this.operaciones(),this.extraerValoresIniciales(),this.extraerValoresIniciales(),this.generarAtajosTeclado()},t.prototype.extraerValoresIniciales=function(){var t=this;setTimeout(function(){t.valoresIniciales=JSON.parse(JSON.stringify(t.frmBodegaDatos?t.frmBodegaDatos.value:null)),t.bodegaInicial=JSON.parse(JSON.stringify(t.invBodegaTO?t.invBodegaTO:null))},50)},t.prototype.listarSectores=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1,this.operaciones()},t.prototype.operaciones=function(){switch(this.accion){case p.a.ACCION_CREAR:this.tituloForm=p.a.TITULO_FORM_NUEVO_BODEGA,this.obtenerDatosNuevaBodega();break;case p.a.ACCION_CONSULTAR:this.obtenerDatosEditarBodega(),this.tituloForm=p.a.TITULO_FORM_CONSULTAR_BODEGA+": C\xf3digo: "+this.invBodegaTO.bodCodigo;break;case p.a.ACCION_EDITAR:this.obtenerDatosEditarBodega(),this.tituloForm=p.a.TITULO_FORM_EDITAR_BODEGA+": C\xf3digo: "+this.invBodegaTO.bodCodigo}},t.prototype.obtenerDatosNuevaBodega=function(){this.cargando=!0,this.invBodegaTO=new qa.a,this.listaSectores=this.parametros.listaSectores,this.sectorSeleccionado=this.listaSectores[0],this.cargando=!1},t.prototype.insertarBodega=function(t){if(this.bodegaService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invBodegaTO));this.setearValoresAObjetoInvBodegaTO(o);var a={invBodegaTO:o};this.bodegaService.insertarBodegaTO(a,this,o,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.despuesDeInsertarBodega=function(t,e){this.cargando=!1,this.toastr.success(t,"Aviso");var o={accion:p.a.ACCION_CREAR,bodegaCopia:e};this.enviarAccion.emit(o)},t.prototype.obtenerDatosEditarBodega=function(){this.cargando=!0,this.invListaBodegaTO=this.parametros.invBodegaTO,this.listaSectores=this.parametros.listaSectores,this.llenarCombos(),this.cargando=!1},t.prototype.actualizarBodega=function(t){if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmBodegaDatos))this.toastr.warning(p.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,p.a.TOAST_INFORMACION),this.enviarCancelar.emit();else if(this.bodegaService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invBodegaTO)),a=this.convertirInvBodegaToAInvListaBodegasTO(o);this.setearValoresAObjetoInvBodegaTO(a);var i={invBodegaTO:a};this.bodegaService.modificarBodegaTO(i,this,a,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.despuesDeModificarBodega=function(t,e){this.cargando=!1,this.toastr.success(t,"Aviso");var o={accion:p.a.ACCION_EDITAR,bodegaCopia:e};this.enviarAccion.emit(o)},t.prototype.setearValoresAObjetoInvBodegaTO=function(t){t.empCodigo=p.a.KEY_EMPRESA_SELECT,t.secEmpresa=p.a.KEY_EMPRESA_SELECT,t.detEmpresa=p.a.KEY_EMPRESA_SELECT,t.usrEmpresa=p.a.KEY_EMPRESA_SELECT,t.detUsuario=this.auth.getCodigoUser(),t.usrInsertaBodega=this.auth.getCodigoUser(),t.secCodigo=this.sectorSeleccionado.secCodigo},t.prototype.llenarCombos=function(){this.sectorSeleccionado=this.bodegaService.seleccionarSector(this.listaSectores,this.invListaBodegaTO.codigoCP)},t.prototype.convertirInvBodegaToAInvListaBodegasTO=function(t){var e=new qa.a(t);return e.secCodigo=t.codigoCP,e},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_ESC,function(){var t=document.getElementById("btnCancelarBodega");return t&&t.click(),!1}))},t.prototype.cancelar=function(){var t=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmBodegaDatos))this.enviarCancelar.emit();else switch(this.accion){case p.a.ACCION_EDITAR:case p.a.ACCION_CREAR:var e={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI,cancelButtonText:p.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&t.enviarCancelar.emit()});break;default:this.enviarCancelar.emit()}},t.prototype.cambiarActivar=function(t){this.activar=!t,this.enviarActivar.emit(t)},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},Qa([Object(a.Input)(),ti("design:type",d.a)],t.prototype,"empresaSeleccionada",void 0),Qa([Object(a.Output)(),ti("design:type",Object)],t.prototype,"enviarCancelar",void 0),Qa([Object(a.Output)(),ti("design:type",Object)],t.prototype,"enviarActivar",void 0),Qa([Object(a.Output)(),ti("design:type",Object)],t.prototype,"enviarAccion",void 0),Qa([Object(a.Input)(),ti("design:type",Object)],t.prototype,"parametros",void 0),Qa([Object(a.ViewChild)("frmBodegaDatos"),ti("design:type",Ha.NgForm)],t.prototype,"frmBodegaDatos",void 0),Qa([Object(a.HostListener)("window:resize",["$event"]),ti("design:type",Function),ti("design:paramtypes",[]),ti("design:returntype",void 0)],t.prototype,"onResize",null),t=Qa([Object(a.Component)({selector:"app-bodega-formulario",template:o("l1N1"),styles:[o("fkQf")]}),ti("design:paramtypes",[f.a,E.b,J.a,T.a,Te.a,u.HotkeysService])],t)}(),oi=o("tmev"),ai=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ii=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ni=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ri=function(){function t(t,e,o,i,n,r,s){this.utilService=t,this.toastr=e,this.auth=o,this.atajoService=i,this.modalService=n,this.formaCobroService=r,this.sectorService=s,this.enviarCancelar=new a.EventEmitter,this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activar=!1,this.tituloForm="",this.constantes=p.a,this.listaSectores=[],this.sectorSeleccionado=new I.a,this.listaTipos=p.a.LISTA_TIPOS_FORMA_COBRO,this.invVentasFormaCobroTO=new N.a,this.codigoCuenta=null,this.tamanioEstructura=0,this.indexTablaEditar=0,this.listaResultado=[]}return t.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.tamanioEstructura=this.parametros.tamanioEstructura,this.invVentasFormaCobroTO=ai({},this.parametros.invVentasFormaCobroTO),this.operaciones(),this.extraerValoresIniciales(),this.generarAtajos()},t.prototype.extraerValoresIniciales=function(){var t=this;setTimeout(function(){t.valoresIniciales=JSON.parse(JSON.stringify(t.frmFormaCobroDatos?t.frmFormaCobroDatos.value:null)),t.formaCobroInicial=JSON.parse(JSON.stringify(t.invVentasFormaCobroTO?t.invVentasFormaCobroTO:null))},60)},t.prototype.listarSectores=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.operaciones=function(){switch(this.accion){case p.a.ACCION_CREAR:this.tituloForm=p.a.TITULO_FORM_NUEVO_FORMA_COBRO,this.obtenerDatosNuevaFormaCobro();break;case p.a.ACCION_CONSULTAR:this.obtenerDatosConsultarFormaCobro(),this.tituloForm=p.a.TITULO_FORM_CONSULTAR_FORMA_COBRO+": Cuenta: "+this.invVentasFormaCobroTO.ctaCodigo;break;case p.a.ACCION_EDITAR:this.obtenerDatosEditarFormaCobro(),this.tituloForm=p.a.TITULO_FORM_EDITAR_FORMA_COBRO+": Cuenta: "+this.invVentasFormaCobroTO.ctaCodigo}},t.prototype.obtenerDatosNuevaFormaCobro=function(){this.cargando=!0,this.invVentasFormaCobroTO=new N.a,this.listaSectores=this.parametros.listaSectores,this.sectorSeleccionado=this.listaSectores[0],this.invVentasFormaCobroTO.fcTipoPrincipal=this.listaTipos[0],this.cargando=!1},t.prototype.obtenerDatosConsultarFormaCobro=function(){this.cargando=!0,this.invVentasFormaCobroTO=this.parametros.invVentasFormaCobroTO,this.listaSectores=this.parametros.listaSectores,this.listaResultado=this.parametros.listaResultado,this.llenarCombo(),this.cargando=!1},t.prototype.obtenerDatosEditarFormaCobro=function(){var t=this;this.cargando=!0,this.invVentasFormaCobroTO=this.parametros.invVentasFormaCobroTO,this.codigoCuenta=this.invVentasFormaCobroTO.ctaCodigo,this.listaSectores=this.parametros.listaSectores,this.listaResultado=this.parametros.listaResultado,this.llenarCombo(),this.indexTablaEditar=this.invVentasFormaCobroTO.fcSecuencial?this.listaResultado.findIndex(function(e){return e.fcSecuencial===t.invVentasFormaCobroTO.fcSecuencial}):this.listaResultado.findIndex(function(e){return e.ctaCodigo===t.invVentasFormaCobroTO.ctaCodigo}),this.cargando=!1},t.prototype.insertarInvVentasFormaCobro=function(t){if(this.formaCobroService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invVentasFormaCobroTO));this.setearValoresVentasFormaCobroTO(o);var a={accionChar:"I",invVentasFormaCobroCopia:o};this.cargando=!1,this.enviarAccion.emit(a)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.actualizarInvVentasFormaCobro=function(t){if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmFormaCobroDatos))this.toastr.warning(p.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,p.a.TOAST_INFORMACION),this.enviarCancelar.emit();else if(this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invVentasFormaCobroTO));this.setearValoresVentasFormaCobroTO(o);var a={accionChar:"M",invVentasFormaCobroCopia:o,indexTablaEditar:this.indexTablaEditar};this.cargando=!1,this.enviarAccion.emit(a)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.setearValoresVentasFormaCobroTO=function(t){t.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.secEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.ctaEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.usrCodigo=this.auth.getCodigoUser(),t.secCodigo=this.sectorSeleccionado.secCodigo},t.prototype.llenarCombo=function(){this.sectorSeleccionado=this.formaCobroService.seleccionarSector(this.listaSectores,this.invVentasFormaCobroTO.secCodigo)},t.prototype.generarAtajos=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarFormulario");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardarFormaCobro");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelarFormaCobro");return t&&t.click(),!1}))},t.prototype.buscarConCuentas=function(t){var e=this;if(this.utilService.validarTeclasAgregarFila(t.keyCode)&&(!(this.invVentasFormaCobroTO.ctaCodigo===this.codigoCuenta&&this.invVentasFormaCobroTO.ctaCodigo&&this.codigoCuenta)&&(this.invVentasFormaCobroTO.ctaCodigo=""===this.invVentasFormaCobroTO.ctaCodigo?null:this.invVentasFormaCobroTO.ctaCodigo,this.invVentasFormaCobroTO.ctaCodigo=this.invVentasFormaCobroTO.ctaCodigo?this.invVentasFormaCobroTO.ctaCodigo.toUpperCase():null,this.invVentasFormaCobroTO.ctaCodigo))){var o={empresa:this.empresaSeleccionada.empCodigo,buscar:this.invVentasFormaCobroTO.ctaCodigo,ctaGrupo:null};t.srcElement.blur(),t.preventDefault();var a=this.modalService.open(oi.a,{size:"lg",backdrop:"static"});a.componentInstance.filtrosBusquedaPlanCuenta=o,a.componentInstance.tamanioEstructura=this.tamanioEstructura,a.result.then(function(t){e.codigoCuenta=t?t.cuentaCodigo:null,e.invVentasFormaCobroTO.ctaCodigo=t?t.cuentaCodigo:null,e.invVentasFormaCobroTO.fcDetalle=t?t.cuentaDetalle.trim().toUpperCase():null,document.getElementById("cuenta").focus()},function(t){var e=document.getElementById("cuenta");e&&e.focus()})}},t.prototype.validarCuenta=function(){this.codigoCuenta!==this.invVentasFormaCobroTO.ctaCodigo&&(this.codigoCuenta=null,this.invVentasFormaCobroTO.ctaCodigo=null)},t.prototype.cancelar=function(){var t=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmFormaCobroDatos))this.enviarCancelar.emit();else switch(this.accion){case p.a.ACCION_EDITAR:case p.a.ACCION_CREAR:var e={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI,cancelButtonText:p.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&t.enviarCancelar.emit()});break;default:this.enviarCancelar.emit()}},t.prototype.cambiarActivar=function(t){this.activar=!t,this.enviarActivar.emit(t)},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},ii([Object(a.Input)(),ni("design:type",d.a)],t.prototype,"empresaSeleccionada",void 0),ii([Object(a.Output)(),ni("design:type",Object)],t.prototype,"enviarCancelar",void 0),ii([Object(a.Output)(),ni("design:type",Object)],t.prototype,"enviarActivar",void 0),ii([Object(a.Output)(),ni("design:type",Object)],t.prototype,"enviarAccion",void 0),ii([Object(a.Input)(),ni("design:type",Object)],t.prototype,"parametros",void 0),ii([Object(a.ViewChild)("frmFormaCobroDatos"),ni("design:type",Ha.NgForm)],t.prototype,"frmFormaCobroDatos",void 0),ii([Object(a.HostListener)("window:resize",["$event"]),ni("design:type",Function),ni("design:paramtypes",[]),ni("design:returntype",void 0)],t.prototype,"onResize",null),t=ii([Object(a.Component)({selector:"app-forma-cobro-formulario",template:o("//0j"),styles:[o("tonu")]}),ni("design:paramtypes",[f.a,E.b,J.a,u.HotkeysService,Re.b,M.a,T.a])],t)}(),si=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ci=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},li=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},di=function(){function t(t,e,o,i,n,r,s){this.utilService=t,this.toastr=e,this.auth=o,this.atajoService=i,this.modalService=n,this.sectorService=r,this.formaPagoService=s,this.enviarCancelar=new a.EventEmitter,this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activar=!1,this.tituloForm="",this.constantes=p.a,this.codigoCuenta=null,this.tamanioEstructura=0,this.listaSectores=[],this.sectorSeleccionado=new I.a,this.invComprasFormaPagoTO=new Q,this.listaResultado=[],this.indexTablaEditar=0}return t.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.tamanioEstructura=this.parametros.tamanioEstructura,this.listaSectores=this.parametros.listaSectores,this.invComprasFormaPagoTO=si({},this.parametros.invComprasFormaPagoTO),this.operaciones(),this.extraerValoresIniciales(),this.generarAtajos()},t.prototype.extraerValoresIniciales=function(){var t=this;setTimeout(function(){t.valoresIniciales=JSON.parse(JSON.stringify(t.frmFormaPagoDatos?t.frmFormaPagoDatos.value:null)),t.formaPagoInicial=JSON.parse(JSON.stringify(t.invComprasFormaPagoTO?t.invComprasFormaPagoTO:null))},60)},t.prototype.operaciones=function(){switch(this.accion){case p.a.ACCION_CREAR:this.tituloForm=p.a.TITULO_FORM_NUEVO_FORMA_PAGO,this.obtenerDatosFormaPagoNuevo();break;case p.a.ACCION_CONSULTAR:this.obtenerDatoFormaPagoConsulta(),this.tituloForm=p.a.TITULO_FORM_CONSULTAR_FORMA_PAGO+": Cuenta: "+this.invComprasFormaPagoTO.ctaCodigo;break;case p.a.ACCION_EDITAR:this.obtenerDatoFormaPago(),this.tituloForm=p.a.TITULO_FORM_EDITAR_FORMA_PAGO+": Cuenta: "+this.invComprasFormaPagoTO.ctaCodigo}},t.prototype.obtenerDatosFormaPagoNuevo=function(){this.cargando=!0,this.invComprasFormaPagoTO=new Q,this.sectorSeleccionado=this.listaSectores[0],this.tamanioEstructura=this.parametros.tamanioEstructura,this.cargando=!1},t.prototype.obtenerDatoFormaPagoConsulta=function(){this.cargando=!0,this.invComprasFormaPagoTO=this.parametros.invComprasFormaPagoTO,this.codigoCuenta=this.invComprasFormaPagoTO.ctaCodigo,this.llenarCombo(),this.cargando=!1},t.prototype.obtenerDatoFormaPago=function(){var t=this;this.cargando=!0,this.invComprasFormaPagoTO=this.parametros.invComprasFormaPagoTO,this.codigoCuenta=this.invComprasFormaPagoTO.ctaCodigo,this.listaResultado=this.parametros.listaResultado,this.llenarCombo(),this.indexTablaEditar=this.invComprasFormaPagoTO.fpSecuencial?this.listaResultado.findIndex(function(e){return e.fpSecuencial===t.invComprasFormaPagoTO.fpSecuencial}):this.listaResultado.findIndex(function(e){return e.ctaCodigo===t.invComprasFormaPagoTO.ctaCodigo}),this.cargando=!1},t.prototype.insertarInvComprasFormaPagoTO=function(t){if(this.formaPagoService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invComprasFormaPagoTO));this.setearValoresInvComprasFormaPago(o);var a={accionChar:"I",invComprasFormaPagoCopia:o};this.cargando=!1,this.enviarAccion.emit(a)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.actualizarInvComprasFormaPagoTO=function(t){if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmFormaPagoDatos))this.toastr.warning(p.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,p.a.TOAST_INFORMACION),this.enviarCancelar.emit();else if(this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invComprasFormaPagoTO));this.setearValoresInvComprasFormaPago(o);var a={accionChar:"M",invComprasFormaPagoCopia:o,indexTablaEditar:this.indexTablaEditar};this.cargando=!1,this.enviarAccion.emit(a)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.setearValoresInvComprasFormaPago=function(t){t.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim(),t.usrCodigo=this.auth.getCodigoUser(),t.secCodigo=this.sectorSeleccionado.secCodigo},t.prototype.llenarCombo=function(){this.sectorSeleccionado=this.formaPagoService.seleccionarSector(this.listaSectores,this.invComprasFormaPagoTO.secCodigo)},t.prototype.listarSectores=function(){this.cargando=!0;var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var e=this;this.listaSectores=t,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado?this.listaSectores.find(function(t){return t.secCodigo===e.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.generarAtajos=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarFormulario");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelarFormaPago");return t&&t.click(),!1}))},t.prototype.buscarConCuentas=function(t){var e=this;if(this.utilService.validarTeclasAgregarFila(t.keyCode)&&(!(this.invComprasFormaPagoTO.ctaCodigo===this.codigoCuenta&&this.invComprasFormaPagoTO.ctaCodigo&&this.codigoCuenta)&&(this.invComprasFormaPagoTO.ctaCodigo=""===this.invComprasFormaPagoTO.ctaCodigo?null:this.invComprasFormaPagoTO.ctaCodigo,this.invComprasFormaPagoTO.ctaCodigo=this.invComprasFormaPagoTO.ctaCodigo?this.invComprasFormaPagoTO.ctaCodigo.toUpperCase():null,this.invComprasFormaPagoTO.ctaCodigo))){var o={empresa:this.empresaSeleccionada.empCodigo,buscar:this.invComprasFormaPagoTO.ctaCodigo,ctaGrupo:null};t.srcElement.blur(),t.preventDefault();var a=this.modalService.open(oi.a,{size:"lg",backdrop:"static"});a.componentInstance.filtrosBusquedaPlanCuenta=o,a.componentInstance.tamanioEstructura=this.tamanioEstructura,a.result.then(function(t){e.codigoCuenta=t?t.cuentaCodigo:null,e.invComprasFormaPagoTO.ctaCodigo=t?t.cuentaCodigo:null,e.invComprasFormaPagoTO.fpDetalle=t?t.cuentaDetalle.trim().toUpperCase():null,document.getElementById("cuenta").focus()},function(t){var e=document.getElementById("cuenta");e&&e.focus()})}},t.prototype.validarCuenta=function(){this.codigoCuenta!==this.invComprasFormaPagoTO.ctaCodigo&&(this.codigoCuenta=null,this.invComprasFormaPagoTO.ctaCodigo=null)},t.prototype.cancelar=function(){var t=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmFormaPagoDatos))this.enviarCancelar.emit();else switch(this.accion){case p.a.ACCION_EDITAR:case p.a.ACCION_CREAR:var e={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI,cancelButtonText:p.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&t.enviarCancelar.emit()});break;default:this.enviarCancelar.emit()}},t.prototype.cambiarActivar=function(t){this.activar=!t,this.enviarActivar.emit(t)},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},ci([Object(a.Input)(),li("design:type",d.a)],t.prototype,"empresaSeleccionada",void 0),ci([Object(a.Output)(),li("design:type",Object)],t.prototype,"enviarCancelar",void 0),ci([Object(a.Output)(),li("design:type",Object)],t.prototype,"enviarActivar",void 0),ci([Object(a.Output)(),li("design:type",Object)],t.prototype,"enviarAccion",void 0),ci([Object(a.Input)(),li("design:type",Object)],t.prototype,"parametros",void 0),ci([Object(a.ViewChild)("frmFormaPagoDatos"),li("design:type",Ha.NgForm)],t.prototype,"frmFormaPagoDatos",void 0),ci([Object(a.HostListener)("window:resize",["$event"]),li("design:type",Function),li("design:paramtypes",[]),li("design:returntype",void 0)],t.prototype,"onResize",null),t=ci([Object(a.Component)({selector:"app-forma-pago-formulario",template:o("INjq"),styles:[o("LSET")]}),li("design:paramtypes",[f.a,E.b,J.a,u.HotkeysService,Re.b,T.a,tt.a])],t)}(),pi=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},mi=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},ui=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},hi=function(){function t(t,e,o,i,n,r){this.utilService=t,this.toastr=e,this.auth=o,this.atajoService=i,this.motivoComprasService=n,this.tipoContableService=r,this.enviarCancelar=new a.EventEmitter,this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activar=!1,this.tituloForm="",this.constantes=p.a,this.invComprasMotivoTO=new V.a,this.listaTipos=[],this.tipoSeleccionado=new k.a,this.listaFormaImprimir=p.a.LISTA_MOTIVOS_COMPRA_FORMA_IMPRIMIR,this.formaImprimirSeleccionado="",this.listaFormaContabilizar=p.a.LISTA_MOTIVOS_COMPRA_FORMA_CONTABILIZAR,this.formaContabilizarSeleccionado=""}return t.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.listaTipos=this.parametros.listaTipos,this.invComprasMotivoTO=pi({},this.parametros.invComprasMotivoTO),this.operaciones(),this.extraerValoresIniciales(),this.generarAtajos()},t.prototype.extraerValoresIniciales=function(){var t=this;setTimeout(function(){t.valoresIniciales=JSON.parse(JSON.stringify(t.frmMotivoCompraDatos?t.frmMotivoCompraDatos.value:null)),t.motivoCompraInicial=JSON.parse(JSON.stringify(t.invComprasMotivoTO?t.invComprasMotivoTO:null))},100)},t.prototype.operaciones=function(){switch(this.accion){case p.a.ACCION_CREAR:this.tituloForm=p.a.TITULO_FORM_NUEVO_MOTIVO_COMPRA,this.obtenerDatosMotivoComprasNuevo();break;case p.a.ACCION_CONSULTAR:this.obtenerDatosMotivoCompras(),this.tituloForm=p.a.TITULO_FORM_CONSULTAR_MOTIVO_COMPRA+": C\xf3digo: "+this.invComprasMotivoTO.cmCodigo;break;case p.a.ACCION_EDITAR:this.obtenerDatosMotivoCompras(),this.tituloForm=p.a.TITULO_FORM_EDITAR_MOTIVO_COMPRA+": C\xf3digo: "+this.invComprasMotivoTO.cmCodigo}},t.prototype.obtenerDatosMotivoComprasNuevo=function(){this.cargando=!0,this.invComprasMotivoTO=new V.a,this.formaContabilizarSeleccionado=this.listaFormaContabilizar[0],this.formaImprimirSeleccionado=this.listaFormaImprimir[0],this.tipoSeleccionado=this.listaTipos.length>0?this.listaTipos[0]:null,this.cargando=!1},t.prototype.obtenerDatosMotivoCompras=function(){this.cargando=!0,this.invComprasMotivoTO=this.parametros.invCompraMotivoTO,this.llenarCombos(),this.cargando=!1},t.prototype.insertarInvComprasMotivoTO=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invComprasMotivoTO));this.setearValoresInvComprasMotivoTO(o);var a={invCompraMotivoTO:o};this.motivoComprasService.insertarInvComprasMotivoTO(a,this,o,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.despuesDeInsertarInvComprasMotivoTO=function(t,e){this.toastr.success(t,"Aviso");var o={invCompraMotivoTOCopia:e,accionChar:"I"};this.cargando=!1,this.enviarAccion.emit(o)},t.prototype.actualizarInvComprasMotivoTO=function(t){var e=this.utilService.establecerFormularioTocado(t);if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoCompraDatos)&&t&&t.valid&&e)this.toastr.warning(p.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,p.a.TOAST_INFORMACION),this.enviarCancelar.emit();else if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0))if(this.cargando=!0,t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invComprasMotivoTO));this.setearValoresInvComprasMotivoTO(o);var a={invCompraMotivoTO:o};this.motivoComprasService.actualizarInvComprasMotivoTO(a,this,o,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeActualizarInvComprasMotivoTO=function(t,e){this.toastr.success(t,"Aviso");var o={invCompraMotivoTOCopia:e,accionChar:"U"};this.cargando=!1,this.enviarAccion.emit(o)},t.prototype.llenarCombos=function(){var t=this;this.tipoSeleccionado=this.listaTipos.filter(function(e){return e.tipCodigo===t.invComprasMotivoTO.tipCodigo})[0],this.formaContabilizarSeleccionado=this.listaFormaContabilizar.filter(function(e){return e===t.invComprasMotivoTO.cmFormaContabilizar})[0],this.formaImprimirSeleccionado=this.listaFormaImprimir.filter(function(e){return e===t.invComprasMotivoTO.cmFormaImprimir})[0]},t.prototype.setearValoresInvComprasMotivoTO=function(t){t.cmEmpresa=p.a.KEY_EMPRESA_SELECT,t.cmFormaContabilizar=this.formaContabilizarSeleccionado,t.cmFormaImprimir=this.formaImprimirSeleccionado,t.tipCodigo=this.tipoSeleccionado.tipCodigo,t.usrCodigo=this.auth.getCodigoUser()},t.prototype.listarTipos=function(){this.listaTipos=[];var t={empresa:p.a.KEY_EMPRESA_SELECT};this.tipoContableService.listarTipoContable(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarTipoContable=function(t){var e=this;this.listaTipos=t||[],this.listaTipos.length>0?this.tipoSeleccionado=this.tipoSeleccionado?this.listaTipos.find(function(t){return t.tipCodigo===e.tipoSeleccionado.tipCodigo}):this.listaTipos[0]:this.tipoSeleccionado=null},t.prototype.generarAtajos=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelar");return t&&t.click(),!1}))},t.prototype.cancelar=function(){var t=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoCompraDatos))this.enviarCancelar.emit();else switch(this.accion){case p.a.ACCION_EDITAR:case p.a.ACCION_CREAR:var e={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI,cancelButtonText:p.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&t.enviarCancelar.emit()});break;default:this.enviarCancelar.emit()}},t.prototype.cambiarActivar=function(t){this.activar=!t,this.enviarActivar.emit(t)},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},mi([Object(a.Input)(),ui("design:type",d.a)],t.prototype,"empresaSeleccionada",void 0),mi([Object(a.Output)(),ui("design:type",Object)],t.prototype,"enviarCancelar",void 0),mi([Object(a.Output)(),ui("design:type",Object)],t.prototype,"enviarActivar",void 0),mi([Object(a.Output)(),ui("design:type",Object)],t.prototype,"enviarAccion",void 0),mi([Object(a.Input)(),ui("design:type",Object)],t.prototype,"parametros",void 0),mi([Object(a.ViewChild)("frmMotivoCompraDatos"),ui("design:type",Ha.NgForm)],t.prototype,"frmMotivoCompraDatos",void 0),mi([Object(a.HostListener)("window:resize",["$event"]),ui("design:type",Function),ui("design:paramtypes",[]),ui("design:returntype",void 0)],t.prototype,"onResize",null),t=mi([Object(a.Component)({selector:"app-motivo-compras-formulario",template:o("/l4/"),styles:[o("TDfJ")]}),ui("design:paramtypes",[f.a,E.b,J.a,u.HotkeysService,z.a,B.a])],t)}(),vi=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ci=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},fi=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ai=function(){function t(t,e,o,i,n,r){this.utilService=t,this.toastr=e,this.auth=o,this.atajoService=i,this.motivoVentasService=n,this.tipoContableService=r,this.enviarCancelar=new a.EventEmitter,this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activar=!1,this.tituloForm="",this.constantes=p.a,this.listaTipos=[],this.tipoSeleccionado=new k.a,this.listaFormaImprimir=p.a.LISTA_MOTIVOS_COMPRA_FORMA_IMPRIMIR,this.formaImprimirSeleccionado="",this.listaFormaContabilizar=p.a.LISTA_MOTIVOS_COMPRA_FORMA_CONTABILIZAR,this.formaContabilizarSeleccionado="",this.invVentaMotivoTO=new Y}return t.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.listaTipos=this.parametros.listaTipos,this.invVentaMotivoTO=vi({},this.parametros.invVentaMotivoTO),this.operaciones(),this.generarAtajos(),this.extraerValoresIniciales()},t.prototype.extraerValoresIniciales=function(){var t=this;setTimeout(function(){t.valoresIniciales=JSON.parse(JSON.stringify(t.frmVentaMotivoDatos?t.frmVentaMotivoDatos.value:null)),t.motivoVentaInicial=JSON.parse(JSON.stringify(t.motivoVentaInicial?t.motivoVentaInicial:null))},50)},t.prototype.operaciones=function(){switch(this.accion){case p.a.ACCION_CREAR:this.obtenerDatosMotivoVentasNuevo(),this.tituloForm=p.a.TITULO_FORM_NUEVO_MOTIVO_VENTA;break;case p.a.ACCION_CONSULTAR:this.obtenerDatosMotivoVentas(),this.tituloForm=p.a.TITULO_FORM_CONSULTAR_MOTIVO_VENTA+": C\xf3digo: "+this.invVentaMotivoTO.vmCodigo;break;case p.a.ACCION_EDITAR:this.obtenerDatosMotivoVentas(),this.tituloForm=p.a.TITULO_FORM_EDITAR_MOTIVO_VENTA+": C\xf3digo: "+this.invVentaMotivoTO.vmCodigo}},t.prototype.obtenerDatosMotivoVentasNuevo=function(){this.cargando=!0,this.invVentaMotivoTO=new Y,this.formaContabilizarSeleccionado=this.listaFormaContabilizar[0],this.formaImprimirSeleccionado=this.listaFormaImprimir[0],this.tipoSeleccionado=this.listaTipos.length>0?this.listaTipos[0]:null,this.cargando=!1},t.prototype.obtenerDatosMotivoVentas=function(){this.cargando=!0,this.invVentaMotivoTO=this.parametros.invVentaMotivoTO,this.llenarCombos(),this.cargando=!1},t.prototype.insertarInvVentaMotivoTO=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invVentaMotivoTO));this.setearValoresInvVentaMotivoTO(o);var a={invVentaMotivoTO:o};this.motivoVentasService.insertarInvVentasMotivoTO(a,this,o,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.despuesDeInsertarInvVentasMotivoTO=function(t,e){this.toastr.success(t,"Aviso");var o={invVentaMotivoTOCopia:e,accionChar:"I"};this.cargando=!1,this.enviarAccion.emit(o)},t.prototype.actualizarInvVentaMotivoTO=function(t){if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmVentaMotivoDatos))this.toastr.warning(p.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,p.a.TOAST_INFORMACION),this.enviarCancelar.emit();else if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var o=JSON.parse(JSON.stringify(this.invVentaMotivoTO));this.setearValoresInvVentaMotivoTO(o),this.motivoVentasService.actualizarInvVentaMotivoTO(this.parametros,this,o,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.despuesDeActualizarInvVentasMotivoTO=function(t,e){this.toastr.success(t,"Aviso");var o={invVentaMotivoTOCopia:e,accionChar:"U"};this.cargando=!1,this.enviarAccion.emit(o)},t.prototype.llenarCombos=function(){var t=this;this.tipoSeleccionado=this.listaTipos.filter(function(e){return e.tipCodigo===t.invVentaMotivoTO.tipCodigo})[0],this.formaContabilizarSeleccionado=this.listaFormaContabilizar.filter(function(e){return e===t.invVentaMotivoTO.vmFormaContabilizar})[0],this.formaImprimirSeleccionado=this.listaFormaImprimir.filter(function(e){return e===t.invVentaMotivoTO.vmFormaImprimir})[0]},t.prototype.setearValoresInvVentaMotivoTO=function(t){t.vmEmpresa=p.a.KEY_EMPRESA_SELECT,t.vmFormaContabilizar=this.formaContabilizarSeleccionado,t.vmFormaImprimir=this.formaImprimirSeleccionado,t.tipCodigo=this.tipoSeleccionado.tipCodigo,t.usrCodigo=this.auth.getCodigoUser()},t.prototype.listarTipos=function(){this.listaTipos=[];var t={empresa:p.a.KEY_EMPRESA_SELECT};this.tipoContableService.listarTipoContable(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarTipoContable=function(t){var e=this;this.listaTipos=t||[],this.listaTipos.length>0?this.tipoSeleccionado=this.tipoSeleccionado?this.listaTipos.find(function(t){return t.tipCodigo===e.tipoSeleccionado.tipCodigo}):this.listaTipos[0]:this.tipoSeleccionado=null},t.prototype.generarAtajos=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new u.Hotkey(p.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelar");return t&&t.click(),!1}))},t.prototype.cancelar=function(){var t=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmVentaMotivoDatos))this.enviarCancelar.emit();else switch(this.accion){case p.a.ACCION_EDITAR:case p.a.ACCION_CREAR:var e={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI,cancelButtonText:p.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&t.enviarCancelar.emit()});break;default:this.enviarCancelar.emit()}},t.prototype.cambiarActivar=function(t){this.activar=!t,this.enviarActivar.emit(t)},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},Ci([Object(a.Input)(),fi("design:type",d.a)],t.prototype,"empresaSeleccionada",void 0),Ci([Object(a.Output)(),fi("design:type",Object)],t.prototype,"enviarCancelar",void 0),Ci([Object(a.Output)(),fi("design:type",Object)],t.prototype,"enviarActivar",void 0),Ci([Object(a.Output)(),fi("design:type",Object)],t.prototype,"enviarAccion",void 0),Ci([Object(a.Input)(),fi("design:type",Object)],t.prototype,"parametros",void 0),Ci([Object(a.ViewChild)("frmVentaMotivoDatos"),fi("design:type",Ha.NgForm)],t.prototype,"frmVentaMotivoDatos",void 0),Ci([Object(a.HostListener)("window:resize",["$event"]),fi("design:type",Function),fi("design:paramtypes",[]),fi("design:returntype",void 0)],t.prototype,"onResize",null),t=Ci([Object(a.Component)({selector:"app-motivo-ventas-formulario",template:o("zw5E"),styles:[o("z1Vu")]}),fi("design:paramtypes",[f.a,E.b,J.a,u.HotkeysService,X.a,B.a])],t)}(),gi=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bi=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Si=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Oi=function(){function t(t,e,o,i){this.utilService=t,this.motivoTransferenciaService=e,this.toastr=o,this.atajoService=i,this.enviarCancelar=new a.EventEmitter,this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activar=!1,this.tituloForm="",this.constantes=p.a,this.invTransferenciaMotivoTO=new te.a}return t.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.invTransferenciaMotivoTO=gi({},this.parametros.invTransferenciaMotivoTO),this.operaciones(),this.generarAtajosTeclado(),this.extraerValoresIniciales()},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivar");return t&&t.click(),!1}))},t.prototype.extraerValoresIniciales=function(){var t=this;setTimeout(function(){t.valoresIniciales=JSON.parse(JSON.stringify(t.frmMotivoTransferenciaDatos?t.frmMotivoTransferenciaDatos.value:null)),t.motivoTransferenciaInicial=JSON.parse(JSON.stringify(t.invTransferenciaMotivoTO?t.invTransferenciaMotivoTO:null))},60)},t.prototype.operaciones=function(){switch(this.accion){case p.a.ACCION_CREAR:this.tituloForm=p.a.TITULO_FORM_NUEVO_MOTIVO_TRANSFERENCIA,this.invTransferenciaMotivoTO=new te.a;break;case p.a.ACCION_CONSULTAR:this.insertarMotivoTransferencia=this.parametros.invTransferenciaMotivoTO,this.tituloForm=p.a.TITULO_FORM_CONSULTAR_MOTIVO_TRANSFERENCIA+": C\xf3digo: "+this.invTransferenciaMotivoTO.tmCodigo;break;case p.a.ACCION_EDITAR:this.invTransferenciaMotivoTO=this.parametros.invTransferenciaMotivoTO,this.tituloForm=p.a.TITULO_FORM_EDITAR_MOTIVO_TRANSFERENCIA+": C\xf3digo: "+this.invTransferenciaMotivoTO.tmCodigo}},t.prototype.insertarMotivoTransferencia=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.utilService.establecerFormularioTocado(t)&&t&&t.valid){var e=JSON.parse(JSON.stringify(this.invTransferenciaMotivoTO));this.motivoTransferenciaService.setearValoresInvTransferenciaMotivo(e);var o={accionChar:"I",invTransferenciaMotivoCopia:e};this.cargando=!1,this.enviarAccion.emit(o)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.actualizarMotivoTransferencia=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0))if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoTransferenciaDatos))this.toastr.warning(p.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,p.a.TOAST_INFORMACION),this.enviarCancelar.emit();else if(this.cargando=!0,this.utilService.establecerFormularioTocado(t)&&t&&t.valid){var e=JSON.parse(JSON.stringify(this.invTransferenciaMotivoTO));this.motivoTransferenciaService.setearValoresInvTransferenciaMotivo(e);var o={accionChar:"M",invTransferenciaMotivoCopia:e};this.cargando=!1,this.enviarAccion.emit(o)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.cambiarActivar=function(t){this.activar=!t,this.enviarActivar.emit(t)},t.prototype.cancelar=function(){var t=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoTransferenciaDatos))this.enviarCancelar.emit();else switch(this.accion){case p.a.ACCION_EDITAR:case p.a.ACCION_CREAR:var e={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI,cancelButtonText:p.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&t.enviarCancelar.emit()});break;default:this.enviarCancelar.emit()}},bi([Object(a.Input)(),Si("design:type",d.a)],t.prototype,"empresaSeleccionada",void 0),bi([Object(a.Output)(),Si("design:type",Object)],t.prototype,"enviarCancelar",void 0),bi([Object(a.Output)(),Si("design:type",Object)],t.prototype,"enviarActivar",void 0),bi([Object(a.Output)(),Si("design:type",Object)],t.prototype,"enviarAccion",void 0),bi([Object(a.Input)(),Si("design:type",Object)],t.prototype,"parametros",void 0),bi([Object(a.ViewChild)("frmMotivoTransferenciaDatos"),Si("design:type",Ha.NgForm)],t.prototype,"frmMotivoTransferenciaDatos",void 0),t=bi([Object(a.Component)({selector:"app-motivo-transferencias-formulario",template:o("pt92"),styles:[o("KE7M")]}),Si("design:paramtypes",[f.a,Qt.a,E.b,u.HotkeysService])],t)}(),Ri=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ii=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Ti=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ei=function(){function t(t,e,o,i,n){this.utilService=t,this.toastr=e,this.auth=o,this.atajoService=i,this.proformaMotivoService=n,this.enviarCancelar=new a.EventEmitter,this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activar=!1,this.tituloForm="",this.constantes=p.a,this.invProformaMotivoTO=new Et}return t.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.invProformaMotivoTO=Ri({},this.parametros.invProformaMotivoTO),this.generarAtajosTeclado(),this.operaciones(),this.extraerValoresIniciales()},t.prototype.extraerValoresIniciales=function(){var t=this;setTimeout(function(){t.valoresIniciales=JSON.parse(JSON.stringify(t.frmMotivoProformaDatos?t.frmMotivoProformaDatos.value:null)),t.motivoConsumoInicial=JSON.parse(JSON.stringify(t.invProformaMotivoTO?t.invProformaMotivoTO:null))},60)},t.prototype.operaciones=function(){switch(this.accion){case p.a.ACCION_CREAR:this.invProformaMotivoTO=new Et,this.tituloForm=p.a.TITULO_FORM_NUEVO_MOTIVO_PROFORMA;break;case p.a.ACCION_CONSULTAR:this.invProformaMotivoTO=this.parametros.invProformaMotivoTO,this.tituloForm=p.a.TITULO_FORM_CONSULTAR_MOTIVO_PROFORMA+": C\xf3digo: "+this.invProformaMotivoTO.pmCodigo;break;case p.a.ACCION_EDITAR:this.invProformaMotivoTO=this.parametros.invProformaMotivoTO,this.tituloForm=p.a.TITULO_FORM_EDITAR_MOTIVO_PROFORMA+": C\xf3digo: "+this.invProformaMotivoTO.pmCodigo}},t.prototype.insertarProformaMotivo=function(t){if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.utilService.establecerFormularioTocado(t)&&t&&t.valid){this.invProformaMotivoCopia=JSON.parse(JSON.stringify(this.invProformaMotivoTO)),this.setearValores(this.invProformaMotivoCopia);var e={invProformaMotivoTO:this.invProformaMotivoCopia};this.proformaMotivoService.insertarInvProformasMotivoTO(e,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeInsertarProformasMotivoTO=function(t){this.cargando=!1,this.toastr.success(t.operacionMensaje,"Aviso");var e={accion:p.a.ACCION_CREAR,invProformaMotivoCopia:this.invProformaMotivoCopia};this.enviarAccion.emit(e)},t.prototype.actualizarProformaMotivo=function(t){if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoProformaDatos))this.toastr.warning(p.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,p.a.TOAST_INFORMACION),this.enviarCancelar.emit();else if(this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.utilService.establecerFormularioTocado(t)&&t&&t.valid){this.invProformaMotivoCopia=JSON.parse(JSON.stringify(this.invProformaMotivoTO)),this.setearValores(this.invProformaMotivoTO);var e={invProformaMotivoTO:this.invProformaMotivoCopia};this.proformaMotivoService.actualizarInvProformasMotivo(e,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeActualizarProformasMotivoTO=function(t){this.cargando=!1,this.toastr.success(t.operacionMensaje,"Aviso");var e={accion:p.a.ACCION_EDITAR,invProformaMotivoCopia:this.invProformaMotivoCopia};this.enviarAccion.emit(e)},t.prototype.setearValores=function(t){t.pmEmpresa=p.a.KEY_EMPRESA_SELECT,t.usrCodigo=this.auth.getCodigoUser()},t.prototype.cancelar=function(){var t=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoProformaDatos))this.enviarCancelar.emit();else switch(this.accion){case p.a.ACCION_EDITAR:case p.a.ACCION_CREAR:var e={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI,cancelButtonText:p.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&t.enviarCancelar.emit()});break;default:this.enviarCancelar.emit()}},t.prototype.generarAtajosTeclado=function(){this.atajoService.add(new u.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivar");return t&&t.click(),!1}))},Ii([Object(a.Input)(),Ti("design:type",d.a)],t.prototype,"empresaSeleccionada",void 0),Ii([Object(a.Output)(),Ti("design:type",Object)],t.prototype,"enviarCancelar",void 0),Ii([Object(a.Output)(),Ti("design:type",Object)],t.prototype,"enviarActivar",void 0),Ii([Object(a.Output)(),Ti("design:type",Object)],t.prototype,"enviarAccion",void 0),Ii([Object(a.Input)(),Ti("design:type",Object)],t.prototype,"parametros",void 0),Ii([Object(a.ViewChild)("frmMotivoProformaDatos"),Ti("design:type",Ha.NgForm)],t.prototype,"frmMotivoProformaDatos",void 0),t=Ii([Object(a.Component)({selector:"app-motivo-proformas-formulario",template:o("y8Xp"),styles:[o("5fqR")]}),Ti("design:paramtypes",[f.a,E.b,J.a,u.HotkeysService,Mt])],t)}(),_i=o("Mwk2"),yi=o("nnK+"),Mi=o("ZJV5"),Ni=o("bPTo"),Pi=o("2sJq"),Li=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},Fi=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Di=function(){function t(t,e,o,i,n,r,s,c){this.utilService=t,this.toastr=e,this.comprasService=o,this.comprasFormularioService=i,this.proveedorService=n,this.motivoOCService=r,this.sectorService=s,this.ordenCompraService=c,this.esImportarOC=!1,this.enviarAccion=new a.EventEmitter,this.listaMotivos=[],this.listaSectores=[],this.sectorSeleccionado=new I.a,this.motivoSeleccionado=new Mi.a,this.mostrarFormulario=!1,this.activar=!1,this.claveAcceso=null,this.radioComprobante=!1,this.screamXS=!0,this.cargando=!1,this.constantes=null,this.titulo="",this.parametrosFormulario=null,this.mostrarAccionesProveedor=!1,this.ordenCompra={},this.objetoEnviar={},this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.constantes=p.a}return t.prototype.ngOnInit=function(){this.esImportarOC?(this.titulo=p.a.TAG_IMPORTAR_ORDEN_DE_COMPRA+": "+this.empresaSeleccionada.empCodigo,this.listarSectores()):(this.titulo=p.a.TITULO_FORM_NUEVA_COMPRA+": "+this.empresaSeleccionada.empCodigo,this.mostrarFormulario=!0)},t.prototype.listarSectores=function(){this.cargando=!0,this.listaMotivos=[],this.listaSectores=[],this.motivoSeleccionado=null,this.sectorSeleccionado=null;var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(t,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){this.listaSectores=t.slice(),this.cargando=!1,this.listarMotivos(),this.mostrarFormulario=!0},t.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[],this.motivoSeleccionado=null;var t=this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,e={empresa:p.a.KEY_EMPRESA_SELECT,sector:t};this.motivoOCService.listarInvPedidosOrdenCompraMotivoTO(e,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarInvPedidosOrdenCompraMotivoTO=function(t){this.listaMotivos=t.slice(),this.cargando=!1},t.prototype.soloNumeros=function(t){return this.utilService.soloNumeros(t)},t.prototype.completarCeros=function(){this.ordenCompra.numero=this.utilService.completarCeros(this.ordenCompra.numero)},t.prototype.obtenerOrdenCompra=function(t){if(this.cargando=!0,this.utilService.establecerFormularioTocado(t)&&t&&t.valid){if(this.ordenCompra.sector=this.sectorSeleccionado.secCodigo,this.ordenCompra.motivo=this.motivoSeleccionado.ocmCodigo,this.ordenCompra&&this.ordenCompra.sector&&this.ordenCompra.motivo&&this.ordenCompra.numero){this.cargando=!0;var e={ocSector:this.ordenCompra.sector,ocMotivo:this.ordenCompra.motivo,ocNumero:this.ordenCompra.numero,ocEmpresa:this.empresaSeleccionada.empCodigo};this.ordenCompraService.obtenerOrdenCompra({pk:e},this,this.empresaSeleccionada.empCodigo)}}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.despuesDeObtenerOrdenCompra=function(t){if(t){this.ordenCompra.empresa=this.empresaSeleccionada.empCodigo;var e=new ht.a;e.empCodigo=this.empresaSeleccionada.empCodigo,e.provCodigo=t.invProveedor.invProveedorPK.provCodigo,e.provDireccion=t.invProveedor.provDireccion,e.provRazonSocial=t.invProveedor.provRazonSocial,e.provNombreComercial=t.invProveedor.provNombreComercial,e.provTipoId=t.invProveedor.provIdTipo,e.provId=t.invProveedor.provIdNumero;var o={proveedor:e,listadoDetalle:this.formatearListado(t.invPedidosOrdenCompraDetalleList),ordenCompra:this.ordenCompra};this.enviarAccion.emit({tipo:"OC",accion:p.a.ACCION_CREAR,objetoEnviar:o})}else this.ordenCompra={},this.objetoEnviar={};this.cargando=!1},t.prototype.formatearListado=function(t){var e=this,o=[];return t.forEach(function(t){var a=new Pi.a;a.proEmpresa=e.empresaSeleccionada.empCodigo,a.proCodigoPrincipal=t.invPedidosDetalle.invProducto.invProductoPK.proCodigoPrincipal,a.proCodigoPrincipalCopia=t.invPedidosDetalle.invProducto.invProductoPK.proCodigoPrincipal,a.nombreProducto=t.invPedidosDetalle.invProducto.proNombre,a.proEstadoIva=t.invPedidosDetalle.invProducto.proIva,a.detCantidad=t.detCantidad,a.detPrecio=t.detPrecioReal,a.medidaDetalle=t.invPedidosDetalle.invProducto.invProductoMedida.medDetalle,a.parcialProducto=a.detCantidad*a.detPrecio,o.push(a)}),this.cargando=!1,o},t.prototype.buscarComprobanteElectronico=function(t){if(this.radioComprobante){if(this.comprasService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e)if(49!==this.claveAcceso.length)this.toastr.warning(p.a.MSJ_LONGITUD_CLAVE_ACCESO_NO_CORRECTA,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1;else{this.cargando=!0;var o={empresa:this.empresaSeleccionada.empCodigo,clave:this.claveAcceso};this.comprasFormularioService.buscarComprobanteElectronico(o,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}}else this.claveAcceso=null,this.enviarAccion.emit({accion:p.a.ACCION_CREAR,objetoEnviar:{}})},t.prototype.despuesDeBuscarComprobanteElectronico=function(t){this.cargando=!0;var e=new ht.a,o=new Fa.a,a=new La.a,i=this.utilService.convertirDecimaleFloat(t.itemBusqueda.totalComprobante),n=i-.1*t.itemBusqueda.totalComprobante,r=i+.1*t.itemBusqueda.totalComprobante;e.provCodigo=t.itemBusqueda.idProveedor,e.provId=t.invProveedorDatosXMLTO.ruc,e.provDireccion=t.invProveedorDatosXMLTO.dirMatriz,e.provRazonSocial=t.invProveedorDatosXMLTO.razonSocial,e.provTipoId=t.itemBusqueda.provTipoId,o.compDocumentoTipo=t.invProveedorDatosXMLTO.codDoc,o.compDocumentoNumero=t.invProveedorDatosXMLTO.numeroDocumento,o.compElectronica=!0;var s=new Date(t.itemBusqueda.fechaAut),c=new Date(t.itemBusqueda.fechaCaduca),l=new Date(t.itemBusqueda.fechaCompra);a.compAutorizacion=t.invProveedorDatosXMLTO.numeroAutorizacion,this.objetoEnviar={tipo:"XML",proveedor:e,fechaAutorizacion:s,fechaCaduca:c,fechaEmision:l,invCompraTO:o,anxCompraTO:a,minimo:n,maximo:r};var d=t.invProveedorDatosXMLTO.ruc,m={empresa:this.empresaSeleccionada.empCodigo,id:d};this.proveedorService.obtenerSiEsProveedorRepetido(m,this,p.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeObtenerSiEsProveedorRepetido=function(t){t?(this.enviarAccion.emit({accion:p.a.ACCION_CREAR,objetoEnviar:this.objetoEnviar}),this.cargando=!1):(this.deseaAgregarProveedor(),this.cargando=!1)},t.prototype.cancelar=function(){this.enviarAccion.emit({accion:p.a.ACCION_CANCELAR})},t.prototype.cambiarEstadoActivar=function(){this.activar=!this.activar,this.enviarAccion.emit({accion:p.a.ACCION_ACTIVAR,activar:this.activar})},t.prototype.deseaAgregarProveedor=function(){var t=this,e={title:p.a.INVENTARIO_COMPRAS,texto:p.a.MSJ_PREGUNTA_INSERTAR_PROVEEDOR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e?t.mostrarFormularioProveedor():t.comprasFormularioService.focus("provCodigo")})},t.prototype.mostrarFormularioProveedor=function(){this.parametrosFormulario={empresa:this.empresaSeleccionada,accion:p.a.ACCION_CREAR,invProveedorTO:this.objetoEnviar.proveedor,tituloFormulario:p.a.TITULO_FORM_NUEVO_PROVEEDOR,activar:this.activar},this.mostrarAccionesProveedor=!0},t.prototype.cerrarFormularioProveedor=function(t){if(t.invProveedorTO){var e=new ht.a(t.invProveedorTO);this.objetoEnviar.proveedor=e,this.enviarAccion.emit({accion:p.a.ACCION_CREAR,objetoEnviar:this.objetoEnviar})}this.mostrarAccionesProveedor=!1,this.parametrosFormulario=null},Li([Object(a.Input)(),Fi("design:type",Object)],t.prototype,"empresaSeleccionada",void 0),Li([Object(a.Input)(),Fi("design:type",Boolean)],t.prototype,"esImportarOC",void 0),Li([Object(a.Output)(),Fi("design:type",Object)],t.prototype,"enviarAccion",void 0),t=Li([Object(a.Component)({selector:"app-comprobante-electronico-compras",template:o("F+GH"),styles:[o("nun2")]}),Fi("design:paramtypes",[f.a,E.b,ya.a,_i.a,vt.a,Ni.a,T.a,yi.a])],t)}();o.d(e,"InventarioModule",function(){return xi});var wi=function(t,e,o,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,a);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},xi=function(){function t(){}return t=wi([Object(a.NgModule)({imports:[Va,ka.a],declarations:[c,bt,b,ct,Ba.a,Oa,R.a,j,K,Z,at,lt.a,Ja.a,Lt,Tt,ae,Vt,Zt,Ht,se,de,be,xe,We,eo,Co,co,za.a,Io,Mo,xo,zo,oa,pa,Ca,_a,xa,$a,ei,ri,di,hi,Ai,Oi,Ei,Di],entryComponents:[Ba.a,za.a,Ja.a],exports:[],providers:[Re.a]})],t)}()},SmVl:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <fieldset [disabled]="vistaFormulario">\r\n        <div class="card-header">\r\n          <b>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i> {{constantes.TITULO_FILTROS}}\r\n          </b>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--SELECCION EMPRESA--\x3e\r\n          <form #frm=\'ngForm\' name="frm">\r\n            <div class="form-group form-group-sm"><label class="control-label">\r\n                <b>{{constantes.TAG_EMPRESA}}</b>\r\n              </label>\r\n              <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n                (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                  ({{empresa.empCodigo}}) </option>\r\n              </select>\r\n            </div>\r\n            \x3c!--SELECCION PERIODO--\x3e\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_PERIODO}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="vistaFormulario">\r\n                {{periodoSeleccionado?.sisPeriodoPK?.perCodigo}} | ({{periodoSeleccionado?.perDetalle}})</label>\r\n              <p-dropdown [options]="listadoPeriodos" name="Periodo" [showClear]="true" [(ngModel)]="periodoSeleccionado"\r\n                (ngModelChange)="limpiarResultado()" placeholder="TODOS" optionLabel="perDetalle" class="mousetrap"\r\n                *ngIf="!vistaFormulario">\r\n                <ng-template let-item pTemplate="selectedItem">\r\n                  {{periodoSeleccionado?.sisPeriodoPK?.perCodigo}} | {{periodoSeleccionado?.perDetalle}}\r\n                </ng-template>\r\n                <ng-template let-fs pTemplate="item">\r\n                  <div class="">{{fs.value.sisPeriodoPK.perCodigo}} | {{fs.value.perDetalle}}</div>\r\n                </ng-template>\r\n              </p-dropdown>\r\n            </div>\r\n            \x3c!--SELECCION MOTIVO--\x3e\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_MOTIVO}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="vistaFormulario">\r\n                {{motivoSeleccionado?.tmDetalle}} ({{motivoSeleccionado?.tmCodigo}})</label>\r\n              <p-dropdown [options]="listadoMotivos" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n                (ngModelChange)="limpiarResultado()" placeholder="TODOS" optionLabel="tmDetalle" class="mousetrap"\r\n                *ngIf="!vistaFormulario">\r\n                <ng-template let-item pTemplate="selectedItem">\r\n                  {{motivoSeleccionado?.tmDetalle}} ({{motivoSeleccionado?.tmCodigo}})\r\n                </ng-template>\r\n                <ng-template let-fs pTemplate="item">\r\n                  <div class="">{{fs.value.tmDetalle}} ({{fs.value.tmCodigo}})</div>\r\n                </ng-template>\r\n              </p-dropdown>\r\n            </div>\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FILTRO}}</b>\r\n              </label>\r\n              <input type="text" [(ngModel)]="filtro" name="filtro" class="form-control form-control-sm mousetrap"\r\n                [appFocus]="true">\r\n            </div>\r\n          </form>\r\n        </div>\r\n        <div class="card-footer">\r\n          <div class="text-right" *ngIf="!vistaFormulario">\r\n            <div class="btn-group d-none d-lg-block">\r\n              <button type="button" id="btnBuscarTransferencias" class="btn btn-sm btn-primary" title="{{constantes.ATAJO_BUSCAR}}"\r\n                (click)="listarTransferencia(20)">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split  mr-1"\r\n                data-toggle="dropdown" style="margin-right: 3px;">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="listarTransferencia(50)"> {{constantes.TAG_ULTIMOS_50}}</a>\r\n                <a class="dropdown-item" (click)="listarTransferencia(100)"> {{constantes.TAG_ULTIMOS_100}}</a>\r\n                <a class="dropdown-item" (click)="listarTransferencia(null)"> {{constantes.TAG_TODOS}}</a>\r\n              </div>\r\n              <button type="button" id="btnNuevo" class="btn btn-sm btn-primary" title="{{constantes.ATAJO_NUEVO}}"\r\n                (click)="nuevaTransferencia()">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}\r\n              </button>\r\n            </div>\r\n            <div class="btn-group d-lg-none">\r\n              <button type="button" id="btnBuscarTransferencias" class="btn btn-sm btn-primary" title="{{constantes.ATAJO_BUSCAR}}"\r\n                (click)="listarTransferencia(20)">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split  mr-1"\r\n                data-toggle="dropdown" style="margin-right: 3px;">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="listarTransferencia(50)"> {{constantes.TAG_ULTIMOS_50}}</a>\r\n                <a class="dropdown-item" (click)="listarTransferencia(100)"> {{constantes.TAG_ULTIMOS_100}}</a>\r\n                <a class="dropdown-item" (click)="listarTransferencia(null)"> {{constantes.TAG_TODOS}}</a>\r\n              </div>\r\n              <button type="button" id="btnNuevo" class="btn btn-sm btn-primary" title="{{constantes.ATAJO_NUEVO}}"\r\n                (click)="nuevaTransferencia()">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </div>\r\n  </div>\r\n  \x3c!--LISTADO TRANSFERENCIA--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarTransferencia" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_TRANSFERENCIAS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" (click)="desmayorizarTransferenciaPorLote()"\r\n              [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruMayorizarContables" placement="top" ngbTooltip="{{constantes.LABEL_DESMAYORIZAR}}"\r\n              container="body" title="{{constantes.ATAJO_DESMAYORIZAR}}">\r\n              <i class="{{constantes.ICON_DESMAYORIZAR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <div class="btn-group">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnImprimirTransferencia" (click)="imprimirTransferencia()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary mr-1 dropdown-toggle dropdown-toggle-split"\r\n                data-toggle="dropdown" id="btnInactivo">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="imprimirReporteTransferenciaPorLote()">{{constantes.LABEL_IMPRIMIR_LOTE}}</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" (click)="desmayorizarTransferenciaPorLote()"\r\n              [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruMayorizarContables" placement="top" ngbTooltip="{{constantes.LABEL_DESMAYORIZAR}}"\r\n              container="body" title="{{constantes.ATAJO_DESMAYORIZAR}}">\r\n              <i class="{{constantes.ICON_DESMAYORIZAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_DESMAYORIZAR}}</span>\r\n            </button>\r\n            <div class="btn-group">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnImprimirTransferencia" (click)="imprimirTransferencia()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary mr-1 dropdown-toggle dropdown-toggle-split"\r\n                data-toggle="dropdown" id="btnInactivo">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="imprimirReporteTransferenciaPorLote()">{{constantes.LABEL_IMPRIMIR_LOTE}}</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" [rowClassRules]="rowClassRules" (cellDoubleClicked)="objetoSeleccionado = $event.node.data;operacionTransferenciaListado(constantes.ACCION_CONSULTAR, true)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-transferencias-formulario *ngIf="vistaFormulario" [empresaSeleccionada]="empresaSeleccionada" (enviarCancelar)="cancelar()"\r\n      [data]=objetoTransferenciaEnviar (activarEstado)="activar=!$event" (enviarAccion)="ejecutarAccion($event)"></app-transferencias-formulario>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},T2lK:function(t,e){t.exports='<div class="row" *ngIf="!mostrarKardex">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--FORMULARIO DE FILTRADO--\x3e\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frm="ngForm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada();" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer">\r\n        <div class="text-right">\r\n          <button id="btnBuscarReconstruccionSaldoCostos" type="button" class="btn btn-sm btn-primary" (click)="buscarReconstruccionSaldoCostos()">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n\r\n    <div class="card m-0" *ngIf="listaResultadoReconstruccionSaldoCosto.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarReconstruccionSaldoCostos" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_RECONSTRUCCION_SALDO_COSTO_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirReconstruccionSaldoCostos" (click)="imprimirReconstruccionSaldoCostos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarReconstruccionSaldoCostos" (click)="exportarReconstruccionSaldoCostos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirReconstruccionSaldoCostos" (click)="imprimirReconstruccionSaldoCostos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarReconstruccionSaldoCostos" (click)="exportarReconstruccionSaldoCostos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoReconstruccionSaldoCosto" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="analisisVentasVsCostosSeleccionado = $event.node.data" (filterChanged)="actualizarFilas()"\r\n          (cellFocused)="filaFocused($event)" (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()"\r\n          (cellDoubleClicked)="consultarKardexValorizado()" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="mostrarKardex && objetoDesdeFuera">\r\n  <app-kardex-valorizado [objetoDesdeFuera]="objetoDesdeFuera" (cerrarKardex)="cerrarKardex($event)"></app-kardex-valorizado>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},T9Cl:function(t,e){t.exports=""},TDfJ:function(t,e){t.exports=""},Y1js:function(t,e){t.exports=""},Znq1:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activarVentas}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i> <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frm=\'ngForm\' name="frm" autocomplete="off">\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario || objetoContableEnviar">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n              [disabled]="vistaFormulario || objetoContableEnviar">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarMotivos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaMotivos" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="vmDetalle"\r\n              [disabled]="vistaFormulario || objetoContableEnviar">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{motivoSeleccionado?.vmDetalle}} ( {{motivoSeleccionado?.vmCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.vmDetalle}} ({{fs.value.vmCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_TIPO_COMPROBANTES}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarTiposComprobante()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_TIPOS_COMPROBANTES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaTipoComprobante" name="tipoComprobante" [showClear]="true" [(ngModel)]="tipoComprobanteSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="tcDescripcion"\r\n              [disabled]="vistaFormulario || objetoContableEnviar">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{tipoComprobanteSeleccionado?.tcDescripcion}} ( {{tipoComprobanteSeleccionado?.tcCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.tcDescripcion}} ({{fs.value.tcCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_CLIENTE}}</strong>\r\n            </label>\r\n            <input id="clienteCodigo" name="clienteCodigo" class="form-control form-control-sm text-uppercase mousetrap"\r\n              type="text" (blur)="validarCliente()" (keydown)="buscarCliente($event);" [(ngModel)]="cliente.cliCodigo"\r\n              maxlength="500" placeholder="{{constantes.TAG_OPCIONAL}}" (ngModelChange)="limpiarResultado()"\r\n              appUppercase [disabled]="vistaFormulario || objetoContableEnviar" [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [maxDate]="fechaHasta" [appMaxDate]="fechaHasta"\r\n              [disabled]="vistaFormulario || objetoContableEnviar"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [minDate]="fechaDesde" [appMinDate]="fechaDesde"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual" [disabled]="vistaFormulario || objetoContableEnviar"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer text-muted" *ngIf="!vistaFormulario && !objetoContableEnviar">\r\n        <div class="text-right">\r\n          <div class="text-right">\r\n            <button type="button" id="btnBuscarListadoVentas" class="btn btn-sm btn-primary" (click)="buscarListadoVentas(frm)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activarVentas,\'col-lg-12 col-md-12 col-sm-12\':activarVentas}">\r\n    <div class="card m-0" *ngIf="listaResultadoVentas?.length>0 && !vistaFormulario && !objetoContableEnviar">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarListadoVentas" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activarVentas=!activarVentas"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activarVentas?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_VENTAS_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirListadoVentas" (click)="imprimirListadoVentas()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarListadoVentas" (click)="exportarListadoVentas()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirListadoVentas" (click)="imprimirListadoVentas()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarListadoVentas" (click)="exportarListadoVentas()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoVentas" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n          (gridSizeChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)" (rowSelected)="ventaSeleccionada = $event.node.data"\r\n          (cellDoubleClicked)="consultarVenta()" [frameworkComponents]="frameworkComponents" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n    \x3c!--Consulta ventas--\x3e\r\n    <div *ngIf="vistaFormulario">\r\n      <app-venta-formulario [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        [tipoDocumento]="tipoDocumento" (enviarAccion)="ejecutarAccion($event)"></app-venta-formulario>\r\n    </div>\r\n    \x3c!--Consulta contable--\x3e\r\n    <div *ngIf="objetoContableEnviar">\r\n      <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n        (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"bK3+":function(t,e){t.exports=""},bOfo:function(t,e){t.exports=""},"cWC+":function(t,e){t.exports=""},dpfQ:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCliente=\'ngForm\' name="frmCliente" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset [disabled]="vistaFormulario">\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b>{{constantes.TAG_FILTRAR}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSelect()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_BUSQUEDA}}</b>\r\n            </label>\r\n            <input class="form-control form-control-sm mousetrap text-uppercase" placeholder="{{constantes.TAG_OBLIGATORIO}}" name="busqueda"\r\n              [(ngModel)]="busqueda" (ngModelChange)="limpiarResultado()" appUppercase [appFocus]="true">\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group">\r\n              <button type="button" class="btn btn-sm btn-primary" (click)="!vistaFormulario ? listarClientes(false) : null"\r\n                title="{{constantes.ATAJO_BUSCAR}}" id="btnBuscarCliente" disabled="true">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              id="btnInactivo" disabled="true">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="!vistaFormulario ? listarClientes(true) : null">{{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n              </div>\r\n            </div>&nbsp;\r\n            <button class="btn btn-sm btn-primary" type="button" (click)="!vistaFormulario && verificarPermiso(constantes.ACCION_CREAR, true) ? nuevoCliente() : null"\r\n              [disabled]="!frmCliente.valid" title="{{constantes.ATAJO_NUEVO}}">\r\n              <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div [hidden]="!vistaListado || !parametro">\r\n      <app-cliente-listado [parametros]="parametro" [isModal]="false" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarActivar)="activar=!$event" (enviarAccion)="accionLista($event)"></app-cliente-listado>\r\n    </div>\r\n    <div *ngIf="vistaFormulario && !vistaListado && parametrosFormulario">\r\n      <app-cliente-formulario [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        [listadoCategorias]="listadoCategorias" (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event"></app-cliente-formulario>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},fFj4:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activarProductoPlaca}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmProveedor=\'ngForm\' name="frmProveedor" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_PRODUCTO}}</b>\r\n            </label>\r\n            <input [appFocus]="true" name="txtBusqueda" [(ngModel)]="codigoProducto" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n              class="form-control input-sm text-uppercase" maxlength="7" (ngModelChange)="limpiarResultado()"\r\n              appUppercase>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnBuscarProductoPlaca" (click)="buscarProductoPlaca()"\r\n            title="{{constantes.ATAJO_BUSCAR}}">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activarProductoPlaca,\'col-lg-12 col-md-12 col-sm-12\':activarProductoPlaca}">\r\n    <div class="card m-0" *ngIf="listaResultadoProductoPlaca?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarProductoPlaca" class="btn btn-sm btn-primary mr-2 mousetrap" *ngIf="!screamXS" (click)="activarProductoPlaca =! activarProductoPlaca"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activarProductoPlaca?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_PRODUCTO_PLACA_IMPRIMIR_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirProductoPlaca" (click)="imprimirProductoPlaca()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarProductoPlaca" (click)="exportarProductoPlaca()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirProductoPlaca" (click)="imprimirProductoPlaca()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarProductoPlaca" (click)="exportarProductoPlaca()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoProductoPlaca" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)"\r\n          (cellValueChanged)="verificarEstado($event)" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n          (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},fkQf:function(t,e){t.exports=""},"i5+7":function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <b>\r\n          <span *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_EDITAR">\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i> {{tituloForm}}</span>\r\n          <span *ngIf="accion === constantes.ACCION_CREAR">\r\n            <i class="{{constantes.ICON_FILTRO_NUEVO}}"></i> {{tituloForm}}</span>\r\n          <span *ngIf="accion === constantes.ACCION_EDITAR">\r\n            <i class="{{constantes.ICON_FILTRO_EDITAR}}"></i> {{tituloForm}}</span>\r\n        </b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmMotivoTransferencia=\'ngForm\' name="frmMotivoTransferencia">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscarMotivoTransferencia" class="btn btn-sm btn-primary" (click)="buscarInvTransferenciaMotivo(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarInvTransferenciaMotivo(true)">\r\n                {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevoMotivoTransferencia" (click)="operacionesTransferenciaMotivo(constantes.ACCION_CREAR)"\r\n            title="{{constantes.ATAJO_NUEVO}}">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultadoMotivoTransferencia?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarMotivoTransferencia" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_MOTIVO_TRANSFERENCIAS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoTransferencia" (click)="imprimirMotivoTransferencia()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoTransferencia" (click)="exportarMotivoTransferencia()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoTransferencia" (click)="imprimirMotivoTransferencia()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoTransferencia" (click)="exportarMotivoTransferencia()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoMotivoTransferencia" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()"\r\n          (gridReady)="onGridReady($event)" (rowSelected)="transferenciaMotivoSeleccionado = $event.node.data"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n          (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)"\r\n          (cellDoubleClicked)="transferenciaMotivoSeleccionado = $event.node.data; operacionesTransferenciaMotivo(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--FORMULARIO--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-motivo-transferencias-formulario *ngIf="vistaFormulario" [parametros]="parametrosFormulario"\r\n      [empresaSeleccionada]="empresaSeleccionada" (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event"\r\n      (enviarAccion)="ejecutarAccion($event)">\r\n    </app-motivo-transferencias-formulario>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},ikmz:function(t,e){t.exports=""},"j+WX":function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmCompraMotivo=\'ngForm\' name="frmCompraMotivo" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarInvComprasMotivoTO(true)"\r\n              title="{{constantes.ATAJO_BUSCAR}}" *ngIf="!vistaFormulario">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              *ngIf="!vistaFormulario">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarInvComprasMotivoTO(false)"> {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevo" (click)="operacionesMotivoCompras(constantes.ACCION_CREAR)"\r\n            title="{{constantes.ATAJO_NUEVO}}" *ngIf="!vistaFormulario">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_MOTIVO_COMPRA_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoCompra" (click)="imprimirMotivoCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoCompra" (click)="exportarMotivoCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoCompra" (click)="imprimirMotivoCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoCompra" (click)="exportarMotivoCompra()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="!this.isModal?$event.preventDefault():null" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; operacionesMotivoCompras(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--Formulario Motivo compras--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-motivo-compras-formulario *ngIf="vistaFormulario" [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n      (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event" (enviarAccion)="ejecutarAccion($event)">\r\n    </app-motivo-compras-formulario>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},jCOt:function(t,e){t.exports=""},jo2z:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmProductos=\'ngForm\' name="frmProductos" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CATEGORIA}}</b>\r\n              &nbsp;\r\n              <a (click)="listarCategorias()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CATEGORIAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaCategorias" name="categoria" [showClear]="true" [(ngModel)]="categoriaSeleccionada"\r\n              optionLabel="catDetalle" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}"\r\n              class="mousetrap">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{categoriaSeleccionada?.catDetalle}} ({{categoriaSeleccionada?.catCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.catDetalle}} ({{fs.value.catCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_BUSQUEDA}}</b>\r\n            </label>\r\n            <input class="form-control form-control-sm mousetrap text-uppercase" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n              name="busqueda" [(ngModel)]="busqueda" (ngModelChange)="limpiarResultado()" appUppercase [appFocus]="true">\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button type="button" class="btn btn-sm btn-primary" id="btnBuscarProductos" (click)="buscarProductos(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarProductos(true)">{{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div [hidden]="!vistaListado || !parametro">\r\n      <app-listado-productos [parametrosBusqueda]="parametro" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarActivar)="activar=$event" [listar]="listarProductosEstado" (enviarAccion)="accionLista($event)"\r\n        [objetoNuevoEditado]="objetoNuevoEditado" [activarAtajos]="vistaListado"></app-listado-productos>\r\n    </div>\r\n    <div *ngIf="vistaFormulario && !vistaListado && parametrosFormulario">\r\n      <app-formulario-productos [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        [listadoCategorias]="listadoCategorias" (enviarAccion)="accionLista($event)" (enviarActivar)="activar=$event"></app-formulario-productos>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},l1N1:function(t,e){t.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmBodegaDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n        title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="insertarBodega(frmBodegaDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="actualizarBodega(frmBodegaDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarBodega" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarBodega" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario Bodega--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseBodegaInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseBodegaInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CODIGO}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="invBodegaTO.bodCodigo"\r\n                pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                class="form-control form-control-sm mousetrap text-uppercase" required maxlength="20" appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body"></span>\r\n            </div>\r\n            \x3c!--DETALLE--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap text-uppercase"\r\n                name="detalle" maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invBodegaTO.bodNombre"\r\n                id="detalle" appUppercase required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n            \x3c!--SECTOR--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_SECTOR}}</b>\r\n                &nbsp;\r\n                <a (click)="listarSectores()" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                    container="body"></span>\r\n                </a>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{sectorSeleccionado.secNombre}} ({{sectorSeleccionado.secCodigo}})</label>\r\n              <select [(ngModel)]="sectorSeleccionado" name="sectorSeleccionado" class="form-control input-sm" required\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option selected [ngValue]="sector" *ngFor="let sector of listaSectores">{{sector.secNombre}}\r\n                  ({{sector.secCodigo}})</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},lUXf:function(t,e){t.exports=""},nun2:function(t,e){t.exports=""},o49v:function(t,e){t.exports=""},oI0Q:function(t,e){t.exports=""},ogeQ:function(t,e){t.exports=""},oyPh:function(t,e){t.exports=""},pt92:function(t,e){t.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmMotivoTransferenciaDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n        title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarMotivoTransferencia" (click)="insertarMotivoTransferencia(frmMotivoTransferenciaDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary  mr-1" id="btnGuardarMotivoTransferencia" (click)="actualizarMotivoTransferencia(frmMotivoTransferenciaDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarMotivoConsumo" (click)="cancelar()"\r\n          title="{{constantes.ATAJO_CANCELAR}}" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button class="btn btn-sm btn-default mr-1" id="btnCancelarMotivoTransferencia" type="button" (click)="cancelar()"\r\n          title="{{constantes.ATAJO_CANCELAR}}" *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario de Motivo de Transferencia--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseMotivoInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseMotivoInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CODIGO}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="invTransferenciaMotivoTO.tmCodigo"\r\n                pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                class="form-control input-sm mousetrap text-uppercase" required maxlength="20" appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body"></span>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap text-uppercase"\r\n                name="detalle" maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invTransferenciaMotivoTO.tmDetalle"\r\n                appUppercase id="detalle" required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},qBRU:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activarProveedor}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <b>\r\n          <i class="{{constantes.ICON_FILTRAR}}"></i> {{constantes.TITULO_FILTROS}}\r\n        </b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmProveedor=\'ngForm\' name="frmProveedor" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_BUSQUEDA}}</b>\r\n            </label>\r\n            <input class="form-control form-control-sm mousetrap text-uppercase" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n              name="busqueda" [(ngModel)]="busqueda" (ngModelChange)="limpiarResultado()" appUppercase [appFocus]="true">\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" class="btn btn-sm btn-primary" id="btnBuscarProveedor" (click)="listarProveedores(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}" disabled="true">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              disabled="true" id="btnInactivo">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="listarProveedores(true)">{{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button class="btn btn-sm btn-primary" [disabled]="vistaFormulario" id="btnNuevoProveedor" (click)="operacionesProveedor(constantes.ACCION_CREAR)"\r\n            type="button" title="{{constantes.ATAJO_NUEVO}}">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activarProveedor,\'col-lg-12 col-md-12 col-sm-12\':activarProveedor}"\r\n    [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultadoProveedores?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarProveedor" class="btn btn-sm btn-primary mr-2 mousetrap" *ngIf="isScreamMd" (click)="activarProveedor =! activarProveedor"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activarProveedor?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_PROVEEDORES_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirProveedor" (click)="imprimirProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarProveedor" (click)="exportarProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirProveedor" (click)="imprimirProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarProveedor" (click)="exportarProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--listado de proveedores--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoProveedores" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="proveeedorSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="!this.isModal?$event.preventDefault():null" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="consultarProveedor()">\r\n        </ag-grid-angular>\r\n        \x3c!--end listado de proveedores--\x3e\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activarProveedor,\'col-lg-12 col-md-12 col-sm-12\':activarProveedor}">\r\n    <div *ngIf="vistaFormulario">\r\n      <app-proveedor-formulario [parametros]="parametrosFormulario" (cerrarFormularioProveedor)="cerrarFormularioProveedor($event)"\r\n        (activarEstado)="cambiarEstadoActivar($event)"></app-proveedor-formulario>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},rFGH:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <b>\r\n          <i class="{{constantes.ICON_FILTRAR}}"></i> {{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmNumeraciones=\'ngForm\' name="frmNumeraciones" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm  mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}} )</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_PERIODO}}</b>\r\n              &nbsp;\r\n              <a (click)="listarPeriodos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_PERIODOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaPeriodos" name="periodo" [showClear]="true" [(ngModel)]="periodoSeleccionado"\r\n              optionLabel="perDetalle" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}"\r\n              class="mousetrap">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{periodoSeleccionado?.perDetalle}}\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.perDetalle}}</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_MOTIVO}}</b>\r\n              &nbsp;\r\n              <a (click)="listarMotivosVenta()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaConsumoMotivo" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n              optionLabel="cmDetalle" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" class="mousetrap">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{motivoSeleccionado?.cmDetalle}} ({{motivoSeleccionado?.cmCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.cmDetalle}} ({{fs.value.cmCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarNumeraciones()" title="{{constantes.ATAJO_BUSCAR}}">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultadoNumeracionConsumo?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_NUMERACION_CONSUMOS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirNumeracionConsumo" (click)="imprimirNumeracionConsumo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarNumeracionConsumo" (click)="exportarNumeracionConsumo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirNumeracionConsumo" (click)="imprimirNumeracionConsumo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarNumeracionConsumo" (click)="exportarNumeracionConsumo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--listado de numeracion consumos--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoNumeracionConsumo" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()"\r\n          (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n        \x3c!--end listado de numeracion consumos--\x3e\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},rfiV:function(t,e){t.exports='<div class="row" *ngIf="showIndex">\r\n    <div class="col-lg-5 col-md-4 pt-5">\r\n        <h1 class="text-center">Lo m\xe1s usado:</h1>\r\n        <div class="form-group form-group-sm text-center" *ngFor="let acceso of listaAccesoRapido">\r\n            <a routerLink="{{acceso.url}}" *ngIf="acceso.mostrar">\r\n                <button type="button" class="btn btn-primary btn-ancho-250"> {{acceso.item}}</button>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class="col-lg-7 col-md-8">\r\n        <div class="text-center">\r\n            <img src="assets/images/inventario.png" class="img-thumbnail">\r\n        </div>\r\n    </div>\r\n</div>\r\n<router-outlet></router-outlet>'},ribN:function(t,e){t.exports='<div class="row" *ngIf="!mostrarKardex">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <b>\r\n          <i class="{{constantes.ICON_FILTRAR}}"></i> {{constantes.TITULO_FILTROS}}\r\n        </b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmConsolidadoProductos=\'ngForm\' name="frmConsolidadoProductos" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n              optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarBodegas()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_CLIENTE}}</strong>\r\n            </label>\r\n            <input id="clienteCodigo" name="clienteCodigo" class="form-control form-control-sm text-uppercase mousetrap"\r\n              type="text" (blur)="validarCliente()" (keydown)="buscarCliente($event);" [(ngModel)]="cliente.cliCodigo"\r\n              maxlength="500" placeholder="{{constantes.TAG_OPCIONAL}}" (ngModelChange)="limpiarResultado()"\r\n              appUppercase [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="iniFecha" name="iniFecha" id="fechaDesde" [(ngModel)]="fechaInicio" (ngModelChange)="limpiarResultado()"\r\n              [maxDate]="fechaFin" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true" [maxDate]="fechaFin"\r\n              [appMaxDate]="fechaFin"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="finFecha" name="finFecha" [(ngModel)]="fechaFin" (ngModelChange)="limpiarResultado();"\r\n              [minDate]="fechaInicio" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true" [minDate]="fechaInicio"\r\n              [appMinDate]="fechaInicio" [maxDate]="fechaActual" [appMaxDate]="fechaActual"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarConsolidadoProductos(frmConsolidadoProductos)">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_PRODUCTOS_VENTA_CONSOLIDANDO_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirConsProdVenta" (click)="imprimirConsProdVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarConsProdVenta" (click)="exportarConsProdVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirConsProdVenta" (click)="imprimirConsProdVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarConsProdVenta" (click)="exportarConsProdVenta()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n          (rowSelected)="ventaConsolSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridSizeChanged)="redimencionarColumnas()" [frameworkComponents]="frameworkComponents" (cellDoubleClicked)="consultarKardex()"\r\n          (contextmenu)="!this.isModal?$event.preventDefault():null" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="mostrarKardex && objetoDesdeFuera">\r\n  <app-kardex [objetoDesdeFuera]="objetoDesdeFuera" (cerrarKardex)="cerrarKardex($event)"></app-kardex>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},sFG0:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <b>\r\n          <span *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_EDITAR">\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i> {{tituloForm}}</span>\r\n        </b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmMotivoProforma=\'ngForm\' name="frmMotivoProforma">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscarMotivoconsumo" class="btn btn-sm btn-primary" (click)="buscarInvConsumoMotivo(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}" *ngIf="!vistaFormulario">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" *ngIf="!vistaFormulario">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarInvConsumoMotivo(true)"> {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevoMotivoConsumo" (click)="operacionesConsumosMotivo(constantes.ACCION_CREAR)"\r\n            title="{{constantes.ATAJO_NUEVO}}" *ngIf="!vistaFormulario">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultadoConsumosMotivo?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarMotivoConsumo" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_MOTIVO_CONSUMOS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoConsumo" (click)="imprimirMotivoConsumo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoConsumo" (click)="exportarMotivoConsumo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMotivoConsumo" (click)="imprimirMotivoConsumo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMotivoConsumo" (click)="exportarMotivoConsumo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoConsumosMotivo" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()"\r\n          (gridReady)="onGridReady($event)" (rowSelected)="consumoMotivoSeleccionado = $event.node.data"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n          (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)"\r\n          (cellDoubleClicked)="consumoMotivoSeleccionado = $event.node.data; operacionesConsumosMotivo(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-motivo-consumos-formulario *ngIf="vistaFormulario" [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n      (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event" (enviarAccion)="ejecutarAccion($event)">\r\n    </app-motivo-consumos-formulario>\r\n  </div>\r\n\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},t3rB:function(t,e){t.exports=""},tgn8:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activarConsumos}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i> <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frm=\'ngForm\' name="frm" autocomplete="off">\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario && parametrosFormularioConsumo">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarMotivos()" *ngIf="!vistaFormulario && !parametrosFormularioConsumo">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaMotivos" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="cmDetalle"\r\n              [disabled]="vistaFormulario && parametrosFormularioConsumo">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{motivoSeleccionado?.cmDetalle}} ( {{motivoSeleccionado?.cmCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.cmDetalle}} ({{fs.value.cmCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [maxDate]="fechaHasta" [appMaxDate]="fechaHasta"\r\n              [disabled]="vistaFormulario && parametrosFormularioConsumo"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [minDate]="fechaDesde" [appMinDate]="fechaDesde"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual" [disabled]="vistaFormulario && parametrosFormularioConsumo"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="text-right">\r\n            <button type="button" id="btnBuscarConsumos" class="btn btn-sm btn-primary" (click)="buscarConsumos(frm)"\r\n              *ngIf="!vistaFormulario && !parametrosFormularioConsumo">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activarConsumos,\'col-lg-12 col-md-12 col-sm-12\':activarConsumos}"\r\n    [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultadoConsumos?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarConsumos" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activarConsumos=!activarConsumos"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activarConsumos?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_CONSUMOS_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary" id="btnImprimirConsumos" (click)="imprimirConsumos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1 dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              id="btnInactivo">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="imprimirConsumoIndividual()">{{constantes.LABEL_IMPRIMIR_INDIVIDUAL}}</a>\r\n            </div>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarConsumos" (click)="exportarConsumos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary" id="btnImprimirConsumos" (click)="imprimirConsumos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1 dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              id="btnInactivo">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="imprimirConsumoIndividual()">{{constantes.LABEL_IMPRIMIR_INDIVIDUAL}}</a>\r\n            </div>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarConsumos" (click)="exportarConsumos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoConsumos" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarConsumoFormulario()" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" [suppressRowClickSelection]="true">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  \x3c!--FORMULARIO DE CONSUMOS--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activarConsumos,\'col-lg-12 col-md-12 col-sm-12\':activarConsumos}">\r\n    <div *ngIf="vistaFormulario && parametrosFormularioConsumo">\r\n      <app-consumo-formulario [parametros]="parametrosFormularioConsumo" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarAccion)="ejecutarAccionConsumos($event)" (enviarActivar)="activarConsumos=!$event">\r\n      </app-consumo-formulario>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},tonu:function(t,e){t.exports=""},tqD0:function(t,e){t.exports=""},v4GV:function(t,e){t.exports='<div class="row" [hidden]="mostrarKardex">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i> <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frm=\'ngForm\' name="frm" autocomplete="off">\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n              optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarBodegas()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre"\r\n              optionLabel="bodNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarMotivos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaMotivos" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="vmDetalle"\r\n              optionLabel="vmDetalle">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{motivoSeleccionado?.vmDetalle}} ( {{motivoSeleccionado?.vmCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.vmDetalle}} ({{fs.value.vmCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_CLIENTE}}</strong>\r\n            </label>\r\n            <input [appFocus]="true" id="clienteCodigo" name="clienteCodigo" class="form-control form-control-sm text-uppercase mousetrap"\r\n              type="text" (blur)="validarCliente()" (keydown)="buscarCliente($event);" [(ngModel)]="cliente.cliCodigo"\r\n              maxlength="500" placeholder="{{constantes.TAG_OPCIONAL}}" (ngModelChange)="limpiarResultado()"\r\n              appUppercase [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              triggers="mouseenter:mouseleave" container="body"></span>\r\n          </div>\r\n\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [maxDate]="fechaHasta" [appMaxDate]="fechaHasta"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [minDate]="fechaDesde" [appMinDate]="fechaDesde"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="text-right">\r\n            <button type="button" id="btnBuscarVentasConsProdCob" class="btn btn-sm btn-primary" (click)="buscarVentasConsProdCob(frm)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listadoResultadoVentasConsProdCob?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarVentasConsProdCob" class="btn btn-sm btn-primary mr-2" *ngIf="!screamXS" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_PRODUCTOS_VENTA_COBERTURA_CONSOLIDANDO_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirVentasConsProdCob" (click)="imprimirVentasConsProdCob()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarVentasConsProdCob" (click)="exportarVentasConsProdCob()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirVentasConsProdCob" (click)="imprimirVentasConsProdCob()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarVentasConsProdCob" (click)="exportarVentasConsProdCob()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listadoResultadoVentasConsProdCob" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n          [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()" (rowSelected)="ventaConsProdCobSeleccionado = $event.node.data"\r\n          (cellFocused)="filaFocused($event)" (cellDoubleClicked)="ventaConsProdCobSeleccionado = $event.node.data; consultarKardex()"\r\n          [frameworkComponents]="frameworkComponents" (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="mostrarKardex && objetoDesdeFuera">\r\n  <app-kardex [objetoDesdeFuera]="objetoDesdeFuera" (cerrarKardex)="cerrarKardex($event)"></app-kardex>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},y8Xp:function(t,e){t.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmMotivoProformaDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n        title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarMotivoProforma" (click)="insertarProformaMotivo(frmMotivoProformaDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary  mr-1" id="btnGuardarMotivoProforma" (click)="actualizarProformaMotivo(frmMotivoProformaDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarMotivoProforma" (click)="cancelar()"\r\n          title="{{constantes.ATAJO_CANCELAR}}" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button class="btn btn-sm btn-default mr-1" id="btnCancelarMotivoProforma" type="button" (click)="cancelar()"\r\n          title="{{constantes.ATAJO_CANCELAR}}" *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario de Motivo de Consumo--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseMotivoInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseMotivoInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CODIGO}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="invProformaMotivoTO.pmCodigo"\r\n                pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                class="form-control input-sm mousetrap text-uppercase" required maxlength="20" appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body"></span>\r\n            </div>\r\n            \x3c!--DETALLE--\x3e\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap text-uppercase"\r\n                name="detalle" maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invProformaMotivoTO.pmDetalle"\r\n                appUppercase id="detalle" required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>'},yoU0:function(t,e){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activarCompras}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i> <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frm=\'ngForm\' name="frm" autocomplete="off">\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarMotivos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaMotivos" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="cmDetalle">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{motivoSeleccionado?.cmDetalle}} ( {{motivoSeleccionado?.cmCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.cmDetalle}} ({{fs.value.cmCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_TIPO_COMPROBANTES}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarTiposComprobante()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_TIPOS_COMPROBANTES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaTipoComprobante" name="tipoComprobante" [showClear]="true" [(ngModel)]="tipoComprobanteSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="tcDescripcion">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{tipoComprobanteSeleccionado?.tcCodigo}} ( {{tipoComprobanteSeleccionado?.tcDescripcion}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.tcCodigo}} ({{fs.value.tcDescripcion}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_PROVEEDOR}}</strong>\r\n            </label>\r\n            <input [appFocus]="true" id="provCodigo" name="provCodigo" [(ngModel)]="proveedor.provCodigo" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n              pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n              maxlength="500" (keydown)="buscarProveedor($event)" (blur)="validarProveedor()" appUppercase [ngbTooltip]="proveedor.provRazonSocial ? proveedor.provRazonSocial : null">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [maxDate]="fechaHasta" [appMaxDate]="fechaHasta"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [minDate]="fechaDesde" [appMinDate]="fechaDesde"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="text-right">\r\n            <button type="button" id="btnBuscarCompras" class="btn btn-sm btn-primary" (click)="buscarCompras(frm)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activarCompras,\'col-lg-12 col-md-12 col-sm-12\':activarCompras}" [hidden] = "parametrosCompra">\r\n    <div class="card m-0" *ngIf="listaResultadoCompras?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarCompras" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activarCompras=!activarCompras"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activarCompras?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_COMPRAS_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirCompras" (click)="imprimirCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarCompras" (click)="exportarCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirCompras" (click)="imprimirCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarCompras" (click)="exportarCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoCompras" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [frameworkComponents]="frameworkComponents" [rowSelection]="rowSelection" [enableColResize]="true"\r\n          [components]="components" [context]="context" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (rowSelected)="comprasSeleccionado = $event.node.data"\r\n          (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (cellDoubleClicked)="compraSeleccionada = $event.node.data;consultarCompra()">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activarCompras,\'col-lg-12 col-md-12 col-sm-12\':activarCompras}">\r\n    <div *ngIf="parametrosCompra">\r\n      <app-compras-formulario [data]="parametrosCompra" [empresaSeleccionada]="empresaSeleccionada" (enviarAccion)="ejecutarAccionCompras($event)"></app-compras-formulario>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},z1Vu:function(t,e){t.exports=""},zw5E:function(t,e){t.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmVentaMotivoDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n        title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="insertarInvVentaMotivoTO(frmVentaMotivoDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="actualizarInvVentaMotivoTO(frmVentaMotivoDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelar" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button class="btn btn-sm btn-default mr-1" type="button" id="btnCancelar" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario Motivo Venta--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseMotivoCompraInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseMotivoCompraInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO --\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CODIGO}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="invVentaMotivoTO.vmCodigo"\r\n                pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                class="form-control form-control-sm mousetrap text-uppercase" appUppercase required maxlength="20">\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body"></span>\r\n            </div>\r\n            \x3c!--DETALLE--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap text-uppercase"\r\n                appUppercase name="detalle" maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [(ngModel)]="invVentaMotivoTO.vmDetalle" id="detalle" required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n            \x3c!--TIPO COMPROBANTE--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_TIPO_COMPROBANTES}}</b>\r\n                &nbsp;\r\n                <a (click)="listarTipos()" *ngIf="accion !== constantes.ACCION_CONSULTAR">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_TIPOS_COMPROBANTES}}"\r\n                    container="body"></span>\r\n                </a>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{tipoSeleccionado.tipDetalle}} ({{tipoSeleccionado.tipCodigo}})</label>\r\n              <select class="form-control form-control-sm mousetrap" name="ts" required [(ngModel)]="tipoSeleccionado"\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="ts" *ngFor="let ts of listaTipos">{{ts.tipDetalle}} ({{ts.tipCodigo}})</option>\r\n              </select>\r\n            </div>\r\n            \x3c!--FORMA CONTABILIZAR--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FORMA_CONTABILIZAR}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{formaContabilizarSeleccionado}} </label>\r\n              <select class="form-control form-control-sm mousetrap" name="fc" required [(ngModel)]="formaContabilizarSeleccionado"\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option [ngValue]="fc" *ngFor="let fc of listaFormaContabilizar">{{fc}}</option>\r\n              </select>\r\n            </div>\r\n            \x3c!--FORMA IMPRIMIR--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FORMA_IMPRIMIR}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{formaImprimirSeleccionado}} </label>\r\n              <select class="form-control form-control-sm mousetrap" name="fi" required [(ngModel)]="formaImprimirSeleccionado"\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option [ngValue]="fi" *ngFor="let fi of listaFormaImprimir">{{fi}}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'}}]);