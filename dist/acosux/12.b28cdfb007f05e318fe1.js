(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"0Fu4":function(e,t){e.exports=""},"0bhu":function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset [disabled]="vistaFormulario">\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="objetoContableEnviar">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()" *ngIf="!objetoContableEnviar && !vistaFormulario">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n              [disabled]="objetoContableEnviar || vistaFormulario">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--CLIENTE--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CLIENTE}}</b>\r\n            </label>\r\n            <input [appFocus]="true" id="codCliente" name="txtCodigoCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n              type="text" (blur)="validarCliente()" (keydown)="limpiarResultado();buscarCliente($event);" [(ngModel)]="cliente.invClientePK.cliCodigo"\r\n              placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null"\r\n              [disabled]="objetoContableEnviar">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave" *ngIf="!objetoContableEnviar && !vistaFormulario"></span>\r\n          </div>\r\n          \x3c!--FECHA DESDE--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaDesde" class="mousetrap" name="fechaDesde" [(ngModel)]="fechaDesde"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true"\r\n              [maxDate]="fechaHasta ? fechaHasta : (fechaActual)" [appMaxDate]="fechaHasta" [disabled]="objetoContableEnviar"></p-calendar>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta" [maxDate]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [minDate]="fechaDesde"\r\n              [disabled]="objetoContableEnviar"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarFunCobrosDetalleTO(frmCobros)"\r\n                title="{{constantes.ATAJO_BUSCAR}}" *ngIf="!objetoContableEnviar">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="objetoContableEnviar">\r\n    <div [hidden]="vistaFormulario" class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_DETALLE_DE_COBROS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" class="btn btn-sm btn-primary mr" id="btnImprimir" (click)="imprimirCarFunCobrosDetalle()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split mr-1"\r\n                data-toggle="dropdown">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="imprimirListaCobrosPorLote()">\r\n                  {{constantes.LABEL_IMPRIMIR_LOTE}}</a>\r\n              </div>\r\n            </div>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarFunCobrosDetalle()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarCobros()"\r\n          [rowClassRules]="rowClassRules">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n    <div *ngIf="vistaFormulario">\r\n      <app-cobro-formulario [parametrosFormulario]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarAccion)="ejecutarAccion($event)"></app-cobro-formulario>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="objetoContableEnviar">\r\n    <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n      (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"5j/p":function(e,t){e.exports=""},"8ESZ":function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmPagos=\'ngForm\' name="frmPagos">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--PROVEEDOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_PROVEEDOR}}</strong>\r\n            </label>\r\n            <input [appFocus]="true" id="provCodigo" name="provCodigo" [(ngModel)]="proveedor.provCodigo" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n              pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n              maxlength="500" (keydown)="limpiarResultado();buscarProveedor($event)" (blur)="validarProveedor()"\r\n              [ngbTooltip]="proveedor.provRazonSocial ? proveedor.provRazonSocial : null" appUppercase>\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n          \x3c!--FECHA DESDE--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="iniFecha" name="iniFecha" id="fechaDesde" [(ngModel)]="fechaInicio" (ngModelChange)="limpiarResultado()"\r\n              [maxDate]="fechaFin" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMaxDate]="fechaFin"\r\n              [required]="true"></p-calendar>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="finFecha" name="finFecha" [(ngModel)]="fechaFin" (ngModelChange)="limpiarResultado()"\r\n              [minDate]="fechaInicio" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMinDate]="fechaInicio"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual" [required]="true"></p-calendar>\r\n          </div>\r\n        </form>\r\n        \x3c!--BOTON BUSCAR--\x3e\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCuentasPorPagarListadoCompras()">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n            {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_PAGOS_LISTADO_COMPRAS}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCuentasPorPagarListadoCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCuentasPorPagarListadoCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCuentasPorPagarListadoCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCuentasPorPagarListadoCompras()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (cellFocused)="filaFocused($event)" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"8h7b":function(e,t){e.exports=""},"9wFz":function(e,t){e.exports='<div class="card m-0" [hidden]="parametrosVenta || objetoContableEnviar">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{titulo}} - {{empresaSeleccionada.empNombre}}</strong>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirContable" *ngIf="accion == constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}" (click)="imprimirListaCobrosIndividual()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <button *ngIf="accion === constantes.ACCION_CREAR" type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar"\r\n          (click)="guardar(frmDatos)" placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> </span>\r\n        </button>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anular()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Reversar--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_REVERSAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_REVERSAR}}" (click)="reversar()">\r\n          <i class="{{constantes.ICON_REVERSAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n          ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n          (click)="cancelar()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirContable" *ngIf="accion == constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}" (click)="imprimirListaCobrosIndividual()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_IMPRIMIR}}</span>\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <button *ngIf="accion === constantes.ACCION_CREAR" type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar"\r\n          (click)="guardar(frmDatos)" placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anular()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n        </button>\r\n        \x3c!--Reversar--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_REVERSAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_REVERSAR}}" (click)="reversar()">\r\n          <i class="{{constantes.ICON_REVERSAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_REVERSAR}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n          (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <form #frmDatos=\'ngForm\' name="frmDatos" autocomplete="off" class="card-body p-1">\r\n    <fieldset [disabled]="accion !== constantes.ACCION_CREAR">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_CLIENTE}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseClienteInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseClienteInfo">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CLIENTE}}</b>\r\n              </label>\r\n              <input type="text" id="cliente" name="cliente" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="cobro.cliCodigo"\r\n                class="form-control form-control-sm text-uppercase mousetrap" (keydown)="buscarCliente($event)" (blur)="validarCliente()"\r\n                [appFocus]="accion === constantes.ACCION_CREAR" required appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback mr-3"\r\n                placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_EMPLEADO}}" triggers="mouseenter:mouseleave"\r\n                container="body"></span>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-8">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_NOMBRE}}</b>\r\n              </label>\r\n              <input type="text" name="nombreCliente" [(ngModel)]="cobro.conApellidosNombres" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_RUC_ID}}</b>\r\n              </label>\r\n              <input type="text" name="ruc" [(ngModel)]="ruc" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-8">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DIRECCION}}</b>\r\n              </label>\r\n              <input type="text" name="direccion" [(ngModel)]="direccion" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseDatos"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseDatos">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FECHA}}</b>\r\n              </label>\r\n              <p-calendar class="mousetrap calendar" inputId="fecha" name="fecha" [inputStyleClass]="isFechaValido == false ? \'has-error \' : \'\' "\r\n                [(ngModel)]="fechaActual" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                [required]="true" (ngModelChange)="validarFechaPorPeriodo()" placeholder="DD/MM/YYYY"></p-calendar>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-8">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_OBSERVACION}}</b>\r\n              </label>\r\n              <textarea type="text" name="observaciones" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="observaciones"\r\n                appUppercase class="form-control form-control-sm text-uppercase mousetrap"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n    <div class="card mb-1" *ngIf="codigoCliente && seEncontraronResultados">\r\n      <div class="card-header">\r\n        <b> {{constantes.TAG_DETALLE_DOCUMENTOS_POR_COBRAR}}</b>\r\n        <div class="card-header-actions">\r\n          <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseDG"\r\n            aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n            <i class="fa fa-minus"></i>\r\n          </a>\r\n        </div>\r\n      </div>\r\n      <div class="collapse show" id="collapseDG">\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%;" [gridAutoHeight]="true" class="ag-theme-balham"\r\n          [rowData]="listadoCobros" [columnDefs]="columnDefsSelected" [enableSorting]="true" [rowSelection]="rowSelection"\r\n          [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n          [animateRows]="true" [overlayNoRowsTemplate]="noData" [suppressClickEdit]=true (gridReady)="onGridReady($event)"\r\n          (rowSelected)="ventaSeleccionada = $event.node.data" (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()"\r\n          (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (cellEditingStopped)="alCambiarValorDeCelda($event)" [stopEditingWhenGridLosesFocus]="true"\r\n          [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()" (cellDoubleClicked)="ventaSeleccionada = $event.node.data;consultarVenta()">\r\n        </ag-grid-angular>\r\n      </div>\r\n      <div class="card-footer">\r\n        <div class="card-header-actions mr-3">\r\n          <h2>{{constantes.TAG_TOTAL}} : {{totales.cobro | number:\'1.2-2\'}}</h2>\r\n        </div>\r\n      </div>\r\n      <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n    </div>\r\n    <div class="row m-0 p-0" *ngIf="codigoCliente && seEncontraronResultados">\r\n      \x3c!--formas de cobro--\x3e\r\n      <div style="padding: 0!important;" [ngClass]="{\'col-md-7 p-0\':listadoCobrosAnticipos?.length>0,\'col-md-12 p-0\':!listadoCobrosAnticipos?.length>0}">\r\n        <app-cobro-forma-detalle [listaFormaPago]="listaFormaPago" [listadoDeFormasDeCobro]="listadoDeFormasDeCobro"\r\n          [bancos]="bancos" [totales]="totales" [configAutonumericReales]="configAutonumericReales" [accion]="accion"\r\n          [gridApi]="gridApiForma" [fechaActual]="fechaActual"></app-cobro-forma-detalle>\r\n      </div>\r\n      \x3c!--Anticipos--\x3e\r\n      <div class="col-md-5 pr-0" *ngIf="listadoCobrosAnticipos?.length>0">\r\n        <app-cobro-anticipo-detalle [totales]="totales" [configAutonumericReales]="configAutonumericReales"\r\n          [listadoCobrosAnticipos]="listadoCobrosAnticipos" [accion]="accion" (enviarAccion)="ejecutarAccion($event)"\r\n          [gridApi]="gridApiAnticipo"></app-cobro-anticipo-detalle>\r\n      </div>\r\n    </div>\r\n  </form>\r\n  <div class="card-footer" *ngIf="codigoCliente && seEncontraronResultados">\r\n    <div class="card-header-actions mr-3">\r\n      <h2>{{constantes.TAG_DIFERENCIA}} : {{totales.diferencia | number:\'1.2-2\'}}</h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="parametrosVenta">\r\n  <app-venta-formulario [parametros]="parametrosVenta" [empresaSeleccionada]="empresaSeleccionada" [tipoDocumento]="tipoDocumento"\r\n    (enviarAccion)="ejecutarAccion($event)"></app-venta-formulario>\r\n</div>\r\n<div *ngIf="objetoContableEnviar">\r\n  <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n    (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},CsZV:function(e,t){e.exports='<div class="row" *ngIf="!mostrarKardex">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmPagos=\'ngForm\' name="frmPagos">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="objetoContableEnviar">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()" *ngIf="!objetoContableEnviar">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n              [disabled]="objetoContableEnviar">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--PROVEEDOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_PROVEEDOR}}</strong>\r\n            </label>\r\n            <input [appFocus]="true" id="provCodigo" name="provCodigo" [(ngModel)]="proveedor.provCodigo" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n              pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n              maxlength="500" (keydown)="limpiarResultado();buscarProveedor($event)" (blur)="validarProveedor()"\r\n              [ngbTooltip]="proveedor.provRazonSocial ? proveedor.provRazonSocial : null" appUppercase [disabled]="objetoContableEnviar">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave" *ngIf="!objetoContableEnviar"></span>\r\n          </div>\r\n          \x3c!--FECHA DESDE--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="iniFecha" name="iniFecha" id="fechaDesde" [(ngModel)]="fechaInicio" (ngModelChange)="limpiarResultado()"\r\n              [maxDate]="fechaFin" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMaxDate]="fechaFin"\r\n              [required]="true" [disabled]="objetoContableEnviar"></p-calendar>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="finFecha" name="finFecha" [(ngModel)]="fechaFin" (ngModelChange)="limpiarResultado()"\r\n              [minDate]="fechaInicio" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMinDate]="fechaInicio"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual" [required]="true" [disabled]="objetoContableEnviar"></p-calendar>\r\n          </div>\r\n        </form>\r\n        \x3c!--BOTON BUSCAR--\x3e\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarFunPagosDetalle()"\r\n            *ngIf="!objetoContableEnviar">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n            {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="objetoContableEnviar">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_PAGOS_DETALLE_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarFunPagosDetalle()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarFunPagosDetalle()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarFunPagosDetalle()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarFunPagosDetalle()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (cellFocused)="filaFocused($event)" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarPagos()"\r\n          (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n          (gridSizeChanged)="redimencionarColumnas()" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="objetoContableEnviar">\r\n\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},EmYL:function(e,t){e.exports='<div class="card m-0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{titulo}} - {{empresaSeleccionada.empNombre}}</strong>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirContable" *ngIf="accion == constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}" (click)="imprimirContable()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <button *ngIf="accion === constantes.ACCION_CREAR" type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar"\r\n          (click)="guardar(frmDatos)" placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> </span>\r\n        </button>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anular()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Reversar--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_REVERSAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_REVERSAR}}" (click)="reversar()">\r\n          <i class="{{constantes.ICON_REVERSAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n          ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n          (click)="cancelar()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirContable" *ngIf="accion == constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}" (click)="imprimirContable()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_IMPRIMIR}}</span>\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <button *ngIf="accion === constantes.ACCION_CREAR" type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar"\r\n          (click)="guardar(frmDatos)" placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anular()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n        </button>\r\n        \x3c!--Reversar--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_REVERSAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_REVERSAR}}" (click)="reversar()">\r\n          <i class="{{constantes.ICON_REVERSAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_REVERSAR}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n          (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <form #frmDatos=\'ngForm\' name="frmDatos" autocomplete="off" class="card-body p-1">\r\n    <fieldset [disabled]="accion !== constantes.ACCION_CREAR">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_PROVEEDOR}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseClienteInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseClienteInfo">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_PROVEEDOR}}</b>\r\n              </label>\r\n              <input type="text" id="proveedor" name="proveedor" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [(ngModel)]="pagoAnticipo.provCodigo" class="form-control form-control-sm text-uppercase mousetrap"\r\n                (keydown)="buscarProveedor($event)" (blur)="validarProveedor()" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                required appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback mr-3"\r\n                placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_EMPLEADO}}" triggers="mouseenter:mouseleave"\r\n                container="body"></span>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-8">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_NOMBRE}}</b>\r\n              </label>\r\n              <input type="text" name="nombreProveedor" [(ngModel)]="nombreProveedor" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-12">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DIRECCION}}</b>\r\n              </label>\r\n              <input type="text" name="direccion" [(ngModel)]="direccion" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseDG"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseDG">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FECHA}}</b>\r\n              </label>\r\n              <p-calendar class="mousetrap calendar" inputId="fecha" name="fecha" [inputStyleClass]="isFechaValido == false ? \'has-error \' : \'\' "\r\n                [(ngModel)]="fechaActual" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                [required]="true" (ngModelChange)="validarFechaPorPeriodo()" placeholder="DD/MM/YYYY"></p-calendar>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4" *ngIf="accion === constantes.ACCION_CREAR">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CENTRO_PRODUCCION}}</b>\r\n              </label>\r\n              <select class="form-control form-control-sm text-uppercase  mousetrap" name="sector" required [(ngModel)]="sectorSeleccionado">\r\n                <option selected disabled value=null>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="sector" *ngFor="let sector of sectores">\r\n                  {{sector.secNombre}} ({{sector.secCodigo}})\r\n                </option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4" *ngIf="accion !== constantes.ACCION_CREAR">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CENTRO_PRODUCCION}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm input-label">{{sectorSeleccionado?.secNombre}}\r\n                ({{sectorSeleccionado?.secCodigo}})</label>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FORMA_PAGO}}</b>\r\n              </label>\r\n              <select class="form-control form-control-sm text-uppercase mousetrap" name="formapago" required\r\n                [(ngModel)]="fpSeleccionada" (ngModelChange)="validarDocumento()">\r\n                <option selected disabled value=null>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="formapago" *ngFor="let formapago of listaFormaPago">\r\n                  {{formapago.fpDetalle}}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_VALOR}}</b>\r\n              </label>\r\n              <input type="text" name="valor" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="pagoAnticipo.antValor"\r\n                class="form-control form-control-sm text-uppercase text-right mousetrap" [appAutonumeric]="configAutonumericReales"\r\n                [appAutonumericValue]="pagoAnticipo.antValor" value="{{pagoAnticipo.antValor}}" [appMinNumber]="0.01"\r\n                required>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DOCUMENTO}}</b>\r\n              </label>\r\n              <input type="text" name="documento" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="documento"\r\n                [ngClass]="{ \'has-error\':!documentoValido}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                maxlength="100" (blur)="validarDocumento()">\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-12">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_OBSERVACION}}</b>\r\n              </label>\r\n              <textarea type="text" name="observaciones" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="observaciones"\r\n                appUppercase class="form-control form-control-sm text-uppercase mousetrap"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </form>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},GvSS:function(e,t){e.exports=""},H2p8:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmDatos=\'ngForm\' name="frmDatos" class="card m-0 mb-2">\r\n      <fieldset [disabled]="vistaFormulario || mostrarAccionesContabilidad">\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--Empresa--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [appFocus]="true" class="form-control form-control-sm mousetrap" name="empresa" required\r\n              [(ngModel)]="empresaSeleccionada" (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CENTRO_PRODUCCION}}</b>\r\n              &nbsp;\r\n              <a (click)="listarSectores()" *ngIf="!vistaFormulario && !mostrarAccionesContabilidad">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown class="text-uppercase mousetrap" [options]="listadoSectores" name="sector" [showClear]="true"\r\n              [(ngModel)]="sectorSeleccionado" optionLabel="secNombre" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}"\r\n              [disabled]="vistaFormulario || mostrarAccionesContabilidad">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--Proveedor--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_PROVEEDOR}}</b>\r\n            </label>\r\n            <input [appFocus]="true" id="codProveedor" name="codProveedor" class="form-control form-control-sm mousetrap text-uppercase"\r\n              type="text" (blur)="validarProveedor()" (keydown)="limpiarResultado();buscarProveedor($event);"\r\n              [(ngModel)]="proveedor.invProveedorPK.provCodigo" placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase\r\n              [ngbTooltip]="proveedor.provRazonSocial ? proveedor.provRazonSocial : null" [disabled]="objetoContableEnviar">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave" *ngIf="!objetoContableEnviar"></span>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [disabled]="objetoContableEnviar"\r\n              placeholder="DD/MM/YYYY"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <button type="button" id="btnBuscar" class="btn btn-sm btn-primary mr-1" (click)="!vistaFormulario && !mostrarAccionesContabilidad ? listar() : null"\r\n              title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button *ngIf="!esConsulta" class="btn btn-sm btn-primary" id="btnNuevo" type="button" (click)="!vistaFormulario && !mostrarAccionesContabilidad ? nuevo() : null"\r\n              title="{{constantes.ATAJO_NUEVO}}">\r\n              <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div *ngIf="vistaFormulario">\r\n      <app-pago-anticipos-formulario [parametrosFormulario]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarAccion)="ejecutarAccion($event)"></app-pago-anticipos-formulario>\r\n    </div>\r\n    <div [hidden]="vistaFormulario">\r\n      <div *ngIf="mostrarAccionesContabilidad">\r\n        <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n          (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n      </div>\r\n      <div class="card m-0" [hidden]="mostrarAccionesContabilidad" *ngIf="listadoPagosAnticipo?.length>0">\r\n        <div class="card-header p-1">\r\n          <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar"\r\n            type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n            <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n          </button>\r\n          <b> {{constantes.CARTERA_LISTADO_ANTICIPO_PROVEEDORES}}</b>\r\n          <div class="card-header-actions">\r\n            <div class="btn-group d-lg-none">\r\n              \x3c!--Imprimir--\x3e\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimir()" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"></span>\r\n              </button>\r\n              \x3c!--EXPORTAR--\x3e\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportar()" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"></span>\r\n              </button>\r\n            </div>\r\n            <div class="btn-group d-none d-lg-block">\r\n              \x3c!--Imprimir--\x3e\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimir()" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n              </button>\r\n              \x3c!--EXPORTAR--\x3e\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportar(false)"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="card-body p-0">\r\n          <div class="row">\r\n            <div class="col-sm-5 col-md-6">\r\n              <div class="input-group p-1">\r\n                <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                  size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                  size="100">\r\n                <div class="input-group-append">\r\n                  <span class="input-group-text">\r\n                    <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-7 col-md-6">\r\n              <div class="float-right pr-1">\r\n                <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                  maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n            [rowData]="listadoPagosAnticipo" [columnDefs]="columnDefsSelected" [enableSorting]="true" (gridSizeChanged)="redimensionarColumnas()"\r\n            [rowSelection]="rowSelection" [enableColResize]="true" [context]="context" (gridReady)="onGridReady($event)"\r\n            (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n            (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (cellFocused)="filaFocused($event)"\r\n            (cellDoubleClicked)="objetoSeleccionado = $event.node.data;verContable()">\r\n          </ag-grid-angular>\r\n        </div>\r\n        <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"K88/":function(e,t){e.exports='<div class="row">\r\n  \x3c!--Formulario--\x3e\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmFormaPago=\'ngForm\' name="frmFormaPago">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [appFocus]="true" class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscarFp" class="btn btn-sm btn-primary" (click)="buscarFormasPago(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}" [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              [disabled]="vistaFormulario">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarFormasPago(true)">\r\n                {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevoFp" (click)="operacionesFormaPago(constantes.ACCION_CREAR)"\r\n            title="{{constantes.ATAJO_NUEVO}}" [disabled]="vistaFormulario">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarFp" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_FORMA_PAGO_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirFormaPago" (click)="imprimirFormaPago()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}"\r\n              [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarFormaPago" (click)="exportarFormaPago()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}"\r\n              [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirFormaPago" (click)="imprimirFormaPago()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}"\r\n              [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarFormaPago" (click)="exportarFormaPago()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}"\r\n              [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 210px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n          (cellFocused)="filaFocused($event)" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; operacionesFormaPago(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--Formulario Forma pago--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-forma-pago-formulario-cartera *ngIf="vistaFormulario" [parametros]="parametrosFormulario"\r\n      [empresaSeleccionada]="empresaSeleccionada" (enviarAccion)="ejecutarAccion($event)">\r\n    </app-forma-pago-formulario-cartera>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},MdgD:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset>\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta" [maxDate]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarCuentasPorCobrarAnticipos()"\r\n                title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_ANTICIPO_PROVEEDOR_SALDO_GENERAL_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirAnticipoProveedor()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarAnticipoProveedor()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},MfRV:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmPagos=\'ngForm\' name="frmPagos">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--PROVEEDOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_PROVEEDOR}}</strong>\r\n            </label>\r\n            <input [appFocus]="true" id="provCodigo" name="provCodigo" [(ngModel)]="proveedor.provCodigo" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n              pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n              maxlength="500" (keydown)="limpiarResultado();buscarProveedor($event)" (blur)="validarProveedor()"\r\n              [ngbTooltip]="proveedor.provRazonSocial ? proveedor.provRazonSocial : null" appUppercase>\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="finFecha" name="finFecha" [(ngModel)]="fechaFin" (ngModelChange)="limpiarResultado()"\r\n              dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [maxDate]="fechaActual" [appMaxDate]="fechaActual"\r\n              [required]="true"></p-calendar>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          \x3c!--BOTON REGRESAR--\x3e\r\n          <button type="button" class="btn btn-sm btn-default mr-1" (click)="cerrarCuentaDetallado()" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_REGRESAR}}" *ngIf="mostrarBtnCancelar" container="body" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true" id="btnRegresar"></i>\r\n            {{constantes.LABEL_REGRESAR}}\r\n          </button>\r\n          \x3c!--BOTON BUSCAR--\x3e\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarListaCuentasPorPagarDetallado()">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n            {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_CUENTAS_POR_PAGAR_DETALLADO_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarListaCuentasPorPagarDetallado()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarListaCuentasPorPagarDetallado()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarListaCuentasPorPagarDetallado()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarListaCuentasPorPagarDetallado()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (cellFocused)="filaFocused($event)" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; ejecutarAccion()">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},OdhW:function(e,t){e.exports='<div class="row" *ngIf="!mostrarKardex">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <fieldset class="card" [disabled]="vistaFormulario">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmPagos=\'ngForm\' name="frmPagos">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="objetoContableEnviar">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()" *ngIf="!objetoContableEnviar && !vistaFormulario">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown class="text-uppercase" [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n              [disabled]="objetoContableEnviar || vistaFormulario">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--PROVEEDOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_PROVEEDOR}}</strong>\r\n            </label>\r\n            <input [appFocus]="true" id="provCodigo" name="provCodigo" [(ngModel)]="proveedor.provCodigo" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n              pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n              maxlength="500" (keydown)="limpiarResultado();buscarProveedor($event)" (blur)="validarProveedor()"\r\n              [ngbTooltip]="proveedor.provRazonSocial ? proveedor.provRazonSocial : null" appUppercase [disabled]="objetoContableEnviar">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave" *ngIf="!objetoContableEnviar"></span>\r\n          </div>\r\n          \x3c!--FECHA DESDE--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="iniFecha" name="iniFecha" id="fechaDesde" [(ngModel)]="fechaInicio" (ngModelChange)="limpiarResultado()"\r\n              [maxDate]="fechaFin" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMaxDate]="fechaFin"\r\n              [required]="true" [disabled]="objetoContableEnviar"></p-calendar>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="finFecha" name="finFecha" [(ngModel)]="fechaFin" (ngModelChange)="limpiarResultado()"\r\n              [minDate]="fechaInicio" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMinDate]="fechaInicio"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual" [required]="true" [disabled]="objetoContableEnviar"></p-calendar>\r\n          </div>\r\n        </form>\r\n        \x3c!--BOTON BUSCAR--\x3e\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarFunPagos()" *ngIf="!objetoContableEnviar">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n            {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n          <button *ngIf="!esConsulta && !objetoContableEnviar" class="btn btn-sm btn-primary ml-1" id="btnNuevo" type="button"\r\n            (click)="!vistaFormulario && !objetoContableEnviar ? nuevo() : null" title="{{constantes.ATAJO_NUEVO}}">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="objetoContableEnviar">\r\n    <div *ngIf="vistaFormulario">\r\n      <app-pago-formulario [parametrosFormulario]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarAccion)="ejecutarAccion($event)"></app-pago-formulario>\r\n    </div>\r\n    <div [hidden]="vistaFormulario" class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_PAGOS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarFunPagos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarFunPagos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarFunPagos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarFunPagos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (cellFocused)="filaFocused($event)" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarPagos()"\r\n          (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n          (gridSizeChanged)="redimencionarColumnas()" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" [rowClassRules]="rowClassRules"\r\n          [suppressRowClickSelection]="true">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="objetoContableEnviar">\r\n    <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n      (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},Om8a:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset>\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--PERIODO--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_PERIODO}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarPeriodos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_PERIODOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaPeriodos" name="periodo" [(ngModel)]="periodoSeleccionado" required optionLabel="perDetalle"\r\n              (ngModelChange)="limpiarResultado()" [disabled]="mostrarContabilidaAcciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{periodoSeleccionado?.perDetalle}}\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class=""> {{fs.value.perDetalle}}</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--NUMERO COBRO--\x3e\r\n          <div class="form-group form-group-sm has-feedback pb-0">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_NRO_COBRO}}</b>\r\n            </label>\r\n            <input name="txtBusqueda" (blur)="completarCeros()" [(ngModel)]="numeroCobro" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n              class="form-control input-sm" maxlength="7" required pattern="{{constantes.PATTERN_NUMEROS}}" pKeyFilter="pint"\r\n              (keypress)="soloNumeros($event)">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_INGRESE_SOLO_NUMEROS}}"\r\n              container="body"></span>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCobrosIndividual(frmCobros)"\r\n                title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div *ngIf="vistaFormulario">\r\n      <app-cobro-formulario [parametrosFormulario]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarAccion)="ejecutarAccion($event)"></app-cobro-formulario>\r\n    </div>\r\n  </div>\r\n</div>'},Osip:function(e,t){e.exports=""},Oyc5:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset>\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--PERIODO--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_PERIODO}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarPeriodos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_PERIODOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaPeriodos" name="periodo" [(ngModel)]="periodoSeleccionado" required optionLabel="perDetalle"\r\n              (ngModelChange)="limpiarResultado()" [disabled]="mostrarContabilidaAcciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{periodoSeleccionado?.perDetalle}}\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class=""> {{fs.value.perDetalle}}</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--NUMERO COBRO--\x3e\r\n          <div class="form-group form-group-sm has-feedback pb-0">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_NRO_PAGO}}</b>\r\n            </label>\r\n            <input name="txtBusqueda" (blur)="completarCeros()" [(ngModel)]="numeroCobro" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n              class="form-control input-sm" maxlength="7" required pattern="{{constantes.PATTERN_NUMEROS}}" pKeyFilter="pint"\r\n              (keypress)="soloNumeros($event)">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_INGRESE_SOLO_NUMEROS}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarPagoIndividual(frmCobros)"\r\n                title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div *ngIf="vistaFormulario">\r\n      <app-pago-formulario [parametrosFormulario]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarAccion)="ejecutarAccion($event)"></app-pago-formulario>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},QUpq:function(e,t){e.exports=""},SNJl:function(e,t){e.exports='<div class="row" *ngIf="!vistaFormulario">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset>\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta" [maxDate]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarListaCuentasPorCobrarGeneral(frmCobros)">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_CUENTAS_POR_COBRAR_GENERAL_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarListaCuentasPorCobrarGeneral()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarReporteCarListaCuentasPorCobrarGeneral()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarCuentasCobrarDetallado()">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="vistaFormulario">\r\n  <app-cuentas-cobrar-detallado [data]="parametros" (cerrarCuentaDetallada)="cerrarCuentaDetallada($event)"></app-cuentas-cobrar-detallado>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},SQm2:function(e,t){e.exports=""},Uybw:function(e,t){e.exports='<div class="card m-0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{titulo}} - {{empresaSeleccionada.empNombre}}</strong>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirContable" *ngIf="accion == constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}" (click)="imprimirContable()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <button *ngIf="accion === constantes.ACCION_CREAR" type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar"\r\n          (click)="guardar(frmDatos)" placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> </span>\r\n        </button>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anular()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Reversar--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_REVERSAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_REVERSAR}}" (click)="reversar()">\r\n          <i class="{{constantes.ICON_REVERSAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n          ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n          (click)="cancelar()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirContable" *ngIf="accion == constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}" (click)="imprimirContable()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_IMPRIMIR}}</span>\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <button *ngIf="accion === constantes.ACCION_CREAR" type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar"\r\n          (click)="guardar(frmDatos)" placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anular()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n        </button>\r\n        \x3c!--Reversar--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_REVERSAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_REVERSAR}}" (click)="reversar()">\r\n          <i class="{{constantes.ICON_REVERSAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_REVERSAR}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n          (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <form #frmDatos=\'ngForm\' name="frmDatos" autocomplete="off" class="card-body p-1">\r\n    <fieldset [disabled]="accion !== constantes.ACCION_CREAR">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_CLIENTE}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseClienteInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseClienteInfo">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CLIENTE}}</b>\r\n              </label>\r\n              <input type="text" id="cliente" name="cliente" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="cobroAnticipo.cliCodigo"\r\n                class="form-control form-control-sm text-uppercase mousetrap" (keydown)="buscarCliente($event)" (blur)="validarCliente()"\r\n                [appFocus]="accion === constantes.ACCION_CREAR" required appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback mr-3"\r\n                placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_EMPLEADO}}" triggers="mouseenter:mouseleave"\r\n                container="body"></span>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-8">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_NOMBRE}}</b>\r\n              </label>\r\n              <input type="text" name="nombreCliente" [(ngModel)]="nombreCliente" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-12">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DIRECCION}}</b>\r\n              </label>\r\n              <input type="text" name="direccion" [(ngModel)]="direccion" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseDG"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseDG">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FECHA}}</b>\r\n              </label>\r\n              <p-calendar class="mousetrap calendar" inputId="fecha" name="fecha" [inputStyleClass]="isFechaValido == false ? \'has-error \' : \'\' "\r\n                [(ngModel)]="fechaActual" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                [required]="true" (ngModelChange)="validarFechaPorPeriodo()" placeholder="DD/MM/YYYY"></p-calendar>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4" *ngIf="accion === constantes.ACCION_CREAR">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CENTRO_PRODUCCION}}</b>\r\n              </label>\r\n              <select class="form-control form-control-sm text-uppercase  mousetrap" name="sector" required [(ngModel)]="sectorSeleccionado">\r\n                <option selected disabled value=null>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="sector" *ngFor="let sector of sectores">\r\n                  {{sector.secNombre}} ({{sector.secCodigo}})\r\n                </option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4" *ngIf="accion !== constantes.ACCION_CREAR">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CENTRO_PRODUCCION}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm input-label">{{sectorSeleccionado?.secNombre}}\r\n                ({{sectorSeleccionado?.secCodigo}})</label>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FORMA_PAGO}}</b>\r\n              </label>\r\n              <select class="form-control form-control-sm text-uppercase mousetrap" name="formapago" required\r\n                [(ngModel)]="fpSeleccionada" (ngModelChange)="validarDocumento()">\r\n                <option selected disabled value=null>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="formapago" *ngFor="let formapago of listaFormaPago">\r\n                  {{formapago.fpDetalle}}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_VALOR}}</b>\r\n              </label>\r\n              <input type="text" name="valor" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="cobroAnticipo.antValor"\r\n                class="form-control form-control-sm text-uppercase text-right mousetrap" [appAutonumeric]="configAutonumericReales"\r\n                [appAutonumericValue]="cobroAnticipo.antValor" value="{{cobroAnticipo.antValor}}" [appMinNumber]="0.01"\r\n                required>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-6">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DOCUMENTO}}</b>\r\n              </label>\r\n              <input type="text" name="documento" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="documento"\r\n                [ngClass]="{ \'has-error\':!documentoValido}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                maxlength="100" (blur)="validarDocumento()">\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-12">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_OBSERVACION}}</b>\r\n              </label>\r\n              <textarea type="text" name="observaciones" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="observaciones"\r\n                appUppercase class="form-control form-control-sm text-uppercase mousetrap"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </form>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},Yqz2:function(e,t){e.exports=""},YwrG:function(e,t){e.exports=""},dFpY:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset>\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--CLIENTE--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CLIENTE}}</b>\r\n            </label>\r\n            <input [appFocus]="true" id="codCliente" name="txtCodigoCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n              type="text" (blur)="validarCliente()" (keydown)="limpiarResultado();buscarCliente($event);" [(ngModel)]="cliente.invClientePK.cliCodigo"\r\n              placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n          \x3c!--FECHA DESDE--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaDesde" class="mousetrap" name="fechaDesde" [(ngModel)]="fechaDesde"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true"\r\n              [maxDate]="fechaHasta ? fechaHasta : (fechaActual)" [appMaxDate]="fechaHasta"></p-calendar>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta" [maxDate]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [minDate]="fechaDesde"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarFunCobrosDetalleTO(frmCobros)"\r\n                title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_COBROS_LISTADO_DE_VENTAS}}</strong>\r\n        <div class="card-header-actions">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarFunCuentasPorCobrarListadoVentas()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarFunCuentasPorCobrarListadoVentas()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},eDMi:function(e,t){e.exports='<div class="row" [hidden]="vistaFormulario">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset>\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta" [maxDate]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarListaCuentasPorPagarGeneral()">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_CUENTAS_POR_PAGAR_GENERAL_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarListaCuentasPorCobrarGeneral()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarReporteCarListaCuentasPorPagarGeneral()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarCuentasPagarDetallado()">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="vistaFormulario">\r\n  <app-cuentas-pagar-detallado [data]="parametros" (cerrarCuentaDetallada)="cerrarCuentaDetallada($event)"></app-cuentas-pagar-detallado>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},fbGi:function(e,t){e.exports=""},hjpJ:function(e,t){e.exports='<div class="row">\r\n  \x3c!--Formulario--\x3e\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmFormaPago=\'ngForm\' name="frmFormaPago">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [appFocus]="true" class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscarFc" class="btn btn-sm btn-primary" (click)="buscarFormasCobro(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}" [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              [disabled]="vistaFormulario">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarFormasCobro(true)">\r\n                {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevoFc" (click)="operacionesFormaCobro(constantes.ACCION_CREAR)"\r\n            title="{{constantes.ATAJO_NUEVO}}" [disabled]="vistaFormulario">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarFp" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_FORMA_COBRO_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirFormaCobro" (click)="imprimirFormaCobro()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}"\r\n              [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarFormaCobro" (click)="exportarFormaCobro()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}"\r\n              [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirFormaCobro" (click)="imprimirFormaCobro()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}"\r\n              [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarFormaCobro" (click)="exportarFormaCobro()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}"\r\n              [disabled]="vistaFormulario">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 210px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n          (cellFocused)="filaFocused($event)" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; operacionesFormaCobro(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--Formulario Forma pago--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-forma-cobro-formulario-cartera *ngIf="vistaFormulario" [parametros]="parametrosFormulario"\r\n      [empresaSeleccionada]="empresaSeleccionada" (enviarAccion)="ejecutarAccion($event)">\r\n    </app-forma-cobro-formulario-cartera>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},hwkZ:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset [disabled]="vistaFormulario">\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="objetoContableEnviar">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()" *ngIf="!objetoContableEnviar && !vistaFormulario">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" class="text-uppercase" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n              [disabled]="objetoContableEnviar || vistaFormulario">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--CLIENTE--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CLIENTE}}</b>\r\n            </label>\r\n            <input [appFocus]="true" id="codCliente" name="txtCodigoCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n              type="text" (blur)="validarCliente()" (keydown)="limpiarResultado();buscarCliente($event);" [(ngModel)]="cliente.invClientePK.cliCodigo"\r\n              placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null"\r\n              [disabled]="objetoContableEnviar">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave" *ngIf="!objetoContableEnviar && !vistaFormulario"></span>\r\n          </div>\r\n          \x3c!--FECHA DESDE--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaDesde" class="mousetrap" name="fechaDesde" [(ngModel)]="fechaDesde"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true"\r\n              [maxDate]="fechaHasta ? fechaHasta : (fechaActual)" [appMaxDate]="fechaHasta" [disabled]="objetoContableEnviar"></p-calendar>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta" [maxDate]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [minDate]="fechaDesde"\r\n              [disabled]="objetoContableEnviar"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarFunCobrosTO(frmCobros)"\r\n                title="{{constantes.ATAJO_BUSCAR}}" *ngIf="!objetoContableEnviar">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n            </div>\r\n            <button *ngIf="!esConsulta && !objetoContableEnviar" class="btn btn-sm btn-primary" id="btnNuevo" type="button"\r\n              (click)="!vistaFormulario && !objetoContableEnviar ? nuevo() : null" title="{{constantes.ATAJO_NUEVO}}">\r\n              <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="objetoContableEnviar">\r\n    <div *ngIf="vistaFormulario">\r\n      <app-cobro-formulario [parametrosFormulario]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarAccion)="ejecutarAccion($event)"></app-cobro-formulario>\r\n    </div>\r\n    <div [hidden]="vistaFormulario" class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_LISTADO_DE_COBROS}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnImprimir" (click)="imprimirCarFunCobrosTO()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split mr-1"\r\n                data-toggle="dropdown">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="imprimirListaCobrosPorLote()">\r\n                  {{constantes.LABEL_IMPRIMIR_LOTE}}</a>\r\n              </div>\r\n            </div>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarFunCobrosTO()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarCobros()"\r\n          [rowClassRules]="rowClassRules" [suppressRowClickSelection]="true">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="objetoContableEnviar">\r\n    <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n      (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},i5wg:function(e,t){e.exports='<div class="card mb-1">\r\n  <div class="card-header">\r\n    <b> {{constantes.INVENTARIO_FORMA_COBRO}}</b>\r\n    <div class="card-header-actions">\r\n      <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseFP"\r\n        aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n        <i class="fa fa-minus"></i>\r\n      </a>\r\n    </div>\r\n  </div>\r\n  <div class="collapse show" id="collapseFP">\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%;" [gridAutoHeight]="true" class="ag-theme-balham" [rowData]="listadoDeFormasDeCobro"\r\n      [columnDefs]="columnDefsSelected" [enableSorting]="true" [rowSelection]="rowSelection" [enableColResize]="true"\r\n      [components]="components" [context]="context" [frameworkComponents]="frameworkComponents" [animateRows]="true"\r\n      [suppressClickEdit]=true (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n      (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()" (contextmenu)="$event.preventDefault()"\r\n      (cellContextMenu)="mostrarContextMenu($event.data,$event.rowIndex, $event.event)" (cellEditingStopped)="alCambiarValorDeCelda($event)"\r\n      [stopEditingWhenGridLosesFocus]="true" [overlayNoRowsTemplate]="noData" [suppressDragLeaveHidesColumns]="true"\r\n      (gridSizeChanged)="redimensionarColumnas()">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <div class="card-footer">\r\n    <div class="card-header-actions mr-3">\r\n      <h2>{{constantes.TAG_TOTAL}} : {{totales.forma | number:\'1.2-2\'}}</h2>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>'},k77S:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset>\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--CLIENTE--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CLIENTE}}</b>\r\n            </label>\r\n            <input [appFocus]="true" id="codCliente" name="txtCodigoCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n              type="text" (blur)="validarCliente()" (keydown)="limpiarResultado();buscarCliente($event);" [(ngModel)]="cliente.invClientePK.cliCodigo"\r\n              placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n          \x3c!--FECHA DESDE--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaDesde" class="mousetrap" name="fechaDesde" [(ngModel)]="fechaDesde"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true"\r\n              [maxDate]="fechaHasta ? fechaHasta : (fechaActual)" [appMaxDate]="fechaHasta"></p-calendar>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta" [maxDate]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [minDate]="fechaDesde"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarListaMayorAuxiliarClienteProveedor(frmCobros)"\r\n                title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_COBROS_MAYOR_AUXILIAR_CLIENTE_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarListaMayorAuxiliarClienteProveedor()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarListaMayorAuxiliarClienteProveedor()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    \x3c!-- app cobros--\x3e\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},lrbC:function(e,t){e.exports=""},"ohg+":function(e,t){e.exports='<div class="row" [hidden]="vistaFormulario">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset>\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta" [maxDate]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarCuentasPorCobrarAnticipos()"\r\n                title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_ANTICIPO_CLIENTE_SALDO_GENERAL_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCuentasPorCobrarAnticipos()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCuentasPorCobrarAnticiposo()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarAnticipoSaldoDetallado()">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="vistaFormulario">\r\n  <app-cobros-anticipos [data]="parametros" (cerrarAnticipoDetallado)="cerrarAnticipoDetallado($event)"></app-cobros-anticipos>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},pz2k:function(e,t){e.exports=""},"q/A8":function(e,t){e.exports=""},q0Mi:function(e,t){e.exports=""},qG66:function(e,t){e.exports='<div class="card mb-1">\r\n  <div class="card-header">\r\n    <b> {{constantes.TAG_ANTICIPOS}}</b>\r\n    <div class="card-header-actions">\r\n      <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseAn"\r\n        aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n        <i class="fa fa-minus"></i>\r\n      </a>\r\n    </div>\r\n  </div>\r\n  <div class="collapse show" id="collapseAn">\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%;" [gridAutoHeight]="true" class="ag-theme-balham" [rowData]="listadoCobrosAnticipos"\r\n      [columnDefs]="columnDefsSelected" [enableSorting]="true" [rowSelection]="rowSelection" [enableColResize]="true"\r\n      [components]="components" [context]="context" [frameworkComponents]="frameworkComponents" [animateRows]="true"\r\n      [suppressClickEdit]=true (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n      (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()" (contextmenu)="$event.preventDefault()"\r\n      (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (cellEditingStopped)="alCambiarValorDeCelda($event)"\r\n      [stopEditingWhenGridLosesFocus]="true" [overlayNoRowsTemplate]="noData" [suppressDragLeaveHidesColumns]="true"\r\n      (gridSizeChanged)="redimensionarColumnas()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data;verContable(objetoSeleccionado)">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <div class="card-footer">\r\n    <div class="card-header-actions mr-3">\r\n      <h2>{{constantes.TAG_TOTAL}} : {{totales.anticipo | number:\'1.2-2\'}}</h2>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>'},ruwe:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmDatos=\'ngForm\' name="frmDatos" class="card m-0 mb-2">\r\n      <fieldset [disabled]="vistaFormulario || mostrarAccionesContabilidad">\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--Empresa--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [appFocus]="true" class="form-control form-control-sm mousetrap" name="empresa" required\r\n              [(ngModel)]="empresaSeleccionada" (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CENTRO_PRODUCCION}}</b>\r\n              &nbsp;\r\n              <a (click)="listarSectores()" *ngIf="!vistaFormulario && !mostrarAccionesContabilidad">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown class="text-uppercase mousetrap" [options]="listadoSectores" name="sector" [showClear]="true"\r\n              [(ngModel)]="sectorSeleccionado" optionLabel="secNombre" (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}"\r\n              [disabled]="vistaFormulario || mostrarAccionesContabilidad">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--Cliente--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CLIENTE}}</b>\r\n            </label>\r\n            <input [appFocus]="true" id="codCliente" name="codCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n              type="text" (blur)="validarCliente()" (keydown)="limpiarResultado();buscarCliente($event);" [(ngModel)]="cliente.invClientePK.cliCodigo"\r\n              placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null"\r\n              [disabled]="objetoContableEnviar">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave" *ngIf="!objetoContableEnviar"></span>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [disabled]="objetoContableEnviar"\r\n              placeholder="DD/MM/YYYY"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <button type="button" class="btn btn-sm btn-default mr-1" (click)="cerrarAnticipo()" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_REGRESAR}}" *ngIf="mostrarBtnCancelar" container="body" title="{{constantes.ATAJO_CANCELAR}}">\r\n              <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true" id="btnRegresar"></i>\r\n              {{constantes.LABEL_REGRESAR}}\r\n            </button>\r\n            <button type="button" id="btnBuscar" class="btn btn-sm btn-primary mr-1" (click)="!vistaFormulario && !mostrarAccionesContabilidad ? listar() : null"\r\n              title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button *ngIf="!esConsulta" class="btn btn-sm btn-primary" id="btnNuevo" type="button" (click)="!vistaFormulario && !mostrarAccionesContabilidad ? nuevo() : null"\r\n              title="{{constantes.ATAJO_NUEVO}}">\r\n              <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div *ngIf="vistaFormulario">\r\n      <app-cobro-anticipos-formulario [parametrosFormulario]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarAccion)="ejecutarAccion($event)"></app-cobro-anticipos-formulario>\r\n    </div>\r\n    <div [hidden]="vistaFormulario">\r\n      <div *ngIf="mostrarAccionesContabilidad">\r\n        <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n          (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n      </div>\r\n      <div class="card m-0" [hidden]="mostrarAccionesContabilidad" *ngIf="listadoCobrosAnticipo?.length>0">\r\n        <div class="card-header p-1">\r\n          <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar"\r\n            type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n            <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n          </button>\r\n          <b> {{constantes.CARTERA_LISTADO_ANTICIPO_CLIENTES}}</b>\r\n          <div class="card-header-actions">\r\n            <div class="btn-group d-lg-none">\r\n              \x3c!--Imprimir--\x3e\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimir()" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"></span>\r\n              </button>\r\n              \x3c!--EXPORTAR--\x3e\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportar()" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"></span>\r\n              </button>\r\n            </div>\r\n            <div class="btn-group d-none d-lg-block">\r\n              \x3c!--Imprimir--\x3e\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimir()" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n              </button>\r\n              \x3c!--EXPORTAR--\x3e\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportar(false)"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="card-body p-0">\r\n          <div class="row">\r\n            <div class="col-sm-5 col-md-6">\r\n              <div class="input-group p-1">\r\n                <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                  size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                  size="100">\r\n                <div class="input-group-append">\r\n                  <span class="input-group-text">\r\n                    <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-7 col-md-6">\r\n              <div class="float-right pr-1">\r\n                <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                  maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n            [rowData]="listadoCobrosAnticipo" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n            (gridSizeChanged)="redimensionarColumnas()" [rowSelection]="rowSelection" [enableColResize]="true"\r\n            [context]="context" (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n            (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()"\r\n            (filterChanged)="actualizarFilas()" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="objetoSeleccionado = $event.node.data;consultarAnticipo()"\r\n            [frameworkComponents]="frameworkComponents">\r\n          </ag-grid-angular>\r\n        </div>\r\n        <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},tmUb:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmCobros=\'ngForm\' name="frmCobros" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset>\r\n        <div class="card-header">\r\n          <span>\r\n            <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n            <b> {{constantes.TITULO_FILTROS}}</b>\r\n          </span>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()" *ngIf="!vistaFormulario">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre"\r\n              [disabled]="vistaFormulario">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--CLIENTE--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CLIENTE}}</b>\r\n            </label>\r\n            <input [appFocus]="true" id="codCliente" name="txtCodigoCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n              type="text" (blur)="validarCliente()" (keydown)="limpiarResultado();buscarCliente($event);" [(ngModel)]="cliente.invClientePK.cliCodigo"\r\n              placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase [ngbTooltip]="cliente.cliRazonSocial ? cliente.cliRazonSocial : null"\r\n              [disabled]="vistaFormulario">\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n          \x3c!--FECHA DESDE--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaDesde" class="mousetrap" name="fechaDesde" [(ngModel)]="fechaDesde"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true"\r\n              [maxDate]="fechaHasta ? fechaHasta : (fechaActual)" [appMaxDate]="fechaHasta" [disabled]="vistaFormulario"></p-calendar>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta" [maxDate]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado()" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [minDate]="fechaDesde"\r\n              [disabled]="vistaFormulario"></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group">\r\n              <button type="button" class="btn btn-sm btn-default mr-1" (click)="cerrarCuentaDetallado()" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_REGRESAR}}" *ngIf="mostrarBtnCancelar" container="body" title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true" id="btnRegresar"></i>\r\n                {{constantes.LABEL_REGRESAR}}\r\n              </button>\r\n              <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarListaCuentasPorCobrarDetallado(false)"\r\n                *ngIf="!vistaFormulario">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split mr-2"\r\n                data-toggle="dropdown" *ngIf="!vistaFormulario">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="buscarCarListaCuentasPorCobrarDetallado(true)">\r\n                  {{constantes.TAG_INCLUIR_COBROS_FECHA_ACTUAL}}</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  \x3c!--Listado--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_CUENTAS_POR_COBRAR_DETALLADO_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarListaCuentasPorCobrarDetallado()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarListaCuentasPorCobrarDetallado()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarVentas()">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-venta-formulario *ngIf="vistaFormulario && parametrosFormulario" [parametros]="parametrosFormulario"\r\n      [empresaSeleccionada]="empresaSeleccionada" [tipoDocumento]="tipoDocumento" (enviarAccion)="ejecutarAccionVenta($event)"></app-venta-formulario>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},u6ct:function(e,t,o){"use strict";o.r(t);var a=o("CcnG"),i=o("ZYCi"),r=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},n=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){}return e.prototype.ngOnInit=function(){},e=r([Object(a.Component)({selector:"app-cartera",template:"\n    <router-outlet></router-outlet>\n  "}),n("design:paramtypes",[])],e)}(),c=o("xcWn"),l=o("nxr/"),d=o("8fiX"),p=o("mwBN"),u=o("EnEm"),h=o("zkCp"),m=o("nR5P"),C=o("yccp"),f=o("PNp2"),b=o("hyxj"),v=o("CEfs"),g=o("SZbH"),A=o("6E6y"),S=o("madF"),R=o("gLZI"),E=o("+JJ7"),O=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},T=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,o,a,i,r,n,s){this.planContableService=e,this.route=t,this.toastr=o,this.filasService=a,this.sectorService=i,this.formaPagoService=r,this.atajoService=n,this.utilService=s,this.listaResultado=[],this.listaSectores=[],this.listaEmpresas=[],this.sectorSeleccionado=new l.a,this.objetoSeleccionado=new c.a,this.empresaSeleccionada=new d.a,this.codigoCuenta=null,this.tamanioEstructura=0,this.constantes=p.a,this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new u.a,this.filtroGlobal="",this.vistaFormulario=!1,this.parametrosFormulario={},this.indexTablaEditar=0,this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return e.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.formaPagoCartera,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},e.prototype.cambiarEmpresaSeleccionada=function(){var e=this;p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listaResultado=[],this.planContableService.getTamanioListaConEstructura({empresa:p.a.KEY_EMPRESA_SELECT},p.a.KEY_EMPRESA_SELECT).then(function(t){e.tamanioEstructura=t[0].estGrupo1+t[0].estGrupo2+t[0].estGrupo3+t[0].estGrupo4+t[0].estGrupo5+t[0].estGrupo6}).catch(function(t){e.utilService.handleError(t,e)}),this.sectorSeleccionado=null,this.listarSectores(),this.filasService.actualizarFilas("0","0")},e.prototype.listarSectores=function(){this.cargando=!0,this.listaSectores=[];var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFp");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarFp");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_NUEVO,function(){var e=document.getElementById("btnNuevoFp");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EDITAR,function(){return e.listaResultado.length>0&&e.operacionesFormaPago(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_ELIMINAR,function(){return e.listaResultado.length>0&&e.operacionesFormaPago(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardarFp");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirFormaPago");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarFormaPago");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarFormaPago");return e&&e.click(),!1}))},e.prototype.operacionesFormaPago=function(e){var t=this;switch(e){case p.a.ACCION_ELIMINAR:this.formaPagoService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.eliminarFormaPago());break;case p.a.ACCION_CREAR:this.formaPagoService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&this.mostrarFormulario(new c.a,p.a.ACCION_CREAR);break;case p.a.ACCION_CONSULTAR:this.mostrarFormulario(this.objetoSeleccionado,p.a.ACCION_CONSULTAR);break;case p.a.ACCION_EDITAR:this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.indexTablaEditar=this.objetoSeleccionado.fpSecuencial?this.listaResultado.findIndex(function(e){return e.fpSecuencial===t.objetoSeleccionado.fpSecuencial}):this.listaResultado.findIndex(function(e){return e.ctaCodigo===t.objetoSeleccionado.ctaCodigo}),this.mostrarFormulario(this.objetoSeleccionado,p.a.ACCION_EDITAR));break;case p.a.ACCION_EDITAR_ESTADO:this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.indexTablaEditar=this.objetoSeleccionado.fpSecuencial?this.listaResultado.findIndex(function(e){return e.fpSecuencial===t.objetoSeleccionado.fpSecuencial}):this.listaResultado.findIndex(function(e){return e.ctaCodigo===t.objetoSeleccionado.ctaCodigo}),this.actualizarEstadoFormaPago())}},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listaResultado.length>0)(o=this.listaResultado.slice()).unshift(e),this.listaResultado=o,this.seleccionarFila(0);this.resetear();break;case"U":(o=this.listaResultado.slice())[this.indexTablaEditar]=e,this.listaResultado=o,this.seleccionarFila(this.indexTablaEditar),this.resetear();break;case"D":var o,a=this.listaResultado.findIndex(function(t){return t.ctaCodigo===e.ctaCodigo});(o=this.listaResultado.slice()).splice(a,1),this.listaResultado=o,this.listaResultado.length>0&&this.seleccionarFila(0===a?0:a-1),this.resetear()}},e.prototype.resetear=function(){var e=this;this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.parametrosFormulario=null,this.vistaFormulario=!1,this.generarAtajosTeclado(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.mostrarFormulario=function(e,t){this.vistaFormulario=!0,this.parametrosFormulario={activar:this.activar,accion:t,listaSectores:this.listaSectores,tamanioEstructura:this.tamanioEstructura,formaPago:O({},e),listaResultado:this.listaResultado}},e.prototype.buscarFormasPago=function(e){this.cargando=!0;var t={empresa:this.empresaSeleccionada.empCodigo,accion:"P",inactivos:e};this.filasTiempo.iniciarContador(),this.formaPagoService.listarCarListaPagosCobrosFormaTO(t,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarCarListaPagosCobrosFormaTO=function(e){var t=this;this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid(),setTimeout(function(){t.actualizarFilas()},50)},e.prototype.actualizarEstadoFormaPago=function(){var e=this;if(this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var t=JSON.parse(JSON.stringify(this.objetoSeleccionado)),o={title:t.fpInactivo?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(t.fpInactivo?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Forma de pago: "+t.fpDetalle,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){e.cargando=!0,t.fpInactivo=!t.fpInactivo;var a={carPagosCobrosFormaTO:t,estado:t.fpInactivo};e.formaPagoService.modificarEstadoFormaPago(a,e,p.a.KEY_EMPRESA_SELECT)}else e.resetear()})}},e.prototype.despuesDeModificarEstadoFormaPago=function(e){this.cargando=!1,e&&(this.refrescarTabla(e.formaPago,"U"),this.toastr.success(e.operacionMensaje,"Aviso")),this.resetear()},e.prototype.eliminarFormaPago=function(){var e=this;if(this.formaPagoService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var t=JSON.parse(JSON.stringify(this.objetoSeleccionado));t.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim();var o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){e.cargando=!0;var a={accion:"E",carPagosCobrosFormaTO:t};e.formaPagoService.accionCarPagosForma(a,e,p.a.KEY_EMPRESA_SELECT)}else e.resetear()})}},e.prototype.despuesDeAccionCarPagosForma=function(e){this.cargando=!1,e&&(this.toastr.success(e.operacionMensaje,"Aviso"),this.refrescarTabla(this.objetoSeleccionado,"D")),this.resetear()},e.prototype.imprimirFormaPago=function(){if(this.formaPagoService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){var e={listado:this.listaResultado,tipo:"P"};this.formaPagoService.imprimirFormaPago(this,e,this.empresaSeleccionada)}},e.prototype.exportarFormaPago=function(){if(this.formaPagoService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){var e={listadoCarPagosForma:this.listaResultado,tipo:"P"};this.formaPagoService.exportarFormaPago(this,e,this.empresaSeleccionada)}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.formaPagoService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:S.a,toolTip:R.a,inputEstado:E.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.generarOpciones=function(){var e=this,t=this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0),o=this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&!this.objetoSeleccionado.fpInactivo,a=this.formaPagoService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&this.objetoSeleccionado.fpInactivo,i=this.formaPagoService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0);this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.operacionesFormaPago(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!t,command:function(){return t?e.operacionesFormaPago(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!i,command:function(){return i?e.operacionesFormaPago(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?e.operacionesFormaPago(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!o,command:function(){return o?e.operacionesFormaPago(p.a.ACCION_EDITAR_ESTADO):null}}]},e.prototype.ejecutarAccion=function(e){switch(e.accion){case p.a.ACCION_CREADO:"I"===e.tipo?this.refrescarTabla(e.formaPago,"I"):this.refrescarTabla(e.formaPago,"U");break;case p.a.ACCION_CANCELAR:0===this.listaResultado.length&&(this.activar=!1),this.resetear();break;case p.a.ACCION_ACTIVAR:this.activar=e.estado}},I([Object(a.ViewChild)("menuOpciones"),T("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),e=I([Object(a.Component)({selector:"app-forma-pago",template:o("K88/"),styles:[o("q0Mi")]}),T("design:paramtypes",[A.a,i.ActivatedRoute,g.b,v.a,b.a,f.a,C.HotkeysService,m.a])],e)}(),y=o("DixL"),P=o("lDuZ"),N=o("r6CG"),L=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},M=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},D=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},F=function(){function e(e,t,o,a,i,r,n,s,h){this.planContableService=e,this.route=t,this.toastr=o,this.filasService=a,this.sectorService=i,this.formaPagoService=r,this.atajoService=n,this.utilService=s,this.formaCobroService=h,this.listaResultado=[],this.listaSectores=[],this.listaEmpresas=[],this.sectorSeleccionado=new l.a,this.objetoSeleccionado=new c.a,this.empresaSeleccionada=new d.a,this.codigoCuenta=null,this.tamanioEstructura=0,this.constantes=p.a,this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new u.a,this.filtroGlobal="",this.vistaFormulario=!1,this.parametrosFormulario={},this.indexTablaEditar=0,this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return e.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.formaCobroCartera,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},e.prototype.cambiarEmpresaSeleccionada=function(){var e=this;p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listaResultado=[],this.planContableService.getTamanioListaConEstructura({empresa:p.a.KEY_EMPRESA_SELECT},p.a.KEY_EMPRESA_SELECT).then(function(t){e.tamanioEstructura=t[0].estGrupo1+t[0].estGrupo2+t[0].estGrupo3+t[0].estGrupo4+t[0].estGrupo5+t[0].estGrupo6}).catch(function(t){e.utilService.handleError(t,e)}),this.sectorSeleccionado=null,this.listarSectores(),this.filasService.actualizarFilas("0","0")},e.prototype.listarSectores=function(){this.cargando=!0,this.listaSectores=[];var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFp");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarFc");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_NUEVO,function(){var e=document.getElementById("btnNuevoFc");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EDITAR,function(){return e.listaResultado.length>0&&e.operacionesFormaCobro(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_ELIMINAR,function(){return e.listaResultado.length>0&&e.operacionesFormaCobro(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirFormaCobro");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarFormaCobro");return e&&e.click(),!1}))},e.prototype.operacionesFormaCobro=function(e){var t=this;switch(e){case p.a.ACCION_ELIMINAR:this.formaCobroService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.eliminarFormaCobro());break;case p.a.ACCION_CREAR:this.formaCobroService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&this.mostrarFormulario(new c.a,p.a.ACCION_CREAR);break;case p.a.ACCION_CONSULTAR:this.mostrarFormulario(this.objetoSeleccionado,p.a.ACCION_CONSULTAR);break;case p.a.ACCION_EDITAR:this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.indexTablaEditar=this.objetoSeleccionado.fpSecuencial?this.listaResultado.findIndex(function(e){return e.fpSecuencial===t.objetoSeleccionado.fpSecuencial}):this.listaResultado.findIndex(function(e){return e.ctaCodigo===t.objetoSeleccionado.ctaCodigo}),this.mostrarFormulario(this.objetoSeleccionado,p.a.ACCION_EDITAR));break;case p.a.ACCION_EDITAR_ESTADO:this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.indexTablaEditar=this.objetoSeleccionado.fpSecuencial?this.listaResultado.findIndex(function(e){return e.fpSecuencial===t.objetoSeleccionado.fpSecuencial}):this.listaResultado.findIndex(function(e){return e.ctaCodigo===t.objetoSeleccionado.ctaCodigo}),this.actualizarEstadoFormaCobro())}},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listaResultado.length>0)(o=this.listaResultado.slice()).unshift(e),this.listaResultado=o,this.seleccionarFila(0);this.resetear();break;case"U":(o=this.listaResultado.slice())[this.indexTablaEditar]=e,this.listaResultado=o,this.seleccionarFila(this.indexTablaEditar),this.resetear();break;case"D":var o,a=this.listaResultado.findIndex(function(t){return t.ctaCodigo===e.ctaCodigo});(o=this.listaResultado.slice()).splice(a,1),this.listaResultado=o,this.listaResultado.length>0&&this.seleccionarFila(0===a?0:a-1),this.resetear()}},e.prototype.resetear=function(){var e=this;this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.parametrosFormulario=null,this.vistaFormulario=!1,this.generarAtajosTeclado(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.mostrarFormulario=function(e,t){this.vistaFormulario=!0,this.parametrosFormulario={activar:this.activar,accion:t,listaSectores:this.listaSectores,tamanioEstructura:this.tamanioEstructura,formaCobro:L({},e),listaResultado:this.listaResultado}},e.prototype.buscarFormasCobro=function(e){this.cargando=!0;var t={empresa:this.empresaSeleccionada.empCodigo,accion:"C",inactivos:e};this.filasTiempo.iniciarContador(),this.formaPagoService.listarCarListaPagosCobrosFormaTO(t,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarCarListaPagosCobrosFormaTO=function(e){var t=this;this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid(),setTimeout(function(){t.actualizarFilas()},50)},e.prototype.actualizarEstadoFormaCobro=function(){var e=this;if(this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var t=JSON.parse(JSON.stringify(this.objetoSeleccionado)),o={title:t.fpInactivo?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(t.fpInactivo?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Forma de cobro: "+t.fpDetalle,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){e.cargando=!0,t.fpInactivo=!t.fpInactivo;var a={carPagosCobrosFormaTO:t,estado:t.fpInactivo};e.formaCobroService.modificarEstadoFormaCobro(a,e,p.a.KEY_EMPRESA_SELECT)}else e.resetear()})}},e.prototype.despuesDeModificarEstadoFormaCobro=function(e){this.cargando=!1,e&&(this.refrescarTabla(e.formaCobro,"U"),this.toastr.success(e.operacionMensaje,"Aviso")),this.resetear()},e.prototype.eliminarFormaCobro=function(){var e=this;if(this.formaCobroService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var t=JSON.parse(JSON.stringify(this.objetoSeleccionado));t.usrEmpresa=p.a.KEY_EMPRESA_SELECT.trim();var o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){e.cargando=!0;var a={accion:"E",carPagosCobrosFormaTO:t};e.formaCobroService.accionCarCobrosForma(a,e,p.a.KEY_EMPRESA_SELECT)}else e.resetear()})}},e.prototype.despuesDeAccionCarCobroForma=function(e){this.cargando=!1,e&&(this.toastr.success(e.operacionMensaje,"Aviso"),this.refrescarTabla(this.objetoSeleccionado,"D")),this.resetear()},e.prototype.imprimirFormaCobro=function(){if(this.formaCobroService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){var e={listado:this.listaResultado,tipo:"C"};this.formaCobroService.imprimirFormaCobro(this,e,this.empresaSeleccionada)}},e.prototype.exportarFormaCobro=function(){if(this.formaCobroService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){var e={listadoCarPagosForma:this.listaResultado,tipo:"C"};this.formaCobroService.exportarFormaCobro(this,e,this.empresaSeleccionada)}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.formaPagoService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:S.a,toolTip:R.a,inputEstado:E.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.generarOpciones=function(){var e=this,t=this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0),o=this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&!this.objetoSeleccionado.fpInactivo,a=this.formaCobroService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&this.objetoSeleccionado.fpInactivo,i=this.formaCobroService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0);this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.operacionesFormaCobro(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!t,command:function(){return t?e.operacionesFormaCobro(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!i,command:function(){return i?e.operacionesFormaCobro(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?e.operacionesFormaCobro(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!o,command:function(){return o?e.operacionesFormaCobro(p.a.ACCION_EDITAR_ESTADO):null}}]},e.prototype.ejecutarAccion=function(e){switch(e.accion){case p.a.ACCION_CREADO:"I"===e.tipo?this.refrescarTabla(e.formaCobro,"I"):this.refrescarTabla(e.formaCobro,"U");break;case p.a.ACCION_CANCELAR:0===this.listaResultado.length&&(this.activar=!1),this.resetear();break;case p.a.ACCION_ACTIVAR:this.activar=e.estado}},M([Object(a.ViewChild)("menuOpciones"),D("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),e=M([Object(a.Component)({selector:"app-forma-cobro",template:o("hjpJ"),styles:[o("Osip")]}),D("design:paramtypes",[A.a,i.ActivatedRoute,g.b,v.a,b.a,f.a,C.HotkeysService,m.a,N.a])],e)}(),x=o("1Rfj"),w=o("C2aO"),j=o("wd/R"),G=o("eUd/"),k=o("dGCu"),U=o("LlOB"),B=o("jeDP"),H=o("Ungd"),V=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},z=function(){function e(e,t,o,a,i,r,n,s,c,h){this.route=e,this.pagosAnticipoService=t,this.sectorService=o,this.atajoService=a,this.archivoService=i,this.toastr=r,this.filasService=n,this.sistemaService=s,this.utilService=c,this.modalService=h,this.listaEmpresas=new Array,this.listadoPagosAnticipo=new Array,this.listadoSectores=[],this.empresaSeleccionada=new d.a,this.sectorSeleccionado=new l.a,this.parametrosFormulario={},this.parametrosListado={},this.constantes=p.a,this.isScreamMd=!0,this.filasTiempo=new u.a,this.cargando=!1,this.vistaFormulario=!1,this.activar=!1,this.proveedor=new w.a,this.proveedorCodigo=null,this.es={},this.fechaHasta=new Date,this.objetoContableEnviar=null,this.mostrarAccionesContabilidad=!1,this.esConsulta=null,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[]}return e.prototype.ngOnInit=function(){j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.anticipoProveedores,this.esConsulta=this.route.snapshot.data.esConsulta,this.isScreamMd=!(window.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.definirAtajosDeTeclado(),this.iniciarAgGrid(),this.sistemaService.obtenerFechaActual(this,p.a.KEY_EMPRESA_SELECT)},e.prototype.cambiarEmpresaSeleccionada=function(){this.cargando=!0,p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.activar=!1,this.limpiarResultado(),this.listarSectores()},e.prototype.despuesDeObtenerFechaActual=function(e){this.fechaHasta=new Date(e)},e.prototype.listarSectores=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivos:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listadoSectores=e||[],this.listadoSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listadoSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.filasService.actualizarFilas("0","0"),this.listadoPagosAnticipo=[],this.vistaFormulario=!1},e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimir");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1}))},e.prototype.listar=function(){if(this.iniciarAgGrid(),this.limpiarResultado(),this.filasTiempo.iniciarContador(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT,proveedorCodigo:this.proveedorCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta)};this.pagosAnticipoService.getCarListaCuentasPorPagarSaldoAnticiposTO(e,this,p.a.KEY_EMPRESA_SELECT),this.vistaFormulario=!1}},e.prototype.despuesDeGetCarListaCuentasPorPagarSaldoAnticiposTO=function(e){this.filasTiempo.finalizarContador(),this.cargando=!1,this.listadoPagosAnticipo=e},e.prototype.nuevo=function(){this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CREAR,sectorSeleccionado:this.sectorSeleccionado,proveedor:this.proveedorCodigo?this.proveedor:null})},e.prototype.imprimir=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listadoPagosAnticipo};this.pagosAnticipoService.imprimirCarListaCuentasPorPagarSaldoAnticipos(e,this,this.empresaSeleccionada)}},e.prototype.exportar=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listadoPagosAnticipo};this.pagosAnticipoService.exportarReporteCarListaCuentasPorPagarSaldoAnticipos(e,this,this.empresaSeleccionada)}},e.prototype.buscarProveedor=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.proveedor.invProveedorPK.provCodigo&&!(this.proveedor.invProveedorPK.provCodigo&&this.proveedorCodigo&&this.proveedor.invProveedorPK.provCodigo===this.proveedorCodigo)){var t={empresa:p.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:this.proveedor.invProveedorPK.provCodigo};e.srcElement.blur(),e.preventDefault(),this.abrirModalProveedor(t)}},e.prototype.abrirModalProveedor=function(e){var t=this,o=this.modalService.open(k.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametrosBusqueda=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.proveedorCodigo=e.provCodigo,t.proveedor.invProveedorPK.provCodigo=e.provCodigo,t.proveedor.provRazonSocial=e.provRazonSocial,t.proveedor.provDireccion=e.provDireccion,t.focusProveedorCodigo()):t.focusProveedorCodigo()},function(){t.focusProveedorCodigo()})},e.prototype.validarProveedor=function(){this.proveedor.invProveedorPK.provCodigo!==this.proveedorCodigo&&(this.proveedorCodigo=null,this.proveedor=new w.a)},e.prototype.focusProveedorCodigo=function(){var e=document.getElementById("codProveedor");e&&e.focus()},e.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1},e.prototype.ejecutarAccion=function(e){switch(this.definirAtajosDeTeclado(),e.accion){case p.a.ACCION_ACTIVAR:this.activar=e.estado;break;case p.a.ACCION_CANCELAR:this.cancelar();break;case p.a.ACCION_CREADO:this.actualizarTabla(e);break;case p.a.ACCION_ELIMINADO:this.vistaFormulario=!1,this.gridApi&&this.gridApi.updateRowData({remove:[this.objetoSeleccionado]});break;case p.a.ACCION_CONSULTAR:this.irAlHijo(e)}},e.prototype.actualizarTabla=function(e){this.vistaFormulario=!1;var t=e.resultante;this.listadoPagosAnticipo.unshift(t),this.gridApi&&this.gridApi.updateRowData({add:[t],addIndex:0}),this.activar=!1},e.prototype.irAlHijo=function(e){this.parametrosFormulario.accion=e.accion,this.parametrosFormulario.seleccionado=e.objetoSeleccionado,this.vistaFormulario=!0},e.prototype.generarOpciones=function(){var e=this,t=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,o=this.empresaSeleccionada.listaSisPermisoTO.gruAnularContables;this.opciones=[{label:p.a.LABEL_CONSULTAR_ANTICIPO,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.irAlHijo({accion:p.a.ACCION_CONSULTAR,objetoSeleccionado:e.objetoSeleccionado})}}],this.esConsulta||this.opciones.push({label:p.a.LABEL_REVERSAR_ANTICIPO,icon:p.a.ICON_REVERSAR,disabled:!t,command:function(){return t?e.irAlHijo({accion:p.a.ACCION_REVERSAR,objetoSeleccionado:e.objetoSeleccionado}):null}},{label:p.a.LABEL_ANULAR_ANTICIPO,icon:p.a.ICON_ANULAR,disabled:!o,command:function(){return o?e.irAlHijo({accion:p.a.ACCION_ANULAR,objetoSeleccionado:e.objetoSeleccionado}):null}}),this.opciones.push({label:p.a.ACCION_CONSULTAR_CONTABLE,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.verContable()}},{label:p.a.LABEL_IMPRIMIR_CONTABLE,icon:p.a.ICON_IMPRIMIR,disabled:!1,command:function(){return e.imprimirContable()}})},e.prototype.imprimirContable=function(){var e=this;this.cargando=!0;var t=[],o=new B.a;o.conEmpresa=this.empresaSeleccionada.empCodigo,o.conNumero=this.objetoSeleccionado.antNumero,o.conPeriodo=this.objetoSeleccionado.antPeriodo,o.conTipo=this.objetoSeleccionado.antTipo,t.push(o);var a={listadoPK:t};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableIndividual",a,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("Contable.pdf",t):e.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.verContable=function(){this.objetoSeleccionado?(this.mostrarAccionesContabilidad=!0,this.cargando=!0,this.objetoContableEnviar={accion:p.a.ACCION_CONSULTAR,contable:this.objetoSeleccionado.antPeriodo+" | "+this.objetoSeleccionado.antTipo+" | "+this.objetoSeleccionado.antNumero,empresaSeleccionada:this.empresaSeleccionada,activar:!0,volverACargar:!0},this.activar=!0):this.toastr.warning(p.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,p.a.TAG_AVISO)},e.prototype.cerrarContabilidadAcciones=function(e){e.noIniciarAtajoPadre||(this.definirAtajosDeTeclado(),this.activar=!1,this.objetoContableEnviar=e.objetoEnviar,this.mostrarAccionesContabilidad=e.mostrarContilidadAcciones)},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e},e.prototype.cambiarEstadoActivar=function(e){this.activar=e},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.pagosAnticipoService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},V([Object(a.ViewChild)("menuOpciones"),Y("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),e=V([Object(a.Component)({selector:"app-pagos-anticipos",template:o("H2p8")}),Y("design:paramtypes",[i.ActivatedRoute,x.a,b.a,C.HotkeysService,H.a,g.b,v.a,U.a,m.a,G.b])],e)}(),J=o("pZ6e"),W=o("uhNP"),K=o("z5Y/"),X=o("Ip0R"),$=o("L5HG"),q=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Z=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Q=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarFunCobrosDetalleTO=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarFunCobrosDetalleTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarFunCobrosDetalleTO(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(t.despuesDeListarCarFunCobrosDetalleTO([]),a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarFunCobrosDetalle=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarFunCobrosDetalle",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarFunCobrosDetalle.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCarFunCobrosDetalle=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarFunCobrosDetalle",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarFunCobrosDetalle_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=[];return t.push({headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:38,minWidth:38,maxWidth:38,cellClass:function(e){return e.data.cobNumeroSistema?"text-center":"ag-hidden"}},{headerName:p.a.TAG_ESTADO,headerClass:"text-center",width:90,minWidth:90,maxWidth:90,cellClass:"text-center",cellRendererFramework:$.a,valueGetter:function(e){return!0===e.data.cobAnulado?(e.value=p.a.ETIQUETA_ANULADO,e.value):!0===e.data.cobPendiente?(e.value=p.a.ETIQUETA_PENDIENTE,e.value):""}},{headerName:p.a.TAG_NUMERO,field:"cobNumeroSistema",width:180,minWidth:180},{headerName:p.a.TAG_FECHA,field:"cobFecha",width:80,minWidth:80}),e.clienteCodigo||t.push({headerName:p.a.TAG_CLIENTE,field:"cobCliente",width:250,minWidth:200,cellClass:function(e){return e.data.cobNumeroSistema?"text-whitespace":"tr-negrita "}}),t.push({headerName:p.a.TAG_VALOR,field:"cobValor",width:80,minWidth:80,valueFormatter:ee,cellClass:function(e){return e.data.cobNumeroSistema?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OBSERVACIONES,field:"cobObservaciones",width:200,minWidth:200},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRendererFramework:S.a,cellClass:function(e){return e.data.cobNumeroSistema?"text-center":"ag-hidden"},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}),t},e=q([Object(a.Injectable)({providedIn:"root"}),Z("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function ee(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var te=o("yEhj"),oe=o("WDoE"),ae=function(){function e(e){this.id=0,this.cobNumeroSistema="",this.cobFecha="",this.cobCliente="",this.cobValor=0,this.cobObservaciones="",this.cobPendiente=!1,this.cobAnulado=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.cobNumeroSistema=e.cobNumeroSistema?e.cobNumeroSistema:this.cobNumeroSistema,this.cobFecha=e.cobFecha?e.cobFecha:this.cobFecha,this.cobCliente=e.cobCliente?e.cobCliente:this.cobCliente,this.cobValor=e.cobValor?e.cobValor:this.cobValor,this.cobObservaciones=e.cobObservaciones?e.cobObservaciones:this.cobObservaciones,this.cobPendiente=e.cobPendiente?e.cobPendiente:this.cobPendiente,this.cobAnulado=e.cobAnulado?e.cobAnulado:this.cobAnulado,this.id=e.id?e.id:this.id},e}(),ie=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},re=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ne=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarFunCobrosTO=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarFunCobrosTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarFunCobrosTO(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(t.despuesDeListarCarFunCobrosTO([]),a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarFunCobrosTO=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarFunCobrosDetalle",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarFunCobros.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCarFunCobrosTO=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarFunCobrosDetalle",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarFunCobros_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarFunCobrosPorLote=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReportePorLoteCobros",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarFunCobros.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerCobrosPK=function(e){for(var t=Array(),o=new ae,a=0,i=e;a<i.length;a++){var r=i[a];o.cobNumeroSistema=r.cobNumeroSistema,t.push(o.cobNumeroSistema)}return t},e.prototype.generarColumnas=function(e){var t=[];return t.push({headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:38,minWidth:38,maxWidth:38,cellClass:function(e){return e.data.cobNumeroSistema?"text-center":"ag-hidden"}},{headerName:p.a.TAG_ESTADO,headerClass:"text-center",width:90,minWidth:90,maxWidth:90,cellClass:"text-center",cellRendererFramework:$.a,valueGetter:function(e){return!0===e.data.cobAnulado?(e.value=p.a.ETIQUETA_ANULADO,e.value):!0===e.data.cobPendiente?(e.value=p.a.ETIQUETA_PENDIENTE,e.value):""}},{headerName:p.a.TAG_NUMERO,field:"cobNumeroSistema",width:180,minWidth:180},{headerName:p.a.TAG_FECHA,field:"cobFecha",width:80,minWidth:80}),e.clienteCodigo||t.push({headerName:p.a.TAG_CLIENTE,field:"cobCliente",width:250,minWidth:200,cellClass:function(e){return e.data.cobNumeroSistema?"text-whitespace":"tr-negrita "}}),t.push({headerName:p.a.TAG_VALOR,field:"cobValor",width:80,minWidth:80,valueFormatter:se,cellClass:function(e){return e.data.cobNumeroSistema?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OBSERVACIONES,field:"cobObservaciones",width:200,minWidth:200},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRendererFramework:S.a,cellClass:function(e){return e.data.cobNumeroSistema?"text-center":"ag-hidden"},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}),t},e=ie([Object(a.Injectable)({providedIn:"root"}),re("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function se(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var ce=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},le=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},de=function(){function e(e,t,o,a,i,r,n,s,c,h,m,C){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=a,this.utilService=i,this.modalService=r,this.sistemaService=n,this.sectorService=s,this.cobrosDetalleService=c,this.mayorAuxiliarService=h,this.cdRef=m,this.listadoCobrosService=C,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.cliente=new J.a,this.clienteCodigo=null,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.filasTiempo=new u.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.listaResultado=[],this.vistaFormulario=!1,this.parametrosFormulario={},this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.rowClassRules={},this.mayorAuxiliarSeleccionado=new te.a,this.objetoContableEnviar=null,this.activarInicial=!1,this.mostrarContabilidaAcciones=!1,this.listadoResultadoMayorAuxiliar=[],this.mostrarFormularioMayorAuxiliar=!1}return e.prototype.ngOnInit=function(){this.constantes=p.a,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.cobrosDetalle,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.obtenerFechaInicioActualMes(),this.focusClienteCodigo()},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cliente.invClientePK.cliCodigo="",this.cliente.cliRazonSocial="",this.sectorSeleccionado=null,this.listarSectores(),this.limpiarResultado()},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!0};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0")},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.buscarCarFunCobrosDetalleTO=function(e){if(this.cargando=!0,this.limpiarResultado(),this.utilService.establecerFormularioTocado(e)&&e&&e.valid){this.filasTiempo.iniciarContador();var t={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),cliente:this.clienteCodigo};this.cobrosDetalleService.listarCarFunCobrosDetalleTO(t,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.despuesDeListarCarFunCobrosDetalleTO=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCarFunCobrosDetalle=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cobrosDetalleService.imprimirCarFunCobrosDetalle(e,this,this.empresaSeleccionada)}},e.prototype.exportarCarFunCobrosDetalle=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cobrosDetalleService.exportarCarFunCobrosDetalle(e,this,this.empresaSeleccionada)}},e.prototype.imprimirListaCobrosIndividual=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",numeroSistema:[this.objetoSeleccionado.cobNumeroSistema]};this.listadoCobrosService.imprimirCarFunCobrosPorLote(e,this,this.empresaSeleccionada)}},e.prototype.imprimirListaCobrosPorLote=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e=this.utilService.getAGSelectedData(this.gridApi),t=this.listadoCobrosService.obtenerCobrosPK(e);if(0===e.length)this.toastr.info(p.a.MSJ_NO_ITEM_SELECCIONADO,p.a.TOAST_INFORMACION),this.cargando=!1;else{var o=this.utilService.enviarListadoCobrosSeleccionados(e.slice());if(o.conStatus)this.cargando=!1,this.toastr.warning(o.mensaje,p.a.TAG_AVISO);else if(o.listadoResultado.length>0){var a={empresa:this.empresaSeleccionada.empCodigo,usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",numeroSistema:t};this.listadoCobrosService.imprimirCarFunCobrosPorLote(a,this,this.empresaSeleccionada)}}}},e.prototype.buscarCliente=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.cliente.invClientePK.cliCodigo&&!(this.cliente.invClientePK.cliCodigo&&this.clienteCodigo&&this.cliente.invClientePK.cliCodigo===this.clienteCodigo)){var t={empresa:p.a.KEY_EMPRESA_SELECT,busqueda:this.cliente.invClientePK.cliCodigo,mostrarInactivo:!1};e.srcElement.blur(),e.preventDefault(),this.abrirModalCliente(t)}},e.prototype.abrirModalCliente=function(e){var t=this,o=this.modalService.open(W.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.clienteCodigo=e?e.cliCodigo:null,t.cliente.invClientePK.cliCodigo=e?e.cliCodigo:null,t.cliente.cliRazonSocial=e?e.cliRazonSocial:null,t.cliente.invClienteGrupoEmpresarial.geNombre=e?e.cliGrupoEmpresarialNombre:null,t.focusClienteCodigo()):t.focusClienteCodigo()},function(){t.focusClienteCodigo()})},e.prototype.validarCliente=function(){this.cliente.invClientePK.cliCodigo!==this.clienteCodigo&&(this.clienteCodigo=null,this.cliente=new J.a)},e.prototype.focusClienteCodigo=function(){var e=document.getElementById("codCliente");e&&e.focus()},e.prototype.iniciarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CONSULTAR,function(){return e.listaResultado.length>0&&e.operacionMayorAuxiliar(p.a.ACCION_CONSULTAR),!1}))},e.prototype.generarOpciones=function(){var e=this,t=this.objetoSeleccionado.cobNumeroSistema,o=this.empresaSeleccionada.listaSisPermisoTO.gruImprimir;this.opciones=[{label:p.a.LABEL_CONSULTAR_COBRO,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.irAlHijo({accion:p.a.ACCION_CONSULTAR,objetoSeleccionado:e.objetoSeleccionado}):null}},{label:p.a.ACCION_CONSULTAR_CONTABLE,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.operacionMayorAuxiliar(p.a.ACCION_CONSULTAR):null}},{label:p.a.LABEL_IMPRIMIR_COBROS,icon:p.a.ICON_IMPRIMIR,disabled:!o,command:function(){return o?e.imprimirListaCobrosIndividual():null}}]},e.prototype.ejecutarAccion=function(e){switch(this.iniciarAtajosTeclado(),e.accion){case p.a.ACCION_ACTIVAR:this.activar=e.estado;break;case p.a.ACCION_CANCELAR:this.cancelar();break;case p.a.ACCION_CONSULTAR:this.irAlHijo(e)}},e.prototype.consultarCobros=function(){this.irAlHijo({accion:p.a.ACCION_CONSULTAR,objetoSeleccionado:this.objetoSeleccionado})},e.prototype.irAlHijo=function(e){this.parametrosFormulario.accion=e.accion,this.parametrosFormulario.seleccionado=e.objetoSeleccionado,this.parametrosFormulario.cliente=this.cliente,this.vistaFormulario=!0},e.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1},e.prototype.operacionMayorAuxiliar=function(e){this.mayorAuxiliarService.verificarPermiso(e,this,!0)&&this.objetoSeleccionado.cobNumeroSistema&&(this.cargando=!0,this.activarInicial=JSON.parse(JSON.stringify(this.activar)),this.objetoContableEnviar={accion:e,contable:this.objetoSeleccionado.cobNumeroSistema,empresaSeleccionada:this.empresaSeleccionada,activar:!0,tipoContable:null,listaPeriodos:[],volverACargar:!0})},e.prototype.cerrarContabilidadAcciones=function(e){this.activar=e.objetoEnviar?e.objetoEnviar.activar:this.activarInicial,this.objetoContableEnviar=e.objetoEnviar,this.mostrarContabilidaAcciones=e.mostrarContilidadAcciones,this.filasService.actualizarFilas(this.listadoResultadoMayorAuxiliar.length,this.filasTiempo.getTiempo()),this.cdRef.detectChanges()},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e,this.cdRef.detectChanges()},e.prototype.cambiarEstadoActivar=function(e){this.activar=e,this.cdRef.detectChanges()},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cobrosDetalleService.generarColumnas(this),this.columnDefsSelected=this.columnDefs,this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={botonOpciones:S.a,toolTip:R.a,inputEstado:E.a},this.components={},this.rowClassRules={"fila-pendiente":function(e){return!0===e.data.cobPendiente}}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.cobNumeroSistema&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},ce([Object(a.ViewChild)("menuOpciones"),le("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),ce([Object(a.HostListener)("window:resize",["$event"]),le("design:type",Function),le("design:paramtypes",[]),le("design:returntype",void 0)],e.prototype,"onResize",null),e=ce([Object(a.Component)({selector:"app-lista-cobros-detalle",template:o("0bhu"),styles:[o("Yqz2")]}),le("design:paramtypes",[i.ActivatedRoute,g.b,C.HotkeysService,v.a,m.a,G.b,U.a,b.a,Q,oe.a,a.ChangeDetectorRef,ne])],e)}(),pe=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ue=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},he=function(){function e(e,t,o,a,i,r,n,s,c,h,m,C){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=a,this.utilService=i,this.modalService=r,this.sistemaService=n,this.sectorService=s,this.mayorAuxiliarService=c,this.cdRef=h,this.archivoService=m,this.listadoCobrosService=C,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.cliente=new J.a,this.clienteCodigo=null,this.esConsulta=null,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.filasTiempo=new u.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.listaResultado=[],this.vistaFormulario=!1,this.parametrosFormulario={},this.rowClassRules={},this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.objetoContableEnviar=null,this.activarInicial=!1,this.mostrarContabilidaAcciones=!1,this.listadoResultadoMayorAuxiliar=[]}return e.prototype.ngOnInit=function(){this.constantes=p.a,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.cobrosListado,this.esConsulta=this.route.snapshot.data.esConsulta,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.obtenerFechaInicioActualMes(),this.iniciarAgGrid(),this.focusClienteCodigo()},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cliente.invClientePK.cliCodigo="",this.cliente.cliRazonSocial="",this.sectorSeleccionado=null,this.listarSectores(),this.limpiarResultado()},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!0};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0")},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.buscarCarFunCobrosTO=function(e){if(this.cargando=!0,this.limpiarResultado(),this.utilService.establecerFormularioTocado(e)&&e&&e.valid){this.filasTiempo.iniciarContador();var t={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),cliente:this.clienteCodigo};this.listadoCobrosService.listarCarFunCobrosTO(t,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.despuesDeListarCarFunCobrosTO=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCarFunCobrosTO=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.listadoCobrosService.imprimirCarFunCobrosTO(e,this,this.empresaSeleccionada)}},e.prototype.exportarCarFunCobrosTO=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.listadoCobrosService.exportarCarFunCobrosTO(e,this,this.empresaSeleccionada)}},e.prototype.imprimirListaCobrosIndividual=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",numeroSistema:[this.objetoSeleccionado.cobNumeroSistema]};this.listadoCobrosService.imprimirCarFunCobrosPorLote(e,this,this.empresaSeleccionada)}},e.prototype.imprimirListaCobrosPorLote=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e=this.utilService.getAGSelectedData(this.gridApi);if(0===e.length)this.toastr.info(p.a.MSJ_NO_ITEM_SELECCIONADO,p.a.TOAST_INFORMACION),this.cargando=!1;else{e[e.length-1].cobNumeroSistema||e.pop();var t=this.utilService.enviarListadoCobrosSeleccionados(e.slice());if(t.conStatus)this.cargando=!1,this.toastr.warning(t.mensaje,p.a.TAG_AVISO);else if(t.listadoResultado.length>0){var o=this.listadoCobrosService.obtenerCobrosPK(e),a={empresa:this.empresaSeleccionada.empCodigo,usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",numeroSistema:o};this.listadoCobrosService.imprimirCarFunCobrosPorLote(a,this,this.empresaSeleccionada)}}}},e.prototype.nuevo=function(){this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CREAR,sectorSeleccionado:this.sectorSeleccionado,cliente:this.clienteCodigo?this.cliente:null})},e.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1},e.prototype.ejecutarAccion=function(e){switch(this.iniciarAtajosTeclado(),e.accion){case p.a.ACCION_ACTIVAR:this.activar=e.estado;break;case p.a.ACCION_CANCELAR:this.cancelar();break;case p.a.ACCION_CREADO:this.actualizarTabla(e);break;case p.a.ACCION_ELIMINADO:this.vistaFormulario=!1,this.gridApi&&this.gridApi.updateRowData({remove:[this.objetoSeleccionado]});break;case p.a.ACCION_CONSULTAR:this.irAlHijo(e)}},e.prototype.actualizarTabla=function(e){this.vistaFormulario=!1;var t=e.resultante;this.listaResultado.unshift(t),this.gridApi&&this.gridApi.updateRowData({add:[t],addIndex:0}),this.activar=!1},e.prototype.consultarCobros=function(){this.irAlHijo({accion:p.a.ACCION_CONSULTAR,objetoSeleccionado:this.objetoSeleccionado})},e.prototype.irAlHijo=function(e){this.parametrosFormulario.accion=e.accion,this.parametrosFormulario.seleccionado=e.objetoSeleccionado,this.vistaFormulario=!0},e.prototype.buscarCliente=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.cliente.invClientePK.cliCodigo&&!(this.cliente.invClientePK.cliCodigo&&this.clienteCodigo&&this.cliente.invClientePK.cliCodigo===this.clienteCodigo)){var t={empresa:p.a.KEY_EMPRESA_SELECT,busqueda:this.cliente.invClientePK.cliCodigo,mostrarInactivo:!1};e.srcElement.blur(),e.preventDefault(),this.abrirModalCliente(t)}},e.prototype.abrirModalCliente=function(e){var t=this,o=this.modalService.open(W.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.clienteCodigo=e.cliCodigo,t.cliente.invClientePK.cliCodigo=e.cliCodigo,t.cliente.cliRazonSocial=e.cliRazonSocial,t.cliente.invClienteGrupoEmpresarial.geNombre=e.cliGrupoEmpresarialNombre,t.cliente.cliDireccion=e.cliDireccion,t.cliente.cliIdNumero=e.cliId,t.focusClienteCodigo()):t.focusClienteCodigo()},function(){t.focusClienteCodigo()})},e.prototype.validarCliente=function(){this.cliente.invClientePK.cliCodigo!==this.clienteCodigo&&(this.clienteCodigo=null,this.cliente=new J.a)},e.prototype.focusClienteCodigo=function(){var e=document.getElementById("codCliente");e&&e.focus()},e.prototype.iniciarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CONSULTAR,function(){return e.listaResultado.length>0&&e.operacionMayorAuxiliar(p.a.ACCION_CONSULTAR),!1}))},e.prototype.generarOpciones=function(){var e=this,t=this.objetoSeleccionado.cobNumeroSistema,o=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,a=this.empresaSeleccionada.listaSisPermisoTO.gruAnularContables,i=this.empresaSeleccionada.listaSisPermisoTO.gruImprimir;this.opciones=[{label:p.a.LABEL_CONSULTAR_COBRO,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.irAlHijo({accion:p.a.ACCION_CONSULTAR,objetoSeleccionado:e.objetoSeleccionado}):null}}],this.esConsulta||this.opciones.push({label:p.a.LABEL_REVERSAR_PAGO,icon:p.a.ICON_REVERSAR,disabled:!o,command:function(){return o?e.irAlHijo({accion:p.a.ACCION_REVERSAR,objetoSeleccionado:e.objetoSeleccionado}):null}},{label:p.a.LABEL_ANULAR_PAGO,icon:p.a.ICON_ANULAR,disabled:!a,command:function(){return a?e.irAlHijo({accion:p.a.ACCION_ANULAR,objetoSeleccionado:e.objetoSeleccionado}):null}}),this.opciones.push({label:p.a.ACCION_CONSULTAR_CONTABLE,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.operacionMayorAuxiliar(p.a.ACCION_CONSULTAR):null}},{label:p.a.LABEL_IMPRIMIR_CONTABLE,icon:p.a.ICON_IMPRIMIR,disabled:!i,command:function(){return i?e.imprimirContable():null}},{label:p.a.LABEL_IMPRIMIR_COBROS,icon:p.a.ICON_IMPRIMIR,disabled:!i,command:function(){return i?e.imprimirListaCobrosIndividual():null}})},e.prototype.imprimirContable=function(){var e=this;this.cargando=!0;var t=[],o=this.utilService.obtenerConContablePK(this.objetoSeleccionado.cobNumeroSistema,p.a.KEY_EMPRESA_SELECT,"|");t.push(o);var a={listadoPK:t};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableIndividual",a,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("Contable.pdf",t):e.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.operacionMayorAuxiliar=function(e){this.mayorAuxiliarService.verificarPermiso(e,this,!0)&&this.objetoSeleccionado.cobNumeroSistema&&(this.cargando=!0,this.activarInicial=JSON.parse(JSON.stringify(this.activar)),this.objetoContableEnviar={accion:e,contable:this.objetoSeleccionado.cobNumeroSistema,empresaSeleccionada:this.empresaSeleccionada,activar:!0,tipoContable:null,listaPeriodos:[],volverACargar:!0})},e.prototype.cerrarContabilidadAcciones=function(e){this.activar=e.objetoEnviar?e.objetoEnviar.activar:this.activarInicial,this.objetoContableEnviar=e.objetoEnviar,this.mostrarContabilidaAcciones=e.mostrarContilidadAcciones,this.cdRef.detectChanges()},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e,this.cdRef.detectChanges()},e.prototype.cambiarEstadoActivar=function(e){this.activar=e,this.cdRef.detectChanges()},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.listadoCobrosService.generarColumnas(this),this.columnDefsSelected=this.columnDefs,this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={botonOpciones:S.a,toolTip:R.a,inputEstado:E.a},this.rowClassRules={"fila-pendiente":function(e){return!0===e.data.cobPendiente}},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.cobNumeroSistema&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},pe([Object(a.ViewChild)("menuOpciones"),ue("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),pe([Object(a.HostListener)("window:resize",["$event"]),ue("design:type",Function),ue("design:paramtypes",[]),ue("design:returntype",void 0)],e.prototype,"onResize",null),e=pe([Object(a.Component)({selector:"app-lista-cobros-listado",template:o("hwkZ")}),ue("design:paramtypes",[i.ActivatedRoute,g.b,C.HotkeysService,v.a,m.a,G.b,U.a,b.a,oe.a,a.ChangeDetectorRef,H.a,ne])],e)}(),me=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ce=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},fe=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarFunCuentasPorCobrarListadoVentas=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarFunCuentasPorCobrarListadoVentasTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarFunCuentasPorCobrarListadoVentas(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(t.despuesDeListarCarFunCuentasPorCobrarListadoVentas([]),a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarFunCuentasPorCobrarListadoVentas=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarFunCuentasPorCobrarListadoVentas",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarFunCuentasPorCobrarListadoVentas.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCarFunCuentasPorCobrarListadoVentas=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarFunCuentasPorCobrarListadoVentas",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarFunCuentasPorCobrarListadoVentas_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PERIODO,field:"cxcdPeriodo",width:80,minWidth:80},{headerName:p.a.TAG_MOTIVO,field:"cxcdMotivo",width:80,minWidth:80},{headerName:p.a.TAG_NUMERO,field:"cxcdNumero",width:80,minWidth:80},{headerName:p.a.TAG_CLIENTE,field:"cxcdCliente",width:250,minWidth:200,cellClass:function(e){return e.data.cxcdPeriodo?"text-whitespace":"text-whitespace tr-negrita"}},{headerName:p.a.TAG_FECHA_EMISION,field:"cxcdFechaEmision",width:130,minWidth:130},{headerName:p.a.TAG_FECHA_VENCIMIENTO,field:"cxcdFechaVencimiento",width:130,minWidth:130},{headerName:p.a.TAG_SALDO,field:"cxcdSaldo",width:100,minWidth:100,valueFormatter:be,cellClass:function(e){return e.data.cxcdPeriodo?"text-whitespace text-right":"tr-negrita text-right"}}]},e=me([Object(a.Injectable)({providedIn:"root"}),Ce("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function be(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var ve=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ge=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ae=function(){function e(e,t,o,a,i,r,n,s,c){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=a,this.utilService=i,this.modalService=r,this.sistemaService=n,this.sectorService=s,this.cobrosListadoService=c,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.cliente=new J.a,this.clienteCodigo=null,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.filasTiempo=new u.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.listaResultado=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return e.prototype.ngOnInit=function(){this.constantes=p.a,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.cobrosListadoVentas,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.iniciarAgGrid(),this.obtenerFechaInicioActualMes(),this.focusClienteCodigo()},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cliente.invClientePK.cliCodigo="",this.cliente.cliRazonSocial="",this.sectorSeleccionado=null,this.listarSectores(),this.limpiarResultado()},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!0};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0")},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.buscarCarFunCobrosDetalleTO=function(e){if(this.cargando=!0,this.limpiarResultado(),this.utilService.establecerFormularioTocado(e)&&e&&e.valid){this.filasTiempo.iniciarContador();var t={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,cliente:this.clienteCodigo,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta)};this.cobrosListadoService.listarCarFunCuentasPorCobrarListadoVentas(t,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.despuesDeListarCarFunCuentasPorCobrarListadoVentas=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador()},e.prototype.imprimirCarFunCuentasPorCobrarListadoVentas=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cobrosListadoService.imprimirCarFunCuentasPorCobrarListadoVentas(e,this,this.empresaSeleccionada)}},e.prototype.exportarCarFunCuentasPorCobrarListadoVentas=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cobrosListadoService.exportarCarFunCuentasPorCobrarListadoVentas(e,this,this.empresaSeleccionada)}},e.prototype.buscarCliente=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.cliente.invClientePK.cliCodigo&&!(this.cliente.invClientePK.cliCodigo&&this.clienteCodigo&&this.cliente.invClientePK.cliCodigo===this.clienteCodigo)){var t={empresa:p.a.KEY_EMPRESA_SELECT,busqueda:this.cliente.invClientePK.cliCodigo,mostrarInactivo:!1};e.srcElement.blur(),e.preventDefault(),this.abrirModalCliente(t)}},e.prototype.abrirModalCliente=function(e){var t=this,o=this.modalService.open(W.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.clienteCodigo=e?e.cliCodigo:null,t.cliente.invClientePK.cliCodigo=e?e.cliCodigo:null,t.cliente.cliRazonSocial=e?e.cliRazonSocial:null,t.cliente.invClienteGrupoEmpresarial.geNombre=e?e.cliGrupoEmpresarialNombre:null,t.focusClienteCodigo()):t.focusClienteCodigo()},function(){t.focusClienteCodigo()})},e.prototype.validarCliente=function(){this.cliente.invClientePK.cliCodigo!==this.clienteCodigo&&(this.clienteCodigo=null,this.cliente=new J.a)},e.prototype.focusClienteCodigo=function(){var e=document.getElementById("codCliente");e&&e.focus()},e.prototype.iniciarAtajosTeclado=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1}))},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cobrosListadoService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},ve([Object(a.HostListener)("window:resize",["$event"]),ge("design:type",Function),ge("design:paramtypes",[]),ge("design:returntype",void 0)],e.prototype,"onResize",null),e=ve([Object(a.Component)({selector:"app-cobros-listado-ventas",template:o("dFpY"),styles:[o("GvSS")]}),ge("design:paramtypes",[i.ActivatedRoute,g.b,C.HotkeysService,v.a,m.a,G.b,U.a,b.a,fe])],e)}(),Se=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Re=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ee=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarListaMayorAuxiliarClienteProveedor=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaMayorAuxiliarClienteProveedorTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarListaMayorAuxiliarClienteProveedor(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(t.despuesDeListarCarListaMayorAuxiliarClienteProveedor([]),a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarListaMayorAuxiliarClienteProveedor=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarListaMayorAuxiliarClienteProveedor",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarListaMayorAuxiliarClienteProveedor.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCarListaMayorAuxiliarClienteProveedor=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarListaMayorAuxiliarClienteProveedor",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarListaMayorAuxiliarClienteProveedor_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_CONTABLE,field:"maContable",width:180,minWidth:180},{headerName:p.a.TAG_FECHA,field:"maFecha",width:80,minWidth:80},{headerName:p.a.TAG_CLAVE_PRINCIPAL,field:"maClavePrincipal",width:250,minWidth:200,cellClass:function(e){return e.data.maContable?"text-whitespace":"tr-negrita "}},{headerName:p.a.TAG_CP,field:"maCp",width:80,minWidth:80,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:p.a.TAG_CENTRO_PRODUCCION,text:p.a.TAG_CP}},{headerName:p.a.TAG_DOCUMENTO,field:"maDocumento",width:150,minWidth:150},{headerName:p.a.TAG_DEBE,headerClass:"cell-header-center",field:"maDebe",width:100,minWidth:100,valueFormatter:Oe,cellClass:function(e){return e.data.maContable?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_HABER,headerClass:"cell-header-center",field:"maHaber",width:100,minWidth:100,valueFormatter:Oe,cellClass:function(e){return e.data.maContable?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_SALDO,field:"maSaldo",width:100,minWidth:100,valueFormatter:Oe,cellClass:function(e){return e.data.maContable?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OBSERVACION,field:"maObservaciones",width:200,minWidth:200},{headerName:p.a.TAG_ORDEN,field:"maOrden",width:80,minWidth:80,cellClass:"text-right"},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(e){return e.data.maContable?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.ACCION_CONSULTAR_COBROS,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},e=Se([Object(a.Injectable)({providedIn:"root"}),Re("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function Oe(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var Ie=o("/TJv"),Te=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},_e=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ye=function(){function e(e,t,o,a,i,r,n,s,c){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=a,this.utilService=i,this.modalService=r,this.sistemaService=n,this.sectorService=s,this.cobrosMayAux=c,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.cliente=new J.a,this.clienteCodigo=null,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.filasTiempo=new u.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.listaResultado=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return e.prototype.ngOnInit=function(){this.constantes=p.a,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.cobrosMayorAuxiliarCliente,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.obtenerFechaInicioActualMes(),this.focusClienteCodigo()},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cliente.invClientePK.cliCodigo="",this.cliente.cliRazonSocial="",this.sectorSeleccionado=null,this.listarSectores(),this.limpiarResultado()},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!0};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0")},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.buscarCarListaMayorAuxiliarClienteProveedor=function(e){if(this.cargando=!0,this.limpiarResultado(),this.utilService.establecerFormularioTocado(e)&&e&&e.valid){this.filasTiempo.iniciarContador();var t={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),proveedor:this.clienteCodigo,accion:"C"};this.cobrosMayAux.listarCarListaMayorAuxiliarClienteProveedor(t,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.despuesDeListarCarListaMayorAuxiliarClienteProveedor=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCarListaMayorAuxiliarClienteProveedor=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado,tipo:"C"};this.cobrosMayAux.imprimirCarListaMayorAuxiliarClienteProveedor(e,this,this.empresaSeleccionada)}},e.prototype.exportarCarListaMayorAuxiliarClienteProveedor=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado,tipo:"C"};this.cobrosMayAux.exportarCarListaMayorAuxiliarClienteProveedor(e,this,this.empresaSeleccionada)}},e.prototype.buscarCliente=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.cliente.invClientePK.cliCodigo&&!(this.cliente.invClientePK.cliCodigo&&this.clienteCodigo&&this.cliente.invClientePK.cliCodigo===this.clienteCodigo)){var t={empresa:p.a.KEY_EMPRESA_SELECT,busqueda:this.cliente.invClientePK.cliCodigo,mostrarInactivo:!1};e.srcElement.blur(),e.preventDefault(),this.abrirModalCliente(t)}},e.prototype.abrirModalCliente=function(e){var t=this,o=this.modalService.open(W.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.clienteCodigo=e?e.cliCodigo:null,t.cliente.invClientePK.cliCodigo=e?e.cliCodigo:null,t.cliente.cliRazonSocial=e?e.cliRazonSocial:null,t.cliente.invClienteGrupoEmpresarial.geNombre=e?e.cliGrupoEmpresarialNombre:null,t.focusClienteCodigo()):t.focusClienteCodigo()},function(){t.focusClienteCodigo()})},e.prototype.validarCliente=function(){this.cliente.invClientePK.cliCodigo!==this.clienteCodigo&&(this.clienteCodigo=null,this.cliente=new J.a)},e.prototype.focusClienteCodigo=function(){var e=document.getElementById("codCliente");e&&e.focus()},e.prototype.consultarCobros=function(){},e.prototype.iniciarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CONSULTAR,function(){return e.listaResultado.length,!1}))},e.prototype.generarOpciones=function(){var e=this,t=this.listaResultado.length>0&&this.objetoSeleccionado.maContable;this.opciones=[{label:p.a.ACCION_CONSULTAR_COBROS,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.consultarCobros():null}}]},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cobrosMayAux.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:Ie.a,toolTip:R.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.maContable&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.ejecutarAccion=function(e){this.objetoSeleccionado=e,this.consultarCobros()},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Te([Object(a.ViewChild)("menuOpciones"),_e("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),Te([Object(a.HostListener)("window:resize",["$event"]),_e("design:type",Function),_e("design:paramtypes",[]),_e("design:returntype",void 0)],e.prototype,"onResize",null),e=Te([Object(a.Component)({selector:"app-cobros-mayor-auxiliar-cliente",template:o("k77S"),styles:[o("8h7b")]}),_e("design:paramtypes",[i.ActivatedRoute,g.b,C.HotkeysService,v.a,m.a,G.b,U.a,b.a,Ee])],e)}(),Pe=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ne=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Le=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarListaCuentasPorCobrarDetallado=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaCuentasPorCobrarDetalladoTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarListaCuentasPorCobrarDetallado(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarListaCuentasPorCobrarDetallado=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarListaCuentasPorCobrarDetallado",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarListaCuentasPorCobrarDetallado.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCarListaCuentasPorCobrarDetallado=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarListaCuentasPorCobrarDetallado",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarListaCuentasPorCobrarDetallado_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PERIODO,field:"cxcdPeriodo",width:100,minWidth:100},{headerName:p.a.TAG_MOTIVO,field:"cxcdMotivo",width:80,minWidth:80},{headerName:p.a.TAG_NUMERO,field:"cxcdNumero",width:100,minWidth:100},{headerName:p.a.TAG_CLIENTE,field:"cxcdCliente",width:200,minWidth:200,cellClass:function(e){return e.data.cxcdPeriodo?"text-whitespace":"tr-negrita "}},{headerName:p.a.TAG_FECHA_EMISION,field:"cxcdFechaEmision",width:100,minWidth:100},{headerName:p.a.TAG_FECHA_VENCIMIENTO,field:"cxcdFechaVencimiento",width:100,minWidth:100},{headerName:p.a.TAG_SALDO,field:"cxcdSaldo",width:100,minWidth:100,valueFormatter:Me,cellClass:function(e){return e.data.cxcdPeriodo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(e){return e.data.cxcdPeriodo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.ACCION_CONSULTAR_VENTAS,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},e=Pe([Object(a.Injectable)({providedIn:"root"}),Ne("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function Me(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var De=o("WCSX"),Fe=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},xe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},we=function(){function e(e,t,o,i,r,n,s,c,h){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=i,this.utilService=r,this.modalService=n,this.sistemaService=s,this.sectorService=c,this.cuentasCobrarService=h,this.mostrarBtnCancelar=!1,this.cerrarCuentaDetallada=new a.EventEmitter,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.cliente=new J.a,this.clienteCodigo=null,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.filasTiempo=new u.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.listaResultado=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.parametrosFormulario={},this.vistaFormulario=!1,this.tipoDocumento=""}return e.prototype.ngOnInit=function(){this.constantes=p.a,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.cuentasPorCobrarDetallado,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.obtenerFechaInicioActualMes(),this.data&&this.setearValores(),this.focusClienteCodigo()},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cliente.invClientePK.cliCodigo="",this.cliente.cliRazonSocial="",this.sectorSeleccionado=null,this.listarSectores(),this.limpiarResultado()},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!0};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0"),this.vistaFormulario=!1},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.buscarCarListaCuentasPorCobrarDetallado=function(e){this.cargando=!0,this.limpiarResultado(),this.filasTiempo.iniciarContador();var t={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,cliente:this.clienteCodigo,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),ichfa:e};this.cuentasCobrarService.listarCarListaCuentasPorCobrarDetallado(t,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarCarListaCuentasPorCobrarDetallado=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCarListaCuentasPorCobrarDetallado=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cuentasCobrarService.imprimirCarListaCuentasPorCobrarDetallado(e,this,this.empresaSeleccionada)}},e.prototype.exportarCarListaCuentasPorCobrarDetallado=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.cliente?this.cliente.cliRazonSocial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cuentasCobrarService.exportarCarListaCuentasPorCobrarDetallado(e,this,this.empresaSeleccionada)}},e.prototype.consultarVentas=function(){this.objetoSeleccionado.cxcdPeriodo&&this.objetoSeleccionado.cxcdMotivo&&this.objetoSeleccionado.cxcdNumero&&(this.parametrosFormulario.accion=p.a.ACCION_CONSULTAR,this.parametrosFormulario.seleccionado=this.armarObjetoConsultaVentas(),this.vistaFormulario=!0,this.activar=!0)},e.prototype.armarObjetoConsultaVentas=function(){var e=new De.a(this.objetoSeleccionado);return e.vtaDocumentoTipo=null,e.vtaNumero=this.objetoSeleccionado.cxcdPeriodo+"|"+this.objetoSeleccionado.cxcdMotivo+"|"+this.objetoSeleccionado.cxcdNumero,e},e.prototype.ejecutarAccionVenta=function(e){switch(e.accion){case p.a.ACCION_CANCELAR:this.cancelar();break;case p.a.ACCION_ACTIVAR:this.activar=!this.activar}},e.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1,this.iniciarAtajosTeclado()},e.prototype.setearValores=function(){this.listaEmpresas=this.data.listaEmpresas,this.listaSectores=this.data.listaSectores,this.empresaSeleccionada=this.data.empresa,this.sectorSeleccionado=this.data.sector,this.clienteCodigo=this.data.cliente,this.fechaDesde=null,this.fechaHasta=this.data.hasta,this.mostrarBtnCancelar=this.data.mostrarBtnCancelar,this.buscarCarListaCuentasPorCobrarDetallado(!1)},e.prototype.buscarCliente=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.cliente.invClientePK.cliCodigo&&!(this.cliente.invClientePK.cliCodigo&&this.clienteCodigo&&this.cliente.invClientePK.cliCodigo===this.clienteCodigo)){var t={empresa:p.a.KEY_EMPRESA_SELECT,busqueda:this.cliente.invClientePK.cliCodigo,mostrarInactivo:!1};e.srcElement.blur(),e.preventDefault(),this.abrirModalCliente(t)}},e.prototype.abrirModalCliente=function(e){var t=this,o=this.modalService.open(W.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.clienteCodigo=e?e.cliCodigo:null,t.cliente.invClientePK.cliCodigo=e?e.cliCodigo:null,t.cliente.cliRazonSocial=e?e.cliRazonSocial:null,t.cliente.invClienteGrupoEmpresarial.geNombre=e?e.cliGrupoEmpresarialNombre:null,t.focusClienteCodigo()):t.focusClienteCodigo()},function(){t.focusClienteCodigo()})},e.prototype.validarCliente=function(){this.cliente.invClientePK.cliCodigo!==this.clienteCodigo&&(this.clienteCodigo=null,this.cliente=new J.a)},e.prototype.focusClienteCodigo=function(){var e=document.getElementById("codCliente");e&&e.focus()},e.prototype.iniciarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CONSULTAR,function(){return e.listaResultado.length,!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnRegresar");return e&&e.click(),!1}))},e.prototype.generarOpciones=function(){var e=this,t=this.listaResultado.length>0&&this.objetoSeleccionado.cxcdPeriodo;this.opciones=[{label:p.a.ACCION_CONSULTAR_VENTAS,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.consultarVentas():null}}]},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cuentasCobrarService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:Ie.a,toolTip:R.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.cxcdPeriodo&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.ejecutarAccion=function(e){this.consultarVentas()},e.prototype.cerrarCuentaDetallado=function(){this.cerrarCuentaDetallada.emit(!1)},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Fe([Object(a.Input)(),xe("design:type",Object)],e.prototype,"data",void 0),Fe([Object(a.Output)(),xe("design:type",Object)],e.prototype,"cerrarCuentaDetallada",void 0),Fe([Object(a.ViewChild)("menuOpciones"),xe("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),Fe([Object(a.HostListener)("window:resize",["$event"]),xe("design:type",Function),xe("design:paramtypes",[]),xe("design:returntype",void 0)],e.prototype,"onResize",null),e=Fe([Object(a.Component)({selector:"app-cuentas-cobrar-detallado",template:o("tmUb"),styles:[o("lrbC")]}),xe("design:paramtypes",[i.ActivatedRoute,g.b,C.HotkeysService,v.a,m.a,G.b,U.a,b.a,Le])],e)}(),je=function(){function e(e){this.id=0,this.antPeriodo="",this.antTipo="",this.antNumero="",this.antSector="",this.antFecha="",this.antValor=0,this.antClienteCodigo="",this.antClienteNombre="",this.antObservaciones="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.antPeriodo=e.antPeriodo?e.antPeriodo:this.antPeriodo,this.antTipo=e.antTipo?e.antTipo:this.antTipo,this.antNumero=e.antNumero?e.antNumero:this.antNumero,this.antSector=e.antSector?e.antSector:this.antSector,this.antFecha=e.antFecha?e.antFecha:this.antFecha,this.antValor=e.antValor?e.antValor:this.antValor,this.antClienteCodigo=e.antClienteCodigo?e.antClienteCodigo:this.antClienteCodigo,this.antClienteNombre=e.antClienteNombre?e.antClienteNombre:this.antClienteNombre,this.antObservaciones=e.antObservaciones?e.antObservaciones:this.antObservaciones},e}(),Ge=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ke=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ue=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.obtenerAnticipoCobro=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/obtenerAnticipoCobro",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerAnticipoCobro(e.extraInfo):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getCarListaCuentasPorCobrarSaldoAnticiposTO=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaCuentasPorCobrarSaldoAnticiposTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetCarListaCuentasPorCobrarSaldoAnticiposTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarAnticiposCobro=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/insertarAnticiposCobro",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarAnticiposCobro(e):(a.utilService.generarSwal(p.a.MSJ_ANTICIPO_PROVEEDORES,p.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCobrosAnticipo=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCuentasPorPagarAnticipos",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCobrosAnticipo.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.exportarCobrosAnticipo=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCuentasPorPagarAnticipos",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCobrosAnticipo_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.generarColumnas=function(e){var t=[];return t.push({headerName:p.a.TAG_PERIODO,field:"antPeriodo",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_TIPO,field:"antTipo",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_NUMERO,field:"antNumero",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_CP,field:"antSector",width:100,minWidth:100,maxWitdh:100,hide:e.sectorSeleccionado&&e.sectorSeleccionado.secCodigo,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:p.a.TAG_CENTRO_PRODUCCION,text:p.a.TAG_CP}},{headerName:p.a.TAG_FECHA,field:"antFecha",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_CLIENTE,field:"antClienteCodigo",width:100,minWidth:100,hide:e.clienteCodigo},{headerName:p.a.TAG_NOMBRE,field:"antClienteRazonSocial",width:200,minWidth:200,hide:e.clienteCodigo},{headerName:p.a.TAG_VALOR,valueFormatter:Be,cellClass:"text-right",field:"antValor",width:100,minWidth:100},{headerName:p.a.TAG_OBSERVACIONES,field:"antObservaciones",width:200,minWidth:200},this.utilService.getColumnaOpciones()),t},e.prototype.construirObjetoParaPonerloEnLaLista=function(e,t,o){var a=new je;return a.antFecha=this.utilService.formatoStringSinZonaHorariaYYYMMDD(t.conFecha),a.antNumero=t.conContablePK.conNumero,a.antPeriodo=t.conContablePK.conPeriodo,a.antTipo=t.conContablePK.conTipo,a.antObservaciones=t.conObservaciones,a.antValor=e.antValor,a.antSector=e.secCodigo,a.antClienteCodigo=e.cliCodigo,a.antClienteRazonSocial=o,a},e=Ge([Object(a.Injectable)({providedIn:"root"}),ke("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function Be(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var He=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ve=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ye=function(){function e(e,t,o,i,r,n,s,c,h,m){this.route=e,this.cobrosAnticipoService=t,this.sectorService=o,this.atajoService=i,this.archivoService=r,this.toastr=n,this.filasService=s,this.sistemaService=c,this.utilService=h,this.modalService=m,this.mostrarBtnCancelar=!1,this.cerrarAnticipoDetallado=new a.EventEmitter,this.listaEmpresas=new Array,this.listadoCobrosAnticipo=new Array,this.listadoSectores=[],this.empresaSeleccionada=new d.a,this.sectorSeleccionado=new l.a,this.parametrosFormulario={},this.parametrosListado={},this.constantes=p.a,this.isScreamMd=!0,this.filasTiempo=new u.a,this.cargando=!1,this.vistaFormulario=!1,this.activar=!1,this.cliente=new J.a,this.clienteCodigo=null,this.es={},this.fechaHasta=new Date,this.objetoContableEnviar=null,this.mostrarAccionesContabilidad=!1,this.esConsulta=null,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[]}return e.prototype.ngOnInit=function(){j.locale("es"),this.es=this.utilService.setLocaleDate(),this.esConsulta=this.route.snapshot.data.esConsulta,this.isScreamMd=!(window.innerWidth<=576),this.definirAtajosDeTeclado(),this.iniciarAgGrid(),this.data?(this.setearValoresConsultaDesdeAfuera(),p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas)):(this.listaEmpresas=this.route.snapshot.data.anticipoClientes,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.sistemaService.obtenerFechaActual(this,p.a.KEY_EMPRESA_SELECT))},e.prototype.cambiarEmpresaSeleccionada=function(){this.cargando=!0,p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.activar=!1,this.limpiarResultado(),this.listarSectores()},e.prototype.despuesDeObtenerFechaActual=function(e){this.fechaHasta=new Date(e)},e.prototype.listarSectores=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivos:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listadoSectores=e||[],this.listadoSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listadoSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.filasService.actualizarFilas("0","0"),this.listadoCobrosAnticipo=[],this.vistaFormulario=!1},e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimir");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CANCELAR,function(e){var t=document.getElementById("btnRegresar");return t&&t.click(),!1}))},e.prototype.listar=function(){if(this.iniciarAgGrid(),this.limpiarResultado(),this.filasTiempo.iniciarContador(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT,clienteCodigo:this.clienteCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta)};this.cobrosAnticipoService.getCarListaCuentasPorCobrarSaldoAnticiposTO(e,this,p.a.KEY_EMPRESA_SELECT),this.vistaFormulario=!1}},e.prototype.despuesDeGetCarListaCuentasPorCobrarSaldoAnticiposTO=function(e){this.filasTiempo.finalizarContador(),this.cargando=!1,this.listadoCobrosAnticipo=e},e.prototype.nuevo=function(){this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CREAR,sectorSeleccionado:this.sectorSeleccionado,cliente:this.clienteCodigo?this.cliente:null})},e.prototype.imprimir=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listadoCobrosAnticipo};this.cobrosAnticipoService.imprimirCobrosAnticipo(e,this,this.empresaSeleccionada)}},e.prototype.exportar=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listadoCobrosAnticipo};this.cobrosAnticipoService.exportarCobrosAnticipo(e,this,this.empresaSeleccionada)}},e.prototype.setearValoresConsultaDesdeAfuera=function(){this.listaEmpresas.push(this.data.empresa),this.empresaSeleccionada=this.listaEmpresas[0],this.listadoSectores=this.data.listaSectores,this.sectorSeleccionado=this.data.sector,this.clienteCodigo=this.data.clienteCodigo,this.cliente.invClientePK.cliCodigo=this.data.clienteCodigo,this.cliente.cliRazonSocial=this.data.razonSocial,this.fechaHasta=this.data.hasta,this.mostrarBtnCancelar=this.data.mostrarBtnCancelar,this.esConsulta=this.data.esConsulta,this.listar()},e.prototype.cerrarAnticipo=function(){this.cerrarAnticipoDetallado.emit(!1)},e.prototype.buscarCliente=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.cliente.invClientePK.cliCodigo&&!(this.cliente.invClientePK.cliCodigo&&this.clienteCodigo&&this.cliente.invClientePK.cliCodigo===this.clienteCodigo)){var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1,busqueda:this.cliente.invClientePK.cliCodigo};e.srcElement.blur(),e.preventDefault(),this.abrirModalCliente(t)}},e.prototype.abrirModalCliente=function(e){var t=this,o=this.modalService.open(W.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.clienteCodigo=e.cliCodigo,t.cliente.invClientePK.cliCodigo=e.cliCodigo,t.cliente.cliRazonSocial=e.cliRazonSocial,t.cliente.cliDireccion=e.cliDireccion,t.focusClienteCodigo()):t.focusClienteCodigo()},function(){t.focusClienteCodigo()})},e.prototype.validarCliente=function(){this.cliente.invClientePK.cliCodigo!==this.clienteCodigo&&(this.clienteCodigo=null,this.cliente=new J.a)},e.prototype.focusClienteCodigo=function(){var e=document.getElementById("codCliente");e&&e.focus()},e.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1},e.prototype.ejecutarAccion=function(e){switch(this.definirAtajosDeTeclado(),e.accion){case p.a.ACCION_ACTIVAR:this.activar=e.estado;break;case p.a.ACCION_CANCELAR:this.cancelar();break;case p.a.ACCION_CREADO:this.actualizarTabla(e);break;case p.a.ACCION_ELIMINADO:this.vistaFormulario=!1,this.gridApi&&this.gridApi.updateRowData({remove:[this.objetoSeleccionado]});break;case p.a.ACCION_CONSULTAR:this.irAlHijo(e)}},e.prototype.actualizarTabla=function(e){this.vistaFormulario=!1;var t=e.resultante;this.listadoCobrosAnticipo.unshift(t),this.gridApi&&this.gridApi.updateRowData({add:[t],addIndex:0}),this.activar=!1},e.prototype.consultarAnticipo=function(){this.irAlHijo({accion:p.a.ACCION_CONSULTAR,objetoSeleccionado:this.objetoSeleccionado})},e.prototype.irAlHijo=function(e){this.parametrosFormulario.accion=e.accion,this.parametrosFormulario.seleccionado=e.objetoSeleccionado,this.vistaFormulario=!0},e.prototype.generarOpciones=function(){var e=this,t=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,o=this.empresaSeleccionada.listaSisPermisoTO.gruAnularContables;this.opciones=[{label:p.a.LABEL_CONSULTAR_ANTICIPO,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.irAlHijo({accion:p.a.ACCION_CONSULTAR,objetoSeleccionado:e.objetoSeleccionado})}}],this.esConsulta||this.opciones.push({label:p.a.LABEL_REVERSAR_ANTICIPO,icon:p.a.ICON_REVERSAR,disabled:!t,command:function(){return t?e.irAlHijo({accion:p.a.ACCION_REVERSAR,objetoSeleccionado:e.objetoSeleccionado}):null}},{label:p.a.LABEL_ANULAR_ANTICIPO,icon:p.a.ICON_ANULAR,disabled:!o,command:function(){return o?e.irAlHijo({accion:p.a.ACCION_ANULAR,objetoSeleccionado:e.objetoSeleccionado}):null}}),this.opciones.push({label:p.a.ACCION_CONSULTAR_CONTABLE,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.verContable()}},{label:p.a.LABEL_IMPRIMIR_CONTABLE,icon:p.a.ICON_IMPRIMIR,disabled:!1,command:function(){return e.imprimirContable()}})},e.prototype.imprimirContable=function(){var e=this;this.cargando=!0;var t=[],o=new B.a;o.conEmpresa=this.empresaSeleccionada.empCodigo,o.conNumero=this.objetoSeleccionado.antNumero,o.conPeriodo=this.objetoSeleccionado.antPeriodo,o.conTipo=this.objetoSeleccionado.antTipo,t.push(o);var a={listadoPK:t};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableIndividual",a,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("Contable.pdf",t):e.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.verContable=function(){this.objetoSeleccionado?(this.mostrarAccionesContabilidad=!0,this.cargando=!0,this.objetoContableEnviar={accion:p.a.ACCION_CONSULTAR,contable:this.objetoSeleccionado.antPeriodo+" | "+this.objetoSeleccionado.antTipo+" | "+this.objetoSeleccionado.antNumero,empresaSeleccionada:this.empresaSeleccionada,activar:!0,volverACargar:!0},this.activar=!0):this.toastr.warning(p.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,p.a.TAG_AVISO)},e.prototype.cerrarContabilidadAcciones=function(e){e.noIniciarAtajoPadre||(this.definirAtajosDeTeclado(),this.activar=!1,this.objetoContableEnviar=e.objetoEnviar,this.mostrarAccionesContabilidad=e.mostrarContilidadAcciones)},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e},e.prototype.cambiarEstadoActivar=function(e){this.activar=e},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cobrosAnticipoService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={toolTip:R.a}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},He([Object(a.Input)(),Ve("design:type",Object)],e.prototype,"data",void 0),He([Object(a.Output)(),Ve("design:type",Object)],e.prototype,"cerrarAnticipoDetallado",void 0),He([Object(a.ViewChild)("menuOpciones"),Ve("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),e=He([Object(a.Component)({selector:"app-cobros-anticipos",template:o("ruwe")}),Ve("design:paramtypes",[i.ActivatedRoute,Ue,b.a,C.HotkeysService,H.a,g.b,v.a,U.a,m.a,G.b])],e)}(),ze=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Je=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},We=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarListaCuentasPorCobrarGeneral=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaCuentasPorCobrarGeneralTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarListaCuentasPorCobrarGeneral(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarListaCuentasPorCobrarGeneral=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarListaCuentasPorCobrarGeneral",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarListaCuentasPorCobrarGeneral.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarReporteCarListaCuentasPorCobrarGeneral=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarListaCuentasPorCobrarGeneral",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarListaCuentasPorCobrarGeneral_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_CODIGO,field:"cxpgCodigo",width:100,minWidth:100},{headerName:p.a.TAG_NOMBRE,field:"cxpgNombre",width:200,minWidth:200,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace":"tr-negrita "}},{headerName:p.a.TAG_SALDO,field:"cxpgSaldo",width:100,minWidth:100,valueFormatter:Ke,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(e){return e.data.cxpgCodigo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.ACCION_CONSULTAR_VENTAS,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},e=ze([Object(a.Injectable)({providedIn:"root"}),Je("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function Ke(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var Xe=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},$e=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qe=function(){function e(e,t,o,a,i,r,n,s){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=a,this.utilService=i,this.sistemaService=r,this.sectorService=n,this.cuentasCobrosGService=s,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.listaSectores=[],this.sectorSeleccionado=new l.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.filasTiempo=new u.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.listaResultado=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.vistaFormulario=!1}return e.prototype.ngOnInit=function(){this.constantes=p.a,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.cuentasPorCobrarGeneral,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.obtenerFechaInicioActualMes()},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.listarSectores(),this.limpiarResultado()},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!0};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0"),this.vistaFormulario=!1},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.buscarCarListaCuentasPorCobrarGeneral=function(e){if(this.cargando=!0,this.limpiarResultado(),this.utilService.establecerFormularioTocado(e)&&e&&e.valid){this.filasTiempo.iniciarContador();var t={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta)};this.cuentasCobrosGService.listarCarListaCuentasPorCobrarGeneral(t,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.despuesDeListarCarListaCuentasPorCobrarGeneral=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCarListaCuentasPorCobrarGeneral=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cuentasCobrosGService.imprimirCarListaCuentasPorCobrarGeneral(e,this,this.empresaSeleccionada)}},e.prototype.exportarReporteCarListaCuentasPorCobrarGeneral=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cuentasCobrosGService.exportarReporteCarListaCuentasPorCobrarGeneral(e,this,this.empresaSeleccionada)}},e.prototype.consultarCuentasCobrarDetallado=function(){this.objetoSeleccionado.cxpgCodigo&&(this.vistaFormulario=!0,this.parametros={empresa:this.empresaSeleccionada,sector:this.sectorSeleccionado,cliente:this.objetoSeleccionado.cxpgCodigo,hasta:this.fechaHasta,estado:!1,listaEmpresas:this.listaEmpresas,listaSectores:this.listaSectores,mostrarBtnCancelar:!0})},e.prototype.cerrarCuentaDetallada=function(e){this.vistaFormulario=e,this.iniciarAtajosTeclado()},e.prototype.iniciarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CONSULTAR,function(){return e.listaResultado.length,!1}))},e.prototype.generarOpciones=function(){var e=this,t=this.listaResultado.length>0&&this.objetoSeleccionado.cxpgCodigo;this.opciones=[{label:p.a.ACCION_CONSULTAR_COBROS,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.consultarCuentasCobrarDetallado():null}}]},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cuentasCobrosGService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:Ie.a,toolTip:R.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.cxpgCodigo&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.ejecutarAccion=function(e){this.consultarCuentasCobrarDetallado()},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Xe([Object(a.ViewChild)("menuOpciones"),$e("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),Xe([Object(a.HostListener)("window:resize",["$event"]),$e("design:type",Function),$e("design:paramtypes",[]),$e("design:returntype",void 0)],e.prototype,"onResize",null),e=Xe([Object(a.Component)({selector:"app-cuentas-cobrar-general",template:o("SNJl"),styles:[o("QUpq")]}),$e("design:paramtypes",[i.ActivatedRoute,g.b,C.HotkeysService,v.a,m.a,U.a,b.a,We])],e)}(),Ze=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Qe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},et=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarListaCuentasPorCobrarAnticipos=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaCuentasPorCobrarAnticiposTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarListaCuentasPorCobrarAnticipos(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCuentasPorCobrarAnticipos=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCuentasPorCobrarAnticipos",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCuentasPorCobrarAnticipos.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCuentasPorCobrarAnticiposo=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCuentasPorCobrarAnticipos",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCuentasPorCobrarAnticipos_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_CODIGO,field:"cxpgCodigo",width:180,minWidth:180},{headerName:p.a.TAG_NOMBRE,field:"cxpgNombre",width:250,minWidth:200,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace":"tr-negrita "}},{headerName:p.a.TAG_SALDO,headerClass:"cell-header-center",field:"cxpgSaldo",width:100,minWidth:100,valueFormatter:tt,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_ANTICIPOS,headerClass:"cell-header-center",field:"cxpgAnticipos",width:100,minWidth:100,valueFormatter:tt,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_TOTAL,field:"cxpgTotal",width:100,minWidth:100,valueFormatter:tt,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(e){return e.data.cxpgCodigo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.ACCION_CONSULTAR_SALDOS,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},e=Ze([Object(a.Injectable)({providedIn:"root"}),Qe("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function tt(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var ot=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},at=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},it=function(){function e(e,t,o,a,i,r,n){this.route=e,this.atajoService=t,this.filasService=o,this.utilService=a,this.sistemaService=i,this.sectorService=r,this.anticipoSaldoGeneralService=n,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.listaSectores=[],this.sectorSeleccionado=new l.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.filasTiempo=new u.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.listaResultado=[],this.vistaFormulario=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return e.prototype.ngOnInit=function(){this.constantes=p.a,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.anticipoClienteSaldoGeneral,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.obtenerFechaInicioActualMes()},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.listarSectores(),this.limpiarResultado()},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!0};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0")},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.buscarCarCuentasPorCobrarAnticipos=function(){if(this.cargando=!0,this.limpiarResultado(),this.filasTiempo.iniciarContador(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta)};this.anticipoSaldoGeneralService.listarCarListaCuentasPorCobrarAnticipos(e,this,p.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeListarCarListaCuentasPorCobrarAnticipos=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCuentasPorCobrarAnticipos=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.anticipoSaldoGeneralService.imprimirCuentasPorCobrarAnticipos(e,this,this.empresaSeleccionada)}},e.prototype.exportarCuentasPorCobrarAnticiposo=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.anticipoSaldoGeneralService.exportarCuentasPorCobrarAnticiposo(e,this,this.empresaSeleccionada)}},e.prototype.consultarAnticipoSaldoDetallado=function(){this.objetoSeleccionado.cxpgCodigo&&(this.vistaFormulario=!0,this.parametros={empresa:this.empresaSeleccionada,listaSectores:this.listaSectores,sector:this.sectorSeleccionado,clienteCodigo:this.objetoSeleccionado.cxpgCodigo,razonSocial:this.objetoSeleccionado.cxpgNombre,hasta:this.fechaHasta,mostrarBtnCancelar:!0,esConsulta:"esConsulta"})},e.prototype.cerrarAnticipoDetallado=function(e){this.vistaFormulario=e,this.iniciarAtajosTeclado()},e.prototype.iniciarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CONSULTAR,function(){return e.listaResultado.length>0&&e.consultarAnticipoSaldoDetallado(),!1}))},e.prototype.generarOpciones=function(){var e=this,t=this.listaResultado.length>0&&this.objetoSeleccionado.cxpgCodigo;this.opciones=[{label:p.a.ACCION_CONSULTAR_SALDOS,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.consultarAnticipoSaldoDetallado():null}}]},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.anticipoSaldoGeneralService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:Ie.a,toolTip:R.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.cxpgCodigo&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.ejecutarAccion=function(e){this.objetoSeleccionado=e,this.consultarAnticipoSaldoDetallado()},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},ot([Object(a.ViewChild)("menuOpciones"),at("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),ot([Object(a.HostListener)("window:resize",["$event"]),at("design:type",Function),at("design:paramtypes",[]),at("design:returntype",void 0)],e.prototype,"onResize",null),e=ot([Object(a.Component)({selector:"app-anticipo-cliente-saldo-general",template:o("ohg+"),styles:[o("ypxO")]}),at("design:paramtypes",[i.ActivatedRoute,C.HotkeysService,v.a,m.a,U.a,b.a,et])],e)}(),rt=o("d+pv"),nt=o("n1xb"),st=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ct=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},lt=function(){function e(e,t,o,a,i,r,n,s,c,d,h,m){this.modalService=e,this.toastr=t,this.utilService=o,this.sectorService=a,this.route=i,this.filasService=r,this.atajoService=n,this.sistemaService=s,this.pagosListadoService=c,this.mayorAuxiliarService=d,this.cdRef=h,this.archivoService=m,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.listaEmpresas=[],this.constantes=p.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new u.a,this.proveedor=new rt.a,this.codigoProveedor=null,this.esConsulta=null,this.fechaInicio=new Date,this.fechaFin=new Date,this.fechaActual=new Date,this.es={},this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.rowClassRules={},this.listaResultado=[],this.vistaFormulario=!1,this.parametrosFormulario={},this.objetoContableEnviar=null,this.activarInicial=!1,this.mostrarContabilidaAcciones=!1,this.listadoResultadoMayorAuxiliar=[]}return e.prototype.ngOnInit=function(){j.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.pagosListado,this.esConsulta=this.route.snapshot.data.esConsulta,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid(),this.obtenerFechaInicioActualMes()},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CONSULTAR,function(){return e.listaResultado.length>0&&e.operacionMayorAuxiliar(p.a.ACCION_CONSULTAR),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.proveedor=new rt.a,this.codigoProveedor=null,this.limpiarResultado(),this.listarSectores()},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaInicio=t[0],e.fechaFin=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.buscarCarFunPagos=function(){if(this.cargando=!0,this.limpiarResultado(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){this.filasTiempo.iniciarContador();var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),proveedor:this.codigoProveedor};this.pagosListadoService.listarCarFunPagos(e,this,p.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeListarCarFunPagos=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCarFunPagos=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),proveedor:this.proveedor?this.proveedor.provNombreComercial:"",listado:this.listaResultado};this.pagosListadoService.imprimirCarFunPagos(e,this,this.empresaSeleccionada)}},e.prototype.exportarCarFunPagos=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),proveedor:this.proveedor?this.proveedor.provNombreComercial:"",listado:this.listaResultado};this.pagosListadoService.exportarCarFunPagos(e,this,this.empresaSeleccionada)}},e.prototype.nuevo=function(){this.utilService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CREAR,sectorSeleccionado:this.sectorSeleccionado,proveedor:this.codigoProveedor?this.proveedor:null})},e.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1},e.prototype.ejecutarAccion=function(e){switch(this.generarAtajosTeclado(),e.accion){case p.a.ACCION_ACTIVAR:this.activar=e.estado;break;case p.a.ACCION_CANCELAR:this.cancelar();break;case p.a.ACCION_CREADO:this.actualizarTabla(e);break;case p.a.ACCION_ELIMINADO:this.vistaFormulario=!1,this.gridApi&&this.gridApi.updateRowData({remove:[this.objetoSeleccionado]});break;case p.a.ACCION_CONSULTAR:this.irAlHijo(e)}},e.prototype.actualizarTabla=function(e){this.vistaFormulario=!1;var t=e.resultante;this.listaResultado.unshift(t),this.gridApi&&this.gridApi.updateRowData({add:[t],addIndex:0}),this.activar=!1},e.prototype.consultarPagos=function(){this.irAlHijo({accion:p.a.ACCION_CONSULTAR,objetoSeleccionado:this.objetoSeleccionado})},e.prototype.irAlHijo=function(e){this.parametrosFormulario.accion=e.accion,this.parametrosFormulario.seleccionado=e.objetoSeleccionado,this.vistaFormulario=!0},e.prototype.buscarProveedor=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esValidoProveedor())if(this.proveedor&&this.proveedor.provCodigo.length>0){var o=this.proveedor.provCodigo.toUpperCase(),a={empresa:p.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:o};e.srcElement.blur(),e.preventDefault();var i=this.modalService.open(k.a,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.result.then(function(e){e&&(t.proveedor=new rt.a(e),t.codigoProveedor=t.proveedor.provCodigo)},function(){t.focusProveedorCodigo()})}else this.toastr.info(p.a.MSJ_ENTERTOMODAL,p.a.TAG_AVISO)},e.prototype.focusProveedorCodigo=function(){var e=document.getElementById("provCodigo");e&&e.focus()},e.prototype.esValidoProveedor=function(){return""!=this.proveedor.provCodigo&&this.proveedor.provCodigo===this.codigoProveedor},e.prototype.validarProveedor=function(){this.proveedor.provCodigo!==this.codigoProveedor&&(this.proveedor=new rt.a,this.codigoProveedor=null)},e.prototype.generarOpciones=function(){var e=this,t=this.objetoSeleccionado.pagNumeroSistema,o=this.empresaSeleccionada.listaSisPermisoTO.gruImprimir,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,i=this.empresaSeleccionada.listaSisPermisoTO.gruAnularContables;this.opciones=[{label:p.a.LABEL_CONSULTAR_PAGO,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.irAlHijo({accion:p.a.ACCION_CONSULTAR,objetoSeleccionado:e.objetoSeleccionado}):null}}],this.esConsulta||this.opciones.push({label:p.a.LABEL_REVERSAR_COBRO,icon:p.a.ICON_REVERSAR,disabled:!a,command:function(){return a?e.irAlHijo({accion:p.a.ACCION_REVERSAR,objetoSeleccionado:e.objetoSeleccionado}):null}},{label:p.a.LABEL_ANULAR_COBRO,icon:p.a.ICON_ANULAR,disabled:!i,command:function(){return i?e.irAlHijo({accion:p.a.ACCION_ANULAR,objetoSeleccionado:e.objetoSeleccionado}):null}}),this.opciones.push({label:p.a.ACCION_CONSULTAR_CONTABLE,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.operacionMayorAuxiliar(p.a.ACCION_CONSULTAR):null}},{label:p.a.LABEL_IMPRIMIR_CONTABLE,icon:p.a.ICON_IMPRIMIR,disabled:!o,command:function(){return o?e.imprimirContable():null}})},e.prototype.operacionMayorAuxiliar=function(e){this.mayorAuxiliarService.verificarPermiso(e,this,!0)&&this.objetoSeleccionado.pagNumeroSistema&&(this.cargando=!0,this.activarInicial=JSON.parse(JSON.stringify(this.activar)),this.objetoContableEnviar={accion:e,contable:this.objetoSeleccionado.pagNumeroSistema,empresaSeleccionada:this.empresaSeleccionada,activar:!0,tipoContable:null,listaPeriodos:[],volverACargar:!0})},e.prototype.cerrarContabilidadAcciones=function(e){this.activar=e.objetoEnviar?e.objetoEnviar.activar:this.activarInicial,this.objetoContableEnviar=e.objetoEnviar,this.mostrarContabilidaAcciones=e.mostrarContilidadAcciones,this.cdRef.detectChanges()},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e,this.cdRef.detectChanges()},e.prototype.cambiarEstadoActivar=function(e){this.activar=e,this.cdRef.detectChanges()},e.prototype.imprimirContable=function(){var e=this;this.cargando=!0;var t=[],o=this.utilService.obtenerConContablePK(this.objetoSeleccionado.pagNumeroSistema,p.a.KEY_EMPRESA_SELECT,"|");t.push(o);var a={listadoPK:t};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableIndividual",a,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("Contable.pdf",t):e.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.pagosListadoService.generarColumnas(this),this.columnDefsSelected=this.columnDefs,this.context={componentParent:this},this.components={},this.frameworkComponents={botonOpciones:Ie.a,toolTip:R.a,inputEstado:E.a},this.rowClassRules={"fila-pendiente":function(e){return!0===e.data.cobPendiente}}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.pagNumeroSistema&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},st([Object(a.ViewChild)("menuOpciones"),ct("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),st([Object(a.HostListener)("window:resize",["$event"]),ct("design:type",Function),ct("design:paramtypes",[]),ct("design:returntype",void 0)],e.prototype,"onResize",null),e=st([Object(a.Component)({selector:"app-pagos-listado",template:o("OdhW")}),ct("design:paramtypes",[G.b,g.b,m.a,b.a,i.ActivatedRoute,v.a,C.HotkeysService,U.a,nt.a,oe.a,a.ChangeDetectorRef,H.a])],e)}(),dt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},pt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ut=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarFunPagosDetalle=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarFunPagosDetalleTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarFunPagosDetalle(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarFunPagosDetalle=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarFunPagosDetalle",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarFunPagosDetalle.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCarFunPagosDetalle=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarFunPagosDetalle",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarFunPagosDetalle_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=[];return t.push({headerName:p.a.TAG_NUMERO,field:"pagNumeroSistema",width:180,minWidth:180},{headerName:p.a.TAG_FECHA,field:"pagFecha",width:80,minWidth:80}),e.codigoProveedor||t.push({headerName:p.a.TAG_PROVEEDOR,field:"pagProveedor",width:250,minWidth:250,cellClass:function(e){return e.data.pagNumeroSistema?"text-whitespace":"tr-negrita"}}),t.push({headerName:p.a.TAG_VALOR,field:"pagValor",width:100,minWidth:100,valueFormatter:ht,cellClass:function(e){return e.data.pagNumeroSistema?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OBSERVACIONES,field:"pagObservaciones",width:350,minWidth:300},{headerName:p.a.TAG_PENDIENTE,headerClass:"cell-header-center",field:"pagPendiente",width:100,minWidth:100,cellRenderer:"inputEstado",cellClass:function(e){return e.data.pagNumeroSistema?"text-center":"ag-hidden"}},{headerName:p.a.TAG_ANULADO,headerClass:"cell-header-center",field:"pagAnulado",width:100,minWidth:100,cellRenderer:"inputEstado",cellClass:function(e){return e.data.pagNumeroSistema?"text-center":"ag-hidden"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(e){return e.data.pagNumeroSistema?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.ACCION_CONSULTAR,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}),t},e=dt([Object(a.Injectable)({providedIn:"root"}),pt("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function ht(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var mt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ct=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ft=function(){function e(e,t,o,a,i,r,n,s,c){this.modalService=e,this.toastr=t,this.utilService=o,this.sectorService=a,this.route=i,this.filasService=r,this.atajoService=n,this.sistemaService=s,this.pagosDetalleService=c,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.listaEmpresas=[],this.constantes=p.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new u.a,this.proveedor=new rt.a,this.codigoProveedor=null,this.fechaInicio=new Date,this.fechaFin=new Date,this.fechaActual=new Date,this.es={},this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.listaResultado=[]}return e.prototype.ngOnInit=function(){j.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.pagosDetalle,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.obtenerFechaInicioActualMes()},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CONSULTAR,function(){return e.listaResultado.length>0&&e.consultarPagos(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.proveedor=new rt.a,this.codigoProveedor=null,this.limpiarResultado(),this.listarSectores()},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaInicio=t[0],e.fechaFin=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.buscarCarFunPagosDetalle=function(){if(this.cargando=!0,this.limpiarResultado(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){this.filasTiempo.iniciarContador();var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),proveedor:this.codigoProveedor,formaPago:null};this.pagosDetalleService.listarCarFunPagosDetalle(e,this,p.a.KEY_EMPRESA_SELECT)}this.cargando=!1},e.prototype.despuesDeListarCarFunPagosDetalle=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCarFunPagosDetalle=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),proveedor:this.proveedor?this.proveedor.provNombreComercial:"",listado:this.listaResultado};this.pagosDetalleService.imprimirCarFunPagosDetalle(e,this,this.empresaSeleccionada)}},e.prototype.exportarCarFunPagosDetalle=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),proveedor:this.proveedor?this.proveedor.provNombreComercial:"",listado:this.listaResultado};this.pagosDetalleService.exportarCarFunPagosDetalle(e,this,this.empresaSeleccionada)}},e.prototype.buscarProveedor=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esValidoProveedor())if(this.proveedor&&this.proveedor.provCodigo.length>0){var o=this.proveedor.provCodigo.toUpperCase(),a={empresa:p.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:o};e.srcElement.blur(),e.preventDefault();var i=this.modalService.open(k.a,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.result.then(function(e){e&&(t.proveedor=new rt.a(e),t.codigoProveedor=t.proveedor.provCodigo)},function(){t.focusProveedorCodigo()})}else this.toastr.info(p.a.MSJ_ENTERTOMODAL,p.a.TAG_AVISO)},e.prototype.focusProveedorCodigo=function(){var e=document.getElementById("provCodigo");e&&e.focus()},e.prototype.esValidoProveedor=function(){return""!=this.proveedor.provCodigo&&this.proveedor.provCodigo===this.codigoProveedor},e.prototype.validarProveedor=function(){this.proveedor.provCodigo!==this.codigoProveedor&&(this.proveedor=new rt.a,this.codigoProveedor=null)},e.prototype.generarOpciones=function(){var e=this,t=this.objetoSeleccionado.pagNumeroSistema;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.consultarPagos():null}}]},e.prototype.consultarPagos=function(){this.objetoSeleccionado.pagNumeroSistema},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.pagosDetalleService.generarColumnas(this),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:Ie.a,toolTip:R.a,inputEstado:E.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.pagNumeroSistema&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},mt([Object(a.ViewChild)("menuOpciones"),Ct("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),mt([Object(a.HostListener)("window:resize",["$event"]),Ct("design:type",Function),Ct("design:paramtypes",[]),Ct("design:returntype",void 0)],e.prototype,"onResize",null),e=mt([Object(a.Component)({selector:"app-pagos-detalle",template:o("CsZV"),styles:[o("yjXC")]}),Ct("design:paramtypes",[G.b,g.b,m.a,b.a,i.ActivatedRoute,v.a,C.HotkeysService,U.a,ut])],e)}(),bt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},vt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},gt=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCuentasPorPagarListadoCompras=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarFunCuentasPorPagarListadoComprasTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCuentasPorPagarListadoCompras(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCuentasPorPagarListadoCompras=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarFunCuentasPorPagarListadoCompras",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCuentasPorPagarListadoComprass.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCuentasPorPagarListadoCompras=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCuentasPorPagarListadoCompras",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCuentasPorPagarListadoCompras_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PERIODO,field:"cxpdPeriodo",width:80,minWidth:80},{headerName:p.a.TAG_MOTIVO,field:"cxpdMotivo",width:80,minWidth:80},{headerName:p.a.TAG_NUMERO,field:"cxpdNumero",width:80,minWidth:80},{headerName:p.a.TAG_PROVEEDOR,field:"cxpdProveedor",width:250,minWidth:200,cellClass:function(e){return e.data.cxpdPeriodo?"text-whitespace":"text-whitespace tr-negrita"}},{headerName:p.a.TAG_FECHA_EMISION,field:"cxpdFechaEmision",width:130,minWidth:130},{headerName:p.a.TAG_FECHA_VENCIMIENTO,field:"cxpdFechaVencimiento",width:130,minWidth:130},{headerName:p.a.TAG_SALDO,field:"cxpdSaldo",width:100,minWidth:100,valueFormatter:At,cellClass:function(e){return e.data.cxpdPeriodo?"text-whitespace text-right":"tr-negrita text-right"}}]},e=bt([Object(a.Injectable)({providedIn:"root"}),vt("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function At(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var St=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Rt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Et=function(){function e(e,t,o,a,i,r,n,s,c){this.modalService=e,this.toastr=t,this.utilService=o,this.sectorService=a,this.route=i,this.filasService=r,this.atajoService=n,this.sistemaService=s,this.pagosListadoComprasService=c,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.listaEmpresas=[],this.constantes=p.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new u.a,this.proveedor=new rt.a,this.codigoProveedor=null,this.fechaInicio=new Date,this.fechaFin=new Date,this.fechaActual=new Date,this.es={},this.listaResultado=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return e.prototype.ngOnInit=function(){j.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.pagosListadoCompra,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.obtenerFechaInicioActualMes()},e.prototype.generarAtajosTeclado=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.proveedor=new rt.a,this.codigoProveedor=null,this.limpiarResultado(),this.listarSectores()},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaInicio=t[0],e.fechaFin=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.buscarCuentasPorPagarListadoCompras=function(){if(this.cargando=!0,this.limpiarResultado(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){this.filasTiempo.iniciarContador();var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,proveedor:this.codigoProveedor,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin)};this.pagosListadoComprasService.listarCuentasPorPagarListadoCompras(e,this,p.a.KEY_EMPRESA_SELECT)}this.cargando=!1},e.prototype.despuesDeListarCuentasPorPagarListadoCompras=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCuentasPorPagarListadoCompras=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),proveedor:this.proveedor?this.proveedor.provNombreComercial:"",listado:this.listaResultado};this.pagosListadoComprasService.imprimirCuentasPorPagarListadoCompras(e,this,this.empresaSeleccionada)}},e.prototype.exportarCuentasPorPagarListadoCompras=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),proveedor:this.proveedor?this.proveedor.provNombreComercial:"",listado:this.listaResultado};this.pagosListadoComprasService.exportarCuentasPorPagarListadoCompras(e,this,this.empresaSeleccionada)}},e.prototype.buscarProveedor=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esValidoProveedor())if(this.proveedor&&this.proveedor.provCodigo.length>0){var o=this.proveedor.provCodigo.toUpperCase(),a={empresa:p.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:o};e.srcElement.blur(),e.preventDefault();var i=this.modalService.open(k.a,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.result.then(function(e){e&&(t.proveedor=new rt.a(e),t.codigoProveedor=t.proveedor.provCodigo)},function(){t.focusProveedorCodigo()})}else this.toastr.info(p.a.MSJ_ENTERTOMODAL,p.a.TAG_AVISO)},e.prototype.focusProveedorCodigo=function(){var e=document.getElementById("provCodigo");e&&e.focus()},e.prototype.esValidoProveedor=function(){return""!=this.proveedor.provCodigo&&this.proveedor.provCodigo===this.codigoProveedor},e.prototype.validarProveedor=function(){this.proveedor.provCodigo!==this.codigoProveedor&&(this.proveedor=new rt.a,this.codigoProveedor=null)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.pagosListadoComprasService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},St([Object(a.HostListener)("window:resize",["$event"]),Rt("design:type",Function),Rt("design:paramtypes",[]),Rt("design:returntype",void 0)],e.prototype,"onResize",null),e=St([Object(a.Component)({selector:"app-pagos-listado-compra",template:o("8ESZ"),styles:[o("SQm2")]}),Rt("design:paramtypes",[G.b,g.b,m.a,b.a,i.ActivatedRoute,v.a,C.HotkeysService,U.a,gt])],e)}(),Ot=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},It=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Tt=function(){function e(e,t,o,a,i,r,n,s,c){this.modalService=e,this.toastr=t,this.utilService=o,this.sectorService=a,this.route=i,this.filasService=r,this.atajoService=n,this.sistemaService=s,this.pagosMayAux=c,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.listaEmpresas=[],this.constantes=p.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new u.a,this.proveedor=new rt.a,this.codigoProveedor=null,this.fechaInicio=new Date,this.fechaFin=new Date,this.fechaActual=new Date,this.es={},this.listaResultado=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return e.prototype.ngOnInit=function(){j.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.pagosMayorAuxiliarProveedor,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.obtenerFechaInicioActualMes()},e.prototype.generarAtajosTeclado=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.proveedor=new rt.a,this.codigoProveedor=null,this.limpiarResultado(),this.listarSectores()},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,p.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaInicio=t[0],e.fechaFin=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.buscarCarListaMayorAuxiliarClienteProveedor=function(){if(this.cargando=!0,this.limpiarResultado(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){this.filasTiempo.iniciarContador();var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),proveedor:this.codigoProveedor,accion:"P"};this.pagosMayAux.listarCarListaMayorAuxiliarClienteProveedor(e,this,p.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeListarCarListaMayorAuxiliarClienteProveedor=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCarListaMayorAuxiliarClienteProveedor=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.proveedor?this.proveedor.provNombreComercial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),listado:this.listaResultado,tipo:"P"};this.pagosMayAux.imprimirCarListaMayorAuxiliarClienteProveedor(e,this,this.empresaSeleccionada)}},e.prototype.exportarCarListaMayorAuxiliarClienteProveedor=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",cliente:this.proveedor?this.proveedor.provNombreComercial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaDesde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaInicio),fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),listado:this.listaResultado,tipo:"P"};this.pagosMayAux.exportarCarListaMayorAuxiliarClienteProveedor(e,this,this.empresaSeleccionada)}},e.prototype.buscarProveedor=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esValidoProveedor())if(this.proveedor&&this.proveedor.provCodigo.length>0){var o=this.proveedor.provCodigo.toUpperCase(),a={empresa:p.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:o};e.srcElement.blur(),e.preventDefault();var i=this.modalService.open(k.a,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.result.then(function(e){e&&(t.proveedor=new rt.a(e),t.codigoProveedor=t.proveedor.provCodigo)},function(){t.focusProveedorCodigo()})}else this.toastr.info(p.a.MSJ_ENTERTOMODAL,p.a.TAG_AVISO)},e.prototype.focusProveedorCodigo=function(){var e=document.getElementById("provCodigo");e&&e.focus()},e.prototype.esValidoProveedor=function(){return""!=this.proveedor.provCodigo&&this.proveedor.provCodigo===this.codigoProveedor},e.prototype.validarProveedor=function(){this.proveedor.provCodigo!==this.codigoProveedor&&(this.proveedor=new rt.a,this.codigoProveedor=null)},e.prototype.generarOpciones=function(){var e=this;if(this.objetoSeleccionado&&this.objetoSeleccionado.maClavePrincipal){var t=this.objetoSeleccionado.maClavePrincipal.split("|")[0],o=this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this)&&"COMP "===t,a=this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this)&&"PAGO "===t;this.opciones=[{label:p.a.ACCION_CONSULTAR_COMPRA,icon:p.a.ICON_CONSULTAR,disabled:!o,command:function(){return o?e.consultaCompras():null}},{label:p.a.ACCION_CONSULTAR_PAGOS,icon:p.a.ICON_CONSULTAR,disabled:!a,command:function(){return a?e.consultaPagos():null}}]}},e.prototype.consultaCompras=function(){},e.prototype.consultaPagos=function(){},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.pagosMayAux.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:S.a,toolTip:R.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.maContable&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.ejecutarAccion=function(e){var t=this.objetoSeleccionado.maClavePrincipal.split("|")[0];"COMP "===t&&this.consultaCompras(),"PAGO "===t&&this.consultaPagos()},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Ot([Object(a.ViewChild)("menuOpciones"),It("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),Ot([Object(a.HostListener)("window:resize",["$event"]),It("design:type",Function),It("design:paramtypes",[]),It("design:returntype",void 0)],e.prototype,"onResize",null),e=Ot([Object(a.Component)({selector:"app-pagos-mayor-auxiliar-proveedor",template:o("zhTR"),styles:[o("0Fu4")]}),It("design:paramtypes",[G.b,g.b,m.a,b.a,i.ActivatedRoute,v.a,C.HotkeysService,U.a,Ee])],e)}(),_t=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},yt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pt=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarListaCuentasPorPagarDetallado=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaCuentasPorPagarDetalladoTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarListaCuentasPorPagarDetallado(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarListaCuentasPorPagarDetallado=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarListaCuentasPorPagarDetallado",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarListaCuentasPorPagarDetallado.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCarListaCuentasPorPagarDetallado=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarCarListaCuentasPorPagarDetallado",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarListaCuentasPorPagarDetallado_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_PERIODO,field:"cxpdPeriodo",width:100,minWidth:100},{headerName:p.a.TAG_MOTIVO,field:"cxpdMotivo",width:80,minWidth:80},{headerName:p.a.TAG_NUMERO,field:"cxpdNumero",width:100,minWidth:100},{headerName:p.a.TAG_PROVEEDOR,field:"cxpdProveedor",width:200,minWidth:200,cellClass:function(e){return e.data.cxpdPeriodo?"text-whitespace":"tr-negrita "}},{headerName:p.a.TAG_FECHA_EMISION,field:"cxpdFechaEmision",width:100,minWidth:100},{headerName:p.a.TAG_FECHA_VENCIMIENTO,field:"cxpdFechaVencimiento",width:120,minWidth:120},{headerName:p.a.TAG_SALDO,field:"cxpdSaldo",width:80,minWidth:80,valueFormatter:Nt,cellClass:function(e){return e.data.cxpdPeriodo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(e){return e.data.cxpdPeriodo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.ACCION_CONSULTAR_COMPRA,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},e=_t([Object(a.Injectable)({providedIn:"root"}),yt("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function Nt(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var Lt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Mt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Dt=function(){function e(e,t,o,i,r,n,s,c,d){this.modalService=e,this.toastr=t,this.utilService=o,this.sectorService=i,this.route=r,this.filasService=n,this.atajoService=s,this.sistemaService=c,this.cuentasPagarDetalladoService=d,this.listaSectores=[],this.sectorSeleccionado=new l.a,this.listaEmpresas=[],this.constantes=p.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new u.a,this.proveedor=new rt.a,this.codigoProveedor=null,this.fechaFin=new Date,this.fechaActual=new Date,this.es={},this.listaResultado=[],this.mostrarBtnCancelar=!1,this.cerrarCuentaDetallada=new a.EventEmitter,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return e.prototype.ngOnInit=function(){j.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.cuentasPorPagarDetallado,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.data?this.setearValoresDesdeAfuera():this.obtenerFechaActual()},e.prototype.generarAtajosTeclado=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnRegresar");return e&&e.click(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.proveedor=new rt.a,this.codigoProveedor=null,this.limpiarResultado(),this.listarSectores()},e.prototype.obtenerFechaActual=function(){this.sistemaService.obtenerFechaServidor(this,this.empresaSeleccionada)},e.prototype.despuesDeObtenerFechaServidor=function(e){this.fechaFin=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.fechaActual=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e)},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.buscarCarListaCuentasPorPagarDetallado=function(){if(this.cargando=!0,this.limpiarResultado(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){this.filasTiempo.iniciarContador();var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,proveedor:this.codigoProveedor,hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin)};this.cuentasPagarDetalladoService.listarCarListaCuentasPorPagarDetallado(e,this,p.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeListarCarListaCuentasPorPagarDetallado=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.setearValoresDesdeAfuera=function(){this.listaEmpresas=this.data.listaEmpresas,this.listaSectores=this.data.listaSectores,this.empresaSeleccionada=this.data.empresa,this.sectorSeleccionado=this.data.sector,this.codigoProveedor=this.data.proveedor,this.proveedor.provCodigo=this.data.proveedor,this.proveedor.provRazonSocial=this.data.razonSocial,this.fechaFin=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.data.hasta),this.mostrarBtnCancelar=this.data.mostrarBtnCancelar,this.buscarCarListaCuentasPorPagarDetallado()},e.prototype.cerrarCuentaDetallado=function(){this.cerrarCuentaDetallada.emit(!1)},e.prototype.imprimirCarListaCuentasPorPagarDetallado=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",proveedor:this.proveedor?this.proveedor.provNombreComercial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),listado:this.listaResultado};this.cuentasPagarDetalladoService.imprimirCarListaCuentasPorPagarDetallado(e,this,this.empresaSeleccionada)}},e.prototype.exportarCarListaCuentasPorPagarDetallado=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",proveedor:this.proveedor?this.proveedor.provNombreComercial:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaFin),listado:this.listaResultado};this.cuentasPagarDetalladoService.exportarCarListaCuentasPorPagarDetallado(e,this,this.empresaSeleccionada)}},e.prototype.buscarProveedor=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esValidoProveedor())if(this.proveedor&&this.proveedor.provCodigo.length>0){var o=this.proveedor.provCodigo.toUpperCase(),a={empresa:p.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:o};e.srcElement.blur(),e.preventDefault();var i=this.modalService.open(k.a,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.result.then(function(e){e&&(t.proveedor=new rt.a(e),t.codigoProveedor=t.proveedor.provCodigo)},function(){t.focusProveedorCodigo()})}else this.toastr.info(p.a.MSJ_ENTERTOMODAL,p.a.TAG_AVISO)},e.prototype.focusProveedorCodigo=function(){var e=document.getElementById("provCodigo");e&&e.focus()},e.prototype.esValidoProveedor=function(){return""!=this.proveedor.provCodigo&&this.proveedor.provCodigo===this.codigoProveedor},e.prototype.validarProveedor=function(){this.proveedor.provCodigo!==this.codigoProveedor&&(this.proveedor=new rt.a,this.codigoProveedor=null)},e.prototype.generarOpciones=function(){var e=this,t=this.listaResultado.length>0&&this.objetoSeleccionado.cxpdPeriodo;this.opciones=[{label:p.a.ACCION_CONSULTAR_COMPRA,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.consultarCompras():null}}]},e.prototype.consultarCompras=function(){this.objetoSeleccionado.cxpdPeriodo&&this.objetoSeleccionado.cxpdMotivo&&this.objetoSeleccionado.cxpdNumero},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cuentasPagarDetalladoService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:Ie.a,toolTip:R.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.cxpdPeriodo&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.ejecutarAccion=function(e){this.consultarCompras()},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Lt([Object(a.ViewChild)("menuOpciones"),Mt("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),Lt([Object(a.Input)(),Mt("design:type",Object)],e.prototype,"data",void 0),Lt([Object(a.Output)(),Mt("design:type",Object)],e.prototype,"cerrarCuentaDetallada",void 0),Lt([Object(a.HostListener)("window:resize",["$event"]),Mt("design:type",Function),Mt("design:paramtypes",[]),Mt("design:returntype",void 0)],e.prototype,"onResize",null),e=Lt([Object(a.Component)({selector:"app-cuentas-pagar-detallado",template:o("MfRV"),styles:[o("pz2k")]}),Mt("design:paramtypes",[G.b,g.b,m.a,b.a,i.ActivatedRoute,v.a,C.HotkeysService,U.a,Pt])],e)}(),Ft=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},xt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},wt=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarListaCuentasPorPagarGeneral=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaCuentasPorPagarGeneralTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarListaCuentasPorPagarGeneral(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarListaCuentasPorPagarGeneral=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarListaCuentasPorPagarGeneral",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarListaCuentasPorPagarGeneral.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarReporteCarListaCuentasPorPagarGeneral=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarListaCuentasPorPagarGeneral",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarListaCuentasPorPagarGeneral_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_CODIGO,field:"cxpgCodigo",width:100,minWidth:100},{headerName:p.a.TAG_NOMBRE,field:"cxpgNombre",width:200,minWidth:200,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace":"tr-negrita "}},{headerName:p.a.TAG_SALDO,field:"cxpgSaldo",width:100,minWidth:100,valueFormatter:jt,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:p.a.WIDTH_OPCIONES,minWidth:p.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(e){return e.data.cxpgCodigo?{icono:p.a.ICON_CONSULTAR,tooltip:p.a.ACCION_CONSULTAR_CUENTAS,accion:p.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:p.a.ICON_OPCIONES,tooltip:p.a.TAG_OPCIONES,text:""}}]},e=Ft([Object(a.Injectable)({providedIn:"root"}),xt("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function jt(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var Gt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},kt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ut=function(){function e(e,t,o,a,i,r,n,s){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=a,this.utilService=i,this.sistemaService=r,this.sectorService=n,this.cuentasPagarGeneralService=s,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.listaSectores=[],this.sectorSeleccionado=new l.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.filasTiempo=new u.a,this.fechaHasta=new Date,this.fechaActual=new Date,this.listaResultado=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.vistaFormulario=!1}return e.prototype.ngOnInit=function(){this.constantes=p.a,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.cuentasPorPagarGeneral,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.obtenerFechaActual()},e.prototype.iniciarAtajosTeclado=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CONSULTAR,function(){return e.listaResultado.length,!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.listarSectores(),this.limpiarResultado()},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!0};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.obtenerFechaActual=function(){this.sistemaService.obtenerFechaServidor(this,this.empresaSeleccionada)},e.prototype.despuesDeObtenerFechaServidor=function(e){this.fechaHasta=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.fechaActual=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e)},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0"),this.vistaFormulario=!1},e.prototype.buscarCarListaCuentasPorPagarGeneral=function(){if(this.cargando=!0,this.limpiarResultado(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){this.filasTiempo.iniciarContador();var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta)};this.cuentasPagarGeneralService.listarCarListaCuentasPorPagarGeneral(e,this,p.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeListarCarListaCuentasPorPagarGeneral=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirCarListaCuentasPorCobrarGeneral=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cuentasPagarGeneralService.imprimirCarListaCuentasPorPagarGeneral(e,this,this.empresaSeleccionada)}},e.prototype.exportarReporteCarListaCuentasPorPagarGeneral=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.cuentasPagarGeneralService.exportarReporteCarListaCuentasPorPagarGeneral(e,this,this.empresaSeleccionada)}},e.prototype.generarOpciones=function(){var e=this,t=this.listaResultado.length>0&&this.objetoSeleccionado.cxpgCodigo;this.opciones=[{label:p.a.ACCION_CONSULTAR_CUENTAS,icon:p.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.consultarCuentasPagarDetallado():null}}]},e.prototype.consultarCuentasPagarDetallado=function(){this.objetoSeleccionado.cxpgCodigo&&(this.vistaFormulario=!0,this.parametros={empresa:this.empresaSeleccionada,sector:this.sectorSeleccionado,proveedor:this.objetoSeleccionado.cxpgCodigo,razonSocial:this.objetoSeleccionado.cxpgNombre,hasta:this.fechaHasta,listaEmpresas:this.listaEmpresas,listaSectores:this.listaSectores,mostrarBtnCancelar:!0})},e.prototype.cerrarCuentaDetallada=function(e){this.vistaFormulario=e,this.iniciarAtajosTeclado()},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cuentasPagarGeneralService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:Ie.a,toolTip:R.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.objetoSeleccionado.cxpgCodigo&&(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.ejecutarAccion=function(e){this.consultarCuentasPagarDetallado()},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},Gt([Object(a.ViewChild)("menuOpciones"),kt("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),Gt([Object(a.HostListener)("window:resize",["$event"]),kt("design:type",Function),kt("design:paramtypes",[]),kt("design:returntype",void 0)],e.prototype,"onResize",null),e=Gt([Object(a.Component)({selector:"app-cuentas-pagar-general",template:o("eDMi"),styles:[o("fbGi")]}),kt("design:paramtypes",[i.ActivatedRoute,g.b,C.HotkeysService,v.a,m.a,U.a,b.a,wt])],e)}(),Bt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ht=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Vt=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarListaCuentasPorPagarAnticipos=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaCuentasPorPagarAnticiposTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarListaCuentasPorPagarAnticipos(e.extraInfo):(a.toastr.warning(p.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirAnticipoProveedores=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarCuentasPorPagarCobrarAnticipos",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoAnticipoProveedores.pdf",e):a.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarAnticipoProveedores=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCuentasPorPagarCobrarAnticipos",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoAnticipoProveedores_"):a.toastr.warning(p.a.MSJ_NO_DATA,p.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:p.a.TAG_CODIGO,field:"cxpgCodigo",width:100,minWidth:100},{headerName:p.a.TAG_NOMBRE,field:"cxpgNombre",width:300,minWidth:200,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace":"tr-negrita "}},{headerName:p.a.TAG_SALDO,headerClass:"cell-header-center",field:"cxpgSaldo",width:100,minWidth:100,valueFormatter:Yt,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_ANTICIPOS,headerClass:"cell-header-center",field:"cxpgAnticipos",width:100,minWidth:100,valueFormatter:Yt,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:p.a.TAG_TOTAL,field:"cxpgTotal",width:100,minWidth:100,valueFormatter:Yt,cellClass:function(e){return e.data.cxpgCodigo?"text-whitespace text-right":"tr-negrita text-right"}}]},e=Bt([Object(a.Injectable)({providedIn:"root"}),Ht("design:paramtypes",[K.a,g.b,m.a,H.a])],e)}();function Yt(e){return new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var zt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Jt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Wt=function(){function e(e,t,o,a,i,r,n){this.route=e,this.atajoService=t,this.filasService=o,this.utilService=a,this.sistemaService=i,this.sectorService=r,this.anticipoProveedorService=n,this.empresaSeleccionada=new d.a,this.listaEmpresas=[],this.listaSectores=[],this.sectorSeleccionado=new l.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.es={},this.filasTiempo=new u.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.listaResultado=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return e.prototype.ngOnInit=function(){this.constantes=p.a,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.anticipoProveedorSaldoGeneral,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAtajosTeclado(),this.obtenerFechaActual()},e.prototype.iniciarAtajosTeclado=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.listarSectores(),this.limpiarResultado()},e.prototype.listarSectores=function(){this.cargando=!0,this.limpiarResultado();var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!0};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasTiempo.resetearContador(),this.filasService.actualizarFilas("0","0")},e.prototype.obtenerFechaActual=function(){this.sistemaService.obtenerFechaServidor(this,this.empresaSeleccionada)},e.prototype.despuesDeObtenerFechaServidor=function(e){this.fechaDesde=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.fechaActual=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e)},e.prototype.buscarCarCuentasPorCobrarAnticipos=function(){if(this.cargando=!0,this.limpiarResultado(),this.filasTiempo.iniciarContador(),this.utilService.verificarPermiso(p.a.ACCION_CONSULTAR,this,!0)){var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta)};this.anticipoProveedorService.listarCarListaCuentasPorPagarAnticipos(e,this,p.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeListarCarListaCuentasPorPagarAnticipos=function(e){this.listaResultado=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirAnticipoProveedor=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.anticipoProveedorService.imprimirAnticipoProveedores(e,this,this.empresaSeleccionada)}},e.prototype.exportarAnticipoProveedor=function(){if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",fechaHasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta),listado:this.listaResultado};this.anticipoProveedorService.exportarAnticipoProveedores(e,this,this.empresaSeleccionada)}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.anticipoProveedorService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.onResize=function(){this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS},zt([Object(a.HostListener)("window:resize",["$event"]),Jt("design:type",Function),Jt("design:paramtypes",[]),Jt("design:returntype",void 0)],e.prototype,"onResize",null),e=zt([Object(a.Component)({selector:"app-anticipo-proveedores-saldo-general",template:o("MdgD"),styles:[o("q/A8")]}),Jt("design:paramtypes",[i.ActivatedRoute,C.HotkeysService,v.a,m.a,U.a,b.a,Vt])],e)}(),Kt=o("i8Jn"),Xt=o("0cNW"),$t=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},qt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Zt=function(){function e(e,t,o,a,i){this.utilService=e,this.route=t,this.atajoService=o,this.periodoService=a,this.toastr=i,this.listaEmpresas=[],this.periodoSeleccionado=new Kt.a,this.listaPeriodos=[],this.numeroCobro="",this.cobroSeleccionado=new ae,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new u.a,this.es={},this.screamXS=!0,this.vistaFormulario=!1,this.parametrosFormulario={}}return e.prototype.ngOnInit=function(){j.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.cobrosIndividual,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado()},e.prototype.generarAtajosTeclado=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado(),this.periodoSeleccionado=null,this.numeroCobro="",this.listarPeriodos()},e.prototype.listarPeriodos=function(){this.listaPeriodos=[],this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT};this.periodoService.listarPeriodos(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPeriodos=function(e){var t=this;this.listaPeriodos=e||[],this.cargando=!1,this.listaPeriodos.length>0?this.periodoSeleccionado=this.periodoSeleccionado?this.listaPeriodos.find(function(e){return e.sisPeriodoPK.perCodigo===t.periodoSeleccionado.sisPeriodoPK.perCodigo}):this.listaPeriodos[0]:this.periodoSeleccionado=null},e.prototype.limpiarResultado=function(){this.filasTiempo.resetearContador(),this.vistaFormulario=!1},e.prototype.buscarCobrosIndividual=function(e){this.cargando=!0,this.limpiarResultado(),this.utilService.establecerFormularioTocado(e)&&e&&e.valid?(this.parametrosFormulario.accion=p.a.ACCION_CONSULTAR,this.cobroSeleccionado.cobNumeroSistema=this.periodoSeleccionado.sisPeriodoPK.perCodigo+"|C-COB|"+this.numeroCobro,this.parametrosFormulario.seleccionado=this.cobroSeleccionado,this.vistaFormulario=!0):(this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1)},e.prototype.soloNumeros=function(e){return this.utilService.soloNumeros(e)},e.prototype.completarCeros=function(){this.numeroCobro=this.utilService.completarCeros(this.numeroCobro)},e.prototype.ejecutarAccion=function(e){switch(this.generarAtajosTeclado(),e.accion){case p.a.ACCION_ACTIVAR:this.activar=e.estado;break;case p.a.ACCION_CANCELAR:this.cancelar();break;case p.a.ACCION_EJECUTAR:this.vistaFormulario=!1}},e.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1},e=$t([Object(a.Component)({selector:"app-cobros-individual",template:o("Om8a"),styles:[o("YwrG")]}),qt("design:paramtypes",[m.a,i.ActivatedRoute,C.HotkeysService,Xt.a,g.b])],e)}(),Qt=o("2ngb"),eo=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},to=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},oo=function(){function e(e,t,o,a,i){this.utilService=e,this.route=t,this.atajoService=o,this.periodoService=a,this.toastr=i,this.listaEmpresas=[],this.periodoSeleccionado=new Kt.a,this.listaPeriodos=[],this.numeroCobro="",this.pagoSeleccionado=new Qt.a,this.constantes=p.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new u.a,this.es={},this.screamXS=!0,this.vistaFormulario=!1,this.parametrosFormulario={}}return e.prototype.ngOnInit=function(){j.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.pagosIndividual,this.screamXS=window.innerWidth<p.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado()},e.prototype.generarAtajosTeclado=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado(),this.periodoSeleccionado=null,this.numeroCobro="",this.listarPeriodos()},e.prototype.listarPeriodos=function(){this.listaPeriodos=[],this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT};this.periodoService.listarPeriodos(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPeriodos=function(e){var t=this;this.listaPeriodos=e||[],this.cargando=!1,this.listaPeriodos.length>0?this.periodoSeleccionado=this.periodoSeleccionado?this.listaPeriodos.find(function(e){return e.sisPeriodoPK.perCodigo===t.periodoSeleccionado.sisPeriodoPK.perCodigo}):this.listaPeriodos[0]:this.periodoSeleccionado=null},e.prototype.limpiarResultado=function(){this.filasTiempo.resetearContador(),this.vistaFormulario=!1},e.prototype.soloNumeros=function(e){return this.utilService.soloNumeros(e)},e.prototype.completarCeros=function(){this.numeroCobro=this.utilService.completarCeros(this.numeroCobro)},e.prototype.buscarPagoIndividual=function(e){this.cargando=!0,this.limpiarResultado(),this.utilService.establecerFormularioTocado(e)&&e&&e.valid?(this.parametrosFormulario.accion=p.a.ACCION_CONSULTAR,this.pagoSeleccionado.pagNumeroSistema=this.periodoSeleccionado.sisPeriodoPK.perCodigo+"|C-PAG|"+this.numeroCobro,this.parametrosFormulario.seleccionado=this.pagoSeleccionado,this.vistaFormulario=!0,this.cargando=!1):(this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1)},e.prototype.cancelar=function(){this.vistaFormulario=!1,this.activar=!1},e.prototype.ejecutarAccion=function(e){switch(this.generarAtajosTeclado(),e.accion){case p.a.ACCION_ACTIVAR:this.activar=e.estado;break;case p.a.ACCION_CANCELAR:this.cancelar()}},e=eo([Object(a.Component)({selector:"app-pagos-individual",template:o("Oyc5"),styles:[o("5j/p")]}),to("design:paramtypes",[m.a,i.ActivatedRoute,C.HotkeysService,Xt.a,g.b])],e)}(),ao=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},io=[{path:"",component:s,data:{preload:!0},children:[{path:"formaPagoCartera",component:_,resolve:{formaPagoCartera:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"formaCobroCartera",component:F,resolve:{formaCobroCartera:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"anticipoProveedores",component:z,resolve:{anticipoProveedores:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"anticipoClientes",component:Ye,resolve:{anticipoClientes:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"cobrosCartera",component:he,resolve:{cobrosListado:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"pagosCartera",component:lt,resolve:{pagosListado:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"cobrosIndividual",component:Zt,resolve:{cobrosIndividual:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"cobrosDetalle",component:de,resolve:{cobrosDetalle:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"cobrosListado",component:he,resolve:{cobrosListado:y.a,breadcrumb:P.a,esConsulta:"esConsulta"},runGuardsAndResolvers:"always"},{path:"cobrosListadoVentas",component:Ae,resolve:{cobrosListadoVentas:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"cobrosMayorAuxiliarCliente",component:ye,resolve:{cobrosMayorAuxiliarCliente:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"cuentasPorCobrarDetallado",component:we,resolve:{cuentasPorCobrarDetallado:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"cuentasPorCobrarGeneral",component:qe,resolve:{cuentasPorCobrarGeneral:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"anticipoClienteSaldoDetallado",component:Ye,resolve:{anticipoClientes:y.a,breadcrumb:P.a,esConsulta:"esConsulta"},runGuardsAndResolvers:"always"},{path:"anticipoProveedorSaldoDetallado",component:z,resolve:{anticipoProveedores:y.a,breadcrumb:P.a,esConsulta:"esConsulta"},runGuardsAndResolvers:"always"},{path:"anticipoClienteSaldoGeneral",component:it,resolve:{anticipoClienteSaldoGeneral:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"pagosIndividual",component:oo,resolve:{pagosIndividual:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"pagosListado",component:lt,resolve:{pagosListado:y.a,breadcrumb:P.a,esConsulta:"esConsulta"},runGuardsAndResolvers:"always"},{path:"pagosDetalle",component:ft,resolve:{pagosDetalle:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"pagosListadoCompra",component:Et,resolve:{pagosListadoCompra:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"pagosMayorAuxiliarProveedor",component:Tt,resolve:{pagosMayorAuxiliarProveedor:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"cuentasPorPagarDetallado",component:Dt,resolve:{cuentasPorPagarDetallado:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"cuentasPorPagarGeneral",component:Ut,resolve:{cuentasPorPagarGeneral:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"},{path:"anticipoProveedorSaldoGeneral",component:Wt,resolve:{anticipoProveedorSaldoGeneral:y.a,breadcrumb:P.a},runGuardsAndResolvers:"always"}]}],ro=function(){function e(){}return e=ao([Object(a.NgModule)({imports:[i.RouterModule.forChild(io)],exports:[i.RouterModule],providers:[{provide:"esConsulta",useValue:function(e,t){return"esConsulta"}}]})],e)}(),no=o("Q8hO"),so=o("0uIf"),co=o("gIcY"),lo=o("FejU"),po=function(){function e(e){this.antEmpresa="",this.antPeriodo="",this.antTipo="",this.antNumero="",this.antValor=0,this.antPagado=!1,this.antReversado=!1,this.fpSecuencial=0,this.provEmpresa="",this.provCodigo="",this.secEmpresa="",this.secCodigo="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.antEmpresa=e.antEmpresa?e.antEmpresa:this.antEmpresa,this.antPeriodo=e.antPeriodo?e.antPeriodo:this.antPeriodo,this.antTipo=e.antTipo?e.antTipo:this.antTipo,this.antNumero=e.antNumero?e.antNumero:this.antNumero,this.antValor=e.antValor?e.antValor:this.antValor,this.antPagado=e.antPagado?e.antPagado:this.antPagado,this.antReversado=e.antReversado?e.antReversado:this.antReversado,this.fpSecuencial=e.fpSecuencial?e.fpSecuencial:this.fpSecuencial,this.provEmpresa=e.provEmpresa?e.provEmpresa:this.provEmpresa,this.provCodigo=e.provCodigo?e.provCodigo:this.provCodigo,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),uo=o("faRU"),ho=o("EF/R"),mo=o("7rNK"),Co=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},fo=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},bo=function(){function e(e,t,o,i,r,n,s,c,u){this.toastr=e,this.atajoService=t,this.modalService=o,this.utilService=i,this.auth=r,this.archivoService=n,this.contableService=s,this.pagoAnticipoService=c,this.periodoService=u,this.empresaSeleccionada=new d.a,this.parametrosFormulario={},this.enviarAccion=new a.EventEmitter,this.titulo=p.a.CARTERA_ANTICIPO_PROVEEDORES,this.constantes=p.a,this.accion=null,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.vistaFormulario=!1,this.es={},this.conContable=new so.a,this.sectores=new Array,this.sectorSeleccionado=new l.a,this.listaFormaPago=new Array,this.fpSeleccionada=new uo.a,this.pagoAnticipo=new po,this.objetoSeleccionado=new mo.a,this.fechaActual=new Date,this.codigoProveedor=null,this.observaciones="",this.nombreProveedor="",this.fecha="",this.documento="",this.direccion="",this.isFechaValido=!0,this.documentoValido=!0,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.configAutonumericReales={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999",minimumValue:"0"}}return e.prototype.ngOnInit=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.isScreamMd=!(this.innerWidth<=p.a.WINDOW_WIDTH_XS),this.accion=this.parametrosFormulario.accion,this.sectorSeleccionado=this.parametrosFormulario.sectorSeleccionado,this.objetoSeleccionado=this.parametrosFormulario.seleccionado,this.generarAtajos(),this.obtenerDatosParaCrudAnticipos()},e.prototype.obtenerDatosParaCrudAnticipos=function(){this.parametrosFormulario.proveedor&&this.completarDatosProveedor(this.parametrosFormulario.proveedor),this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT,accion:"P"};this.pagoAnticipoService.obtenerDatosParaCrudAnticipos(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosParaCrudAnticipos=function(e){this.fechaActual=new Date(e.fechaActual),this.despuesDeListarSectores(e.sectores),this.listaFormaPago=e.listaForma,this.fpSeleccionada=this.listaFormaPago[0],this.accion!=p.a.ACCION_CREAR?(this.titulo=this.titulo+" ("+this.objetoSeleccionado.antPeriodo+" | "+this.objetoSeleccionado.antTipo+" | "+this.objetoSeleccionado.antNumero+")",this.obtenerInformacionParaMostrarAnticipoPago()):(this.cargando=!1,this.validarFechaPorPeriodo(),this.extraerValoresIniciales())},e.prototype.completarDatosProveedor=function(e){var t=this;this.codigoProveedor=e.invProveedorPK.provCodigo,this.pagoAnticipo.provCodigo=e.invProveedorPK.provCodigo,this.pagoAnticipo.provEmpresa=p.a.KEY_EMPRESA_SELECT,this.nombreProveedor=e.provRazonSocial,this.direccion=e.provDireccion,setTimeout(function(){t.focusInput("fecha")},50)},e.prototype.obtenerInformacionParaMostrarAnticipoPago=function(){this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT,periodo:this.objetoSeleccionado.antPeriodo,tipo:this.objetoSeleccionado.antTipo,numero:this.objetoSeleccionado.antNumero};this.pagoAnticipoService.obtenerAnticipoPago(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerAnticipoPago=function(e){var t=this;this.pagoAnticipo=e.carPagosAnticiposTO,this.fpSeleccionada=e.fpSeleccionada,this.sectorSeleccionado=this.sectores.find(function(e){return e.secCodigo===t.pagoAnticipo.secCodigo}),this.sectorSeleccionado=this.sectorSeleccionado?this.sectorSeleccionado:new l.a({secCodigo:this.pagoAnticipo.secCodigo,secEmpresa:this.pagoAnticipo.secEmpresa}),this.fpSeleccionada=this.listaFormaPago.find(function(e){return e.fpSecuencial===t.pagoAnticipo.fpSecuencial}),this.nombreProveedor=e.nombre,this.codigoProveedor=e.codigo,this.direccion=e.direccion,this.conContable=e.contable?e.contable:new so.a,this.fechaActual=new Date(this.conContable.conFecha),this.cargando=!1,this.extraerValoresIniciales()},e.prototype.despuesDeListarSectores=function(e){var t=this;this.sectores=e||[],this.sectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.validarDocumento=function(){if(this.cargando=!0,this.documentoValido=!1,this.documento&&this.fpSeleccionada.validar){var e={empresa:p.a.KEY_EMPRESA_SELECT,documento:this.documento,cuenta:this.fpSeleccionada.ctaCodigo};this.contableService.verificarDocumentoBanco(e,this,p.a.KEY_EMPRESA_SELECT)}else this.cargando=!1,this.documentoValido=!0},e.prototype.despuesDeVerificarDocumento=function(e){this.documentoValido=e,this.cargando=!1},e.prototype.validarFechaPorPeriodo=function(){if(this.isFechaValido=!1,this.fechaActual){var e={fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaActual),empresa:p.a.KEY_EMPRESA_SELECT};this.periodoService.getPeriodoPorFecha(e,this,p.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeGetPeriodoPorFecha=function(e){e&&!e.perCerrado?this.isFechaValido=!0:this.isFechaValido=!1},e.prototype.buscarProveedor=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.pagoAnticipo.provCodigo&&!(this.pagoAnticipo.provCodigo&&this.codigoProveedor&&this.pagoAnticipo.provCodigo===this.codigoProveedor)){var t={empresa:p.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:this.pagoAnticipo.provCodigo};e.srcElement.blur(),e.preventDefault(),this.abrirModalProveedor(t)}},e.prototype.abrirModalProveedor=function(e){var t=this,o=this.modalService.open(k.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametrosBusqueda=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.codigoProveedor=e.provCodigo,t.pagoAnticipo.provCodigo=e.provCodigo,t.pagoAnticipo.provEmpresa=e.provEmpresa,t.nombreProveedor=e.provRazonSocial,t.direccion=e.provDireccion,t.focusInput("fecha")):t.focusInput("proveedor")},function(){t.focusInput("proveedor")})},e.prototype.focusInput=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.validarProveedor=function(){this.codigoProveedor!==this.pagoAnticipo.provCodigo&&(this.codigoProveedor=null,this.nombreProveedor="",this.pagoAnticipo.provCodigo="",this.pagoAnticipo.provEmpresa="",this.direccion="")},e.prototype.guardar=function(e){if(this.utilService.verificarPermiso(this.accion,this,!0)){var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t&&this.documentoValido&&this.isFechaValido){this.cargando=!0,this.antesDeGuardarPrestamo();var o={carPagosAnticipoTO:this.pagoAnticipo,observaciones:this.observaciones,nombreProveedor:this.nombreProveedor,fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaActual),sectorProveedor:this.sectorSeleccionado.secCodigo,documento:this.documento};this.pagoAnticipoService.insertarAnticiposPago(o,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.warning(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.antesDeGuardarPrestamo=function(){this.pagoAnticipo.antEmpresa=p.a.KEY_EMPRESA_SELECT,this.pagoAnticipo.antTipo="C-APRO",this.pagoAnticipo.secEmpresa=p.a.KEY_EMPRESA_SELECT,this.pagoAnticipo.secCodigo=this.sectorSeleccionado.secCodigo,this.pagoAnticipo.usrEmpresa=p.a.KEY_EMPRESA_SELECT,this.pagoAnticipo.fpSecuencial=this.fpSeleccionada.fpSecuencial,this.pagoAnticipo.usrCodigo=this.auth.getCodigoUser()},e.prototype.despuesDeInsertarAnticiposPago=function(e){try{this.conContable=e.extraInfo,this.preguntarImprimir(e.operacionMensaje)}catch(t){this.cargando=!1,this.cerrarFormulario()}},e.prototype.preguntarImprimir=function(e){var t=this,o={title:p.a.TOAST_CORRECTO,texto:e+"<br>"+p.a.MSJ_PREGUNTA_IMPRIMIR+"<br>",type:p.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+p.a.ICON_IMPRIMIR+"'></i>  "+p.a.LABEL_IMPRIMIR,cancelButtonText:p.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.imprimirContable():t.cerrarFormulario()})},e.prototype.cerrarFormulario=function(){var e={accion:p.a.ACCION_CREADO,resultante:this.pagoAnticipoService.construirObjetoParaPonerloEnLaLista(this.pagoAnticipo,this.conContable,this.nombreProveedor),empresa:this.empresaSeleccionada};this.cargando=!1,this.enviarAccion.emit(e)},e.prototype.imprimirContable=function(){var e=this;this.cargando=!0;var t=[],o=this.conContable.conContablePK;t.push(o);var a={listadoPK:t};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableIndividual",a,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?(e.utilService.descargarArchivoPDF("Contable.pdf",t),e.cargando=!1):(e.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return e.utilService.handleError(t,e)}),this.accion===p.a.ACCION_CREAR&&this.cerrarFormulario()},e.prototype.anular=function(){var e={conContablePK:this.conContable.conContablePK,anularReversar:!0,accionUsuario:"ANULAR",bandera:""};this.cargando=!0,this.pagoAnticipoService.anularReversarContable(this,e)},e.prototype.reversar=function(){var e={conContablePK:this.conContable.conContablePK,anularReversar:!1,accionUsuario:"REVERSAR",bandera:""};this.cargando=!0,this.pagoAnticipoService.anularReversarContable(this,e)},e.prototype.despuesDeAnularReversarContable=function(e){this.cargando=!1,this.utilService.generarSwal(p.a.SWAL_CORRECTO,p.a.SWAL_SUCCESS,e.operacionMensaje);var t={accion:p.a.ACCION_ELIMINADO};this.cargando=!1,this.enviarAccion.emit(t)},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmDatos?e.frmDatos.value:null))},50)},e.prototype.cancelar=function(){var e=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmDatos))this.enviarAccion.emit({accion:p.a.ACCION_CANCELAR});else{var t={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:p.a.ACCION_CANCELAR})})}},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarAccion.emit({accion:p.a.ACCION_ACTIVAR,estado:!e})},e.prototype.generarAtajos=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirContable");return e&&e.click(),!1}))},e.prototype.unloadHandler=function(e){switch(this.accion){case p.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=p.a.WINDOW_WIDTH_XS)},Co([Object(a.Input)(),fo("design:type",d.a)],e.prototype,"empresaSeleccionada",void 0),Co([Object(a.Input)(),fo("design:type",Object)],e.prototype,"parametrosFormulario",void 0),Co([Object(a.Output)(),fo("design:type",Object)],e.prototype,"enviarAccion",void 0),Co([Object(a.Input)(),fo("design:type",String)],e.prototype,"titulo",void 0),Co([Object(a.ViewChild)("frmDatos"),fo("design:type",co.NgForm)],e.prototype,"frmDatos",void 0),Co([Object(a.HostListener)("window:beforeunload",["$event"]),fo("design:type",Function),fo("design:paramtypes",[Event]),fo("design:returntype",void 0)],e.prototype,"unloadHandler",null),Co([Object(a.HostListener)("window:resize",["$event"]),fo("design:type",Function),fo("design:paramtypes",[]),fo("design:returntype",void 0)],e.prototype,"onResize",null),e=Co([Object(a.Component)({selector:"app-pago-anticipos-formulario",template:o("EmYL")}),fo("design:paramtypes",[g.b,C.HotkeysService,G.b,m.a,ho.a,H.a,lo.a,x.a,Xt.a])],e)}(),vo=function(){function e(e){this.antEmpresa="",this.antPeriodo="",this.antTipo="",this.antNumero="",this.antValor=0,this.antCobrado=!1,this.antReversado=!1,this.fpSecuencial=0,this.cliEmpresa="",this.cliCodigo="",this.secEmpresa="",this.secCodigo="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.antEmpresa=e.antEmpresa?e.antEmpresa:this.antEmpresa,this.antPeriodo=e.antPeriodo?e.antPeriodo:this.antPeriodo,this.antTipo=e.antTipo?e.antTipo:this.antTipo,this.antNumero=e.antNumero?e.antNumero:this.antNumero,this.antValor=e.antValor?e.antValor:this.antValor,this.antCobrado=e.antCobrado?e.antCobrado:this.antCobrado,this.antReversado=e.antReversado?e.antReversado:this.antReversado,this.fpSecuencial=e.fpSecuencial?e.fpSecuencial:this.fpSecuencial,this.cliEmpresa=e.cliEmpresa?e.cliEmpresa:this.cliEmpresa,this.cliCodigo=e.cliCodigo?e.cliCodigo:this.cliCodigo,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),go=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ao=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},So=function(){function e(e,t,o,i,r,n,s,c,u,h){this.toastr=e,this.atajoService=t,this.modalService=o,this.utilService=i,this.auth=r,this.archivoService=n,this.contableService=s,this.cobroAnticipoService=c,this.pagoAnticipoService=u,this.periodoService=h,this.empresaSeleccionada=new d.a,this.parametrosFormulario={},this.enviarAccion=new a.EventEmitter,this.titulo=p.a.CARTERA_ANTICIPO_CLIENTES,this.constantes=p.a,this.accion=null,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.vistaFormulario=!1,this.es={},this.conContable=new so.a,this.sectores=new Array,this.sectorSeleccionado=new l.a,this.listaFormaPago=new Array,this.fpSeleccionada=new uo.a,this.cobroAnticipo=new vo,this.objetoSeleccionado=new je,this.fechaActual=new Date,this.codigoCliente=null,this.observaciones="",this.nombreCliente="",this.fecha="",this.documento="",this.direccion="",this.isFechaValido=!0,this.documentoValido=!0,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.configAutonumericReales={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999",minimumValue:"0"}}return e.prototype.ngOnInit=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.isScreamMd=!(this.innerWidth<=p.a.WINDOW_WIDTH_XS),this.accion=this.parametrosFormulario.accion,this.sectorSeleccionado=this.parametrosFormulario.sectorSeleccionado,this.objetoSeleccionado=this.parametrosFormulario.seleccionado,this.generarAtajos(),this.obtenerDatosParaCrudAnticipos()},e.prototype.obtenerDatosParaCrudAnticipos=function(){this.parametrosFormulario.cliente&&this.completarDatosCliente(this.parametrosFormulario.cliente),this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT,accion:"C"};this.pagoAnticipoService.obtenerDatosParaCrudAnticipos(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosParaCrudAnticipos=function(e){this.cargando=!1,this.fechaActual=new Date(e.fechaActual),this.despuesDeListarSectores(e.sectores),this.listaFormaPago=e.listaForma,this.fpSeleccionada=this.listaFormaPago[0],this.accion!=p.a.ACCION_CREAR?(this.titulo=this.titulo+" ("+this.objetoSeleccionado.antPeriodo+" | "+this.objetoSeleccionado.antTipo+" | "+this.objetoSeleccionado.antNumero+")",this.obtenerInformacionParaMostrarAnticipoCobro()):(this.cargando=!1,this.validarFechaPorPeriodo(),this.extraerValoresIniciales())},e.prototype.completarDatosCliente=function(e){var t=this;this.codigoCliente=e.invClientePK.cliCodigo,this.cobroAnticipo.cliCodigo=e.invClientePK.cliCodigo,this.cobroAnticipo.cliEmpresa=p.a.KEY_EMPRESA_SELECT,this.nombreCliente=e.cliRazonSocial,this.direccion=e.cliDireccion,setTimeout(function(){t.focusInput("fecha")},50)},e.prototype.obtenerInformacionParaMostrarAnticipoCobro=function(){this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT,periodo:this.objetoSeleccionado.antPeriodo,tipo:this.objetoSeleccionado.antTipo,numero:this.objetoSeleccionado.antNumero};this.cobroAnticipoService.obtenerAnticipoCobro(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerAnticipoCobro=function(e){var t=this;this.cobroAnticipo=e.carCobrosAnticiposTO,this.fpSeleccionada=e.fpSeleccionada,this.sectorSeleccionado=this.sectores.find(function(e){return e.secCodigo===t.cobroAnticipo.secCodigo}),this.sectorSeleccionado=this.sectorSeleccionado?this.sectorSeleccionado:new l.a({secCodigo:this.cobroAnticipo.secCodigo,secEmpresa:this.cobroAnticipo.secEmpresa}),this.fpSeleccionada=this.listaFormaPago.find(function(e){return e.fpSecuencial===t.cobroAnticipo.fpSecuencial}),this.nombreCliente=e.nombre,this.codigoCliente=e.codigo,this.direccion=e.direccion,this.conContable=e.contable?e.contable:new so.a,this.fechaActual=new Date(this.conContable.conFecha),this.cargando=!1,this.extraerValoresIniciales()},e.prototype.despuesDeListarSectores=function(e){var t=this;this.sectores=e||[],this.sectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):null:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.validarDocumento=function(){if(this.cargando=!0,this.documentoValido=!1,this.documento&&this.fpSeleccionada.validar){var e={empresa:p.a.KEY_EMPRESA_SELECT,documento:this.documento,cuenta:this.fpSeleccionada.ctaCodigo};this.contableService.verificarDocumentoBanco(e,this,p.a.KEY_EMPRESA_SELECT)}else this.cargando=!1,this.documentoValido=!0},e.prototype.despuesDeVerificarDocumento=function(e){this.documentoValido=e,this.cargando=!1},e.prototype.validarFechaPorPeriodo=function(){if(this.isFechaValido=!1,this.fechaActual){var e={fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaActual),empresa:p.a.KEY_EMPRESA_SELECT};this.periodoService.getPeriodoPorFecha(e,this,p.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeGetPeriodoPorFecha=function(e){e&&!e.perCerrado?this.isFechaValido=!0:this.isFechaValido=!1},e.prototype.buscarCliente=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.cobroAnticipo.cliCodigo&&!(this.cobroAnticipo.cliCodigo&&this.codigoCliente&&this.cobroAnticipo.cliCodigo===this.codigoCliente)){var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1,busqueda:this.cobroAnticipo.cliCodigo};e.srcElement.blur(),e.preventDefault(),this.abrirModalCliente(t)}},e.prototype.abrirModalCliente=function(e){var t=this,o=this.modalService.open(W.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.codigoCliente=e.cliCodigo,t.cobroAnticipo.cliCodigo=e.cliCodigo,t.cobroAnticipo.cliEmpresa=p.a.KEY_EMPRESA_SELECT,t.nombreCliente=e.cliRazonSocial,t.direccion=e.cliDireccion,t.focusInput("fecha")):t.focusInput("cliente")},function(){t.focusInput("cliente")})},e.prototype.focusInput=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.validarCliente=function(){this.codigoCliente!==this.cobroAnticipo.cliCodigo&&(this.codigoCliente=null,this.nombreCliente="",this.cobroAnticipo.cliCodigo="",this.cobroAnticipo.cliEmpresa="",this.direccion="")},e.prototype.guardar=function(e){if(this.utilService.verificarPermiso(this.accion,this,!0)){var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t&&this.documentoValido&&this.isFechaValido){this.cargando=!0,this.antesDeGuardar();var o={carCobrosAnticipoTO:this.cobroAnticipo,observaciones:this.observaciones,nombreCliente:this.nombreCliente,fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaActual),sectorCliente:this.sectorSeleccionado.secCodigo,documento:this.documento};this.cobroAnticipoService.insertarAnticiposCobro(o,this,p.a.KEY_EMPRESA_SELECT)}else this.toastr.warning(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.antesDeGuardar=function(){this.cobroAnticipo.antEmpresa=p.a.KEY_EMPRESA_SELECT,this.cobroAnticipo.antTipo="C-ACLI",this.cobroAnticipo.secEmpresa=p.a.KEY_EMPRESA_SELECT,this.cobroAnticipo.secCodigo=this.sectorSeleccionado.secCodigo,this.cobroAnticipo.usrEmpresa=p.a.KEY_EMPRESA_SELECT,this.cobroAnticipo.fpSecuencial=this.fpSeleccionada.fpSecuencial,this.cobroAnticipo.usrCodigo=this.auth.getCodigoUser()},e.prototype.despuesDeInsertarAnticiposCobro=function(e){try{this.conContable=e.extraInfo,this.preguntarImprimir(e.operacionMensaje)}catch(t){this.cargando=!1,this.cerrarFormulario()}},e.prototype.preguntarImprimir=function(e){var t=this,o={title:p.a.TOAST_CORRECTO,texto:e+"<br>"+p.a.MSJ_PREGUNTA_IMPRIMIR+"<br>",type:p.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+p.a.ICON_IMPRIMIR+"'></i>  "+p.a.LABEL_IMPRIMIR,cancelButtonText:p.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.imprimirContable():t.cerrarFormulario()})},e.prototype.cerrarFormulario=function(){var e={accion:p.a.ACCION_CREADO,resultante:this.cobroAnticipoService.construirObjetoParaPonerloEnLaLista(this.cobroAnticipo,this.conContable,this.nombreCliente),empresa:this.empresaSeleccionada};this.cargando=!1,this.enviarAccion.emit(e)},e.prototype.imprimirContable=function(){var e=this;this.cargando=!0;var t=[],o=this.conContable.conContablePK;t.push(o);var a={listadoPK:t};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableIndividual",a,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?(e.utilService.descargarArchivoPDF("Contable.pdf",t),e.cargando=!1):(e.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return e.utilService.handleError(t,e)}),this.accion===p.a.ACCION_CREAR&&this.cerrarFormulario()},e.prototype.anular=function(){var e={conContablePK:this.conContable.conContablePK,anularReversar:!0,accionUsuario:"ANULAR",bandera:""};this.cargando=!0,this.pagoAnticipoService.anularReversarContable(this,e)},e.prototype.reversar=function(){var e={conContablePK:this.conContable.conContablePK,anularReversar:!1,accionUsuario:"REVERSAR",bandera:""};this.cargando=!0,this.pagoAnticipoService.anularReversarContable(this,e)},e.prototype.despuesDeAnularReversarContable=function(e){this.cargando=!1,this.utilService.generarSwal(p.a.SWAL_CORRECTO,p.a.SWAL_SUCCESS,e.operacionMensaje);var t={accion:p.a.ACCION_ELIMINADO};this.cargando=!1,this.enviarAccion.emit(t)},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmDatos?e.frmDatos.value:null))},50)},e.prototype.cancelar=function(){var e=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmDatos))this.enviarAccion.emit({accion:p.a.ACCION_CANCELAR});else{var t={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:p.a.ACCION_CANCELAR})})}},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarAccion.emit({accion:p.a.ACCION_ACTIVAR,estado:!e})},e.prototype.generarAtajos=function(){this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelar");return e&&e.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirContable");return e&&e.click(),!1}))},e.prototype.unloadHandler=function(e){switch(this.accion){case p.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=p.a.WINDOW_WIDTH_XS)},go([Object(a.Input)(),Ao("design:type",d.a)],e.prototype,"empresaSeleccionada",void 0),go([Object(a.Input)(),Ao("design:type",Object)],e.prototype,"parametrosFormulario",void 0),go([Object(a.Output)(),Ao("design:type",Object)],e.prototype,"enviarAccion",void 0),go([Object(a.Input)(),Ao("design:type",String)],e.prototype,"titulo",void 0),go([Object(a.ViewChild)("frmDatos"),Ao("design:type",co.NgForm)],e.prototype,"frmDatos",void 0),go([Object(a.HostListener)("window:beforeunload",["$event"]),Ao("design:type",Function),Ao("design:paramtypes",[Event]),Ao("design:returntype",void 0)],e.prototype,"unloadHandler",null),go([Object(a.HostListener)("window:resize",["$event"]),Ao("design:type",Function),Ao("design:paramtypes",[]),Ao("design:returntype",void 0)],e.prototype,"onResize",null),e=go([Object(a.Component)({selector:"app-cobro-anticipos-formulario",template:o("Uybw")}),Ao("design:paramtypes",[g.b,C.HotkeysService,G.b,m.a,ho.a,H.a,lo.a,Ue,x.a,Xt.a])],e)}(),Ro=function(){function e(e){this.id=0,this.cxccPeriodo="",this.cxccMotivo="",this.cxccNumero="",this.cxccAlterno="",this.cxccDocumentoNumero="",this.cxccSector="",this.cxccFechaEmision="",this.cxccFechaVencimiento="",this.cxccTotal=0,this.cxccAbonos=0,this.cxccSaldo=0,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.cxccPeriodo=e.cxccPeriodo?e.cxccPeriodo:this.cxccPeriodo,this.cxccMotivo=e.cxccMotivo?e.cxccMotivo:this.cxccMotivo,this.cxccNumero=e.cxccNumero?e.cxccNumero:this.cxccNumero,this.cxccAlterno=e.cxccAlterno?e.cxccAlterno:this.cxccAlterno,this.cxccDocumentoNumero=e.cxccDocumentoNumero?e.cxccDocumentoNumero:this.cxccDocumentoNumero,this.cxccSector=e.cxccSector?e.cxccSector:this.cxccSector,this.cxccFechaEmision=e.cxccFechaEmision?e.cxccFechaEmision:this.cxccFechaEmision,this.cxccFechaVencimiento=e.cxccFechaVencimiento?e.cxccFechaVencimiento:this.cxccFechaVencimiento,this.cxccTotal=e.cxccTotal?e.cxccTotal:this.cxccTotal,this.cxccAbonos=e.cxccAbonos?e.cxccAbonos:this.cxccAbonos,this.cxccSaldo=e.cxccSaldo?e.cxccSaldo:this.cxccSaldo,this.id=e.id?e.id:this.id},e}(),Eo=o("mozY"),Oo=o("G21y"),Io=o("ctD9"),To=function(){function e(e){this.detValor=0,this.detObservaciones="",this.antEmpresa="",this.antPeriodo="",this.antTipo="",this.antNumero="",this.antSector="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detValor=e.detValor?e.detValor:this.detValor,this.detObservaciones=e.detObservaciones?e.detObservaciones:this.detObservaciones,this.antEmpresa=e.antEmpresa?e.antEmpresa:this.antEmpresa,this.antPeriodo=e.antPeriodo?e.antPeriodo:this.antPeriodo,this.antTipo=e.antTipo?e.antTipo:this.antTipo,this.antNumero=e.antNumero?e.antNumero:this.antNumero,this.antSector=e.antSector?e.antSector:this.antSector},e}(),_o=function(){function e(e){this.detBanco=null,this.detCuenta=null,this.detFechaPst="",this.detReferencia="",this.detValor=0,this.detObservaciones="",this.banEmpresa=null,this.banCodigo=null,this.cobEmpresa="",this.cobPeriodo="",this.cobMotivo="",this.cobNumero="",this.secCodigo="",this.fpSecuencial=0,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detBanco=e.detBanco?e.detBanco:this.detBanco,this.detCuenta=e.detCuenta?e.detCuenta:this.detCuenta,this.detFechaPst=e.detFechaPst?e.detFechaPst:this.detFechaPst,this.detReferencia=e.detReferencia?e.detReferencia:this.detReferencia,this.detValor=e.detValor?e.detValor:this.detValor,this.detObservaciones=e.detObservaciones?e.detObservaciones:this.detObservaciones,this.banEmpresa=e.banEmpresa?e.banEmpresa:this.banEmpresa,this.banCodigo=e.banCodigo?e.banCodigo:this.banCodigo,this.cobEmpresa=e.cobEmpresa?e.cobEmpresa:this.cobEmpresa,this.cobPeriodo=e.cobPeriodo?e.cobPeriodo:this.cobPeriodo,this.cobMotivo=e.cobMotivo?e.cobMotivo:this.cobMotivo,this.cobNumero=e.cobNumero?e.cobNumero:this.cobNumero,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.fpSecuencial=e.fpSecuencial?e.fpSecuencial:this.fpSecuencial},e}(),yo=function(){function e(e){this.detSecuencial=0,this.detValor=0,this.cobEmpresa="",this.cobPeriodo="",this.cobTipo="",this.cobNumero="",this.vtaEmpresa="",this.vtaPeriodo="",this.vtaMotivo="",this.vtaNumero="",this.cliCodigo="",this.vtaDocumento="",this.vtaSecCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencial=e.detSecuencial?e.detSecuencial:this.detSecuencial,this.detValor=e.detValor?e.detValor:this.detValor,this.cobEmpresa=e.cobEmpresa?e.cobEmpresa:this.cobEmpresa,this.cobPeriodo=e.cobPeriodo?e.cobPeriodo:this.cobPeriodo,this.cobTipo=e.cobTipo?e.cobTipo:this.cobTipo,this.cobNumero=e.cobNumero?e.cobNumero:this.cobNumero,this.vtaEmpresa=e.vtaEmpresa?e.vtaEmpresa:this.vtaEmpresa,this.vtaPeriodo=e.vtaPeriodo?e.vtaPeriodo:this.vtaPeriodo,this.vtaMotivo=e.vtaMotivo?e.vtaMotivo:this.vtaMotivo,this.vtaNumero=e.vtaNumero?e.vtaNumero:this.vtaNumero,this.cliCodigo=e.cliCodigo?e.cliCodigo:this.cliCodigo,this.vtaDocumento=e.vtaDocumento?e.vtaDocumento:this.vtaDocumento,this.vtaSecCodigo=e.vtaSecCodigo?e.vtaSecCodigo:this.vtaSecCodigo},e}(),Po=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},No=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Lo=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.obtenerAutonumericReales=function(){return{decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999",minimumValue:"-999999999",negativeSignCharacter:"-"}},e.prototype.inicializarTotales=function(){return{cobro:0,forma:0,anticipo:0,diferencia:0}},e.prototype.armarAnticipos=function(e){for(var t=new Array,o=0;o<e.length;o++){var a=e[o];if(a.antValor>0){var i=new To;i.detValor=a.antValor,i.antEmpresa=p.a.KEY_EMPRESA_SELECT,i.antPeriodo=a.antPeriodo,i.antTipo=a.antTipo,i.antNumero=a.antNumero,i.antSector=a.antSector,i.detValor&&0!=i.detValor&&t.push(i)}}return t},e.prototype.extraerSector=function(e){if(e&&e.fpDetalle){var t=e.fpDetalle.split("|");if(t)return t[0].trim()}return""},e.prototype.armarFormasDeCobro=function(e){for(var t=new Array,o=0;o<e.length;o++){var a=new _o;if(!e[o].fpSeleccionada)return this.toastr.warning(p.a.MSJ_DEBE_SELECCIONAR_FORMA_DE_COBRO),[];var i=e[o].fpSeleccionada;if(a.fpSecuencial=i.fpSecuencial,a.cobEmpresa=p.a.KEY_EMPRESA_SELECT,a.secCodigo=this.extraerSector(i),a.detObservaciones=e[o].detObservaciones,a.detReferencia=e[o].detReferencia,a.detValor=e[o].detValor,i.postFechados){a.detBanco=e[o].bancoSeleccionado.banCodigo,a.detCuenta=e[o].detCuenta;var r=j(e[o].detFechaPst,"DD/MM/YYYY").toDate();a.detFechaPst=this.utilService.formatoStringSinZonaHorariaYYYMMDD(r),a.banEmpresa=p.a.KEY_EMPRESA_SELECT,a.banCodigo=e[o].bancoSeleccionado.banCodigo}else a.detBanco=null,a.detCuenta=null,a.detFechaPst=null,a.banEmpresa=null,a.banCodigo=null;a.detValor&&0!=a.detValor&&t.push(a)}return t},e.prototype.armarCobroParaGuardar=function(e,t){var o=e,a=new yo;return a.detSecuencial=o.id,a.detValor=o.valor,a.cobEmpresa=p.a.KEY_EMPRESA_SELECT,a.vtaEmpresa=p.a.KEY_EMPRESA_SELECT,a.vtaPeriodo=o.cxccPeriodo,a.vtaMotivo=o.cxccMotivo,a.vtaNumero=o.cxccNumero,a.cliCodigo=t,a.vtaDocumento=o.cxccDocumentoNumero,a.vtaSecCodigo=o.cxccSector,a},e.prototype.construirObjetoParaPonerloEnLaLista=function(e,t){var o=new ae;return o.cobFecha=e.cobFecha,o.cobNumeroSistema=t.conContablePK.conPeriodo+" | "+t.conContablePK.conTipo+" | "+t.conContablePK.conNumero,o.cobObservaciones=e.cobObservaciones,o.cobValor=e.cobValor,o.cobCliente=e.cliCodigo+" | "+e.conApellidosNombres,o},e.prototype.obtenerDatosParaCobros=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/obtenerDatosParaCobros",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaCobros(e.extraInfo):(a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarCarCobros=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/insertarCarCobros",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarCarCobros(e):(a.utilService.generarSwal(p.a.CARTERA_COBROS,p.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerCobro=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/obtenerCobro",e,o).then(function(e){if(e&&e.extraInfo)t.despuesDeObtenerCobro(e.extraInfo);else{a.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO),t.cargando=!1;var o={accion:p.a.ACCION_EJECUTAR};t.enviarAccion.emit(o)}}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=this,o=[];return o.push({headerName:p.a.TAG_PERIODO,field:"cxccPeriodo",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_MOTIVO,field:"cxccMotivo",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_NUMERO,field:"cxccNumero",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_DOCUMENTO,field:"cxccDocumentoNumero",width:150,minWidth:150},{headerName:p.a.TAG_SECTOR,field:"cxccSector",width:100,minWidth:100,maxWitdh:100,hide:e.accion!=p.a.ACCION_CREAR},{headerName:p.a.TAG_FECHA,field:"cxccFechaEmision",cellClassRules:{"cell-with-errors":function(o){return e.accion==p.a.ACCION_CREAR&&(o.data.valor&&0!=o.data.valor&&t.validarFechaFactura(o.data.cxccFechaEmision,e.fechaActual))}},width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_VENCIMIENTO,field:"cxccFechaVencimiento",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_TOTAL,valueFormatter:Mo,cellClass:"text-right",field:"cxccTotal",width:100,minWidth:100},{headerName:p.a.TAG_ABONOS,valueFormatter:Mo,cellClass:"text-right",field:"cxccAbonos",width:100,minWidth:100},{headerName:p.a.TAG_SALDO,valueFormatter:Mo,cellClass:"text-right",field:"cxccSaldo",width:100,minWidth:100,hide:e.accion!=p.a.ACCION_CREAR},{headerComponentFramework:Oo.a,headerClass:"pr-0",headerComponentParams:{name:p.a.TAG_COBRAR,value:e.cobrarTodosCheck,tooltipText:p.a.TAG_COBRAR_TODO},cellClass:"text-center",field:"cobrar",width:150,minWidth:100,cellRendererFramework:Io.a,cellRendererParams:function(e){return{params:e.data.cobrar,ejecutarMetodo:!0}},hide:e.accion!=p.a.ACCION_CREAR},{headerName:p.a.TAG_VALOR,field:"valor",width:120,minWidth:80,valueFormatter:Mo,cellClass:"text-right",cellEditorFramework:Eo.a,cellEditorParams:{name:"valor",maxlength:12,placeholder:"0.00",configAutonumeric:e.configAutonumericReales},suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoCobros)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:!0,cellClassRules:{"cell-with-errors":function(e){return t.utilService.quitarComasNumero(e.data.valor)<0?e.data.valor&&0!=e.data.valor&&t.utilService.quitarComasNumero(e.data.valor)!=e.data.cxccSaldo:e.data.valor&&0!=e.data.valor&&t.utilService.quitarComasNumero(e.data.valor)>e.data.cxccSaldo}},hide:e.accion!=p.a.ACCION_CREAR},this.utilService.getColumnaOpciones()),o},e.prototype.validarFechaFactura=function(e,t){return!(!e||!t)&&!(j(e,"YYYY-MM-DD").toDate().getTime()<=t.getTime())},e=Po([Object(a.Injectable)({providedIn:"root"}),No("design:paramtypes",[K.a,g.b,m.a])],e)}();function Mo(e){return e.value||(e.value=0),new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var Do=function(){function e(e){this.conApellidosNombres="",this.cobPeriodo="",this.cobTipo="",this.cobNumero="",this.cobReversado=!1,this.cobSaldoAnterior=0,this.cobValor=0,this.cobSaldoActual=0,this.cobFecha="",this.cobObservaciones="",this.cliCodigo="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.conApellidosNombres=e.conApellidosNombres?e.conApellidosNombres:this.conApellidosNombres,this.cobPeriodo=e.cobPeriodo?e.cobPeriodo:this.cobPeriodo,this.cobTipo=e.cobTipo?e.cobTipo:this.cobTipo,this.cobNumero=e.cobNumero?e.cobNumero:this.cobNumero,this.cobReversado=e.cobReversado?e.cobReversado:this.cobReversado,this.cobSaldoAnterior=e.cobSaldoAnterior?e.cobSaldoAnterior:this.cobSaldoAnterior,this.cobValor=e.cobValor?e.cobValor:this.cobValor,this.cobSaldoActual=e.cobSaldoActual?e.cobSaldoActual:this.cobSaldoActual,this.cobFecha=e.cobFecha?e.cobFecha:this.cobFecha,this.cobObservaciones=e.cobObservaciones?e.cobObservaciones:this.cobObservaciones,this.cliCodigo=e.cliCodigo?e.cliCodigo:this.cliCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),Fo=o("9v1L"),xo=o("dqpl"),wo=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},jo=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Go=function(){function e(e,t,o,i,r,n,s,c,l,u){this.toastr=e,this.atajoService=t,this.modalService=o,this.utilService=i,this.auth=r,this.pagoAnticipoService=n,this.pagoService=s,this.cobroService=c,this.periodoService=l,this.listadoCobrosService=u,this.empresaSeleccionada=new d.a,this.parametrosFormulario={},this.enviarAccion=new a.EventEmitter,this.titulo=p.a.CARTERA_COBROS,this.constantes=p.a,this.accion=null,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.vistaFormulario=!1,this.cobrarTodosCheck=!1,this.seEncontraronResultados=!1,this.es={},this.conContable=new so.a,this.listaFormaPago=new Array,this.listadoCobros=new Array,this.listadoCobrosAnticipos=new Array,this.bancos=new Array,this.cobro=new Do,this.listadoDeFormasDeCobro=new Array,this.listadoDeCobroVentaAGuardar=new Array,this.mostrarAccionesContabilidad=!0,this.tipoDocumento="",this.objetoSeleccionado=new ae,this.ventaSeleccionada=new Ro,this.fechaActual=new Date,this.codigoCliente=null,this.observaciones="",this.direccion="",this.ruc="",this.isFechaValido=!0,this.totales={},this.columnDefs=[],this.columnDefsSelected=[],this.noData=p.a.MSJ_NO_HAY_DATOS,j.locale("es"),this.es=this.utilService.setLocaleDate(),this.configAutonumericReales=c.obtenerAutonumericReales()}return e.prototype.ngOnInit=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.isScreamMd=!(this.innerWidth<=p.a.WINDOW_WIDTH_XS),this.accion=this.parametrosFormulario.accion,this.objetoSeleccionado=this.parametrosFormulario.seleccionado,this.generarAtajos(),this.parametrosFormulario.cliente&&this.completarDatosCliente(this.parametrosFormulario.cliente),this.accion!=p.a.ACCION_CREAR&&(this.titulo=this.titulo+" ("+this.objetoSeleccionado.cobNumeroSistema+")",this.obtenerInformacionParaMostrarCobro()),this.iniciarAgGrid()},e.prototype.completarDatosCliente=function(e){var t=this;this.codigoCliente=e.invClientePK.cliCodigo,this.cobro.cliCodigo=e.invClientePK.cliCodigo,this.cobro.conApellidosNombres=e.cliRazonSocial,this.direccion=e.cliDireccion,this.ruc=e.cliIdNumero,this.obtenerDatosParaCrudCobros(),setTimeout(function(){t.focusInput("fecha")},50)},e.prototype.obtenerDatosParaCrudCobros=function(){this.totales=this.cobroService.inicializarTotales(),this.seEncontraronResultados=!1,this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT,cliente:this.codigoCliente,accion:"C"};this.cobroService.obtenerDatosParaCobros(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosParaCobros=function(e){this.fechaActual=new Date(e.fechaActual),this.listaFormaPago=e.listaForma,this.listadoCobros=e.listaCobros,this.bancos=e.bancos,this.completarTablaCobros(),this.listadoCobrosAnticipos=e.listaAnticipo,this.cargando=!1,this.validarFechaPorPeriodo(),this.extraerValoresIniciales(),this.seEncontraronResultados=!0},e.prototype.obtenerInformacionParaMostrarCobro=function(){this.seEncontraronResultados=!1,this.cargando=!0;var e=this.utilService.obtenerConContablePK(this.objetoSeleccionado.cobNumeroSistema,p.a.KEY_EMPRESA_SELECT,"|"),t={empresa:p.a.KEY_EMPRESA_SELECT,periodo:e.conPeriodo,tipo:e.conTipo,numero:e.conNumero};this.cobroService.obtenerCobro(t,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerCobro=function(e){this.formatearCobro(e.cobro),this.listadoCobros=e.listaCobros,this.completarTablaCobros(),this.listadoDeFormasDeCobro=e.listadoDeFormasDeCobro,this.conContable=e.contable?e.contable:new so.a,this.fechaActual=new Date(this.conContable.conFecha),this.cargando=!1,this.extraerValoresIniciales(),this.seEncontraronResultados=!0},e.prototype.formatearCobro=function(e){this.codigoCliente=this.cobro.cliCodigo=e.cliCodigo,this.cobro.conApellidosNombres=e.cliRazonSocial,this.direccion=e.cliDireccion,this.observaciones=e.cliObservaciones,this.ruc=e.cliRuc,this.cobro.cobValor=e.cobValor},e.prototype.validarFechaPorPeriodo=function(){if(this.isFechaValido=!1,this.fechaActual){var e={fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaActual),empresa:p.a.KEY_EMPRESA_SELECT};this.periodoService.getPeriodoPorFecha(e,this,p.a.KEY_EMPRESA_SELECT)}this.refreshGrid()},e.prototype.despuesDeGetPeriodoPorFecha=function(e){e&&!e.perCerrado?this.isFechaValido=!0:this.isFechaValido=!1},e.prototype.buscarCliente=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.cobro.cliCodigo&&!(this.cobro.cliCodigo&&this.codigoCliente&&this.cobro.cliCodigo===this.codigoCliente)){var t={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1,busqueda:this.cobro.cliCodigo};e.srcElement.blur(),e.preventDefault(),this.abrirModalCliente(t)}},e.prototype.abrirModalCliente=function(e){var t=this,o=this.modalService.open(W.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.codigoCliente=e.cliCodigo,t.cobro.cliCodigo=e.cliCodigo,t.cobro.conApellidosNombres=e.cliRazonSocial,t.direccion=e.cliDireccion,t.ruc=e.cliId,t.obtenerDatosParaCrudCobros(),t.focusInput("fecha")):t.focusInput("cliente")},function(){t.focusInput("cliente")})},e.prototype.validarCliente=function(){this.codigoCliente!==this.cobro.cliCodigo&&(this.codigoCliente=null,this.cobro.conApellidosNombres="",this.cobro.cliCodigo="",this.direccion="",this.ruc="",this.listadoDeFormasDeCobro=new Array,this.listadoDeCobroVentaAGuardar=new Array)},e.prototype.focusInput=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.pararEdicionDeTablas=function(){this.gridApi&&this.gridApi.stopEditing(),this.gridApiAnticipo&&this.gridApiAnticipo.stopEditing(),this.gridApiForma&&this.gridApiForma.stopEditing()},e.prototype.guardar=function(e){if(this.pararEdicionDeTablas(),this.utilService.verificarPermiso(this.accion,this,!0)&&this.validarAntesDeEnviar(e)){this.cargando=!0,this.antesDeGuardar();var t={carCobrosTO:this.cobro,carCobrosDetalleVentasTOs:this.listadoDeCobroVentaAGuardar,carCobrosDetalleAnticiposTOs:0!=this.totales.anticipo?this.cobroService.armarAnticipos(this.listadoCobrosAnticipos):[],carCobrosDetalleFormaTOs:0!=this.totales.forma?this.cobroService.armarFormasDeCobro(this.listadoDeFormasDeCobro):[]};this.cobroService.insertarCarCobros(t,this,p.a.KEY_EMPRESA_SELECT)}},e.prototype.validarAntesDeEnviar=function(e){var t=this.utilService.establecerFormularioTocado(e);if(!(e&&e.valid&&t&&this.isFechaValido))return this.toastr.warning(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),!1;if(!this.listadoCobros||this.listadoCobros.length<=0)return this.toastr.warning(p.a.MSJ_NO_EXISTEN_DOCUMENTOS_POR_COBRAR,p.a.MSJ_TITULO_INVALIDOS),!1;for(var o=0;o<this.listadoCobros.length;o++){if((a=this.listadoCobros[o])&&a.valor&&0!=a.valor){if(a.valor<0&&this.utilService.quitarComasNumero(a.valor)!=a.cxccSaldo)return this.toastr.warning(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),!1;if(this.cobroService.validarFechaFactura(a.cxccFechaEmision,this.fechaActual))return this.toastr.warning(p.a.MSJ_COBRANDO_FACTURA_CON_FECHA_ANTERIOR,p.a.MSJ_TITULO_INVALIDOS),!1}}if(0!=this.totales.forma)for(o=0;o<this.listadoDeFormasDeCobro.length;o++){var a;if(!((a=this.listadoDeFormasDeCobro[o])&&a.fpSeleccionada&&(a.fpSeleccionada.fpDetalle||a.detValor&&0==a.detValor)))return this.toastr.warning(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),!1;if(a.fpSeleccionada.postFechados){if(!(a.bancoSeleccionado&&a.bancoSeleccionado.banNombre&&a.detCuenta&&a.detFechaPst))return this.toastr.warning(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),!1;if(!this.pagoService.validarFecha(this.listadoDeFormasDeCobro[o],this.fechaActual))return this.toastr.warning(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),!1}}return 0==this.utilService.quitarComasNumero(this.totales.diferencia)||(this.toastr.warning(p.a.MSJ_LOS_VALORES_TOTALES_NO_COINCIDEN,p.a.MSJ_TITULO_INVALIDOS),!1)},e.prototype.antesDeGuardar=function(){this.listadoDeCobroVentaAGuardar=new Array,this.cobro.cobTipo="C-COB",this.cobro.usrEmpresa=p.a.KEY_EMPRESA_SELECT,this.cobro.usrCodigo=this.auth.getCodigoUser(),this.cobro.cobSaldoAnterior=0,this.cobro.cobValor=0,this.cobro.cobSaldoActual=0,this.cobro.cobFecha=this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaActual),this.cobro.cobObservaciones=this.observaciones;for(var e=0;e<this.listadoCobros.length;e++){var t=this.listadoCobros[e];if(t.valor&&0!=t.valor){var o=this.cobroService.armarCobroParaGuardar(t,this.codigoCliente);this.listadoDeCobroVentaAGuardar.push(o),this.cobro.cobSaldoAnterior=this.mathRound2(this.cobro.cobSaldoAnterior)+this.mathRound2(t.cxccSaldo),this.cobro.cobValor=this.mathRound2(this.cobro.cobValor)+this.mathRound2(t.valor),this.cobro.cobSaldoActual=this.mathRound2(this.cobro.cobSaldoAnterior)-this.mathRound2(this.cobro.cobValor)}}},e.prototype.despuesDeInsertarCarCobros=function(e){if(e)try{this.conContable=e.extraInfo,this.preguntarImprimir(e.operacionMensaje)}catch(t){this.cargando=!1,this.cerrarFormulario()}else this.cargando=!1},e.prototype.cerrarFormulario=function(){var e={accion:p.a.ACCION_CREADO,resultante:this.cobroService.construirObjetoParaPonerloEnLaLista(this.cobro,this.conContable),empresa:this.empresaSeleccionada};this.cargando=!1,this.enviarAccion.emit(e)},e.prototype.ejecutarMetodoChecbox=function(e){e.cobrar?e.valor=e.cxccSaldo:e.valor=0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.calcularTotal()},e.prototype.cambiarEstadoCheckCabecera=function(e){e?this.gridApi.forEachNode(function(e){var t=e.data;t.valor=t.cxccSaldo,t.cobrar=!0}):this.gridApi.forEachNode(function(e){var t=e.data;t.valor=0,t.cobrar=!1}),this.refreshGrid(),this.calcularTotal()},e.prototype.cambioValor=function(e){e.valor===e.cxccSaldo?e.cobrar=!0:e.cobrar=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.calcularTotal()},e.prototype.calcularTotal=function(){var e=this;this.cobrarTodosCheck=!0,this.totales.cobro=0,this.gridApi.forEachNode(function(t){var o=t.data;e.totales.cobro=e.mathRound2(e.totales.cobro)+e.mathRound2(o.valor),e.totales.diferencia=e.mathRound2(e.totales.cobro)-(e.mathRound2(e.totales.forma)+e.mathRound2(e.totales.anticipo)),o.valor!=o.cxccSaldo&&(e.cobrarTodosCheck=!1)})},e.prototype.completarTablaCobros=function(){if(this.cobrarTodosCheck=!0,this.totales.cobro=0,this.listadoCobros)for(var e=0;e<this.listadoCobros.length;e++){var t=this.listadoCobros[e];this.listadoCobros[e].valor=t.valor?t.valor:0,t.valor===t.cxccSaldo?this.listadoCobros[e].cobrar=!0:this.listadoCobros[e].cobrar=!1,t.valor!=t.cxccSaldo&&(this.cobrarTodosCheck=!1),t.valor=this.accion==p.a.ACCION_CREAR?t.valor:t.cxccAbonos,this.totales.cobro=this.mathRound2(this.totales.cobro)+this.mathRound2(t.valor),this.totales.diferencia=this.mathRound2(this.totales.cobro)-(this.mathRound2(this.totales.forma)+this.mathRound2(this.totales.anticipo))}},e.prototype.mathRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.imprimirListaCobrosIndividual=function(){if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,numeroSistema:[this.objetoSeleccionado.cobNumeroSistema],nombre:"reportCobros.jrxml"};this.listadoCobrosService.imprimirCarFunCobrosPorLote(e,this,this.empresaSeleccionada)}},e.prototype.preguntarImprimir=function(e){var t=this,o=[this.conContable.conContablePK],a=[this.conContable.conContablePK.conPeriodo+" | "+this.conContable.conContablePK.conTipo+" | "+this.conContable.conContablePK.conNumero],i=this.modalService.open(Fo.a,{backdrop:"static"});i.componentInstance.mensaje=e,i.componentInstance.mostrarCombo=!0,i.componentInstance.empresaSeleccionada=this.empresaSeleccionada,i.componentInstance.textoImprimirCombo=p.a.LABEL_IMPRIMIR_COMPROBANTE_COBRO,i.componentInstance.parametrosImprimir={listadoPK:o},i.componentInstance.nombreRutaImprimir="todocompuWS/contabilidadWebController/generarReporteContableIndividual",i.componentInstance.nombreArchivoPDFImprimir="ContableAnticipo",i.componentInstance.parametrosImprimirCombo={empresa:p.a.KEY_EMPRESA_SELECT,numeroSistema:a,nombre:"reportCobros.jrxml"},i.componentInstance.nombrerutaImprimirCombo="todocompuWS/carteraWebController/generarReportePorLoteCobros",i.componentInstance.nombreArchivoPDFImprimirCombo="ReporteComprobanteCobro",i.result.then(function(e){t.cerrarFormulario()},function(){t.cerrarFormulario()})},e.prototype.anular=function(){var e={conContablePK:this.conContable.conContablePK,anularReversar:!0,accionUsuario:"ANULAR",bandera:""};this.cargando=!0,this.pagoAnticipoService.anularReversarContable(this,e)},e.prototype.reversar=function(){var e={conContablePK:this.conContable.conContablePK,anularReversar:!1,accionUsuario:"REVERSAR",bandera:""};this.cargando=!0,this.pagoAnticipoService.anularReversarContable(this,e)},e.prototype.despuesDeAnularReversarContable=function(e){this.cargando=!1,this.utilService.generarSwal(p.a.SWAL_CORRECTO,p.a.SWAL_SUCCESS,e.operacionMensaje);var t={accion:p.a.ACCION_ELIMINADO};this.cargando=!1,this.enviarAccion.emit(t)},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmDatos?e.frmDatos.value:null))},50)},e.prototype.cancelar=function(){var e=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmDatos))this.enviarAccion.emit({accion:p.a.ACCION_CANCELAR});else{var t={title:p.a.MSJ_TITULO_CANCELAR,texto:p.a.MSJ_PREGUNTA_CANCELAR,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:p.a.ACCION_CANCELAR})})}},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarAccion.emit({accion:p.a.ACCION_ACTIVAR,estado:!e})},e.prototype.generarAtajos=function(){var e=this;this.atajoService.add(new C.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_GUARDAR,function(){e.focusInput("cliente"),e.pararEdicionDeTablas();var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_CANCELAR,function(){e.focusInput("cliente"),e.pararEdicionDeTablas();var t=document.getElementById("btnCancelar");return t&&t.click(),!1})),this.atajoService.add(new C.Hotkey(p.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirContable");return e&&e.click(),!1}))},e.prototype.generarOpciones=function(){var e=this;this.opciones=[{label:p.a.LABEL_CONSULTAR_VENTA,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.consultarVenta()}}]},e.prototype.consultarVenta=function(){var e=new De.a;e.vtaNumero=this.ventaSeleccionada.cxccPeriodo+"|"+this.ventaSeleccionada.cxccMotivo+"|"+this.ventaSeleccionada.cxccNumero,this.parametrosVenta={accion:p.a.ACCION_CONSULTAR,seleccionado:e}},e.prototype.ejecutarAccion=function(e){switch(e.accion){case p.a.ACCION_ACTIVAR:this.cambiarActivar(e.estado);break;case p.a.ACCION_CANCELAR:this.generarAtajos(),this.parametrosVenta=null,this.objetoContableEnviar=null;break;case p.a.ACCION_CONSULTAR_CONTABLE:this.parametrosVenta=null,this.verContable(e.objetoSeleccionado)}},e.prototype.verContable=function(e){e?(this.mostrarAccionesContabilidad=!0,this.cargando=!0,this.objetoContableEnviar={accion:p.a.ACCION_CONSULTAR,contable:e.antPeriodo+" | "+e.antTipo+" | "+e.antNumero,empresaSeleccionada:this.empresaSeleccionada,activar:!0,volverACargar:!0},this.activar=!0):this.toastr.warning(p.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,p.a.TAG_AVISO)},e.prototype.cerrarContabilidadAcciones=function(e){e.noIniciarAtajoPadre||(this.generarAtajos(),this.activar=!1,this.objetoContableEnviar=e.objetoEnviar,this.mostrarAccionesContabilidad=e.mostrarContilidadAcciones)},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e},e.prototype.cambiarEstadoActivar=function(e){this.cambiarActivar(e)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cobroService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.ventaSeleccionada=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.ventaSeleccionada=t?t.data:null,this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}))},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.alCambiarValorDeCelda=function(e){"valor"===e.colDef.field&&this.cambioValor(e.data)},e.prototype.unloadHandler=function(e){switch(this.accion){case p.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=p.a.WINDOW_WIDTH_XS)},wo([Object(a.Input)(),jo("design:type",d.a)],e.prototype,"empresaSeleccionada",void 0),wo([Object(a.Input)(),jo("design:type",Object)],e.prototype,"parametrosFormulario",void 0),wo([Object(a.Output)(),jo("design:type",Object)],e.prototype,"enviarAccion",void 0),wo([Object(a.Input)(),jo("design:type",String)],e.prototype,"titulo",void 0),wo([Object(a.ViewChild)("frmDatos"),jo("design:type",co.NgForm)],e.prototype,"frmDatos",void 0),wo([Object(a.ViewChild)("menuOpciones"),jo("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),wo([Object(a.HostListener)("window:beforeunload",["$event"]),jo("design:type",Function),jo("design:paramtypes",[Event]),jo("design:returntype",void 0)],e.prototype,"unloadHandler",null),wo([Object(a.HostListener)("window:resize",["$event"]),jo("design:type",Function),jo("design:paramtypes",[]),jo("design:returntype",void 0)],e.prototype,"onResize",null),e=wo([Object(a.Component)({selector:"app-cobro-formulario",template:o("9wFz")}),jo("design:paramtypes",[g.b,C.HotkeysService,G.b,m.a,ho.a,x.a,xo.a,Lo,Xt.a,ne])],e)}(),ko=o("y2/l"),Uo=o("cSU/"),Bo=o("chRk"),Ho=o("jHBj"),Vo=o("OeYz"),Yo=o("BQ37"),zo=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Jo=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Wo=function(){function e(e,t){this.utilService=e,this.pagoService=t}return e.prototype.generarColumnas=function(e){var t=this,o=[];return o.push({headerName:p.a.TAG_FORMA_PAGO,field:"fpForma",width:100,minWidth:100,maxWitdh:100,hide:e.accion===p.a.ACCION_CREAR},{headerName:p.a.TAG_FORMA_PAGO,field:"fpSeleccionada",width:160,minWidth:160,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDeCobro)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClass:"text-center",cellClassRules:{"cell-with-errors":function(t){return!t.data.fpSeleccionada&&e.accion===p.a.ACCION_CREAR}},editable:e.accion===p.a.ACCION_CREAR,cellEditorFramework:Bo.a,cellEditorParams:function(t){return{value:t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,name:"fpSeleccionada",obligatorio:!0,listValues:e.listaFormaPago?e.listaFormaPago:[],fieldsShow:["fpDetalle"]}},valueFormatter:function(t){return t.data.fpSeleccionada=t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,t.data.fpSeleccionada?t.node.rowPinned?t.data.fpSeleccionada:t.data.fpSeleccionada.fpDetalle:e.fpSeleccionada?e.fpSeleccionada.fpDetalle:""},hide:e.accion!=p.a.ACCION_CREAR},{headerName:p.a.TAG_BANCO,field:"bancoSeleccionado",width:160,minWidth:160,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDeCobro)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClass:"text-center",cellClassRules:{"cell-with-errors":function(t){return!t.data.bancoSeleccionado&&e.accion===p.a.ACCION_CREAR}},editable:function(t){return e.accion===p.a.ACCION_CREAR&&t.data.fpSeleccionada&&t.data.fpSeleccionada.postFechados},cellEditorFramework:Bo.a,cellEditorParams:function(t){return{value:t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,name:"bancoSeleccionado",obligatorio:!0,listValues:e.bancos?e.bancos:[],fieldsShow:["banNombre"]}},valueFormatter:function(t){return t.data.bancoSeleccionado=t.data.bancoSeleccionado?t.data.bancoSeleccionado:e.bancoSeleccionado,t.data.bancoSeleccionado?t.node.rowPinned?t.data.bancoSeleccionado:t.data.bancoSeleccionado.banNombre:e.bancoSeleccionado?e.bancoSeleccionado.banNombre:""},hide:!e.esPostFechado},{headerName:p.a.TAG_CUENTA,field:"detCuenta",suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDeCobro)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:160,minWidth:160,editable:function(t){return e.accion===p.a.ACCION_CREAR&&t.data.fpSeleccionada&&t.data.fpSeleccionada.postFechados},cellClassRules:{"cell-with-errors":function(t){return!t.data.detCuenta&&t.data.fpSeleccionada&&t.data.fpSeleccionada.postFechados&&e.accion===p.a.ACCION_CREAR}},cellEditorFramework:Ho.a,cellEditorParams:{name:"detCuenta",maxlength:50,inputClass:"text-uppercase",placeholder:""},hide:!e.esPostFechado},{headerName:p.a.TAG_FECHA,field:"detFechaPst",suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDeCobro)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:160,minWidth:160,editable:function(t){return e.accion===p.a.ACCION_CREAR&&t.data.fpSeleccionada&&t.data.fpSeleccionada.postFechados},cellClassRules:{"cell-with-errors":function(o){return e.accion===p.a.ACCION_CREAR&&(o.data.fpSeleccionada&&o.data.fpSeleccionada.postFechados&&!t.pagoService.validarFecha(o.data,e.fechaActual))}},cellEditorFramework:Yo.a,cellEditorParams:{name:"detFechaPst",minDate:new Date},hide:!e.esPostFechado},{headerName:p.a.TAG_REFERENCIA,field:"detReferencia",width:110,minWidth:110,cellClass:"mousetrap",cellClassRules:{"cell-with-errors":function(t){return(t.data.errorEnDocumento||t.data.documentoRepetido)&&e.accion===p.a.ACCION_CREAR}},editable:e.accion===p.a.ACCION_CREAR,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDeCobro)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:Vo.a,cellEditorParams:{name:"detReferencia",inputClass:"text-uppercase"}},{headerName:p.a.TAG_VALOR,field:"detValor",valueFormatter:Ko,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDeCobro)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:110,minWidth:110,editable:e.accion===p.a.ACCION_CREAR,cellClass:"text-right",cellClassRules:{"cell-with-errors":function(t){return(!t.data.detValor||0===t.data.detValor)&&e.accion===p.a.ACCION_CREAR}},cellEditorFramework:Eo.a,cellEditorParams:{name:"detValor",maxlength:12,placeholder:"0.00",configAutonumeric:e.configAutonumericReales}},{headerName:p.a.TAG_OBSERVACION,field:"detObservaciones",width:200,minWidth:200,cellClass:"mousetrap",editable:e.accion===p.a.ACCION_CREAR,suppressKeyboardEvent:function(o){if(e.agregarFilaAlFinal(o),o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDeCobro)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:Vo.a,cellEditorParams:{name:"detObservaciones",inputClass:"text-uppercase"}}),e.accion===p.a.ACCION_CREAR&&o.push(this.utilService.getColumnaOpciones()),o},e=zo([Object(a.Injectable)({providedIn:"root"}),Jo("design:paramtypes",[m.a,xo.a])],e)}();function Ko(e){return e.value||(e.value=0),new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}var Xo=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},$o=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qo=function(){function e(e,t,o){this.utilService=e,this.contableService=t,this.cobroFormaDetalleService=o,this.listaFormaPago=new Array,this.listadoDeFormasDeCobro=new Array,this.bancos=new Array,this.totales={},this.fechaActual=new Date,this.accion=null,this.constantes=p.a,this.objetoSeleccionado=new _o,this.fpSeleccionada=new uo.a,this.bancoSeleccionado=new Uo.a,this.columnDefs=[],this.columnDefsSelected=[],this.noData=p.a.MSJ_NO_HAY_DATOS,this.esPostFechado=!1,this.inputCuenta={decimalPlaces:0,decimalPlacesRawValue:0,decimalPlacesShownOnBlur:0,decimalPlacesShownOnFocus:0,maximumValue:"999999999999"}}return e.prototype.ngOnInit=function(){this.fpSeleccionada=this.listaFormaPago[0],this.bancoSeleccionado=this.bancos[0],this.esPostFechado=this.isCtaPostfechado(),this.iniciarAgGrid(),this.accion==p.a.ACCION_CREAR?this.nuevoItem():this.formatearFormasDeCobro()},e.prototype.nuevoItem=function(){var e=new _o;this.listadoDeFormasDeCobro.push(e)},e.prototype.isCtaPostfechado=function(){if(this.listaFormaPago&&this.listaFormaPago.length>0)for(var e=0;e<this.listaFormaPago.length;e++)if(this.listaFormaPago[e].postFechados)return!0;return!1},e.prototype.formatearFormasDeCobro=function(){this.totales.forma=0;for(var e=0;e<this.listadoDeFormasDeCobro.length;e++){var t=this.listadoDeFormasDeCobro[e];this.listadoDeFormasDeCobro[e].detValor=t.fpValor,this.listadoDeFormasDeCobro[e].detReferencia=t.fpReferencia,this.listadoDeFormasDeCobro[e].detObservaciones=t.fpObservacion,this.totales.forma=this.mathRound2(this.totales.forma)+this.mathRound2(this.listadoDeFormasDeCobro[e].detValor),this.totales.diferencia=this.mathRound2(this.totales.cobro)-(this.mathRound2(this.totales.forma)+this.mathRound2(this.totales.anticipo))}},e.prototype.calcularTotal=function(){var e=this;this.totales.forma=0,this.gridApi.forEachNode(function(t){var o=t.data;e.totales.forma=e.mathRound2(e.totales.forma)+e.mathRound2(o.detValor),e.totales.diferencia=e.mathRound2(e.totales.cobro)-(e.mathRound2(e.totales.forma)+e.mathRound2(e.totales.anticipo))})},e.prototype.mathRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.generarOpciones=function(e){var t=this;this.opciones=[{label:p.a.ACCION_AGREGAR_FILA_ARRIBA,icon:p.a.ICON_FLECHA_ARRIBA,disabled:!1,command:function(){return t.agregarFila("up",e)}},{label:p.a.ACCION_AGREGAR_FILA_ABAJO,icon:p.a.ICON_FLECHA_ABAJO,disabled:!1,command:function(){return t.agregarFila("down",e)}},{label:p.a.ACCION_ELIMINAR_FILA,icon:p.a.ICON_ELIMINAR,disabled:!1,command:function(){return t.eliminarFila(e)}}]},e.prototype.agregarFila=function(e,t,o){var a=t;a>=0&&this.agregarFilaByIndex(a,e,o)},e.prototype.agregarFilaByIndex=function(e,t,o){var a="up"===t?e:e+1,i=new _o;this.listadoDeFormasDeCobro.splice(a,0,i),this.gridApi&&this.gridApi.updateRowData({add:[i],addIndex:a}),o?this.cantidadFocusAndEditingCell(e):this.focusedFP(a),this.refreshGrid()},e.prototype.focusedFP=function(e){var t=this;setTimeout(function(){t.FPFocusAndEditingCell(e)},50)},e.prototype.FPFocusAndEditingCell=function(e){this.gridApi&&(this.gridApi.setFocusedCell(e,"fpSeleccionada"),this.gridApi.startEditingCell({rowIndex:e,colKey:"fpSeleccionada"}))},e.prototype.cantidadFocusAndEditingCell=function(e){this.gridApi&&(this.gridApi.setFocusedCell(e,"detValor"),this.gridApi.startEditingCell({rowIndex:e,colKey:"detValor"}),this.gridApi.ensureIndexVisible(e+1))},e.prototype.eliminarFila=function(e){if(this.listadoDeFormasDeCobro.length>1){var t=e;this.quitarElementoDeFila(t)}},e.prototype.quitarElementoDeFila=function(e){this.listadoDeFormasDeCobro.splice(e,1),this.gridApi&&this.gridApi.updateRowData({remove:[this.objetoSeleccionado],addIndex:e}),this.refreshGrid()},e.prototype.agregarFilaAlFinal=function(e){var t=e.event.keyCode,o=e.node.rowIndex;this.objetoSeleccionado=this.listadoDeFormasDeCobro[o],this.utilService.validarKeyBuscar(t)&&this.accion===p.a.ACCION_CREAR&&o>=0&&o===this.listadoDeFormasDeCobro.length-1&&(e.event.srcElement.blur(),e.event.preventDefault(),this.agregarFilaByIndex(o,"down",!1))},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.cobroFormaDetalleService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){var o=this.gridApi?this.gridApi.getFocusedCell():null;o&&this.mostrarContextMenu(t,o.rowIndex,e)},e.prototype.mostrarContextMenu=function(e,t,o){this.objetoSeleccionado=e,this.accion===p.a.ACCION_CREAR&&(this.generarOpciones(t),this.menuOpciones.show(o),o.stopPropagation())},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.objetoSeleccionado=t?t.data:null,this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}))},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.alCambiarValorDeCelda=function(e){"detValor"===e.colDef.field&&this.calcularTotal(),"fpSeleccionada"!==e.colDef.field&&"detReferencia"!==e.colDef.field||this.verificarDocumentoBanco(e.data)},e.prototype.verificarDocumentoBanco=function(e){if(e.errorEnDocumento=!0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),e.detReferencia&&e.fpSeleccionada&&e.fpSeleccionada.validar){var t={empresa:p.a.KEY_EMPRESA_SELECT,documento:e.detReferencia,cuenta:e.fpSeleccionada.ctaCodigo,data:e};this.contableService.verificarDocumentoBanco(t,this,p.a.KEY_EMPRESA_SELECT)}else e.errorEnDocumento=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.validarDocumentosRepetido()},e.prototype.despuesDeVerificarDocumento=function(e,t){t.errorEnDocumento=!e,this.gridApi&&this.gridApi.updateRowData({update:[t]}),this.validarDocumentosRepetido()},e.prototype.validarDocumentosRepetido=function(){var e=this;this.listadoDeFormasDeCobro.forEach(function(t){var o=t.detReferencia&&t.fpSeleccionada&&t.fpSeleccionada.validar,a=e.listadoDeFormasDeCobro.filter(function(e){return o&&e.fpSeleccionada&&e.fpSeleccionada.validar&&e.detReferencia&&e!==t&&e.detReferencia.trim()===t.detReferencia.trim()});t.documentoRepetido=a.length>0}),this.refreshGrid()},Xo([Object(a.Input)(),$o("design:type",Array)],e.prototype,"listaFormaPago",void 0),Xo([Object(a.Input)(),$o("design:type",Array)],e.prototype,"listadoDeFormasDeCobro",void 0),Xo([Object(a.Input)(),$o("design:type",Array)],e.prototype,"bancos",void 0),Xo([Object(a.Input)(),$o("design:type",Object)],e.prototype,"totales",void 0),Xo([Object(a.Input)(),$o("design:type",Date)],e.prototype,"fechaActual",void 0),Xo([Object(a.Input)(),$o("design:type",String)],e.prototype,"accion",void 0),Xo([Object(a.Input)(),$o("design:type",Object)],e.prototype,"configAutonumericReales",void 0),Xo([Object(a.Input)(),$o("design:type",ko.GridApi)],e.prototype,"gridApi",void 0),Xo([Object(a.ViewChild)("menuOpciones"),$o("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),e=Xo([Object(a.Component)({selector:"app-cobro-forma-detalle",template:o("i5wg")}),$o("design:paramtypes",[m.a,lo.a,Wo])],e)}(),Zo=function(){function e(e){this.id=0,this.antPeriodo="",this.antTipo="",this.antNumero="",this.antSector="",this.antFecha="",this.antValor=0,this.antClienteCodigo="",this.antClienteNombre="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.antPeriodo=e.antPeriodo?e.antPeriodo:this.antPeriodo,this.antTipo=e.antTipo?e.antTipo:this.antTipo,this.antNumero=e.antNumero?e.antNumero:this.antNumero,this.antSector=e.antSector?e.antSector:this.antSector,this.antFecha=e.antFecha?e.antFecha:this.antFecha,this.antValor=e.antValor?e.antValor:this.antValor,this.antClienteCodigo=e.antClienteCodigo?e.antClienteCodigo:this.antClienteCodigo,this.antClienteNombre=e.antClienteNombre?e.antClienteNombre:this.antClienteNombre},e}(),Qo=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ea=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ta=function(){function e(e){this.utilService=e,this.totales={},this.listadoCobrosAnticipos=new Array,this.accion=null,this.enviarAccion=new a.EventEmitter,this.objetoSeleccionado=new Zo,this.cobrarTodosCheck=!1,this.constantes=p.a,this.columnDefs=[],this.columnDefsSelected=[],this.noData=p.a.MSJ_NO_HAY_DATOS}return e.prototype.ngOnInit=function(){this.completarTablaCobros(),this.iniciarAgGrid()},e.prototype.generarOpciones=function(){var e=this;this.opciones=[{label:p.a.ACCION_CONSULTAR_CONTABLE,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.verContable()}}]},e.prototype.verContable=function(){this.enviarAccion.emit({accion:p.a.ACCION_CONSULTAR_CONTABLE,objetoSeleccionado:this.objetoSeleccionado})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.objetoSeleccionado=t?t.data:null,this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}))},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.alCambiarValorDeCelda=function(e){"antValor"===e.colDef.field&&this.cambioValor(e.data)},e.prototype.ejecutarMetodoChecbox=function(e){e.cobrar?e.antValor=e.saldo:e.antValor=0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.calcularTotal()},e.prototype.cambiarEstadoCheckCabecera=function(e){e?this.gridApi.forEachNode(function(e){var t=e.data;t.antValor=t.saldo,t.cobrar=!0}):this.gridApi.forEachNode(function(e){var t=e.data;t.antValor=0,t.cobrar=!1}),this.refreshGrid(),this.calcularTotal()},e.prototype.cambioValor=function(e){e.antValor===e.saldo?e.cobrar=!0:e.cobrar=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.calcularTotal()},e.prototype.calcularTotal=function(){var e=this;this.cobrarTodosCheck=!0,this.totales.anticipo=0,this.gridApi.forEachNode(function(t){var o=t.data;e.totales.anticipo=e.mathRound2(e.totales.anticipo)+e.mathRound2(o.antValor),e.totales.diferencia=e.mathRound2(e.totales.cobro)-(e.mathRound2(e.totales.forma)+e.mathRound2(e.totales.anticipo)),o.antValor!=o.saldo&&(e.cobrarTodosCheck=!1)})},e.prototype.completarTablaCobros=function(){if(this.cobrarTodosCheck=!0,this.totales.anticipo=0,this.listadoCobrosAnticipos)for(var e=0;e<this.listadoCobrosAnticipos.length;e++){var t=this.listadoCobrosAnticipos[e];this.listadoCobrosAnticipos[e].saldo=this.listadoCobrosAnticipos[e].antValor,this.listadoCobrosAnticipos[e].antValor=t.antValor?t.antValor:0,t.antValor===t.saldo?this.listadoCobrosAnticipos[e].cobrar=!0:this.listadoCobrosAnticipos[e].cobrar=!1,this.totales.anticipo=this.mathRound2(this.totales.anticipo)+this.mathRound2(t.antValor),this.totales.diferencia=this.mathRound2(this.totales.cobro)-(this.mathRound2(this.totales.forma)+this.mathRound2(this.totales.anticipo))}},e.prototype.mathRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.generarColumnas=function(e){var t=this,o=[];return o.push({headerName:p.a.TAG_PERIODO,field:"antPeriodo",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_TIPO,field:"antTipo",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_NUMERO,field:"antNumero",width:100,minWidth:100,maxWitdh:100},{headerName:p.a.TAG_FECHA,field:"antFecha",width:100,minWidth:100,maxWitdh:100},{headerComponentFramework:Oo.a,headerClass:"pr-0",headerComponentParams:{name:p.a.TAG_COBRAR,value:e.cobrarTodosCheck,tooltipText:p.a.TAG_COBRAR_TODO},cellClass:"text-center",field:"cobrar",width:150,minWidth:100,cellRendererFramework:Io.a,cellRendererParams:function(e){return{params:e.data.cobrar,ejecutarMetodo:!0}}},{headerName:p.a.TAG_VALOR,field:"antValor",width:120,minWidth:80,valueFormatter:oa,cellClass:"text-right",cellEditorFramework:Eo.a,cellEditorParams:{name:"antValor",maxlength:12,placeholder:"0.00",configAutonumeric:e.configAutonumericReales},suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoCobrosAnticipos)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:!0,cellClassRules:{"cell-with-errors":function(e){return t.utilService.quitarComasNumero(e.data.antValor)>e.data.saldo}}},this.utilService.getColumnaOpciones()),o},Qo([Object(a.Input)(),ea("design:type",Object)],e.prototype,"totales",void 0),Qo([Object(a.Input)(),ea("design:type",Object)],e.prototype,"configAutonumericReales",void 0),Qo([Object(a.Input)(),ea("design:type",Array)],e.prototype,"listadoCobrosAnticipos",void 0),Qo([Object(a.Input)(),ea("design:type",String)],e.prototype,"accion",void 0),Qo([Object(a.Output)(),ea("design:type",Object)],e.prototype,"enviarAccion",void 0),Qo([Object(a.Input)(),ea("design:type",ko.GridApi)],e.prototype,"gridApi",void 0),Qo([Object(a.ViewChild)("menuOpciones"),ea("design:type",h.ContextMenu)],e.prototype,"menuOpciones",void 0),e=Qo([Object(a.Component)({selector:"app-cobro-anticipo-detalle",template:o("qG66")}),ea("design:paramtypes",[m.a])],e)}();function oa(e){return e.value||(e.value=0),new X.DecimalPipe("en-US").transform(e.value,"1.2-2")}o.d(t,"CarteraModule",function(){return ia});var aa=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ia=function(){function e(){}return e=aa([Object(a.NgModule)({imports:[ro,no.a],declarations:[s,_,F,z,bo,de,he,Ae,ye,we,Ye,So,qe,Go,it,qo,ta,lt,ft,Et,Tt,Dt,Ut,Wt,Zt,oo]})],e)}()},yjXC:function(e,t){e.exports=""},ypxO:function(e,t){e.exports=""},zhTR:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmPagos=\'ngForm\' name="frmPagos">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--SECTOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CENTRO_PRODUCCION}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CENTRO_PRODUCCION}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="sector" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ( {{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          \x3c!--PROVEEDOR--\x3e\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label mb-2">\r\n              <strong>{{constantes.TAG_PROVEEDOR}}</strong>\r\n            </label>\r\n            <input [appFocus]="true" id="provCodigo" name="provCodigo" [(ngModel)]="proveedor.provCodigo" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n              pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n              maxlength="500" (keydown)="limpiarResultado();buscarProveedor($event)" (blur)="validarProveedor()"\r\n              [ngbTooltip]="proveedor.provRazonSocial ? proveedor.provRazonSocial : null" appUppercase>\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              container="body" triggers="mouseenter:mouseleave"></span>\r\n          </div>\r\n          \x3c!--FECHA DESDE--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_DESDE}}</b>\r\n            </label>\r\n            <p-calendar inputId="iniFecha" name="iniFecha" id="fechaDesde" [(ngModel)]="fechaInicio" (ngModelChange)="limpiarResultado()"\r\n              [maxDate]="fechaFin" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMaxDate]="fechaFin"\r\n              [required]="true"></p-calendar>\r\n          </div>\r\n          \x3c!--FECHA HASTA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="finFecha" name="finFecha" [(ngModel)]="fechaFin" (ngModelChange)="limpiarResultado()"\r\n              [minDate]="fechaInicio" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [appMinDate]="fechaInicio"\r\n              [maxDate]="fechaActual" [appMaxDate]="fechaActual" [required]="true"></p-calendar>\r\n          </div>\r\n        </form>\r\n        \x3c!--BOTON BUSCAR--\x3e\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="buscarCarListaMayorAuxiliarClienteProveedor()">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n            {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CARTERA_PAGOS_MAYOR_AUXILIAR_PROVEEDOR_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarListaMayorAuxiliarClienteProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarListaMayorAuxiliarClienteProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirCarListaMayorAuxiliarClienteProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarCarListaMayorAuxiliarClienteProveedor()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (cellFocused)="filaFocused($event)" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; ejecutarAccion()">\r\n        </ag-grid-angular>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'}}]);