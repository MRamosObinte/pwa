(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"1Acm":function(t,i,e){"use strict";e.r(i);var a=e("CcnG"),o=e("ZYCi"),n=e("LlOB"),r=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},c=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},s=function(){function t(t,i){var e=this;this.router=t,this.appSistemaService=i,this.showIndex=!1,this.router.events.subscribe(function(t){e.showIndex="/modulos/activoFijo"===e.router.url})}return t.prototype.ngOnInit=function(){this.listaAccesoRapido=[{item:"Crear nuevo activo fijo",url:"activoFijo",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Archivo","activoFijo")},{item:"Realizar depreciaci\xf3n",url:"depreciacion",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Transacciones","depreciacion")},{item:"Listado de activos fijos",url:"activofijo",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Consultas","activoFijo")},{item:"Reporte de depreciaciones",url:"depreciacion",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Consultas","depreciacion")}]},t=r([Object(a.Component)({selector:"app-activofijo",template:e("fmiB")}),c("design:paramtypes",[o.Router,n.a])],t)}(),l=e("DixL"),d=e("wiau"),u=e("EnEm"),p=e("8fiX"),h=e("mwBN"),m=e("BPXi"),f=function(){function t(t){this.ubiEmpresa="",this.ubiCodigo="",this.ubiDescripcion="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=new Date,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.ubiEmpresa=t.ubiEmpresa?t.ubiEmpresa:this.ubiEmpresa,this.ubiCodigo=t.ubiCodigo?t.ubiCodigo:this.ubiCodigo,this.ubiDescripcion=t.ubiDescripcion?t.ubiDescripcion:this.ubiDescripcion,this.usrEmpresa=t.usrEmpresa?t.usrEmpresa:this.usrEmpresa,this.usrCodigo=t.usrCodigo?t.usrCodigo:this.usrCodigo,this.usrFechaInserta=t.usrFechaInserta?t.usrFechaInserta:this.usrFechaInserta},t}(),A=function(){function t(t){this.motSecuencial=0,this.conTipo=new m.a,this.usrEmpresa="",this.conTipoDescripcion="",this.afUbicacionDescripcion="",this.usrCodigo="",this.usrFechaInserta=new Date,this.afUbicaciones=new f,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.motSecuencial=t.motSecuencial?t.motSecuencial:this.motSecuencial,this.conTipo=t.conTipo?new m.a(t.conTipo):this.conTipo,this.usrEmpresa=t.usrEmpresa?t.usrEmpresa:this.usrEmpresa,this.conTipoDescripcion=t.conTipoDescripcion?t.conTipoDescripcion:this.conTipoDescripcion,this.afUbicacionDescripcion=t.afUbicacionDescripcion?t.afUbicacionDescripcion:this.afUbicacionDescripcion,this.usrCodigo=t.usrCodigo?t.usrCodigo:this.usrCodigo,this.usrFechaInserta=t.usrFechaInserta?t.usrFechaInserta:this.usrFechaInserta,this.afUbicaciones=t.afUbicaciones?new f(t.afUbicaciones):this.afUbicaciones},t}(),C=e("z5Y/"),b=e("SZbH"),v=e("CEfs"),O=e("yccp"),I=e("nR5P"),T=e("EF/R"),g=e("Ungd"),R=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},S=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},E=function(){function t(t,i,e){this.api=t,this.toastr=i,this.utilService=e}return t.prototype.listarAfDepreciacionMotivoTO=function(t,i,e){var a=this;this.api.post("todocompuWS/activosFijosWebController/getListaAfDepreciacionMotivoTO",t,e).then(function(t){t&&t.extraInfo?i.despuesDeListarAfDepreciacionMotivoTO(t.extraInfo):(i.cargando=!1,i.despuesDeListarAfDepreciacionMotivoTO([]),a.toastr.warning(t.operacionMensaje,h.a.TOAST_INFORMACION))}).catch(function(t){return a.utilService.handleError(t,i)})},t=R([Object(a.Injectable)({providedIn:"root"}),S("design:paramtypes",[C.a,b.b,I.a])],t)}(),_=e("bodW"),N=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},y=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},L=function(){function t(t,i,e){this.api=t,this.toastr=i,this.utilService=e}return t.prototype.listarAfUbicacionesTO=function(t,i,e){var a=this;this.api.post("todocompuWS/activosFijosWebController/getListaAfUbicacionesTO",t,e).then(function(t){t&&t.extraInfo?i.despuesDeListarAfUbicacionesTO(t.extraInfo):(i.cargando=!1,i.despuesDeListarAfUbicacionesTO([]),a.toastr.warning(t.operacionMensaje,h.a.TOAST_INFORMACION))}).catch(function(t){return a.utilService.handleError(t,i)})},t=N([Object(a.Injectable)({providedIn:"root"}),y("design:paramtypes",[C.a,b.b,I.a])],t)}(),M=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},D=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},F=function(){function t(t,i,e,a,o,n,r,c,s,l,d){this.route=t,this.api=i,this.toastr=e,this.filasService=a,this.atajoService=o,this.utilService=n,this.auth=r,this.archivoService=c,this.motivoDepreciacionService=s,this.tipoContableService=l,this.ubicacionService=d,this.constantes=h.a,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.isSeleccionarPrimeraFila=!0,this.accion=null,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.filtroGlobal="",this.listaEmpresas=[],this.listadoResultado=[],this.listadoFiltrado=[],this.listaTipos=[],this.listaUbicaciones=[],this.empresaSeleccionada=new p.a,this.objetoSeleccionado=new A,this.afDepreciacionMotivoTO=new A,this.tipoSeleccionado=new m.a,this.ubicacionSeleccionado=new f,this.indexTable=0,this.columnas=[],this.columnasSeleccionadas=[],this.filasTiempo=new u.a}return t.prototype.ngOnInit=function(){this.constantes=h.a,this.listaEmpresas=this.route.snapshot.data.motivoDepreciacion,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&(h.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.isScreamMd=!(window.innerWidth<=576),this.inicializarAtajos(),this.inicializarTabla()},t.prototype.listarDepreciacionMotivo=function(){this.cargando=!0,this.filasTiempo.iniciarContador(),this.motivoDepreciacionService.listarAfDepreciacionMotivoTO({empresa:h.a.KEY_EMPRESA_SELECT},this,h.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarAfDepreciacionMotivoTO=function(t){this.listadoResultado=t,this.listadoFiltrado=this.listadoResultado.slice(),this.cargando=!1,this.filasTiempo.finalizarContador(),this.seleccionarPrimeraFila(),this.actualizarFilas()},t.prototype.listarTipos=function(){this.listaTipos=[],this.cargando=!0;var t={empresa:h.a.KEY_EMPRESA_SELECT};this.tipoContableService.listarTipoContable(t,this,h.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarTipoContable=function(t){var i=this;this.listaTipos=t,this.listaTipos.length>0?this.tipoSeleccionado=this.tipoSeleccionado&&this.tipoSeleccionado.tipCodigo?this.listaTipos.find(function(t){return t.tipCodigo===i.tipoSeleccionado.tipCodigo}):this.listaTipos[0]:this.tipoSeleccionado=null,this.cargando=!1},t.prototype.listarUbicaciones=function(){this.cargando=!0,this.ubicacionService.listarAfUbicacionesTO({empresa:h.a.KEY_EMPRESA_SELECT},this,h.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarAfUbicacionesTO=function(t){var i=this;this.listaUbicaciones=t,this.listaUbicaciones.length>0?this.ubicacionSeleccionado=this.ubicacionSeleccionado&&this.ubicacionSeleccionado.ubiCodigo?this.listaUbicaciones.find(function(t){return t.ubiCodigo===i.ubicacionSeleccionado.ubiCodigo}):this.listaUbicaciones[0]:this.ubicacionSeleccionado=null,this.cargando=!1},t.prototype.operacionesMotivoDepreciacion=function(t){switch(t){case h.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(h.a.ACCION_ELIMINAR,this,!0)&&(this.afDepreciacionMotivoTO=new A(this.objetoSeleccionado),this.accion=h.a.ACCION_ELIMINAR,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.eliminarDepreciacionMotivo());break;case h.a.ACCION_CREAR:this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0)&&(this.afDepreciacionMotivoTO=new A,this.accion=h.a.ACCION_CREAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_NUEVO_MOTIVO_DEPRECIACION,this.classTitulo=h.a.ICON_FILTRO_NUEVO);break;case h.a.ACCION_EDITAR:this.utilService.verificarPermiso(h.a.ACCION_EDITAR,this,!0)&&(this.afDepreciacionMotivoTO=new A(this.objetoSeleccionado),this.accion=h.a.ACCION_EDITAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_EDITAR_MOTIVO_DEPRECIACION,this.classTitulo=h.a.ICON_FILTRO_EDITAR)}},t.prototype.insertarDepreciacionMotivo=function(t){var i=this;if(this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.utilService.establecerFormularioTocado(t)&&t&&t.valid){var e=JSON.parse(JSON.stringify(this.afDepreciacionMotivoTO));this.setearValoresAObjetoAfDepreciacionMotivoTO(e),this.api.post("todocompuWS/activosFijosWebController/insertarAfDepreciacionMotivoTO",{afDepreciacionMotivoTO:e},h.a.KEY_EMPRESA_SELECT).then(function(t){i.cargando=!1,t&&t.extraInfo?(e.motSecuencial=t.extraInfo,i.resetearFormulario(),i.refrescarTabla(e,"I"),i.toastr.success(t.operacionMensaje,"Aviso")):i.toastr.warning(t.operacionMensaje,"Aviso")}).catch(function(t){return i.utilService.handleError(t,i)})}else this.toastr.error(h.a.MSJ_CAMPOS_INVALIDOS,h.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.actualizarDepreciacionMotivo=function(t){var i=this;if(this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var a=JSON.parse(JSON.stringify(this.afDepreciacionMotivoTO));this.setearValoresAObjetoAfDepreciacionMotivoTO(a),this.api.post("todocompuWS/activosFijosWebController/modificarAfDepreciacionMotivoTO",{afDepreciacionMotivoTO:a},h.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo?(i.refrescarTabla(a,"U"),i.toastr.success(t.operacionMensaje,"Aviso"),i.resetearFormulario()):i.toastr.warning(t.operacionMensaje,"Aviso"),i.cargando=!1}).catch(function(t){return i.utilService.handleError(t,i)})}else this.toastr.error(h.a.MSJ_CAMPOS_INVALIDOS,h.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.eliminarDepreciacionMotivo=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_ELIMINAR,this,!0)){var i={title:h.a.MSJ_TITULO_ELIMINAR,texto:h.a.MSJ_PREGUNTA_ELIMINAR,type:h.a.SWAL_WARNING,confirmButtonText:h.a.MSJ_SI_ELIMINAR,cancelButtonText:h.a.MSJ_CANCELAR,confirmButtonColor:h.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){if(i){t.cargando=!0;var e={afDepreciacionMotivoTO:t.afDepreciacionMotivoTO};t.api.post("todocompuWS/activosFijosWebController/eliminarAfDepreciacionMotivoTO",e,h.a.KEY_EMPRESA_SELECT).then(function(i){i&&i.extraInfo?(t.toastr.success(i.operacionMensaje,h.a.TOAST_CORRECTO),t.refrescarTabla(t.afDepreciacionMotivoTO,"D")):t.toastr.warning(i.operacionMensaje),t.resetearFormulario(),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}else t.resetearFormulario()})}},t.prototype.imprimirDepreciacionMotivo=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var i={listadoAfDepreciacionMotivoTO:this.listadoResultado};this.archivoService.postPDF("todocompuWS/activosFijosWebController/generarReporteAfDepreciacionMotivoTO",i,this.empresaSeleccionada).then(function(i){i?t.utilService.descargarArchivoPDF("ListadoDepreciacionMotivo"+t.utilService.obtenerHorayFechaActual()+".pdf",i):t.toastr.warning(h.a.MSJ_NO_DATA,h.a.TAG_AVISO),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}},t.prototype.exportarDepreciacionMotivo=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var i={listadoAfDepreciacionMotivoTO:this.listadoResultado};this.archivoService.postExcel("todocompuWS/activosFijosWebController/exportarReporteAfDepreciacionMotivoTO",i,this.empresaSeleccionada).then(function(i){i?t.utilService.descargarArchivoExcel(i._body,"ListadoDepreciacionMotivo_"):t.toastr.warning(h.a.MSJ_NO_DATA,h.a.TAG_AVISO),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}},t.prototype.resetearFormulario=function(){this.accion=null,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.afDepreciacionMotivoTO=new A,this.actualizarFilas()},t.prototype.setearValoresAObjetoAfDepreciacionMotivoTO=function(t){t.usrEmpresa=h.a.KEY_EMPRESA_SELECT,t.afUbicaciones.ubiEmpresa=h.a.KEY_EMPRESA_SELECT,t.afUbicaciones.usrEmpresa=h.a.KEY_EMPRESA_SELECT,t.conTipo.empCodigo=h.a.KEY_EMPRESA_SELECT,t.afUbicaciones=this.ubicacionSeleccionado,t.afUbicacionDescripcion=this.ubicacionSeleccionado.ubiDescripcion,t.conTipo=this.tipoSeleccionado,t.conTipoDescripcion=this.tipoSeleccionado.tipDetalle,t.usrCodigo=this.auth.getCodigoUser()},t.prototype.refrescarTabla=function(t,i){switch(i){case"I":if(this.listadoResultado.length>0)(e=this.listadoResultado.slice()).unshift(t),this.listadoResultado=e;break;case"U":var e,a=this.listadoResultado.findIndex(function(i){return i.motSecuencial===t.motSecuencial});(e=this.listadoResultado.slice())[a]=t,this.listadoResultado=e,this.objetoSeleccionado=this.listadoResultado[a],this.indexTable=a,this.isSeleccionarPrimeraFila=!1;break;case"D":a=this.listadoResultado.findIndex(function(i){return i.motSecuencial===t.motSecuencial});this.listadoResultado=this.listadoResultado.filter(function(t,i){return i!=a}),this.indexTable=a,this.isSeleccionarPrimeraFila=!1}},t.prototype.inicializarAtajos=function(){var t=this;this.atajoService.add(new O.Hotkey(h.a.ATAJO_AYUDA,function(t){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(t){var i=document.getElementById("btnActivarDepreciacionMotivo");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_BUSCAR,function(t){var i=document.getElementById("btnBuscarDepreciacionMotivo");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_IMPRIMIR,function(t){var i=document.getElementById("btnImprimirDepreciacionMotivo");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_EXPORTAR,function(t){var i=document.getElementById("btnExportarDepreciacionMotivo");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_NUEVO,function(t){var i=document.getElementById("btnNuevoDepreciacionMotivo");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_EDITAR,function(i){return t.listadoResultado.length>0&&t.operacionesMotivoDepreciacion(h.a.ACCION_EDITAR),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_ELIMINAR,function(i){return t.listadoResultado.length>0&&t.operacionesMotivoDepreciacion(h.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_GUARDAR,function(t){var i=document.getElementById("btnGuardarDepreciacionMotivo");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_CANCELAR,function(t){var i=document.getElementById("btnCancelarDepreciacionMotivo");return i&&i.click(),!1}))},t.prototype.inicializarTabla=function(){this.columnas=[{field:"conTipoDescripcion",header:h.a.TAG_TIPO,width:"30%"},{field:"afUbicacionDescripcion",header:h.a.TAG_UBICACION,width:"30%"}],this.columnasSeleccionadas=this.columnas},t.prototype.cambiarEmpresaSeleccionada=function(){h.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.tipoSeleccionado=null,this.ubicacionSeleccionado=null,this.limpiarResultado(),this.listarTipos(),this.listarUbicaciones()},t.prototype.limpiarResultado=function(){this.listadoFiltrado=[],this.listadoResultado=[],this.actualizarFilas()},t.prototype.generarOpciones=function(){var t=this;this.indexTable=this.listadoFiltrado.indexOf(this.objetoSeleccionado);var i=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,e=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:h.a.ACCION_EDITAR,icon:h.a.ICON_EDITAR,disabled:!i,command:function(){return i?t.operacionesMotivoDepreciacion(h.a.ACCION_EDITAR):null}},{label:h.a.ACCION_ELIMINAR,icon:h.a.ICON_ELIMINAR,disabled:!e,command:function(){return e?t.operacionesMotivoDepreciacion(h.a.ACCION_ELIMINAR):null}}]},t.prototype.onFilterTabla=function(t){this.listadoFiltrado=t.filteredValue.slice(),this.isSeleccionarPrimeraFila&&this.seleccionarPrimeraFila(),this.isSeleccionarPrimeraFila=!0,this.actualizarFilas()},t.prototype.verificarFiltros=function(t,i,e){switch(e){case"TECLAS":this.utilService.validarKeyBuscar(t.keyCode)&&this.filtrarGlobalmente(i);break;case"CLICK":this.filtrarGlobalmente(i);break;case"BLUR":this.filtroGlobal||this.filtrarGlobalmente(i)}},t.prototype.seleccionarPrimeraFila=function(){this.listadoFiltrado.length>0&&(this.objetoSeleccionado=this.listadoFiltrado[0],this.indexTable=0)},t.prototype.filtrarGlobalmente=function(t,i){i&&""!==this.filtroGlobal||t.filterGlobal(this.filtroGlobal.toUpperCase(),"contains")},t.prototype.actualizarFilas=function(){this.filasService.actualizarFilas(this.listadoFiltrado.length,this.filasTiempo.getTiempo())},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},M([Object(a.HostListener)("window:resize",["$event"]),D("design:type",Function),D("design:paramtypes",[]),D("design:returntype",void 0)],t.prototype,"onResize",null),t=M([Object(a.Component)({selector:"app-motivo-depreciacion",template:e("mv7x"),styles:[e("7I/U")]}),D("design:paramtypes",[o.ActivatedRoute,C.a,b.b,v.a,O.HotkeysService,I.a,T.a,g.a,E,_.a,L])],t)}(),U=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},P=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},x=function(){function t(t,i,e,a,o,n,r,c,s){this.ubicacionService=t,this.route=i,this.api=e,this.toastr=a,this.filasService=o,this.atajoService=n,this.utilService=r,this.auth=c,this.archivoService=s,this.constantes=h.a,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.isSeleccionarPrimeraFila=!0,this.accion=null,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.filtroGlobal="",this.listaEmpresas=[],this.listadoResultado=[],this.listadoFiltrado=[],this.empresaSeleccionada=new p.a,this.objetoSeleccionado=new f,this.afUbicacionesTO=new f,this.indexTable=0,this.columnas=[],this.columnasSeleccionadas=[],this.filasTiempo=new u.a}return t.prototype.ngOnInit=function(){this.constantes=h.a,this.listaEmpresas=this.route.snapshot.data.ubicacionActivoFijo,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&(h.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.isScreamMd=!(window.innerWidth<=576),this.inicializarAtajos(),this.inicializarTabla()},t.prototype.operacionesUbicacion=function(t){switch(t){case h.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(h.a.ACCION_ELIMINAR,this,!0)&&(this.afUbicacionesTO=new f(this.objetoSeleccionado),this.accion=h.a.ACCION_ELIMINAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.eliminarUbicacion());break;case h.a.ACCION_CREAR:this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0)&&(this.afUbicacionesTO=new f,this.accion=h.a.ACCION_CREAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_NUEVO_UBICACION,this.classTitulo=h.a.ICON_FILTRO_NUEVO);break;case h.a.ACCION_EDITAR:this.utilService.verificarPermiso(h.a.ACCION_EDITAR,this,!0)&&(this.afUbicacionesTO=new f(this.objetoSeleccionado),this.accion=h.a.ACCION_EDITAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_EDITAR_UBICACION,this.classTitulo=h.a.ICON_FILTRO_EDITAR)}},t.prototype.insertarUbicacion=function(t){var i=this;if(this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.utilService.establecerFormularioTocado(t)&&t&&t.valid){var e=JSON.parse(JSON.stringify(this.afUbicacionesTO));this.setearValoresAObjetoAfUbicacionesTO(e),this.api.post("todocompuWS/activosFijosWebController/insertarAfUbicacionesTO",{afUbicacionesTO:e},h.a.KEY_EMPRESA_SELECT).then(function(t){i.cargando=!1,t&&t.extraInfo?(i.resetearFormulario(),i.refrescarTabla(e,"I"),i.toastr.success(t.operacionMensaje,"Aviso")):i.toastr.warning(t.operacionMensaje,"Aviso")}).catch(function(t){return i.utilService.handleError(t,i)})}else this.toastr.error(h.a.MSJ_CAMPOS_INVALIDOS,h.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.actualizarUbicacion=function(t){var i=this;if(this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0)){this.cargando=!0;var e=this.utilService.establecerFormularioTocado(t);if(t&&t.valid&&e){var a=JSON.parse(JSON.stringify(this.afUbicacionesTO));this.setearValoresAObjetoAfUbicacionesTO(a),this.api.post("todocompuWS/activosFijosWebController/modificarAfUbicacionesTO",{afUbicacionesTO:a},h.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo?(i.refrescarTabla(a,"U"),i.toastr.success(t.operacionMensaje,"Aviso"),i.resetearFormulario()):i.toastr.warning(t.operacionMensaje,"Aviso"),i.cargando=!1}).catch(function(t){return i.utilService.handleError(t,i)})}else this.toastr.error(h.a.MSJ_CAMPOS_INVALIDOS,h.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},t.prototype.eliminarUbicacion=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_ELIMINAR,this,!0)){var i={title:h.a.MSJ_TITULO_ELIMINAR,texto:h.a.MSJ_PREGUNTA_ELIMINAR,type:h.a.SWAL_WARNING,confirmButtonText:h.a.MSJ_SI_ELIMINAR,cancelButtonText:h.a.MSJ_CANCELAR,confirmButtonColor:h.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){if(i){t.cargando=!0;var e={afUbicacionesTO:t.afUbicacionesTO};t.api.post("todocompuWS/activosFijosWebController/eliminarAfUbicacionesTO",e,h.a.KEY_EMPRESA_SELECT).then(function(i){i&&i.extraInfo?(t.toastr.success(i.operacionMensaje,h.a.TOAST_CORRECTO),t.refrescarTabla(t.afUbicacionesTO,"D")):t.toastr.warning(i.operacionMensaje),t.resetearFormulario(),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}else t.resetearFormulario()})}},t.prototype.imprimirUbicaciones=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var i={listadoAfUbicacionesTO:this.listadoResultado};this.archivoService.postPDF("todocompuWS/activosFijosWebController/generarReporteAfUbicacionesTO",i,this.empresaSeleccionada).then(function(i){i?t.utilService.descargarArchivoPDF("ListadoUbicaciones"+t.utilService.obtenerHorayFechaActual()+".pdf",i):t.toastr.warning(h.a.MSJ_NO_DATA,h.a.TAG_AVISO),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}},t.prototype.exportarUbicaciones=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var i={listadoAfUbicacionesTO:this.listadoResultado};this.archivoService.postExcel("todocompuWS/activosFijosWebController/exportarReporteAfUbicacionesTO",i,this.empresaSeleccionada).then(function(i){i?t.utilService.descargarArchivoExcel(i._body,"ListadoUbicaciones_"):t.toastr.warning(h.a.MSJ_NO_DATA,h.a.TAG_AVISO),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}},t.prototype.listarUbicaciones=function(){this.cargando=!0,this.filasTiempo.iniciarContador(),this.ubicacionService.listarAfUbicacionesTO({empresa:h.a.KEY_EMPRESA_SELECT},this,h.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarAfUbicacionesTO=function(t){this.listadoResultado=t,this.listadoFiltrado=this.listadoResultado.slice(),this.cargando=!1,this.filasTiempo.finalizarContador(),this.seleccionarPrimeraFila(),this.actualizarFilas()},t.prototype.setearValoresAObjetoAfUbicacionesTO=function(t){t.usrEmpresa=h.a.KEY_EMPRESA_SELECT,t.ubiEmpresa=h.a.KEY_EMPRESA_SELECT,t.usrCodigo=this.auth.getCodigoUser()},t.prototype.resetearFormulario=function(){this.accion=null,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.afUbicacionesTO=new f,this.actualizarFilas()},t.prototype.refrescarTabla=function(t,i){switch(i){case"I":if(this.listadoResultado.length>0)(e=this.listadoResultado.slice()).unshift(t),this.listadoResultado=e;break;case"U":var e,a=this.listadoResultado.findIndex(function(i){return i.ubiCodigo===t.ubiCodigo});(e=this.listadoResultado.slice())[a]=t,this.listadoResultado=e,this.objetoSeleccionado=this.listadoResultado[a],this.indexTable=a,this.isSeleccionarPrimeraFila=!1;break;case"D":a=this.listadoResultado.findIndex(function(i){return i.ubiCodigo===t.ubiCodigo});this.listadoResultado=this.listadoResultado.filter(function(t,i){return i!=a}),this.indexTable=a,this.isSeleccionarPrimeraFila=!1}},t.prototype.generarOpciones=function(){var t=this;this.indexTable=this.listadoFiltrado.indexOf(this.objetoSeleccionado);var i=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,e=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:h.a.ACCION_EDITAR,icon:h.a.ICON_EDITAR,disabled:!i,command:function(){return i?t.operacionesUbicacion(h.a.ACCION_EDITAR):null}},{label:h.a.ACCION_ELIMINAR,icon:h.a.ICON_ELIMINAR,disabled:!e,command:function(){return e?t.operacionesUbicacion(h.a.ACCION_ELIMINAR):null}}]},t.prototype.inicializarAtajos=function(){var t=this;this.atajoService.add(new O.Hotkey(h.a.ATAJO_AYUDA,function(t){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(t){var i=document.getElementById("btnActivarUbicacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_BUSCAR,function(t){var i=document.getElementById("btnBuscarUbicacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_IMPRIMIR,function(t){var i=document.getElementById("btnImprimirUbicacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_EXPORTAR,function(t){var i=document.getElementById("btnExportarUbicacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_NUEVO,function(t){var i=document.getElementById("btnNuevoUbicacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_EDITAR,function(i){return t.listadoResultado.length>0&&t.operacionesUbicacion(h.a.ACCION_EDITAR),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_ELIMINAR,function(i){return t.listadoResultado.length>0&&t.operacionesUbicacion(h.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_GUARDAR,function(t){var i=document.getElementById("btnGuardarUbicacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_CANCELAR,function(t){var i=document.getElementById("btnCancelarUbicacion");return i&&i.click(),!1}))},t.prototype.inicializarTabla=function(){this.columnas=[{field:"ubiCodigo",header:h.a.TAG_CODIGO,width:"20%"},{field:"ubiDescripcion",header:h.a.TAG_DETALLE,width:"70%"}],this.columnasSeleccionadas=this.columnas},t.prototype.cambiarEmpresaSeleccionada=function(){h.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado()},t.prototype.limpiarResultado=function(){this.listadoFiltrado=[],this.listadoResultado=[],this.accion=null,this.activar=!1,this.objetoSeleccionado=new f,this.actualizarFilas()},t.prototype.onFilterTabla=function(t){this.listadoFiltrado=t.filteredValue.slice(),this.isSeleccionarPrimeraFila&&this.seleccionarPrimeraFila(),this.isSeleccionarPrimeraFila=!0,this.actualizarFilas()},t.prototype.verificarFiltros=function(t,i,e){switch(e){case"TECLAS":this.utilService.validarKeyBuscar(t.keyCode)&&this.filtrarGlobalmente(i);break;case"CLICK":this.filtrarGlobalmente(i);break;case"BLUR":this.filtroGlobal||this.filtrarGlobalmente(i)}},t.prototype.seleccionarPrimeraFila=function(){this.listadoFiltrado.length>0&&(this.objetoSeleccionado=this.listadoFiltrado[0],this.indexTable=0)},t.prototype.filtrarGlobalmente=function(t,i){i&&""!==this.filtroGlobal||t.filterGlobal(this.filtroGlobal.toUpperCase(),"contains")},t.prototype.actualizarFilas=function(){this.filasService.actualizarFilas(this.listadoFiltrado.length,this.filasTiempo.getTiempo())},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},U([Object(a.HostListener)("window:resize",["$event"]),P("design:type",Function),P("design:paramtypes",[]),P("design:returntype",void 0)],t.prototype,"onResize",null),t=U([Object(a.Component)({selector:"app-ubicacion",template:e("271t"),styles:[e("dWhJ")]}),P("design:paramtypes",[L,o.ActivatedRoute,C.a,b.b,v.a,O.HotkeysService,I.a,T.a,g.a])],t)}(),j=function(){function t(t){this.catEmpresa="",this.catCodigo="",this.catDescripcion="",this.catVidaUtil=0,this.catPorcentajeDepreciacion=0,this.catInactivo=!1,this.catCuentaActivo="",this.catCuentaDepreciacion="",this.catCuentaDepreciacionAcumulada="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=new Date,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.catEmpresa=t.catEmpresa?t.catEmpresa:this.catEmpresa,this.catCodigo=t.catCodigo?t.catCodigo:this.catCodigo,this.catDescripcion=t.catDescripcion?t.catDescripcion:this.catDescripcion,this.catVidaUtil=t.catVidaUtil?t.catVidaUtil:this.catVidaUtil,this.catPorcentajeDepreciacion=t.catPorcentajeDepreciacion?t.catPorcentajeDepreciacion:this.catPorcentajeDepreciacion,this.catInactivo=t.catInactivo?t.catInactivo:this.catInactivo,this.catCuentaActivo=t.catCuentaActivo?t.catCuentaActivo:this.catCuentaActivo,this.catCuentaDepreciacion=t.catCuentaDepreciacion?t.catCuentaDepreciacion:this.catCuentaDepreciacion,this.catCuentaDepreciacionAcumulada=t.catCuentaDepreciacionAcumulada?t.catCuentaDepreciacionAcumulada:this.catCuentaDepreciacionAcumulada,this.usrEmpresa=t.usrEmpresa?t.usrEmpresa:this.usrEmpresa,this.usrCodigo=t.usrCodigo?t.usrCodigo:this.usrCodigo,this.usrFechaInserta=t.usrFechaInserta?t.usrFechaInserta:this.usrFechaInserta},t}(),w=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},G=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},k=function(){function t(t,i,e){this.api=t,this.toastr=i,this.utilService=e}return t.prototype.listarAfCategoriasTO=function(t,i,e){var a=this;this.api.post("todocompuWS/activosFijosWebController/getListaAfCategoriasTO",t,e).then(function(t){t&&t.extraInfo?i.despuesDeListarAfCategoriasTO(t.extraInfo):(i.cargando=!1,i.despuesDeListarAfCategoriasTO([]),a.toastr.warning(t.operacionMensaje,h.a.TOAST_INFORMACION))}).catch(function(t){return a.utilService.handleError(t,i)})},t=w([Object(a.Injectable)({providedIn:"root"}),G("design:paramtypes",[C.a,b.b,I.a])],t)}(),V=e("6E6y"),J=e("tmev"),B=e("eUd/"),z=e("madF"),W=e("gLZI"),K=e("zkCp"),H=e("Ip0R"),q=e("+JJ7"),Y=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},X=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},$=function(){function t(t,i,e,a,o,n,r,c,s,l,d){this.grupoClasificacionService=t,this.route=i,this.api=e,this.toastr=a,this.filasService=o,this.atajoService=n,this.utilService=r,this.auth=c,this.planContableService=s,this.modalService=l,this.archivoService=d,this.constantes=h.a,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.accion=null,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.listaEmpresas=[],this.listadoResultado=[],this.empresaSeleccionada=new p.a,this.objetoSeleccionado=new j,this.afCategoriasTO=new j,this.tamanioEstructura=0,this.filasTiempo=new u.a,this.cuentaActivo=null,this.cuentaDepreciacion=null,this.cuentaDepreciacionAcum=null,this.porcentajeValido=!0,this.vidaUtilValido=!0,this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return t.prototype.ngOnInit=function(){this.constantes=h.a,this.listaEmpresas=this.route.snapshot.data.activoFijoGrupo,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&(h.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.isScreamMd=!(window.innerWidth<=576),this.inicializarAtajos(),this.iniciarAgGrid(),this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"100.00",minimumValue:"0"}},t.prototype.operacionesGrupoClasificacion=function(t){switch(t){case h.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(h.a.ACCION_ELIMINAR,this,!0)&&(this.afCategoriasTO=new j(this.objetoSeleccionado),this.accion=h.a.ACCION_ELIMINAR,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.eliminarGrupoClasificacion());break;case h.a.ACCION_CREAR:this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0)&&(this.afCategoriasTO=new j,this.accion=h.a.ACCION_CREAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_NUEVO_GRUPO_CLASIFICACION,this.classTitulo=h.a.ICON_FILTRO_NUEVO);break;case h.a.ACCION_EDITAR:this.utilService.verificarPermiso(h.a.ACCION_EDITAR,this,!0)&&(this.afCategoriasTO=new j(this.objetoSeleccionado),this.cuentaActivo=this.afCategoriasTO.catCuentaActivo,this.cuentaDepreciacion=this.afCategoriasTO.catCuentaDepreciacion,this.cuentaDepreciacionAcum=this.afCategoriasTO.catCuentaDepreciacionAcumulada,this.accion=h.a.ACCION_EDITAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_EDITAR_GRUPO_CLASIFICACION,this.classTitulo=h.a.ICON_FILTRO_EDITAR);break;case h.a.ACCION_EDITAR_ESTADO:this.utilService.verificarPermiso(h.a.ACCION_EDITAR,this,!0)&&(this.afCategoriasTO=new j(this.objetoSeleccionado),this.accion=h.a.ACCION_EDITAR_ESTADO,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.actualizarEstadoGrupoClasificacion());break;case h.a.ACCION_CONSULTAR:this.utilService.verificarPermiso(h.a.ACCION_CONSULTAR,this,!0)&&(this.afCategoriasTO=new j(this.objetoSeleccionado),this.accion=h.a.ACCION_CONSULTAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_CONSULTAR_GRUPO_CLASIFICACION,this.classTitulo=h.a.ICON_FILTRO_CONSULTAR)}},t.prototype.listarGrupoClasificacion=function(t){this.cargando=!0,this.filasTiempo.iniciarContador(),this.grupoClasificacionService.listarAfCategoriasTO({empresa:h.a.KEY_EMPRESA_SELECT,filtrarInactivos:t},this,h.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarAfCategoriasTO=function(t){this.listadoResultado=t,this.cargando=!1,this.filasTiempo.finalizarContador()},t.prototype.insertarGrupoClasificacion=function(t){var i=this;if(this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.validarVidaUtil(),this.validarPorcentaje(),this.utilService.establecerFormularioTocado(t)&&t&&t.valid&&this.afCategoriasTO.catVidaUtil>0&&this.afCategoriasTO.catPorcentajeDepreciacion>0){var e=JSON.parse(JSON.stringify(this.afCategoriasTO));this.setearValoresAObjetoAfCategoriasTO(e),this.api.post("todocompuWS/activosFijosWebController/insertarAfCategoriasTO",{afCategoriasTO:e},h.a.KEY_EMPRESA_SELECT).then(function(t){i.cargando=!1,t&&t.extraInfo?(i.resetearFormulario(),i.refrescarTabla(e,"I"),i.toastr.success(t.operacionMensaje,"Aviso")):i.toastr.warning(t.operacionMensaje,"Aviso")}).catch(function(t){return i.utilService.handleError(t,i)})}else this.toastr.error(h.a.MSJ_CAMPOS_INVALIDOS,h.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.modificarGrupoClasificacion=function(t){var i=this;this.api.post("todocompuWS/activosFijosWebController/modificarAfCategoriasTO",{afCategoriasTO:t},h.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(i.refrescarTabla(t,"U"),i.toastr.success(e.operacionMensaje,"Aviso"),i.resetearFormulario()):i.toastr.warning(e.operacionMensaje,"Aviso"),i.cargando=!1}).catch(function(t){return i.utilService.handleError(t,i)})},t.prototype.actualizarGrupoClasificacion=function(t){if(this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.validarVidaUtil(),this.validarPorcentaje(),this.utilService.establecerFormularioTocado(t)&&t&&t.valid&&this.afCategoriasTO.catVidaUtil>0&&this.afCategoriasTO.catPorcentajeDepreciacion>0){var i=JSON.parse(JSON.stringify(this.afCategoriasTO));this.setearValoresAObjetoAfCategoriasTO(i),this.modificarGrupoClasificacion(i)}else this.toastr.error(h.a.MSJ_CAMPOS_INVALIDOS,h.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.actualizarEstadoGrupoClasificacion=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_EDITAR,this,!0)){var i=JSON.parse(JSON.stringify(this.afCategoriasTO)),e={title:i.catInactivo?h.a.MSJ_TITULO_ACTIVAR:h.a.MSJ_TITULO_INACTIVAR,texto:(i.catInactivo?h.a.MSJ_PREGUNTA_ACTIVAR:h.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Grupo y clasificaci\xf3n: "+i.catDescripcion,type:h.a.SWAL_QUESTION,confirmButtonText:h.a.MSJ_SI_ACEPTAR,cancelButtonText:h.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e?(t.cargando=!0,i.catInactivo=!i.catInactivo,t.modificarGrupoClasificacion(i)):t.resetearFormulario()})}else this.resetearFormulario()},t.prototype.eliminarGrupoClasificacion=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_ELIMINAR,this,!0)){var i={title:h.a.MSJ_TITULO_ELIMINAR,texto:h.a.MSJ_PREGUNTA_ELIMINAR,type:h.a.SWAL_WARNING,confirmButtonText:h.a.MSJ_SI_ELIMINAR,cancelButtonText:h.a.MSJ_CANCELAR,confirmButtonColor:h.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){if(i){t.cargando=!0;var e={afCategoriasTO:t.afCategoriasTO};t.api.post("todocompuWS/activosFijosWebController/eliminarAfCategoriasTO",e,h.a.KEY_EMPRESA_SELECT).then(function(i){i&&i.extraInfo?(t.toastr.success(i.operacionMensaje,h.a.TOAST_CORRECTO),t.refrescarTabla(t.afCategoriasTO,"D")):t.toastr.warning(i.operacionMensaje),t.resetearFormulario(),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}else t.resetearFormulario()})}},t.prototype.imprimirGrupoClasificacion=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var i={listadoAfCategoriasTO:this.listadoResultado};this.archivoService.postPDF("todocompuWS/activosFijosWebController/generarReporteAfCategoriasTO",i,this.empresaSeleccionada).then(function(i){i?t.utilService.descargarArchivoPDF("ListadoGrupoClasificacion"+t.utilService.obtenerHorayFechaActual()+".pdf",i):t.toastr.warning(h.a.MSJ_NO_DATA,h.a.TAG_AVISO),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}},t.prototype.exportarGrupoClasificacion=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var i={listadoAfCategoriasTO:this.listadoResultado};this.archivoService.postExcel("todocompuWS/activosFijosWebController/exportarReporteAfCategoriasTO",i,this.empresaSeleccionada).then(function(i){i?t.utilService.descargarArchivoExcel(i._body,"ListadoGrupoClasificacion_"):t.toastr.warning(h.a.MSJ_NO_DATA,h.a.TAG_AVISO),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}},t.prototype.setearValoresAObjetoAfCategoriasTO=function(t){t.usrEmpresa=h.a.KEY_EMPRESA_SELECT,t.catEmpresa=h.a.KEY_EMPRESA_SELECT,t.usrCodigo=this.auth.getCodigoUser()},t.prototype.resetearFormulario=function(){this.accion=null,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.vidaUtilValido=!0,this.porcentajeValido=!0,this.afCategoriasTO=new j,this.actualizarFilas()},t.prototype.refrescarTabla=function(t,i){switch(i){case"I":if(this.listadoResultado.length>0)(a=this.listadoResultado.slice()).unshift(t),this.listadoResultado=a;break;case"U":var e=this.listadoResultado.findIndex(function(i){return i.catCodigo===t.catCodigo});(a=this.listadoResultado.slice())[e]=t,this.listadoResultado=a;break;case"D":var a;e=this.listadoResultado.findIndex(function(i){return i.catCodigo===t.catCodigo});(a=this.listadoResultado.slice()).splice(e,1),this.listadoResultado=a}},t.prototype.generarOpciones=function(){var t=this,i=this.utilService.verificarPermiso(h.a.ACCION_EDITAR,this)&&!this.objetoSeleccionado.catInactivo,e=this.utilService.verificarPermiso(h.a.ACCION_EDITAR,this)&&this.objetoSeleccionado.catInactivo,a=this.utilService.verificarPermiso(h.a.ACCION_EDITAR,this),o=this.utilService.verificarPermiso(h.a.ACCION_ELIMINAR,this);this.opciones=[{label:h.a.ACCION_CONSULTAR,icon:h.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesGrupoClasificacion(h.a.ACCION_CONSULTAR)}},{label:h.a.ACCION_EDITAR,icon:h.a.ICON_EDITAR,disabled:!a,command:function(){return a?t.operacionesGrupoClasificacion(h.a.ACCION_EDITAR):null}},{label:h.a.ACCION_ELIMINAR,icon:h.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?t.operacionesGrupoClasificacion(h.a.ACCION_ELIMINAR):null}},this.objetoSeleccionado.catInactivo?{label:h.a.ACCION_ACTIVAR,icon:h.a.ICON_ACTIVAR,disabled:!e,command:function(){return e?t.operacionesGrupoClasificacion(h.a.ACCION_EDITAR_ESTADO):null}}:{label:h.a.ACCION_INACTIVAR,icon:h.a.ICON_INACTIVAR,disabled:!i,command:function(){return i?t.operacionesGrupoClasificacion(h.a.ACCION_EDITAR_ESTADO):null}}]},t.prototype.inicializarAtajos=function(){var t=this;this.atajoService.add(new O.Hotkey(h.a.ATAJO_AYUDA,function(t){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(t){var i=document.getElementById("btnActivarGrupoClasificacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_BUSCAR,function(t){var i=document.getElementById("btnBuscarGrupoClasificacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_IMPRIMIR,function(t){var i=document.getElementById("btnImprimirGrupoClasificacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_EXPORTAR,function(t){var i=document.getElementById("btnExportarGrupoClasificacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_NUEVO,function(t){var i=document.getElementById("btnNuevoGrupoClasificacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_EDITAR,function(i){return t.listadoResultado.length>0&&t.operacionesGrupoClasificacion(h.a.ACCION_EDITAR),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_ELIMINAR,function(i){return t.listadoResultado.length>0&&t.operacionesGrupoClasificacion(h.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_GUARDAR,function(t){var i=document.getElementById("btnGuardarGrupoClasificacion");return i&&i.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_CANCELAR,function(t){var i=document.getElementById("btnCancelarGrupoClasificacion");return i&&i.click(),!1}))},t.prototype.cambiarEmpresaSeleccionada=function(){h.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado(),this.obtenerEstructura()},t.prototype.limpiarResultado=function(){this.gridApi=null,this.gridColumnApi=null,this.listadoResultado=[],this.filasTiempo.resetearContador(),this.actualizarFilas()},t.prototype.obtenerEstructura=function(){var t=this;this.planContableService.getTamanioListaConEstructura({empresa:this.empresaSeleccionada.empCodigo},h.a.KEY_EMPRESA_SELECT).then(function(i){t.tamanioEstructura=i[0].estGrupo1+i[0].estGrupo2+i[0].estGrupo3+i[0].estGrupo4+i[0].estGrupo5+i[0].estGrupo6}).catch(function(i){t.utilService.handleError(i,t)})},t.prototype.validarCuentaActivo=function(){this.cuentaActivo!==this.afCategoriasTO.catCuentaActivo&&(this.cuentaActivo=null,this.afCategoriasTO.catCuentaActivo=null)},t.prototype.validarCuentaDepreciacion=function(){this.cuentaDepreciacion!==this.afCategoriasTO.catCuentaDepreciacion&&(this.cuentaDepreciacion=null,this.afCategoriasTO.catCuentaDepreciacion=null)},t.prototype.validarCuentaDepreciacionAcumulado=function(){this.cuentaDepreciacionAcum!==this.afCategoriasTO.catCuentaDepreciacionAcumulada&&(this.cuentaDepreciacionAcum=null,this.afCategoriasTO.catCuentaDepreciacionAcumulada=null)},t.prototype.soloNumeros=function(t){return this.utilService.soloNumeros(t)},t.prototype.validarPorcentaje=function(){return this.porcentajeValido=this.afCategoriasTO.catPorcentajeDepreciacion>0,this.porcentajeValido},t.prototype.validarVidaUtil=function(){return this.vidaUtilValido=this.afCategoriasTO.catVidaUtil>0,this.vidaUtilValido},t.prototype.buscarCuentaActivo=function(t){var i=this;if(this.utilService.validarKeyBuscar(t.keyCode)&&(!this.afCategoriasTO.catCuentaActivo||this.afCategoriasTO.catCuentaActivo!==this.cuentaActivo)&&(this.afCategoriasTO.catCuentaActivo=""===this.afCategoriasTO.catCuentaActivo?null:this.afCategoriasTO.catCuentaActivo,this.afCategoriasTO.catCuentaActivo)){var e={empresa:this.empresaSeleccionada.empCodigo,buscar:this.afCategoriasTO.catCuentaActivo,ctaGrupo:null};t.srcElement.blur(),t.preventDefault();var a=this.modalService.open(J.a,{size:"lg",backdrop:"static"});a.componentInstance.filtrosBusquedaPlanCuenta=e,a.componentInstance.tamanioEstructura=this.tamanioEstructura,a.result.then(function(t){i.cuentaActivo=t?t.cuentaCodigo:null,i.afCategoriasTO.catCuentaActivo=t?t.cuentaCodigo:null,document.getElementById("cuentaActivo").focus()},function(t){var i=document.getElementById("cuentaActivo");i&&i.focus()})}},t.prototype.buscarCuentaDepreciacion=function(t){var i=this;if(this.utilService.validarKeyBuscar(t.keyCode)&&(!this.afCategoriasTO.catCuentaDepreciacion||this.afCategoriasTO.catCuentaDepreciacion!==this.cuentaDepreciacion)&&(this.afCategoriasTO.catCuentaDepreciacion=""===this.afCategoriasTO.catCuentaDepreciacion?null:this.afCategoriasTO.catCuentaDepreciacion,this.afCategoriasTO.catCuentaDepreciacion)){var e={empresa:this.empresaSeleccionada.empCodigo,buscar:this.afCategoriasTO.catCuentaDepreciacion,ctaGrupo:null};t.srcElement.blur(),t.preventDefault();var a=this.modalService.open(J.a,{size:"lg",backdrop:"static"});a.componentInstance.filtrosBusquedaPlanCuenta=e,a.componentInstance.tamanioEstructura=this.tamanioEstructura,a.result.then(function(t){i.cuentaDepreciacion=t?t.cuentaCodigo:null,i.afCategoriasTO.catCuentaDepreciacion=t?t.cuentaCodigo:null,document.getElementById("cuentaDepreciacion").focus()},function(t){var i=document.getElementById("cuentaDepreciacion");i&&i.focus()})}},t.prototype.buscarCuentaDepreciacionAcum=function(t){var i=this;if(this.utilService.validarKeyBuscar(t.keyCode)&&(!this.afCategoriasTO.catCuentaDepreciacionAcumulada||this.afCategoriasTO.catCuentaDepreciacionAcumulada!==this.cuentaDepreciacionAcum)&&(this.afCategoriasTO.catCuentaDepreciacionAcumulada=""===this.afCategoriasTO.catCuentaDepreciacionAcumulada?null:this.afCategoriasTO.catCuentaDepreciacionAcumulada,this.afCategoriasTO.catCuentaDepreciacionAcumulada)){var e={empresa:this.empresaSeleccionada.empCodigo,buscar:this.afCategoriasTO.catCuentaDepreciacionAcumulada,ctaGrupo:null};t.srcElement.blur(),t.preventDefault();var a=this.modalService.open(J.a,{size:"lg",backdrop:"static"});a.componentInstance.filtrosBusquedaPlanCuenta=e,a.componentInstance.tamanioEstructura=this.tamanioEstructura,a.result.then(function(t){i.cuentaDepreciacionAcum=t?t.cuentaCodigo:null,i.afCategoriasTO.catCuentaDepreciacionAcumulada=t?t.cuentaCodigo:null,document.getElementById("cuentaDepreciacionAcumulado").focus()},function(t){var i=document.getElementById("cuentaDepreciacionAcumulado");i&&i.focus()})}},t.prototype.iniciarAgGrid=function(){this.columnDefs=[{headerName:h.a.TAG_CODIGO,field:"catCodigo",width:50},{headerName:h.a.TAG_DESCRIPCION,field:"catDescripcion",width:100},{headerName:h.a.TAG_VIDA_UTIL,field:"catVidaUtil",width:80,cellClass:"text-sm-right"},{headerName:h.a.TAG_PORCENTAJE_DEPRECIACION,field:"catPorcentajeDepreciacion",width:80,cellClass:"text-sm-right",valueFormatter:this.numberFormatter},{headerName:h.a.TAG_INACTIVO,headerClass:"text-md-center",field:"catInactivo",width:h.a.WIDTH_OPCIONES,cellRenderer:"inputEstado",cellClass:"text-md-center"},{headerName:h.a.TAG_OPCIONES,headerClass:"text-md-center",field:"",width:h.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",headerComponent:"toolTip",headerComponentParams:{class:h.a.ICON_OPCIONES,tooltip:h.a.TAG_OPCIONES,text:""}}],this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:z.a,toolTip:W.a,inputEstado:q.a},this.components={}},t.prototype.numberFormatter=function(t){return new H.DecimalPipe("en-US").transform(t.value,"1.2-2")},t.prototype.onGridReady=function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},t.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},t.prototype.autoSizeAll=function(){var t=[];this.gridColumnApi.getAllColumns().forEach(function(i){t.push(i.colId)}),this.gridColumnApi.autoSizeColumns(t)},t.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,t)}},t.prototype.mostrarOpciones=function(t,i){this.mostrarContextMenu(i,t)},t.prototype.mostrarContextMenu=function(t,i){this.objetoSeleccionado=t,this.generarOpciones(),this.menuOpciones.show(i),i.stopPropagation()},t.prototype.refreshGrid=function(){var t=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){t.actualizarFilas()},50)},t.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},Y([Object(a.ViewChild)("menuOpciones"),X("design:type",K.ContextMenu)],t.prototype,"menuOpciones",void 0),t=Y([Object(a.Component)({selector:"app-grupo-clasificacion",template:e("y+2V"),styles:[e("bSED")]}),X("design:paramtypes",[k,o.ActivatedRoute,C.a,b.b,v.a,O.HotkeysService,I.a,T.a,V.a,B.b,g.a])],t)}(),Q=e("nxr/"),Z=function(){function t(t){this.afEmpresa="",this.afCodigo="",this.afDescripcion="",this.afFechaAdquisicion=new Date,this.afValorAdquision=0,this.afValorResidual=0,this.afDepreciacionInicialMonto=0,this.afDepreciacionInicialMeses=0,this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=new Date,this.afUbicaciones=new f,this.prdListaSectorTO=new Q.a,this.afCategorias=new j,this.sectorDescripcion=null,this.categoriaDescripcion=null,this.ubicacionDescripcion=null,t&&this.hydrate(t)}return t.prototype.hydrate=function(t){this.afEmpresa=t.afEmpresa?t.afEmpresa:this.afEmpresa,this.afCodigo=t.afCodigo?t.afCodigo:this.afCodigo,this.afDescripcion=t.afDescripcion?t.afDescripcion:this.afDescripcion,this.afFechaAdquisicion=t.afFechaAdquisicion?t.afFechaAdquisicion:this.afFechaAdquisicion,this.afValorAdquision=t.afValorAdquision?t.afValorAdquision:this.afValorAdquision,this.afValorResidual=t.afValorResidual?t.afValorResidual:this.afValorResidual,this.afDepreciacionInicialMonto=t.afDepreciacionInicialMonto?t.afDepreciacionInicialMonto:this.afDepreciacionInicialMonto,this.afDepreciacionInicialMeses=t.afDepreciacionInicialMeses?t.afDepreciacionInicialMeses:this.afDepreciacionInicialMeses,this.usrEmpresa=t.usrEmpresa?t.usrEmpresa:this.usrEmpresa,this.usrCodigo=t.usrCodigo?t.usrCodigo:this.usrCodigo,this.usrFechaInserta=t.usrFechaInserta?t.usrFechaInserta:this.usrFechaInserta,this.afUbicaciones=t.afUbicaciones?t.afUbicaciones:this.afUbicaciones,this.prdListaSectorTO=t.prdListaSectorTO?t.prdListaSectorTO:this.prdListaSectorTO,this.afCategorias=t.afCategorias?t.afCategorias:this.afCategorias,this.sectorDescripcion=t.sectorDescripcion?t.sectorDescripcion:this.sectorDescripcion,this.categoriaDescripcion=t.categoriaDescripcion?t.categoriaDescripcion:this.categoriaDescripcion,this.ubicacionDescripcion=t.ubicacionDescripcion?t.ubicacionDescripcion:this.ubicacionDescripcion},t}(),tt=e("hyxj"),it=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},et=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},at=function(){function t(t,i,e){this.api=t,this.toastr=i,this.utilService=e}return t.prototype.listarAfActivoTO=function(t,i,e){var a=this;this.api.post("todocompuWS/activosFijosWebController/getListaAfActivoTO",t,e).then(function(t){t&&t.extraInfo?i.despuesDeListarAfActivoTO(t.extraInfo):(i.cargando=!1,i.despuesDeListarAfActivoTO([]),a.toastr.warning(t.operacionMensaje,h.a.TOAST_INFORMACION))}).catch(function(t){return a.utilService.handleError(t,i)})},t=it([Object(a.Injectable)({providedIn:"root"}),et("design:paramtypes",[C.a,b.b,I.a])],t)}(),ot=e("wd/R"),nt=e("PYZn"),rt=e("sXuD"),ct=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},st=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},lt=function(){function t(t,i,e,a,o,n,r,c,s,l,d,m,A){this.grupoClasificacionService=t,this.ubicacionService=i,this.sectorService=e,this.activoFijoService=a,this.filasService=o,this.route=n,this.atajoService=r,this.utilService=c,this.toastr=s,this.auth=l,this.modalService=d,this.api=m,this.archivoService=A,this.constantes=h.a,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.isSeleccionarPrimeraFila=!0,this.accion=null,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.filtroGlobal="",this.codigoProducto="",this.listaEmpresas=[],this.listadoResultado=[],this.listadoFiltrado=[],this.listadoCategorias=[],this.listadoUbicaciones=[],this.listadoSectores=[],this.empresaSeleccionada=new p.a,this.objetoSeleccionado=new Z,this.afActivoTO=new Z,this.categoriaSeleccionada=new j,this.ubicacionSeleccionado=new f,this.sectorSeleccionado=new Q.a,this.indexTable=0,this.tamanioEstructura=0,this.columnas=[],this.columnasSeleccionadas=[],this.filasTiempo=new u.a,this.es={},this.valorResidualValido=!0,this.valorDepreciacionMesesValido=!0,this.valorDepreciacionMontoValido=!0}return t.prototype.ngOnInit=function(){ot.locale("es"),this.es=this.utilService.setLocaleDate(),this.constantes=h.a,this.listaEmpresas=this.route.snapshot.data.activoFijo,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&(h.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.isScreamMd=!(window.innerWidth<=576),this.inicializarAtajos(),this.inicializarTabla(),this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"100.00",minimumValue:"0"}},t.prototype.cambiarEmpresaSeleccionada=function(){h.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.sectorSeleccionado=null,this.categoriaSeleccionada=null,this.ubicacionSeleccionado=null,this.limpiarResultado(),this.listarSectores(),this.listarGrupoClasificacion(),this.listarUbicaciones()},t.prototype.operacionesActivoFijo=function(t){switch(t){case h.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(h.a.ACCION_ELIMINAR,this,!0)&&(this.afActivoTO=new Z(this.objetoSeleccionado),this.accion=h.a.ACCION_ELIMINAR,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.eliminarActivosFijos());break;case h.a.ACCION_CREAR:this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0)&&(this.afActivoTO=new Z,this.afActivoTO.afUbicaciones=this.ubicacionSeleccionado&&this.ubicacionSeleccionado.ubiCodigo?this.ubicacionSeleccionado:this.listadoUbicaciones[0],this.afActivoTO.afCategorias=this.categoriaSeleccionada&&this.categoriaSeleccionada.catCodigo?this.categoriaSeleccionada:this.listadoCategorias[0],this.afActivoTO.prdListaSectorTO=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectorSeleccionado:this.listadoSectores[0],this.accion=h.a.ACCION_CREAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_NUEVO_ACTIVO_FIJO,this.classTitulo=h.a.ICON_FILTRO_NUEVO);break;case h.a.ACCION_EDITAR:this.utilService.verificarPermiso(h.a.ACCION_EDITAR,this,!0)&&(this.afActivoTO=new Z(this.objetoSeleccionado),this.afActivoTO.afFechaAdquisicion=this.utilService.fomatearFechaString(this.afActivoTO.afFechaAdquisicion,"AAAA-MM-DD"),this.codigoProducto=this.afActivoTO.afCodigo,this.accion=h.a.ACCION_EDITAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_EDITAR_ACTIVO_FIJO,this.classTitulo=h.a.ICON_FILTRO_EDITAR);break;case h.a.ACCION_CONSULTAR:this.utilService.verificarPermiso(h.a.ACCION_CONSULTAR,this,!0)&&(this.afActivoTO=new Z(this.objetoSeleccionado),this.afActivoTO.afFechaAdquisicion=this.utilService.fomatearFechaString(this.afActivoTO.afFechaAdquisicion,"AAAA-MM-DD"),this.accion=h.a.ACCION_CONSULTAR,this.activar=!1,this.frmTitulo=h.a.TITULO_FORM_CONSULTAR_ACTIVO_FIJO,this.classTitulo=h.a.ICON_FILTRO_CONSULTAR)}},t.prototype.inicializarAtajos=function(){var t=this;this.atajoService.add(new O.Hotkey(h.a.ATAJO_AYUDA,function(){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var t=document.getElementById("btnActivarActivoFijo");return t&&t.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_BUSCAR,function(){var t=document.getElementById("btnBuscarActivoFijo");return t&&t.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_IMPRIMIR,function(){var t=document.getElementById("btnImprimirActivoFijo");return t&&t.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_EXPORTAR,function(){var t=document.getElementById("btnExportarActivoFijo");return t&&t.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_NUEVO,function(){var t=document.getElementById("btnNuevoActivoFijo");return t&&t.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_EDITAR,function(){return t.listadoResultado.length>0&&t.operacionesActivoFijo(h.a.ACCION_EDITAR),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_ELIMINAR,function(){return t.listadoResultado.length>0&&t.operacionesActivoFijo(h.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardarActivoFijo");return t&&t.click(),!1})),this.atajoService.add(new O.Hotkey(h.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelarActivoFijo");return t&&t.click(),!1}))},t.prototype.inicializarTabla=function(){this.columnas=[{field:"afCodigo",header:h.a.TAG_CODIGO,width:"20%"},{field:"afDescripcion",header:h.a.TAG_DESCRIPCION,width:"30%"},{field:"categoriaDescripcion",header:h.a.TAG_GRUPO_CLASIFICACION,width:"30%"},{field:"ubicacionDescripcion",header:h.a.TAG_UBICACION,width:"30%"},{field:"sectorDescripcion",header:h.a.TAG_SECTOR,width:"30%"}],this.columnasSeleccionadas=this.columnas},t.prototype.inicializarSectores=function(t,i){if(t&&i)return t.secCodigo===i.secCodigo},t.prototype.inicializarCategorias=function(t,i){if(t&&i)return t.catCodigo===i.catCodigo},t.prototype.inicializarUbicaciones=function(t,i){if(t&&i)return t.ubiCodigo===i.ubiCodigo},t.prototype.soloNumeros=function(t){return this.utilService.soloNumeros(t)},t.prototype.limpiarResultado=function(){this.listadoFiltrado=[],this.listadoResultado=[],this.actualizarFilas()},t.prototype.listarActivosFijos=function(){this.cargando=!0;var t={empresa:h.a.KEY_EMPRESA_SELECT,sector:this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.sectorSeleccionado.secCodigo:"",ubicacion:this.ubicacionSeleccionado&&this.ubicacionSeleccionado.ubiCodigo?this.ubicacionSeleccionado.ubiCodigo:""};this.filasTiempo.iniciarContador(),this.activoFijoService.listarAfActivoTO(t,this,h.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarAfActivoTO=function(t){this.listadoResultado=t,this.listadoFiltrado=this.listadoResultado.slice(),this.cargando=!1,this.filasTiempo.finalizarContador(),this.seleccionarPrimeraFila(),this.actualizarFilas()},t.prototype.listarGrupoClasificacion=function(){this.cargando=!0,this.grupoClasificacionService.listarAfCategoriasTO({empresa:h.a.KEY_EMPRESA_SELECT,filtrarInactivos:!0},this,h.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarAfCategoriasTO=function(t){var i=this;this.listadoCategorias=t,this.listadoCategorias.length>0?this.categoriaSeleccionada=this.categoriaSeleccionada&&this.categoriaSeleccionada.catCodigo?this.listadoCategorias.find(function(t){return t.catCodigo===i.categoriaSeleccionada.catCodigo}):this.listadoCategorias[0]:this.categoriaSeleccionada=null,this.cargando=!1},t.prototype.listarUbicaciones=function(){this.cargando=!0,this.ubicacionService.listarAfUbicacionesTO({empresa:h.a.KEY_EMPRESA_SELECT},this,h.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarAfUbicacionesTO=function(t){var i=this;this.listadoUbicaciones=t,this.listadoUbicaciones.length>0?this.ubicacionSeleccionado=this.ubicacionSeleccionado&&this.ubicacionSeleccionado.ubiCodigo?this.listadoUbicaciones.find(function(t){return t.ubiCodigo===i.ubicacionSeleccionado.ubiCodigo}):this.listadoUbicaciones[0]:this.ubicacionSeleccionado=null,this.cargando=!1},t.prototype.listarSectores=function(){this.cargando=!0,this.sectorService.listarPrdListaSectorTO({empresa:h.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1},this,h.a.KEY_EMPRESA_SELECT)},t.prototype.despuesDeListarSectores=function(t){var i=this;this.listadoSectores=t,this.listadoSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listadoSectores.find(function(t){return t.secCodigo===i.sectorSeleccionado.secCodigo}):this.listadoSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},t.prototype.insertarActivosFijos=function(t){var i=this;if(this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.validarValorResidual(),this.validarDepreciacionMeses(),this.utilService.establecerFormularioTocado(t)&&t&&t.valid&&this.valorResidualValido&&this.valorDepreciacionMesesValido&&this.valorDepreciacionMontoValido){var e=JSON.parse(JSON.stringify(this.afActivoTO));this.setearValoresAObjetoAfActivoTO(e),this.api.post("todocompuWS/activosFijosWebController/insertarAfActivoTO",{afActivoTO:e},h.a.KEY_EMPRESA_SELECT).then(function(t){i.cargando=!1,t&&t.extraInfo?(i.resetearFormulario(),i.refrescarTabla(e,"I"),i.toastr.success(t.operacionMensaje,"Aviso")):i.toastr.warning(t.operacionMensaje,"Aviso")}).catch(function(t){return i.utilService.handleError(t,i)})}else this.toastr.error(h.a.MSJ_CAMPOS_INVALIDOS,h.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.actualizarActivosFijos=function(t){var i=this;if(this.utilService.verificarPermiso(h.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.validarValorResidual(),this.validarDepreciacionMeses(),this.utilService.establecerFormularioTocado(t)&&t&&t.valid&&this.valorResidualValido&&this.valorDepreciacionMesesValido&&this.valorDepreciacionMontoValido){var e=JSON.parse(JSON.stringify(this.afActivoTO));this.setearValoresAObjetoAfActivoTO(e),this.api.post("todocompuWS/activosFijosWebController/modificarAfActivoTO",{afActivoTO:e},h.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo?(i.refrescarTabla(e,"U"),i.toastr.success(t.operacionMensaje,"Aviso"),i.resetearFormulario()):i.toastr.warning(t.operacionMensaje,"Aviso"),i.cargando=!1}).catch(function(t){return i.utilService.handleError(t,i)})}else this.toastr.error(h.a.MSJ_CAMPOS_INVALIDOS,h.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},t.prototype.eliminarActivosFijos=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_ELIMINAR,this,!0)){var i={title:h.a.MSJ_TITULO_ELIMINAR,texto:h.a.MSJ_PREGUNTA_ELIMINAR,type:h.a.SWAL_WARNING,confirmButtonText:h.a.MSJ_SI_ELIMINAR,cancelButtonText:h.a.MSJ_CANCELAR,confirmButtonColor:h.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){if(i){t.cargando=!0;var e={afActivoTO:t.afActivoTO};t.api.post("todocompuWS/activosFijosWebController/eliminarAfActivoTO",e,h.a.KEY_EMPRESA_SELECT).then(function(i){i&&i.extraInfo?(t.toastr.success(i.operacionMensaje,h.a.TOAST_CORRECTO),t.refrescarTabla(t.afActivoTO,"D")):t.toastr.warning(i.operacionMensaje),t.resetearFormulario(),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}else t.resetearFormulario()})}},t.prototype.exportarActivosFijos=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var i={listadoAfActivoTO:this.listadoResultado};this.archivoService.postExcel("todocompuWS/activosFijosWebController/exportarReporteAfActivoTO",i,this.empresaSeleccionada).then(function(i){i?t.utilService.descargarArchivoExcel(i._body,"ListadoActivosFijos_"):t.toastr.warning(h.a.MSJ_NO_DATA,h.a.TAG_AVISO),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}},t.prototype.imprimirActivosFijos=function(){var t=this;if(this.utilService.verificarPermiso(h.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var i={listadoAfActivoTO:this.listadoResultado};this.archivoService.postPDF("todocompuWS/activosFijosWebController/generarReporteAfActivoTO",i,this.empresaSeleccionada).then(function(i){i?t.utilService.descargarArchivoPDF("ListadoActivosFijos"+t.utilService.obtenerHorayFechaActual()+".pdf",i):t.toastr.warning(h.a.MSJ_NO_DATA,h.a.TAG_AVISO),t.cargando=!1}).catch(function(i){return t.utilService.handleError(i,t)})}},t.prototype.setearValoresAObjetoAfActivoTO=function(t){t.usrEmpresa=h.a.KEY_EMPRESA_SELECT,t.afEmpresa=h.a.KEY_EMPRESA_SELECT,t.sectorDescripcion=t.prdListaSectorTO.nomSector,t.ubicacionDescripcion=t.afUbicaciones.ubiDescripcion,t.categoriaDescripcion=t.afCategorias.catDescripcion,t.usrCodigo=this.auth.getCodigoUser()},t.prototype.resetearFormulario=function(){this.accion=null,this.frmTitulo=h.a.TITULO_FILTROS,this.classTitulo=h.a.ICON_FILTRAR,this.valorResidualValido=!0,this.valorDepreciacionMesesValido=!0,this.valorDepreciacionMontoValido=!0,this.afActivoTO=new Z,this.actualizarFilas()},t.prototype.refrescarTabla=function(t,i){switch(i){case"I":if(this.listadoResultado.length>0)(e=this.listadoResultado.slice()).unshift(t),this.listadoResultado=e;break;case"U":var e,a=this.listadoResultado.findIndex(function(i){return i.afCodigo===t.afCodigo});(e=this.listadoResultado.slice())[a]=t,this.listadoResultado=e,this.objetoSeleccionado=this.listadoResultado[a],this.indexTable=a,this.isSeleccionarPrimeraFila=!1;break;case"D":a=this.listadoResultado.findIndex(function(i){return i.afCodigo===t.afCodigo});this.listadoResultado=this.listadoResultado.filter(function(t,i){return i!=a}),this.indexTable=a,this.isSeleccionarPrimeraFila=!1}},t.prototype.buscarProducto=function(t){var i=this;if(this.utilService.validarKeyBuscar(t.keyCode))if(this.afActivoTO.afCodigo&&this.afActivoTO.afCodigo===this.codigoProducto)this.toastr.info(h.a.MSJ_ENTERTOMODAL,h.a.TAG_AVISO);else{var e={empresa:this.empresaSeleccionada.empCodigo,busqueda:this.afActivoTO.afCodigo,categoria:null,incluirInactivos:!1,limite:!1};t.srcElement.blur(),t.preventDefault();var a=this.modalService.open(nt.a,{size:"lg",backdrop:"static"});a.componentInstance.parametrosBusqueda=e,a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(t){var e=new rt.a(t);i.afActivoTO.afCodigo=e.proCodigoPrincipal,i.afActivoTO.afDescripcion=e.proNombre,i.codigoProducto=e.proCodigoPrincipal},function(){i.afActivoTO.afCodigo=null,i.codigoProducto=null,i.focusProducto()})}},t.prototype.focusProducto=function(){var t=document.getElementById("codigoProducto");t&&t.focus()},t.prototype.validarProducto=function(){this.codigoProducto!==this.afActivoTO.afCodigo&&(this.codigoProducto=null,this.afActivoTO.afCodigo=null,this.afActivoTO.afDescripcion=null)},t.prototype.validarValorResidual=function(){this.afActivoTO.afValorResidual=this.afActivoTO.afValorResidual?this.afActivoTO.afValorResidual:0,this.afActivoTO.afValorAdquision=this.afActivoTO.afValorAdquision?this.afActivoTO.afValorAdquision:0;var t=JSON.parse(JSON.stringify(this.afActivoTO)),i=this.utilService.convertirDecimaleFloat(t.afValorResidual)>0&&this.utilService.convertirDecimaleFloat(t.afValorAdquision)>0,e=this.utilService.convertirDecimaleFloat(t.afValorResidual)<=this.utilService.convertirDecimaleFloat(t.afValorAdquision);return this.valorResidualValido=i&&e,this.validarDepreciacionMonto(),this.valorResidualValido},t.prototype.validarDepreciacionMeses=function(){this.afActivoTO.afDepreciacionInicialMeses=this.afActivoTO.afDepreciacionInicialMeses?this.afActivoTO.afDepreciacionInicialMeses:0;var t=JSON.parse(JSON.stringify(this.afActivoTO)),i=t.afDepreciacionInicialMeses>0,e=t.afDepreciacionInicialMeses<=12*t.afCategorias.catVidaUtil;return this.valorDepreciacionMesesValido=i&&e,this.validarDepreciacionMonto(),this.valorDepreciacionMesesValido},t.prototype.validarDepreciacionMonto=function(){this.afActivoTO.afDepreciacionInicialMonto=this.afActivoTO.afDepreciacionInicialMonto?this.afActivoTO.afDepreciacionInicialMonto:0;var t=JSON.parse(JSON.stringify(this.afActivoTO)),i=Math.abs(t.afValorAdquision-t.afValorResidual),e=t.afDepreciacionInicialMonto>0,a=t.afDepreciacionInicialMonto<=i;return this.valorDepreciacionMontoValido=e&&a,this.valorDepreciacionMontoValido},t.prototype.generarOpciones=function(){var t=this;this.indexTable=this.listadoFiltrado.indexOf(this.objetoSeleccionado);var i=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,e=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:h.a.ACCION_CONSULTAR,icon:h.a.ICON_CONSULTAR,disabled:!1,command:function(){return t.operacionesActivoFijo(h.a.ACCION_CONSULTAR)}},{label:h.a.ACCION_EDITAR,icon:h.a.ICON_EDITAR,disabled:!i,command:function(){return i?t.operacionesActivoFijo(h.a.ACCION_EDITAR):null}},{label:h.a.ACCION_ELIMINAR,icon:h.a.ICON_ELIMINAR,disabled:!e,command:function(){return e?t.operacionesActivoFijo(h.a.ACCION_ELIMINAR):null}}]},t.prototype.onFilterTabla=function(t){this.listadoFiltrado=t.filteredValue.slice(),this.isSeleccionarPrimeraFila&&this.seleccionarPrimeraFila(),this.isSeleccionarPrimeraFila=!0,this.actualizarFilas()},t.prototype.verificarFiltros=function(t,i,e){switch(e){case"TECLAS":this.utilService.validarKeyBuscar(t.keyCode)&&this.filtrarGlobalmente(i);break;case"CLICK":this.filtrarGlobalmente(i);break;case"BLUR":this.filtroGlobal||this.filtrarGlobalmente(i)}},t.prototype.seleccionarPrimeraFila=function(){this.listadoFiltrado.length>0&&(this.objetoSeleccionado=this.listadoFiltrado[0],this.indexTable=0)},t.prototype.filtrarGlobalmente=function(t,i){i&&""!==this.filtroGlobal||t.filterGlobal(this.filtroGlobal.toUpperCase(),"contains")},t.prototype.actualizarFilas=function(){this.filasService.actualizarFilas(this.listadoFiltrado.length,this.filasTiempo.getTiempo())},t.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},ct([Object(a.HostListener)("window:resize",["$event"]),st("design:type",Function),st("design:paramtypes",[]),st("design:returntype",void 0)],t.prototype,"onResize",null),t=ct([Object(a.Component)({selector:"app-activos-fijos",template:e("GHHr"),styles:[e("O+m5")]}),st("design:paramtypes",[k,L,tt.a,at,v.a,o.ActivatedRoute,O.HotkeysService,I.a,b.b,T.a,B.b,C.a,g.a])],t)}(),dt=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},ut=[{path:"",component:s,children:[{path:"motivoDepreciacion",component:F,resolve:{motivoDepreciacion:l.a,breadcrumb:d.a},runGuardsAndResolvers:"always"},{path:"ubicacionActivoFijo",component:x,resolve:{ubicacionActivoFijo:l.a,breadcrumb:d.a},runGuardsAndResolvers:"always"},{path:"activoFijoGrupo",component:$,resolve:{activoFijoGrupo:l.a,breadcrumb:d.a},runGuardsAndResolvers:"always"},{path:"activoFijo",component:lt,resolve:{activoFijo:l.a,breadcrumb:d.a},runGuardsAndResolvers:"always"}]}],pt=function(){function t(){}return t=dt([Object(a.NgModule)({imports:[o.RouterModule.forChild(ut)],exports:[o.RouterModule]})],t)}(),ht=e("Q8hO");e.d(i,"ActivofijoModule",function(){return ft});var mt=function(t,i,e,a){var o,n=arguments.length,r=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(i,e,r):o(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r},ft=function(){function t(){}return t=mt([Object(a.NgModule)({imports:[ht.a,pt],declarations:[s,F,x,$,lt]})],t)}()},"271t":function(t,i){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class=" {{classTitulo}}"></i>\r\n        <b>{{frmTitulo}}</b>\r\n      </div>\r\n\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmUbicacion=\'ngForm\' name="frmUbicacion">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada" (ngModelChange)="cambiarEmpresaSeleccionada()"\r\n              [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}} ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n        \x3c!--FORMULARIO OPERACIONES--\x3e\r\n        <form #frmDatos=\'ngForm\' autocomplete="off">\r\n          <div *ngIf="accion && accion !== constantes.ACCION_ELIMINAR && accion !== constantes.ACCION_EDITAR_ESTADO">\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CODIGO}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="afUbicacionesTO.ubiCodigo"\r\n                pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                class="form-control input-sm mousetrap text-uppercase" required maxlength="20" appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}"\r\n                container="body"></span>\r\n            </div>\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DESCRIPCION}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap text-uppercase" name="detalle"\r\n                maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="afUbicacionesTO.ubiDescripcion"\r\n                id="detalle" required appUppercase>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscarUbicacion" class="btn btn-sm btn-primary mr-1" (click)="listarUbicaciones()">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n          <button type="button" id="btnNuevoUbicacion" class="btn btn-sm btn-primary" (click)="operacionesUbicacion(constantes.ACCION_CREAR)">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-footer" *ngIf="accion && accion !== constantes.ACCION_ELIMINAR  && accion !== constantes.ACCION_EDITAR_ESTADO">\r\n        <div class="text-right">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarUbicacion" (click)="insertarUbicacion(frmDatos)"\r\n            *ngIf="accion === constantes.ACCION_CREAR">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarUbicacion" (click)="actualizarUbicacion(frmDatos)"\r\n            *ngIf="accion === constantes.ACCION_EDITAR">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button type="button" class="btn btn-sm btn-default" id="btnCancelarUbicacion" (click)="resetearFormulario()">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listadoResultado?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarUbicacion" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.ACTIVO_FIJO_UBICACION_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirUbicacion" (click)="imprimirUbicaciones()" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarUbicacion" (click)="exportarUbicaciones()" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirUbicacion" (click)="imprimirUbicaciones()" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarUbicacion" (click)="exportarUbicaciones()" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <p-table #dt [appRowSelector]="indexTable" [appIndexLimit]="listadoFiltrado?.length" (updateIndex)="indexTable = $event"\r\n          (updateFiltro)="filtrarGlobalmente(dt, true)" [columns]="columnasSeleccionadas" [value]="listadoResultado" [scrollable]="true"\r\n          scrollHeight="calc(100vh - 245px)" [resizableColumns]="true" [responsive]="true" [(contextMenuSelection)]="objetoSeleccionado"\r\n          [contextMenu]="men" selectionMode="single" [(selection)]="objetoSeleccionado" (onContextMenuSelect)="generarOpciones()"\r\n          [metaKeySelection]="true" (onFilter)="onFilterTabla($event)">\r\n\r\n          <ng-template pTemplate="caption">\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group">\r\n                  <input [(ngModel)]="filtroGlobal" type="text" class="form-control form-control-sm input-filter" style="font-family: Arial, FontAwesome"\r\n                    placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (keydown)="verificarFiltros($event,dt,\'TECLAS\')"\r\n                    (blur)="verificarFiltros(null,dt,\'BLUR\')">\r\n                  <div class="input-group-append">\r\n                    <button class="btn btn-sm btn-primary" (click)="verificarFiltros(null,dt,\'CLICK\')" type="button"> <i\r\n                        class="{{constantes.ICON_BUSCAR}}"></i></button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div style="float:right">\r\n                  <p-multiSelect [options]="columnas" [(ngModel)]="columnasSeleccionadas" maxSelectedLabels="1" optionLabel="header" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n                    defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate="colgroup" let-columns *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col *ngFor="let col of columns" [style.width]="col.width">\r\n              <col style="width:10%">\r\n            </colgroup>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate="header" let-columns>\r\n            <tr class="text-center">\r\n              <th *ngFor="let col of columns" pResizableColumn [pSortableColumn]="col.field">\r\n                {{col.header}}\r\n                <p-sortIcon [field]="col.field"></p-sortIcon>\r\n              </th>\r\n              <th class="text-md-center text-sm-center">\r\n                <i class="{{constantes.ICON_OPCIONES}}" placement="top" ngbTooltip="{{constantes.TAG_OPCIONES}}"></i>\r\n              </th>\r\n            </tr>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate="body" let-rowData let-columns="columns" let-index="rowIndex">\r\n            <tr tabindex="{{index}}" [pSelectableRow]="rowData" [pContextMenuRow]="rowData" (click)="indexTable = index" [ngClass]="{ \'table-condensed\':true,\'ui-state-highlight\': indexTable === index}">\r\n              <td *ngFor="let col of columns" class="ui-resizable-column ocultar-en-tabla">\r\n                <span class="ui-column-title">{{col.header}}</span>\r\n                <span>{{rowData[col.field]}}</span>\r\n              </td>\r\n              \x3c!--OPCIONES--\x3e\r\n              <td class="text-md-center text-sm-center" style="width:10%">\r\n                <span class="ui-column-title">{{constantes.TAG_OPCIONES}}</span>\r\n                <button id="opciones_{{index}}" type="button" class="btn btn-primary btn-sm pb-0 pt-0" placement="top" ngbTooltip="{{constantes.TAG_OPCIONES}}"\r\n                  container="body" (click)="objetoSeleccionado=rowData;generarOpciones();men.show($event);$event.stopPropagation()">\r\n                  <i class="{{constantes.ICON_OPCIONES}}"></i>\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #men [model]="opciones" appendTo="body"></p-contextMenu>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"7I/U":function(t,i){t.exports=""},GHHr:function(t,i){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class=" {{constantes.ICON_FILTRAR}}"></i>\r\n        <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmActivoFijo=\'ngForm\' name="frmActivoFijo">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada" (ngModelChange)="cambiarEmpresaSeleccionada()"\r\n              [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}} ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_SECTOR}}</b>\r\n              &nbsp;\r\n              <a (click)="listarSectores()" *ngIf="!accion">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}" container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listadoSectores" name="sec" [showClear]="true" [(ngModel)]="sectorSeleccionado" optionLabel="secNombre"\r\n              placeholder="{{constantes.TAG_TODOS}}" class="mousetrap" [disabled]="accion">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.secNombre}} ({{fs.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_UBICACION}}</b>\r\n              &nbsp;\r\n              <a (click)="listarUbicaciones()" *ngIf="!accion">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_UBICACIONES}}" container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listadoUbicaciones" name="ubi" [showClear]="true" [(ngModel)]="ubicacionSeleccionado" optionLabel="ubiDescripcion"\r\n              placeholder="{{constantes.TAG_TODOS}}" class="mousetrap" [disabled]="accion">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{ubicacionSeleccionado?.ubiDescripcion}} ({{ubicacionSeleccionado?.ubiCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class="">{{fs.value.ubiDescripcion}} ({{fs.value.ubiCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscarActivoFijo" class="btn btn-sm btn-primary mr-1" (click)="listarActivosFijos()">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n\r\n          <button type="button" id="btnNuevoActivoFijo" class="btn btn-sm btn-primary" (click)="operacionesActivoFijo(constantes.ACCION_CREAR)">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n\r\n    \x3c!--Formulario--\x3e\r\n    <form #frmDatos=\'ngForm\' autocomplete="off" class="card m-0" *ngIf="accion && accion !== constantes.ACCION_ELIMINAR">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarActivoFijo" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n\r\n        <b> {{frmTitulo}} - </b>\r\n        <strong class="text-primary">{{empresaSeleccionada.empNombre}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <ng-template #tipContentGuardar>{{constantes.LABEL_GUARDAR}}</ng-template>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentGuardar" id="btnGuardarActivoFijo" *ngIf="accion === constantes.ACCION_CREAR"\r\n              title="{{constantes.ATAJO_GUARDAR}}" (click)="insertarActivosFijos(frmDatos)">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentGuardar" id="btnGuardarActivoFijo" *ngIf="accion === constantes.ACCION_EDITAR"\r\n              title="{{constantes.ATAJO_GUARDAR}}" (click)="actualizarActivosFijos(frmDatos)">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <ng-template #tipContentCancelar>{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}</ng-template>\r\n            <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarActivoFijo"\r\n              [ngbTooltip]="tipContentCancelar" (click)="resetearFormulario()">\r\n              <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n\r\n          \x3c!-- con etiquetas--\x3e\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarActivoFijo" *ngIf="accion === constantes.ACCION_CREAR"\r\n              title="{{constantes.ATAJO_GUARDAR}}" (click)="insertarActivosFijos(frmDatos)">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarActivoFijo" *ngIf="accion === constantes.ACCION_EDITAR"\r\n              title="{{constantes.ATAJO_GUARDAR}}" (click)="actualizarActivosFijos(frmDatos)">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarActivoFijo"\r\n              (click)="resetearFormulario()">\r\n              <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n              {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body p-1">\r\n        <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n\r\n          <div class="card mb-1 card-accent-primary">\r\n            <div class="card-header h6">\r\n              <b> {{constantes.TAG_ACTIVO_FIJO_INFORMACION}}</b>\r\n            </div>\r\n\r\n            <div class="card-body mt-0 mb-0 pt-1 pb-0">\r\n\r\n              <div class="row">\r\n                <div class="form-group col-lg-4 col-sm-6 has-feedback">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                  </label>\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" [appFocus]="accion === constantes.ACCION_CREAR" name="codigoProducto" #codigo="ngModel"\r\n                    [(ngModel)]="afActivoTO.afCodigo" pattern="{{constantes.PATTERN_CODIGO}}" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                    class="form-control form-control-sm mousetrap text-uppercase" required maxlength="20" appUppercase (keydown)="buscarProducto($event)"\r\n                    (blur)="validarProducto()">\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_PRODUCTO}}"\r\n                    triggers="mouseenter:mouseleave" container="body"></span>\r\n\r\n                  <label *ngIf="accion !== constantes.ACCION_CREAR" class="form-control form-control-sm text-uppercase label-input">{{afActivoTO.afCodigo}}</label>\r\n\r\n                </div>\r\n\r\n                <div class="form-group col-lg-4 col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_DESCRIPCION}}</strong>\r\n                  </label>\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" class="form-control form-control-sm mousetrap text-uppercase" name="detalle"\r\n                    maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="afActivoTO.afDescripcion"\r\n                    id="detalle" required appUppercase [disabled]="true">\r\n                  <label *ngIf="accion !== constantes.ACCION_CREAR" class="form-control form-control-sm text-uppercase label-input">{{afActivoTO.afDescripcion}}</label>\r\n                </div>\r\n\r\n                <div class="form-group col-lg-4 col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_FECHA_ADQUISION}}</strong>\r\n                  </label>\r\n                  <p-calendar inputId="fecha" name="fecha" id="fecha" [(ngModel)]="afActivoTO.afFechaAdquisicion" dateFormat="dd/mm/yy" [locale]="es"\r\n                    [showIcon]="true" [required]="true" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-calendar>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row">\r\n\r\n                <div class="form-group col-lg-4 col-sm-6">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_SECTOR}}</b>\r\n                  </label>\r\n                  <select *ngIf="accion !== constantes.ACCION_CONSULTAR" [compareWith]="inicializarSectores" class="form-control form-control-sm mousetrap"\r\n                    name="sector" [(ngModel)]="afActivoTO.prdListaSectorTO" required>\r\n                    <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="sector" *ngFor="let sector of listadoSectores"> {{sector?.secNombre}} ({{sector?.secCodigo}}\r\n                      )\r\n                    </option>\r\n                  </select>\r\n                  <label *ngIf="accion === constantes.ACCION_CONSULTAR" class="form-control form-control-sm text-uppercase label-input">{{afActivoTO.prdListaSectorTO.secNombre}}</label>\r\n                </div>\r\n\r\n                <div class="form-group col-lg-4 col-sm-6">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_UBICACION}}</b>\r\n                  </label>\r\n                  <select *ngIf="accion !== constantes.ACCION_CONSULTAR" [compareWith]="inicializarUbicaciones" class="form-control form-control-sm mousetrap"\r\n                    name="ubicacion" [(ngModel)]="afActivoTO.afUbicaciones" required>\r\n                    <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="ubicacion" *ngFor="let ubicacion of listadoUbicaciones"> {{ubicacion?.ubiDescripcion}}\r\n                      ({{ubicacion?.ubiCodigo}} )</option>\r\n                  </select>\r\n                  <label *ngIf="accion === constantes.ACCION_CONSULTAR" class="form-control form-control-sm text-uppercase label-input">{{afActivoTO.afUbicaciones.ubiDescripcion}}</label>\r\n                </div>\r\n\r\n                <div class="form-group col-lg-4 col-sm-6">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_GRUPO_CLASIFICACION}}</strong>\r\n                  </label>\r\n                  <select *ngIf="accion !== constantes.ACCION_CONSULTAR" [compareWith]="inicializarCategorias" class="form-control form-control-sm mousetrap"\r\n                    name="categoria" [(ngModel)]="afActivoTO.afCategorias" required (ngModelChange)="validarDepreciacionMeses()">\r\n                    <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="categoria" *ngFor="let categoria of listadoCategorias"> {{categoria?.catDescripcion}}\r\n                      ({{categoria?.catCodigo}} )</option>\r\n                  </select>\r\n                  <label *ngIf="accion === constantes.ACCION_CONSULTAR" class="form-control form-control-sm text-uppercase label-input">{{afActivoTO.afCategorias.catDescripcion}}</label>\r\n                </div>\r\n\r\n              </div>\r\n\r\n              <div class="row">\r\n                <div class="form-group col-lg-3 col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_VALOR_ADQUISION}}</strong>\r\n                  </label>\r\n                  <input *ngIf="accion !== constantes.ACCION_CONSULTAR" name="afValorAdquision" type="text" [(ngModel)]="afActivoTO.afValorAdquision"\r\n                    class="form-control form-control-sm text-right text-uppercase unselectable" [appAutonumeric2]="afActivoTO.afValorAdquision"\r\n                    value="{{afActivoTO.afValorAdquision}}" (updateValue)="afActivoTO.afValorAdquision = $event" [appMinNumber]="0"\r\n                    required (blur)="validarValorResidual()">\r\n                  <label *ngIf="accion === constantes.ACCION_CONSULTAR" class="form-control form-control-sm text-uppercase label-input text-right">{{afActivoTO.afValorAdquision\r\n                    |number:\'1.2-2\'}}\r\n                  </label>\r\n\r\n                </div>\r\n\r\n                <div class="form-group col-lg-3 col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_VALOR_RESIDUAL}}</strong>\r\n                  </label>\r\n                  <input *ngIf="accion !== constantes.ACCION_CONSULTAR" name="afValorResidual" type="text" [(ngModel)]="afActivoTO.afValorResidual"\r\n                    class="form-control form-control-sm text-right text-uppercase unselectable" [appAutonumeric2]="afActivoTO.afValorResidual"\r\n                    value="{{afActivoTO.afValorResidual}}" (updateValue)="afActivoTO.afValorResidual = $event" [appMinNumber]="0"\r\n                    required (blur)="validarValorResidual()" [ngClass]="{ \'has-error\':!valorResidualValido}">\r\n                  <label *ngIf="accion === constantes.ACCION_CONSULTAR" class="form-control form-control-sm text-uppercase label-input text-right">{{afActivoTO.afValorResidual\r\n                    |number:\'1.2-2\'}}\r\n                  </label>\r\n\r\n                </div>\r\n\r\n                <div class="form-group col-lg-3 col-sm-6">\r\n                  <label placement="top" ngbTooltip="{{constantes.TAG_DEPRECIACION_INICIAL_MESES}}" container="body" title="{{constantes.TAG_DEPRECIACION_INICIAL_MESES}}">\r\n                    <strong>{{constantes.TAG_DEPRECIACION_INICIAL_MESES_REDUCIDO}}</strong>\r\n                  </label>\r\n                  <input *ngIf="accion !== constantes.ACCION_CONSULTAR" class="form-control form-control-sm mousetrap text-uppercase text-right"\r\n                    name="mesesInicial" maxlength="4" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="afActivoTO.afDepreciacionInicialMeses"\r\n                    id="deprIniMeses" required pKeyFilter="pint" (keypress)="soloNumeros($event)" (blur)="validarDepreciacionMeses()"\r\n                    [ngClass]="{ \'has-error\':!valorDepreciacionMesesValido}">\r\n                  <label *ngIf="accion === constantes.ACCION_CONSULTAR" class="form-control form-control-sm text-uppercase label-input text-right">{{afActivoTO.afDepreciacionInicialMeses}}</label>\r\n\r\n                </div>\r\n\r\n                <div class="form-group col-lg-3 col-sm-6">\r\n                  <label placement="top" ngbTooltip="{{constantes.TAG_DEPRECIACION_INICIAL_MONTO}}" container="body" title="{{constantes.TAG_DEPRECIACION_INICIAL_MONTO}}">\r\n                    <strong>{{constantes.TAG_DEPRECIACION_INICIAL_MONTO_REDUCIDO}}</strong>\r\n                  </label>\r\n                  <input *ngIf="accion !== constantes.ACCION_CONSULTAR" name="montoInicial" type="text" maxlength="11" [(ngModel)]="afActivoTO.afDepreciacionInicialMonto"\r\n                    class="form-control form-control-sm text-right unselectable" [appAutonumeric2]="afActivoTO.afDepreciacionInicialMonto"\r\n                    value="{{afActivoTO.afDepreciacionInicialMonto}}" (updateValue)="afActivoTO.afDepreciacionInicialMonto = $event"\r\n                    [appMinNumber]="0" required (blur)="validarDepreciacionMonto()" [ngClass]="{ \'has-error\':!valorDepreciacionMontoValido}">\r\n                  <label *ngIf="accion === constantes.ACCION_CONSULTAR" class="form-control form-control-sm text-uppercase label-input text-right">{{afActivoTO.afDepreciacionInicialMonto\r\n                    |number:\'1.2-2\'}}\r\n                  </label>\r\n\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n\r\n\r\n        </fieldset>\r\n      </div>\r\n\r\n    </form>\r\n\r\n    \x3c!--Listado--\x3e\r\n\r\n    <div class="card m-0" *ngIf="listadoResultado?.length>0 && (!accion || accion === constantes.ACCION_ELIMINAR)">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarActivoFijo" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.ACTIVO_FIJO_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirActivoFijo" (click)="imprimirActivosFijos()" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarActivoFijo" (click)="exportarActivosFijos()" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirActivoFijo" (click)="imprimirActivosFijos()" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarActivoFijo" (click)="exportarActivosFijos()" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <p-table #dt [appRowSelector]="indexTable" [appIndexLimit]="listadoFiltrado?.length" (updateIndex)="indexTable = $event"\r\n          (updateFiltro)="filtrarGlobalmente(dt, true)" [columns]="columnasSeleccionadas" [value]="listadoResultado" [scrollable]="true"\r\n          scrollHeight="calc(100vh - 245px)" [resizableColumns]="true" [responsive]="true" [(contextMenuSelection)]="objetoSeleccionado"\r\n          [contextMenu]="men" selectionMode="single" [(selection)]="objetoSeleccionado" (onContextMenuSelect)="generarOpciones()"\r\n          [metaKeySelection]="true" (onFilter)="onFilterTabla($event)">\r\n\r\n          <ng-template pTemplate="caption">\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group">\r\n                  <input [(ngModel)]="filtroGlobal" type="text" class="form-control form-control-sm input-filter" style="font-family: Arial, FontAwesome"\r\n                    placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (keydown)="verificarFiltros($event,dt,\'TECLAS\')"\r\n                    (blur)="verificarFiltros(null,dt,\'BLUR\')">\r\n                  <div class="input-group-append">\r\n                    <button class="btn btn-sm btn-primary" (click)="verificarFiltros(null,dt,\'CLICK\')" type="button"> <i\r\n                        class="{{constantes.ICON_BUSCAR}}"></i></button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div style="float:right">\r\n                  <p-multiSelect [options]="columnas" [(ngModel)]="columnasSeleccionadas" maxSelectedLabels="1" optionLabel="header" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n                    defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate="colgroup" let-columns *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col *ngFor="let col of columns" [style.width]="col.width">\r\n              <col style="width:20%">\r\n            </colgroup>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate="header" let-columns>\r\n            <tr class="text-center">\r\n              <th *ngFor="let col of columns" pResizableColumn [pSortableColumn]="col.field">\r\n                {{col.header}}\r\n                <p-sortIcon [field]="col.field"></p-sortIcon>\r\n              </th>\r\n              <th class="text-md-center text-sm-center">\r\n                <i class="{{constantes.ICON_OPCIONES}}" placement="top" ngbTooltip="{{constantes.TAG_OPCIONES}}"></i>\r\n              </th>\r\n            </tr>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate="body" let-rowData let-columns="columns" let-index="rowIndex">\r\n            <tr tabindex="{{index}}" [pSelectableRow]="rowData" [pContextMenuRow]="rowData" (click)="indexTable = index" [ngClass]="{ \'table-condensed\':true,\'ui-state-highlight\': indexTable === index}">\r\n              <td *ngFor="let col of columns" class="ui-resizable-column ocultar-en-tabla">\r\n                <span class="ui-column-title">{{col.header}}</span>\r\n                <span>{{rowData[col.field]}}</span>\r\n              </td>\r\n              \x3c!--OPCIONES--\x3e\r\n              <td class="text-md-center text-sm-center" style="width:20%">\r\n                <span class="ui-column-title">{{constantes.TAG_OPCIONES}}</span>\r\n                <button id="opciones_{{index}}" type="button" class="btn btn-primary btn-sm pb-0 pt-0" placement="top" ngbTooltip="{{constantes.TAG_OPCIONES}}"\r\n                  container="body" (click)="objetoSeleccionado=rowData;generarOpciones();men.show($event);$event.stopPropagation()">\r\n                  <i class="{{constantes.ICON_OPCIONES}}"></i>\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <p-contextMenu #men [model]="opciones" appendTo="body"></p-contextMenu>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"O+m5":function(t,i){t.exports=""},bSED:function(t,i){t.exports=""},dWhJ:function(t,i){t.exports=""},fmiB:function(t,i){t.exports='<div class="row" *ngIf="showIndex">\r\n    <div class="col-lg-5 col-md-4 pt-5">\r\n        <h1 class="text-center">Lo m\xe1s usado:</h1>\r\n        <div class="form-group form-group-sm text-center" *ngFor="let acceso of listaAccesoRapido">\r\n            <a routerLink="{{acceso.url}}" *ngIf="acceso.mostrar">\r\n                <button type="button" class="btn btn-primary btn-ancho-250"> {{acceso.item}}</button>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class="col-lg-7 col-md-8">\r\n        <div class="text-center">\r\n            <img src="assets/images/activoFijo.png" class="img-thumbnail">\r\n        </div>\r\n    </div>\r\n</div>\r\n<router-outlet></router-outlet>'},mv7x:function(t,i){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class=" {{classTitulo}}"></i>\r\n        <b>{{frmTitulo}}</b>\r\n      </div>\r\n\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmDepreciacionMotivo=\'ngForm\' name="frmDepreciacionMotivo">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada" (ngModelChange)="cambiarEmpresaSeleccionada()"\r\n              [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}} ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n        \x3c!--FORMULARIO OPERACIONES--\x3e\r\n        \x3c!--FORMULARIO OPERACIONES--\x3e\r\n        <form #frmDatos=\'ngForm\' autocomplete="off">\r\n          <div *ngIf="accion && accion !== constantes.ACCION_ELIMINAR">\r\n\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label">\r\n                <strong>{{constantes.TAG_UBICACION}}</strong>\r\n                &nbsp;\r\n                <a (click)="listarUbicaciones()">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_UBICACIONES}}" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="ubi" [(ngModel)]="ubicacionSeleccionado" required>\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="ubi" *ngFor="let ubi of listaUbicaciones"> {{ubi?.ubiDescripcion}} ({{ubi?.ubiCodigo}}\r\n                  )</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label">\r\n                <strong>{{constantes.TAG_TIPO_COMPROBANTES}}</strong>\r\n                &nbsp;\r\n                <a (click)="listarTipos()">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_TIPOS_COMPROBANTES}}" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="tipo" [(ngModel)]="tipoSeleccionado" required>\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="tipo" *ngFor="let tipo of listaTipos"> {{tipo?.tipDetalle}} ({{tipo?.tipCodigo}} )</option>\r\n              </select>\r\n            </div>\r\n\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n\r\n      <div class="card-footer" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <button type="button" id="btnBuscarDepreciacionMotivo" class="btn btn-sm btn-primary mr-1" (click)="listarDepreciacionMotivo()">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n          </button>\r\n\r\n          <button type="button" id="btnNuevoDepreciacionMotivo" class="btn btn-sm btn-primary" (click)="operacionesMotivoDepreciacion(constantes.ACCION_CREAR)">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-footer" *ngIf="accion && accion !== constantes.ACCION_ELIMINAR">\r\n        <div class="text-right">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarDepreciacionMotivo" (click)="insertarDepreciacionMotivo(frmDatos)"\r\n            *ngIf="accion === constantes.ACCION_CREAR">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarDepreciacionMotivo" (click)="actualizarDepreciacionMotivo(frmDatos)"\r\n            *ngIf="accion === constantes.ACCION_EDITAR">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button type="button" class="btn btn-sm btn-default" id="btnCancelarDepreciacionMotivo" (click)="resetearFormulario()">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listadoResultado?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarDepreciacionMotivo" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.ACTIVO_FIJO_MOTIVO_DEPRECIACION_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirDepreciacionMotivo" (click)="imprimirDepreciacionMotivo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarDepreciacionMotivo" (click)="exportarDepreciacionMotivo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirDepreciacionMotivo" (click)="imprimirDepreciacionMotivo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarDepreciacionMotivo" (click)="exportarDepreciacionMotivo()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <p-table #dt [appRowSelector]="indexTable" [appIndexLimit]="listadoFiltrado?.length" (updateIndex)="indexTable = $event"\r\n          (updateFiltro)="filtrarGlobalmente(dt, true)" [columns]="columnasSeleccionadas" [value]="listadoResultado" [scrollable]="true"\r\n          scrollHeight="calc(100vh - 245px)" [resizableColumns]="true" [responsive]="true" [(contextMenuSelection)]="objetoSeleccionado"\r\n          [contextMenu]="men" selectionMode="single" [(selection)]="objetoSeleccionado" (onContextMenuSelect)="generarOpciones()"\r\n          [metaKeySelection]="true" (onFilter)="onFilterTabla($event)">\r\n\r\n          <ng-template pTemplate="caption">\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group">\r\n                  <input [(ngModel)]="filtroGlobal" type="text" class="form-control form-control-sm input-filter" style="font-family: Arial, FontAwesome"\r\n                    placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (keydown)="verificarFiltros($event,dt,\'TECLAS\')"\r\n                    (blur)="verificarFiltros(null,dt,\'BLUR\')">\r\n                  <div class="input-group-append">\r\n                    <button class="btn btn-sm btn-primary" (click)="verificarFiltros(null,dt,\'CLICK\')" type="button"> <i\r\n                        class="{{constantes.ICON_BUSCAR}}"></i></button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div style="float:right">\r\n                  <p-multiSelect [options]="columnas" [(ngModel)]="columnasSeleccionadas" maxSelectedLabels="1" optionLabel="header" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n                    defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate="colgroup" let-columns *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col *ngFor="let col of columns" [style.width]="col.width">\r\n              <col style="width:20%">\r\n            </colgroup>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate="header" let-columns>\r\n            <tr class="text-center">\r\n              <th *ngFor="let col of columns" pResizableColumn [pSortableColumn]="col.field">\r\n                {{col.header}}\r\n                <p-sortIcon [field]="col.field"></p-sortIcon>\r\n              </th>\r\n              <th class="text-md-center text-sm-center">\r\n                <i class="{{constantes.ICON_OPCIONES}}" placement="top" ngbTooltip="{{constantes.TAG_OPCIONES}}"></i>\r\n              </th>\r\n            </tr>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate="body" let-rowData let-columns="columns" let-index="rowIndex">\r\n            <tr tabindex="{{index}}" [pSelectableRow]="rowData" [pContextMenuRow]="rowData" (click)="indexTable = index" [ngClass]="{ \'table-condensed\':true,\'ui-state-highlight\': indexTable === index}">\r\n              <td *ngFor="let col of columns" class="ui-resizable-column ocultar-en-tabla">\r\n                <span class="ui-column-title">{{col.header}}</span>\r\n                <span>{{rowData[col.field]}}</span>\r\n              </td>\r\n              \x3c!--OPCIONES--\x3e\r\n              <td class="text-md-center text-sm-center" style="width:20%">\r\n                <span class="ui-column-title">{{constantes.TAG_OPCIONES}}</span>\r\n                <button id="opciones_{{index}}" type="button" class="btn btn-primary btn-sm pb-0 pt-0" placement="top" ngbTooltip="{{constantes.TAG_OPCIONES}}"\r\n                  container="body" (click)="objetoSeleccionado=rowData;generarOpciones();men.show($event);$event.stopPropagation()">\r\n                  <i class="{{constantes.ICON_OPCIONES}}"></i>\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #men [model]="opciones" appendTo="body"></p-contextMenu>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"y+2V":function(t,i){t.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class=" {{classTitulo}}"></i>\r\n        <b>{{frmTitulo}}</b>\r\n      </div>\r\n\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmGrupoClasificacion=\'ngForm\' name="frmGrupoClasificacion">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada" (ngModelChange)="cambiarEmpresaSeleccionada()"\r\n              [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}} ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n        \x3c!--FORMULARIO OPERACIONES--\x3e\r\n        <form #frmDatos=\'ngForm\' autocomplete="off">\r\n          <div *ngIf="accion && accion !== constantes.ACCION_ELIMINAR && accion !== constantes.ACCION_EDITAR_ESTADO">\r\n\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CODIGO}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="afCategoriasTO.catCodigo"\r\n                pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                class="form-control input-sm mousetrap text-uppercase" required maxlength="20" appUppercase [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback" placement="right" rs="mouseenter:mouseleave"\r\n                ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body"></span>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DESCRIPCION}}</b>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap text-uppercase" name="detalle"\r\n                maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="afCategoriasTO.catDescripcion"\r\n                id="detalle" required appUppercase [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm" [ngClass]="{ \'has-error\':!vidaUtilValido}">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_VIDA_UTIL}}</b>\r\n              </label>\r\n              <input class="form-control form-control-sm mousetrap text-uppercase text-right" name="vidaUtil" maxlength="3" type="text"\r\n                placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="afCategoriasTO.catVidaUtil" id="vidaUtil" required\r\n                [disabled]="accion === constantes.ACCION_CONSULTAR" pKeyFilter="pint" (keypress)="soloNumeros($event)" (blur)="validarVidaUtil()">\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm" [ngClass]="{ \'has-error\':!porcentajeValido}">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_PORCENTAJE_DEPRECIACION}}</b>\r\n              </label>\r\n              <input type="text" name="catPorcentajeDepreciacion" [appAutonumeric]="configAutonumeric" [appAutonumericValue]="afCategoriasTO.catPorcentajeDepreciacion"\r\n                value="{{afCategoriasTO.catPorcentajeDepreciacion}}" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="afCategoriasTO.catPorcentajeDepreciacion"\r\n                class="form-control form-control-sm text-uppercase mousetrap text-right" required [disabled]="accion === constantes.ACCION_CONSULTAR"\r\n                (blur)="validarPorcentaje()">\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CUENTA_ACTIVO}}</b>\r\n              </label>\r\n              <input class="form-control form-control-sm mousetrap text-uppercase" name="cuentaActivo" maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [(ngModel)]="afCategoriasTO.catCuentaActivo" id="cuentaActivo" required appUppercase (blur)="validarCuentaActivo()"\r\n                (keydown)="buscarCuentaActivo($event)" #catCuentaActivo [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n              <span *ngIf="accion !== constantes.ACCION_CONSULTAR" class="fa fa-question-circle form-control-feedback" triggers="mouseenter:mouseleave"\r\n                placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_CUENTA}}" container="body"></span>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CUENTA_DEPRECIACION}}</b>\r\n              </label>\r\n              <input class="form-control form-control-sm mousetrap text-uppercase" name="cuentaDepreciacion" maxlength="150" type="text"\r\n                placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="afCategoriasTO.catCuentaDepreciacion" id="cuentaDepreciacion"\r\n                required appUppercase (blur)="validarCuentaDepreciacion()" (keydown)="buscarCuentaDepreciacion($event)" #catCuentaDepreciacion\r\n                [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n              <span *ngIf="accion !== constantes.ACCION_CONSULTAR" class="fa fa-question-circle form-control-feedback" triggers="mouseenter:mouseleave"\r\n                placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_CUENTA}}" container="body"></span>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CUENTA_DEPRECIACION_ACUMULADO}}</b>\r\n              </label>\r\n              <input class="form-control form-control-sm mousetrap text-uppercase" name="cuentaDepreciacionAcumulado" maxlength="150" type="text"\r\n                placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="afCategoriasTO.catCuentaDepreciacionAcumulada" id="cuentaDepreciacionAcumulado"\r\n                required appUppercase (blur)="validarCuentaDepreciacionAcumulado()" (keydown)="buscarCuentaDepreciacionAcum($event)"\r\n                #catCuentaDepreciacionAcumulada [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n              <span *ngIf="accion !== constantes.ACCION_CONSULTAR" class="fa fa-question-circle form-control-feedback" triggers="mouseenter:mouseleave"\r\n                placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_CUENTA}}" container="body"></span>\r\n            </div>\r\n\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div class="card-footer" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscarGrupoClasificacion" class="btn btn-sm btn-primary" (click)="listarGrupoClasificacion(true)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="listarGrupoClasificacion(false)"> {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n\r\n          <button type="button" id="btnNuevoGrupoClasificacion" class="btn btn-sm btn-primary" (click)="operacionesGrupoClasificacion(constantes.ACCION_CREAR)">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-footer" *ngIf="accion && accion !== constantes.ACCION_ELIMINAR  && accion !== constantes.ACCION_EDITAR_ESTADO">\r\n        <div class="text-right">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarGrupoClasificacion" (click)="insertarGrupoClasificacion(frmDatos)"\r\n            *ngIf="accion === constantes.ACCION_CREAR">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarGrupoClasificacion" (click)="actualizarGrupoClasificacion(frmDatos)"\r\n            *ngIf="accion === constantes.ACCION_EDITAR">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button type="button" class="btn btn-sm btn-default" id="btnCancelarGrupoClasificacion" (click)="resetearFormulario()">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listadoResultado?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarGrupoClasificacion" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.ACTIVO_FIJO_GRUPO_CLASIFICACION_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirGrupoClasificacion" (click)="imprimirGrupoClasificacion()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarGrupoClasificacion" (click)="exportarGrupoClasificacion()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirGrupoClasificacion" (click)="imprimirGrupoClasificacion()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarGrupoClasificacion" (click)="exportarGrupoClasificacion()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName" maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n                defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham" [rowData]="listadoResultado"\r\n          [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n          [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n          (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'}}]);