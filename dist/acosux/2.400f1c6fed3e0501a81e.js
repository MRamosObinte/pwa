(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+SCY":function(e,t){e.exports=""},"+q+w":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.pmEmpresa="",this.pmCodigo="",this.pmSector="",this.pmDetalle="",this.pmLunes=!1,this.pmMartes=!1,this.pmMiercoles=!1,this.pmJueves=!1,this.pmViernes=!1,this.pmSabado=!1,this.pmDomingo=!1,this.pmHoraInicio=null,this.pmHoraFin=null,this.pmInactivo=!1,this.usrCodigo="",this.usrFechaInserta=null,this.pmAprobacionAutomatica=!1,this.pmExigirCliente=!1,this.pmNotificarAprobador=!1,this.pmNotificarRegistrador=!1,this.pmNotificarEjecutor=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.pmEmpresa=e.pmEmpresa?e.pmEmpresa:this.pmEmpresa,this.pmCodigo=e.pmCodigo?e.pmCodigo:this.pmCodigo,this.pmSector=e.pmSector?e.pmSector:this.pmSector,this.pmDetalle=e.pmDetalle?e.pmDetalle:this.pmDetalle,this.pmLunes=e.pmLunes?e.pmLunes:this.pmLunes,this.pmMartes=e.pmMartes?e.pmMartes:this.pmMartes,this.pmMiercoles=e.pmMiercoles?e.pmMiercoles:this.pmMiercoles,this.pmJueves=e.pmJueves?e.pmJueves:this.pmJueves,this.pmViernes=e.pmViernes?e.pmViernes:this.pmViernes,this.pmSabado=e.pmSabado?e.pmSabado:this.pmSabado,this.pmDomingo=e.pmDomingo?e.pmDomingo:this.pmDomingo,this.pmHoraInicio=e.pmHoraInicio?e.pmHoraInicio:this.pmHoraInicio,this.pmHoraFin=e.pmHoraFin?e.pmHoraFin:this.pmHoraFin,this.pmInactivo=e.pmInactivo?e.pmInactivo:this.pmInactivo,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.pmAprobacionAutomatica=e.pmAprobacionAutomatica?e.pmAprobacionAutomatica:this.pmAprobacionAutomatica,this.pmExigirCliente=e.pmExigirCliente?e.pmExigirCliente:this.pmExigirCliente,this.pmNotificarAprobador=e.pmNotificarAprobador?e.pmNotificarAprobador:this.pmNotificarAprobador,this.pmNotificarRegistrador=e.pmNotificarRegistrador?e.pmNotificarRegistrador:this.pmNotificarRegistrador,this.pmNotificarEjecutor=e.pmNotificarEjecutor?e.pmNotificarEjecutor:this.pmNotificarEjecutor},e}()},"+q7i":function(e,t){e.exports="tr.ui-state-highlight td.ui-resizable-column input{\r\n    color: white;\r\n}\r\ntr td.ui-resizable-column input{\r\n    color: black;\r\n}"},"+qE3":function(e,t){function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},o.prototype.emit=function(e){var t,o,n,s,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(r(o=this._events[e]))return!1;if(a(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),o.apply(this,s)}else if(i(o))for(s=Array.prototype.slice.call(arguments,1),n=(l=o.slice()).length,c=0;c<n;c++)l[c].apply(this,s);return!0},o.prototype.addListener=function(e,t){var n;if(!a(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(n=r(this._maxListeners)?o.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(e,t){if(!a(t))throw TypeError("listener must be a function");var o=!1;function i(){this.removeListener(e,i),o||(o=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},o.prototype.removeListener=function(e,t){var o,r,n,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=(o=this._events[e]).length,r=-1,o===t||a(o.listener)&&o.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(o)){for(s=n;s-- >0;)if(o[s]===t||o[s].listener&&o[s].listener===t){r=s;break}if(r<0)return this;1===o.length?(o.length=0,delete this._events[e]):o.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},o.prototype.removeAllListeners=function(e){var t,o;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a(o=this._events[e]))this.removeListener(e,o);else if(o)for(;o.length;)this.removeListener(e,o[o.length-1]);return delete this._events[e],this},o.prototype.listeners=function(e){return this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},o.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},o.listenerCount=function(e,t){return e.listenerCount(t)}},"/8RF":function(e,t){e.exports='<div class="row" *ngIf="!mostrarKardex">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <b>\r\n          <i class="{{constantes.ICON_FILTRAR}}"></i> {{constantes.TITULO_FILTROS}}\r\n        </b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frm=\'ngForm\' name="frm">\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarBodegas()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionado"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre"\r\n              optionLabel="bodNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{bodegaSeleccionado?.bodNombre}} ( {{bodegaSeleccionado?.bodCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n            </label>\r\n            <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta"\r\n              (ngModelChange)="limpiarResultado();" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" class="btn btn-sm btn-primary mr-2 " id="btnBuscarSaldoBodega" (click)="buscarSaldoBodega(frm)">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultadoSaldoBodega.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarSaldoBodega" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_SALDO_BODEGA_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirSaldoBodega" (click)="imprimirSaldoBodega()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarSaldoBodega" (click)="exportarSaldoBodega()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirSaldoBodega" (click)="imprimirSaldoBodega()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarSaldoBodega" (click)="exportarSaldoBodega()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultadoSaldoBodega" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          (rowSelected)="saldoBodegaSeleccionada = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (cellDoubleClicked)="saldoBodegaSeleccionada = $event.node.data; consultarKardex()" [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)"\r\n          (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div *ngIf="mostrarKardex && objetoDesdeFuera">\r\n  <app-kardex [objetoDesdeFuera]="objetoDesdeFuera" (cerrarKardex)="cerrarKardex($event)"></app-kardex>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"/LET":function(e,t){e.exports=""},"/lcP":function(e,t,o){"use strict";var a=function(){function e(e){this.consEmpresa=null,this.consPeriodo=null,this.consMotivo=null,this.consNumero=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.consEmpresa=e.consEmpresa?e.consEmpresa:this.consEmpresa,this.consPeriodo=e.consPeriodo?e.consPeriodo:this.consPeriodo,this.consMotivo=e.consMotivo?e.consMotivo:this.consMotivo,this.consNumero=e.consNumero?e.consNumero:this.consNumero},e}(),i=o("SxCF");o.d(t,"a",function(){return r});var r=function(){function e(e){this.invConsumosPK=new a,this.consReferencia="",this.consFecha=null,this.consObservaciones="",this.consPendiente=!1,this.consRevisado=!1,this.consAnulado=!1,this.conEmpresa="",this.conPeriodo="",this.conTipo="",this.conNumero="",this.usrEmpresa="",this.usrCodigo="",this.consCodigo=null,this.usrFechaInserta=null,this.invBodega=new i.a,this.invConsumosDetalleList=[],this.invConsumosMotivoAnulacionList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invConsumosPK=e.invConsumosPK?e.invConsumosPK:this.invConsumosPK,this.consReferencia=e.consReferencia?e.consReferencia:this.consReferencia,this.consFecha=e.consFecha?e.consFecha:this.consFecha,this.consObservaciones=e.consObservaciones?e.consObservaciones:this.consObservaciones,this.consPendiente=e.consPendiente?e.consPendiente:this.consPendiente,this.consRevisado=e.consRevisado?e.consRevisado:this.consRevisado,this.consAnulado=e.consAnulado?e.consAnulado:this.consAnulado,this.conEmpresa=e.conEmpresa?e.conEmpresa:this.conEmpresa,this.conPeriodo=e.conPeriodo?e.conPeriodo:this.conPeriodo,this.conTipo=e.conTipo?e.conTipo:this.conTipo,this.conNumero=e.conNumero?e.conNumero:this.conNumero,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.consCodigo=e.consCodigo?e.consCodigo:this.consCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invBodega=e.invBodega?e.invBodega:this.invBodega,this.invConsumosDetalleList=e.invConsumosDetalleList?e.invConsumosDetalleList:this.invConsumosDetalleList,this.invConsumosMotivoAnulacionList=e.invConsumosMotivoAnulacionList?e.invConsumosMotivoAnulacionList:this.invConsumosMotivoAnulacionList},e}()},"/qCj":function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("nR5P"),r=o("z5Y/"),n=o("SZbH"),s=o("jEGE"),c=o("EF/R"),l=o("mwBN"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listarInvProductoTipoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvProductoTipoComboListadoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvProductoTipoTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.formatearInvProductoTipoTO=function(e,t){var o=new s.a(e);return o.tipActivo=!0,o.usrEmpresa=t.empresaSeleccionada.empCodigo,o.tipEmpresa=t.empresaSeleccionada.empCodigo,t.accion===l.a.ACCION_CREAR&&(o.usrCodigo=this.auth.getCodigoUser(),o.usrFechaInserta=null),o},e.prototype.generarColumnas=function(e){return[{headerName:l.a.TAG_CODIGO,field:"tipCodigo",width:100,minWidth:100},{headerName:l.a.TAG_DETALLE,field:"tipDetalle",width:250,minWidth:250},{headerName:l.a.TAG_TIPO,field:"tipTipo",width:100,minWidth:100},e?null:this.utilService.getColumnaOpciones()]},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[r.a,n.b,i.a,c.a])],e)}()},"06/f":function(e,t){e.exports='<div class="modal-primary">\r\n  <div class="modal-header p-2">\r\n    <h4 class="modal-title">{{titulo}}</h4>\r\n    <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n\r\n  <div class="modal-body pb-0 pt-1">\r\n    <div class="row">\r\n      <div class="col-sm-8 col-md-8 pr-0">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" name="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-4 col-md-4 pl-0">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" name="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-12 col-md-12">\r\n        <div style="float: right">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" (click)="exportar()" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \x3c!--Tabla--\x3e\r\n    <div class="row p-3" *ngIf="parametros.length > 0">\r\n      <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 303px);" class="ag-theme-balham"\r\n        [rowData]="parametros" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n        [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n        (gridReady)="onGridReady($event)" (gridColumnsChanged)="redimensionarColumnas()" (gridSizeChanged)="redimensionarColumnas()">\r\n      </ag-grid-angular>\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"080d":function(e,t){e.exports='<div class="modal-primary">\r\n  <div class="modal-header p-2">\r\n    <h4 class="modal-title">{{constantes.INVENTARIO_PROVEEDORES_LISTADO}}</h4>\r\n    <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class="modal-body p-0" *ngIf="listaResultado?.length > 0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}...">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 250px);" class="ag-theme-balham"\r\n      [rowData]="listaResultado" [columnDefs]="columnDefs" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n      [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n      [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n      (rowSelected)="objectSelect = $event.node.data" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="enviarItem(objectSelect)">\r\n    </ag-grid-angular>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"0QfJ":function(e,t){e.exports=""},"0cNW":function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarPeriodos=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/getListaSisPeriodos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarPeriodos(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.despuesDeListarPeriodos([])),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerSisPeriodo=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/obtenerSisPeriodo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerSisPeriodo(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getPeriodoPorFecha=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/getPeriodoPorFecha",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetPeriodoPorFecha(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.despuesDeGetPeriodoPorFecha(null)),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[i.a,r.b,n.a])],e)}()},"0dX5":function(e,t,o){"use strict";var a=function(){function e(e){this.tipCodigo="",this.tipEmpresa="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.tipCodigo=e?e.tipCodigo:this.tipCodigo,this.tipEmpresa=e?e.tipEmpresa:this.tipEmpresa},e}();o.d(t,"a",function(){return i});var i=function(){function e(e){this.conTipoPK=new a,this.tipDetalle=null,this.tipInactivo=!1,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.conTipoPK=e.conTipoPK?e.conTipoPK:this.conTipoPK,this.tipDetalle=e.tipDetalle?e.tipDetalle:this.tipDetalle,this.tipInactivo=e.tipInactivo?e.tipInactivo:this.tipInactivo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},"1Avo":function(e,t){e.exports='<div *ngIf="vistaFormulario">\r\n  <div class="card m-0">\r\n    <div class="card-header p-1">\r\n      <button id="btnActivarFormOrdenCompra" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="cambiarActivar()"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <strong>\r\n        {{ frmTitulo }}:\r\n        <span *ngIf="accion !== constantes.ACCION_EJECUTAR">\r\n          {{invPedidosOrdenCompra.invPedidosOrdenCompraPK.ocNumero}}\r\n        </span>\r\n        <span class="text-primary">{{ empresaSeleccionada.empNombre }}</span>\r\n      </strong>\r\n      <div class="card-header-actions">\r\n        \x3c!--  BOTONES   --\x3e\r\n        <div class="btn-group">\r\n          \x3c!-- Anular --\x3e\r\n          <button id="btnAnularOrdenCompra" *ngIf="accion===constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n            placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anularOrdenCompra()">\r\n            <i class="{{constantes.ICON_ANULAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n          </button>\r\n          \x3c!-- Aprobar --\x3e\r\n          <button id="btnAprobarOrdenCompra" *ngIf="accion===constantes.ACCION_APROBAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n            placement="top" ngbTooltip="{{constantes.ACCION_APROBAR}}" (click)="aprobarOrdenCompra()">\r\n            <i class="{{constantes.ICON_APROBAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.ACCION_APROBAR}}</span>\r\n          </button>\r\n          \x3c!-- Ejecutor --\x3e\r\n          <button id="btnGuardarOrdenCompra" *ngIf="accion===constantes.ACCION_EJECUTAR && funcionesUsuario.indexOf(\'Ejecutor\')>-1"\r\n            type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_GENERAR}}"\r\n            (click)="guardarOrdenCompra(frmOrdenCompra)">\r\n            <i class="{{constantes.ICON_EJECUTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_GENERAR}} </span>\r\n          </button>\r\n          \x3c!--Reporte--\x3e\r\n          <button *ngIf="accion === constantes.ACCION_CONSULTAR && !invPedidosOrdenCompra.ocAnulado" id="btnImprimirOrdenCompra"\r\n            type="button" class="btn btn-sm btn-primary mr-1" (click)="imprimirOrdenCompra()" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar || cargando">\r\n            <i class="fa fa-print" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button *ngIf="accion === constantes.ACCION_CONSULTAR && !invPedidosOrdenCompra.ocAnulado" id="btnExportarOrdenCompra"\r\n            type="button" class="btn btn-sm btn-primary mr-1" (click)="exportarOrdenCompra()" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_EXPORTAR}}" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar || cargando">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n          \x3c!--Cancelar--\x3e\r\n          <button *ngIf="!(accion===constantes.ACCION_CONSULTAR) && accion!=constantes.ACCION_CARRITO" id="btnCancelar"\r\n            type="button" class="btn btn-sm btn-default mr-1" (click)="cancelarAccion()" placement="top" ngbTooltip="{{constantes.LABEL_CANCELAR}}"\r\n            title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n          </button>\r\n          <button *ngIf="accion===constantes.ACCION_CONSULTAR || accion===constantes.ACCION_CARRITO" id="btnCancelar"\r\n            type="button" class="btn btn-sm btn-default mr-1" (click)="cancelarAccion()" placement="top" ngbTooltip="{{constantes.LABEL_REGRESAR}}"\r\n            title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="card-body p-1">\r\n\r\n      <form #frmOrdenCompra="ngForm" autocomplete="off">\r\n        \x3c!--Informacion general de orden de compra --\x3e\r\n        <fieldset *ngIf="accion!=constantes.ACCION_CARRITO" [disabled]="accion===constantes.ACCION_CONSULTAR || accion===constantes.ACCION_ANULAR || accion===constantes.ACCION_APROBAR">\r\n          <div class="card mb-1" [ngClass]="{\'card-accent-default\': invPedidosOrdenCompra.ocAnulado}" *ngIf="!cargando">\r\n            <div class="card-header">\r\n              <strong>{{ constantes.TAG_DATOS_GENERALES }} : {{constantes.TAG_ORDEN_COMPRA}}\r\n                <span *ngIf="accion !== constantes.ACCION_EJECUTAR">\r\n                  No. {{invPedidosOrdenCompra.invPedidosOrdenCompraPK.ocNumero}}</span>\r\n              </strong>\r\n              <div class="card-header-actions">\r\n                <span *ngIf="invPedidosOrdenCompra.ocAnulado" class="mr-2 badge badge-pill badge-default">{{constantes.ETIQUETA_ANULADO}}</span>\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionOrden"\r\n                  aria-expanded="true" placement="left" ngbTooltip="Ocultar/Mostrar" (click)="collpase()">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionOrden">\r\n              <div class="row">\r\n                <div class="col-md-3 col-sm-6">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_MOTIVO}}</b>&nbsp;\r\n                      <a *ngIf="accion === constantes.ACCION_EJECUTAR" (click)="listarMotivosOC()">\r\n                        <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                          container="body"></span>\r\n                      </a>\r\n                    </label>\r\n                    <select class="form-control input-sm" style="height: calc(2.0625rem + 7px);" name="motivoSeleccionada"\r\n                      [(ngModel)]="motivoOCSeleccionado" required [disabled]="accion===constantes.ACCION_CONSULTAR || accion===constantes.ACCION_ANULAR"\r\n                      (change)="establecerPrecioReferencial();">\r\n                      <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                      <option selected [ngValue]="mot" *ngFor="let mot of listadoMotivoOC">{{mot.ocmDetalle}}\r\n                        ({{mot.ocmCodigo}})</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3 col-sm-6">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label mb-2">\r\n                      <strong>{{constantes.TAG_FECHA}}</strong>\r\n                    </label>\r\n                    <p-calendar name="ocFecha" [(ngModel)]="invPedidosOrdenCompra.ocFechaEmision" [showIcon]="true"\r\n                      [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [maxDate]="fechaActual" [appMaxDate]="fechaActual"\r\n                      [required]="true"></p-calendar>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3 col-sm-6">\r\n                  <div class="form-group form-group-sm has-feedback">\r\n                    <label class="control-label mb-2">\r\n                      <strong>{{constantes.TAG_PROVEEDOR}}</strong>\r\n                    </label>\r\n                    <input id="provCodigo" name="provCodigo" [(ngModel)]="invPedidosOrdenCompra.invProveedor.invProveedorPK.provCodigo"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      maxlength="500" required (keydown)="buscarProveedor($event)" (blur)="validarProveedor()"\r\n                      appUppercase>\r\n                    <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n                      triggers="mouseenter:mouseleave" container="body"></span>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3 col-sm-6">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label mb-2">\r\n                      <strong>{{constantes.TAG_PROVEEDOR}}\r\n                        <span class="text-lowecase">{{constantes.TAG_RAZON_SOCIAL}}</span>\r\n                      </strong>\r\n                    </label>\r\n                    <input name="provRazonSocial" [(ngModel)]="proveedorCopia.provRazonSocial" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      readonly>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-md-3 col-sm-6">\r\n\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_COSTO_REFERENCIAL}}</b>&nbsp;\r\n                      <a *ngIf="accion === constantes.ACCION_EJECUTAR" (click)="obtenerEtiquetas()">\r\n                        <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.TAG_RECARGAR}}"\r\n                          container="body"></span>\r\n                      </a>\r\n                      &nbsp;\r\n                      <a *ngIf="accion != constantes.ACCION_CONSULTAR && listadoEtiquetas?.length === 0" (click)="configurarEtiquetas()">\r\n                        <span class="{{constantes.ICON_CONFIGURACION}}" placement="top" ngbTooltip="{{constantes.TAG_CONFIGURAR}}"\r\n                          container="body"></span>\r\n                      </a>\r\n                    </label>\r\n                    <select [compareWith]="inicializarCostoReferencial" class="form-control input-sm text-uppercase"\r\n                      style="height: calc(2.0625rem);" name="etiqueta" [(ngModel)]="etiquetaSeleccionada" required\r\n                      (change)="establecerPrecioReferencial();">\r\n                      <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                      <option selected [ngValue]="etiqueta" *ngFor="let etiqueta of listadoEtiquetas">{{etiqueta.value}}</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3 col-sm-6" *ngIf="!invPedidosOrdenCompra.invCliente?.invClientePK?.cliCodigo">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA_HORA_ENTREGA}}</b>\r\n                    </label>\r\n                    <p-calendar name="pedidoFechaHora" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                      [showIcon]="true" [(ngModel)]="invPedidosOrdenCompra.ocFechaHoraEntrega" showTime="true" disabled></p-calendar>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-6 col-sm-6" *ngIf="!invPedidosOrdenCompra.invCliente?.invClientePK?.cliCodigo">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_OBSERVACIONES}}</b>\r\n                    </label>\r\n                    <input name="ocObservacionesRegistra" [(ngModel)]="invPedidosOrdenCompra.ocObservacionesRegistra"\r\n                      class="form-control form-control-sm text-uppercase" appUppercase>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \x3c!--Informacion de cliente--\x3e\r\n          <div class="card mb-1" *ngIf="invPedidosOrdenCompra.invCliente && invPedidosOrdenCompra.invCliente.invClientePK.cliCodigo">\r\n            <div class="card-header">\r\n              <strong>{{ constantes.TAG_DATOS_CLIENTE }}<span class="text-primary">: {{\r\n                  invPedidosOrdenCompra.invCliente.cliRazonSocial}}</span></strong>\r\n              <div class="card-header-actions">\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionCliente"\r\n                  aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}" (click)="collpaseCliente()">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionCliente">\r\n              <div class="row">\r\n                \x3c!--Orden de compra--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <strong>{{constantes.TAG_ORDEN_COMPRA_DE_CLIENTE}} </strong>\r\n                    </label>\r\n                    <label class="form-control form-control-sm label-input">{{ordenDeCompra}}</label>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_CODIGO_CLIENTE}}</b>\r\n                    </label>\r\n                    <label class="form-control form-control-sm label-input">{{invPedidosOrdenCompra.invCliente.invClientePK.cliCodigo}}</label>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3" *ngIf="invPedidosOrdenCompra.invCliente.invClienteGrupoEmpresarial && invPedidosOrdenCompra.invCliente.invClienteGrupoEmpresarial.geNombre">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.INVENTARIO_GRUPO_EMPRESARIAL}}</b>\r\n                    </label>\r\n                    <label class="form-control form-control-sm label-input">{{invPedidosOrdenCompra.invCliente.invClienteGrupoEmpresarial.geNombre}}</label>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_CONTACTO_NOMBRE}}</b>\r\n                    </label>\r\n                    <label class="form-control form-control-sm label-input">{{invPedidosOrdenCompra.ocContactoNombre}}</label>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_TELEFONO}}</b>\r\n                    </label>\r\n                    <label class="form-control form-control-sm label-input">{{invPedidosOrdenCompra.ocContactoTelefono}}</label>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_LUGAR_ENTREGA}}</b>\r\n                    </label>\r\n                    <label class="form-control form-control-sm label-input">{{invPedidosOrdenCompra.ocLugarEntrega}}</label>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA_HORA_ENTREGA}}</b>\r\n                    </label>\r\n                    <p-calendar name="pedidoFechaHora" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                      [showIcon]="true" [(ngModel)]="invPedidosOrdenCompra.ocFechaHoraEntrega" showTime="true" disabled></p-calendar>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-6 col-sm-6">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_OBSERVACIONES}}</b>\r\n                    </label>\r\n                    <input name="ocObservacionesRegistra" [(ngModel)]="invPedidosOrdenCompra.ocObservacionesRegistra"\r\n                      class="form-control form-control-sm text-uppercase" appUppercase>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </fieldset>\r\n        <div class="card mb-1" *ngIf="accion!=constantes.ACCION_CARRITO">\r\n          <div class="card-header">\r\n            <strong>{{constantes.PEDIDOS_ORDEN_COMPRA_DETALLE}}</strong>\r\n          </div>\r\n          <div class="card-body m-0 p-0">\r\n            <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listadoResultado"\r\n              [columnDefs]="columnDefs" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n              [enableColResize]="true" [context]="context" [frameworkComponents]="frameworkComponents" [rowDragManaged]="true"\r\n              [pinnedBottomRowData]="pinnedBottomRowData" [animateRows]="true" [singleClickEdit]="true" [rowClassRules]="rowClassRules"\r\n              [stopEditingWhenGridLosesFocus]="true" [overlayNoRowsTemplate]="noData" [singleClickEdit]="true"\r\n              (cellValueChanged)="terminadoEditar($event)" (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n              (cellFocused)="filaFocused($event)" [suppressDragLeaveHidesColumns]="true" (gridColumnsChanged)="redimensionarColumnas()"\r\n              (gridSizeChanged)="redimensionarColumnas()">\r\n            </ag-grid-angular>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      \x3c!--Informacion general de orden de compra --\x3e\r\n      <div *ngIf="accion===constantes.ACCION_CARRITO">\r\n        <div *ngFor="let oc of ordenesDeCompra">\r\n          <div class="card mb-1">\r\n            <div class="card-header text-white bg-primary">\r\n              <strong>{{constantes.TAG_ORDEN_COMPRA}} No. {{oc.invPedidosOrdenCompraPK.ocNumero}}</strong>\r\n              <div class="card-header-actions">\r\n                <span *ngIf="oc.ocAnulado" class="mr-2 badge badge-pill badge-default">{{constantes.ETIQUETA_ANULADO}}</span>\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" [attr.data-target]="\'#collapseInformacion\'+oc.invPedidosOrdenCompraPK.ocNumero"\r\n                  aria-expanded="true" placement="left" ngbTooltip="Ocultar/Mostrar">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse mt-0 mb-0 pt-1 pb-0 pl-1 pr-1" id="collapseInformacion{{oc.invPedidosOrdenCompraPK.ocNumero}}">\r\n              <div class="card mb-1" [ngClass]="{\'card-accent-default\': oc.ocAnulado}" *ngIf="!cargando">\r\n                <div class="card-header">\r\n                  <strong>{{ constantes.TAG_DATOS_GENERALES }}</strong>\r\n                  <div class="card-header-actions">\r\n                    <span *ngIf="oc.ocAnulado" class="mr-2 badge badge-pill badge-default">{{constantes.ETIQUETA_ANULADO}}</span>\r\n                    <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" [attr.data-target]="\'#collapseInformacionOrden\'+oc.invPedidosOrdenCompraPK.ocNumero"\r\n                      aria-expanded="true" placement="left" ngbTooltip="Ocultar/Mostrar">\r\n                      <i class="fa fa-minus"></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div class="card-body collapse mt-0 mb-0 pt-1 pb-0" id="collapseInformacionOrden{{oc.invPedidosOrdenCompraPK.ocNumero}}">\r\n                  <div class="row">\r\n                    <div class="col-md-3 col-sm-6">\r\n                      <div class="form-group form-group-sm">\r\n                        <label class="control-label mb-2"> <strong>{{constantes.TAG_MOTIVO}}</strong> </label>\r\n                        <label class="form-control form-control-sm label-input">{{oc.invPedidosOrdenCompraMotivo.ocmDetalle}}</label>\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-md-3 col-sm-6">\r\n                      <div class="form-group form-group-sm">\r\n                        <label class="control-label mb-2"> <strong>{{constantes.TAG_FECHA}}</strong> </label>\r\n                        <label class="form-control form-control-sm label-input">{{oc.ocFechaEmision}}</label>\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-md-3 col-sm-12">\r\n                      <div class="form-group form-group-sm has-feedback">\r\n                        <label class="control-label mb-2"> <strong>{{constantes.TAG_PROVEEDOR}}</strong> </label>\r\n                        <label class="form-control form-control-sm label-input">{{oc.invProveedor.invProveedorPK.provCodigo}}</label>\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-md-3 col-sm-12">\r\n                      <div class="form-group form-group-sm">\r\n                        <label class="control-label mb-2">\r\n                          <strong>{{constantes.TAG_PROVEEDOR}}\r\n                            <span class="text-lowecase">{{constantes.TAG_RAZON_SOCIAL}}</span>\r\n                          </strong>\r\n                        </label>\r\n                        <label class="form-control form-control-sm label-input">{{oc.invProveedor.provRazonSocial}}</label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row">\r\n                    <div class="col-md-12 col-sm-12">\r\n                      <div class="form-group form-group-sm">\r\n                        <label class="control-label"> <b>{{constantes.TAG_OBSERVACIONES}}</b> </label>\r\n                        <label class="form-control form-control-sm label-input">{{oc.ocObservacionesRegistra}}</label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card mb-1">\r\n                <div class="card-header">\r\n                  <strong>{{constantes.PEDIDOS_ORDEN_COMPRA_DETALLE}}</strong>\r\n                </div>\r\n                <div class="card-body m-0 p-0">\r\n                  <ag-grid-angular #agGrid id="agGrid" style="width: 100%;" class="ag-theme-balham" [rowData]="oc.invPedidosOrdenCompraDetalleList"\r\n                    [columnDefs]="columnDefs" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n                    [enableColResize]="true" [context]="context" [frameworkComponents]="frameworkComponents"\r\n                    [rowDragManaged]="true" [pinnedBottomRowData]="pinnedBottomRowData" [animateRows]="true"\r\n                    [overlayNoRowsTemplate]="noData" [gridAutoHeight]="true" [rowClassRules]="rowClassRules"\r\n                    [suppressDragLeaveHidesColumns]="true" (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n                    (cellValueChanged)="calcularTotal()" (gridSizeChanged)="redimensionarColumnas()">\r\n                  </ag-grid-angular>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"1GjU":function(e,t,o){"use strict";o.d(t,"a",function(){return m});var a=o("CcnG"),i=o("uPUy"),r=o("mwBN"),n=o("SxCF"),s=o("EF/R"),c=o("yccp"),l=o("qFWa"),d=o("nR5P"),p=o("FmtH"),u=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,o){this.auth=e,this.atajoService=t,this.utilService=o}return e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new c.Hotkey(r.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardarConsumo");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_DISTRIBUIR,function(){var e=document.getElementById("btnDistribuirConsumo");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarConsumo");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirConsumo");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_ANULAR,function(){var e=document.getElementById("btnAnularConsumo");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_RESTAURAR,function(){var e=document.getElementById("btnRestaurarConsumo");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_ACEPTAR,function(){var e=document.getElementById("btnAceptar");return e&&e.click(),!1}))},e.prototype.construirConsumo=function(e,t,o,a){var s=new i.a;return s.bodCodigo=o.bodCodigo,s.bodEmpresa=r.a.KEY_EMPRESA_SELECT,t.invBodega=new n.a,t.invBodega.invBodegaPK=s,t.invConsumosPK.consEmpresa=r.a.KEY_EMPRESA_SELECT,t.invConsumosPK.consMotivo=a.cmCodigo,t.consFecha=new Date(t.consFecha).getTime(),t.consPendiente=e,t.invConsumosMotivoAnulacionList=null,t.usrCodigo=this.auth.getCodigoUser(),t.usrEmpresa=r.a.KEY_EMPRESA_SELECT,t},e.prototype.contruirDetalleConsumo=function(e,t,o){for(var a=0;a<t.length;a++)t[a].detOrden=a+1,t[a].secEmpresa=t[a].secCodigo?r.a.KEY_EMPRESA_SELECT:null,t[a].pisEmpresa=t[a].pisNumero?r.a.KEY_EMPRESA_SELECT:null,delete t[a].proCodigoPrincipal,e.invBodega&&(t[a].invBodega=e.invBodega,t[a].pisSector=o.codigoCP,t[a].pisEmpresa=t[a].pisSector?r.a.KEY_EMPRESA_SELECT:null,t[a].secCodigo=o.codigoCP,t[a].secEmpresa=t[a].secCodigo?r.a.KEY_EMPRESA_SELECT:null);return t},e.prototype.construirObjetoParaPonerloEnLaLista=function(e){var t=new l.a;return t.consNumero=e.invConsumosPK.consPeriodo+"|"+e.invConsumosPK.consMotivo+"|"+e.invConsumosPK.consNumero,e.consAnulado?t.consStatus="ANULADO":e.consPendiente?t.consStatus="PENDIENTE":t.consStatus="",t.consObservaciones=e.consObservaciones,t.consFecha=this.utilService.formatearDateToStringYYYYMMDD(e.consFecha),t},e.prototype.seleccionarBodega=function(e,t){return e.find(function(e){return e.bodCodigo==t})},e.prototype.seleccionarMotivo=function(e,t){return e.find(function(e){return e.cmCodigo==t})},e.prototype.formatearResporteConsumos=function(e,t){for(var o=new Array,a=0;a<e.length;a++){var i=new p.a,r=e[a].consNumero.split("|");i.consPeriodo=r[0],i.consMotivo=r[1],i.consNumero=r[2],i.consEmpresa=t,o.push(i)}return o},e=u([Object(a.Injectable)({providedIn:"root"}),h("design:paramtypes",[s.a,c.HotkeysService,d.a])],e)}()},"1Rfj":function(e,t,o){"use strict";o.d(t,"a",function(){return h});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("Ip0R"),l=o("7rNK"),d=o("Ungd"),p=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.obtenerDatosParaCrudAnticipos=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/obtenerDatosParaCrudAnticipos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaCrudAnticipos(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerAnticipoPago=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/obtenerAnticipoPago",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerAnticipoPago(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getCarListaCuentasPorPagarSaldoAnticiposTO=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaCuentasPorPagarSaldoAnticiposTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetCarListaCuentasPorPagarSaldoAnticiposTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarAnticiposPago=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/insertarAnticiposPago",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarAnticiposPago(e):(a.utilService.generarSwal(s.a.MSJ_ANTICIPO_PROVEEDORES,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.anularReversarContable=function(e,t){var o=this,a={title:s.a.MSJ_TITULO_ELIMINAR,texto:t.anularReversar?s.a.MSJ_PREGUNTA_ANULAR_CONTABLE:s.a.MSJ_PREGUNTA_REVERSAR_CONTABLE,type:s.a.SWAL_WARNING,confirmButtonText:t.anularReversar?s.a.MSJ_SI_ANULAR:s.a.MSJ_SI_REVERSAR,cancelButtonText:s.a.MSJ_NO_CANCELAR,confirmButtonColor:s.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(a).then(function(a){a?o.api.post("todocompuWS/contabilidadWebController/validarContablesParaAnularReversar",t,s.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===s.a.KEY_EXITO?e.despuesDeAnularReversarContable(t):(o.utilService.generarSwal(s.a.TOAST_ERROR,s.a.SWAL_ERROR,t.operacionMensaje),e.cargando=!1)}).catch(function(e){return o.utilService.handleError(e,o)}):e.cargando=!1})},e.prototype.imprimirCarListaCuentasPorPagarSaldoAnticipos=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarListaCuentasPorPagarSaldoAnticipos",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarListaCuentasPorPagarSaldoAnticipos.pdf",e):a.toastr.warning(s.a.MSJ_ERROR_IMPRIMIR,s.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarReporteCarListaCuentasPorPagarSaldoAnticipos=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarListaCuentasPorPagarSaldoAnticipos",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarListaCuentasPorPagarSaldoAnticipos_"):a.toastr.warning(s.a.MSJ_NO_DATA,s.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=[];return t.push({headerName:s.a.TAG_PERIODO,field:"antPeriodo",width:100,minWidth:100,maxWitdh:100},{headerName:s.a.TAG_TIPO,field:"antTipo",width:100,minWidth:100,maxWitdh:100},{headerName:s.a.TAG_NUMERO,field:"antNumero",width:100,minWidth:100,maxWitdh:100},{headerName:s.a.TAG_SECTOR,field:"antSector",width:100,minWidth:100,maxWitdh:100,hide:e.sectorSeleccionado&&e.sectorSeleccionado.secCodigo},{headerName:s.a.TAG_FECHA,field:"antFecha",width:100,minWidth:100,maxWitdh:100},{headerName:s.a.TAG_PROVEEDOR,field:"antProveedorCodigo",width:100,minWidth:100,hide:e.proveedorCodigo},{headerName:s.a.TAG_NOMBRE,field:"antProveedorRazonSocial",width:200,minWidth:200},{headerName:s.a.TAG_VALOR,valueFormatter:m,cellClass:"text-right",field:"antValor",width:100,minWidth:100},{headerName:s.a.TAG_OBSERVACIONES,field:"antObservaciones",width:200,minWidth:200},this.utilService.getColumnaOpciones()),t},e.prototype.construirObjetoParaPonerloEnLaLista=function(e,t,o){var a=new l.a;return a.antFecha=this.utilService.formatoStringSinZonaHorariaYYYMMDD(t.conFecha),a.antNumero=t.conContablePK.conNumero,a.antPeriodo=t.conContablePK.conPeriodo,a.antTipo=t.conContablePK.conTipo,a.antObservaciones=t.conObservaciones,a.antValor=e.antValor,a.antSector=e.secCodigo,a.antProveedorCodigo=e.provCodigo,a.antProveedorRazonSocial=o,a},e=p([Object(a.Injectable)({providedIn:"root"}),u("design:paramtypes",[i.a,r.b,n.a,d.a])],e)}();function m(e){return new c.DecimalPipe("en-US").transform(e.value,"1.2-2")}},"1rW1":function(e,t,o){"use strict";o.d(t,"a",function(){return C});var a=o("CcnG"),i=o("z5Y/"),r=o("nR5P"),n=o("SZbH"),s=o("mwBN"),c=o("gLZI"),l=o("Ip0R"),d=o("mozY"),p=o("chRk"),u=o("OeYz"),h=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.autonumeric92=function(){return{decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999.99",minimumValue:"0"}},e.prototype.autonumeric30=function(){return{decimalPlaces:0,decimalPlacesRawValue:0,decimalPlacesShownOnBlur:0,decimalPlacesShownOnFocus:0,maximumValue:"999",minimumValue:"0"}},e.prototype.fpPorPagar=function(){return{ctaCodigo:"000000000000",fpDetalle:"POR PAGAR",validar:!1}},e.prototype.obtenerDatosParaRolesDePago=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/obtenerDatosParaRolesDePago",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaRolesDePago(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarRhRol=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarRhRol",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarRhRol(e):(a.utilService.generarSwal(s.a.TALENTO_HUMANO_ROL_DE_PAGOS,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarRhRol=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/modificarRhRol",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarRhRol(e):(a.utilService.generarSwal(s.a.TALENTO_HUMANO_ROL_DE_PAGOS,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.calcularValoresRolesPago=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/calcularValoresRolesPago",e,o).then(function(e){e&&e.extraInfo?t.despuesDeCalcularValoresRolesPago(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.completarDatosDelRolDePago=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/completarDatosDelRolDePago",e,o).then(function(e){e&&e.extraInfo?t.despuesDeCompletarDatosDelRolDePago(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=this,o=[];return o.push({headerName:s.a.TAG_IDENTIFICACION,width:100,minWidth:100,valueGetter:function(e){return e.data.prId}},{headerName:s.a.TAG_APELLIDOS_Y_NOMBRES,width:270,minWidth:270,valueGetter:function(e){return e.data.prNombres}},{headerName:s.a.TAG_HORAS_EXTRAS_50_PORCENTAJE,field:"horas50",valueFormatter:function(e){return e.node.rowPinned?null:t.formatearA2Decimales(e)},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:100,minWidth:100,editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},headerComponentFramework:c.a,headerComponentParams:{tooltip:s.a.TAG_HORAS_EXTRAS_50_PORCENTAJE,text:s.a.TAG_H_EXTRAS_50_PORCENTAJE,enableSorting:!0},cellEditorFramework:d.a,cellEditorParams:{name:"horas50",maxlength:12,placeholder:"0.00",configAutonumeric:e.autonumeric92}},{headerName:s.a.TAG_HORAS_EXTRAS_100_PORCENTAJE,field:"horas100",valueFormatter:function(e){return e.node.rowPinned?null:t.formatearA2Decimales(e)},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:100,minWidth:100,editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},headerComponentFramework:c.a,headerComponentParams:{tooltip:s.a.TAG_HORAS_EXTRAS_100_PORCENTAJE,text:s.a.TAG_H_EXTRAS_100_PORCENTAJE,enableSorting:!0},cellEditorFramework:d.a,cellEditorParams:{name:"horas100",maxlength:12,placeholder:"0.00",configAutonumeric:e.autonumeric92}},{headerName:s.a.TAG_DIAS_FALTA,field:"diasFalta",valueFormatter:function(e){return e.node.rowPinned?null:t.formatearA0Decimales(e)},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:100,minWidth:100,editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},cellClassRules:{"cell-with-errors":function(o){return!!e.puedeEditarTabla&&(!!(o.data.diasFalta>0&&o.data.fpSeleccionada)&&!t.validarDias(o.data))}},headerComponentFramework:c.a,headerComponentParams:{tooltip:s.a.TAG_DIAS_FALTA,text:s.a.TAG_D_FALTA,enableSorting:!0},cellEditorFramework:d.a,cellEditorParams:{name:"diasFalta",maxlength:12,placeholder:"0",configAutonumeric:e.autonumeric30}},{headerName:s.a.TAG_PERMISO,field:"rolDescuentoPermisoMedico",valueFormatter:function(e){return e.node.rowPinned?null:t.formatearA2Decimales(e)},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:100,minWidth:100,editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},cellClassRules:{"cell-with-errors":function(o){return!!e.puedeEditarTabla&&(!!(o.data.rolDescuentoPermisoMedico>0&&o.data.fpSeleccionada)&&!t.validarPermiso(o.data))}},cellEditorFramework:d.a,cellEditorParams:{name:"rolDescuentoPermisoMedico",maxlength:12,placeholder:"0.00",configAutonumeric:e.autonumeric92}},{headerName:s.a.TAG_PRESTAMOS,field:"prestamos",valueFormatter:function(e){return e.node.rowPinned?null:t.formatearA2Decimales(e)},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:100,minWidth:100,editable:function(t){return!(!e.esContable||!e.puedeEditarTabla)||!!e.puedeEditarTabla&&(!t.node.rowPinned&&t.data.prestamos>0)},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},cellClassRules:{"cell-with-errors":function(o){return!!e.puedeEditarTabla&&(o.data.prestamos>0&&t.validarCantidad(o.data))}},cellEditorFramework:d.a,cellEditorParams:{name:"prestamos",maxlength:12,placeholder:"0.00",configAutonumeric:e.autonumeric92}},{headerName:s.a.TAG_PRESTAMOS_QUIROGRAFARIOS,field:"prestamosQ",valueFormatter:function(e){return e.node.rowPinned?null:t.formatearA2Decimales(e)},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:100,minWidth:100,editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},headerComponentFramework:c.a,headerComponentParams:{tooltip:s.a.TAG_PRESTAMOS_QUIROGRAFARIOS,text:s.a.TAG_P_QUIROGRAFARIOS,enableSorting:!0},cellEditorFramework:d.a,cellEditorParams:{name:"prestamosQ",maxlength:12,placeholder:"0.00",configAutonumeric:e.autonumeric92}},{headerName:s.a.TAG_PRESTAMOS_HIPOTECARIOS,field:"prestamosH",valueFormatter:function(e){return e.node.rowPinned?null:t.formatearA2Decimales(e)},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:100,minWidth:100,editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},headerComponentFramework:c.a,headerComponentParams:{tooltip:s.a.TAG_PRESTAMOS_HIPOTECARIOS,text:s.a.TAG_P_HIPOTECARIOS,enableSorting:!0},cellEditorFramework:d.a,cellEditorParams:{name:"prestamosH",maxlength:12,placeholder:"0.00",configAutonumeric:e.autonumeric92}},{headerName:s.a.TAG_FORMA_PAGO,field:"fpSeleccionada",width:140,minWidth:140,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-center"},cellClassRules:{"cell-with-errors":function(t){return!t.node.rowPinned&&(!(!e.esContable||t.data.fpSeleccionada&&t.data.fpSeleccionada.fpDetalle)||t.data.prValor>0&&!(t.data.fpSeleccionada&&t.data.fpSeleccionada.fpDetalle))}},editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellEditorFramework:p.a,cellEditorParams:function(t){return{value:t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,name:"fpSeleccionada",obligatorio:!1,listValues:e.formasDePago?e.formasDePago:[],fieldsShow:["fpDetalle"]}},valueFormatter:function(t){return t.data.fpSeleccionada=t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,t.data.fpSeleccionada?t.node.rowPinned?t.data.fpSeleccionada:t.data.fpSeleccionada.fpDetalle:e.fpSeleccionada?e.fpSeleccionada.fpDetalle:""}},{headerName:s.a.TAG_NUMERO_DOCUMENTO,field:"documento",width:120,minWidth:120,cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"mousetrap"},cellClassRules:{"cell-with-errors":function(t){return!(t.node.rowPinned||!e.puedeEditarTabla)&&(t.data.errorEnDocumento||t.data.documentoRepetido)}},editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:u.a,cellEditorParams:{name:"documento",inputClass:"text-uppercase"},headerComponentFramework:c.a,headerComponentParams:{tooltip:s.a.TAG_NUMERO_DOCUMENTO,text:s.a.TAG_N_DOCUMENTO,enableSorting:!0}},{headerName:s.a.TAG_OBSERVACION,field:"observacion",width:200,minWidth:200,cellClass:"mousetrap",editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoEmpleadosLote)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:u.a,cellEditorParams:{name:"observacion",inputClass:"text-uppercase"}}),e.esContable&&e.puedeEditarTabla?o.push(this.utilService.getColumnaOpciones()):o.push(this.utilService.getColumnaBotonAccion()),o},e.prototype.generarPinnedBottonRowData=function(){return[{fpSeleccionada:s.a.TAG_N_ROLES,documento:0}]},e.prototype.establecerPrestamos=function(e){for(var t=e,o=0;o<e.length;o++)t[o].prestamos=e[o].prSaldoPrestamos>0&&e[o].prSaldoCuotas>0?this.mathRound2(e[o].prSaldoPrestamos/e[o].prSaldoCuotas):0;return t},e.prototype.validarDias=function(e){return!(this.mathRound2(e.diasFalta)>30)},e.prototype.validarPermiso=function(e){return!(e.rolDescuentoPermisoMedico>this.utilService.quitarComasNumero(e.prSueldo))},e.prototype.mathRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.validarCantidad=function(e){return e.prestamos>e.prSaldoPrestamos},e.prototype.formatearA2Decimales=function(e){var t=e.value?e.value.toString().replace(/,/gi,""):0;return new l.DecimalPipe("en-US").transform(t,"1.2-2")},e.prototype.formatearA0Decimales=function(e){return e.value?e.value.toString().replace(/,/gi,""):0},e=h([Object(a.Injectable)({providedIn:"root"}),m("design:paramtypes",[i.a,n.b,r.a])],e)}()},"1t1C":function(e,t,o){"use strict";var a=function(){function e(e){this.ctaEmpresa=null,this.ctaCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.ctaEmpresa=e?e.ctaEmpresa:this.ctaEmpresa,this.ctaCodigo=e?e.ctaCodigo:this.ctaCodigo},e}();o.d(t,"a",function(){return i});var i=function(){function e(e){this.conCuentasPK=new a,this.ctaDetalle=null,this.ctaActivo=!1,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.conCuentasFlujoDetalleList=new Array,this.conDetalleList=new Array,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.conCuentasPK=e?e.conCuentasPK:this.conCuentasPK,this.usrEmpresa=e?e.usrEmpresa:this.usrEmpresa,this.ctaDetalle=e?e.ctaDetalle:this.ctaDetalle,this.ctaActivo=e?e.ctaActivo:this.ctaActivo,this.usrCodigo=e?e.usrCodigo:this.usrCodigo},e}()},"1wFf":function(e,t){e.exports='<form #frmClienteDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarCliente" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{accion}} {{constantes.TAG_CLIENTE_MINUSCULA}} - {{empresaSeleccionada.empNombre}}</b>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        <ng-template #tipContentNuevo>{{constantes.LABEL_GUARDAR}}</ng-template>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentNuevo" *ngIf="accion === constantes.ACCION_NUEVO"\r\n          (click)="verificarPermiso(constantes.ACCION_NUEVO, true) ? insertarCliente(frmClienteDatos) : null" title="{{constantes.ATAJO_GUARDAR}}"\r\n          id="btnGuardar">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentNuevo" *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardar"\r\n          (click)="verificarPermiso(constantes.ACCION_EDITAR, true) ? actualizarCliente(frmClienteDatos) : null" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <ng-template #tipContentRegresar>{{constantes.LABEL_REGRESAR}}</ng-template>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" *ngIf="accion === constantes.ACCION_CONSULTAR"\r\n          [ngbTooltip]="tipContentRegresar" (click)="cancelar()">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <ng-template #tipContentCancelar>{{constantes.LABEL_CANCELAR}}</ng-template>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" *ngIf="accion !== constantes.ACCION_CONSULTAR"\r\n          [ngbTooltip]="tipContentCancelar" (click)="cancelar()">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentNuevo" *ngIf="accion === constantes.ACCION_NUEVO" id="btnGuardar"\r\n          (click)="verificarPermiso(constantes.ACCION_NUEVO, true) ? insertarCliente(frmClienteDatos) : null" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentNuevo" *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardar"\r\n          (click)="verificarPermiso(constantes.ACCION_EDITAR, true) ? actualizarCliente(frmClienteDatos) : null" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" *ngIf="accion === constantes.ACCION_CONSULTAR"\r\n          [ngbTooltip]="constantes.LABEL_REGRESAR" (click)="cancelar()">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" *ngIf="accion !== constantes.ACCION_CONSULTAR"\r\n          [ngbTooltip]="constantes.LABEL_CANCELAR" (click)="cancelar()">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-1">\r\n    <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_CLIENTE_INFORMACION}}</b>\r\n          <div class="card-header-actions">\r\n            <a (click)="mostrarContactos()" *ngIf="activarContactos">\r\n              <span container="body">\r\n                <i class="fa fa-plus-square"></i> {{constantes.TAG_CONFIGURAR_CONTACTOS}}</span>\r\n            </a>\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseClienteInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseClienteInfo">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_CODIGO}}</strong>\r\n              </label>\r\n              <input [appFocus]="accion===constantes.ACCION_NUEVO" class="form-control form-control-sm text-uppercase mousetrap m-1"\r\n                name="codigo" maxlength="30" type="text" placeholder="{{constantes.TAG_OPCIONAL}}" pattern="{{constantes.PATTERN_CODIGO}}"\r\n                [(ngModel)]="cliente.cliCodigo" appUppercase *ngIf="accion === constantes.ACCION_NUEVO">\r\n              <label *ngIf="accion!=constantes.ACCION_NUEVO" class="form-control form-control-sm text-uppercase label-input">{{cliente.cliCodigo}}</label>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_TIPO_IDENTIFICACION}}</strong>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap text-uppercase" name="identificacion"\r\n                [(ngModel)]="cliente.cliTipoId" required (ngModelChange)="establecerLongitudIdentificacion(cliente.cliTipoId)">\r\n                <option disabled value=undefined>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="identificacion.tiCodigo" *ngFor="let identificacion of listadoTipoIdentificacion">\r\n                  {{identificacion.tiDetalle}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_NUMERO_IDENTIFICACION}}</strong>\r\n              </label>\r\n              <input *ngIf="empresaExtranjera" type="text" name="cliId" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [(ngModel)]="cliente.cliId" class="form-control form-control-sm text-uppercase mousetrap m-1" required [disabled]="!cliente.cliTipoId"\r\n                appUppercase (blur)="validarIdentificacion(cliente.cliTipoId)">\r\n              <input [ngClass]="{\'has-error\':rptaCedula || rptaRepetido}" *ngIf="!empresaExtranjera" type="text" name="cliId"\r\n                pKeyFilter="pint" (keypress)="soloNumeros($event)" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                minlength="{{digitosCedulaMin}}" maxlength="{{digitosCedulaMax}}" [(ngModel)]="cliente.cliId" class="form-control form-control-sm text-uppercase mousetrap m-1"\r\n                required [disabled]="!cliente.cliTipoId" (blur)="validarIdentificacion(cliente.cliTipoId)">\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.INVENTARIO_GRUPO_EMPRESARIAL}}</strong>\r\n                &nbsp;\r\n                <a (click)="verificarPermiso(constantes.ACCION_NUEVO, true) ? mostrarGrupoEmpresarial() : null" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap text-uppercase" name="grupo" [(ngModel)]="cliente.geCodigo">\r\n                <option value="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="grupo.geCodigo" *ngFor="let grupo of listadoGrupoEmpresarial"> {{grupo.geNombre}}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_RAZON_SOCIAL}}</strong>\r\n              </label>\r\n              <input type="text" name="cliRazonSocial" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="cliente.cliRazonSocial"\r\n                class="form-control form-control-sm text-uppercase mousetrap" required appUppercase (blur)="espacios()">\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_NOMBRE_COMERCIAL}}</strong>\r\n              </label>\r\n              <input appUppercase type="text" name="cliNombreComercial" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                [(ngModel)]="cliente.cliNombreComercial" class="form-control form-control-sm text-uppercase mousetrap">\r\n            </div>\r\n          </div>\r\n\r\n          <div class="row" *ngIf="!empresaExtranjera">\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_PROVINCIA}}</strong>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap text-uppercase" name="provincia" [(ngModel)]="provinciaSeleccionada"\r\n                (ngModelChange)="listarCiudades()">\r\n                <option value=undefined disabled selected hidden>{{constantes.TAG_OPCIONAL}}</option>\r\n                <option [ngValue]="provincia" *ngFor="let provincia of listadoProvincias"> {{provincia.nombre}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_CIUDAD}}</strong>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap text-uppercase" name="ciudad" [(ngModel)]="cliente.cliCiudad">\r\n                <option value="" disabled selected hidden>{{constantes.TAG_OPCIONAL}}</option>\r\n                <option [ngValue]="ciudad.nombre" *ngFor="let ciudad of listadoCiudades"> {{ciudad.nombre}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_PARROQIA}}</strong>\r\n              </label>\r\n              <input type="text" name="cliParroquia" appUppercase placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="cliente.cliParroquia"\r\n                class="form-control form-control-sm text-uppercase mousetrap m-1">\r\n            </div>\r\n          </div>\r\n\r\n          <div class="row" *ngIf="empresaExtranjera">\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_PROVINCIA}}</strong>\r\n              </label>\r\n              <input type="text" name="cliProvincia" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="cliente.cliProvincia"\r\n                class="form-control form-control-sm text-uppercase mousetrap" required appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_CIUDAD}}</strong>\r\n              </label>\r\n              <input type="text" name="cliCiudad" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="cliente.cliCiudad"\r\n                class="form-control form-control-sm text-uppercase mousetrap" required appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_PARROQIA}}</strong>\r\n              </label>\r\n              <input type="text" name="cliParroquia" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="cliente.cliParroquia"\r\n                class="form-control form-control-sm text-uppercase mousetrap" required appUppercase>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_ZONA}}</strong>\r\n              </label>\r\n              <input type="text" name="cliZona" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="cliente.cliZona"\r\n                class="form-control form-control-sm text-uppercase mousetrap" appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-8">\r\n              <label>\r\n                <strong>{{constantes.TAG_DIRECCION}}</strong>\r\n              </label>\r\n              <input type="text" name="cliDireccion" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="cliente.cliDireccion"\r\n                class="form-control form-control-sm text-uppercase mousetrap" appUppercase required maxlength="500">\r\n            </div>\r\n          </div>\r\n\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label ngbTooltip="{{constantes.LABEL_TELEFONO_CONVENCIONAL}}" placement="top">\r\n                <strong>{{constantes.TAG_TELEFONO_CONVENCIONAL}}</strong>\r\n              </label>\r\n              <input class="form-control form-control-sm text-uppercase mousetrap" name="cliTelefono" maxlength="130"\r\n                type="text" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="cliente.cliTelefono" (keypress)="soloNumeros($event)">\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label ngbTooltip="{{constantes.LABEL_TELEFONO_CELULAR}}" placement="top">\r\n                <strong>{{constantes.TAG_TELEFONO_CELULAR}}</strong>\r\n              </label>\r\n              <input class="form-control form-control-sm text-uppercase mousetrap" name="cliCelular" maxlength="130"\r\n                type="text" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="cliente.cliCelular" (keypress)="soloNumeros($event)">\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_EMAIL}}\r\n                  <span class="fa fa-info-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                    autoClose="outside" ngbPopover="{{constantes.MSJ_EMAIL}}" container="body"></span>\r\n                </strong>\r\n              </label>\r\n              <span class="ui-fluid">\r\n                <p-chips [(ngModel)]="correos" name="emails" class="mousetrap" [inputStyleClass]="accion===constantes.ACCION_CREAR || correos.length==0 ? \r\n                \'form-control form-control-sm grande text-lowercase\' : \'form-control form-control-sm chico text-lowercase\'"\r\n                  [allowDuplicate]="false" (onAdd)="clickear()" addOnTab="false" id="chip" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                  [disabled]="accion === constantes.ACCION_CONSULTAR" (onBlur)="tamanioGrande()" (onFocus)="tamanioChico()" id="correosolo">\r\n                  <ng-template let-item pTemplate="item">\r\n                    {{item}}\r\n                  </ng-template>\r\n                </p-chips>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_PRECIO_DE_VENTA}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseClientePrecios"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseClientePrecios">\r\n          <div class="row" *ngIf="caja?.permisoClienteCredito">\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_DIAS_CREDITO}}\r\n                  <span class="fa fa-info-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                    autoClose="outside" ngbPopover="{{constantes.MSJ_DIAS_CREDITO}}" container="body"></span>\r\n                </strong>\r\n              </label>\r\n              <input type="text" id="cliDiasCredito" pKeyFilter="pint" name="cliDiasCredito" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [(ngModel)]="cliente.cliDiasCredito" class="form-control form-control-sm mousetrap" required>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_CUPO_CREDITO}}\r\n                  <span class="fa fa-info-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                    autoClose="outside" ngbPopover="{{constantes.MSJ_CUPO_CREDITO}}" container="body"></span>\r\n                </strong>\r\n              </label>\r\n              <input type="text" id="cliCupoCredito" name="cliCupoCredito" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [(ngModel)]="cliente.cliCupoCredito" class="form-control form-control-sm mousetrap" [appAutonumeric2]="cliente.cliCupoCredito"\r\n                value="{{cliente.cliCupoCredito}}" (updateValue)="cliente.cliCupoCredito=$event" [appAutoRead]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n          </div>\r\n          <div class="row" *ngIf="!caja?.permisoClienteCredito">\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_DIAS_CREDITO}}\r\n                  <span class="fa fa-question-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                    autoClose="outside" ngbPopover="{{constantes.MSJ_DIAS_CREDITO}}" container="body"></span>\r\n                </strong>\r\n              </label>\r\n              <label class="form-control form-control-sm mousetrap label-input">{{cliente.cliDiasCredito}}</label>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_CUPO_CREDITO}}\r\n                  <span class="fa fa-question-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                    autoClose="outside" ngbPopover="{{constantes.MSJ_CUPO_CREDITO}}" container="body"></span>\r\n                </strong>\r\n              </label>\r\n              <input type="text" id="cliCupoCredito" name="cliCupoCredito" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [disabled]="true" [(ngModel)]="cliente.cliCupoCredito" class="form-control form-control-sm mousetrap"\r\n                [appAutonumeric2]="cliente.cliCupoCredito" value="{{cliente.cliCupoCredito}}" (updateValue)="cliente.cliCupoCredito=$event"\r\n                [appAutoRead]="accion === constantes.ACCION_CONSULTAR">\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_TIPO_CONTRIBUYENTE}}</strong>\r\n                &nbsp;\r\n                <a (click)="verificarPermiso(constantes.ACCION_NUEVO, true) ? mostrarTipoContribuyente() : null" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap text-uppercase" name="categoria" [(ngModel)]="cliente.cliCategoria"\r\n                required>\r\n                <option value="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="categoria.ccCodigo" *ngFor="let categoria of listadoCategorias">\r\n                  {{categoria.ccDetalle}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_VENDEDOR}}</strong>\r\n                &nbsp;\r\n                <a (click)="verificarPermiso(constantes.ACCION_NUEVO, true) ? mostrarVendedor() : null" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap text-uppercase" name="vendedor" [(ngModel)]="cliente.vendCodigo"\r\n                required>\r\n                <option value="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="vendedor.vendCodigo" *ngFor="let vendedor of listadoVendedores">\r\n                  {{vendedor.vendNombre}}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-9">\r\n              <label>\r\n                <strong>{{constantes.TAG_OBSERVACIONES}}</strong>\r\n              </label>\r\n              <textarea class="form-control form-control-sm text-uppercase mousetrap" name="observaciones" maxlength="1200"\r\n                type="text" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="cliente.cliObservaciones"\r\n                appUppercase></textarea>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3">\r\n              <label>\r\n                <strong>{{constantes.TAG_RELACIONADO}}</strong>\r\n              </label>\r\n              <div class="text-md-center pt-3">\r\n                <input type="checkbox" name="relacionado" [(ngModel)]="cliente.cliRelacionado">\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </div>\r\n</form>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"25D0":function(e,t){e.exports=""},"2NJ/":function(e,t){e.exports='<form #frmRetencion=\'ngForm\' complete="off" class="card m-0">\r\n  <div class="card-header" style="padding: 0.5rem 0.5rem;">\r\n    <button id="btnActivarRetencion" class="btn btn-sm btn-primary" *ngIf="!screamXS" (click)="cambiarEstadoActivar()"\r\n      type="button">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{constantes.TAG_RETENCION}} - {{empresaSeleccionada?.empNombre}}</b>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Guardar--\x3e\r\n        <button id="btnGuardarRetencion" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_GUARDAR}}"\r\n          (click)="guardarRetencion(frmRetencion)" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_CREADO || accion === constantes.ACCION_MAYORIZAR">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n          id="btnCancelarRetencion" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n          (click)="cancelar()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Guardar--\x3e\r\n        <button id="btnGuardarRetencion" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_GUARDAR}}"\r\n          (click)="guardarRetencion(frmRetencion)" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_CREADO || accion === constantes.ACCION_MAYORIZAR">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n          id="btnCancelarRetencion" (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body p-1">\r\n\r\n    \x3c!--Sustento--\x3e\r\n    <div class="card">\r\n      <div class="card-body row">\r\n        <label class="control-label col-col-lg-2 col-md-2"><strong>{{constantes.TAG_SUSTENTO}}:</strong></label>\r\n        <div class="col-lg-7 col-md-7">\r\n          <select class="form-control form-control-sm mousetrap" name="sustento" [(ngModel)]="anxCompraTO.compSustentotributario"\r\n            required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            <option disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n            <option [ngValue]="sus.susCodigo" *ngFor="let sus of listadoSustentos"> {{sus?.susDescripcion}}\r\n              ({{sus?.susCodigo}})\r\n            </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    \x3c!--Tabs--\x3e\r\n    <div class="card mb-1">\r\n      <div class="card-body m-0 p-0">\r\n        <ul class="nav nav-tabs nav-justified" role="tablist" id="ulOpciones" style="box-shadow: inset 0 -1px 0 #ddd;">\r\n          <li role="presentation" class="nav-item">\r\n            <a class="nav-link active p-1" href data-target="#retencion" aria-controls="retencion" role="tab"\r\n              data-toggle="tab">\r\n              <b>{{constantes.TAG_RETENCION}}</b>\r\n            </a>\r\n          </li>\r\n          <li role="presentation" class="nav-item" *ngIf="invCompraTO.compMontoIva && invCompraTO.compMontoIva >0">\r\n            <a class="nav-link p-1" href data-target="#retencionIva" aria-controls="retencionIva" role="tab"\r\n              data-toggle="tab">\r\n              <b>{{constantes.TAG_RETENCION_IVA}}</b>\r\n            </a>\r\n          </li>\r\n          <li role="presentation" class="nav-item" *ngIf="invCompraTO.compDocumentoTipo && (invCompraTO.compDocumentoTipo === constantes.CODIGO_NOTA_DEBITO || invCompraTO.compDocumentoTipo === constantes.CODIGO_NOTA_CREDITO)">\r\n            <a class="nav-link p-1" href data-target="#complemento" aria-controls="complemento" role="tab" data-toggle="tab">\r\n              <b>{{constantes.TAG_COMPLEMENTO_NC_ND}}</b>\r\n            </a>\r\n          </li>\r\n          <li role="presentation" class="nav-item" *ngIf="invCompraTO.compDocumentoTipo && invCompraTO.compDocumentoTipo === constantes.CODIGO_REEMBOLSO">\r\n            <a class="nav-link p-1" href data-target="#reembolso" aria-controls="reembolso" role="tab" data-toggle="tab">\r\n              <b>{{constantes.TAG_REEMBOLSO}}</b>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n\r\n        <div class="tab-content panel" style="border-top-width: 0px;">\r\n          <div role="tabpanel" class="tab-pane fade show active" id="retencion">\r\n            <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n              <div class="row">\r\n                \x3c!--Numero--\x3e\r\n                <div class="form-group form-group-sm col-lg-4">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_NUMERO}}</strong>\r\n                  </label>\r\n                  <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR || (accion === constantes.ACCION_MAYORIZAR &&  comprobarRetencionAutorizadaProcesamiento)">{{anxCompraTO.compRetencionNumero\r\n                    }}\r\n                  </label>\r\n                  <p-inputMask class="mousetrap mascara" name="numeroDoc" [(ngModel)]="anxCompraTO.compRetencionNumero"\r\n                    mask="999-999-999999999" (onBlur)="anxCompraTO.compRetencionNumero ? validarNumeroDocumento() : null"\r\n                    [ngClass]="{\'has-error\': !numeroDocValido000}" *ngIf="accion === constantes.ACCION_CREADO || accion === constantes.ACCION_CREAR || (accion === constantes.ACCION_MAYORIZAR  && !comprobarRetencionAutorizadaProcesamiento)"></p-inputMask>\r\n                </div>\r\n\r\n                \x3c!--Nro autorizacion--\x3e\r\n                <div class="form-group form-group-sm col-lg-4">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_AUTORIZACION}} </strong>\r\n                  </label>\r\n                  <label class="form-control form-control-sm text-uppercase label-input">{{anxCompraTO.compRetencionAutorizacion\r\n                    }}\r\n                  </label>\r\n                </div>\r\n\r\n                \x3c!--Fecha--\x3e\r\n                <div class="form-group form-group-sm col-lg-4">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_FECHA}} </strong>\r\n                  </label>\r\n                  <p-calendar class="mousetrap calendar" name="fechaRetencion" [(ngModel)]="fechaRetencion" [showIcon]="true"\r\n                    [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true" placeholder="DD/MM/YYYY"\r\n                    [disabled]="accion === constantes.ACCION_CONSULTAR || (accion === constantes.ACCION_MAYORIZAR && comprobarRetencionAutorizadaProcesamiento)"\r\n                    (onBlur)="validarFechaDiasHabiles()" (onSelect)="validarFechaDiasHabiles()" [inputStyleClass]="isFechaDentroDeDiasHabiles == false || isFechaMismoMes == false? \'has-error height-26\' : \'height-26\' "></p-calendar>\r\n                </div>\r\n              </div>\r\n            </fieldset>\r\n\r\n            \x3c!--Detalle--\x3e\r\n            <div class="card">\r\n              <div class="card-header">\r\n                <strong>{{constantes.TAG_DETALLE}}</strong>\r\n              </div>\r\n              <div class="card-body m-0 p-0" *ngIf="listAnxCompraDetalleRetencionTO?.length>0">\r\n                <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 650px); min-height: 95px"\r\n                  class="ag-theme-balham" [rowData]="listAnxCompraDetalleRetencionTO" [columnDefs]="columnDefs"\r\n                  [enableSorting]="true" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n                  [context]="context" [frameworkComponents]="frameworkComponents" [rowDragManaged]="true" (rowDragEnd)="refrescarOrdenDetalle()"\r\n                  [animateRows]="true" [suppressClickEdit]=true (gridReady)="onGridReady($event)" (rowSelected)="detalleSeleccionado = $event.node.data"\r\n                  (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()" (contextmenu)="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_CREADO || (accion === constantes.ACCION_MAYORIZAR  && !comprobarRetencionAutorizadaProcesamiento)?  $event.preventDefault():null"\r\n                  (cellContextMenu)="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_CREADO || (accion === constantes.ACCION_MAYORIZAR  && !comprobarRetencionAutorizadaProcesamiento)? mostrarContextMenu($event.data,$event.rowIndex, $event.event):null"\r\n                  (cellEditingStopped)="alCambiarValorDeCelda($event)" [stopEditingWhenGridLosesFocus]="true"\r\n                  [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()">\r\n                </ag-grid-angular>\r\n              </div>\r\n              <div class="card-footer">\r\n                <div class="row">\r\n                  \x3c!--Totales--\x3e\r\n                  <div class="form-group form-group-sm offset-1 col-lg-6">\r\n                    <input [(ngModel)]="invCompraTO.compRetencionAsumida" class="form-check-input" name="compRetencionAsumida"\r\n                      type="checkbox"> {{constantes.TAG_ASUMIR_RETENCION}}\r\n                  </div>\r\n                  <div class="offset-l-3 offset-md-3 col-lg-2">\r\n                    <label><strong>{{constantes.TAG_TOTAL_RETENCION}}: </strong> {{anxCompraTO.valorRetencion | number\r\n                      :\r\n                      \'1.2-2\'}}</label>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div role="tabpanel" class="tab-pane fade" id="retencionIva" *ngIf="invCompraTO.compMontoIva && invCompraTO.compMontoIva >0">\r\n            <div class="row">\r\n              <div class="form-group form-group-sm input-group-sm col-lg-3">\r\n              </div>\r\n              <div class="form-group form-group-sm input-group-sm col-lg-3">\r\n                <label><strong>{{constantes.TAG_BASE_IMPONIBLE}}</strong></label>\r\n              </div>\r\n              <div class="form-group form-group-sm input-group-sm col-lg-3">\r\n                <label><strong>%</strong></label>\r\n              </div>\r\n              <div class="form-group form-group-sm input-group-sm col-lg-3">\r\n                <label><strong>{{constantes.TAG_VALOR_RETENIDO}}</strong></label>\r\n              </div>\r\n              \x3c!--Bienes--\x3e\r\n              <div class="form-group form-group-sm input-group-sm col-lg-3">\r\n                <label><strong>{{constantes.TAG_BIENES}}</strong></label>\r\n              </div>\r\n              <div class="form-group form-group-sm input-group-sm col-lg-3 col-md-3">\r\n                <input type="text" name="compBaseivabienes" [appAutonumeric]="configAutonumeric" [appAutonumericValue]="anxCompraTO.compBaseivabienes"\r\n                  value="{{anxCompraTO.compBaseivabienes}}" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="anxCompraTO.compBaseivabienes"\r\n                  class="form-control form-control-sm text-uppercase mousetrap text-right" required (blur)="calcularPorcRetBienes()"\r\n                  [disabled]="accion === constantes.ACCION_CONSULTAR || (accion === constantes.ACCION_MAYORIZAR &&  comprobarRetencionAutorizadaProcesamiento)">\r\n              </div>\r\n              <div class="form-group form-group-sm input-group-sm col-lg-3 col-md-3 ">\r\n                <select class="form-control form-control-sm mousetrap" name="compPorcentajebienes" [(ngModel)]="anxCompraTO.compPorcentajebienes"\r\n                  (ngModelChange)="calcularPorcRetBienes()" required [disabled]="accion === constantes.ACCION_CONSULTAR || (accion === constantes.ACCION_MAYORIZAR &&  comprobarRetencionAutorizadaProcesamiento)">\r\n                  <option disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                  <option [ngValue]="item.clave" *ngFor="let item of listadoBienes"> {{item?.valor}}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class="form-group form-group-sm input-group-sm col-lg-3 col-md-3 ">\r\n                <label class="form-control form-control-sm text-right label-input">{{anxCompraTO.compValorbienes |\r\n                  number\r\n                  : \'1.2-2\'}}</label>\r\n              </div>\r\n              \x3c!--Servicios--\x3e\r\n              <div class="form-group form-group-sm input-group-sm col-lg-3 col-md-3 ">\r\n                <label><strong>{{constantes.TAG_SERVICIOS}}</strong></label>\r\n              </div>\r\n              <div class="form-group form-group-sm col-lg-3 col-md-3 input-group-sm">\r\n                <input type="text" name="compBaseivaservicios" [appAutonumeric]="configAutonumeric"\r\n                  [appAutonumericValue]="anxCompraTO.compBaseivaservicios" value="{{anxCompraTO.compBaseivaservicios}}"\r\n                  placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="anxCompraTO.compBaseivaservicios" class="form-control form-control-sm text-uppercase mousetrap text-right"\r\n                  required (blur)="calcularPorcRetServicios()" [disabled]="accion === constantes.ACCION_CONSULTAR || (accion === constantes.ACCION_MAYORIZAR &&  comprobarRetencionAutorizadaProcesamiento)">\r\n              </div>\r\n              <div class="form-group form-group-sm col-lg-3 col-md-3 input-group-sm">\r\n                <select class="form-control form-control-sm mousetrap" name="compPorcentajeservicios" [(ngModel)]="anxCompraTO.compPorcentajeservicios"\r\n                  required (ngModelChange)="calcularPorcRetServicios()" [disabled]="accion === constantes.ACCION_CONSULTAR || (accion === constantes.ACCION_MAYORIZAR &&  comprobarRetencionAutorizadaProcesamiento)">\r\n                  <option disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                  <option [ngValue]="item.clave" *ngFor="let item of listadoServicios"> {{item?.valor}}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class="form-group form-group-sm col-lg-3 col-md-3 input-group-sm">\r\n                <label class="form-control form-control-sm text-right label-input">{{anxCompraTO.compValorservicios |\r\n                  number\r\n                  : \'1.2-2\'}}</label>\r\n              </div>\r\n              \x3c!--Sericios 100%--\x3e\r\n              <div class="form-group form-group-sm col-lg-3 col-md-3 input-group-sm">\r\n                <label><strong>{{constantes.TAG_SERVICIOS_100}}</strong></label>\r\n              </div>\r\n              <div class="form-group form-group-sm col-lg-3 col-md-3 input-group-sm">\r\n                <input type="text" name="compBaseivaserviciosprofesionales" [appAutonumeric]="configAutonumeric"\r\n                  [appAutonumericValue]="anxCompraTO.compBaseivaserviciosprofesionales" value="{{anxCompraTO.compBaseivaserviciosprofesionales}}"\r\n                  placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="anxCompraTO.compBaseivaserviciosprofesionales"\r\n                  class="form-control form-control-sm text-uppercase mousetrap text-right" required (blur)="calcularPorcRetServiciosProfesional()"\r\n                  [disabled]="accion === constantes.ACCION_CONSULTAR || (accion === constantes.ACCION_MAYORIZAR && comprobarRetencionAutorizadaProcesamiento)">\r\n              </div>\r\n              <div class="form-group form-group-sm col-lg-3 col-md-3 input-group-sm">\r\n                <select class="form-control form-control-sm mousetrap" name="compPorcentajeserviciosprofesionales"\r\n                  [(ngModel)]="anxCompraTO.compPorcentajeserviciosprofesionales" required (ngModelChange)="calcularPorcRetServiciosProfesional()"\r\n                  [disabled]="accion === constantes.ACCION_CONSULTAR || (accion === constantes.ACCION_MAYORIZAR && comprobarRetencionAutorizadaProcesamiento)">\r\n                  <option disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                  <option [ngValue]="item.clave" *ngFor="let item of listadoServicios100"> {{item?.valor}}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class="form-group form-group-sm col-lg-3 col-md-3 input-group-sm">\r\n                <label class="form-control form-control-sm text-right label-input">{{anxCompraTO.compValorserviciosprofesionales\r\n                  | number : \'1.2-2\'}}</label>\r\n              </div>\r\n\r\n              <div class="form-group form-group-smcol-lg-3 col-md-3 input-group-sm">\r\n                <label><strong>{{constantes.TAG_TOTAL}}</strong></label>\r\n              </div>\r\n              <div class="form-group form-group-sm col-lg-3 col-md-3 input-group-sm text-right">\r\n                <label><strong>{{totalIva| number : \'1.2-2\'}}</strong></label>\r\n              </div>\r\n              <div class="form-group col-lg-6 col-md-6 input-group-sm">\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n          <div role="tabpanel" class="tab-pane fade" id="complemento" *ngIf="invCompraTO.compDocumentoTipo && (invCompraTO.compDocumentoTipo === constantes.CODIGO_NOTA_DEBITO || invCompraTO.compDocumentoTipo === constantes.CODIGO_NOTA_CREDITO)">\r\n            <div class="row">\r\n              <div class="form-group form-group-sm col-md-4">\r\n                <label>\r\n                  <strong>{{constantes.TAG_TIPO_DOCUMENTO}}</strong>\r\n                </label>\r\n                <select id="documento" class="form-control form-control-sm mousetrap color-no-disabled" name="compModificadoDocumentoTipo"\r\n                  [(ngModel)]="anxCompraTO.compModificadoDocumentoTipo" required (ngModelChange)="validarDocumentoComplemento()">\r\n                  <option [ngValue]="doc.tcCodigo" *ngFor="let doc of listaDocumentos">\r\n                    {{doc.tcDescripcion}} ({{doc?.tcCodigo}})\r\n                  </option>\r\n                </select>\r\n              </div>\r\n\r\n              \x3c!--Numero--\x3e\r\n              <div class="form-group form-group-sm col-lg-4">\r\n                <label>\r\n                  <strong>{{constantes.TAG_NUMERO}}</strong>\r\n                </label>\r\n                <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">{{anxCompraTO.compModificadoDocumentoNumero\r\n                  }}\r\n                </label>\r\n                <p-inputMask class="mousetrap mascara" name="compModificadoDocumentoNumero" [(ngModel)]="anxCompraTO.compModificadoDocumentoNumero"\r\n                  mask="999-999-999999999" required (onBlur)="validarDocumentoComplemento()" [ngClass]="{\'has-error\': !numeroDocValidoComplemento000 || numeroRepetido}"\r\n                  *ngIf="accion !== constantes.ACCION_CONSULTAR"></p-inputMask>\r\n              </div>\r\n\r\n              \x3c!--Nro rizacion--\x3e\r\n              <div class="form-group form-group-sm col-lg-4">\r\n                <label>\r\n                  <strong>{{constantes.TAG_AUTORIZACION}} </strong>\r\n                </label>\r\n                <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">{{anxCompraTO.compModificadoAutorizacion\r\n                  }}\r\n                </label>\r\n                <input class="form-control form-control-sm mousetrap text-uppercase" name="compModificadoAutorizacion"\r\n                  maxlength="49" onkeypress=\'return event.charCode >= 48 && event.charCode <= 57\' type="text" required\r\n                  placeholder="{{constantes.TAG_SIN_DETALLE}}" [(ngModel)]="anxCompraTO.compModificadoAutorizacion"\r\n                  (blur)="validarNumeroAutorizacionComplemento()" [ngClass]="{\'has-error\': !numeroAutorizacionValidaLongitud}"\r\n                  *ngIf="accion !== constantes.ACCION_CONSULTAR">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div role="tabpanel" class="tab-pane fade" id="reembolso" *ngIf="invCompraTO.compDocumentoTipo && invCompraTO.compDocumentoTipo === constantes.CODIGO_REEMBOLSO">\r\n            <div class="card">\r\n              <div class="card-header">\r\n                <strong>{{constantes.TAG_DETALLE}}</strong>\r\n              </div>\r\n              <div class="card-body m-0 p-0" *ngIf="listAnxCompraReembolsoTO?.length>0">\r\n                <ag-grid-angular #agGridReembolso id="agGridReembolso" style="width: 100%; height: calc(100vh - 650px);"\r\n                  class="ag-theme-balham" [rowData]="listAnxCompraReembolsoTO" [columnDefs]="columnDefsReembolso"\r\n                  [enableSorting]="true" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n                  [context]="context" [frameworkComponents]="frameworkComponents" [rowDragManaged]="true" [animateRows]="true"\r\n                  [suppressClickEdit]=true (gridReady)="onGridReadyReembolso($event)" (rowSelected)="anxCompraReembolsoTOSeleccionado = $event.node.data"\r\n                  (cellFocused)="filaFocusedReembolso($event)" (contextmenu)="accion !== constantes.ACCION_CONSULTAR?  $event.preventDefault():null"\r\n                  (cellContextMenu)="accion !== constantes.ACCION_CONSULTAR? mostrarContextMenuReembolso($event.data,$event.rowIndex, $event.event):null"\r\n                  (cellEditingStopped)="alCambiarValorDeCeldaReembolso($event)" [stopEditingWhenGridLosesFocus]="true"\r\n                  [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()">\r\n                </ag-grid-angular>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    \x3c!--Forma pago--\x3e\r\n    <div class="card">\r\n      <div class="card-body row">\r\n        <label class="control-label col-col-lg-2 col-md-2"><strong>{{constantes.TAG_FORMA_PAGO}}:</strong></label>\r\n        <div class="col-lg-6 col-md-6">\r\n          <select class="form-control form-control-sm mousetrap" name="formaPago" [(ngModel)]="formaPagoSeleccionada"\r\n            required [compareWith]="inicializarFormaPago" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n            <option disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n            <option [ngValue]="fp" *ngFor="let fp of listaFormaPago"> {{fp?.fpDetalle}} ({{fp?.fpCodigo}})\r\n            </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</form>\r\n<p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n<p-contextMenu #menuOpcionesReembolso appendTo="body" [model]="opcionesReembolso"></p-contextMenu>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"2ngb":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.id=0,this.pagNumeroSistema="",this.pagFecha="",this.pagProveedor="",this.pagValor=0,this.pagObservaciones="",this.pagPendiente=!1,this.pagAnulado=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.pagNumeroSistema=e.pagNumeroSistema?e.pagNumeroSistema:this.pagNumeroSistema,this.pagFecha=e.pagFecha?e.pagFecha:this.pagFecha,this.pagProveedor=e.pagProveedor?e.pagProveedor:this.pagProveedor,this.pagValor=e.pagValor?e.pagValor:this.pagValor,this.pagObservaciones=e.pagObservaciones?e.pagObservaciones:this.pagObservaciones,this.pagPendiente=e.pagPendiente?e.pagPendiente:this.pagPendiente,this.pagAnulado=e.pagAnulado?e.pagAnulado:this.pagAnulado,this.id=e.id?e.id:this.id},e}()},"2sJq":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.detSecuencia=null,this.detOrden=null,this.detPendiente=!0,this.detConfirmado=!1,this.detCantidad=0,this.detPrecio=0,this.detPorcentajeDescuento=0,this.detOtrosImpuestos=0,this.detValorPromedio=0,this.detValorUltimaCompra=0,this.detSaldo=0,this.bodEmpresa="",this.bodCodigo="",this.proEmpresa=null,this.proCodigoPrincipal=null,this.secEmpresa=null,this.secCodigo=null,this.pisEmpresa=null,this.pisSector=null,this.pisNumero=null,this.comEmpresa=null,this.comPeriodo=null,this.comMotivo=null,this.comNumero=null,this.proEstadoIva=null,this.proTipo=null,this.detIce=0,this.detPrecio1=0,this.detPrecio2=0,this.detPrecio3=0,this.detPrecio4=0,this.detPrecio5=0,this.parcialProducto=0,this.medidaDetalle=null,this.nombreProducto=null,this.proCodigoPrincipalCopia=null,this.bodCodigoCopia=null,this.listadoPiscinaTO=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencia=e.detSecuencia?e.detSecuencia:this.detSecuencia,this.detOrden=e.detOrden?e.detOrden:this.detOrden,this.detPendiente=e.detPendiente?e.detPendiente:this.detPendiente,this.detConfirmado=e.detConfirmado?e.detConfirmado:this.detConfirmado,this.detCantidad=e.detCantidad?e.detCantidad:this.detCantidad,this.detPrecio=e.detPrecio?e.detPrecio:this.detPrecio,this.detPrecio3=e.detPrecio3?e.detPrecio3:this.detPrecio3,this.detPrecio4=e.detPrecio4?e.detPrecio4:this.detPrecio4,this.detPrecio5=e.detPrecio5?e.detPrecio5:this.detPrecio5},e}()},"3C7r":function(e,t){e.exports=""},"3IAp":function(e,t,o){"use strict";o.d(t,"a",function(){return n});var a=o("XYH7"),i=o("IGT0"),r=o("pZ6e"),n=function(){function e(e){this.pedCodigoTransaccional="",this.invPedidosPK=new a.a,this.invCliente=new r.a,this.pedLugarEntrega=null,this.pedFechaHoraEntrega=null,this.pedContactoNombre=null,this.pedContactoTelefono=null,this.pedFechaEmision=null,this.pedFechaVencimiento=null,this.pedObservacionesRegistra="",this.pedObservacionesAprueba="",this.pedObservacionesEjecuta="",this.pedOrdenCompra="",this.pedFormaCobro="",this.pedPendiente=!1,this.pedAprobado=!1,this.pedEjecutado=!1,this.pedAnulado=!1,this.pedMontoTotal=0,this.usrRegistra=null,this.usrAprueba=null,this.usrEjecuta=null,this.usrFechaInserta=null,this.invPedidosDetalleList=[],this.invPedidosMotivo=new i.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.pedCodigoTransaccional=e.pedCodigoTransaccional?e.pedCodigoTransaccional:this.pedCodigoTransaccional,this.pedObservacionesRegistra=e.pedObservacionesRegistra?e.pedObservacionesRegistra:this.pedObservacionesRegistra,this.pedObservacionesAprueba=e.pedObservacionesAprueba?e.pedObservacionesAprueba:this.pedObservacionesAprueba,this.pedObservacionesEjecuta=e.pedObservacionesEjecuta?e.pedObservacionesEjecuta:this.pedObservacionesEjecuta,this.pedOrdenCompra=e.pedOrdenCompra?e.pedOrdenCompra:this.pedOrdenCompra,this.pedFormaCobro=e.pedFormaCobro?e.pedFormaCobro:this.pedFormaCobro,this.invPedidosPK=e.invPedidosPK?e.invPedidosPK:this.invPedidosPK,this.pedFechaEmision=e.pedFechaEmision?e.pedFechaEmision:this.pedFechaEmision,this.pedFechaVencimiento=e.pedFechaVencimiento?e.pedFechaVencimiento:this.pedFechaVencimiento,this.pedPendiente=e.pedPendiente?e.pedPendiente:this.pedPendiente,this.pedAprobado=e.pedAprobado?e.pedAprobado:this.pedAprobado,this.pedEjecutado=e.pedEjecutado?e.pedEjecutado:this.pedEjecutado,this.pedAnulado=e.pedAnulado?e.pedAnulado:this.pedAnulado,this.pedMontoTotal=e.pedMontoTotal?e.pedMontoTotal:this.pedMontoTotal,this.usrRegistra=e.usrRegistra?e.usrRegistra:this.usrRegistra,this.usrAprueba=e.usrAprueba?e.usrAprueba:this.usrAprueba,this.usrEjecuta=e.usrEjecuta?e.usrEjecuta:this.usrEjecuta,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invPedidosDetalleList=e.invPedidosDetalleList?e.invPedidosDetalleList:this.invPedidosDetalleList,this.invPedidosMotivo=e.invPedidosMotivo?e.invPedidosMotivo:this.invPedidosMotivo,this.invCliente=e.invCliente?e.invCliente:this.invCliente,this.pedLugarEntrega=e.pedLugarEntrega?e.pedLugarEntrega:this.pedLugarEntrega,this.pedFechaHoraEntrega=e.pedFechaHoraEntrega?e.pedFechaHoraEntrega:this.pedFechaHoraEntrega,this.pedContactoNombre=e.pedContactoNombre?e.pedContactoNombre:this.pedContactoNombre,this.pedContactoTelefono=e.pedContactoTelefono?e.pedContactoTelefono:this.pedContactoTelefono},e}()},"3hy1":function(e,t,o){"use strict";var a=function(){function e(e){this.catEmpresa="",this.catNombre="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.catEmpresa=e.catEmpresa?e.catEmpresa:this.catEmpresa,this.catNombre=e.catNombre?e.catNombre:this.catNombre},e}();o.d(t,"a",function(){return i});var i=function(){function e(e){this.rhCategoriaPK=new a,this.ctaAnticipos="",this.ctaPrestamos="",this.ctaPorPagarBonos="",this.ctaPorPagarSueldo="",this.ctaPorPagarImpuestoRenta="",this.ctaPorPagarUtilidades="",this.ctaGastoBonos="",this.ctaGastoHorasExtras="",this.ctaGastoHorasExtras100="",this.ctaGastoBonosNd="",this.ctaGastoBonoFijo="",this.ctaGastoBonoFijoNd="",this.ctaGastoOtrosIngresos="",this.ctaGastoOtrosIngresosNd="",this.ctaPermisoMedico="",this.ctaGastoSueldos="",this.ctaAportepersonal="",this.ctaAporteExtension="",this.ctaPrestamoQuirografario="",this.ctaPrestamoHipotecario="",this.ctaAportepatronal="",this.ctaIece="",this.ctaSecap="",this.ctaXiii="",this.ctaXiv="",this.ctaFondoreserva="",this.ctaVacaciones="",this.ctaDesahucio="",this.ctaGastoAporteindividual="",this.ctaGastoAportepatronal="",this.ctaGastoIece="",this.ctaGastoSecap="",this.ctaGastoXiii="",this.ctaGastoXiv="",this.ctaGastoFondoreserva="",this.ctaGastoVacaciones="",this.ctaGastoSalarioDigno="",this.ctaGastoDesahucio="",this.ctaGastoDesahucioIntempestivo="",this.ctaGastoLiquidacionBono="",this.tipEmpresa="",this.tipCodigo="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=new Date,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.rhCategoriaPK=e.rhCategoriaPK?e.rhCategoriaPK:this.rhCategoriaPK,this.ctaAnticipos=e.ctaAnticipos?e.ctaAnticipos:this.ctaAnticipos,this.ctaPrestamos=e.ctaPrestamos?e.ctaPrestamos:this.ctaPrestamos,this.ctaPorPagarBonos=e.ctaPorPagarBonos?e.ctaPorPagarBonos:this.ctaPorPagarBonos,this.ctaPorPagarSueldo=e.ctaPorPagarSueldo?e.ctaPorPagarSueldo:this.ctaPorPagarSueldo,this.ctaPorPagarImpuestoRenta=e.ctaPorPagarImpuestoRenta?e.ctaPorPagarImpuestoRenta:this.ctaPorPagarImpuestoRenta,this.ctaPorPagarUtilidades=e.ctaPorPagarUtilidades?e.ctaPorPagarUtilidades:this.ctaPorPagarUtilidades,this.ctaGastoBonos=e.ctaGastoBonos?e.ctaGastoBonos:this.ctaGastoBonos,this.ctaGastoHorasExtras=e.ctaGastoHorasExtras?e.ctaGastoHorasExtras:this.ctaGastoHorasExtras,this.ctaGastoHorasExtras100=e.ctaGastoHorasExtras100?e.ctaGastoHorasExtras100:this.ctaGastoHorasExtras100,this.ctaGastoBonosNd=e.ctaGastoBonosNd?e.ctaGastoBonosNd:this.ctaGastoBonosNd,this.ctaGastoBonoFijo=e.ctaGastoBonoFijo?e.ctaGastoBonoFijo:this.ctaGastoBonoFijo,this.ctaGastoBonoFijoNd=e.ctaGastoBonoFijoNd?e.ctaGastoBonoFijoNd:this.ctaGastoBonoFijoNd,this.ctaGastoOtrosIngresos=e.ctaGastoOtrosIngresos?e.ctaGastoOtrosIngresos:this.ctaGastoOtrosIngresos,this.ctaGastoOtrosIngresosNd=e.ctaGastoOtrosIngresosNd?e.ctaGastoOtrosIngresosNd:this.ctaGastoOtrosIngresosNd,this.ctaPermisoMedico=e.ctaPermisoMedico?e.ctaPermisoMedico:this.ctaPermisoMedico,this.ctaGastoSueldos=e.ctaGastoSueldos?e.ctaGastoSueldos:this.ctaGastoSueldos,this.ctaAportepersonal=e.ctaAportepersonal?e.ctaAportepersonal:this.ctaAportepersonal,this.ctaAporteExtension=e.ctaAporteExtension?e.ctaAporteExtension:this.ctaAporteExtension,this.ctaPrestamoQuirografario=e.ctaPrestamoQuirografario?e.ctaPrestamoQuirografario:this.ctaPrestamoQuirografario,this.ctaPrestamoHipotecario=e.ctaPrestamoHipotecario?e.ctaPrestamoHipotecario:this.ctaPrestamoHipotecario,this.ctaAportepatronal=e.ctaAportepatronal?e.ctaAportepatronal:this.ctaAportepatronal,this.ctaIece=e.ctaIece?e.ctaIece:this.ctaIece,this.ctaSecap=e.ctaSecap?e.ctaSecap:this.ctaSecap,this.ctaXiii=e.ctaXiii?e.ctaXiii:this.ctaXiii,this.ctaXiv=e.ctaXiv?e.ctaXiv:this.ctaXiv,this.ctaFondoreserva=e.ctaFondoreserva?e.ctaFondoreserva:this.ctaFondoreserva,this.ctaVacaciones=e.ctaVacaciones?e.ctaVacaciones:this.ctaVacaciones,this.ctaDesahucio=e.ctaDesahucio?e.ctaDesahucio:this.ctaDesahucio,this.ctaGastoAporteindividual=e.ctaGastoAporteindividual?e.ctaGastoAporteindividual:this.ctaGastoAporteindividual,this.ctaGastoAportepatronal=e.ctaGastoAportepatronal?e.ctaGastoAportepatronal:this.ctaGastoAportepatronal,this.ctaGastoIece=e.ctaGastoIece?e.ctaGastoIece:this.ctaGastoIece,this.ctaGastoSecap=e.ctaGastoSecap?e.ctaGastoSecap:this.ctaGastoSecap,this.ctaGastoXiii=e.ctaGastoXiii?e.ctaGastoXiii:this.ctaGastoXiii,this.ctaGastoXiv=e.ctaGastoXiv?e.ctaGastoXiv:this.ctaGastoXiv,this.ctaGastoFondoreserva=e.ctaGastoFondoreserva?e.ctaGastoFondoreserva:this.ctaGastoFondoreserva,this.ctaGastoVacaciones=e.ctaGastoVacaciones?e.ctaGastoVacaciones:this.ctaGastoVacaciones,this.ctaGastoSalarioDigno=e.ctaGastoSalarioDigno?e.ctaGastoSalarioDigno:this.ctaGastoSalarioDigno,this.ctaGastoDesahucio=e.ctaGastoDesahucio?e.ctaGastoDesahucio:this.ctaGastoDesahucio,this.ctaGastoDesahucioIntempestivo=e.ctaGastoDesahucioIntempestivo?e.ctaGastoDesahucioIntempestivo:this.ctaGastoDesahucioIntempestivo,this.ctaGastoLiquidacionBono=e.ctaGastoLiquidacionBono?e.ctaGastoLiquidacionBono:this.ctaGastoLiquidacionBono,this.tipEmpresa=e.tipEmpresa?e.tipEmpresa:this.tipEmpresa,this.tipCodigo=e.tipCodigo?e.tipCodigo:this.tipCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},"3vq3":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.banNombre="",this.ctaNumero="",this.ctaTitular="",this.ctaContable="",this.ctaCodigoBancario="",this.ctaPrefijoBancario="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.banNombre=e.banNombre?e.banNombre:this.banNombre,this.ctaNumero=e.ctaNumero?e.ctaNumero:this.ctaNumero,this.ctaTitular=e.ctaTitular?e.ctaTitular:this.ctaTitular,this.ctaContable=e.ctaContable?e.ctaContable:this.ctaContable,this.ctaCodigoBancario=e.ctaCodigoBancario?e.ctaCodigoBancario:this.ctaCodigoBancario,this.ctaPrefijoBancario=e.ctaPrefijoBancario?e.ctaPrefijoBancario:this.ctaPrefijoBancario},e}()},"3xZc":function(e,t,o){"use strict";var a=o("UBxT"),i=o("0uIf"),r=o("1t1C"),n=o("flmD"),s=function(){function e(e){this.xivSecuencial=null,this.xivDesde=null,this.xivHasta=null,this.xivDiasLaboradosEmpleado=null,this.xivBaseImponible=null,this.xivValor=null,this.xivDocumento=null,this.xivObservaciones=null,this.xivCodigoMinisterial=null,this.xivAuxiliar=null,this.empCargo=null,this.empSueldo=0,this.empFechaIngreso=null,this.prdSector=new n.a,this.conCuentas=new r.a,this.conContable=new i.a,this.rhEmpleado=new a.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.xivSecuencial=e.xivSecuencial?e.xivSecuencial:this.xivSecuencial,this.xivDesde=e.xivDesde?e.xivDesde:this.xivDesde,this.xivHasta=e.xivHasta?e.xivHasta:this.xivHasta,this.xivDiasLaboradosEmpleado=e.xivDiasLaboradosEmpleado?e.xivDiasLaboradosEmpleado:this.xivDiasLaboradosEmpleado,this.xivBaseImponible=e.xivBaseImponible?e.xivBaseImponible:this.xivBaseImponible,this.xivValor=e.xivValor?e.xivValor:this.xivValor,this.xivDocumento=e.xivDocumento?e.xivDocumento:this.xivDocumento,this.xivObservaciones=e.xivObservaciones?e.xivObservaciones:this.xivObservaciones,this.xivCodigoMinisterial=e.xivCodigoMinisterial?e.xivCodigoMinisterial:this.xivCodigoMinisterial,this.xivAuxiliar=e.xivAuxiliar?e.xivAuxiliar:this.xivAuxiliar,this.empCargo=e.empCargo?e.empCargo:this.empCargo,this.empSueldo=e.empSueldo?e.empSueldo:this.empSueldo,this.empFechaIngreso=e.empFechaIngreso?e.empFechaIngreso:this.empFechaIngreso,this.prdSector=e.prdSector?e.prdSector:this.prdSector,this.conCuentas=e.conCuentas?e.conCuentas:this.conCuentas,this.conContable=e.conContable?e.conContable:this.conContable,this.rhEmpleado=e.rhEmpleado?e.rhEmpleado:this.rhEmpleado},e}(),c=o("OTvs");o.d(t,"a",function(){return l});var l=function(){function e(e){this.rhXivSueldo=new s,this.formaPago=new c.a,this.diasLaborados=0,this.isFormaPagoValido=!1,this.isValorValido=!1,this.documentoRepetido=!1,this.errorEnDocumento=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.rhXivSueldo=e.rhXivSueldo?e.rhXivSueldo:this.rhXivSueldo,this.formaPago=e.formaPago?e.formaPago:this.formaPago,this.diasLaborados=e.diasLaborados?e.diasLaborados:this.diasLaborados,this.isFormaPagoValido=e.isFormaPagoValido?e.isFormaPagoValido:this.isFormaPagoValido,this.isValorValido=e.isValorValido?e.isValorValido:this.isValorValido,this.documentoRepetido=e.documentoRepetido?e.documentoRepetido:this.documentoRepetido,this.errorEnDocumento=e.errorEnDocumento?e.errorEnDocumento:this.errorEnDocumento},e}()},"40E6":function(e,t,o){"use strict";o.d(t,"a",function(){return I});var a=o("CcnG"),i=o("eUd/"),r=o("SZbH"),n=o("nR5P"),s=o("CEfs"),c=o("8fiX"),l=o("z5Y/"),d=o("yccp"),p=o("xbly"),u=o("TjW0"),h=o("ZYCi"),m=o("vGAI"),C=o("mwBN"),v=o("EnEm"),A=o("Ungd"),f=o("zkCp"),g=o("madF"),b=o("gLZI"),O=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function(){function e(e,t,o,a,i,r,n,s,l){this.route=e,this.api=t,this.activeModal=o,this.toastr=a,this.utilService=i,this.filasService=r,this.atajoService=n,this.productoMedidaService=s,this.archivoService=l,this.esModal=!1,this.empresaSeleccionada=new c.a,this.listaEmpresas=Array(),this.invProductoMedidaTO=new u.a,this.classTitulo=C.a.ICON_FILTRAR,this.vistaFormulario=!1,this.accion=null,this.listadoResultado=Array(),this.objetoSeleccionado=new u.a,this.objetoNuevoSeleccionado=new u.a,this.isScreamMd=!0,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new v.a,this.constantes=C.a,this.frmTitulo=C.a.TITULO_FILTROS,this.classTitulo=C.a.ICON_FILTRAR,this.configAutonumeric={decimalPlaces:4,decimalPlacesRawValue:4,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:4,maximumValue:"99999999999999999999999.99",minimumValue:"0"}}return e.prototype.ngOnInit=function(){this.empresaModal?(this.esModal=!0,this.activar=!0,this.listaEmpresas.push(this.empresaModal),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),C.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.buscarMedidasProducto(),this.cambiarEmpresaSeleccionada()):(this.listaEmpresas=this.route.snapshot.data.medidaProducto,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),C.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSeleccionada())),this.isScreamMd=!(window.innerWidth<=576),this.inicializarAtajos(),this.iniciarAgGrid()},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new d.Hotkey(C.a.ATAJO_ESC,function(){return e.cerrarProductoMedida(),!1})),this.atajoService.add(new d.Hotkey(C.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarMedida");return e&&e.click(),!1})),this.atajoService.add(new d.Hotkey(C.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirMedida");return e&&e.click(),!1})),this.atajoService.add(new d.Hotkey(C.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarMedida");return e&&e.click(),!1})),this.atajoService.add(new d.Hotkey(C.a.ATAJO_NUEVO,function(){var e=document.getElementById("btnNuevo");return e&&e.click(),!1})),this.atajoService.add(new d.Hotkey(C.a.ATAJO_EDITAR,function(){return!e.vistaFormulario&&e.objetoSeleccionado&&e.editarProductoMedida(e.objetoSeleccionado),!1})),this.atajoService.add(new d.Hotkey(C.a.ATAJO_ELIMINAR,function(){return!e.vistaFormulario&&e.objetoSeleccionado&&e.eliminarProductoMedida(e.objetoSeleccionado),!1})),this.atajoService.add(new d.Hotkey(C.a.ATAJO_GUARDAR,function(){if(e.vistaFormulario){var t=document.getElementById("btnGuardarMedida");return t&&t.click(),!1}})),this.atajoService.add(new d.Hotkey(C.a.ATAJO_CANCELAR,function(){return e.vistaFormulario&&e.resetearFormulario(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){C.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.invProductoMedidaTO=new u.a,this.limpiarListado(),this.vistaFormulario=!1,this.activar=!0},e.prototype.buscarMedidasProducto=function(){this.cargando=!0,this.accion=null,this.limpiarListado();var e={empresa:this.empresaSeleccionada.empCodigo};this.filasTiempo.iniciarContador(),this.productoMedidaService.listarInvProductoMedidaTO(e,this,C.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvProductoMedidaTO=function(e){this.filasTiempo.finalizarContador(),this.listadoResultado=e||[],this.cargando=!1},e.prototype.limpiarListado=function(){this.gridApi=null,this.gridColumnApi=null,this.filtroGlobal="",this.listadoResultado=[],this.accion=null,this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.generarOpciones=function(){var e=this,t=this.objetoSeleccionado&&this.utilService.verificarPermiso(C.a.ACCION_EDITAR,this)&&!this.vistaFormulario,o=this.objetoSeleccionado&&this.utilService.verificarPermiso(C.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario;this.opciones=[{label:C.a.ACCION_EDITAR,icon:C.a.ICON_EDITAR,disabled:!t,command:function(){return t?e.editarProductoMedida(e.objetoSeleccionado):null}},{label:C.a.ACCION_ELIMINAR,icon:C.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?e.eliminarProductoMedida(e.objetoSeleccionado):null}}]},e.prototype.nuevoProductoMedida=function(){this.utilService.verificarPermiso(C.a.ACCION_CREAR,this,!0)&&(this.cargando=!0,this.accion=C.a.ACCION_CREAR,this.frmTitulo=C.a.TITULO_FORM_NUEVO_PRODUCTO_MEDIDA,this.classTitulo=C.a.ICON_CREAR,this.invProductoMedidaTO=new u.a,this.vistaFormulario=!0,this.cargando=!1,this.activar=!1)},e.prototype.editarProductoMedida=function(e){this.utilService.verificarPermiso(C.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.accion=C.a.ACCION_EDITAR,this.frmTitulo=C.a.TITULO_FORM_EDITAR_PRODUCTO_MEDIDA,this.classTitulo=C.a.ICON_EDITAR,this.invProductoMedidaTO=new u.a(e),this.vistaFormulario=!0,this.activar=!1,this.cargando=!1)},e.prototype.guardarProductoMedida=function(e){var t=this;if(this.utilService.verificarPermiso(C.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.productoMedidaService.formatearInvProductoMedidaTO(this.invProductoMedidaTO,this),i={invProductoMedidaTO:a,accion:"I"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoMedida",i,C.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.objetoNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"I"),t.toastr.success(e.operacionMensaje,C.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,C.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(C.a.MSJ_CAMPOS_INVALIDOS,C.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.resetearFormulario=function(){this.activar=!0,this.frmTitulo=C.a.TITULO_FILTROS,this.classTitulo=C.a.ICON_FILTRAR,this.invProductoMedidaTO=new u.a,this.vistaFormulario=!1,this.accion=null},e.prototype.actualizarProductoMedida=function(e){var t=this;if(this.utilService.verificarPermiso(C.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.productoMedidaService.formatearInvProductoMedidaTO(this.invProductoMedidaTO,this),i={invProductoMedidaTO:a,accion:"M"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoMedida",i,C.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.objetoNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"U"),t.toastr.success(e.operacionMensaje,C.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,C.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(C.a.MSJ_CAMPOS_INVALIDOS,C.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarProductoMedida=function(e){var t=this;if(this.utilService.verificarPermiso(C.a.ACCION_ELIMINAR,this,!0)){var o={title:C.a.MSJ_TITULO_ELIMINAR,texto:C.a.MSJ_PREGUNTA_ELIMINAR,type:C.a.SWAL_WARNING,confirmButtonText:C.a.MSJ_SI_ELIMINAR,cancelButtonText:C.a.MSJ_CANCELAR,confirmButtonColor:C.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invProductoMedidaPK:new m.a({medEmpresa:e.medEmpresa,medCodigo:e.medCodigo})};t.api.post("todocompuWS/inventarioWebController/eliminarInvProductoMedida",a,C.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?(t.refrescarTabla(e,"D"),t.toastr.success(o.operacionMensaje,C.a.TOAST_CORRECTO)):t.toastr.warning(o.operacionMensaje,C.a.TOAST_ADVERTENCIA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}})}},e.prototype.cerrarProductoMedida=function(){this.objetoNuevoSeleccionado=this.objetoNuevoSeleccionado&&""==this.objetoNuevoSeleccionado.medCodigo?null:this.objetoNuevoSeleccionado;var e={medidaSeleccionada:this.objetoNuevoSeleccionado};this.activeModal.close(e)},e.prototype.imprimir=function(){var e=this;if(this.utilService.verificarPermiso(C.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listadoInvProductoMedidaTO:this.listadoResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteInvProductoMedidaTO",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoPDF("listaUnidadesMedida"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(C.a.MSJ_ERROR_IMPRIMIR,C.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportar=function(){var e=this;if(this.utilService.verificarPermiso(C.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listadoInvProductoMedidaTO:this.listadoResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteInvProductoMedidaTO",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListaUnidadesMedida_"):e.toastr.warning(C.a.MSJ_ERROR_EXPORTAR,C.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.productoMedidaService.generarColumnasProductoMedida(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:g.a,toolTip:b.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarFila(0),this.redimencionarColumnas()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoResultado.length>0)(a=this.listadoResultado.slice()).unshift(e),this.listadoResultado=a,this.seleccionarFila(0);break;case"U":var o=this.listadoResultado.findIndex(function(t){return t.medCodigo===e.medCodigo});(a=this.listadoResultado.slice())[o]=e,this.listadoResultado=a,this.seleccionarFila(o);break;case"D":var a;o=this.listadoResultado.findIndex(function(t){return t.medCodigo===e.medCodigo});(a=this.listadoResultado.slice()).splice(o,1),this.listadoResultado=a,this.listadoResultado.length>0&&this.seleccionarFila(0===o?0:o-1)}this.activar=!0,this.refreshGrid()},O([Object(a.Input)(),S("design:type",c.a)],e.prototype,"empresaModal",void 0),O([Object(a.Input)(),S("design:type",String)],e.prototype,"razonSocial",void 0),O([Object(a.ViewChild)("menuOpciones"),S("design:type",f.ContextMenu)],e.prototype,"menuOpciones",void 0),O([Object(a.HostListener)("window:resize",["$event"]),S("design:type",Function),S("design:paramtypes",[]),S("design:returntype",void 0)],e.prototype,"onResize",null),e=O([Object(a.Component)({selector:"app-producto-medida",template:o("nCON"),styles:[o("LfZo")]}),S("design:paramtypes",[h.ActivatedRoute,l.a,i.a,r.b,n.a,s.a,d.HotkeysService,p.a,A.a])],e)}()},4464:function(e,t){e.exports='\x3c!--solo si no es de vista pedido--\x3e\r\n<div class="card m-0" [hidden]="vistaFormulario" *ngIf="listaEmpresas?.length > 0 && !pedidos">\r\n  <div class="card-header p-1">\r\n    <strong> {{constantes.INVENTARIO_PRODUCTO_ETIQUETAS}}</strong>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n            size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n      [rowData]="listaEmpresas" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n      [suppressRowClickSelection]="true" (gridSizeChanged)="redimensionarColumnas()" [rowSelection]="rowSelection"\r\n      [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n      (gridReady)="onGridReady($event)" (rowSelected)="empresaSeleccionada = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n      (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (cellDoubleClicked)="empresaSeleccionada = $event.node.data;consultar()">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>\r\n\r\n<div class="modal-primary" *ngIf="vistaFormulario || pedidos">\r\n  <div class="card m-0">\r\n    <div class="modal-header p-2" *ngIf="pedidos">\r\n      <span class="modal-title">\r\n        <strong> {{constantes.INVENTARIO_PRODUCTO_ETIQUETAS}} - {{empresaSeleccionada?.empNombre}}\r\n          ({{empresaSeleccionada?.empCodigo}})</strong>\r\n      </span>\r\n      <button type="button" class="close" aria-label="Cerrar" (click)="minimizarModal()">\r\n        <span aria-hidden="true">&times;</span>\r\n      </button>\r\n    </div>\r\n    <div class="card-header p-1" *ngIf="!pedidos">\r\n      <b> {{constantes.INVENTARIO_PRODUCTO_ETIQUETAS}}</b>\r\n      <div class="card-header-actions">\r\n        <div class="btn-group d-none d-lg-block">\r\n          <button id="btnGuardar" *ngIf="accion===constantes.ACCION_CREAR" type="button" class="btn btn-primary btn-sm mr-1"\r\n            (click)="insertarProductoEtiquetas(frmProductoEtiquetas)">\r\n            <i class="{{constantes.ICON_GUARDAR}}"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button id="btnGuardar" *ngIf="accion===constantes.ACCION_EDITAR" type="button" class="btn btn-primary btn-sm mr-1"\r\n            (click)="insertarProductoEtiquetas(frmProductoEtiquetas)">\r\n            <i class="{{constantes.ICON_GUARDAR}}"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n          <button id="btnCancelar" type="button" class="btn btn-default btn-sm mr-1" (click)="cancelar()" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n            <i class="{{constantes.ICON_CANCELAR}}"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n          <button id="btnCancelar" type="button" class="btn btn-default btn-sm mr-1" (click)="cancelar()" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n            <i class="{{constantes.ICON_REGRESAR}}"></i> {{constantes.LABEL_REGRESAR}}</button>\r\n        </div>\r\n        <div class="btn-group d-lg-none">\r\n          <button id="btnGuardar" *ngIf="accion===constantes.ACCION_CREAR" type="button" class="btn btn-primary btn-sm mr-1"\r\n            (click)="insertarProductoEtiquetas(frmProductoEtiquetas)">\r\n            <i class="{{constantes.ICON_GUARDAR}}"></i> </button>\r\n          <button id="btnGuardar" *ngIf="accion===constantes.ACCION_EDITAR" type="button" class="btn btn-primary btn-sm mr-1"\r\n            (click)="insertarProductoEtiquetas(frmProductoEtiquetas)">\r\n            <i class="{{constantes.ICON_GUARDAR}}"></i> </button>\r\n          <button id="btnCancelar" type="button" class="btn btn-default btn-sm mr-1" (click)="cancelar()" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n            <i class="{{constantes.ICON_CANCELAR}}"></i> </button>\r\n          <button id="btnCancelar" type="button" class="btn btn-default btn-sm mr-1" (click)="cancelar()" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n            <i class="{{constantes.ICON_REGRESAR}}"></i></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="modal-body" [ngClass]="{\'block-div\':accion===constantes.ACCION_CONSULTAR}">\r\n      <div class="row">\r\n        <form #frmProductoEtiquetas=\'ngForm\' autocomplete="off" class="col-lg-12 col-md-12">\r\n          \x3c!--PRECIOS--\x3e\r\n          <div class="card mb-0" *ngIf="!pedidos">\r\n            <div class="card-header p-1">\r\n              <i class="{{constantes.ICON_CREAR}}"></i>\r\n              <b> {{constantes.TITULO_CONFIGURACION_PRECIOS}}</b>\r\n            </div>\r\n            <div class="car-body p-1">\r\n              <div class="row p-2">\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 1</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio01" name="eprecio01" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" required appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 2</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio02" name="eprecio02" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 3</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio03" name="eprecio03" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 4</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio04" name="eprecio04" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 5</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio05" name="eprecio05" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 6</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio06" name="eprecio06" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 7</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio07" name="eprecio07" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 8</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio08" name="eprecio08" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 9</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio09" name="eprecio09" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 1</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio10" name="eprecio10" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 11</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio11" name="eprecio11" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 12</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio12" name="eprecio12" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 13</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio13" name="eprecio13" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 14</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio14" name="eprecio14" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 15</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio15" name="eprecio15" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_PRECIO}} 16</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.eprecio16" name="eprecio16" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \x3c!--COSTOS--\x3e\r\n          <div class="card mb-0">\r\n            <div class="card-header p-1" *ngIf="pedidos">\r\n              <i class="{{constantes.ICON_CREAR}}"></i>\r\n              <b> {{constantes.INVENTARIO_PRODUCTO_ETIQUETAS}}</b>\r\n              <div class="card-header-actions">\r\n                <div class="btn-group">\r\n                  <button *ngIf="accion===constantes.ACCION_CREAR" type="button" class="btn btn-primary btn-sm mr-1"\r\n                    (click)="insertarProductoEtiquetas(frmProductoEtiquetas)">\r\n                    <i class="{{constantes.ICON_GUARDAR}}"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n                  <button *ngIf="accion===constantes.ACCION_EDITAR" type="button" class="btn btn-primary btn-sm mr-1"\r\n                    (click)="insertarProductoEtiquetas(frmProductoEtiquetas)">\r\n                    <i class="{{constantes.ICON_GUARDAR}}"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n                  <button type="button" class="btn btn-default btn-sm" (click)="minimizarModal()">\r\n                    <i class="{{constantes.ICON_CANCELAR}}"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="card-header p-1" *ngIf="!pedidos">\r\n              <i class="{{constantes.ICON_CREAR}}"></i>\r\n              <b> {{constantes.TITULO_CONFIGURACION_COSTOS}}</b>\r\n            </div>\r\n            <div class="car-body p-1">\r\n              <div class="row p-2">\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_COSTO}} 1</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.ecosto01" name="ecosto01" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" required appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_COSTO}} 2</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.ecosto02" name="ecosto02" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_COSTO}} 3</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.ecosto03" name="ecosto03" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_COSTO}} 4</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.ecosto04" name="ecosto04" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-4">\r\n\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_COSTO}} 5</b>\r\n                    </label>\r\n                    <input type="text" [(ngModel)]="invProductoEtiquetas.ecosto05" name="ecosto05" class="form-control form-control-sm text-uppercase"\r\n                      placeholder="{{constantes.TAG_OPCIONAL}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"4EM/":function(e,t,o){"use strict";o.d(t,"a",function(){return p});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("Ip0R"),l=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listaContabilizarCorridaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/getListaContabilizarCorridaTO",e,o).then(function(e){e&&e.extraInfo&&e.extraInfo.length>1?t.despuesDeListaContabilizarCorridaTO(e.extraInfo):e&&e.extraInfo&&1===e.extraInfo.length?a.toastr.warning(s.a.MSJ_NO_RESULTADOS,s.a.TAG_AVISO):a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarModificarContabilizarCorrida=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/insertarModificarContabilizarCorrida",e,o).then(function(e){e&&e.extraInfo?(a.utilService.generarSwal(s.a.TITULO_IPP_CONTABILIZAR_CIERRE_CORRIDAS,s.a.SWAL_SUCCESS,e.operacionMensaje),t.limpiarResultado(),t.enviarActivar.emit(!1)):a.utilService.generarSwal(s.a.TITULO_IPP_CONTABILIZAR_CIERRE_CORRIDAS,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){var e=this;return[{headerName:s.a.TAG_SECTOR,field:"secCodigo",width:110,minWidth:110,cellClass:function(t){return e.negritaSubtotales(t)+" text-md-left"}},{headerName:s.a.TAG_PISCINA,field:"pisNumero",width:110,minWidth:110,cellClass:function(t){return e.negritaSubtotales(t)+" text-md-left"}},{headerName:s.a.TAG_IPP_CORRIDA,field:"rcCorridaNumero",width:110,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:s.a.IPP+" "+s.a.TAG_CORRIDA,text:s.a.TAG_IPP_CORRIDA},cellClass:function(t){return e.negritaSubtotales(t)+" text-md-left"}},{headerName:s.a.TAG_DESDE,field:"rcFechaDesde",width:115,minWidth:115,cellClass:function(t){return e.negritaSubtotales(t)+" text-md-left"}},{headerName:s.a.TAG_HASTA,field:"rcFechaHasta",width:115,minWidth:115,cellClass:function(t){return e.negritaSubtotales(t)+" text-md-left"}},{headerName:s.a.TAG_COSTO,field:"rcCosto",width:110,cellClass:function(t){return e.negritaSubtotales(t)+" text-md-right"},valueFormatter:this.formatearTotales},{headerName:s.a.TAG_IPP_DIRECTO,field:"rcDirecto",width:110,minWidth:110,cellClass:function(t){return e.negritaSubtotales(t)+" text-md-right"},valueFormatter:this.formatearTotales,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:s.a.IPP+" "+s.a.TAG_DIRECTO,text:s.a.TAG_IPP_DIRECTO}},{headerName:s.a.TAG_IPP_INDIRECTO,field:"rcIndirecto",width:110,minWidth:110,cellClass:function(t){return e.negritaSubtotales(t)+" text-md-right"},valueFormatter:this.formatearTotales,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:s.a.IPP+" "+s.a.TAG_INDIRECTO,text:s.a.TAG_IPP_INDIRECTO}},{headerName:s.a.TAG_TRANSFERENCIA,field:"rcCostoTransferencia",width:110,minWidth:110,cellClass:function(t){return e.negritaSubtotales(t)+" text-md-right"},valueFormatter:this.formatearTotales}]},e.prototype.formatearTotales=function(e){return new c.DecimalPipe("en-US").transform(e.value,"1.2-2")},e.prototype.negritaSubtotales=function(e){return e.data&&e.data.empCodigo?"":"tr-negrita"},e=l([Object(a.Injectable)({providedIn:"root"}),d("design:paramtypes",[i.a,r.b,n.a])],e)}()},"4aKD":function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("Ip0R"),l=o("gLZI"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listautilidadesPrecalculadas=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getRhFunCalcularUtilidades",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarutilidadesPrecalculadas(e.extraInfo):(t.despuesDeListarutilidadesPrecalculadas([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){return[{headerName:s.a.TAG_IDENTIFICACION,field:"utiId",width:130,minWidth:130},{headerName:s.a.TAG_APELLIDOS_Y_NOMBRES,width:200,minWidth:200,valueGetter:function(e){return e.data.utiNombres+" "+e.data.utiApellidos}},{headerName:s.a.TAG_GENERO,field:"utiGenero",width:80,minWidth:80},{headerName:s.a.TAG_FECHA_INGRESO,field:"utiFechaIngreso",width:120,minWidth:120},{headerName:s.a.TAG_FECHA_SALIDA,field:"utiFechaSalida",width:120,minWidth:120},{headerName:s.a.TAG_CARGO,field:"utiCargo",width:120,minWidth:120},{headerName:s.a.TAG_CARGAS_FAMILIARES,field:"utiCargasFamiliares",width:130,minWidth:130,valueFormatter:this.formatearA2Decimales,cellClass:"text-right"},{headerName:s.a.TAG_DIAS_LABORADOS,field:"utiDiasLaborados",width:130,minWidth:130,cellClass:"text-right"},{headerName:s.a.TAG_V_UTILIDADES,field:"utiValorUtilidades",width:100,minWidth:100,valueFormatter:this.formatearA2Decimales,cellClass:"text-right",headerComponentFramework:l.a,headerComponentParams:{class:"",tooltip:s.a.TAG_VALOR_UTILIDADES,text:s.a.TAG_V_UTILIDADES}},{headerName:s.a.TAG_V_SUELDO,field:"utiValorSueldos",width:130,minWidth:130,valueFormatter:this.formatearA2Decimales,cellClass:"text-right",headerComponentFramework:l.a,headerComponentParams:{class:"",tooltip:s.a.TAG_VALOR_SUELDO,text:s.a.TAG_V_SUELDO}},{headerName:s.a.TAG_V_BONOS,field:"utiValorBonos",width:130,minWidth:130,valueFormatter:this.formatearA2Decimales,cellClass:"text-right",headerComponentFramework:l.a,headerComponentParams:{class:"",tooltip:s.a.TAG_VALOR_BONOS,text:s.a.TAG_V_BONOS}},{headerName:s.a.TAG_V_XIII,field:"utiValorXiii",width:130,minWidth:130,valueFormatter:this.formatearA2Decimales,cellClass:"text-right",headerComponentFramework:l.a,headerComponentParams:{class:"",tooltip:s.a.TAG_VALOR_XIII,text:s.a.TAG_V_XIII}},{headerName:s.a.TAG_V_XIV,field:"utiValorXiv",width:130,minWidth:130,valueFormatter:this.formatearA2Decimales,cellClass:"text-right",headerComponentFramework:l.a,headerComponentParams:{class:"",tooltip:s.a.TAG_VALOR_XIV,text:s.a.TAG_V_XIV}},{headerName:s.a.TAG_V_F_RESERVA,field:"utiValorFondoReserva",width:130,minWidth:130,valueFormatter:this.formatearA2Decimales,cellClass:"text-right",headerComponentFramework:l.a,headerComponentParams:{class:"",tooltip:s.a.TAG_VALOR_FONDO_RESERVA,text:s.a.TAG_V_F_RESERVA}},{headerName:s.a.TAG_VALOR_SUELDO_DIGNO,field:"utiValorSalarioDigno",width:130,minWidth:130,valueFormatter:this.formatearA2Decimales,cellClass:"text-right",headerComponentFramework:l.a,headerComponentParams:{class:"",tooltip:s.a.TAG_VALOR_SUELDO_DIGNO,text:s.a.TAG_V_S_DIGNO}},{headerName:s.a.TAG_V_U_ANTERIOR,field:"utiValorUtilidadAnterior",width:100,minWidth:100,valueFormatter:this.formatearA2Decimales,cellClass:"text-right",headerComponentFramework:l.a,headerComponentParams:{class:"",tooltip:s.a.TAG_VALOR_UTILIDAD_ANTERIOR,text:s.a.TAG_V_U_ANTERIOR}},{headerName:s.a.TAG_V_IMPUESTO,field:"utiValorXiv",width:100,minWidth:100,valueFormatter:this.formatearA2Decimales,cellClass:"text-right",headerComponentFramework:l.a,headerComponentParams:{class:"",tooltip:s.a.TAG_VALOR_IMPUESTO,text:s.a.TAG_V_IMPUESTO}}]},e.prototype.formatearA2Decimales=function(e){return new c.DecimalPipe("en-US").transform(e.value,"1.2-2")},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[i.a,r.b,n.a])],e)}()},"4b4a":function(e,t,o){"use strict";o.d(t,"a",function(){return f});var a=o("CcnG"),i=o("EnEm"),r=o("nR5P"),n=o("CEfs"),s=o("yccp"),c=o("mwBN"),l=o("madF"),d=o("gLZI"),p=o("rx3f"),u=o("zkCp"),h=o("8fiX"),m=o("ZYCi"),C=o("EF/R"),v=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},A=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,o,a,r,n){this.route=e,this.utilService=t,this.atajoService=o,this.filasService=a,this.empresaService=r,this.auth=n,this.cargando=!1,this.accion=null,this.vistaFormulario=!1,this.constantes=c.a,this.opciones=[],this.listaEmpresas=[],this.listadoResultado=[],this.empresaSeleccionada=new h.a,this.titulo="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new i.a,this.rowClassRules={},this.configuracionCorreo=!1,this.administracionEmpresa=!1,this.route.snapshot.data.administracionEmpresa?(this.listarEmpresasParaAdministracion(),this.administracionEmpresa=!0,this.titulo=c.a.ADMINISTRACION_EMPRESAS):(this.listaEmpresas=this.route.snapshot.data.configuracionCorreo,this.configuracionCorreo=!0,this.titulo=c.a.PEDIDOS_CONFIGURACION_CORREO,this.listadoResultado=this.listaEmpresas)}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),this.iniciarAtajos(),this.iniciarAgGrid()},e.prototype.listarEmpresasParaAdministracion=function(){var e={empresa:c.a.KEY_EMPRESA_SELECT,usrCodigo:this.auth.getCodigoUser()};this.empresaService.listarEmpresasParaAdministracion(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarEmpresasParaAdministracion=function(e){this.listaEmpresas=e,this.listadoResultado=this.listaEmpresas},e.prototype.iniciarAtajos=function(){this.atajoService.add(new s.Hotkey(c.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimir");return t&&t.click(),!1})),this.atajoService.add(new s.Hotkey(c.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportar");return t&&t.click(),!1}))},e.prototype.generarOpciones=function(){var e=this,t=!this.configuracionCorreo||this.empresaSeleccionada.listaSisPermisoTO.gruModificar;this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,command:function(t){return e.consultarEmpresa()}},{label:c.a.ACCION_EDITAR,icon:c.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editarEmpresa():null}}]},e.prototype.editarEmpresa=function(){this.vistaFormulario=!0,this.accion=c.a.ACCION_EDITAR},e.prototype.consultarEmpresa=function(){this.vistaFormulario=!0,this.accion=c.a.ACCION_CONSULTAR},e.prototype.cancelar=function(){this.vistaFormulario=!1},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.empresaService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:l.a,toolTip:d.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.empresaSeleccionada=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.getDataSelected=function(){return this.utilService.getAGSelectedData(this.gridApi)},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoResultado.length>0)(o=this.listadoResultado.slice()).unshift(e),this.listadoResultado=o;break;case"U":var o,a=this.listadoResultado.findIndex(function(t){return t.empCodigo===e.empCodigo});(o=this.listadoResultado.slice())[a]=e,this.listadoResultado=o;break;case"D":a=this.listadoResultado.findIndex(function(t){return t.empCodigo===e.empCodigo});this.listadoResultado=this.listadoResultado.filter(function(e,t){return t!=a})}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},v([Object(a.ViewChild)("menuOpciones"),A("design:type",u.ContextMenu)],e.prototype,"menuOpciones",void 0),v([Object(a.HostListener)("window:resize",["$event"]),A("design:type",Function),A("design:paramtypes",[]),A("design:returntype",void 0)],e.prototype,"onResize",null),e=v([Object(a.Component)({selector:"app-empresa",template:o("z4nk"),styles:[o("Z57A")]}),A("design:paramtypes",[m.ActivatedRoute,r.a,s.HotkeysService,n.a,p.a,C.a])],e)}()},"4sC9":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.pmEmpresa="",this.pmCodigo="",this.pmSector="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.pmEmpresa=e.pmEmpresa?e.pmEmpresa:this.pmEmpresa,this.pmCodigo=e.pmCodigo?e.pmCodigo:this.pmCodigo,this.pmSector=e.pmSector?e.pmSector:this.pmSector},e}()},"4uWv":function(e,t){e.exports=""},"586F":function(e,t){e.exports='<div class="card m-0" *ngIf="listadoVentas?.length>0" [hidden]="mostrarAccionesContabilidad">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarListado" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b>{{titulo}}</b>\r\n    <div class="card-header-actions">\r\n      <div class="btn-group d-lg-none">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirVentas" (click)="imprimirVentas()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarVentas" (click)="exportarVentas()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirVentas" (click)="imprimirVentas()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarVentas" (click)="exportarVentas()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n            size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n      [rowData]="listadoVentas" [columnDefs]="columnDefsSelected" [enableSorting]="true" (gridSizeChanged)="redimensionarColumnas()"\r\n      [rowSelection]="rowSelection" [enableColResize]="true" [context]="context" (gridReady)="onGridReady($event)"\r\n      (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n      (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (cellFocused)="filaFocused($event)"\r\n      (cellDoubleClicked)="consultarVenta()" [frameworkComponents]="frameworkComponents">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>\r\n<div *ngIf="mostrarAccionesContabilidad">\r\n  <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n    (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"5F8H":function(e,t){e.exports='<div class="modal-primary" *ngIf="mostrarModal">\r\n  <div class="card m-0">\r\n    <div class="modal-header p-2">\r\n      <h4 class="modal-title">{{constantes.TAG_DETALLE_COMPRA}}</h4>\r\n      <button type="button" class="close" style="color: white;" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n        <span>&times;</span>\r\n      </button>\r\n    </div>\r\n    <fieldset class="modal-body" [disabled]="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR">\r\n      \x3c!-- Es el detalle--\x3e\r\n      <form *ngIf="tipo === \'detalle\'">\r\n        <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n          <ng-template pTemplate="colgroup" *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col [style.width]="\'80px\'">\r\n              <col [style.width]="\'80px\'">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="footer">\r\n            \x3c!--ICE--\x3e\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_ICE}}</td>\r\n              <td class="p-0">\r\n                <input class="form-control form-control-sm text-right" required [(ngModel)]="itemCopia.detIce" name="detIce"\r\n                  [value]="itemCopia.detIce" [appAutonumeric]="autonumericCambios" [appAutonumericValue]="itemCopia.detIce"\r\n                  value="{{itemCopia.detIce}}">\r\n              </td>\r\n            </tr>\r\n            \x3c!--IRBPNR--\x3e\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_IRBPNR}}</td>\r\n              <td class="p-0">\r\n                <input class="form-control form-control-sm text-right" required [(ngModel)]="itemCopia.detOtrosImpuestos"\r\n                  name="detOtrosImpuestos" [value]="itemCopia.detOtrosImpuestos" [appAutonumeric]="autonumericCambios"\r\n                  [appAutonumericValue]="itemCopia.detOtrosImpuestos" value="{{itemCopia.detOtrosImpuestos}}">\r\n              </td>\r\n            </tr>\r\n            \x3c!--CP--\x3e\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_CP}}</td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label text-right">{{itemCopia.secCodigo}}</label>\r\n              </td>\r\n            </tr>\r\n            \x3c!--CC--\x3e\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_CC}}</td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label text-right" *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR">{{itemCopia.pisNumero?itemCopia.pisNumero:\'SIN\r\n                  CC\'}}</label>\r\n                <select class="form-control form-control-sm mousetrap" name="codigoCC" [(ngModel)]="itemCopia.pisNumero"\r\n                  *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR">\r\n                  <option selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                  <option [ngValue]="pis.pisNumero" *ngFor="let pis of listadoPiscinaTO"> {{pis.pisNombre}}\r\n                    ({{pis.pisNumero}})</option>\r\n                </select>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </form>\r\n\r\n      \x3c!--Cantidad--\x3e\r\n      <form *ngIf="tipo === \'detCantidad\'">\r\n        <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n          <ng-template pTemplate="colgroup" *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col [style.width]="\'80px\'">\r\n              <col [style.width]="\'80px\'">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="footer">\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_PRODUCTO}} </td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label">{{item.nombreProducto}}</label>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_PRODUCTO_MEDIDA}} </td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label">{{item.medidaDetalle}}</label>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_CONVERSION}} </td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label text-right">{{conversion | number :\r\n                  \'1.2-2\'}}</label>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_BULTOS}} </td>\r\n              <td class="p-0">\r\n                <input name="bultos" type="text" [(ngModel)]="bultos" class="form-control form-control-sm text-right"\r\n                  [appAutonumeric]="configAutonumeric" [value]="bultos" required>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </form>\r\n    </fieldset>\r\n    <div class="col-md-12 modal-footer">\r\n      <div class="text-center">\r\n        \x3c!--Aceptar de detalle--\x3e\r\n        <button class="btn btn-sm btn-primary" type="button" title="{{constantes.ATAJO_ACEPTAR}}" (click)="aceptarDetalle()"\r\n          *ngIf="tipo === \'detalle\' && (accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR)">\r\n          <i class="{{constantes.ICON_OK_SWAL}}"></i> {{constantes.LABEL_ACEPTAR}}</button>\r\n        \x3c!--Aceptar de cantidad--\x3e\r\n        <button class="btn btn-sm btn-primary" type="button" title="{{constantes.ATAJO_ACEPTAR}}" (click)="aceptarCantidadBultos()"\r\n          *ngIf="tipo === \'detCantidad\' && (accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR)">\r\n          <i class="{{constantes.ICON_OK_SWAL}}"></i> {{constantes.LABEL_ACEPTAR}}</button>\r\n        <button class="btn btn-sm btn-default ml-2" type="button" title="{{constantes.ATAJO_CANCELAR}}" (click)="activeModal.dismiss(\'Cross click\')">\r\n          <i class="{{constantes.ICON_CANCELAR}}"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"5Gob":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.id=null,this.empCodigo=null,this.perCodigo=null,this.tipCodigo=null,this.conNumero=null,this.conFecha=null,this.conPendiente=null,this.conAnulado=null,this.conReversado=null,this.conBloqueado=null,this.conConcepto=null,this.conDetalle=null,this.conObservaciones=null,this.conReferencia=null,this.seleccionado=!1,this.conStatus=null,this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e?e.id:this.id,this.empCodigo=e?e.empCodigo:this.empCodigo,this.perCodigo=e?e.perCodigo:this.perCodigo,this.tipCodigo=e?e.tipCodigo:this.tipCodigo,this.conPendiente=e?e.conPendiente:this.conPendiente,this.conAnulado=e?e.conAnulado:this.perCodigo,this.conReversado=e?e.conReversado:this.conReversado,this.conBloqueado=e?e.conBloqueado:this.conBloqueado,this.conConcepto=e?e.conConcepto:this.conConcepto,this.conDetalle=e?e.conDetalle:this.conDetalle,this.conObservaciones=e?e.conObservaciones:this.conObservaciones,this.conReferencia=e?e.conReferencia:this.conReferencia,this.conStatus=e?e.conStatus:this.conStatus},e}()},"5O5m":function(e,t){e.exports=""},"5TEY":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.cmEmpresa=null,this.cmCodigo=null,this.cmDetalle=null,this.cmInactivo=!1,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.cmFormaContabilizar=null,this.cmSector=null,this.cmBodega=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.cmEmpresa=e.cmEmpresa?e.cmEmpresa:this.cmEmpresa,this.cmCodigo=e.cmCodigo?e.cmCodigo:this.cmCodigo,this.cmDetalle=e.cmDetalle?e.cmDetalle:this.cmDetalle,this.cmInactivo=e.cmInactivo?e.cmInactivo:this.cmInactivo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.cmFormaContabilizar=e.cmFormaContabilizar?e.cmFormaContabilizar:this.cmFormaContabilizar,this.cmSector=e.cmSector?e.cmSector:this.cmSector,this.cmBodega=e.cmBodega?e.cmBodega:this.cmBodega},e}()},"5dnF":function(e,t){e.exports=""},"5q06":function(e,t){e.exports=""},"6AkL":function(e,t,o){"use strict";o.d(t,"a",function(){return l});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarAnxDpaProvinciaTO=function(e,t){var o=this;this.api.post("todocompuWS/anexosWebController/getComboAnxDpaProvinciaTO",{},t).then(function(t){t&&t.extraInfo?e.despuesDeListarAnxDpaProvinciaTO(t.extraInfo):(o.toastr.warning(t.operacionMensaje,"Aviso"),e.cargando=!1)}).catch(function(t){return o.utilService.handleError(t,e)})},e.prototype.listarComboAnxCantonTO=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getComboAnxCantonTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarComboAnxCantonTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarCiudadesAnxDpaProvinciaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getComboAnxDpaCantonTO",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarCiudadesAnxDpaProvinciaTO(t.extraInfo):(a.toastr.warning(t.operacionMensaje,"Aviso"),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,e)})},e=s([Object(a.Injectable)({providedIn:"root"}),c("design:paramtypes",[i.a,r.b,n.a])],e)}()},"6E6y":function(e,t,o){"use strict";o.d(t,"a",function(){return h});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("oiVT"),s=o("LG3P"),c=o("nR5P"),l=o("mwBN"),d=o("+JJ7"),p=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o,this.resultado=[],this.conEstructuraTO=new Array,this.listConCuentasTO=[]}return e.prototype.listarPlanContable=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/getConCuentas",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarPlanContable(e.extraInfo):(t.despuesDeListarPlanContable([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarPlanContable=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/insertarConCuenta",e,o).then(function(e){e&&e.operacionMensaje?t.despuesDeInsertarPlanContable(e):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.actualizarPlanContable=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/modificarConCuenta",e,o).then(function(e){e&&e.operacionMensaje?t.despuesDeActualizarPlanContable(e):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getTamanioListaConEstructura=function(e,t){var o=this;return this.api.post("todocompuWS/contabilidadWebController/getListaConEstructura",e,t).then(function(e){return e&&e.extraInfo&&e.extraInfo.length>0?o.conEstructuraTO=e.extraInfo:(o.conEstructuraTO=[new n.a],o.toastr.warning(e.operacionMensaje,"Aviso")),o.conEstructuraTO}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.getListaBuscarConCuentas=function(e,t){var o=this;return this.api.post("todocompuWS/contabilidadWebController/getListaBuscarConCuentasTO",e,t).then(function(e){return e&&e.extraInfo?o.listConCuentasTO=e.extraInfo:(o.listConCuentasTO=[],o.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO)),o.listConCuentasTO}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.obtenerConCuenta=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/obtenerConCuenta",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerConCuenta(e.extraInfo):(a.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getConteoConCuentasTO=function(e,t){var o=this;return this.api.post("todocompuWS/contabilidadWebController/getConteoConCuentasTO",e,t).then(function(e){return e&&e.extraInfo>=0?e.extraInfo:(o.toastr.error(e.operacionMensaje,l.a.TAG_AVISO),0)}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.formatoCapitalizado=function(e,t,o){if(o===t.length){var a="";(e=e.toString().toLocaleLowerCase()).toString().split(" ").forEach(function(e){a=a+e.substring(0,1).toString().toUpperCase()+e.substring(1,e.length).toString()+" "}),e=a}else e=e.toString().toUpperCase();return e},e.prototype.verificarPlanCuentaIngresadoCorrectamente=function(e,t){var o=!1;return e.length!=t.estGrupo1&&e.length!=t.estGrupo1+t.estGrupo2&&e.length!=t.estGrupo1+t.estGrupo2+t.estGrupo3&&e.length!=t.estGrupo1+t.estGrupo2+t.estGrupo3+t.estGrupo4&&e.length!=t.estGrupo1+t.estGrupo2+t.estGrupo3+t.estGrupo4+t.estGrupo5&&e.length!=t.estGrupo1+t.estGrupo2+t.estGrupo3+t.estGrupo4+t.estGrupo5+t.estGrupo6||(o=!0),o},e.prototype.buscarCuentaGrupo=function(e,t,o){var a=0,i=!1,r=this.obtenerCuentaGrupoSubString(t,o);if(0===r&&(i=!0),-1===r&&(r=0),!i)for(var n=0;n<e.length;n++){if(e[n].cuentaCodigo===t.substring(0,r))for(var s=a;s<e.length;s++){if(e[s].cuentaCodigo.lastIndexOf(t.substring(0,r))>=0){i=!0;break}i=!1}a++}return i},e.prototype.verificarGrupoCuenta=function(e,t,o){var a=this.obtenerCuentaGrupoSubString(t,o);if(0===a)return!0;var i=t.substring(0,a),r=e.findIndex(function(e){return e.cuentaCodigo===i});if(r>-1){var n=e.findIndex(function(e){return e.cuentaCodigo===t});return n>-1&&n>r}return!1},e.prototype.obtenerCuentaGrupoSubString=function(e,t){var o=-1;switch(e.length){case t.estGrupo1:o=0;break;case t.estGrupo1+t.estGrupo2:o=t.estGrupo1;break;case t.estGrupo1+t.estGrupo2+t.estGrupo3:o=t.estGrupo1+t.estGrupo2;break;case t.estGrupo1+t.estGrupo2+t.estGrupo3+t.estGrupo4:o=t.estGrupo1+t.estGrupo2+t.estGrupo3;break;case t.estGrupo1+t.estGrupo2+t.estGrupo3+t.estGrupo4+t.estGrupo5:o=t.estGrupo1+t.estGrupo2+t.estGrupo3+t.estGrupo4;break;case t.estGrupo1+t.estGrupo2+t.estGrupo3+t.estGrupo4+t.estGrupo5+t.estGrupo6:o=t.estGrupo1+t.estGrupo2+t.estGrupo3+t.estGrupo4+t.estGrupo5}return o},e.prototype.generarConCuentaTO=function(e){var t=new s.a;return t.cuentaCodigo=e.cuentaCodigo,t},e.prototype.generarColumnasPlanContable=function(e){return[{headerName:l.a.TAG_CODIGO,field:"cuentaCodigo",width:200,minWidth:200,cellClass:function(t){return t.value.length<e.tamanioEstructura?"tr-negrita ":""}},{headerName:l.a.TAG_DETALLE,field:"cuentaDetalle",width:600,minWidth:300,cellClass:function(t){return t.data.cuentaCodigo.length<e.tamanioEstructura?"tr-negrita text-whitespace":"text-whitespace"}},{headerName:l.a.TAG_ACTIVO,headerClass:"cell-header-center",field:"cuentaActivo",width:100,minWidth:100,cellRendererFramework:d.a,cellClass:"text-center"},{headerName:l.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"cuentaCodigo",width:l.a.WIDTH_OPCIONES,minWidth:l.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",headerComponent:"toolTip",headerComponentParams:{class:l.a.ICON_OPCIONES,tooltip:l.a.TAG_OPCIONES,text:""}}]},e=p([Object(a.Injectable)({providedIn:"root"}),u("design:paramtypes",[i.a,r.b,c.a])],e)}()},"6IoA":function(e,t,o){"use strict";var a=o("0dX5"),i=function(){function e(e){this.motEmpresa="",this.motDetalle="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.motEmpresa=e?e.motEmpresa:this.motEmpresa,this.motDetalle=e?e.motDetalle:this.motDetalle},e}();o.d(t,"a",function(){return r});var r=function(){function e(e){this.rhPrestamoMotivoPK=new i,this.motInactivo=!1,this.conTipo=new a.a,this.usrEmpresa="",this.usrCodigo="",this.rhEmpleadoDescuentosFijosList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.rhPrestamoMotivoPK=e?e.rhPrestamoMotivoPK:this.rhPrestamoMotivoPK,this.motInactivo=e?e.motInactivo:this.motInactivo,this.conTipo=e?e.conTipo:this.conTipo,this.usrEmpresa=e?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e?e.usrFechaInserta:this.usrFechaInserta,this.rhEmpleadoDescuentosFijosList=e?e.rhEmpleadoDescuentosFijosList:this.rhEmpleadoDescuentosFijosList},e}()},"6rmq":function(e,t){e.exports='<div class="card m-0 mb-1" *ngIf="listadoResultado?.length > 0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n      title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b placement="right" ngbTooltip="{{constantes.LABEL_CONTABILIZAR}} {{constantes.IPP}} - {{constantes.TITULO_CIERRE_CORRIDAS}}">{{constantes.TITULO_IPP_CONTABILIZAR_CIERRE_CORRIDAS}}</b>\r\n    <div class="card-header-actions">\r\n      <div class="btn-group d-lg-none">\r\n        <button id="btnContabilizar" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_CONTABILIZAR}}"\r\n          container="body" (click)="empresaSeleccionada.listaSisPermisoTO.gruCrear ? contabilizar() : null" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruCrear"\r\n          title="{{constantes.ATAJO_CONTABILIZAR}}">\r\n          <i class="{{constantes.ICON_CALCULADORA}}" aria-hidden="true"></i>\r\n        </button>\r\n        <button id="btnCancelar" type="button" class="btn btn-sm btn-outline mr-1" placement="top" ngbTooltip="{{constantes.LABEL_CANCELAR}}"\r\n          container="body" (click)="limpiarResultado()" title="{{constantes.ATAJO_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button id="btnContabilizar" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_CONTABILIZAR}}"\r\n          container="body" (click)="empresaSeleccionada.listaSisPermisoTO.gruCrear ? contabilizar() : null" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruCrear"\r\n          title="{{constantes.ATAJO_CONTABILIZAR}}">\r\n          <i class="{{constantes.ICON_CALCULADORA}}" aria-hidden="true"> </i> {{constantes.LABEL_CONTABILIZAR}}\r\n        </button>\r\n        <button id="btnCancelar" type="button" class="btn btn-sm btn-outline mr-1" placement="top" ngbTooltip="{{constantes.LABEL_CANCELAR}}"\r\n          container="body" (click)="limpiarResultado()" title="{{constantes.ATAJO_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-0" *ngIf="listadoResultado.length>0">\r\n    <app-tabla-ipp [columnas]="columnDefs" [tamanio]="tamanio" [filasTiempo]="filasTiempo" [listadoResultado]="listadoResultado"></app-tabla-ipp>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"7L+h":function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_TIPO_CONTRIBUYENTE}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}</strong>\r\n    </span>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrarTipoContribuyente()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div [ngClass]="{\'modal-body\': esModal}">\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card mb-0">\r\n          <div class="card-header p-1">\r\n            <i class="{{classTitulo}}"></i>\r\n            <b>{{frmTitulo}}</b>\r\n            <div class="card-header-actions" *ngIf="vistaFormulario">\r\n              <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardarTipoContribuyente" type="button" (click)="guardarTipoContribuyente(frmtipocont)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardarTipoContribuyente" type="button" (click)="actualizarTipoContribuyente(frmtipocont)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button (click)="resetearFormulario();" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n                title="{{constantes.ATAJO_CANCELAR}}" *ngIf="listaIncClienteCategoriaComboListado.length!=0">\r\n                <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            <form #frmtipocont="ngForm" autocomplete="off">\r\n              <div *ngIf="vistaFormulario" class="row">\r\n                <div class="form-group form-group-sm col-sm-12 col-md-5 col-lg-4">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                  </label>\r\n                  <p *ngIf="!(accion===constantes.ACCION_CREAR)" class="form-control input-sm">{{invClienteCategoriaTO.ccCodigo}}</p>\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" type="text" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                    name="vendCodigo" [(ngModel)]="invClienteCategoriaTO.ccCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n                    required maxlength="30" appUppercase>\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-info-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body" triggers="mouseenter:mouseleave"></span>\r\n                </div>\r\n                <div class="form-group form-group-sm col-sm-12 col-md-7 col-lg-8">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_NOMBRE}}</strong>\r\n                  </label>\r\n                  <input [appFocus]="accion===constantes.ACCION_EDITAR" name="vendNombre" [(ngModel)]="invClienteCategoriaTO.ccDetalle"\r\n                    class="form-control form-control-sm mousetrap text-uppercase" required minlength="3" maxlength="1000"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" appUppercase>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div [ngClass]="{\'col-lg-8 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n        <div class="card mb-0" *ngIf="listaIncClienteCategoriaComboListado?.length > 0 && !vistaFormulario">\r\n          <div class="card-header p-1">\r\n            <strong>{{constantes.INVENTARIO_TIPO_CONTRIBUYENTE}}</strong>\r\n            <div class="card-header-actions" *ngIf="!vistaFormulario">\r\n              <button id="btnNuevoTipoContribuyente" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoTipoContribuyente()"\r\n                [disabled]="!frmtipocont.form.valid || !empresaSeleccionada.listaSisPermisoTO.gruCrear" title="{{constantes.ATAJO_NUEVO}}"\r\n                ngbTooltip="{{constantes.LABEL_NUEVO}}">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \x3c!--Listado de tipo contribuyente--\x3e\r\n          <div class="card-body p-0">\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group p-1">\r\n                  <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                    size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                    size="100">\r\n                  <div class="input-group-append">\r\n                    <span class="input-group-text">\r\n                      <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div class="float-right pr-1">\r\n                  <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                    maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--listado de cliente listado--\x3e\r\n            <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 215px);" class="ag-theme-balham"\r\n              [rowData]="listaIncClienteCategoriaComboListado" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n              [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [context]="context"\r\n              (gridSizeChanged)="redimensionarColumnas()" (gridReady)="onGridReady($event)" (rowSelected)="tipoContribuyenteSeleccionado = $event.node.data"\r\n              (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()"\r\n              (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimensionarColumnas()" (cellFocused)="filaFocused($event)">\r\n            </ag-grid-angular>\r\n          </div>\r\n          <p-contextMenu #menuOpciones [model]="opciones" appendTo="body" [baseZIndex]="1100"></p-contextMenu>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"7klv":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.scatEmpresa="",this.scatCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.scatEmpresa=e.scatEmpresa?e.scatEmpresa:this.scatEmpresa,this.scatCodigo=e.scatCodigo?e.scatCodigo:this.scatCodigo},e}()},"7rNK":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.id=0,this.antPeriodo="",this.antTipo="",this.antNumero="",this.antSector="",this.antFecha="",this.antValor=0,this.antProveedorCodigo="",this.antProveedorNombre="",this.antObservaciones="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.antPeriodo=e.antPeriodo?e.antPeriodo:this.antPeriodo,this.antTipo=e.antTipo?e.antTipo:this.antTipo,this.antNumero=e.antNumero?e.antNumero:this.antNumero,this.antSector=e.antSector?e.antSector:this.antSector,this.antFecha=e.antFecha?e.antFecha:this.antFecha,this.antValor=e.antValor?e.antValor:this.antValor,this.antProveedorCodigo=e.antProveedorCodigo?e.antProveedorCodigo:this.antProveedorCodigo,this.antProveedorNombre=e.antProveedorNombre?e.antProveedorNombre:this.antProveedorNombre,this.antObservaciones=e.antObservaciones?e.antObservaciones:this.antObservaciones},e}()},"7uDO":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.xiiiDescripcion="",this.xiiiDesde=null,this.xiiiHasta=null,this.xiiiFechaMaximaPago=null,this.periodoSecuencial=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.xiiiDescripcion=e.xiiiDescripcion?e.xiiiDescripcion:this.xiiiDescripcion,this.xiiiDesde=e.xiiiDesde?e.xiiiDesde:this.xiiiDesde,this.xiiiHasta=e.xiiiHasta?e.xiiiHasta:this.xiiiHasta,this.xiiiFechaMaximaPago=e.xiiiFechaMaximaPago?e.xiiiFechaMaximaPago:this.xiiiFechaMaximaPago,this.periodoSecuencial=e.periodoSecuencial?e.periodoSecuencial:this.periodoSecuencial},e}()},"8Cr9":function(e,t){e.exports='<div class="card mb-0">\r\n  <div class="card-header-azul">\r\n    <span>\r\n      <b> {{constantes.TAG_PRODUCTO_CONFIGURACION_PRECIOS}}</b>\r\n    </span>\r\n    <div class="card-header-actions">\r\n      <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n        <span aria-hidden="true">&times;</span>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div class="card-body pb-1">\r\n    <span><b>{{constantes.TAG_PRECIOS}}</b></span>\r\n    <div class="row">\r\n      <div class="form-group col-lg-12 mb-0">\r\n        <p-table [columns]="scrollableCols" [frozenColumns]="congeladasCol" [value]="inputs" [scrollable]="true"\r\n          frozenWidth="100px">\r\n          <ng-template pTemplate="colgroup" let-columns>\r\n            <colgroup>\r\n              <col *ngFor="let col of columns" style="width: 130px;">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="header" let-columns>\r\n            <tr>\r\n              <th *ngFor="let col of columns" class="text-uppercase" style="width: 100%">\r\n                {{col.header}}\r\n              </th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate="body" let-rowData let-columns="columns">\r\n            <tr>\r\n              <td *ngFor="let col of columns; let i = index" class="p-0">\r\n                <label [hidden]="col.field != \'tag\'" class="pb-1">{{rowData[col.field]}}</label>\r\n                <input id="{{rowData[\'tag\']}}_{{i}}" [hidden]="col.field == \'tag\'" [appAutonumeric]="configAutonumeric" [appAutonumericValue]="rowData[col.field]"\r\n                  value="{{rowData[col.field]}}" [(ngModel)]="rowData[col.field]" (blur)="cambiarValor(rowData[col.field], rowData[\'tag\'], i)"\r\n                  type="text" name="{{i}}_{{rowData[\'tag\']}}" class="form-control form-control-sm mousetrap">\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n    <span><b>{{constantes.TAG_COSTO_REFERENCIAL_OC}}</b></span>\r\n    <div class="row">\r\n      <div class="form-group col-lg-12 mb-0">\r\n        <p-table [columns]="scrollableColsCostos" [frozenColumns]="congeladasColCostos" [value]="inputsCostos"\r\n          [scrollable]="true" frozenWidth="100px">\r\n          <ng-template pTemplate="colgroup" let-columns>\r\n            <colgroup>\r\n              <col *ngFor="let col of columns" style="width: 130px;">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="header" let-columns>\r\n            <tr>\r\n              <th *ngFor="let col of columns" class="text-uppercase">\r\n                {{col.header}}\r\n              </th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate="body" let-rowData let-columns="columns">\r\n            <tr>\r\n              <td *ngFor="let col of columns; let i = index" class="p-0">\r\n                <label [hidden]="col.field != \'tag\'" class="pb-1">{{rowData[col.field]}}</label>\r\n                <input [hidden]="col.field == \'tag\'" [appAutonumeric]="configAutonumeric" [appAutonumericValue]="rowData[col.field]"\r\n                  value="{{rowData[col.field]}}" [(ngModel)]="rowData[col.field]" (blur)="cambiarValor(rowData[col.field], rowData[\'tag\'], i)"\r\n                  type="text" name="{{i}}_{{rowData[\'tag\']}}" class="form-control form-control-sm mousetrap">\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n    <div class="text-right pb-2">\r\n      <button class="btn btn-sm btn-primary" type="button" id="btnGuardar" title="{{constantes.ATAJO_GUARDAR}}" (click)="aceptar()">\r\n        <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_ACEPTAR}}</button>\r\n    </div>\r\n  </div>\r\n</div>'},"8G1n":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.bcSecuencia=0,this.bcDetalle="",this.bcValor=0,this.bcValorFijo=!1,this.bcInactivo=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.bcSecuencia=e?e.bcSecuencia:this.bcSecuencia,this.bcDetalle=e?e.bcDetalle:this.bcDetalle,this.bcValor=e?e.bcValor:this.bcValor,this.bcValorFijo=e?e.bcValorFijo:this.bcValorFijo,this.bcInactivo=e?e.bcInactivo:this.bcInactivo},e}()},"8Jgg":function(e,t){e.exports='<form #frmProveedorDatos=\'ngForm\' autocomplete="off" class="card m-0" *ngIf="accion !== constantes.ACCION_ELIMINAR && accion !== constantes.ACCION_EDITAR_ESTADO">\r\n  <div class="card-header p-1" style="padding: 0.5rem 0.5rem;">\r\n    <button class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="cambiarEstadoActivar(activar)" type="button">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{tituloFormulario}} - </b>\r\n    <strong class="text-primary">{{empresaSeleccionada.empNombre}}</strong>\r\n    <div class="card-header-actions">\r\n      <div class="btn-group d-lg-none">\r\n        <ng-template #tipContentGuardar>{{constantes.LABEL_GUARDAR}}</ng-template>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentGuardar" id="btnGuardarProveedor"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? insertarProveedor(frmProveedorDatos) : null">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentGuardar" id="btnGuardarProveedor"\r\n          *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_EDITAR, true) ? actualizarProveedor(frmProveedorDatos) : null">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <ng-template #tipContentCancelar>{{accion ===\r\n          constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}</ng-template>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarProveedor"\r\n          [ngbTooltip]="tipContentCancelar" (click)="cerrarFormulario()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarProveedor" *ngIf="accion === constantes.ACCION_CREAR"\r\n          title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? insertarProveedor(frmProveedorDatos) : null"\r\n          [ngbTooltip]="tipContentGuardar">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarProveedor" *ngIf="accion === constantes.ACCION_EDITAR"\r\n          title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_EDITAR, true) ? actualizarProveedor(frmProveedorDatos) : null"\r\n          [ngbTooltip]="tipContentGuardar">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarProveedor"\r\n          (click)="cerrarFormulario()" [ngbTooltip]="tipContentCancelar">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i> {{accion ===\r\n          constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body p-1">\r\n    <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n      \x3c!--informacion de proveedor--\x3e\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_PROVEEDOR_INFORMACION}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionProveedor"\r\n              aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionProveedor">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_CODIGO}}</strong>\r\n              </label>\r\n              <input [appFocus]="accion === constantes.ACCION_CREAR" class="form-control form-control-sm text-uppercase mousetrap"\r\n                name="codigo" maxlength="30" type="text" placeholder="{{constantes.TAG_OPCIONAL}}" pattern="{{constantes.PATTERN_CODIGO}}"\r\n                [(ngModel)]="invProveedorTO.provCodigo" appUppercase *ngIf="accion === constantes.ACCION_CREAR">\r\n              <label *ngIf="accion !== constantes.ACCION_CREAR" class="form-control form-control-sm text-uppercase label-input">{{invProveedorTO.provCodigo}}</label>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_TIPO_IDENTIFICACION}}</strong>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="identificacion" [(ngModel)]="invProveedorTO.provTipoId"\r\n                (ngModelChange)="establecerLongitudIdentificacion();validarIdentificacion()" required>\r\n                <option [value]="" disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="identificacion.tiCodigo" *ngFor="let identificacion of listadoTipoIdentificacion">\r\n                  {{identificacion.tiDetalle}}</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_NUMERO_IDENTIFICACION}}</strong>\r\n              </label>\r\n              <input *ngIf="empresaExtranjera && accion !== constantes.ACCION_CONSULTAR" type="text" name="provId"\r\n                placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invProveedorTO.provId" class="form-control form-control-sm text-uppercase"\r\n                required [disabled]="!invProveedorTO.provTipoId" (blur)="validarIdentificacion()" appUppercase>\r\n              <input *ngIf="!empresaExtranjera && accion !== constantes.ACCION_CONSULTAR" [ngClass]="{\'has-error\':rptaCedula || rptaRepetido}"\r\n                type="text" name="provId" pKeyFilter="pint" (keypress)="soloNumeros($event)" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                minlength="{{digitosCedulaMin}}" maxlength="{{digitosCedulaMax}}" [(ngModel)]="invProveedorTO.provId"\r\n                class="form-control form-control-sm text-uppercase mousetrap" required [disabled]="!invProveedorTO.provTipoId"\r\n                (blur)="validarIdentificacion()">\r\n              <label *ngIf="accion === constantes.ACCION_CONSULTAR" class="form-control form-control-sm text-uppercase label-input">{{invProveedorTO.provId}}</label>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_TIPO_CONTRIBUYENTE}}</strong>\r\n                &nbsp;\r\n                <a (click)="mostrarTipoContribuyente()" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="categoria" [(ngModel)]="invProveedorTO.provCategoria">\r\n                <option value="" disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="categoria.pcCodigo" *ngFor="let categoria of listadoCategorias">\r\n                  {{categoria.pcDetalle}}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_RAZON_SOCIAL}}</strong>\r\n              </label>\r\n              <input type="text" name="provRazonSocial" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invProveedorTO.provRazonSocial"\r\n                appUppercase class="form-control form-control-sm text-uppercase mousetrap" required (blur)="espacios()">\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_NOMBRE_COMERCIAL}}</strong>\r\n              </label>\r\n              <input type="text" name="provNombre" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="invProveedorTO.provNombreComercial"\r\n                appUppercase class="form-control form-control-sm text-uppercase mousetrap">\r\n            </div>\r\n          </div>\r\n\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-3">\r\n              <label ngbTooltip="{{constantes.LABEL_TELEFONO_CONVENCIONAL}}">\r\n                <strong>{{constantes.TAG_TELEFONO_CONVENCIONAL}}</strong>\r\n              </label>\r\n              <input class="form-control form-control-sm text-uppercase mousetrap" name="provTelefono" maxlength="130"\r\n                type="text" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="invProveedorTO.provTelefono"\r\n                (keypress)="soloNumeros($event)">\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3">\r\n              <label ngbTooltip="{{constantes.LABEL_TELEFONO_CELULAR}}">\r\n                <strong>{{constantes.TAG_TELEFONO_CELULAR}}</strong>\r\n              </label>\r\n              <input class="form-control form-control-sm text-uppercase mousetrap" name="provCelular" maxlength="130"\r\n                type="text" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="invProveedorTO.provCelular"\r\n                (keypress)="soloNumeros($event)">\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3">\r\n              <label>\r\n                <strong>{{constantes.TAG_EMAIL}}\r\n                  <span class="fa fa-info-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                    autoClose="outside" ngbPopover="{{constantes.MSJ_EMAIL}}" container="body"></span>\r\n                </strong>\r\n              </label>\r\n              <p-chips [(ngModel)]="correos" name="emails" class="mousetrap" [inputStyleClass]="accion===constantes.ACCION_CREAR || correos.length==0 ? \r\n              \'form-control form-control-sm grande text-lowercase\' : \'form-control form-control-sm chico text-lowercase\'"\r\n                [allowDuplicate]="false" (onAdd)="clickear(\'E\')" addOnTab="false" id="chip" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                id="correosolo" [disabled]="accion === constantes.ACCION_CONSULTAR" (onBlur)="tamanioGrande(1)"\r\n                (onFocus)="tamanioChico(1)">\r\n                <ng-template let-item pTemplate="item">\r\n                  {{item}}\r\n                </ng-template>\r\n              </p-chips>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3">\r\n              <label>\r\n                <strong>{{constantes.TAG_EMAIL_COMPRA}}\r\n                  <span class="fa fa-info-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                    autoClose="outside" ngbPopover="{{constantes.MSJ_EMAIL}}" container="body"></span>\r\n                </strong>\r\n              </label>\r\n              <p-chips [(ngModel)]="correosCompra" name="emailsCompra" class="mousetrap" [inputStyleClass]="accion===constantes.ACCION_CREAR || correosCompra.length==0 ? \r\n              \'form-control form-control-sm grande text-lowercase\' : \'form-control form-control-sm chico text-lowercase\'"\r\n                [allowDuplicate]="false" (onAdd)="clickear(\'EC\')" addOnTab="false" id="chip" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                id="correocompra" [disabled]="accion === constantes.ACCION_CONSULTAR" (onBlur)="tamanioGrande(2)"\r\n                (onFocus)="tamanioChico(2)">\r\n                <ng-template let-item pTemplate="item">\r\n                  {{item}}\r\n                </ng-template>\r\n              </p-chips>\r\n              \x3c!-- <input type="text" pKeyFilter="email" pattern="[a-zA-Z0-9_.-]+@[a-zA-Z0-9.-]+\\.[a-z]{2,}((;\\s?){1}[a-zA-Z0-9_]+@[a-zA-Z0-9.-]+\\.[a-z]{2,})*$"\r\n                name="provEmailCompra" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="invProveedorTO.provEmailOrdenCompra"\r\n                appLowerCase maxlength="500\'" class="form-control form-control-sm mousetrap text-lowercase"> --\x3e\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--informacion de ubicacion de proveedor--\x3e\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_PROVEEDOR_UBICACION}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseUbicacionProveedor"\r\n              aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseUbicacionProveedor">\r\n          \x3c!--SI NO ES EXTRANJERO--\x3e\r\n          <div class="row" *ngIf="!empresaExtranjera">\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_PROVINCIA}}</strong>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="provincia" [(ngModel)]="provinciaSeleccionada"\r\n                required (ngModelChange)="listarCiudades()">\r\n                <option value="" disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="provincia" *ngFor="let provincia of listadoProvincias"> {{provincia.nombre}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_CIUDAD}}</strong>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="ciudad" [(ngModel)]="invProveedorTO.provCiudad"\r\n                required>\r\n                <option value="" disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="ciudad.nombre" *ngFor="let ciudad of listadoCiudades"> {{ciudad.nombre}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_PARROQIA}}</strong>\r\n              </label>\r\n              <input type="text" name="provParroquia" appUppercase placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [(ngModel)]="invProveedorTO.provParroquia" class="form-control form-control-sm text-uppercase mousetrap">\r\n            </div>\r\n          </div>\r\n          \x3c!--SI ES EXTRANJERO--\x3e\r\n          <div class="row" *ngIf="empresaExtranjera">\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_PROVINCIA}}</strong>\r\n              </label>\r\n              <input type="text" name="provProvincia" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invProveedorTO.provProvincia"\r\n                class="form-control form-control-sm text-uppercase mousetrap" required appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_CIUDAD}}</strong>\r\n              </label>\r\n              <input type="text" name="provCiudad" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invProveedorTO.provCiudad"\r\n                class="form-control form-control-sm text-uppercase mousetrap" required appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_PARROQIA}}</strong>\r\n              </label>\r\n              <input type="text" name="provParroquia" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invProveedorTO.provParroquia"\r\n                class="form-control form-control-sm text-uppercase mousetrap" required appUppercase>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_ZONA}}</strong>\r\n              </label>\r\n              <input type="text" name="provZona" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="invProveedorTO.provZona"\r\n                class="form-control form-control-sm text-uppercase mousetrap" appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-8">\r\n              <label>\r\n                <strong>{{constantes.TAG_DIRECCION}}</strong>\r\n              </label>\r\n              <input type="text" name="provDireccion" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invProveedorTO.provDireccion"\r\n                class="form-control form-control-sm text-uppercase mousetrap" appUppercase required maxlength="500">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \x3c!--Observaciones--\x3e\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b placement="right" ngbTooltip="{{constantes.LABEL_INFORMACION_ADICIONAL}}">\r\n            {{constantes.TAG_INFORMACION_ADICIONAL}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionAdicional"\r\n              aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionAdicional">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm form-group-sm col-md-10">\r\n              <label class="control-label">\r\n                <strong>{{constantes.TAG_OBSERVACIONES}}</strong>\r\n              </label>\r\n              <input id="observaciones" name="observaciones" [(ngModel)]="invProveedorTO.provObservaciones" class="form-control form-control-sm text-uppercase"\r\n                maxlength="1000" appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-2">\r\n              \x3c!--Relacionado--\x3e\r\n              <label class="control-label">\r\n                <strong>{{constantes.TAG_RELACIONADO}}</strong>\r\n              </label>\r\n              <div class="text-md-center pb-2">\r\n                <input type="checkbox" name="relacionado" [(ngModel)]="invProveedorTO.provRelacionado" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </div>\r\n</form>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"8RnM":function(e,t,o){"use strict";var a=o("CcnG"),i=o("8fiX"),r=o("mwBN"),n=o("EnEm"),s=o("ZYCi"),c=o("SZbH"),l=o("oVTH"),d=o("CEfs"),p=o("Ungd"),u=o("nR5P"),h=o("z5Y/"),m=o("Ip0R"),C=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},v=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvListaSaldoBodegaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaSaldoBodegaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvListaSaldoBodegaTO(e.extraInfo):(t.despuesDeListarInvListaSaldoBodegaTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){var e=[];return e.push({headerName:r.a.TAG_BODEGA,field:"sbBodega",width:100,minWidth:100,cellClass:function(e){return e.data.sbProducto?"text-whitespace":"tr-negrita"},hide:function(e){return!e.data.sbProducto}},{headerName:r.a.TAG_CODIGO,field:"sbProducto",width:150,minWidth:150,cellClass:function(e){return e.data.sbProducto?"text-whitespace":"tr-negrita"}},{headerName:r.a.TAG_NOMBRE,field:"sbNombre",width:250,minWidth:250,cellClass:function(e){return e.data.sbProducto?"text-whitespace":"tr-negrita"}},{headerName:r.a.TAG_MEDIDA,field:"sbMedida",width:150,minWidth:150,cellClass:function(e){return e.data.sbProducto?"text-whitespace":"tr-negrita"}},{headerName:r.a.TAG_STOCK,field:"sbStock",width:150,minWidth:150,valueFormatter:f,cellClass:function(e){return e.data.sbProducto?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:r.a.TAG_COSTO,field:"sbCosto",width:150,minWidth:150,valueFormatter:f,cellClass:function(e){return e.data.sbProducto?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:r.a.TAG_TOTAL,field:"sbTotal",width:150,minWidth:150,valueFormatter:f,cellClass:function(e){return e.data.sbProducto?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:r.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:r.a.WIDTH_OPCIONES,minWidth:r.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(e){return e.data.sbProducto?{icono:r.a.ICON_CONSULTAR,tooltip:r.a.MSJ_CONSULTAR_KARDEX,accion:r.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:r.a.ICON_OPCIONES,tooltip:r.a.TAG_OPCIONES,text:""}}),e},e=C([Object(a.Injectable)({providedIn:"root"}),v("design:paramtypes",[h.a,c.b,u.a])],e)}();function f(e){return new m.DecimalPipe("en-US").transform(e.value,"1.2-2")}var g=o("yccp"),b=o("VO10"),O=o("RDZc"),S=o("wd/R"),I=o("yqOf"),E=o("sXuD"),R=o("gLZI"),T=o("/TJv");o.d(t,"a",function(){return N});var _=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},P=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},N=function(){function e(e,t,o,a,s,c,l,d,p){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=a,this.saldoBodegaService=s,this.archivoService=c,this.bodegaService=l,this.productoService=d,this.utilService=p,this.listaEmpresas=[],this.listaResultadoSaldoBodega=[],this.listaBodegas=[],this.empresaSeleccionada=new i.a,this.bodegaSeleccionado=new b.a,this.constantes=r.a,this.cargando=!1,this.activar=!1,this.filasTiempo=new n.a,this.es={},this.fechaHasta=new Date,this.mostrarKardex=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return e.prototype.ngOnInit=function(){this.constantes=r.a,S.locale("es"),this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.saldoBodegaInv,this.screamXS=window.innerWidth<r.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtgajosTeclado()},e.prototype.listaBodegasTO=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivo:!0};this.bodegaService.listarInvListaBodegasTO(e,this,r.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvListaBodegasTO=function(e){var t=this;this.listaBodegas=e,this.listaBodegas.length>0?this.bodegaSeleccionado=this.bodegaSeleccionado&&this.bodegaSeleccionado.bodCodigo?this.listaBodegas.find(function(e){return e.bodCodigo===t.bodegaSeleccionado.bodCodigo}):this.listaBodegas[0]:this.bodegaSeleccionado=null,this.cargando=!1},e.prototype.cambiarEmpresaSeleccionada=function(){r.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.bodegaSeleccionado=null,this.limpiarResultado(),this.listaBodegasTO()},e.prototype.generarAtgajosTeclado=function(){this.atajoService.add(new g.Hotkey(r.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarSaldoBodega");return e&&e.click(),!1})),this.atajoService.add(new g.Hotkey(r.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarSaldoBodega");return e&&e.click(),!1})),this.atajoService.add(new g.Hotkey(r.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarSaldoBodega");return e&&e.click(),!1})),this.atajoService.add(new g.Hotkey(r.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirSaldoBodega");return e&&e.click(),!1}))},e.prototype.ejecutarAccion=function(e){this.saldoBodegaSeleccionada=e,this.consultarKardex()},e.prototype.consultarKardex=function(){if(this.saldoBodegaSeleccionada&&this.saldoBodegaSeleccionada.sbProducto){var e=new Date(this.utilService.obtenerFechaInicioMes());e.setMonth(e.getMonth()-1),this.objetoDesdeFuera={empresa:this.empresaSeleccionada,bodega:this.bodegaSeleccionado?this.bodegaSeleccionado:null,fechaDesde:e,fechaHasta:this.fechaHasta,productoSeleccionado:null},this.obtenerInvProductoTO()}},e.prototype.obtenerInvProductoTO=function(){this.cargando=!0;var e={empresa:r.a.KEY_EMPRESA_SELECT,codigo:this.saldoBodegaSeleccionada.sbProducto?this.saldoBodegaSeleccionada.sbProducto:""};this.productoService.obtenerProducto(e,this,r.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerProducto=function(e){this.objetoDesdeFuera.productoSeleccionado=e?new E.a:null,this.objetoDesdeFuera.productoSeleccionado.proCodigoPrincipal=e?e.proCodigoPrincipal:null,this.objetoDesdeFuera.productoSeleccionado.proCategoria=e?e.catCodigo:null,this.objetoDesdeFuera.productoSeleccionado.proNombre=e?e.proNombre:null,this.objetoDesdeFuera.productoSeleccionado.detalleMedida=e?e.medCodigo:null,this.cargando=!1,this.objetoDesdeFuera=e?this.objetoDesdeFuera:null,this.mostrarKardex=!!e},e.prototype.cerrarKardex=function(e){this.mostrarKardex=e,this.objetoDesdeFuera=null,this.generarAtgajosTeclado()},e.prototype.buscarSaldoBodega=function(e){if(this.utilService.establecerFormularioTocado(e)&&e&&e.valid){this.limpiarResultado(),this.cargando=!0,this.filasTiempo.iniciarContador();var t={empresa:this.empresaSeleccionada.empCodigo,bodega:this.bodegaSeleccionado&&this.bodegaSeleccionado.bodCodigo?this.bodegaSeleccionado.bodCodigo:null,hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta)};this.saldoBodegaService.listarInvListaSaldoBodegaTO(t,this,r.a.KEY_EMPRESA_SELECT)}else this.toastr.error(r.a.MSJ_CAMPOS_INVALIDOS,r.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.despuesDeListarInvListaSaldoBodegaTO=function(e){this.listaResultadoSaldoBodega=e,this.cargando=!1,this.filasTiempo.finalizarContador(),this.iniciarAgGrid()},e.prototype.imprimirSaldoBodega=function(){var e=this;if(this.utilService.verificarPermiso(r.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={bodega:this.bodegaSeleccionado.bodCodigo,fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),listSaldoBodegaTO:this.listaResultadoSaldoBodega};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteSaldoBodega",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoSaldoBodega.pdf",t):e.toastr.warning(r.a.MSJ_ERROR_IMPRIMIR,r.a.MSJ_TITULO_REPORTE),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarSaldoBodega=function(){var e=this;if(this.utilService.verificarPermiso(r.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),listSaldoBodegaTO:this.listaResultadoSaldoBodega};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteSaldoBodega",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoSaldoBodega_"):e.toastr.warning(r.a.MSJ_NO_DATA,r.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.limpiarResultado=function(){this.listaResultadoSaldoBodega=[],this.filasService.actualizarFilas("0","0")},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.saldoBodegaService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.frameworkComponents={botonOpciones:T.a,toolTip:R.a},this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.saldoBodegaSeleccionada=t?t.data:null},e.prototype.onResize=function(){this.screamXS=window.innerWidth<r.a.WINDOW_WIDTH_XS},_([Object(a.HostListener)("window:resize",["$event"]),P("design:type",Function),P("design:paramtypes",[]),P("design:returntype",void 0)],e.prototype,"onResize",null),e=_([Object(a.Component)({selector:"app-saldo-bodega",template:o("/8RF"),styles:[o("bi7P")]}),P("design:paramtypes",[s.ActivatedRoute,c.b,l.HotkeysService,d.a,A,p.a,O.a,I.a,u.a])],e)}()},"8VRP":function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("z5Y/"),r=o("nR5P"),n=o("SZbH"),s=o("mwBN"),c=o("+JJ7"),l=o("yccp"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o,a){this.api=e,this.utilService=t,this.toastr=o,this.atajoService=a}return e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new l.Hotkey(s.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFormaPago");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarFormaPago");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_NUEVO,function(){var e=document.getElementById("btnNuevoFormaPago");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnimprimirFormaPago");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnexportarFormaPago");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardarFormaPago");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarFormaPago");return e&&e.click(),!1}))},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_NUEVO:case s.a.ACCION_CREAR:a=t.listaSisPermisoTO.gruCrear;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:a=t.listaSisPermisoTO.gruModificar;break;case s.a.ACCION_ELIMINAR:a=t.listaSisPermisoTO.gruEliminar;break;case s.a.ACCION_IMPRIMIR:a=t.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.TAG_AVISO),a},e.prototype.listarFormasPago=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getListaRhFormaPagoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarFormasPago(e.extraInfo):(t.despuesDeListarFormasPago([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarComboRhFormaPagoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getComboRhFormaPagoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDelistarComboRhFormaPagoTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarComboFormasPago=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getComboRhFormaPagoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarComboFormasPago(e.extraInfo):(t.despuesDeListarComboFormasPago([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.guardarFormasPago=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarRhFormaPago",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGuardarFormasPago(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.accionFormasPago=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/accionRhFormaPago",e,o).then(function(e){e&&e.extraInfo?t.despuesDeAccionFormasPago(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){var e=[];return e.push({headerName:s.a.TAG_CUENTA,field:"ctaCodigo",width:120,minWidth:120},{headerName:s.a.TAG_DETALLE,field:"fpDetalle",width:200,minWidth:200},{headerName:s.a.TAG_SECTOR,field:"secCodigo",width:80,minWidth:80},{headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"fpInactivo",width:115,minWidth:115,cellRendererFramework:c.a,cellClass:"text-md-center"},this.utilService.getColumnaOpciones()),e},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[i.a,r.a,n.b,l.HotkeysService])],e)}()},"8Xiy":function(e,t){e.exports=""},"8Zyk":function(e,t){e.exports=""},"8j59":function(e,t){e.exports=""},"99Zv":function(e,t){e.exports='<form #frmVentasDato=\'ngForm\' autocomplete="off" class="card m-0" [hidden]="mostrarAccionesCliente || mostrarAccionesContabilidad">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarVenta" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n      type="button">\r\n      <i class="{{!activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{accion}} {{titulo}} {{invVentasTO.vtaNumero}} - {{empresaSeleccionada?.empNombre}}</b>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirVenta" *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR  && accion !== constantes.ACCION_ANULAR && accion !== constantes.ACCION_RESTAURAR"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}"\r\n          (click)="imprimirVenta()">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Guardar y mayorizar--\x3e\r\n        <div *ngIf="(accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR)" class="btn-group mr-1">\r\n          <button id="btnGuardarVenta" type="button" class="btn btn-sm btn-primary" (click)="ventaService.verificarPermiso(accion, empresaSeleccionada, true) ? guardarVenta(frmVentasDato, false) : null"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> </span>\r\n          </button>\r\n        </div>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnAnularVenta" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anularVenta()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Restaurar--\x3e\r\n        <button id="btnRestaurarVenta" *ngIf="accion === constantes.ACCION_RESTAURAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_RESTAURAR}}" (click)="restaurarVenta()">\r\n          <i class="{{constantes.ICON_OK}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Contabilizar--\x3e\r\n        <button id="btnContabilizarVenta" *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR && contabilizar"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_CONTABILIZAR}}"\r\n          (click)="contabilizarVenta()">\r\n          <i class="{{constantes.ICON_CALCULADORA}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        <button id="btnVerContableVenta" *ngIf="accion !== constantes.ACCION_CREAR  && accion !== constantes.ACCION_MAYORIZAR && verContable"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_VER_CONTABLE}}"\r\n          (click)="verContableVenta()">\r\n          <i class="{{constantes.ICON_DOCUMENTO}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarVenta"\r\n          ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n          (click)="cancelar()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirVenta" *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR && accion !== constantes.ACCION_ANULAR && accion !== constantes.ACCION_RESTAURAR"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}"\r\n          (click)="imprimirVenta()">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_IMPRIMIR}}</span>\r\n        </button>\r\n        \x3c!--Guardar y mayorizar--\x3e\r\n        <div *ngIf="(accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR)" class="btn-group mr-1">\r\n          <button id="btnGuardarVenta" type="button" class="btn btn-sm btn-primary" (click)="ventaService.verificarPermiso(accion, empresaSeleccionada, true) ? guardarVenta(frmVentasDato, false) : null"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n          </button>\r\n        </div>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnAnularVenta" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anularVenta()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n        </button>\r\n        \x3c!--Restaurar--\x3e\r\n        <button id="btnRestaurarVenta" *ngIf="accion === constantes.ACCION_RESTAURAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_RESTAURAR}}" (click)="restaurarVenta()">\r\n          <i class="{{constantes.ICON_OK}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_RESTAURAR}}</span>\r\n        </button>\r\n        \x3c!--Contabilizar--\x3e\r\n        <button id="btnContabilizarVenta" *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR && contabilizar"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_CONTABILIZAR}}"\r\n          (click)="contabilizarVenta()">\r\n          <i class="{{constantes.ICON_CALCULADORA}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline">{{constantes.ACCION_CONTABILIZAR}}</span>\r\n        </button>\r\n        <button id="btnVerContableVenta" *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR && verContable" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_VER_CONTABLE}}" (click)="verContableVenta()">\r\n          <i class="{{constantes.ICON_DOCUMENTO}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_VER_CONTABLE}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarVenta"\r\n          (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body p-1">\r\n    \x3c!--Datos de la cabecera de la venta--\x3e\r\n    <fieldset [disabled]="!puedeEditar">\r\n      <div class="card mb-0" [ngClass]="{\'card-accent-danger\': invVentasTO.vtaPendiente, \'card-accent-success\': invVentasTO.vtaRevisado, \'card-accent-warning\': invVentasTO.vtaPendiente && accion !== constantes.ACCION_CREAR}">\r\n        <div class="row pl-3 pr-3">\r\n          \x3c!--SI ES NOTA DE CREDITO O DEBITO DEBE COMPLETAR ESTO.--\x3e\r\n          <div class="col-md-12 pl-0 pr-0" style="border-block-end: 1px solid #c8ced3;" *ngIf="esNota">\r\n            <div class="card-header">\r\n              <b>{{constantes.TAG_COMPLEMENTO}}</b>\r\n              <div class="card-header-actions">\r\n                <span class="mr-2 badge badge-pill" [ngClass]="{\'bg-danger\': invVentasTO.vtaPendiente,\'bg-reversado\':invVentasTO.vtaAnulado}">{{\r\n                  invVentasTO.vtaPendiente?constantes.ETIQUETA_PENDIENTE:\r\n                  invVentasTO.vtaAnulado?constantes.ETIQUETA_ANULADO:\'\'}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class="card-body p-2">\r\n              <div class="row">\r\n                <div class="form-group-sm col-lg-4 pt-1">\r\n                  <label style="margin-bottom: 3px;">\r\n                    <strong>{{constantes.TAG_TIPO_COMPLEMENTO}}</strong>\r\n                  </label>\r\n                  <select class="form-control form-control-sm mousetrap color-no-disabled" name="tipocomplemento"\r\n                    [(ngModel)]="tipoDocumentoComplemento" required>\r\n                    <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="complemento.tcCodigo" *ngFor="let complemento of listadoTipoComprobante">\r\n                      {{complemento.tcDescripcion}}</option>\r\n                  </select>\r\n                </div>\r\n                <div class="form-group-sm col-lg-4 pt-1">\r\n                  <label style="margin-bottom: 3px;">\r\n                    <strong>{{constantes.TAG_MOTIVO_COMPLEMENTO}}</strong>\r\n                  </label>\r\n                  <select class="form-control form-control-sm mousetrap color-no-disabled" name="motivocomplemento"\r\n                    [(ngModel)]="motivoComplemento" required>\r\n                    <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="motivo.clave" *ngFor="let motivo of listadoMotivoComplemento">\r\n                      {{motivo.clave}}</option>\r\n                  </select>\r\n                </div>\r\n                <div class="form-group-sm col-lg-4" *ngIf="tipoDocumento!=\'00\'">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_NUMERO_COMPLEMENTO}}</strong>\r\n                  </label>\r\n                  <p-inputMask class="mousetrap mascara" name="numeroComplemento" [(ngModel)]="numeroDocumentoComplemento"\r\n                    mask="999-999-999999999" required (onBlur)="numeroDocumentoComplemento ? consultarVenta(numeroDocumentoComplemento, null, null) : null"></p-inputMask>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \x3c!--DATOS DE LA VENTA--\x3e\r\n          <div class="col-md-4 col-sm-12 p-0" style="border-right: 1px solid #c8ced3;">\r\n            <div class="card-header p-1">\r\n              <b>{{constantes.TAG_DATOS_CLIENTE}}</b>\r\n            </div>\r\n            <div class="card-body p-2">\r\n              <div class="row">\r\n                <div class="form-group-sm col-lg-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_CODIGO}} </strong>\r\n                  </label>\r\n                  <input [ngClass]="{\'ng-invalid\':!isClienteValido}" id="codCliente" name="txtCodigoVenta" class="form-control form-control-sm text-uppercase mousetrap text-uppercase"\r\n                    type="text" required (blur)="validarCliente();" (keydown)="buscarCliente($event);" [(ngModel)]="invVentasTO.cliCodigo"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" appUppercase>\r\n                </div>\r\n                <div class="form-group-sm col-lg-6" *ngIf="isClienteValido || accion !== constantes.ACCION_CREAR">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_RUC_ID}}: </strong>\r\n                  </label>\r\n                  <label class="form-control form-control-sm input-label"> {{cliente?.cliId}}</label>\r\n                </div>\r\n              </div>\r\n              <div class="row" *ngIf="isClienteValido || accion !== constantes.ACCION_CREAR">\r\n                <div class="form-group-sm col-lg-12">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_NOMBRE}}: </strong> {{cliente?.cliRazonSocial}}\r\n                  </label>\r\n                </div>\r\n                <div class="form-group-sm col-lg-12">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_DIRECCION}}: </strong> {{cliente?.cliDireccion}}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-8 col-sm-12 p-0">\r\n            <div class="card-header p-1">\r\n              <b>{{constantes.TAG_DATOS_GENERALES}}</b>\r\n              <div class="card-header-actions" *ngIf="!esNota">\r\n                <span class="mr-2 badge badge-pill" [ngClass]="{\'bg-danger\': invVentasTO.vtaPendiente,\'bg-reversado\':invVentasTO.vtaAnulado}">{{\r\n                  invVentasTO.vtaPendiente?constantes.ETIQUETA_PENDIENTE:\r\n                  invVentasTO.vtaAnulado?constantes.ETIQUETA_ANULADO:\'\'}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class="card-body p-2">\r\n              <div class="row">\r\n                \x3c!--Motivo--\x3e\r\n                <div class="form-group-sm col-lg-3 col-sm-6 pt-1">\r\n                  <label style="margin-bottom: 3px;">\r\n                    <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n                  </label>\r\n                  <select class="form-control form-control-sm mousetrap color-no-disabled" [disabled]="caja.permisoMotivoPermitido"\r\n                    name="cboMotivo" id="cboMotivo" [(ngModel)]="invVentasTO.vtaMotivo" (ngModelChange)="motivoSeleccionado = ventaFormularioService.seleccionarMotivo(listadoMotivos, invVentasTO)"\r\n                    required>\r\n                    <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="motivo.vmCodigo" *ngFor="let motivo of listadoMotivos"> {{motivo.vmDetalle}}\r\n                      ({{motivo.vmCodigo}})</option>\r\n                  </select>\r\n                </div>\r\n                \x3c!--Periodo--\x3e\r\n                <div class="form-group-sm col-lg-3 col-sm-6 pt-1" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                  <label style="margin-bottom: 3px;">\r\n                    <strong>{{constantes.TAG_PERIODO}}</strong>\r\n                  </label>\r\n                  <select class="form-control form-control-sm mousetrap color-no-disabled" name="periodo" [(ngModel)]="invVentasTO.vtaPeriodo"\r\n                    required>\r\n                    <option [ngValue]="periodo.sisPeriodoPK.perCodigo" *ngFor="let periodo of listadoPeriodos">\r\n                      {{periodo.perDetalle}}\r\n                      ({{periodo?.sisPeriodoPK?.perCodigo}})</option>\r\n                  </select>\r\n                </div>\r\n                \x3c!--Fecha emision--\x3e\r\n                <div class="form-group-sm col-lg-3 col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_EMISION}} </strong>\r\n                  </label>\r\n                  <p-calendar [disabled]="!caja.permisoCambiarFechaVenta" class="mousetrap calendar" name="fechaEmision"\r\n                    [(ngModel)]="fechaEmision" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                    [required]="true" (ngModelChange)="getIVA();validarFechaCaducaNumeroDoc()" placeholder="DD/MM/YYYY"></p-calendar>\r\n                </div>\r\n                \x3c!--bodega--\x3e\r\n                <div class="form-group-sm col-lg-3 pt-1 col-sm-6" [ngClass]="{\'has-error\':!bodegaSeleccionada}">\r\n                  <label style="margin-bottom: 3px;">\r\n                    <strong>{{constantes.TAG_BODEGA}}</strong>\r\n                  </label>\r\n                  <select class="form-control form-control-sm" [disabled]="caja.permisoBodegaPermitida"\r\n                    name="cboBodega" [(ngModel)]="bodegaSeleccionada" (ngModelChange)="listarPiscinas()" required>\r\n                    <option ngValue="" [selected]="true">{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="bodega" *ngFor="let bodega of listadoBodegas"> {{bodega.bodNombre}}\r\n                      ({{bodega.bodCodigo}})</option>\r\n                  </select>\r\n                </div>\r\n                \x3c!--Numero--\x3e\r\n                <div class="form-group-sm col-lg-3 col-sm-6" *ngIf="tipoDocumento!=\'00\'">\r\n                  \x3c!--Cuando no sea nota de entrega--\x3e\r\n                  <label>\r\n                    <strong>{{constantes.TAG_NUMERO}}</strong>\r\n                  </label>\r\n                  <p-inputMask class="mousetrap mascara" name="numeroDoc" [(ngModel)]="invVentasTO.vtaDocumentoNumero"\r\n                    [styleClass]="!documentoValido || documentoCaducado?\'has-error\':\'\' " mask="999-999-999999999"\r\n                    required (onBlur)="invVentasTO.vtaDocumentoNumero ? validarNumeroDoc() : null"></p-inputMask>\r\n                </div>\r\n                \x3c!--Precio venta--\x3e\r\n                <div class="form-group-sm col-lg-3 pt-1 col-sm-6">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_PRECIO_DE_VENTA}}</b>\r\n                  </label>\r\n                  <select name="etiqueta" [(ngModel)]="etiquetaSeleccionada" class="form-control form-control-sm"\r\n                    [disabled]="caja.permisoClientePrecioPermitido!=null" (change)="listaInvVentasDetalleTO.length> 0 ? calcularPrecioLista(listaInvVentasDetalleTO) : null;"\r\n                    required>\r\n                    <option ngValue="proPorCantidad" [selected]="true">{{constantes.LABEL_POR_CANTIDAD}}</option>\r\n                    <option [ngValue]="etiqueta.field" *ngFor="let etiqueta of etiquetas">{{etiqueta.value}}</option>\r\n                  </select>\r\n                </div>\r\n                \x3c!--observaciones--\x3e\r\n                <div class="form-group-sm col-sm-6 pt-1" [ngClass]="{\'col-lg-6\': accion === constantes.ACCION_CONSULTAR,\'col-lg-9\': accion !== constantes.ACCION_CONSULTAR}">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_OBSERVACIONES}} </strong>\r\n                  </label>\r\n                  <textarea class="form-control form-control-sm text-uppercase mousetrap" appUppercase type="text" cols="3"\r\n                    [(ngModel)]="invVentasTO.vtaObservaciones" placeholder="{{constantes.TAG_OBSERVACIONES}}" name="observacion"></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n    \x3c!--Datos del detalle de la cabecera--\x3e\r\n    <div class="card mb-1">\r\n      <div class="card-header p-1">\r\n        <strong>{{constantes.TAG_DETALLE_VENTA}}</strong>\r\n      </div>\r\n      <div class="card-body m-0 p-0" *ngIf="listaInvVentasDetalleTO?.length>0">\r\n        <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listaInvVentasDetalleTO"\r\n          [columnDefs]="columnDefs" [enableSorting]="true" [rowSelection]="rowSelection" [enableColResize]="true"\r\n          [components]="components" [context]="context" [frameworkComponents]="frameworkComponents" [rowDragManaged]="true"\r\n          (rowDragEnd)="refrescarOrdenDetalle()" [animateRows]="true" [suppressClickEdit]=true (gridReady)="onGridReady($event)"\r\n          (rowSelected)="detalleSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()"\r\n          (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (cellEditingStopped)="alCambiarValorDeCelda($event)" [stopEditingWhenGridLosesFocus]="true"\r\n          [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n    \x3c!--TAB PANEL PARA OPCIONES DE PECIOS, INFORMAC. ADICIONAL Y FORMA DE PAGO--\x3e\r\n    <fieldset [disabled]="!puedeEditar">\r\n      <div class="card mb-1">\r\n        <div class="row">\r\n          <div class="col-lg-7 col-md-7">\r\n            <ul class="nav nav-tabs nav-justified" role="tablist" id="ulOpcionesEmpleado" style="box-shadow: inset 0 -1px 0 #ddd;">\r\n              <li role="presentation" class="nav-item">\r\n                <a class="nav-link active p-1" href data-target="#formaPago" aria-controls="formaPago" role="tab"\r\n                  data-toggle="tab">\r\n                  <b>{{constantes.INVENTARIO_FORMA_COBRO}}</b>\r\n                </a>\r\n              </li>\r\n              <li role="presentation" class="nav-item">\r\n                <a class="nav-link p-1" href data-target="#infAdicional" aria-controls="infAdicional" role="tab"\r\n                  data-toggle="tab">\r\n                  <b ngbTooltip="{{constantes.TAG_INFORMACION_ADICIONAL_COMPLETO}}">{{constantes.TAG_INFORMACION_ADICIONAL}}</b>\r\n                </a>\r\n              </li>\r\n            </ul>\r\n            <div class="tab-content panel" style="border-top-width: 0px;">\r\n              <div role="tabpanel" class="tab-pane fade show active" id="formaPago">\r\n                <div class="panel-default">\r\n                  <div class="panel-body">\r\n                    <div class="row">\r\n                      <div class="form-group-sm col-md-6">\r\n                        <label>\r\n                          <strong>{{constantes.TAG_FECHA_VENCIMIENTO}}</strong>\r\n                        </label>\r\n                        <input type="text" class="form-control form-control-sm text-uppercase mousetrap" [(ngModel)]="diasCredito"\r\n                          required (ngModelChange)="validarFechaVenc()" name="diasCredito" />\r\n                      </div>\r\n                      <div class="form-group-sm col-md-6">\r\n                        <label>\r\n                          <strong>{{constantes.INVENTARIO_FORMA_COBRO}}</strong>\r\n                        </label>\r\n                        <select class="form-control form-control-sm mousetrap height-30" [disabled]="caja.permisoFormaPagoPermitida && formaCobroSeleccionada && formaCobroSeleccionada.fcSecuencial"\r\n                          name="formaCobro" [(ngModel)]="formaCobroSeleccionada" required>\r\n                          <option disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                          <option [ngValue]="fc" *ngFor="let fc of listadoFormaCobro"> {{fc.fcDetalle}}</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <div class="row m-2 border-card pt-1 pb-1" *ngIf="formaCobroSeleccionada && formaCobroSeleccionada.fcSecuencial">\r\n                      <div class="form-group-sm col-md-6" *ngIf="formaCobroSeleccionada.fcTipoPrincipal == \'TARJETA DE CREDITO\'">\r\n                        <label>\r\n                          <strong>{{constantes.TAG_BANCO}}</strong>\r\n                        </label>\r\n                        <input type="text" class="form-control form-control-sm text-uppercase mousetrap" [(ngModel)]="invVentasTO.fcBanco"\r\n                          required name="fcBanco" />\r\n                      </div>\r\n                      <div class="form-group-sm col-md-6" *ngIf="formaCobroSeleccionada.fcTipoPrincipal == \'TARJETA DE CREDITO || CUENTAS POR COBRAR\'">\r\n                        <label>\r\n                          <strong>{{constantes.TAG_CUENTA}}</strong>\r\n                        </label>\r\n                        <input type="text" class="form-control form-control-sm text-uppercase mousetrap" [(ngModel)]="invVentasTO.fcCuenta"\r\n                          required name="fcCuenta" />\r\n                      </div>\r\n                      <div class="form-group-sm col-md-6" *ngIf="formaCobroSeleccionada.fcTipoPrincipal == \'CHEQUE\'">\r\n                        <label>\r\n                          <strong>{{constantes.TAG_CHEQUE}}</strong>\r\n                        </label>\r\n                        <input type="text" class="form-control form-control-sm text-uppercase mousetrap" [(ngModel)]="invVentasTO.fcCheque"\r\n                          required name="fcCheque" />\r\n                      </div>\r\n                      <div class="form-group-sm col-md-6" *ngIf="formaCobroSeleccionada.fcTipoPrincipal == \'CHEQUE\'">\r\n                        <label>\r\n                          <strong>{{constantes.TAG_LOTE}}</strong>\r\n                        </label>\r\n                        <input type="text" class="form-control form-control-sm text-uppercase mousetrap" [(ngModel)]="invVentasTO.fcLote"\r\n                          required name="fcLote" />\r\n                      </div>\r\n                      <div class="form-group-sm col-md-12">\r\n                        <label>\r\n                          <strong>{{constantes.TAG_TITULAR}}</strong>\r\n                        </label>\r\n                        <input type="text" class="form-control form-control-sm text-uppercase mousetrap" [(ngModel)]="invVentasTO.fcTitular"\r\n                          required name="fcTitular" />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div role="tabpanel" class="tab-pane fade" id="infAdicional">\r\n                <div *ngIf="accion === constantes.ACCION_CREAR || invVentasTO?.vtaNumero">\r\n                  <app-venta-informacion-adicional [empresaSeleccionada]="empresaSeleccionada" [invVentasTO]="invVentasTO"\r\n                    [puedeEditar]="puedeEditar" [listaIA]="informacionAdicional">\r\n                  </app-venta-informacion-adicional>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \x3c!--TOTALES--\x3e\r\n          <div class="col-md-5 col-lg-5">\r\n            <br>\r\n            <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n              <ng-template pTemplate="colgroup" *ngIf="isScreamMd">\r\n                <colgroup>\r\n                  <col [style.width]="\'100px\'">\r\n                  <col [style.width]="\'80px\'">\r\n                  <col [style.width]="\'80px\'">\r\n                </colgroup>\r\n              </ng-template>\r\n              <ng-template pTemplate="header">\r\n                <tr class="text-center">\r\n                  <th style="width:100px" pResizableColumn></th>\r\n                  <th style="width:80px" pResizableColumn>0%</th>\r\n                  <th style="width:80px" pResizableColumn>{{invVentasTO.vtaIvaVigente}}%</th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate="footer">\r\n                <tr>\r\n                  <td class="totales-tabla">{{constantes.TAG_SUBTOTAL}}</td>\r\n                  <td>\r\n                    <span class="f-r">{{invVentasTO.vtaSubtotalBase0 | number : \'1.2-2\'}}</span>\r\n                  </td>\r\n                  <td>\r\n                    <span class="f-r">{{invVentasTO.vtaSubtotalBaseImponible | number : \'1.2-2\'}}</span>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class="totales-tabla">{{constantes.TAG_IVA}}</td>\r\n                  <td></td>\r\n                  <td>\r\n                    <span class="f-r">{{invVentasTO.vtaMontoIva}}</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate="summary">\r\n                <div class="ui-table-summary ui-widget-header ng-star-inserted" style="height: 30px;">\r\n                  <h2 style="cursor: pointer;" (click)="accionAdicional(null, \'valores\')" title="Dar click para ver detalles">{{invVentasTO.vtaTotal}}</h2>\r\n                </div>\r\n              </ng-template>\r\n            </p-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </div>\r\n</form>\r\n<div *ngIf="mostrarAccionesContabilidad">\r\n  <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n    (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n</div>\r\n<div *ngIf="mostrarAccionesCliente">\r\n  <app-cliente-formulario [parametros]="parametros" [empresaSeleccionada]="empresaSeleccionada" [listadoCategorias]="listadoCategorias"\r\n    (enviarCancelar)="ejecutarAccionCliente($event)" (enviarActivar)="activar=$event"></app-cliente-formulario>\r\n</div>\r\n<p-contextMenu #menuOpciones [model]="opcionesDetalle" appendTo="body"></p-contextMenu>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"9CJC":function(e,t,o){"use strict";var a=o("XwtN"),i=o("U2oW"),r=function(){function e(e){this.invProductoTipoPK=new i.a,this.tipDetalle=null,this.tipTipo=null,this.tipActivo=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invProductoTipoDetalleCuentasList=[],this.invProductoList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invProductoTipoPK=e.invProductoTipoPK?e.invProductoTipoPK:this.invProductoTipoPK,this.tipDetalle=e.tipDetalle?e.tipDetalle:this.tipDetalle,this.tipTipo=e.tipTipo?e.tipTipo:this.tipTipo,this.tipActivo=e.tipActivo?e.tipActivo:this.tipActivo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invProductoTipoDetalleCuentasList=e.invProductoTipoDetalleCuentasList?e.invProductoTipoDetalleCuentasList:this.invProductoTipoDetalleCuentasList,this.invProductoList=e.invProductoList?e.invProductoList:this.invProductoList},e}(),n=o("lS66"),s=function(){function e(e){this.invProductoPresentacionUnidadesPK=new n.a,this.presuDetalle=null,this.presuAbreviado=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invProductoList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invProductoPresentacionUnidadesPK=e.invProductoPresentacionUnidadesPK?e.invProductoPresentacionUnidadesPK:this.invProductoPresentacionUnidadesPK,this.presuDetalle=e.presuDetalle?e.presuDetalle:this.presuDetalle,this.presuAbreviado=e.presuAbreviado?e.presuAbreviado:this.presuAbreviado,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invProductoList=e.invProductoList?e.invProductoList:this.invProductoList},e}(),c=o("lgnl"),l=function(){function e(e){this.invProductoPresentacionCajasPK=new c.a,this.prescDetalle=null,this.prescAbreviado=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invProductoList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invProductoPresentacionCajasPK=e.invProductoPresentacionCajasPK?e.invProductoPresentacionCajasPK:this.invProductoPresentacionCajasPK,this.prescDetalle=e.prescDetalle?e.prescDetalle:this.prescDetalle,this.prescAbreviado=e.prescAbreviado?e.prescAbreviado:this.prescAbreviado,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invProductoList=e.invProductoList?e.invProductoList:this.invProductoList},e}(),d=o("vGAI"),p=function(){function e(e){this.invProductoMedidaPK=new d.a,this.medDetalle=null,this.medConversionLibras=0,this.medConversionKilos=0,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invProductoList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invProductoMedidaPK=e.invProductoMedidaPK?e.invProductoMedidaPK:this.invProductoMedidaPK,this.medDetalle=e.medDetalle?e.medDetalle:this.medDetalle,this.medConversionLibras=e.medConversionLibras?e.medConversionLibras:this.medConversionLibras,this.medConversionKilos=e.medConversionKilos?e.medConversionKilos:this.medConversionKilos,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invProductoList=e.invProductoList?e.invProductoList:this.invProductoList},e}(),u=o("rvcC"),h=function(){function e(e){this.invProductoMarcaPK=new u.a,this.marDetalle=null,this.marAbreviado=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invProductoList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invProductoMarcaPK=e.invProductoMarcaPK?e.invProductoMarcaPK:this.invProductoMarcaPK,this.marDetalle=e.marDetalle?e.marDetalle:this.marDetalle,this.marAbreviado=e.marAbreviado?e.marAbreviado:this.marAbreviado,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invProductoList=e.invProductoList?e.invProductoList:this.invProductoList},e}(),m=o("sOUC");o.d(t,"a",function(){return C});var C=function(){function e(e){this.proMinimo=0,this.proMaximo=0,this.invProductoPK=new a.a,this.proCodigoAlterno=null,this.proCodigoBarra=null,this.proCodigoBarra2=null,this.proCodigoBarra3=null,this.proCodigoBarra4=null,this.proCodigoBarra5=null,this.proEmpaque=null,this.proNombre=null,this.proCantidad1=0,this.proCantidad2=0,this.proCantidad3=0,this.proCantidad4=0,this.proCantidad5=0,this.proPrecio1=0,this.proPrecio2=0,this.proPrecio3=0,this.proPrecio4=0,this.proPrecio5=0,this.proDescuento1=0,this.proDescuento2=0,this.proDescuento3=0,this.proDescuento4=0,this.proDescuento5=0,this.proMargenUtilidad1=0,this.proMargenUtilidad2=0,this.proMargenUtilidad3=0,this.proMargenUtilidad4=0,this.proMargenUtilidad5=0,this.proIva=null,this.proCreditoTributario=!1,this.proCompuesto=!1,this.proInactivo=!1,this.proCuentaEmpresa=null,this.proCuentaInventario=null,this.proCuentaGasto=null,this.proCuentaVenta=null,this.proCuentaTransferenciaIpp=null,this.conCodigo=null,this.susCodigo=null,this.proFactorCajaSacoBulto=0,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invProductoTipo=new r,this.invProductoPresentacionUnidades=new s,this.invProductoPresentacionCajas=new l,this.invProductoMedida=new p,this.invProductoMarca=new h,this.invProductoCategoria=new m.a,this.proCostoReferencial1=0,this.proCostoReferencial2=0,this.proCostoReferencial3=0,this.proCantidad6=0,this.proCantidad7=0,this.proCantidad8=0,this.proCantidad9=0,this.proCantidad10=0,this.proCantidad11=0,this.proCantidad12=0,this.proCantidad13=0,this.proCantidad14=0,this.proCantidad15=0,this.proCantidad16=0,this.proPrecio6=0,this.proPrecio7=0,this.proPrecio8=0,this.proPrecio9=0,this.proPrecio10=0,this.proPrecio11=0,this.proPrecio12=0,this.proPrecio13=0,this.proPrecio14=0,this.proPrecio15=0,this.proPrecio16=0,this.proDescuento6=0,this.proDescuento7=0,this.proDescuento8=0,this.proDescuento9=0,this.proDescuento10=0,this.proDescuento11=0,this.proDescuento12=0,this.proDescuento13=0,this.proDescuento14=0,this.proDescuento15=0,this.proDescuento16=0,this.proMargenUtilidad6=0,this.proMargenUtilidad7=0,this.proMargenUtilidad8=0,this.proMargenUtilidad9=0,this.proMargenUtilidad10=0,this.proMargenUtilidad11=0,this.proMargenUtilidad12=0,this.proMargenUtilidad13=0,this.proMargenUtilidad14=0,this.proMargenUtilidad15=0,this.proMargenUtilidad16=0,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.proMinimo=e.proMinimo?e.proMinimo:this.proMinimo,this.proMaximo=e.proMaximo?e.proMaximo:this.proMaximo,this.invProductoPK=e.invProductoPK?e.invProductoPK:this.invProductoPK,this.proCodigoAlterno=e.proCodigoAlterno?e.proCodigoAlterno:this.proCodigoAlterno,this.proCodigoBarra=e.proCodigoBarra?e.proCodigoBarra:this.proCodigoBarra,this.proCodigoBarra2=e.proCodigoBarra2?e.proCodigoBarra2:this.proCodigoBarra2,this.proCodigoBarra3=e.proCodigoBarra3?e.proCodigoBarra3:this.proCodigoBarra3,this.proCodigoBarra4=e.proCodigoBarra4?e.proCodigoBarra4:this.proCodigoBarra4,this.proCodigoBarra5=e.proCodigoBarra5?e.proCodigoBarra5:this.proCodigoBarra5,this.proEmpaque=e.proEmpaque?e.proEmpaque:this.proEmpaque,this.proNombre=e.proNombre?e.proNombre:this.proNombre,this.proCantidad1=e.proCantidad1?e.proCantidad1:this.proCantidad1,this.proCantidad2=e.proCantidad2?e.proCantidad2:this.proCantidad2,this.proCantidad3=e.proCantidad3?e.proCantidad3:this.proCantidad3,this.proCantidad4=e.proCantidad4?e.proCantidad4:this.proCantidad4,this.proCantidad5=e.proCantidad5?e.proCantidad5:this.proCantidad5,this.proPrecio1=e.proPrecio1?e.proPrecio1:this.proPrecio1,this.proPrecio2=e.proPrecio2?e.proPrecio2:this.proPrecio2,this.proPrecio3=e.proPrecio3?e.proPrecio3:this.proPrecio3,this.proPrecio4=e.proPrecio4?e.proPrecio4:this.proPrecio4,this.proPrecio5=e.proPrecio5?e.proPrecio5:this.proPrecio5,this.proDescuento1=e.proDescuento1?e.proDescuento1:this.proDescuento1,this.proDescuento2=e.proDescuento2?e.proDescuento2:this.proDescuento2,this.proDescuento3=e.proDescuento3?e.proDescuento3:this.proDescuento3,this.proDescuento4=e.proDescuento4?e.proDescuento4:this.proDescuento4,this.proDescuento5=e.proDescuento5?e.proDescuento5:this.proDescuento5,this.proMargenUtilidad1=e.proMargenUtilidad1?e.proMargenUtilidad1:this.proMargenUtilidad1,this.proMargenUtilidad2=e.proMargenUtilidad2?e.proMargenUtilidad2:this.proMargenUtilidad2,this.proMargenUtilidad3=e.proMargenUtilidad3?e.proMargenUtilidad3:this.proMargenUtilidad3,this.proMargenUtilidad4=e.proMargenUtilidad4?e.proMargenUtilidad4:this.proMargenUtilidad4,this.proMargenUtilidad5=e.proMargenUtilidad5?e.proMargenUtilidad5:this.proMargenUtilidad5,this.proIva=e.proIva?e.proIva:this.proIva,this.proCreditoTributario=e.proCreditoTributario?e.proCreditoTributario:this.proCreditoTributario,this.proCompuesto=e.proCompuesto?e.proCompuesto:this.proCompuesto,this.proInactivo=e.proInactivo?e.proInactivo:this.proInactivo,this.proCuentaEmpresa=e.proCuentaEmpresa?e.proCuentaEmpresa:this.proCuentaEmpresa,this.proCuentaInventario=e.proCuentaInventario?e.proCuentaInventario:this.proCuentaInventario,this.proCuentaGasto=e.proCuentaGasto?e.proCuentaGasto:this.proCuentaGasto,this.proCuentaVenta=e.proCuentaVenta?e.proCuentaVenta:this.proCuentaVenta,this.proCuentaTransferenciaIpp=e.proCuentaTransferenciaIpp?e.proCuentaTransferenciaIpp:this.proCuentaTransferenciaIpp,this.conCodigo=e.conCodigo?e.conCodigo:this.conCodigo,this.susCodigo=e.susCodigo?e.susCodigo:this.susCodigo,this.proFactorCajaSacoBulto=e.proFactorCajaSacoBulto?e.proFactorCajaSacoBulto:this.proFactorCajaSacoBulto,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.invProductoTipo=e.invProductoTipo?e.invProductoTipo:this.invProductoTipo,this.invProductoPresentacionUnidades=e.invProductoPresentacionUnidades?e.invProductoPresentacionUnidades:this.invProductoPresentacionUnidades,this.invProductoPresentacionCajas=e.invProductoPresentacionCajas?e.invProductoPresentacionCajas:this.invProductoPresentacionCajas,this.invProductoMedida=e.invProductoMedida?e.invProductoMedida:this.invProductoMedida,this.invProductoMarca=e.invProductoMarca?e.invProductoMarca:this.invProductoMarca,this.invProductoCategoria=e.invProductoCategoria?e.invProductoCategoria:this.invProductoCategoria,this.proCostoReferencial1=e.proCostoReferencial1?e.proCostoReferencial1:this.proCostoReferencial1,this.proCostoReferencial2=e.proCostoReferencial2?e.proCostoReferencial2:this.proCostoReferencial2,this.proCostoReferencial3=e.proCostoReferencial3?e.proCostoReferencial3:this.proCostoReferencial3,this.proCantidad6=e.proCantidad6?e.proCantidad6:this.proCantidad6,this.proCantidad7=e.proCantidad7?e.proCantidad7:this.proCantidad7,this.proCantidad8=e.proCantidad8?e.proCantidad8:this.proCantidad8,this.proCantidad9=e.proCantidad9?e.proCantidad9:this.proCantidad9,this.proCantidad10=e.proCantidad10?e.proCantidad10:this.proCantidad10,this.proCantidad11=e.proCantidad11?e.proCantidad11:this.proCantidad11,this.proCantidad12=e.proCantidad12?e.proCantidad12:this.proCantidad12,this.proCantidad13=e.proCantidad13?e.proCantidad13:this.proCantidad13,this.proCantidad14=e.proCantidad14?e.proCantidad14:this.proCantidad14,this.proCantidad15=e.proCantidad15?e.proCantidad15:this.proCantidad15,this.proCantidad16=e.proCantidad16?e.proCantidad16:this.proCantidad16,this.proPrecio6=e.proPrecio6?e.proPrecio6:this.proPrecio6,this.proPrecio7=e.proPrecio7?e.proPrecio7:this.proPrecio7,this.proPrecio8=e.proPrecio8?e.proPrecio8:this.proPrecio8,this.proPrecio9=e.proPrecio9?e.proPrecio9:this.proPrecio9,this.proPrecio10=e.proPrecio10?e.proPrecio10:this.proPrecio10,this.proPrecio11=e.proPrecio11?e.proPrecio11:this.proPrecio11,this.proPrecio12=e.proPrecio12?e.proPrecio12:this.proPrecio12,this.proPrecio13=e.proPrecio13?e.proPrecio13:this.proPrecio13,this.proPrecio14=e.proPrecio14?e.proPrecio14:this.proPrecio14,this.proPrecio15=e.proPrecio15?e.proPrecio15:this.proPrecio15,this.proPrecio16=e.proPrecio16?e.proPrecio16:this.proPrecio16,this.proDescuento6=e.proDescuento6?e.proDescuento6:this.proDescuento6,this.proDescuento7=e.proDescuento7?e.proDescuento7:this.proDescuento7,this.proDescuento8=e.proDescuento8?e.proDescuento8:this.proDescuento8,this.proDescuento9=e.proDescuento9?e.proDescuento9:this.proDescuento9,this.proDescuento10=e.proDescuento10?e.proDescuento10:this.proDescuento10,this.proDescuento11=e.proDescuento11?e.proDescuento11:this.proDescuento11,this.proDescuento12=e.proDescuento12?e.proDescuento12:this.proDescuento12,this.proDescuento13=e.proDescuento13?e.proDescuento13:this.proDescuento13,this.proDescuento14=e.proDescuento14?e.proDescuento14:this.proDescuento14,this.proDescuento15=e.proDescuento15?e.proDescuento15:this.proDescuento15,this.proDescuento16=e.proDescuento16?e.proDescuento16:this.proDescuento16,this.proMargenUtilidad6=e.proMargenUtilidad6?e.proMargenUtilidad6:this.proMargenUtilidad6,this.proMargenUtilidad7=e.proMargenUtilidad7?e.proMargenUtilidad7:this.proMargenUtilidad7,this.proMargenUtilidad8=e.proMargenUtilidad8?e.proMargenUtilidad8:this.proMargenUtilidad8,this.proMargenUtilidad9=e.proMargenUtilidad9?e.proMargenUtilidad9:this.proMargenUtilidad9,this.proMargenUtilidad10=e.proMargenUtilidad10?e.proMargenUtilidad10:this.proMargenUtilidad10,this.proMargenUtilidad11=e.proMargenUtilidad11?e.proMargenUtilidad11:this.proMargenUtilidad11,this.proMargenUtilidad12=e.proMargenUtilidad12?e.proMargenUtilidad12:this.proMargenUtilidad12,this.proMargenUtilidad13=e.proMargenUtilidad13?e.proMargenUtilidad13:this.proMargenUtilidad13,this.proMargenUtilidad14=e.proMargenUtilidad14?e.proMargenUtilidad14:this.proMargenUtilidad14,this.proMargenUtilidad15=e.proMargenUtilidad15?e.proMargenUtilidad15:this.proMargenUtilidad15,this.proMargenUtilidad16=e.proMargenUtilidad16?e.proMargenUtilidad16:this.proMargenUtilidad16},e}()},"9og1":function(e,t){e.exports=""},"9s7+":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.cmEmpresa=null,this.cmCodigo="",this.cmDetalle=null,this.cmFormaContabilizar=null,this.cmFormaImprimir=null,this.cmAjustesDeInventario=!1,this.cmInactivo=!1,this.tipCodigo=null,this.usrCodigo=null,this.usrFechaInserta=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.cmEmpresa=e.cmEmpresa?e.cmEmpresa:this.cmEmpresa,this.cmCodigo=e.cmCodigo?e.cmCodigo:this.cmCodigo,this.cmDetalle=e.cmDetalle?e.cmDetalle:this.cmDetalle,this.cmFormaContabilizar=e.cmFormaContabilizar?e.cmFormaContabilizar:this.cmFormaContabilizar,this.cmFormaImprimir=e.cmFormaImprimir?e.cmFormaImprimir:this.cmFormaImprimir,this.cmAjustesDeInventario=e.cmAjustesDeInventario?e.cmAjustesDeInventario:this.cmAjustesDeInventario,this.cmInactivo=e.cmInactivo?e.cmInactivo:this.cmInactivo,this.tipCodigo=e.tipCodigo?e.tipCodigo:this.tipCodigo,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},"9v/X":function(e,t){e.exports='<form #frmBusqueda=\'ngForm\' name="frmBusqueda" class="card">\r\n  <fieldset [disabled]="vistaFormulario">\r\n    <div class="card-header">\r\n      <span>\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <b> Filtros</b>\r\n      </span>\r\n    </div>\r\n    <div class="card-body">\r\n      \x3c!--FORMULARIO EMPRESA--\x3e\r\n      <div class="form-group form-group-sm">\r\n        <label class="control-label">\r\n          <b>Empresa</b>\r\n        </label>\r\n        <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n          (ngModelChange)="cambiarEmpresaSelect()">\r\n          <option selected disabled value="">SELECCIONE</option>\r\n          <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n            ({{empresa.empCodigo}})</option>\r\n        </select>\r\n      </div>\r\n      <div class="form-group form-group-sm">\r\n        <label class="control-label">\r\n          <b>Periodo</b>\r\n        </label>\r\n        <p-dropdown [options]="listadoPeriodos" name="Periodo" [showClear]="true" [(ngModel)]="periodoSeleccionado"\r\n          (ngModelChange)="limpiarLista()" placeholder="TODOS" optionLabel="perDetalle" class="mousetrap" [disabled]="vistaFormulario">\r\n          <ng-template let-item pTemplate="selectedItem">\r\n            {{periodoSeleccionado?.sisPeriodoPK?.perCodigo}} | {{periodoSeleccionado?.perDetalle}}\r\n          </ng-template>\r\n          <ng-template let-fs pTemplate="item">\r\n            <div class="">{{fs.value.sisPeriodoPK.perCodigo}} | {{fs.value.perDetalle}}</div>\r\n          </ng-template>\r\n        </p-dropdown>\r\n      </div>\r\n      <div class="form-group form-group-sm">\r\n        <label class="control-label">\r\n          <b>Motivo</b>\r\n        </label>\r\n        <p-dropdown [options]="listadoMotivos" name="motivo" [showClear]="true" [(ngModel)]="motivoSeleccionado"\r\n          (ngModelChange)="limpiarLista()" placeholder="TODOS" optionLabel="vmDetalle" class="mousetrap" [disabled]="vistaFormulario">\r\n          <ng-template let-item pTemplate="selectedItem">\r\n            {{motivoSeleccionado?.vmDetalle}} ({{motivoSeleccionado?.vmCodigo}})\r\n          </ng-template>\r\n          <ng-template let-fs pTemplate="item">\r\n            <div class="">{{fs.value.vmDetalle}} ({{fs.value.vmCodigo}})</div>\r\n          </ng-template>\r\n        </p-dropdown>\r\n      </div>\r\n      <div class="form-group form-group-sm">\r\n        <label class="control-label">\r\n          <b>Filtro</b>\r\n        </label>\r\n        <input type="text" [(ngModel)]="filtro" name="filtro" class="form-control form-control-sm mousetrap">\r\n      </div>\r\n    </div>\r\n    <div class="card-footer text-muted">\r\n      <div class="text-right">\r\n        <div class="btn-group">\r\n          <button type="button" class="btn btn-sm btn-primary" (click)="!vistaFormulario ? listarVentas() : null" title="{{constantes.ATAJO_BUSCAR}}">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>&nbsp;\r\n        <button class="btn btn-sm btn-primary" type="button" (click)="!vistaFormulario && verificarPermiso(constantes.ACCION_CREAR, true) ? nuevaVenta() : null"\r\n          [disabled]="!frmBusqueda.valid" title="{{constantes.ATAJO_NUEVO}}">\r\n          <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>'},"9wkQ":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.fcSecuencial=null,this.fcDetalle=null,this.fcTipoPrincipal=null,this.fcInactivo=!1,this.secEmpresa=null,this.secCodigo=null,this.ctaEmpresa=null,this.ctaCodigo=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.fcSecuencial=e.fcSecuencial?e.fcSecuencial:this.fcSecuencial,this.fcDetalle=e.fcDetalle?e.fcDetalle:this.fcDetalle,this.fcTipoPrincipal=e.fcTipoPrincipal?e.fcTipoPrincipal:this.fcTipoPrincipal,this.fcInactivo=e.fcInactivo?e.fcInactivo:this.fcInactivo,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.ctaEmpresa=e.ctaEmpresa?e.ctaEmpresa:this.ctaEmpresa,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},A8Rz:function(e,t,o){"use strict";var a=o("CcnG"),i=o("L0eQ"),r=o("8fiX"),n=o("mwBN"),s=o("EnEm"),c=o("3vq3"),l=o("eUd/"),d=o("ZYCi"),p=o("nR5P"),u=o("Il6u"),h=o("CEfs"),m=o("yccp"),C=o("Ungd"),v=o("SZbH"),A=o("z5Y/"),f=o("Ip0R"),g=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case n.a.ACCION_CONSULTAR:a=!0;break;case n.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case n.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(n.a.ERROR_403_TEXTO,n.a.ERROR_403_TITULO),a},e.prototype.listarChequesNoImpresosTO=function(e,t,o){var a=this;this.api.post("todocompuWS/bancoWebController/getListaChequesNoImpresosTO",e,o).then(function(e){e&&e.extraInfo?t.despuesListarChequesNoImpresosTO(e.extraInfo):(t.despuesListarChequesNoImpresosTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:n.a.TAG_PERIODO,field:"chqContablePeriodo",width:100,minWidth:100},{headerName:n.a.TAG_TIPO_CONTABLE,field:"chqContableTipo",width:120,minWidth:120},{headerName:n.a.TAG_NUMERO,field:"chqContableNumero",width:100,minWidth:100},{headerName:n.a.TAG_EMISION,field:"chqFechaEmision",width:100,minWidth:100},{headerName:n.a.TAG_CONCEPTO,field:"chqBeneficiario",width:270,minWidth:270},{headerName:n.a.TAG_SECUENCIA,field:"chqSecuencia",width:100,minWidth:100},{headerName:n.a.TAG_CUENTA,field:"chqCuentaCodigo",width:120,minWidth:120},{headerName:n.a.TAG_NUMERO_DOCUMENTO,field:"chqNumero",width:150,minWidth:150},{headerName:n.a.TAG_VALOR,field:"chqValor",width:80,minWidth:80,valueFormatter:S,cellClass:"text-right"},this.utilService.getColumnaOpciones()]},e=g([Object(a.Injectable)({providedIn:"root"}),b("design:paramtypes",[A.a,v.b,p.a])],e)}();function S(e){return new f.DecimalPipe("en-US").transform(e.value,"1.2-2")}var I=o("/TJv"),E=o("gLZI"),R=o("+JJ7"),T=o("zkCp"),_=o("+qE3"),P=o("WTQC");o.d(t,"a",function(){return D});var N=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},D=function(){function e(e,t,o,a,r,l,d,p,u,h,m){this.activeModal=e,this.route=t,this.utilService=o,this.cuentaService=a,this.filasService=r,this.cdRef=l,this.atajoService=d,this.archivoService=p,this.toastr=u,this.chequesService=h,this.modalService=m,this.listaEmpresas=[],this.constantes={},this.accion=null,this.tituloForm=n.a.TITULO_FILTROS,this.classIcon=n.a.ICON_FILTRAR,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new s.a,this.filtroGlobal="",this.fechaHasta=new Date,this.es={},this.listadoBancoCuenta=[],this.cuentaComboSeleccionado=new c.a,this.listadoChequeNoImpresosTO=[],this.chequeSeleccionado=new i.a,this.activarInicial=!1,this.objetoContableEnviar=null,this.enviarAccion=new _.EventEmitter,this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return e.prototype.ngOnInit=function(){this.constantes=n.a,this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.chequesNoImpresos,this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.iniciarAgGrid()},e.prototype.cambiarEmpresaSeleccionada=function(){n.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listarBancoCuenta(),this.filasService.actualizarFilas("0","0")},e.prototype.limpiarResultado=function(){this.listadoChequeNoImpresosTO=[],this.chequeSeleccionado=new i.a,this.filasService.actualizarFilas("0","0")},e.prototype.listarBancoCuenta=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo};this.cuentaService.listarGetBanComboBancoTO(e,this,n.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGetBanComboBancoTO=function(e){this.listadoBancoCuenta=e,this.cuentaComboSeleccionado=this.listadoBancoCuenta?this.listadoBancoCuenta[0]:void 0,this.limpiarResultado(),this.cargando=!1},e.prototype.listarChequesNoImpresos=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,cuentaBancaria:this.cuentaComboSeleccionado.ctaContable};this.chequesService.listarChequesNoImpresosTO(e,this,n.a.KEY_EMPRESA_SELECT)},e.prototype.despuesListarChequesNoImpresosTO=function(e){this.listadoChequeNoImpresosTO=e,this.cargando=!1,this.refreshGrid(),this.filtrarRapido()},e.prototype.ejecutarAccion=function(e){this.chequesService.verificarPermiso(n.a.ACCION_CONSULTAR,this,!0)&&e.chqCuentaCodigo&&(this.cargando=!0,this.objetoContableEnviar={accion:n.a.ACCION_CONSULTAR,contable:e.chqContablePeriodo+" | "+e.chqContableTipo+" | "+e.chqContableNumero,listadoSectores:null,tamanioEstructura:null,empresaSeleccionada:this.empresaSeleccionada,activar:!0,tipoContable:null,listaPeriodos:[],volverACargar:!0},this.activarInicial=JSON.parse(JSON.stringify(this.activar)))},e.prototype.cerrarContabilidadAcciones=function(e){this.activar=e.objetoEnviar?e.objetoEnviar.activar:this.activarInicial,this.objetoContableEnviar=e.objetoEnviar,this.cdRef.detectChanges(),this.generarAtajosTeclado()},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e,this.cdRef.detectChanges()},e.prototype.cambiarEstadoActivar=function(e){this.activar=e,this.cdRef.detectChanges()},e.prototype.verChequesNoImpresos=function(){this.mostrarImpresionCheque()},e.prototype.imprimirChequeNoImpresos=function(){var e=this;if(this.utilService.verificarPermiso(n.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listadoChequeNoImpresosTO:this.listadoChequeNoImpresosTO};this.archivoService.postPDF("todocompuWS/bancoWebController/imprimirReporteChequesNoImpresos",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("listadoChequesNoImpresos_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(n.a.MSJ_ERROR_IMPRIMIR,n.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarChequeNoImpresos=function(){var e=this;if(this.utilService.verificarPermiso(n.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listadoChequeNoImpresosTO:this.listadoChequeNoImpresosTO};this.archivoService.postExcel("todocompuWS/bancoWebController/exportarReporteChequesNoImpresos",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"listadoChequesNoImpresos_"):e.toastr.warning(n.a.MSJ_NO_DATA,n.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.generarAtajosTeclado=function(){this.atajoService.add(new m.Hotkey(n.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarCheque");return e&&e.click(),!1})),this.atajoService.add(new m.Hotkey(n.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new m.Hotkey(n.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirChequeNoImpresos");return t&&t.click(),!1})),this.atajoService.add(new m.Hotkey(n.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarChequeNoImpresos");return t&&t.click(),!1}))},e.prototype.generarOpciones=function(e){var t=this,o=e,a=e&&this.chequesService.verificarPermiso(n.a.ACCION_IMPRIMIR,this);this.opciones=[{label:n.a.ACCION_CONSULTAR,icon:n.a.ICON_CONSULTAR,disabled:!o,title:n.a.MSJ_CONSULTAR_COMPROBANTE_CONTABLE,command:function(){return o?t.emitirAccion(n.a.ACCION_CONSULTAR):null}},{label:n.a.ACCION_IMPRIMIR,icon:n.a.ICON_IMPRIMIR,disabled:!a,title:n.a.TAG_IMPRIMIR_CHEQUE,command:function(){return a?t.emitirAccion(n.a.ACCION_IMPRIMIR):null}}]},e.prototype.emitirAccion=function(e){switch(e){case n.a.ACCION_CONSULTAR:this.ejecutarAccion(this.chequeSeleccionado);break;case n.a.ACCION_IMPRIMIR:this.mostrarImpresionCheque()}},e.prototype.mostrarImpresionCheque=function(){var e=this,t=this.modalService.open(P.a,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.chequeSeleccionado=this.chequeSeleccionado,t.componentInstance.empresaSeleccionada=this.empresaSeleccionada,t.componentInstance.cuentaComboSeleccionado=this.cuentaComboSeleccionado,t.result.then(function(t){t&&e.refrescarTabla(e.chequeSeleccionado,"D"),e.generarAtajosTeclado()},function(){e.generarAtajosTeclado()})},e.prototype.refrescarTabla=function(e,t){switch(t){case"D":var o=this.listadoChequeNoImpresosTO.findIndex(function(t){return t.id===e.id});this.listadoChequeNoImpresosTO=this.listadoChequeNoImpresosTO.filter(function(e,t){return t!=o}),this.listadoChequeNoImpresosTO.length>0&&this.seleccionarPrimerFila(0===o?0:o-1)}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.chequesService.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.frameworkComponents={botonOpciones:I.a,toolTip:E.a,inputEstado:R.a},this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila(0)},e.prototype.seleccionarPrimerFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.chequeSeleccionado=e,this.generarOpciones(this.chequeSeleccionado),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.chequeSeleccionado=t?t.data:null},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.onResize=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576)},N([Object(a.Input)(),y("design:type",Boolean)],e.prototype,"isModal",void 0),N([Object(a.Input)(),y("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),N([Object(a.ViewChild)("excelDownload"),y("design:type",Object)],e.prototype,"excelDownload",void 0),N([Object(a.Input)(),y("design:type",r.a)],e.prototype,"empresaSeleccionada",void 0),N([Object(a.ViewChild)("menuOpciones"),y("design:type",T.ContextMenu)],e.prototype,"menuOpciones",void 0),N([Object(a.Output)(),y("design:type",Object)],e.prototype,"enviarAccion",void 0),N([Object(a.HostListener)("window:resize",["$event"]),y("design:type",Function),y("design:paramtypes",[]),y("design:returntype",void 0)],e.prototype,"onResize",null),e=N([Object(a.Component)({selector:"app-cheques-no-impresos",template:o("C0tw"),styles:[o("3C7r")]}),y("design:paramtypes",[l.a,d.ActivatedRoute,p.a,u.a,h.a,a.ChangeDetectorRef,m.HotkeysService,C.a,v.b,O,l.b])],e)}()},AD5E:function(e,t){e.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmFormaCobroDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivarFormulario" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar()"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activarFormulario?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="insertarFormaCobro(frmFormaCobroDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="modificarFormaCobro(frmFormaCobroDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarFormaCobro" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button class="btn btn-sm btn-default mr-1" type="button" id="btnCancelarFormaCobro" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario Forma de Pago--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseFormPagoInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseFormPagoInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO CUENTA--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4 has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CUENTA}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{formaCobro.ctaCodigo}} </label>\r\n              <input [appFocus]="true" class="form-control form-control-sm text-uppercase mousetrap" name="txtCuentaCodigo"\r\n                #conCuenta maxlength="20" placeholder="{{constantes.TAG_OBLIGATORIO}}" id="cuenta" (keydown)="buscarConCuentas($event)"\r\n                (blur)="validarCuenta()" [(ngModel)]="formaCobro.ctaCodigo" appUppercase required *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n              <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_CUENTA}}"\r\n                container="body" *ngIf="accion !== constantes.ACCION_CONSULTAR" triggers="mouseenter:mouseleave"></span>\r\n            </div>\r\n            \x3c!--DETALLE CUENTA--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE_CUENTA}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input text-uppercase">{{formaCobro &&\r\n                formaCobro.fpDetalle?formaCobro.fpDetalle:constantes.TAG_SIN_DETALLE}}</label>\r\n            </div>\r\n            \x3c!--SECTOR--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_SECTOR}}</b>\r\n                &nbsp;\r\n                <a (click)="listarSectores()" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                    container="body"></span>\r\n                </a>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR && sectorSeleccionado">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})</label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR && !sectorSeleccionado">\r\n                {{formaCobro.secCodigo}} </label>\r\n              <select id="sector" [(ngModel)]="sectorSeleccionado" name="sectorSeleccionado" class="form-control input-sm mousetrap"\r\n                required *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option selected [ngValue]="sector" *ngFor="let sector of listaSectores">{{sector.secNombre}}\r\n                  ({{sector.secCodigo}})</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},AP3O:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.pisNumero=null,this.pisNombre=null,this.pisHectareaje=null,this.ctaCostoDirecto=null,this.ctaCostoIndirecto=null,this.ctaCostoTransferencia=null,this.ctaCostoProductoTerminado=null,this.pisActiva=!1,this.pisSector=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.pisNumero=e?new e.pisNumero:this.pisNumero,this.pisNombre=e?new e.pisNombre:this.pisNombre,this.pisHectareaje=e?new e.pisHectareaje:this.pisHectareaje,this.ctaCostoDirecto=e?new e.ctaCostoDirecto:this.ctaCostoDirecto,this.ctaCostoIndirecto=e?new e.ctaCostoIndirecto:this.ctaCostoIndirecto,this.ctaCostoTransferencia=e?new e.ctaCostoTransferencia:this.ctaCostoTransferencia,this.ctaCostoProductoTerminado=e?new e.ctaCostoProductoTerminado:this.ctaCostoProductoTerminado,this.pisActiva=e?new e.pisActiva:this.pisActiva,this.pisSector=e?new e.pisSector:this.pisSector},e}()},Akc3:function(e,t,o){"use strict";o.d(t,"a",function(){return h});var a=o("CcnG"),i=o("mwBN"),r=o("Ip0R"),n=o("eUd/"),s=o("gLZI"),c=o("Ungd"),l=o("nR5P"),d=o("SZbH"),p=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,o,a){this.activeModal=e,this.utilService=t,this.archivoService=o,this.toastr=a,this.titulo=i.a.RRHH_ROL_PAGO,this.constantes=i.a,this.cargando=!1,this.columnDefs=[],this.filtroGlobal="",this.components={},this.noData=i.a.MSJ_NO_HAY_DATOS,this.columnDefsSelected=[]}return e.prototype.ngOnInit=function(){this.iniciarAgGrid()},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.redimensionarColumnas(),this.seleccionarPrimerFila(),this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.exportar=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={lista:this.parametros,empresa:this.empresaSeleccionada.empCodigo};this.archivoService.postExcel("todocompuWS/rrhhWebController/exportarValoresCalculadosRol",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ValoresPrecalculados"):e.toastr.warning(i.a.MSJ_NO_RESULTADOS),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.generarColumnas=function(){var e=this,t=[];return t.push({headerName:i.a.TAG_NUMERO_IDENTIFICACION,width:120,minWidth:120,valueGetter:function(e){return e.data.rhRol.rhEmpleado?e.data.rhRol.rhEmpleado.rhEmpleadoPK.empId:""},headerComponentFramework:s.a,headerComponentParams:{tooltip:i.a.TAG_NUMERO_IDENTIFICACION,text:i.a.TAG_N_IDENTIFICACION,enableSorting:!0}},{headerName:i.a.TAG_APELLIDOS_Y_NOMBRES,width:300,minWidth:300,valueGetter:function(e){return e.data.rhRol.rhEmpleado?e.data.rhRol.rhEmpleado.empApellidos+" "+e.data.rhRol.rhEmpleado.empNombres:""}},{headerName:i.a.TAG_HORAS_EXTRAS_50_PORCENTAJE,valueGetter:function(e){return e.data.rhRol.rolHorasExtras},valueFormatter:function(t){return e.formatearA2Decimales(t)},width:110,minWidth:110,editable:!1,cellClass:"text-right",headerComponentFramework:s.a,headerComponentParams:{tooltip:i.a.TAG_HORAS_EXTRAS_50_PORCENTAJE,text:i.a.TAG_H_EXTRAS_50_PORCENTAJE,enableSorting:!0}},{headerName:i.a.TAG_HORAS_EXTRAS_100_PORCENTAJE,valueGetter:function(e){return e.data.rhRol.rolHorasExtras100},valueFormatter:function(t){return e.formatearA2Decimales(t)},width:110,minWidth:110,editable:!1,cellClass:"text-right",headerComponentFramework:s.a,headerComponentParams:{tooltip:i.a.TAG_HORAS_EXTRAS_100_PORCENTAJE,text:i.a.TAG_H_EXTRAS_100_PORCENTAJE,enableSorting:!0}},{headerName:i.a.TAG_DIAS_FALTA,valueGetter:function(e){return e.data.rhRol.rolDiasFaltaReales},valueFormatter:function(t){return e.formatearA0Decimales(t)},width:110,minWidth:110,editable:!1,cellClass:"text-right",headerComponentFramework:s.a,headerComponentParams:{tooltip:i.a.TAG_DIAS_FALTA,text:i.a.TAG_D_FALTA,enableSorting:!0}},{headerName:i.a.TAG_PERMISO,valueGetter:function(e){return e.data.rhRol.rolDescuentoPermisoMedico},valueFormatter:function(t){return e.formatearA2Decimales(t)},width:110,minWidth:110,editable:function(e){return!e.node.rowPinned},cellClass:function(e){return"text-right"}},{headerName:i.a.TAG_PRESTAMOS,valueGetter:function(e){return e.data.rhRol.rolPrestamos},valueFormatter:function(t){return e.formatearA2Decimales(t)},width:110,minWidth:110,editable:!1,cellClass:"text-right"},{headerName:i.a.TAG_PRESTAMOS_QUIROGRAFARIOS,valueGetter:function(e){return e.data.rhRol.rolPrestamoQuirografario},valueFormatter:function(t){return e.formatearA2Decimales(t)},width:110,minWidth:110,editable:!1,cellClass:"text-right",headerComponentFramework:s.a,headerComponentParams:{tooltip:i.a.TAG_PRESTAMOS_QUIROGRAFARIOS,text:i.a.TAG_P_QUIROGRAFARIOS,enableSorting:!0}},{headerName:i.a.TAG_PRESTAMOS_HIPOTECARIOS,valueGetter:function(e){return e.data.rhRol.rolPrestamoHipotecario},valueFormatter:function(t){return e.formatearA2Decimales(t)},width:110,minWidth:110,editable:!1,cellClass:"text-right",headerComponentFramework:s.a,headerComponentParams:{tooltip:i.a.TAG_PRESTAMOS_HIPOTECARIOS,text:i.a.TAG_P_HIPOTECARIOS,enableSorting:!0}},{headerName:i.a.TAG_IESS,valueGetter:function(e){return e.data.rhRol.rolIess},valueFormatter:function(t){return e.formatearA2Decimales(t)},width:110,minWidth:110,editable:!1,cellClass:"text-right"},{headerName:i.a.TAG_EXTENSION_CONYUGE,valueGetter:function(e){return e.data.rhRol.rolIessExtension},valueFormatter:function(t){return e.formatearA2Decimales(t)},width:110,minWidth:110,editable:!1,cellClass:"text-right"},{headerName:i.a.TAG_TOTAL,valueGetter:function(e){return e.data.totalPagar},valueFormatter:function(t){return e.formatearA2Decimales(t)},width:110,minWidth:110,editable:!1,cellClass:"text-right tr-negrita"}),t},e.prototype.formatearA2Decimales=function(e){return new r.DecimalPipe("en-US").transform(e.value,"1.2-2")},e.prototype.formatearA0Decimales=function(e){return e.value?e.value.toString().replace(/,/gi,""):0},p([Object(a.Input)(),u("design:type",Object)],e.prototype,"empresaSeleccionada",void 0),p([Object(a.Input)(),u("design:type",Array)],e.prototype,"parametros",void 0),p([Object(a.Input)(),u("design:type",Object)],e.prototype,"titulo",void 0),e=p([Object(a.Component)({selector:"app-consultar-valores",template:o("06/f")}),u("design:paramtypes",[n.a,l.a,c.a,d.b])],e)}()},BPXi:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.tipCodigo=null,this.tipDetalle=null,this.tipInactivo=!1,this.empCodigo=null,this.usrInsertaTipo=null,this.fechaInsertaTipo=null,this.tipModulo=null,this.tipTipoPrincipal=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.tipCodigo=e?e.tipCodigo:this.tipCodigo,this.tipDetalle=e?e.tipDetalle:this.tipDetalle,this.tipInactivo=e?e.tipInactivo:this.tipInactivo,this.empCodigo=e?e.empCodigo:this.empCodigo,this.usrInsertaTipo=e?e.usrInsertaTipo:this.usrInsertaTipo,this.fechaInsertaTipo=e?e.fechaInsertaTipo:this.fechaInsertaTipo,this.tipModulo=e?e.tipModulo:this.tipModulo,this.tipTipoPrincipal=e?e.tipTipoPrincipal:this.tipTipoPrincipal},e}()},"BV+X":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.compEmpresa=null,this.compPeriodo=null,this.compMotivo=null,this.compNumero=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.compEmpresa=e.compEmpresa?e.compEmpresa:this.compEmpresa,this.compPeriodo=e.compPeriodo?e.compPeriodo:this.compPeriodo,this.compMotivo=e.compMotivo?e.compMotivo:this.compMotivo,this.compNumero=e.compNumero?e.compNumero:this.compNumero},e}()},BVhi:function(e,t){e.exports=""},BflF:function(e,t){e.exports=""},C0tw:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5" *ngIf="!isModal">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{classIcon}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmBodega=\'ngForm\' name="frmBodega">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [appFocus]="true" class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="listarBancoCuenta()" [disabled]="objetoContableEnviar">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_CUENTA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="cuentaComboSeleccionado" name="cuentaComboSeleccionado" class="form-control input-sm"\r\n              required [disabled]="objetoContableEnviar" (ngModelChange)="limpiarResultado()">\r\n              <option disabled value=undefined>{{constantes.TAG_SELECCIONE}}</option>\r\n              <option *ngFor="let cuenta of listadoBancoCuenta" [ngValue]="cuenta">{{cuenta.banNombre}}\r\n                ({{cuenta.ctaNumero}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="listarChequesNoImpresos()"\r\n              title="{{constantes.ATAJO_BUSCAR}}" [disabled]="objetoContableEnviar">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--Listado de cheques no impresos--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="!objetoContableEnviar">\r\n    <div class="card m-0" *ngIf="listadoChequeNoImpresosTO.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarCheque" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_CHEQUES_NO_IMPRESOS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirChequeNoImpresos" (click)="imprimirChequeNoImpresos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarChequeNoImpresos" (click)="exportarChequeNoImpresos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirChequeNoImpresos" (click)="imprimirChequeNoImpresos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarChequeNoImpresos" (click)="exportarChequeNoImpresos()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listadoChequeNoImpresosTO" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()"\r\n          (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()"\r\n          (rowSelected)="chequeSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="verChequesNoImpresos()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n      <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="objetoContableEnviar">\r\n    <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n      (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},C2aO:function(e,t,o){"use strict";var a=function(){function e(e){this.provEmpresa=null,this.provCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.provEmpresa=e.provEmpresa?e.provEmpresa:this.provEmpresa,this.provCodigo=e.provCodigo?e.provCodigo:this.provCodigo},e}(),i=function(){function e(e){this.pcEmpresa=null,this.pcCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.pcEmpresa=e.pcEmpresa?e.pcEmpresa:this.pcEmpresa,this.pcCodigo=e.pcCodigo?e.pcCodigo:this.pcCodigo},e}(),r=function(){function e(e){this.pcAplicaRetencionIva=!1,this.invProveedorCategoriaPK=new i,this.pcDetalle=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invProveedorList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.pcAplicaRetencionIva=e.pcAplicaRetencionIva?e.pcAplicaRetencionIva:this.pcAplicaRetencionIva,this.invProveedorCategoriaPK=e.invProveedorCategoriaPK?e.invProveedorCategoriaPK:this.invProveedorCategoriaPK,this.pcDetalle=e.pcDetalle?e.pcDetalle:this.pcDetalle,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invProveedorList=e.invProveedorList?e.invProveedorList:this.invProveedorList},e}();o.d(t,"a",function(){return n});var n=function(){function e(e){this.provEmailOrdenCompra="",this.provIdTipo="",this.provRelacionado=!1,this.provInactivo=!1,this.invProveedorPK=new a,this.provIdNumero="",this.provRazonSocial="",this.provNombreComercial="",this.provProvincia="",this.provCiudad="",this.provParroquia="",this.provZona="",this.provDireccion="",this.provTelefono="",this.provCelular="",this.provEmail="",this.provObservaciones="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=null,this.invComprasList=new Array,this.invProveedorCategoria=new r,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.provEmailOrdenCompra=e.provEmailOrdenCompra?e.provEmailOrdenCompra:this.provEmailOrdenCompra,this.provIdTipo=e.provIdTipo?e.provIdTipo:this.provIdTipo,this.provRelacionado=e.provRelacionado?e.provRelacionado:this.provRelacionado,this.provInactivo=e.provInactivo?e.provInactivo:this.provInactivo,this.invProveedorPK=e.invProveedorPK?e.invProveedorPK:this.invProveedorPK,this.provIdNumero=e.provIdNumero?e.provIdNumero:this.provIdNumero,this.provRazonSocial=e.provRazonSocial?e.provRazonSocial:this.provRazonSocial,this.provNombreComercial=e.provNombreComercial?e.provNombreComercial:this.provNombreComercial,this.provProvincia=e.provProvincia?e.provProvincia:this.provProvincia,this.provCiudad=e.provCiudad?e.provCiudad:this.provCiudad,this.provParroquia=e.provParroquia?e.provParroquia:this.provParroquia,this.provZona=e.provZona?e.provZona:this.provZona,this.provDireccion=e.provDireccion?e.provDireccion:this.provDireccion,this.provTelefono=e.provTelefono?e.provTelefono:this.provTelefono,this.provCelular=e.provCelular?e.provCelular:this.provCelular,this.provEmail=e.provEmail?e.provEmail:this.provEmail,this.provObservaciones=e.provObservaciones?e.provObservaciones:this.provObservaciones,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invComprasList=e.invComprasList?e.invComprasList:this.invComprasList,this.invProveedorCategoria=e.invProveedorCategoria?e.invProveedorCategoria:this.invProveedorCategoria},e}()},CAGP:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--FORMULARIO DE FILTRADO--\x3e\r\n    <div class="card">\r\n      <div class="card-header" *ngIf="!deshabilitarOpciones">\r\n        <i class="fa fa-filter"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <fieldset [disabled]="mostrandoFormulario">\r\n          <form #frmFiltroOrdenPedido="ngForm" autocomplete="off">\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_EMPRESA}}</b>\r\n              </label>\r\n              <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n                [disabled]="deshabilitarOpciones" (change)="cambiarempresaSeleccionada();limpiarResultado();" required>\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                  ({{empresa.empCodigo}})</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label">\r\n                <strong>{{constantes.TAG_BODEGA}}</strong>\r\n                &nbsp;\r\n                <a (click)="listarBodegas()" *ngIf="!mostrandoFormulario">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                    container="body"></span>\r\n                </a>\r\n              </label>\r\n              <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n                (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre"\r\n                [disabled]="mostrandoFormulario">\r\n                <ng-template let-item pTemplate="selectedItem">\r\n                  {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n                </ng-template>\r\n                <ng-template let-fs pTemplate="item">\r\n                  <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n                </ng-template>\r\n              </p-dropdown>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DESDE}}</b>\r\n              </label>\r\n              <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" (ngModelChange)="limpiarResultado();" [showIcon]="true"\r\n                [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true" [disabled]="vistaFormulario"\r\n                [maxDate]="fechaHasta" [appMaxDate]="fechaHasta"></p-calendar>\r\n            </div>\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_HASTA}}</b>\r\n              </label>\r\n              <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" (ngModelChange)="limpiarResultado();" [showIcon]="true"\r\n                [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true" [disabled]="vistaFormulario"\r\n                [minDate]="fechaDesde" [maxDate]="fechaActual" [appMinDate]="fechaDesde" [appMaxDate]="fechaActual"></p-calendar>\r\n            </div>\r\n            <div class="form-group form-group-sm has-feedback">\r\n              <label class="control-label  ">\r\n                <strong>{{constantes.TAG_PRODUCTO}}</strong>\r\n              </label>\r\n              <input name="proCodigoPrincipal" id="idProducto" [(ngModel)]="productoSeleccionado.proCodigoPrincipal"\r\n                (change)="limpiarResultado();" pattern="{{constantes.PATTERN_CODIGO}}" class="form-control input-sm mousetrap text-uppercase"\r\n                placeholder="{{constantes.TAG_OBLIGATORIO}}" maxlength="500" (keydown)="buscarProducto($event)" (blur)="validarProducto()"\r\n                appUppercase required>\r\n              <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n                triggers="mouseenter:mouseleave" container="body" *ngIf="!mostrandoFormulario"></span>\r\n            </div>\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <strong>{{constantes.TAG_CATEGORIA}}</strong>\r\n              </label>\r\n              <input name="catCodigo" [(ngModel)]="productoSeleccionado.proCategoria" class="form-control input-sm mousetrap text-uppercase"\r\n                readonly disabled>\r\n            </div>\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <strong>{{constantes.TAG_NOMBRE}}</strong>\r\n              </label>\r\n              <input name="proNombre" [(ngModel)]="productoSeleccionado.proNombre" class="form-control input-sm mousetrap text-uppercase"\r\n                readonly disabled>\r\n            </div>\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <strong>{{constantes.TAG_UNIDAD_MEDIDA}}</strong>\r\n              </label>\r\n              <input name="medDetalle" [(ngModel)]="productoSeleccionado.detalleMedida" class="form-control input-sm mousetrap text-uppercase"\r\n                readonly disabled>\r\n            </div>\r\n          </form>\r\n        </fieldset>\r\n\r\n      </div>\r\n      <div class="card-footer" *ngIf="!deshabilitarOpciones && !mostrandoFormulario">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button id="btnBuscar" type="button" class="btn btn-sm btn-primary" (click)="buscarKardex(frmFiltroOrdenPedido,false)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarKardex(frmFiltroOrdenPedido,true)">{{constantes.TAG_INCLUIR_TODOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button id="btnCancelarKardex" type="button" class="btn btn-sm btn-default mr-1" (click)="cancelar()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_REGRESAR}}" *ngIf="objetoDesdeFuera && mostrarBtnRegresarFomulario"\r\n            container="body" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i> {{constantes.LABEL_REGRESAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    \x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n    <app-kardex-listado [parametrosBusqueda]="busquedaListado" [empresaSeleccionada]="empresaSeleccionada" [datos]="dataListado"\r\n      (enviarCancelar)="cancelar()" (enviarActivar)="activar=$event" (enviarMostrarBtnRegresarFormulario)="mostrarBtnRegresarFomulario = $event"\r\n      (mostrandoFormulario)="mostrandoFormulario = $event"></app-kardex-listado>\r\n  </div>\r\n\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},CDHH:function(e,t,o){"use strict";o.d(t,"a",function(){return p});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("EF/R"),c=o("mwBN"),l=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.auth=o,this.utilService=a}return e.prototype.listarInvFunListadoClientesTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunListadoClientesTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvFunListadoClientesTO(e.extraInfo):(t.despuesDeListarInvFunListadoClientesTO([]),a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.validarCedula=function(e,t,o){var a=this;this.api.post("todocompuWS/appWebController/validarCedula",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarCedula(e.extraInfo):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerClienteTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerClienteTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerClienteTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarCliente=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/insertarClienteTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeInsertarCliente(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarCliente=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarClienteTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeModificarCliente(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarGrupoEmpresarial=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/listarInvClienteGrupoEmpresarial",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvClienteGrupoEmpresarial(e.extraInfo):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.eliminarCliente=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/eliminarInvCliente",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),t.despuesDeEliminarCliente(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.cambiarEstadoCliente=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarEstadoInvCliente",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),t.despuesDecambiarEstadoCliente(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerPermisosDeCaja=function(e,t,o){var a=this;e.usuarioCodigo=this.auth.getCodigoUser(),this.api.post("todocompuWS/cajaWebController/getCajCajaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerPermisosDeCaja(e.extraInfo):t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerSiEsClienteRepetido=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getClienteRepetido",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerSiEsClienteRepetido(e.extraInfo):t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.actualizarLugarEntregaCliente=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarClienteLugarEntrega",e,o).then(function(e){e&&e.extraInfo?t.despuesDeActualizarLugarEntregaCliente(e.extraInfo):(t.despuesDeActualizarLugarEntregaCliente(null),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case c.a.ACCION_NUEVO:case c.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear&&t.empresaSeleccionada.listaSisPermisoTO.gruCrearClientes;break;case c.a.ACCION_CONSULTAR:a=!0;break;case c.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar&&t.empresaSeleccionada.listaSisPermisoTO.gruModificarClientes;break;case c.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar;break;case c.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case c.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(c.a.ERROR_403_TEXTO,c.a.ERROR_403_TITULO),a},e.prototype.generarColumnasTodo=function(){return[{headerName:c.a.TAG_NUMERO_IDENTIFICACION,field:"cliId",check:!0},{headerName:c.a.TAG_TIPO_ID,field:"cliTipoId",check:!0},{headerName:c.a.TAG_NOMBRE,field:"cliNombre",check:!0},{headerName:c.a.TAG_RAZON_SOCIAL,field:"cliRazonSocial",check:!0},{headerName:c.a.TAG_CATEGORIA,field:"cliCategoria",check:!0},{headerName:c.a.TAG_PROVINCIA,field:"cliProvincia",check:!0},{headerName:c.a.TAG_CIUDAD,field:"cliCiudad",check:!0},{headerName:c.a.TAG_ZONA,field:"cliZona",check:!0},{headerName:c.a.TAG_DIRECCION,field:"cliDireccion",check:!0},{headerName:c.a.TAG_TELEFONO,field:"cliTelefono",check:!0},{headerName:c.a.TAG_TELEFONO_CELULAR,field:"cliCelular",check:!0},{headerName:c.a.TAG_EMAIL,field:"cliEmail",check:!0},{headerName:c.a.TAG_OBSERVACIONES,field:"cliObservaciones",check:!0},{headerName:c.a.TAG_INACTIVO,field:"cliInactivo",check:!0}]},e.prototype.generarColumnas=function(e){var t=[];return t=[{headerName:c.a.TAG_IDENTIFICACION,field:"cliId",width:110,minWidth:110},{headerName:c.a.TAG_RAZON_SOCIAL,field:"cliRazonSocial",width:500},{headerName:c.a.TAG_TELEFONO,field:"cliTelefono",width:150,minWidth:150}],e&&t.push(this.utilService.getSpanSelect()),e||t.push({headerName:c.a.TAG_INACTIVO,headerClass:"text-md-center",field:"cliInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()),t},e.prototype.generarColumnasContacto=function(e){var t=[];return t=[{headerName:c.a.TAG_CONTACTO,field:"contacto",width:200,minWidth:200},{headerName:c.a.TAG_CARGO_O_FUNCION,field:"cargo",width:100,minWidth:100},{headerName:c.a.TAG_TELEFONO,field:"telefono",width:100,minWidth:100},{headerName:c.a.TAG_PREDETERMINADO,headerClass:"text-md-center",field:"predeterminado",width:125,minWidth:125,cellRenderer:"inputEstado",cellClass:"text-md-center"}],e==c.a.ACCION_CONSULTAR?t.push(this.utilService.getColumnaBotonAccion()):t.push(this.utilService.getColumnaOpciones()),t},e=l([Object(a.Injectable)({providedIn:"root"}),d("design:paramtypes",[i.a,r.b,s.a,n.a])],e)}()},CdWa:function(e,t){e.exports='<form #frmDistribucion=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <div class="card-header" style="padding: 0.5rem 0.5rem;">\r\n    <button id="btnActivarProrrateo" class="btn btn-sm btn-primary" *ngIf="!screamXS" (click)="cambiarEstadoActivar()"\r\n      type="button">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{constantes.TAG_PRORRATEO_COMPRAS}} - {{empresaSeleccionada?.empNombre}}</b>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Restaurar--\x3e\r\n        <button id="btnGuardarProrrateo" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_GUARDAR}}"\r\n          (click)="guardar(frmDistribucion)">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarProrrateo"\r\n          ngbTooltip="{{constantes.LABEL_CANCELAR}}" (click)="cancelar()">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnGuardarProrrateo" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_GUARDAR}}"\r\n          (click)="guardar(frmDistribucion)">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarProrrateo"\r\n          (click)="cancelar()" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body p-1">\r\n    <fieldset>\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_PRODUCTO_INFORMACION}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseProducto"\r\n              aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseProducto">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_PRODUCTO}}</strong>\r\n              </label>\r\n              <input type="text" [appFocus]="true" (keydown)="abrirModalProducto($event)" appUppercase class="form-control form-control-sm text-uppercase mousetrap"\r\n                id="producto" name="producto" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="codigoPrincipal"\r\n                (blur)="validarProducto()" required>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_NOMBRE}}</strong>\r\n              </label>\r\n              <input type="text" appUppercase class="form-control form-control-sm text-uppercase mousetrap" id="proNombre"\r\n                name="proNombre" [(ngModel)]="invProducto.proNombre" disabled required>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_MEDIDA}}</strong>\r\n              </label>\r\n              <input type="text" appUppercase class="form-control form-control-sm text-uppercase mousetrap" id="proMedida"\r\n                name="proMedida" [(ngModel)]="invProducto.detalleMedida" disabled required>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_CANTIDAD}}</strong>\r\n              </label>\r\n              <input type="text" name="cantidad" [appAutonumeric]="configAutonumeric" [appAutonumericValue]="cantidad"\r\n                value="{{cantidad}}" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="cantidad" class="form-control form-control-sm text-uppercase mousetrap text-right"\r\n                required>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n\r\n    <div class="card">\r\n      <div class="card-body">\r\n        <div class="text-center">\r\n          <div class="custom-control custom-radio custom-control-inline">\r\n            <input type="radio" id="op1" name="prorrateoTipo" class="custom-control-input" value="CP" [(ngModel)]="prorrateoTipo"\r\n              (ngModelChange)="onSelectionChanged()">\r\n            <label class="custom-control-label" for="op1"> <b>{{constantes.TAG_PRORRATEO_POR_CP}}</b></label>\r\n          </div>\r\n          <div class="custom-control custom-radio custom-control-inline">\r\n            <input type="radio" id="op2" name="prorrateoTipo" class="custom-control-input" value="CC" [(ngModel)]="prorrateoTipo"\r\n              (ngModelChange)="onSelectionChanged()">\r\n            <label class="custom-control-label" for="op2"><b>{{constantes.TAG_PRORRATEO_POR_CC}}</b></label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <div class="card mb-1" *ngIf="listaHectarajes?.length>0">\r\n      <div class="card-header">\r\n        <strong>{{constantes.TAG_DETALLE_CENTRO_PRODUCCION}}</strong>\r\n      </div>\r\n      <div class="card-body m-0 p-0">\r\n        <ag-grid-angular #agGridCP id="agGridCP" style="width: 100%; height: calc(100vh - 850px);" class="ag-theme-balham"\r\n          [rowData]="listaHectarajes" [columnDefs]="columnDefsCP" [enableSorting]="true" [rowSelection]="rowSelection"\r\n          [enableColResize]="true" [components]="components" [context]="context" (gridReady)="onGridReadyCP($event)"\r\n          [overlayNoRowsTemplate]="noData" [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()"\r\n          (selectionChanged)="onSelectionChanged()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="card mb-1" *ngIf="listadoPiscinas?.length>0 && prorrateoTipo === \'CC\'">\r\n      <div class="card-header">\r\n        <strong>{{constantes.TAG_DETALLE_CENTRO_COSTO}}</strong>\r\n      </div>\r\n      <div class="card-body m-0 p-0">\r\n        <ag-grid-angular #agGridCC id="agGridCC" style="width: 100%; height: calc(100vh - 570px);" class="ag-theme-balham"\r\n          [rowData]="listadoPiscinas" [columnDefs]="columnDefsCC" [enableSorting]="true" [rowSelection]="rowSelection"\r\n          [enableColResize]="true" [components]="components" [context]="context" (gridReady)="onGridReady($event)"\r\n          [overlayNoRowsTemplate]="noData" [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},Cw8L:function(e,t){e.exports='\x3c!--SECCION FORMULARIO NUEVO--\x3e\r\n<form #frmFormaPagoDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <fieldset>\r\n    <div class="card-header p-1">\r\n      <button id="btnActivarFormulario" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar()"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activarFormulario?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b class="pl-2"> {{tituloForm}} </b>\r\n      \x3c!--SECCION BOTONES GUARDAR - MODIFICAR - CANCELAR --\x3e\r\n      <div class="card-header-actions">\r\n        \x3c!--BOTON GUARDAR NUEVO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="insertarFormaPago(frmFormaPagoDatos)"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON GUARDAR MODIFICADO --\x3e\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="modificarFormaPago(frmFormaPagoDatos)"\r\n          *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n        \x3c!--BOTON REGRESAR --\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarFormaPago" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n        </button>\r\n        \x3c!--BOTON CANCELAR --\x3e\r\n        <button class="btn btn-sm btn-default mr-1" type="button" id="btnCancelarFormaPago" (click)="cancelar()" title="{{constantes.ATAJO_CANCELAR}}"\r\n          *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n      </div>\r\n    </div>\r\n    \x3c!--Formulario Forma de Pago--\x3e\r\n    <div class="card-body p-1">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseFormPagoInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseFormPagoInfo">\r\n          <div class="row">\r\n            \x3c!--CODIGO CUENTA--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4 has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_CUENTA}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n                {{formaPago.ctaCodigo}} </label>\r\n              <input [appFocus]="true" class="form-control form-control-sm text-uppercase mousetrap" name="txtCuentaCodigo"\r\n                #conCuenta maxlength="20" placeholder="{{constantes.TAG_OBLIGATORIO}}" id="cuenta" (keydown)="buscarConCuentas($event)"\r\n                (blur)="validarCuenta()" [(ngModel)]="formaPago.ctaCodigo" appUppercase required *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n              <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_CUENTA}}"\r\n                container="body" *ngIf="accion !== constantes.ACCION_CONSULTAR" triggers="mouseenter:mouseleave"></span>\r\n            </div>\r\n            \x3c!--DETALLE CUENTA--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DETALLE_CUENTA}}</b>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input text-uppercase">{{formaPago &&\r\n                formaPago.fpDetalle?formaPago.fpDetalle:constantes.TAG_SIN_DETALLE}}</label>\r\n            </div>\r\n            \x3c!--SECTOR--\x3e\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_SECTOR}}</b>\r\n                &nbsp;\r\n                <a (click)="listarSectores()" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                  <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                    container="body"></span>\r\n                </a>\r\n              </label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR && sectorSeleccionado">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})</label>\r\n              <label class="form-control form-control-sm label-input" *ngIf="accion === constantes.ACCION_CONSULTAR && !sectorSeleccionado">\r\n                {{formaPago.secCodigo}} </label>\r\n              <select [(ngModel)]="sectorSeleccionado" name="sectorSeleccionado" class="form-control input-sm mousetrap" required\r\n                *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_EDITAR">\r\n                <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                <option selected [ngValue]="sector" *ngFor="let sector of listaSectores">{{sector.secNombre}}\r\n                  ({{sector.secCodigo}})</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </fieldset>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},D41Y:function(e,t){e.exports='<div>\r\n  <form #frmTransferencia=\'ngForm\' autocomplete="off">\r\n    <div class="card mb-0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarTransferencia" class="btn btn-sm btn-primary" (click)="cambiarEstadoActivar(activar)"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <b class="pl-2"> {{tituloForm}} {{constantes.TAG_TRANSFERENCIA}} - </b>\r\n        <strong class="text-primary">{{empresaSeleccionada.empNombre}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <div class="btn-group mr-1" *ngIf="data.accion === constantes.ACCION_NUEVO">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnMayorizarTransferencia" (click)="guardarTransferencia(frmTransferencia,false)"\r\n                title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="guardarTransferencia(frmTransferencia,true)">\r\n                  {{constantes.TAG_PENDIENTE}}</a>\r\n              </div>\r\n            </div>\r\n            <button type="button" class="btn btn-sm btn-danger mr-1" id="btnAnularTransferencia" (click)="anularTransferencia()"\r\n              title="{{constantes.ATAJO_ANULAR}}" *ngIf="data.accion === constantes.ACCION_ANULAR">\r\n              <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirTransferencia" (click)="imprimirTransferenciaFormulario()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}"\r\n              *ngIf="data.accion != constantes.ACCION_NUEVO">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarTransferencia" (click)="confirmacionCerrar()"\r\n              title="{{constantes.ATAJO_CANCELAR}}">\r\n              <i class="{{data.accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n                aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          \x3c!--BOTON ANULAR--\x3e\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-danger mr-1" id="btnAnularTransferencia" (click)="anularTransferencia()"\r\n              title="{{constantes.ATAJO_ANULAR}}" *ngIf="data.accion === constantes.ACCION_ANULAR">\r\n              <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_ANULAR}}</span>\r\n            </button>\r\n            \x3c!--BOTON MAYORIZAR CUANDO ES NUEVO--\x3e\r\n            <div class="btn-group mr-1" *ngIf="data.accion === constantes.ACCION_NUEVO">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnMayorizarTransferencia" (click)="guardarTransferencia(frmTransferencia,false)"\r\n                title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="guardarTransferencia(frmTransferencia,true)">\r\n                  {{constantes.TAG_PENDIENTE}}</a>\r\n              </div>\r\n            </div>\r\n            \x3c!--BOTON MAYORIZAR CUANDO SE MODIFICA--\x3e\r\n            <div class="btn-group" *ngIf="data.accion === constantes.ACCION_MAYORIZAR">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnMayorizarTransferencia" (click)="modificarTransferencia(frmTransferencia, false)"\r\n                title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n                style="margin-right: 3px;">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="modificarTransferencia(frmTransferencia, true)">\r\n                  {{constantes.TAG_PENDIENTE}}</a>\r\n              </div>\r\n            </div>\r\n            \x3c!--BOTON IMPRIMIR--\x3e\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirTransferencia" (click)="imprimirTransferenciaFormulario()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}"\r\n              *ngIf="data.accion != constantes.ACCION_NUEVO && data.accion != constantes.ACCION_MAYORIZAR">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            \x3c!--BOTON CANCELAR - REGRESAR--\x3e\r\n            <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarTransferencia" (click)="confirmacionCerrar()"\r\n              title="{{constantes.ATAJO_CANCELAR}}" ngbTooltip="{{data.accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n              <i class="{{data.accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n                aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{data.accion ===\r\n                constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-1">\r\n        <div class="card mb-1" [ngClass]="{\'card-accent-danger\': transferencia.transPendiente}">\r\n          <div class="card-header">\r\n            <strong>{{constantes.TAG_DATOS_GENERALES}}</strong>\r\n            <div class="card-header-actions">\r\n              <span class="mr-2 badge badge-pill" [ngClass]="{\'bg-danger\': transferencia.transPendiente}">\r\n                {{transferencia.transPendiente?constantes.ETIQUETA_PENDIENTE:\'\'}}\r\n              </span>\r\n              <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionTransferencia"\r\n                aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar" (click)="collpase()">\r\n                <i class="fa fa-minus"></i>\r\n              </a>\r\n            </div>\r\n          </div>\r\n          <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0 " id="collapseInformacionTransferencia">\r\n            <div class="row">\r\n              <div class="form-group col-lg-6 col-sm-6">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_MOTIVO}}</b>\r\n                </label>\r\n                <p-dropdown [options]="listadoMotivos" id="inputMotivo" name="motivo" [(ngModel)]="motivoSeleccionado"\r\n                  required optionLabel="tmDetalle" class="mousetrap" [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR">\r\n                  <ng-template let-item pTemplate="selectedItem">\r\n                    {{motivoSeleccionado?.tmDetalle}} ({{motivoSeleccionado?.tmCodigo}})\r\n                  </ng-template>\r\n                  <ng-template let-fs pTemplate="item">\r\n                    <div class="">{{fs.value.tmDetalle}} ({{fs.value.tmCodigo}})</div>\r\n                  </ng-template>\r\n                </p-dropdown>\r\n              </div>\r\n              <div class="col-lg-6 col-md-6">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_FECHA}}</strong>\r\n                  </label>\r\n                  <p-calendar class="mousetrap calendar" name="fechaTransferencia" inputId="iniFecha" [inputStyleClass]="fechaValido ==false ?\'has-error\':\'\' "\r\n                    [(ngModel)]="transferencia.transFecha" [showIcon]="true" [maxDate]="fechaMax" [appMaxDate]="fechaMax"\r\n                    dateFormat="dd/mm/yy" [locale]="es" (ngModelChange)="cambiaFecha()" required [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR"></p-calendar>\r\n                </div>\r\n              </div>\r\n              <div class="col-lg-6 col-md-6">\r\n                <div class="form-group form-group-sm" [ngClass]="{\'has-error\':bodegaSeleccionadaDestino === bodegaSeleccionadaOrigen}">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_BODEGA_ORIGEN}}</strong>\r\n                  </label>\r\n                  <select class="form-control form-control-sm mousetrap color-no-disabled" name="cboBodegaOrigen"\r\n                    [(ngModel)]="bodegaSeleccionadaOrigen" required (ngModelChange)="verificarBodegaValida()"\r\n                    [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR">\r\n                    <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="bodega" *ngFor="let bodega of listadoBodegas"> ({{bodega.bodCodigo}})\r\n                      {{bodega.bodNombre}}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="col-lg-6 col-md-6">\r\n                <div class="form-group form-group-sm" [ngClass]="{\'has-error\':bodegaSeleccionadaDestino === bodegaSeleccionadaOrigen}">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_BODEGA_DESTINO}}</strong>\r\n                  </label>\r\n                  <select class="form-control form-control-sm mousetrap color-no-disabled" name="cboBodegaDestino"\r\n                    [(ngModel)]="bodegaSeleccionadaDestino" required (ngModelChange)="verificarBodegaValida()"\r\n                    [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR">\r\n                    <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="bodega" *ngFor="let bodega of listadoBodegas"> ({{bodega.bodCodigo}})\r\n                      {{bodega.bodNombre}}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="col-lg-12 col-md-6">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_OBSERVACIONES}}</strong>\r\n                  </label>\r\n                  <input [appDescripcion]="transferencia.transObservaciones" id="observaciones" appUppercase class="form-control form-control-sm text-uppercase"\r\n                    type="text" [(ngModel)]="transferencia.transObservaciones" placeholder="{{constantes.TAG_SIN_OBSERVACIONES}}"\r\n                    (ngModelChange)="transferencia.transObservaciones=transferencia.transObservaciones.trim()" name="obs"\r\n                    [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR">\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \x3c!--LISTADO--\x3e\r\n      <div class="card m-1">\r\n        <div class="card-header">\r\n          <strong>{{constantes.TAG_DETALLE_TRANSFERENCIA}}</strong>\r\n        </div>\r\n        <div class="card-body p-0">\r\n          <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 595px);" class="ag-theme-balham"\r\n            [rowData]="listaInvDetalleTran" [columnDefs]="columnDefs" [enableSorting]="true" [rowSelection]="rowSelection"\r\n            [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n            [rowDragManaged]="true" [animateRows]="true" [suppressClickEdit]=true (gridReady)="onGridReady($event)"\r\n            (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()"\r\n            (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n            [stopEditingWhenGridLosesFocus]="true" [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimencionarColumnas()">\r\n          </ag-grid-angular>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n<p-contextMenu #menuOpciones [model]="opcionesDetalle" appendTo="body"></p-contextMenu>'},DKqk:function(e,t){e.exports='<div class="modal-primary" *ngIf="listadoEmpleados?.length>0 || empleadosBusqueda?.length>0">\r\n  <div class="card m-0">\r\n    <div class="modal-header p-2" *ngIf="isModal">\r\n      <h4 class="modal-title">{{constantes.RRHH_LISTADO_EMPLEADOS}}</h4>\r\n      <button type="button" class="close" style="color: white;" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n        <span aria-hidden="true">&times;</span>\r\n      </button>\r\n    </div>\r\n\r\n    <div class="card-header p-1" *ngIf="!isModal">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n        title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b> {{constantes.RRHH_LISTADO_EMPLEADOS}}</b>\r\n      <div class="card-header-actions">\r\n        <div class="btn-group d-lg-none">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirEmpleados()" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarEmpleados()" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n        </div>\r\n        <div class="btn-group d-none d-lg-block">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimir" (click)="imprimirEmpleados()" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportar" (click)="exportarEmpleados()" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="card-body p-0">\r\n      <div class="row">\r\n        <div class="col-sm-5 col-md-6">\r\n          <div class="input-group p-1">\r\n            <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n              size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n            <div class="input-group-append">\r\n              <span class="input-group-text">\r\n                <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-sm-7 col-md-6">\r\n          <div class="float-right pr-1">\r\n            <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName" maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n              defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham" [rowData]="tipoVista == \'C\' ? empleadosBusqueda : listadoEmpleados"\r\n        [columnDefs]="columnDefsSelected" [enableSorting]="true" (gridSizeChanged)="redimensionarColumnas()" [rowSelection]="rowSelection"\r\n        [enableColResize]="true" [context]="context" (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n        (cellContextMenu)="!isModal ? mostrarContextMenu($event.data, $event.event) : null" (contextmenu)="!isModal ? $event.preventDefault() : null"\r\n        (filterChanged)="actualizarFilas()" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; isModal ? filaSeleccionar() : consultar()">\r\n      </ag-grid-angular>\r\n    </div>\r\n  </div>\r\n</div>\r\n<p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},DixL:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("ZYCi"),r=o("z5Y/"),n=o("mwBN"),s=o("SZbH"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.router=o}return e.prototype.resolve=function(e){var t=this;JSON.parse(localStorage.getItem(n.a.KEY_SISINFOTO));return this.api.post("todocompuWS/appWebController/validarPermisos",{item:e.routeConfig.path},null).then(function(e){if(e&&e.extraInfo&&e.extraInfo.length>0)return e.extraInfo;t.toastr.error("No tiene Permisos para acceder a estas opciones","Error"),t.router.navigate(["/403"])}).catch(function(e){return t.handleError(e,t)})},e.prototype.handleError=function(e,t){switch(e.status){case 401:case 403:this.toastr.warning("No autorizado","Aviso"),sessionStorage.clear(),localStorage.clear(),this.router.navigate(["login"]);break;case 404:this.toastr.warning("p\xe1gina solicitada no se encuentra","Aviso"),this.router.navigate(["/404"]);break;case 0:this.toastr.warning("No hay conexi\xf3n con el servidor.","Aviso"),this.router.navigate(["/0"]);break;default:this.toastr.error(e.message||e,"Error")}t.cargando=!1},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[r.a,s.b,i.Router])],e)}()},"E/BC":function(e,t){e.exports=""},E3Da:function(e,t){e.exports='<form #frmProductoDatos=\'ngForm\' name="frmProductoDatos" autocomplete="off" class="card m-0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarFormulario" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="cambiarActivar()"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{accion}} {{constantes.TAG_PRODUCTO_MINUSCULA}} - </b>\r\n    <strong class="text-primary">{{empresaSeleccionada.empNombre}}</strong>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        <ng-template #tipContentImagenes>{{constantes.LABEL_IMAGENES}}</ng-template>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentImagenes" (click)="verImagenes()"\r\n          *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_IMAGENES}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        <ng-template #tipContentGuardar>{{constantes.LABEL_GUARDAR}}</ng-template>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentGuardar" id="btnGuardarProducto"\r\n          *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? insertarProducto(frmProductoDatos) : null">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentGuardar" id="btnGuardarProducto"\r\n          *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_EDITAR, true) ? actualizarProducto(frmProductoDatos) : null"\r\n          title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <ng-template #tipContentCancelar>{{accion ===\r\n          constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}</ng-template>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarProducto"\r\n          [ngbTooltip]="tipContentCancelar" (click)="cancelar()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" (click)="verImagenes()" *ngIf="accion === constantes.ACCION_CONSULTAR">\r\n          <i class="{{constantes.ICON_IMAGENES}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_IMAGENES}}</span>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarProducto" *ngIf="accion === constantes.ACCION_CREAR"\r\n          title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? insertarProducto(frmProductoDatos) : null"\r\n          [ngbTooltip]="constantes.LABEL_GUARDAR">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarProducto" *ngIf="accion === constantes.ACCION_EDITAR"\r\n          title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_EDITAR, true) ? actualizarProducto(frmProductoDatos) : null"\r\n          [ngbTooltip]="constantes.LABEL_GUARDAR">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarProducto"\r\n          (click)="cancelar()" [ngbTooltip]="tipContentCancelar">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body p-1">\r\n    <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n      \x3c!--Codigo producto--\x3e\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_PRODUCTO_CODIGO}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseProductoCodigo"\r\n              aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseProductoCodigo">\r\n          <div class="row">\r\n\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_PRINCIPAL}}</strong>\r\n              </label>\r\n              <input [appFocus]="accion===constantes.ACCION_CREAR" class="form-control form-control-sm text-uppercase mousetrap"\r\n                name="proCodigoPrincipal" type="text" placeholder="{{constantes.TAG_OPCIONAL}}" pKeyFilter="alphanum"\r\n                [(ngModel)]="producto.proCodigoPrincipal" appUppercase *ngIf="accion === constantes.ACCION_CREAR">\r\n              <label *ngIf="accion!=constantes.ACCION_CREAR" class="form-control form-control-sm text-uppercase label-input">{{producto.proCodigoPrincipal}}</label>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                placement="right" autoClose="outside" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" triggers="mouseenter:mouseleave"\r\n                container="body"></span>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm col-sm-4" *ngIf="mostrarCampos">\r\n              <label>\r\n                <strong>{{constantes.TAG_ALTERNO}}</strong>\r\n              </label>\r\n              <input type="text" name="proCodigoAlterno" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="producto.proCodigoAlterno"\r\n                class="form-control form-control-sm text-uppercase mousetrap" appUppercase>\r\n            </div>\r\n\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_CODIGO_BARRAS}}</strong>\r\n                &nbsp;\r\n                <a (click)="mostrarCodigoBarras()" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <input class="form-control form-control-sm text-uppercase mousetrap" name="proCodigoBarra" type="text"\r\n                placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="producto.proCodigoBarra" appUppercase>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n        <div class="card-footer" *ngIf="vistaFormulario">\r\n          <div class="text-right">\r\n            <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardar" type="button" (click)="guardarVendedor(frmVendedor)"\r\n              class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}"></i> &nbsp; {{constantes.LABEL_GUARDAR}}</button>\r\n            <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardar" type="button" (click)="actualizarVendedor(frmVendedor)"\r\n              class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_EDITAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}"></i> &nbsp; {{constantes.LABEL_GUARDAR}}</button>\r\n            <button (click)="resetearFormulario();" type="button" class="btn btn-sm btn-default" [disabled]="cargando"\r\n              title="{{constantes.ATAJO_CANCELAR}}" *ngIf="listaInvVendedorComboListadoTO.length!=0">\r\n              <i class="{{constantes.ICON_CANCELAR}}"></i> &nbsp; {{constantes.LABEL_CANCELAR}} </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--C\xf3digo informaci\xf3n--\x3e\r\n      <div class="card mb-1 pt-0">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_PRODUCTO_INFORMACION}}</b>\r\n          <div class="card-header-actions">\r\n            <a (click)="verPrecios()" class="card-header-action btn-minimize">\r\n              <span container="body">\r\n                <i class="fa fa-plus-square"></i> {{constantes.TAG_CONFIGURAR_PRECIOS}}</span>\r\n            </a>\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseProductoInformacion"\r\n              aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseProductoInformacion">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label class="cursor-pointer">\r\n                <strong>{{constantes.TAG_PRODUCTO_MARCA}}</strong>\r\n                &nbsp;\r\n                <a (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? mostrarProductoMarca() : null" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="marca" [(ngModel)]="producto.marCodigo" required>\r\n                <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="marca.marCodigo" *ngFor="let marca of listadoMarcas"> {{marca.marDetalle}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_PRODUCTO_EMPAQUE}}</strong>\r\n              </label>\r\n              <input type="text" name="proEmpaque" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="producto.proEmpaque"\r\n                class="form-control form-control-sm text-uppercase mousetrap" appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label class="cursor-pointer">\r\n                <strong>{{constantes.TAG_PRODUCTO_PRESENT_UNIDAD}}</strong>\r\n                &nbsp;\r\n                <a (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? mostrarProductoPresentacionMedida() : null"\r\n                  *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="pmedida" [(ngModel)]="producto.presUCodigo"\r\n                required>\r\n                <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="medida.presuCodigo" *ngFor="let medida of listadoPresentacionesMedida">\r\n                  {{medida.presuDetalle}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label class="cursor-pointer">\r\n                <strong>{{constantes.TAG_PRODUCTO_CAJA}}</strong>\r\n                &nbsp;\r\n                <a (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? mostrarPPCajas() : null" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="caja" [(ngModel)]="producto.presCCodigo" required>\r\n                <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="caja.prescCodigo" *ngFor="let caja of listadoPresentacionesCaja">\r\n                  {{caja.prescDetalle}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_NOMBRE}}</strong>\r\n              </label>\r\n              <input class="form-control form-control-sm text-uppercase mousetrap" name="proNombre" required type="text"\r\n                placeholder="OBLIGATORIO" [(ngModel)]="producto.proNombre" appUppercase (blur)="espacios()">\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-6 col-sm-6" *ngIf="mostrarCampos">\r\n              <label>\r\n                <strong>{{constantes.TAG_DETALLE}}</strong>\r\n              </label>\r\n              <input type="text" name="proDetalle" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="producto.proDetalle"\r\n                class="form-control form-control-sm text-uppercase mousetrap" appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label class="cursor-pointer">\r\n                <strong>{{constantes.TAG_CATEGORIA}}</strong>\r\n                &nbsp;\r\n                <a (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? mostrarProductoCategoria() : null" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="categoria" [(ngModel)]="producto.catCodigo"\r\n                required>\r\n                <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="categoria.catCodigo" *ngFor="let categoria of listadoCategorias">\r\n                  {{categoria.catDetalle}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label class="cursor-pointer">\r\n                <strong>{{constantes.TAG_PRODUCTO_TIPO}}</strong>\r\n                &nbsp;\r\n                <a (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? mostrarProductoTipo() : null" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="tipo" [(ngModel)]="producto.tipCodigo" required>\r\n                <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="tipo.tipCodigo" *ngFor="let tipo of listadoTipos"> {{tipo.tipDetalle}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label class="cursor-pointer">\r\n                <strong>{{constantes.TAG_PRODUCTO_MEDIDA}}</strong>\r\n                &nbsp;\r\n                <a (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? medidaProducto() : null" *ngIf="accion != constantes.ACCION_CONSULTAR">\r\n                  <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                </a>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap" name="medida" [(ngModel)]="producto.medCodigo" required>\r\n                <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="medida.medidaCodigo" *ngFor="let medida of listadoMedidas"> {{medida.medidaDetalle}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_PRODUCTO_FACTOR}}</strong>\r\n              </label>\r\n              <input type="text" name="proFactorCajabulto" [appAutonumeric]="configAutonumeric" [appAutonumericValue]="producto.proFactorCajabulto"\r\n                value="{{producto.proFactorCajabulto}}" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="producto.proFactorCajabulto"\r\n                class="form-control form-control-sm text-uppercase mousetrap">\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_IVA}}</strong>\r\n              </label>\r\n              <select [disabled]="!puedeModificarIva" class="form-control input-sm mousetrap" name="proIva" [(ngModel)]="producto.proIva"\r\n                required (change)="activarCreditoTributario()">\r\n                <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="iva.clave" *ngFor="let iva of listadoOpcionesIVA"> {{iva.clave}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_STOCK_MINIMO}}</strong>\r\n              </label>\r\n              <input type="text" name="prominimo" placeholder="{{constantes.TAG_OPCIONAL}}" [appAutonumeric]="configAutonumericEnteros"\r\n                [appAutonumericValue]="producto.proMinimo" value="{{producto.proMinimo}}" [(ngModel)]="producto.proMinimo"\r\n                class="form-control form-control-sm text-uppercase mousetrap">\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_STOCK_MAXIMO}}</strong>\r\n              </label>\r\n              <input type="text" name="promaximo" placeholder="{{constantes.TAG_OPCIONAL}}" [appAutonumeric]="configAutonumericEnteros"\r\n                [appAutonumericValue]="producto.proMaximo" value="{{producto.proMaximo}}" [(ngModel)]="producto.proMaximo"\r\n                class="form-control form-control-sm text-uppercase mousetrap">\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-3 col-sm-6" *ngIf="mostrarCampos && mostrarCreditoTributario">\r\n              <div class="pb-2 pt-4">\r\n                <input type="checkbox" name="proCreditoTributario" [(ngModel)]="producto.proCreditoTributario">\r\n                {{constantes.TAG_CREDITO_TRIBUTARIO}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--Configuraci\xf3n de cuentas--\x3e\r\n      <div class="card mb-1" *ngIf="mostrarCampos">\r\n        <div class="card-header pt-1">\r\n          <b> {{constantes.TAG_PRODUCTO_CONFIGURACION_CUENTAS}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseProductoConfiguracionCuentas"\r\n              aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseProductoConfiguracionCuentas">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_COMPRAS}}</strong>\r\n              </label>\r\n              <ng-template #tipCuentaCompra>{{cuentaCompras.cuentaDetalle}}</ng-template>\r\n              <input type="text" name="proCuentaInventario" [ngbTooltip]="cuentaCompras.cuentaDetalle ? tipCuentaCompra : null"\r\n                placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="producto.proCuentaInventario" class="form-control form-control-sm text-uppercase mousetrap"\r\n                (keydown)="buscarConfiguracionDeCuentas($event, producto.proCuentaInventario, \'C\')" (blur)="validarCuenta(\'C\')"\r\n                appUppercase *ngIf="accion!=constantes.ACCION_CONSULTAR" [ngClass]="{ \'has-error\':!cuentasValidoC}">\r\n              <label class="form-control form-control-sm text-uppercase label-input" [ngbTooltip]="cuentaCompras.cuentaDetalle ? tipCuentaCompra : null"\r\n                *ngIf="accion===constantes.ACCION_CONSULTAR">\r\n                {{producto.proCuentaInventario}} &nbsp;\r\n              </label>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_VENTAS}}</strong>\r\n              </label>\r\n              <ng-template #tipCuentaVenta>{{cuentaVentas.cuentaDetalle}}</ng-template>\r\n              <input type="text" id="tipCuentaVenta" name="proCuentaVenta" [ngbTooltip]="cuentaVentas.cuentaDetalle ? tipCuentaVenta : null"\r\n                placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="producto.proCuentaVenta" class="form-control form-control-sm text-uppercase mousetrap"\r\n                (keydown)="buscarConfiguracionDeCuentas($event, producto.proCuentaVenta, \'V\')" (blur)="validarCuenta(\'V\')"\r\n                appUppercase *ngIf="accion!=constantes.ACCION_CONSULTAR" [ngClass]="{ \'has-error\':!cuentasValidoV}">\r\n              <label class="form-control form-control-sm text-uppercase label-input" [ngbTooltip]="cuentaVentas.cuentaDetalle ? tipCuentaVenta : null"\r\n                *ngIf="accion===constantes.ACCION_CONSULTAR">\r\n                {{producto.proCuentaVenta}} &nbsp;\r\n              </label>\r\n            </div>\r\n            <div class="form-group form-group-sm col-lg-4 col-sm-4">\r\n              <label>\r\n                <strong>{{constantes.TAG_COSTO_AUTOMATICO}}</strong>\r\n              </label>\r\n              <ng-template #tipCuentaCosto>{{cuentaCostos.cuentaDetalle}}</ng-template>\r\n              <input type="text" id="tipCuentaCosto" name="proCuentaCostoAutomatico" [ngbTooltip]="cuentaCostos.cuentaDetalle ? tipCuentaCosto : null"\r\n                placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="producto.proCuentaCostoAutomatico" class="form-control form-control-sm text-uppercase mousetrap"\r\n                (keydown)="buscarConfiguracionDeCuentas($event, producto.proCuentaCostoAutomatico, \'A\')" (blur)="validarCuenta(\'A\')"\r\n                appUppercase *ngIf="accion!=constantes.ACCION_CONSULTAR" [ngClass]="{ \'has-error\':!cuentasValidoA}">\r\n              <label class="form-control form-control-sm text-uppercase label-input" [ngbTooltip]="cuentaCostos.cuentaDetalle ? tipCuentaCosto : null"\r\n                *ngIf="accion===constantes.ACCION_CONSULTAR">\r\n                {{producto.proCuentaCostoAutomatico}} &nbsp;\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--retencion predeterminada--\x3e\r\n      <div class="card mb-1" *ngIf="!empresaExtranjera && mostrarCampos">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_RETENCION_PREDETERMINADA}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseProductoRetencion"\r\n              aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseProductoRetencion">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-12">\r\n              <label>\r\n                <strong>{{constantes.TAG_SUSTENTO_TRIBUTARIO}}</strong>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap text-uppercase" id="susCodigo" name="susCodigo"\r\n                [(ngModel)]="producto.susCodigo">\r\n                <option value=null disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="sustento.susCodigo" *ngFor="let sustento of listadoSustentos">\r\n                  {{sustento.susDescripcion}}</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-12">\r\n              <label>\r\n                <strong>{{constantes.TAG_TIPO_CONCEPTO}}</strong>\r\n              </label>\r\n              <select class="form-control input-sm mousetrap text-uppercase" name="conCodigo" [(ngModel)]="producto.conCodigo">\r\n                <option value=null disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="concepto.conCodigo" *ngFor="let concepto of listadoConceptos">\r\n                  {{concepto.conConcepto}}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--Imagenes--\x3e\r\n      <div class="card mb-1" *ngIf="accion === constantes.ACCION_EDITAR  || accion === constantes.ACCION_CREAR">\r\n        <div class="card-header">\r\n          <strong>{{ constantes.TAG_IMAGENES }}</strong>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseDatosImagenes"\r\n              aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="card-body collapse show p-1" id="collapseDatosImagenes">\r\n          \x3c!--Nuevo--\x3e\r\n          <div class="form-group form-group-sm" *ngIf="mostrarFileUploadNuevo">\r\n            <p-fileUpload mode="advanced" id="imageUploadNuevo" name="listadoImagenes[]" [showCancelButton]="false"\r\n              [showUploadButton]="false" invalidFileTypeMessageSummary="{0}:  {{constantes.MSJ_ARCHIVO_NO_VALIDO}}, "\r\n              invalidFileSizeMessageSummary="{0}: Tama\xf1o de archivo inv\xe1lido" invalidFileTypeMessageDetail="{{constantes.MSJ_ARCHIVO_PERMITIDO}}: {0}."\r\n              chooseLabel="{{constantes.TAG_SELECCIONE}}" cancelLabel="{{constantes.LABEL_CANCELAR}}" accept="image/*"\r\n              multiple="multiple" previewWidth="200" maxFileSize="1000000" (onSelect)="seleccionarImagenes($event)"\r\n              (onRemove)="eliminarItem($event)" invalidFileSizeMessageDetail="El tama\xf1o m\xe1ximo de carga es 1 MB.">\r\n\r\n            </p-fileUpload>\r\n          </div>\r\n          \x3c!--Editar--\x3e\r\n          <div class="form-group form-group-sm" id="imageUploadEditar" *ngIf="!mostrarFileUploadNuevo">\r\n            <p-fileUpload name="listadoImagenes[]" [showCancelButton]="false" [showUploadButton]="false"\r\n              invalidFileTypeMessageSummary="{0}:  {{constantes.MSJ_ARCHIVO_NO_VALIDO}}, "\r\n              invalidFileSizeMessageSummary="{0}: \r\n            Tama\xf1o de archivo inv\xe1lido" invalidFileTypeMessageDetail="{{constantes.MSJ_ARCHIVO_PERMITIDO}}: {0}."\r\n              chooseLabel="{{constantes.TAG_SELECCIONE}}" cancelLabel="{{constantes.LABEL_CANCELAR}}" accept="image/*"\r\n              multiple="multiple" previewWidth="150" maxFileSize="1000000" (onSelect)="seleccionarImagenes($event)"\r\n              invalidFileSizeMessageDetail="El tama\xf1o m\xe1ximo de carga es 1 MB.">\r\n\r\n              <ng-template pTemplate="toolbar">\r\n\r\n              </ng-template>\r\n\r\n              <ng-template let-file pTemplate="file">\r\n\r\n              </ng-template>\r\n\r\n              <ng-template pTemplate="content">\r\n\r\n              </ng-template>\r\n\r\n            </p-fileUpload>\r\n\r\n            <div class="row">\r\n              <div class="col-lg-2 col-md-2 col-sm-3" *ngFor="let imagen of listadoImagenes">\r\n                <div class="card p-1 mb-1">\r\n                  <img #img class="card-img-top img-responsive" src="{{imagen.imagenString}}" alt="Card image cap"\r\n                    width="100" height="150">\r\n                  <div class="card-footer text-muted text-center">\r\n                    <button class="btn btn-sm btn-danger mr-1" (click)="eliminar(imagen)"> <i class="{{constantes.ICON_ELIMINAR}}"\r\n                        aria-hidden="true"></i></button>\r\n                    <button class="btn btn-sm btn-primary" (click)="visualizar(imagen)"> <i class="{{constantes.ICON_CONSULTAR}}"\r\n                        aria-hidden="true"></i></button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <p-dialog header="Visualizaci\xf3n de im\xe1gen" styleClass="visualizadorImagenes" [(visible)]="visualizarImagen"\r\n              modal="true" minWidth="200" minHeight="200" showHeader="false">\r\n              <img #img class="card-img-top img-responsive" src="{{imagen.imagenString}}" alt="Card image cap">\r\n            </p-dialog>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </div>\r\n</form>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},EBa0:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.index=0,this.pedidonumero="",this.codigoempresa="",this.codigomotivo="",this.detallemotivo="",this.codigosector="",this.pedfecha=null,this.pedpendiente=!1,this.pedaprobado=!1,this.pedejecutado=!1,this.pedanulado=!1,this.pedmontototal=0,this.usrfechainserta=null,this.obsregistra="",this.obsaprueba="",this.obsejecuta="",this.aprobador="",this.ejecutor="",this.registrador="",this.estado="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.index=e.index?e.index:this.index,this.pedidonumero=e.pedidonumero?e.pedidonumero:this.pedidonumero,this.codigoempresa=e.codigoempresa?e.codigoempresa:this.codigoempresa,this.codigosector=e.codigosector?e.codigosector:this.codigosector,this.codigomotivo=e.codigomotivo?e.codigomotivo:this.codigomotivo,this.detallemotivo=e.detallemotivo?e.detallemotivo:this.detallemotivo,this.pedfecha=e.pedfecha?e.pedfecha:this.pedfecha,this.pedpendiente=e.pedpendiente?e.pedpendiente:this.pedpendiente,this.pedaprobado=e.pedaprobado?e.pedaprobado:this.pedaprobado,this.pedejecutado=e.pedejecutado?e.pedejecutado:this.pedejecutado,this.pedanulado=e.pedanulado?e.pedanulado:this.pedanulado,this.pedmontototal=e.pedmontototal?e.pedmontototal:this.pedmontototal,this.usrfechainserta=e.usrfechainserta?e.usrfechainserta:this.usrfechainserta,this.obsregistra=e.obsregistra?e.obsregistra:this.obsregistra,this.obsaprueba=e.obsaprueba?e.obsaprueba:this.obsaprueba,this.obsejecuta=e.obsejecuta?e.obsejecuta:this.obsejecuta,this.aprobador=e.aprobador?e.aprobador:this.aprobador,this.ejecutor=e.ejecutor?e.ejecutor:this.ejecutor,this.registrador=e.registrador?e.registrador:this.registrador,this.estado=e.estado?e.estado:this.estado},e}()},EKjD:function(e,t){e.exports=""},EWe9:function(e,t){e.exports='<form #frmLiquidacion=\'ngForm\' autocomplete="off">\r\n  <div class="card m-0">\r\n    <div class="card-header">\r\n      <button id="btnActivarLiquidacion" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS && esContable" (click)="cambiarActivar()"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activarLiquidacion?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <strong> {{titulo}}</strong>\r\n      <strong class="text-primary">: {{rhRol.rhEmpleado.empNombres}}</strong>\r\n      <div class="card-header-actions" *ngIf="!esContable">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarLiquidacion" (click)="guardarLiquidacion(frmLiquidacion)"\r\n          title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}}</span>\r\n        </button>\r\n      </div>\r\n      <div class="card-header-actions" *ngIf="esContable">\r\n        <app-botones-accion [conContable]="conContableCopia" [data]="data" (enviarAccion)="accionesBotones($event)"></app-botones-accion>\r\n      </div>\r\n    </div>\r\n    <fieldset [disabled]="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR">\r\n      <div class="card-body p-1">\r\n        <div *ngIf="esContable">\r\n          <app-contable-cabecera [data]="data" [conContable]="conContableCopia" [tipoSeleccionado]="tipoSeleccionado"\r\n            [empresaSeleccionada]="empresaSeleccionada" (accionFechaValido)="fechaContableValido = $event"></app-contable-cabecera>\r\n        </div>\r\n        \x3c!--Informacion trabajador--\x3e\r\n        <div class="card">\r\n          <div class="card-header text-white bg-primary">\r\n            <b> {{constantes.TAG_INFORMACION_TRABAJADOR}}</b>\r\n          </div>\r\n          <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0">\r\n            <div class="row">\r\n              \x3c!--Empresa--\x3e\r\n              <div class="col-lg-3">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_EMPRESA}}</b>\r\n                  </label>\r\n                  <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n                    (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n                    <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                      ({{empresa.empCodigo}})\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              \x3c!--Identificacion--\x3e\r\n              <div class="col-lg-3">\r\n                <div class="form-group form-group-sm has-feedback">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_NUMERO_IDENTIFICACION}}</strong>\r\n                  </label>\r\n                  <label class="form-control form-control-sm text-uppercase label-input" *ngIf="accion !== constantes.ACCION_CREAR">{{rhRol.rhEmpleado.rhEmpleadoPK.empId}}</label>\r\n                  <input [appFocus]="true" id="empleado" class="form-control input-sm text-uppercase mousetrap" name="empleado"\r\n                    required maxlength="20" placeholder="{{constantes.TAG_OBLIGATORIO}}" (keydown)="buscarEmpleado($event)"\r\n                    (blur)="validarEmpleado()" [(ngModel)]="rhRol.rhEmpleado.rhEmpleadoPK.empId" [ngbTooltip]="rhRol.rhEmpleado.empNombres ? rhRol.rhEmpleado.empNombres : null"\r\n                    *ngIf="accion === constantes.ACCION_CREAR">\r\n                  <span class="fa fa-question-circle form-control-feedback" placement="left" ngbPopover="{{constantes.MSJ_COINCIDENCIA_EMPLEADO}}"\r\n                    triggers="mouseenter:mouseleave" container="body" *ngIf="accion === constantes.ACCION_CREAR"></span>\r\n                </div>\r\n              </div>\r\n              \x3c!--Cargo--\x3e\r\n              <div class="col-lg-3">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CARGO}}</strong>\r\n                  </label>\r\n                  <label class="form-control form-control-sm text-uppercase label-input" *ngIf="!rhRol.rhEmpleado.empCargo">{{constantes.TAG_OBLIGATORIO}}</label>\r\n                  <label class="form-control form-control-sm text-uppercase label-input" *ngIf="rhRol.rhEmpleado.empCargo">{{rhRol.rhEmpleado.empCargo}}</label>\r\n                </div>\r\n              </div>\r\n              \x3c!--Fecha registro--\x3e\r\n              <div class="col-lg-3">\r\n                <div class="form-group form-group-sm" [ngClass]="{ \'has-error\':!periodoAbierto}">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_FECHA_REGISTRO}}</b>\r\n                  </label>\r\n                  <p-calendar id="fechaRegistro" inputId="fechaRegistro" name="fechaRegistro" [(ngModel)]="fechaRegitro"\r\n                    [minDate]="fechaUltimoSueldo" [appMinDate]="fechaUltimoSueldo" [maxDate]="fechaActual" [appMaxDate]="fechaActual"\r\n                    dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true" (onBlur)="validarPeriodoAbierto();validarFechas()"></p-calendar>\r\n                </div>\r\n              </div>\r\n              \x3c!--Fecha fin labores--\x3e\r\n              <div class="col-lg-3">\r\n                <div class="form-group form-group-sm" [ngClass]="{ \'has-error\':!fechaValido}">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_FECHA_FIN_LABORES}}</b>\r\n                  </label>\r\n                  <p-calendar id="fechaFinLabores" inputId="fechaFinLabores" name="fechaFinLabores" [(ngModel)]="fechaFinLabores"\r\n                    dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true" (ngModelChange)="validarFechas()"\r\n                    (onBlur)="validarFechas()"></p-calendar>\r\n                </div>\r\n              </div>\r\n              \x3c!--motivo salida--\x3e\r\n              <div class="col-lg-3">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_MOTIVO_SALIDA}}</b>\r\n                  </label>\r\n                  <select id="motivoSalida" class="form-control form-control-sm mousetrap" name="motivoSalida"\r\n                    [(ngModel)]="rhRol.rhEmpleado.empMotivoSalida" required>\r\n                    <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="motivoSalida" *ngFor="let motivoSalida of listaMotivos">{{motivoSalida}}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              \x3c!--Forma pago--\x3e\r\n              <div class="col-lg-3">\r\n                <div class="form-group form-group-sm has-feedback">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_FORMA_PAGO}}</b>\r\n                    &nbsp;\r\n                    <a (click)="listarFormasDePago()" *ngIf="accion === constantes.ACCION_CREAR">\r\n                      <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                        container="body"></span>\r\n                    </a>\r\n                  </label>\r\n                  <select class="form-control form-control-sm mousetrap" name="formaPago" [(ngModel)]="formaPagoSeleccionada"\r\n                    required (ngModelChange)="validarDocumento()">\r\n                    <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="formaPago" *ngFor="let formaPago of listaFormaPago">{{formaPago.fpDetalle}}\r\n                      ({{formaPago.ctaCodigo}})\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              \x3c!--Documento--\x3e\r\n              <div class="col-lg-3">\r\n                <div class="form-group form-group-sm" [ngClass]="{ \'has-error\':!documentoValido}">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_NUMERO_DOCUMENTO}}</b>\r\n                  </label>\r\n                  <input id="nroDocumento" class="form-control form-control-sm text-uppercase mousetrap" type="text"\r\n                    [(ngModel)]="rhRol.rolDocumento" name="nroDocumento" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                    maxlength="100" appUppercase (blur)="validarDocumento()">\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        \x3c!--Informacion liquidacion--\x3e\r\n        <div class="card">\r\n          <div class="card-header text-white bg-primary">\r\n            <b> {{constantes.TAG_INFORMACION_LIQUIDACION}}</b>\r\n          </div>\r\n          <div class="card-body p-1">\r\n\r\n            \x3c!--Ingresos--\x3e\r\n            <div class="card">\r\n              <div class="card-header">\r\n                <b> {{constantes.TAG_INGRESOS}}</b>\r\n                <div class="card-header-actions">\r\n                  <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseIngresos"\r\n                    aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n                    <i class="fa fa-minus"></i>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseIngresos">\r\n                <div class="row">\r\n                  \x3c!--Saldo anterior--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_SALDO_ANTERIOR}}</strong>\r\n                      </label>\r\n                      <label class="form-control form-control-sm text-right label-input" *ngIf="!rhRol.rhEmpleado.empSaldoAnterior">0.00</label>\r\n                      <label class="form-control form-control-sm text-right label-input" *ngIf="rhRol.rhEmpleado.empSaldoAnterior">{{rhRol.rhEmpleado.empSaldoAnterior}}</label>\r\n                    </div>\r\n                  </div>\r\n                  \x3c!--xiii sueldo--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.RRHH_XIII_SUELDO}}</strong>\r\n                      </label>\r\n                      <input name="xiiiSueldo" type="text" class="form-control form-control-sm text-right" [(ngModel)]="rhRol.rolLiqXiii"\r\n                        [appAutonumeric2]="rhRol.rolLiqXiii" value="{{rhRol.rolLiqXiii}}" (updateValue)="rhRol.rolLiqXiii = $event"\r\n                        [appMinNumber]="0" required (blur)="calcularTotal()" maxlength="9">\r\n                    </div>\r\n                  </div>\r\n                  \x3c!--xiv sueldo--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.RRHH_XIV_SUELDO}}</strong>\r\n                      </label>\r\n                      <input name="xivSueldo" type="text" class="form-control form-control-sm text-right" [(ngModel)]="rhRol.rolLiqXiv"\r\n                        [appAutonumeric2]="rhRol.rolLiqXiv" value="{{rhRol.rolLiqXiv}}" (updateValue)="rhRol.rolLiqXiv = $event"\r\n                        [appMinNumber]="0" required (blur)="calcularTotal()" maxlength="9">\r\n                    </div>\r\n                  </div>\r\n                  \x3c!--vacaciones--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_VACACIONES}}</strong>\r\n                      </label>\r\n                      <input name="vacaciones" type="text" class="form-control form-control-sm text-right" [(ngModel)]="rhRol.rolLiqVacaciones"\r\n                        [appAutonumeric2]="rhRol.rolLiqVacaciones" value="{{rhRol.rolLiqVacaciones}}" (updateValue)="rhRol.rolLiqVacaciones = $event"\r\n                        [appMinNumber]="0" required (blur)="calcularTotal()" maxlength="9">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--Descuentos--\x3e\r\n            <div class="card">\r\n              <div class="card-header">\r\n                <b> {{constantes.TAG_DESCUENTOS}}</b>\r\n                <div class="card-header-actions">\r\n                  <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseDescuentos"\r\n                    aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n                    <i class="fa fa-minus"></i>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseDescuentos">\r\n                <div class="row">\r\n                  \x3c!--Saldo anterior--\x3e\r\n                  <div class="col-lg-3" *ngIf="activarNegativo">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_SALDO_ANTERIOR}}</strong>\r\n                      </label>\r\n                      <label class="form-control form-control-sm text-right label-input" *ngIf="!rhRol.rhEmpleado.empSaldoAnterior">0.00</label>\r\n                      <label class="form-control form-control-sm text-right label-input" *ngIf="rhRol.rhEmpleado.empSaldoAnterior">{{rhRol.rhEmpleado.empSaldoAnterior}}</label>\r\n                    </div>\r\n                  </div>\r\n                  \x3c!--Anticipos--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_ANTICIPOS}}</strong>\r\n                      </label>\r\n                      <label class="form-control form-control-sm text-right label-input" *ngIf="!rhRol.rhEmpleado.empSaldoAnticipos">0.00</label>\r\n                      <label class="form-control form-control-sm text-right label-input" *ngIf="rhRol.rhEmpleado.empSaldoAnticipos">{{rhRol.rhEmpleado.empSaldoAnticipos}}</label>\r\n                    </div>\r\n                  </div>\r\n                  \x3c!--Prestamos--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_PRESTAMOS}}</strong>\r\n                      </label>\r\n                      <label class="form-control form-control-sm text-right label-input" *ngIf="!rhRol.rhEmpleado.empSaldoPrestamos">0.00</label>\r\n                      <label class="form-control form-control-sm text-right label-input" *ngIf="rhRol.rhEmpleado.empSaldoPrestamos">{{rhRol.rhEmpleado.empSaldoPrestamos}}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--Indemnizaciones--\x3e\r\n            <div class="card">\r\n              <div class="card-header">\r\n                <b> {{constantes.TAG_INDEMNIZACIONES}}</b>\r\n                <div class="card-header-actions">\r\n                  <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseIndemnizaciones"\r\n                    aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n                    <i class="fa fa-minus"></i>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseIndemnizaciones">\r\n                <div class="row">\r\n                  \x3c!--Salario digno--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_SALARIO_DIGNO}}</strong>\r\n                      </label>\r\n                      <input name="salarioDigno" type="text" class="form-control form-control-sm text-right"\r\n                        [(ngModel)]="rhRol.rolLiqSalarioDigno" [appAutonumeric2]="rhRol.rolLiqSalarioDigno" value="{{rhRol.rolLiqSalarioDigno}}"\r\n                        (updateValue)="rhRol.rolLiqSalarioDigno = $event" [appMinNumber]="0" required (blur)="calcularTotal()"\r\n                        maxlength="9">\r\n                    </div>\r\n                  </div>\r\n                  \x3c!--Bonificaci\xf3n desahucio 25%--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_BONIFICACION_DESAHUCIO_25}}</strong>\r\n                      </label>\r\n                      <input name="bonDesahucio25" type="text" class="form-control form-control-sm text-right"\r\n                        [(ngModel)]="rhRol.rolLiqDesahucio" [appAutonumeric2]="rhRol.rolLiqDesahucio" value="{{rhRol.rolLiqDesahucio}}"\r\n                        (updateValue)="rhRol.rolLiqDesahucio = $event" [appMinNumber]="0" required (blur)="calcularTotal()"\r\n                        maxlength="9">\r\n                    </div>\r\n                  </div>\r\n                  \x3c!--Despido intempestivo--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_DESPIDO_INTEMPESTIVO}}</strong>\r\n                      </label>\r\n                      <input name="despidoIntem" type="text" class="form-control form-control-sm text-right"\r\n                        [(ngModel)]="rhRol.rolLiqDesahucioIntempestivo" [appAutonumeric2]="rhRol.rolLiqDesahucioIntempestivo"\r\n                        value="{{rhRol.rolLiqDesahucioIntempestivo}}" (updateValue)="rhRol.rolLiqDesahucioIntempestivo = $event"\r\n                        [appMinNumber]="0" required (blur)="calcularTotal()" maxlength="9">\r\n                    </div>\r\n                  </div>\r\n                  \x3c!--Bonificaci\xf3n voluntaria--\x3e\r\n                  <div class="col-lg-3">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_BONIFICACION_VOLUNTARIA}}</strong>\r\n                      </label>\r\n                      <input name="BonVoluntaria" type="text" class="form-control form-control-sm text-right"\r\n                        [(ngModel)]="rhRol.rolLiqBonificacion" [appAutonumeric2]="rhRol.rolLiqBonificacion" value="{{rhRol.rolLiqBonificacion}}"\r\n                        (updateValue)="rhRol.rolLiqBonificacion = $event" [appMinNumber]="0" required (blur)="calcularTotal()"\r\n                        maxlength="9">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--Observaciones--\x3e\r\n            <div class="card">\r\n              <div class="card-body">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_OBSERVACIONES}} </strong>\r\n                  </label>\r\n                  <input id="observaciones" name="observaciones" [(ngModel)]="rhRol.rolObservaciones" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                    class="form-control form-control-sm text-uppercase mousetrap" maxlength="1000" appUppercase>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </fieldset>\r\n    <div class="card-footer">\r\n      <h5 class="text-right"><strong>{{constantes.TAG_TOTAL_PUNTOS}} {{totalLiquidacion | number:\'1.2-2\'}}</strong></h5>\r\n    </div>\r\n\r\n  </div>\r\n</form>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},Eyeg:function(e,t){e.exports=""},FJOi:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvVentaMotivoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvVentasMotivoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvVentaMotivoTO(e.extraInfo):(t.despuesDeListarInvVentaMotivoTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarVentaMotivoComboTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaVentaMotivoComboTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarVentaMotivoComboTO(e.extraInfo):(t.despuesDeListarVentaMotivoComboTO([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarInvVentasMotivoTO=function(e,t,o,a){var i=this;this.api.post("todocompuWS/inventarioWebController/insertarInvVentasMotivoTO",e,a).then(function(e){e&&e.extraInfo?t.despuesDeInsertarInvVentasMotivoTO(e.operacionMensaje,o):(i.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,t)})},e.prototype.actualizarInvVentaMotivoTO=function(e,t,o,a){var i=this;this.api.post("todocompuWS/inventarioWebController/modificarInvVentasMotivoTO",e,a).then(function(e){e&&e.extraInfo?t.despuesDeActualizarInvVentasMotivoTO(e.operacionMensaje,o):(i.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_CODIGO,field:"vmCodigo",width:100,minWidth:100},{headerName:s.a.TAG_DETALLE,field:"vmDetalle",width:400,minWidth:400},{headerName:s.a.TAG_TIPO_CONTABLE,field:"tipCodigo",width:300,minWidth:300},{headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"vmInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[i.a,r.b,n.a])],e)}()},FYXy:function(e,t,o){"use strict";var a=o("CcnG"),i=o("nR5P"),r=o("mwBN"),n=o("SZbH"),s=o("Ungd"),c=o("z5Y/"),l=o("hqLJ"),d=function(){function e(e){this.rhRol=new l.a,this.rolDesdeTexto=null,this.rolHastaTexto=null,this.rolImpuestoRenta=0,this.rolPermisoMedico=0,this.rolDescFondoReserva=0,this.rolLiqXiiiSueldo=0,this.rolLiqXivSueldo=0,this.rolValorPrestamos=0,this.totalPagar=0,this.totalIngresos=0,this.totalDescuentos=0,this.totalLiquidacion=0,this.detalle=[],this.mensaje=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.rhRol=e.rhRol?e.rhRol:this.rhRol,this.rolDesdeTexto=e.rolDesdeTexto?e.rolDesdeTexto:this.rolDesdeTexto,this.rolHastaTexto=e.rolHastaTexto?e.rolHastaTexto:this.rolHastaTexto,this.rolImpuestoRenta=e.rolImpuestoRenta?e.rolImpuestoRenta:this.rolImpuestoRenta,this.rolPermisoMedico=e.rolPermisoMedico?e.rolPermisoMedico:this.rolPermisoMedico,this.rolDescFondoReserva=e.rolDescFondoReserva?e.rolDescFondoReserva:this.rolDescFondoReserva,this.rolLiqXiiiSueldo=e.rolLiqXiiiSueldo?e.rolLiqXiiiSueldo:this.rolLiqXiiiSueldo,this.rolLiqXivSueldo=e.rolLiqXivSueldo?e.rolLiqXivSueldo:this.rolLiqXivSueldo,this.rolValorPrestamos=e.rolValorPrestamos?e.rolValorPrestamos:this.rolValorPrestamos,this.totalPagar=e.totalPagar?e.totalPagar:this.totalPagar,this.totalIngresos=e.totalIngresos?e.totalIngresos:this.totalIngresos,this.totalDescuentos=e.totalDescuentos?e.totalDescuentos:this.totalDescuentos,this.totalLiquidacion=e.totalLiquidacion?e.totalLiquidacion:this.totalLiquidacion,this.detalle=e.detalle?e.detalle:this.detalle,this.mensaje=e.mensaje?e.mensaje:this.mensaje},e}(),p=o("P7IR"),u=o("eUd/"),h=o("yccp"),m=o("wd/R"),C=o("0cNW"),v=o("i8Jn");o.d(t,"a",function(){return g});var A=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,o,a,i,n,s,c){this.activeModal=e,this.api=t,this.utilService=o,this.archivoService=a,this.toastr=i,this.rolPagosService=n,this.atajoService=s,this.periodoService=c,this.titulo=r.a.RRHH_ROL_PAGO,this.vistaPreliminar=!1,this.puedeEditar=!1,this.itemListaRolTO=new d,this.mostrarModal=!1,this.mostrarDescuentos=!0,this.mostrarBeneficios=!0,this.columnas=null,this.constantes=r.a,this.cargando=!0,this.es={},this.isFechaValido=!0,this.periodo=new v.a,this.columnDefs=[],this.components={},this.itemListaRolTO=new d,this.constantes=r.a,m.locale("es"),this.es=this.utilService.setLocaleDate()}return e.prototype.ngOnInit=function(){this.parametros&&(this.cargando=!0,this.vistaPreliminar?this.obtenerVistaPreliminar():this.obtenerRol(),this.columnas="col-lg-3",this.resetearAtajos())},e.prototype.resetearAtajos=function(){this.atajoService.add(new h.Hotkey(r.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return!1})),this.atajoService.add(new h.Hotkey(r.a.ATAJO_BUSCAR,function(){return!1})),this.atajoService.add(new h.Hotkey(r.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("bntImprimirComprobanteRol");return e&&e.click(),!1})),this.atajoService.add(new h.Hotkey(r.a.ATAJO_EXPORTAR,function(){return!1})),this.atajoService.add(new h.Hotkey(r.a.ATAJO_CANCELAR,function(){var e=document.getElementById("bntCancelarComprobanteRol");return e&&e.click(),!1}))},e.prototype.obtenerRol=function(){var e=this;this.api.post("todocompuWS/rrhhWebController/obtenerRol",this.parametros,this.empresaSeleccionada.empCodigo).then(function(t){t&&t.extraInfo?(e.itemListaRolTO=new d(t.extraInfo),e.mostrarModal=!0,e.iniciarAgGrid(),e.verificarColumansTamanio()):(e.toastr.warning(t.operacionMensaje,"Aviso"),e.mostrarModal=!1,e.activeModal.close()),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.obtenerVistaPreliminar=function(){var e=this;this.api.post("todocompuWS/rrhhWebController/obtenerVistaPreliminarRol",this.parametros,this.empresaSeleccionada.empCodigo).then(function(t){t&&t.extraInfo?(e.itemListaRolTO=new d(t.extraInfo),e.puedeEditar&&e.obtenerPeriodoPorFecha(e.itemListaRolTO.rolHastaTexto),e.itemListaRolTO.rolHastaTexto=e.utilService.formatoDateSinZonaHorariaYYYMMDD(e.itemListaRolTO.rolHastaTexto),e.hastaTextoOriginal=e.itemListaRolTO.rolHastaTexto,e.mostrarModal=!0,e.iniciarAgGrid(),e.verificarColumansTamanio()):(e.toastr.warning(t.operacionMensaje,"Aviso"),e.mostrarModal=!1,e.activeModal.close()),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.imprimirComprobante=function(){var e=this;if(this.cargando=!0,this.empresaSeleccionada.listaSisPermisoTO.gruImprimir){var t={conContablePK:this.parametros.conContablePK,listaRolSaldoEmpleadoDetalladoTO:this.itemListaRolTO.detalle};this.archivoService.postPDF(this.rutaImprimir,t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("comprobanteRol_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(r.a.MSJ_ERROR_IMPRIMIR,r.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}else this.cargando=!1},e.prototype.verificarColumansTamanio=function(){this.mostrarDescuentos=this.itemListaRolTO.rhRol.rolAnticipos>0||this.itemListaRolTO.rhRol.rolIess>0||this.itemListaRolTO.rolValorPrestamos>0||this.itemListaRolTO.rolImpuestoRenta>0||this.itemListaRolTO.rhRol.rolDescuentoPermisoMedico>0||this.itemListaRolTO.rolDescFondoReserva>0,this.mostrarBeneficios=this.itemListaRolTO.rhRol.rolLiqXiii>0||this.itemListaRolTO.rhRol.rolLiqXiv>0||this.itemListaRolTO.rhRol.rolLiqVacaciones>0||this.itemListaRolTO.rhRol.rolLiqSalarioDigno>0||this.itemListaRolTO.rhRol.rolLiqDesahucio>0||this.itemListaRolTO.rhRol.rolLiqDesahucioIntempestivo>0||this.itemListaRolTO.rhRol.rolLiqBonificacion>0,this.mostrarBeneficios||(this.columnas="col-lg-4",this.mostrarDescuentos||(this.columnas="col-lg-6"))},e.prototype.obtenerPeriodoPorFecha=function(e){this.isFechaValido=!1;var t={fecha:e,empresa:r.a.KEY_EMPRESA_SELECT};this.periodoService.getPeriodoPorFecha(t,this,r.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGetPeriodoPorFecha=function(e){this.periodo=e,this.cambioLaFecha(),this.cargando=!1},e.prototype.cambioLaFecha=function(){if(this.puedeEditar)if(this.periodo&&this.itemListaRolTO.rolHastaTexto){var e=this.itemListaRolTO.rolHastaTexto.getTime();e>=this.periodo.perDesde&&e<=this.periodo.perHasta?this.isFechaValido=!0:this.isFechaValido=!1}else this.isFechaValido=!1;else this.isFechaValido=!0},e.prototype.cerrarModal=function(){this.hastaTextoOriginal===this.itemListaRolTO.rolHastaTexto?this.activeModal.close():this.activeModal.close({isFechaValido:this.isFechaValido,rolHastaTexto:this.itemListaRolTO.rolHastaTexto})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.rolPagosService.generarColumnasConfirmacionRol(),this.rowSelection="single",this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},A([Object(a.Input)(),f("design:type",Object)],e.prototype,"empresaSeleccionada",void 0),A([Object(a.Input)(),f("design:type",Object)],e.prototype,"parametros",void 0),A([Object(a.Input)(),f("design:type",Object)],e.prototype,"accion",void 0),A([Object(a.Input)(),f("design:type",Object)],e.prototype,"rutaImprimir",void 0),A([Object(a.Input)(),f("design:type",Object)],e.prototype,"titulo",void 0),A([Object(a.Input)(),f("design:type",Boolean)],e.prototype,"vistaPreliminar",void 0),A([Object(a.Input)(),f("design:type",Boolean)],e.prototype,"puedeEditar",void 0),e=A([Object(a.Component)({selector:"app-comprobante-rol",template:o("uwAu"),styles:[o("0QfJ")]}),f("design:paramtypes",[u.a,c.a,i.a,s.a,n.b,p.a,h.HotkeysService,C.a])],e)}()},FejU:function(e,t,o){"use strict";var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("jeDP"),l=function(){function e(e){this.texto="",this.tipo="",this.icono="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.texto=e.texto?e.texto:this.texto,this.tipo=e.tipo?e.tipo:this.tipo,this.icono=e.icono?e.icono:this.icono},e}(),d=o("Ip0R"),p=o("chRk"),u=o("tc6t"),h=o("gLZI"),m=o("mozY"),C=o("madF"),v=o("OeYz");o.d(t,"a",function(){return g});var A=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,o){this.api=e,this.utilService=t,this.toastr=o}return e.prototype.listarContables=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/getListConContableTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarContables(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.despuesDeListarContables(null))}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosParaCrudContable=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/obtenerDatosParaCrudContable",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaCrudContable(e.extraInfo):a.toastr.warning(e.operacionMensaje,"Aviso")}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.desmayorizarListaConContable=function(e,t,o){var a=this;return this.api.post("todocompuWS/contabilidadWebController/desmayorizarListaConContable",e,o).then(function(e){return e.estadoOperacion?e:(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),{})}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getConContablePKDeListaConContableTO=function(e){for(var t=Array(),o=0,a=e;o<a.length;o++){var i=a[o],r=new c.a;r.conEmpresa=i.empCodigo,r.conNumero=i.conNumero,r.conPeriodo=i.perCodigo,r.conTipo=i.tipCodigo,t.push(r)}return t},e.prototype.formatearMensajesDesmayorizar=function(e,t){for(var o=new Array,a=t.listadoResultado.slice(),i=function(e){switch(e.estadoOperacion){case s.a.KEY_EXITO:(i=new l).icono=s.a.ICON_OK_SWAL,i.texto=e.operacionMensaje,i.tipo="success";var t=a.findIndex(function(t){return t.conNumero===e.extraInfo.conContablePK.conNumero});a[t].conStatus=s.a.ETIQUETA_PENDIENTE,o.push(i);break;case s.a.KEY_ADVERTENCIA:var i;(i=new l).icono=s.a.ICON_ERROR_SWAL,i.texto=e.operacionMensaje,i.tipo="danger",o.push(i)}},r=0,n=e;r<n.length;r++){i(n[r])}return t.listaResultado=a,o},e.prototype.generarColumnasContableListado=function(e){var t=[];return t.push({headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:35,minWidth:30},{headerName:s.a.TAG_ESTADO,headerClass:"text-sm-center",field:"conStatus",width:65,minWidth:65,cellClass:"text-center",cellRenderer:"iconoEstado"}),e.periodoSeleccionado||t.push({headerName:s.a.TAG_PERIODO,field:"perCodigo",width:65,minWidth:65}),e.tipoSeleccionado||t.push({headerName:s.a.TAG_TIPO,field:"tipCodigo",width:65,minWidth:65}),t.push({headerName:s.a.TAG_NUMERO,field:"conNumero",width:65,minWidth:65},{headerName:s.a.TAG_FECHA,field:"conFecha",width:65,minWidth:65,valueFormatter:this.formatearFecha},{headerName:s.a.TAG_CONCEPTO,field:"conConcepto",width:200,minWidth:200},{headerName:s.a.TAG_DETALLE,field:"conDetalle",width:200,minWidth:200},{headerName:s.a.TAG_OBSERVACIONES,field:"conObservaciones",width:220,minWidth:200},this.utilService.getColumnaOpciones()),t},e.prototype.formatearFecha=function(e){return new d.DatePipe("en-US").transform(e.value,"yyyy-MM-dd")},e.prototype.generarColumnas=function(e){var t=this,o=e.data.accion===s.a.ACCION_NUEVO||e.data.accion===s.a.ACCION_MAYORIZAR,a=[];return o&&a.push({headerName:s.a.TAG_MOVER_FILA,headerClass:"cell-header-center",cellClass:"text-center",width:40,minWidth:40,cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.data.accion!==s.a.ACCION_CONSULTAR&&!t.data.detGenerado}},rowDrag:o,pinnedRowCellRenderer:u.a,headerComponentFramework:h.a,headerComponentParams:{class:s.a.ICON_MOVER_FILA,tooltip:s.a.TAG_MOVER_FILA,text:"",enableSorting:!1}}),a.push({headerName:s.a.TAG_CUENTA,field:"ctaCodigo",width:100,minWidth:100,cellClassRules:{"cell-with-errors":function(e){return!(!e.data.conCuentaVacia||e.node.rowPinned)},"cell-block":function(t){return!t.node.rowPinned&&e.data.accion!==s.a.ACCION_CONSULTAR&&!t.data.detGenerado}},editable:function(t){return!(t.node.rowPinned||e.data.accion===s.a.ACCION_CONSULTAR||t.data.detGenerado||!o)},suppressKeyboardEvent:function(o){if(o.event.keyCode!==s.a.KEYCODE_UP&&o.event.keyCode!==s.a.KEYCODE_DOWN){if(!o.node.rowPinned&&e.buscarConCuentas(o),o.editing)return!0}else if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaFiltrado)},cellEditorFramework:v.a,cellEditorParams:{name:"ctaCodigo",maxlength:50,inputClass:"text-uppercase",placeholder:""}},{headerName:s.a.TAG_NOMBRE,field:"ctaDetalle",width:150,minWidth:150,cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.data.accion!==s.a.ACCION_CONSULTAR&&!t.data.detGenerado}},pinnedRowCellRendererFramework:u.a,pinnedRowCellRendererParams:{value:"Diferencia: ",style:{"font-weight":"bold"}}},{headerName:s.a.TAG_CP,field:"sectorSeleccionado",width:100,minWidth:100,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:s.a.TAG_CENTRO_PRODUCCION,text:s.a.TAG_CP},cellEditorFramework:p.a,cellEditorParams:function(t){return{value:t.data.sectorSeleccionado,name:"sectorSeleccionado",obligatorio:!0,ejecutarMetodoChange:!0,listValues:e.listaSectores,fieldsShow:["secNombre","secCodigo"]}},editable:function(t){return!(t.node.rowPinned||e.data.accion===s.a.ACCION_CONSULTAR||t.data.detGenerado||!o)},valueGetter:function(t){return t.node.rowPinned?e.totalesDiferencia:t.data.sectorSeleccionado.secCodigo},valueFormatter:function(e){return e.node.rowPinned?new d.DecimalPipe("en-US").transform(e.value,"1.2-2"):e.data.sectorSeleccionado.secCodigo},cellClassRules:{"text-sm-right":function(e){return!!e.node.rowPinned},"cell-block":function(t){return!t.node.rowPinned&&e.data.accion!==s.a.ACCION_CONSULTAR&&!t.data.detGenerado}}},{headerName:s.a.TAG_CC,field:"piscinaSeleccionada",width:100,minWidth:100,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:s.a.TAG_CENTRO_COSTO,text:s.a.TAG_CC},cellEditorFramework:p.a,cellEditorParams:function(e){return{value:e.data.piscinaSeleccionada?e.data.piscinaSeleccionada:[],name:"piscinaSeleccionada",obligatorio:!1,ejecutarMetodoChange:!1,listValues:e.data&&e.data.listapiscinaSeleccionada?e.data.listapiscinaSeleccionada:[],fieldsShow:["pisNombre","pisNumero"]}},editable:function(t){return!(t.node.rowPinned||e.data.accion===s.a.ACCION_CONSULTAR||t.data.detGenerado||!o)},valueFormatter:function(e){return e.data.piscinaSeleccionada&&e.data.piscinaSeleccionada.pisNumero?e.data.piscinaSeleccionada.pisNumero:""},cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.data.accion!==s.a.ACCION_CONSULTAR&&!t.data.detGenerado}}},{headerName:s.a.TAG_DOCUMENTO,field:"detDocumento",width:180,minWidth:180,cellClassRules:{"cell-with-errors":function(e){return!(!e.data.conChequeImprimir&&!e.data.conChequeRepetido||e.node.rowPinned)},"cell-block":function(t){return!t.node.rowPinned&&e.data.accion!==s.a.ACCION_CONSULTAR&&!t.data.detGenerado}},cellEditorFramework:v.a,cellEditorParams:{name:"detDocumento",maxlength:100,inputClass:"text-uppercase",placeholder:""},editable:function(t){return!(t.node.rowPinned||e.data.accion===s.a.ACCION_CONSULTAR||t.data.detGenerado||!o)},suppressKeyboardEvent:function(o){if(o.event.keyCode!==s.a.KEYCODE_UP&&o.event.keyCode!==s.a.KEYCODE_DOWN){if(!o.node.rowPinned&&e.validarFilaCompleta(o),o.editing)return t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}else if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaFiltrado)},pinnedRowCellRendererFramework:u.a,pinnedRowCellRendererParams:{value:"Total: ",style:{"font-weight":"bold"}}},{headerName:s.a.TAG_DEBITOS,field:"detDebitos",width:120,minWidth:120,cellClass:"text-right",cellClassRules:{"cell-with-errors":function(e){return!e.data.conEstadoDebitoCreditoValido&&!e.node.rowPinned},"cell-block":function(t){return!t.node.rowPinned&&e.data.accion!==s.a.ACCION_CONSULTAR&&!t.data.detGenerado}},valueFormatter:this.formatearA2Decimales,valueGetter:function(t){return t.node.rowPinned?e.totalesDebitos?e.totalesDebitos:0:t.data.detDebitos},cellEditorFramework:m.a,cellEditorParams:{name:"detDebitos",maxlength:25,placeholder:"0.00",configAutonumeric:e.configuracionAutoNumeric},editable:function(t){return!(t.node.rowPinned||e.data.accion===s.a.ACCION_CONSULTAR||t.data.detGenerado||!o)},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaFiltrado)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}},{headerName:s.a.TAG_CREDITOS,field:"detCreditos",width:120,minWidth:120,cellClass:"text-right",cellClassRules:{"cell-with-errors":function(e){return!e.data.conEstadoDebitoCreditoValido&&!e.node.rowPinned},"cell-block":function(t){return!t.node.rowPinned&&e.data.accion!==s.a.ACCION_CONSULTAR&&!t.data.detGenerado}},valueFormatter:this.formatearA2Decimales,valueGetter:function(t){return t.node.rowPinned?e.totalesCreditos?e.totalesCreditos:0:t.data.detCreditos},cellEditorFramework:m.a,cellEditorParams:{name:"detCreditos",maxlength:25,placeholder:"0.00",configAutonumeric:e.configuracionAutoNumeric},editable:function(t){return!(t.node.rowPinned||e.data.accion===s.a.ACCION_CONSULTAR||t.data.detGenerado||!o)},suppressKeyboardEvent:function(o){if(!o.node.rowPinned){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaFiltrado)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode);e.validarFilaCompleta(o)}}}),o&&a.push({headerName:s.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:"text-center",width:s.a.WIDTH_OPCIONES,minWidth:s.a.WIDTH_OPCIONES,cellRendererFramework:C.a,headerComponentFramework:h.a,cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.data.accion!==s.a.ACCION_CONSULTAR&&!t.data.detGenerado}},headerComponentParams:{class:s.a.ICON_OPCIONES,tooltip:s.a.TAG_OPCIONES,text:"",enableSorting:!1},pinnedRowCellRenderer:u.a}),a},e.prototype.formatearA2Decimales=function(e){return new d.DecimalPipe("en-US").transform(e.value,"1.2-2")},e.prototype.verificarChequeImprimir=function(e,t){var o=this,a={ConListaContableDetalleTO:e,empresa:s.a.KEY_EMPRESA_SELECT};this.api.post("todocompuWS/contabilidadWebController/validarChequeContable",a,s.a.KEY_EMPRESA_SELECT).then(function(o){t.despuesDeVerificarChequeImprimir(o.extraInfo,e)}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.verificarDocumentoBanco=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/verificarDocumentoBanco",e,o).then(function(o){o&&o.extraInfo?t.despuesDeVerificarDocumento(o.extraInfo,e.data):(t.despuesDeVerificarDocumento(!1,e.data),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.verificarPermisoFORMULARIO=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_NUEVO:a=t.data.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_IMPRIMIR:a=t.data.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.data.empresaSeleccionada.listaSisPermisoTO.gruExportar;break;case s.a.ACCION_MAYORIZAR:a=t.data.empresaSeleccionada.listaSisPermisoTO.gruMayorizarContables;break;case s.a.ACCION_DESMAYORIZAR:a=t.data.empresaSeleccionada.listaSisPermisoTO.gruDesmayorizarContables;break;case s.a.ACCION_RESTAURAR:case s.a.ACCION_REVERSAR:case s.a.ACCION_DESBLOQUEAR:case s.a.ACCION_ANULAR:a=t.data.empresaSeleccionada.listaSisPermisoTO.gruAnularContables;break;case s.a.ACCION_ELIMINAR:a=t.data.empresaSeleccionada.listaSisPermisoTO.gruEliminarContablesTalentoHumano}return o&&!a&&(this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.ERROR_403_TITULO),t.cargando=!1),a},e.prototype.eliminarConContable=function(e,t){var o=this;this.api.post("todocompuWS/contabilidadWebController/eliminarConContable",t,s.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===s.a.KEY_EXITO?e.despuesDeEliminarConContable(t):(o.utilService.generarSwal(s.a.TOAST_ERROR,s.a.SWAL_ERROR,t.operacionMensaje),e.cargando=!1)}).catch(function(t){return o.utilService.handleError(t,e)})},e.prototype.mayorizarContable=function(e,t){var o=this;this.api.post("todocompuWS/contabilidadWebController/modificarContable",t,s.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===s.a.KEY_EXITO?e.despuesDeMayorizarContable(t):(o.toastr.warning(t.operacionMensaje,"Aviso"),e.cargandoEstado.emit(!1))}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.desmayorizarContable=function(e,t){var o=this;this.api.post("todocompuWS/contabilidadWebController/desmayorizarConContable",t,s.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===s.a.KEY_EXITO?e.despuesDeDesmayorizarContable(t):(o.toastr.warning(t.operacionMensaje,"Aviso"),e.cerrarDefinitivo(null))}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.restaurarContable=function(e,t){var o=this;this.api.post("todocompuWS/contabilidadWebController/restaurarConContable",t,s.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===s.a.KEY_EXITO?e.despuesDeRestaurarContable(t):(o.toastr.warning(t.operacionMensaje,"Aviso"),e.cerrarDefinitivo(null))}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.desbloquerContable=function(e,t){var o=this;this.api.post("todocompuWS/contabilidadWebController/desbloquearConContable",t,s.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===s.a.KEY_EXITO?e.despuesDeDesbloquerContable(t):(o.toastr.warning(t.operacionMensaje,"Aviso"),e.cerrarDefinitivo(null))}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.anularReversarContable=function(e,t){var o=this,a={title:s.a.MSJ_TITULO_ELIMINAR,texto:t.anularReversar?s.a.MSJ_PREGUNTA_ANULAR_CONTABLE:s.a.MSJ_PREGUNTA_REVERSAR_CONTABLE,type:s.a.SWAL_WARNING,confirmButtonText:t.anularReversar?s.a.MSJ_SI_ANULAR:s.a.MSJ_SI_REVERSAR,cancelButtonText:s.a.MSJ_NO_CANCELAR,confirmButtonColor:s.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(a).then(function(a){a?o.api.post("todocompuWS/contabilidadWebController/anularReversarConContable",t,s.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===s.a.KEY_EXITO?e.despuesDeAnularReversarContable(t):(o.toastr.warning(t.operacionMensaje,"Aviso"),e.cerrarDefinitivo(null))}).catch(function(e){return o.utilService.handleError(e,o)}):e.cerrarDefinitivo(null)})},e.prototype.insertarContable=function(e,t){var o=this;this.api.post("todocompuWS/contabilidadWebController/insertarContable",t,s.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===s.a.KEY_EXITO?e.despuesDeInsertarContable(t):(o.toastr.warning(t.operacionMensaje,"Aviso"),e.cargandoEstado.emit(!1))}).catch(function(e){return o.utilService.handleError(e,o)})},e=A([Object(a.Injectable)({providedIn:"root"}),f("design:paramtypes",[i.a,n.a,r.b])],e)}()},Fi7T:function(e,t){e.exports='<ng-container [ngSwitch]="vista">\r\n  <ng-container *ngSwitchCase="\'UTILIDAD\'">\r\n    <app-participacion-utilidades-formulario [empresaSeleccionada]="empresaSeleccionada" [esContable]="esContable" [conContable]="conContable"\r\n      [data]="data" [listadoUtilidades]="listadoUtilidades" [tipoSeleccionado]="tipoSeleccionado" [formasDePago]="formasDePagoBS"\r\n      [titulo]="tituloForm" (enviarAccion)="ejecutarAccion($event)"></app-participacion-utilidades-formulario>\r\n  </ng-container>\r\n  <ng-container *ngSwitchCase="\'ANTICIPO\'">\r\n    <app-anticipos-formulario [empresaSeleccionada]="empresaSeleccionada" [esContable]="esContable" [conContable]="conContable"\r\n      [data]="data" [listadoAnticipos]="listadoAnticipos" [tipoSeleccionado]="tipoSeleccionado" [formasDePago]="formasDePago"\r\n      [titulo]="tituloForm" (enviarAccion)="ejecutarAccion($event)"></app-anticipos-formulario>\r\n  </ng-container>\r\n  <ng-container *ngSwitchCase="\'BONO\'">\r\n    <app-bonos-formulario [empresaSeleccionada]="empresaSeleccionada" [esContable]="esContable" [conContable]="conContable" [data]="data"\r\n      [listaResultadoBonos]="listaResultadoBonos" [tipoSeleccionado]="tipoSeleccionado" [listadoConceptos]="listadoConceptos"\r\n      [listadoPiscinas]="listadoPiscinas" [titulo]="tituloForm" (enviarAccion)="ejecutarAccion($event)"></app-bonos-formulario>\r\n  </ng-container>\r\n  <ng-container *ngSwitchCase="\'XIV\'">\r\n    <app-xiv-sueldo-formulario [empresaSeleccionada]="empresaSeleccionada" [esContable]="esContable" [conContable]="conContable"\r\n      [data]="data" [xivSalarioMinimoVital]="salarioMinimo" [listaResultadoXivSueldo]="listaResultadoXivSueldo" [tipoSeleccionado]="tipoSeleccionado"\r\n      [listaFormasPagoBeneficio]="formasDePagoBS" [titulo]="tituloForm" (enviarAccion)="ejecutarAccion($event)"></app-xiv-sueldo-formulario>\r\n  </ng-container>\r\n  <ng-container *ngSwitchCase="\'XIII\'">\r\n    <app-xiii-sueldo-formulario [empresaSeleccionada]="empresaSeleccionada" [esContable]="esContable" [conContable]="conContable"\r\n      [data]="data" [listaResultadoXiiiSueldo]="listaResultadoXiiiSueldo" [tipoSeleccionado]="tipoSeleccionado" [listaFormasPagoBeneficio]="formasDePagoBS"\r\n      [titulo]="tituloForm" (enviarAccion)="ejecutarAccion($event)"></app-xiii-sueldo-formulario>\r\n  </ng-container>\r\n  <ng-container *ngSwitchCase="\'LIQUIDACION\'">\r\n    <app-liquidacion [empresaSeleccionada]="empresaSeleccionada" [esContable]="esContable" [conContable]="conContable" [data]="data"\r\n      [rhRol]="rhRol" [tipoSeleccionado]="tipoSeleccionado" [listaFormaPago]="formasDePago" [listaEmpresas]="listaEmpresas"\r\n      [titulo]="tituloForm" (enviarAccion)="ejecutarAccion($event)"></app-liquidacion>\r\n  </ng-container>\r\n  <ng-container *ngSwitchCase="\'PRESTAMO\'">\r\n    <app-prestamo-formulario [empresaSeleccionada]="empresaSeleccionada" [esContable]="esContable" [conContable]="conContable" [data]="data"\r\n      [rhPrestamo]="rhPrestamo" [tipoSeleccionado]="tipoSeleccionado" [listaFormaPago]="formasDePago" [listaPrestamoMotivo]="listaPrestamoMotivo"\r\n      [titulo]="tituloForm" (enviarAccion)="ejecutarAccion($event)"></app-prestamo-formulario>\r\n  </ng-container>\r\n  <ng-container *ngSwitchCase="\'ROL\'">\r\n    <app-rol-pago-formulario [empresaSeleccionada]="empresaSeleccionada" [esContable]="esContable" [conContable]="conContable" [data]="data"\r\n      [listadoEmpleadosLote]="listadoEmpleadosLote" [tipoSeleccionado]="tipoSeleccionado" [formasDePago]="formasDePago"\r\n      [titulo]="tituloForm" (enviarAccion)="ejecutarAccion($event)"></app-rol-pago-formulario>\r\n  </ng-container>\r\n</ng-container>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},FkBQ:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.vendEmpresa="",this.vendCodigo="",this.vendNombre="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.vendEmpresa=e.vendEmpresa?e.vendEmpresa:this.vendEmpresa,this.vendCodigo=e.vendCodigo?e.vendCodigo:this.vendCodigo,this.vendNombre=e.vendNombre?e.vendNombre:this.vendNombre},e}()},FmtH:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.consEmpresa=null,this.consPeriodo=null,this.consMotivo=null,this.consNumero=null,this.consReferencia=null,this.consFecha=null,this.consObservaciones=null,this.consPendiente=!1,this.consRevisado=!1,this.consAnulado=!1,this.usrCodigo=null,this.usrFechaInserta=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.consEmpresa=e.consEmpresa?e.consEmpresa:this.consEmpresa,this.consPeriodo=e.consPeriodo?e.consPeriodo:this.consPeriodo,this.consMotivo=e.consMotivo?e.consMotivo:this.consMotivo,this.consNumero=e.consNumero?e.consNumero:this.consNumero,this.consReferencia=e.consReferencia?e.consReferencia:this.consReferencia,this.consFecha=e.consFecha?e.consFecha:this.consFecha,this.consObservaciones=e.consObservaciones?e.consObservaciones:this.consObservaciones,this.consPendiente=e.consPendiente?e.consPendiente:this.consPendiente,this.consRevisado=e.consRevisado?e.consRevisado:this.consRevisado,this.consAnulado=e.consAnulado?e.consAnulado:this.consAnulado,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},"G/9+":function(e,t,o){"use strict";o.d(t,"a",function(){return m});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("EF/R"),c=o("mwBN"),l=o("Ip0R"),d=o("madF"),p=o("gLZI"),u=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.authService=a}return e.prototype.getListaInvKardexTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvKardexTO",e,o).then(function(e){e&&e.estadoOperacion===c.a.KEY_EXITO&&e.extraInfo?(e.extraInfo=e.extraInfo.length>0&&null===e.extraInfo[0].kFecha?e.extraInfo.slice(1,e.extraInfo.length):e.extraInfo,t.despuesDeGetListaInvKardexTO(e.extraInfo)):(t.despuesDeGetListaInvKardexTO([]),a.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosParaKardex=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerDatosParaKardex",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaKardex(e.extraInfo):(t.despuesDeObtenerDatosParaKardex(null),a.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.cambiarFechaRecepcion=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvComprasRecepcionTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeCambiarFechaRecepcion(e.extraInfo):(t.despuesDeCambiarFechaRecepcion(null),a.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarCambioFechaRecepcion=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/insertarModificarComprasRecepcionTO",e,o).then(function(e){e&&e.estadoOperacion===c.a.KEY_EXITO?t.despuesDeInsertarCambioFechaRecepcion(e):(a.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnasKardex=function(e,t,o){var a="kardexValorizado"===e,i=new Array;return i.push({headerName:c.a.TAG_ESTADO,headerClass:"text-sm-center",field:"kStatus",width:120,minWidth:120,cellClass:"text-sm-center",cellRenderer:"iconoEstado"}),t.parametrosBusqueda&&!t.parametrosBusqueda.bodega&&i.push({headerName:c.a.TAG_BODEGA,field:"kBodega",width:150,minWidth:150}),i.push({headerName:c.a.TAG_TRANSACCION,field:"kTransaccion",width:150,minWidth:150},{headerName:c.a.TAG_FECHA,field:"kFecha",width:120,minWidth:120}),a?i.push({headerName:c.a.TAG_E_CANTIDAD,headerClass:"text-sm-right",field:"kEntradasCantidad",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_ENTRADA_CANTIDAD,text:c.a.TAG_E_CANTIDAD}},{headerName:c.a.TAG_E_COSTO,headerClass:"text-sm-right",field:"kEntradasCosto",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_ENTRADA_COSTO,text:c.a.TAG_E_COSTO}},{headerName:c.a.TAG_S_CANTIDAD,headerClass:"text-sm-right",field:"kSalidasCantidad",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_SALIDA_CANTIDAD,text:c.a.TAG_S_CANTIDAD}},{headerName:c.a.TAG_S_COSTO,headerClass:"text-sm-right",field:"kSalidasCosto",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_SALIDA_COSTO,text:c.a.TAG_S_COSTO}},{headerName:c.a.TAG_SAL_CANTIDAD,headerClass:"text-sm-right",field:"kSaldosCantidad",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_SALDO_CANTIDAD,text:c.a.TAG_SAL_CANTIDAD}},{headerName:c.a.TAG_SAL_COSTO,headerClass:"text-sm-right",field:"kSaldosCosto",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_SALDO_COSTO,text:c.a.TAG_SAL_COSTO}},{headerName:c.a.TAG_C_ACTUAL,headerClass:"text-sm-right",field:"kCostoActual",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_COSTO_ACTUAL,text:c.a.TAG_C_ACTUAL}}):i.push({headerName:c.a.TAG_ENTRADAS,headerClass:"text-sm-right",field:"kEntradasCantidad",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C},{headerName:c.a.TAG_SALIDAS,headerClass:"text-sm-right",field:"kSalidasCantidad",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C},{headerName:c.a.TAG_SALDOS,headerClass:"text-sm-right",field:"kSaldosCantidad",width:120,minWidth:120,cellClass:"text-sm-right",valueFormatter:C}),i.push({headerName:c.a.TAG_CP_CC,field:"kSectorPiscina",width:100,minWidth:100,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_CENTRO_PRODUCCION_CENTRO_COSTO,text:c.a.TAG_CP_CC}},{headerName:c.a.TAG_NUMERO_SISTEMA,field:"kNumeroSistema",width:200,minWidth:190},{headerName:c.a.TAG_OBSERVACIONES,field:"kObservaciones",width:300,minWidth:290}),a||o||i.push({headerName:c.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:function(e){return e.data.kFecha?"text-center":"d-none"},width:c.a.WIDTH_OPCIONES,minWidth:c.a.WIDTH_OPCIONES,cellRendererFramework:d.a,headerComponentFramework:p.a,headerComponentParams:{class:c.a.ICON_OPCIONES,tooltip:c.a.TAG_OPCIONES,text:"",enableSorting:!1}}),i},e=u([Object(a.Injectable)({providedIn:"root"}),h("design:paramtypes",[i.a,r.b,n.a,s.a])],e)}();function C(e){return new l.DecimalPipe("en-US").transform(e.value,"1.2-2")}},G059:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvProveedorCategoria=function(e,t,o){var a=this;t.filasTiempo&&t.filasTiempo.iniciarContador(),this.api.post("todocompuWS/inventarioWebController/getInvProveedorCategoriaTO",e,o).then(function(e){t.filasTiempo&&t.filasTiempo.finalizarContador(),e&&e.extraInfo?t.despuesDeListarInvProveedorCategoriaTO(e.extraInfo):(t.despuesDeListarInvProveedorCategoriaTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_CODIGO,field:"pcCodigo",width:80,minWidth:80},{headerName:s.a.TAG_DETALLE,field:"pcDetalle",width:300,minWidth:300},{headerName:s.a.TAG_APLICA_RETENCION_IVA,headerClass:"text-md-center",field:"pcAplicaRetencionIva",width:120,minWidth:120,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[i.a,r.b,n.a])],e)}()},GAfr:function(e,t,o){"use strict";o.d(t,"a",function(){return s});var a=o("fkj5"),i=o("VCY8"),r=o("C2aO"),n=o("pZ6e"),s=function(){function e(e){this.invPedidosOrdenCompraPK=new i.a,this.ocCodigoTransaccional="",this.ocFechaEmision=null,this.ocFormaPago="",this.ocObservacionesRegistra="",this.ocAnulado=!1,this.ocMontoTotal=0,this.usrCodigo="",this.usrAprueba="",this.ocLugarEntrega="",this.ocContactoNombre="",this.ocContactoTelefono="",this.usrFechaInserta=null,this.ocFechaHoraEntrega=null,this.invProveedor=new r.a,this.invPedidosOrdenCompraMotivo=new a.a,this.invPedidosOrdenCompraDetalleList=new Array,this.ocValorRetencion=1,this.ocAprobada=!1,this.invCliente=new n.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invPedidosOrdenCompraPK=e.invPedidosOrdenCompraPK?e.invPedidosOrdenCompraPK:this.invPedidosOrdenCompraPK,this.ocCodigoTransaccional=e.ocCodigoTransaccional?e.ocCodigoTransaccional:this.ocCodigoTransaccional,this.ocFechaEmision=e.ocFechaEmision?e.ocFechaEmision:this.ocFechaEmision,this.ocFormaPago=e.ocFormaPago?e.ocFormaPago:this.ocFormaPago,this.ocObservacionesRegistra=e.ocObservacionesRegistra?e.ocObservacionesRegistra:this.ocObservacionesRegistra,this.ocAnulado=e.ocAnulado?e.ocAnulado:this.ocAnulado,this.ocMontoTotal=e.ocMontoTotal?e.ocMontoTotal:this.ocMontoTotal,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrAprueba=e.usrAprueba?e.usrAprueba:this.usrAprueba,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invProveedor=e.invProveedor?e.invProveedor:this.invProveedor,this.invPedidosOrdenCompraMotivo=e.invPedidosOrdenCompraMotivo?e.invPedidosOrdenCompraMotivo:this.invPedidosOrdenCompraMotivo,this.invPedidosOrdenCompraDetalleList=e.invPedidosOrdenCompraDetalleList?e.invPedidosOrdenCompraDetalleList:this.invPedidosOrdenCompraDetalleList,this.ocValorRetencion=e.ocValorRetencion?e.ocValorRetencion:this.ocValorRetencion,this.ocAprobada=e.ocAprobada?e.ocAprobada:this.ocAprobada,this.ocLugarEntrega=e.ocLugarEntrega?e.ocLugarEntrega:this.ocLugarEntrega,this.ocContactoNombre=e.ocContactoNombre?e.ocContactoNombre:this.ocContactoNombre,this.ocContactoTelefono=e.ocContactoTelefono?e.ocContactoTelefono:this.ocContactoTelefono,this.ocFechaHoraEntrega=e.ocFechaHoraEntrega?e.ocFechaHoraEntrega:this.ocFechaHoraEntrega,this.invCliente=e.invCliente?e.invCliente:this.invCliente},e}()},GGLN:function(e,t,o){"use strict";o.d(t,"a",function(){return l});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.getListaSisUsuario=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/getListaSisUsuario",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarUsuario(e.extraInfo):(t.cargando=!1,a.toastr.warning(e.operacionMensaje,"Aviso"))}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.listarSisUsuario=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/getListaSisUsuario",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarSisUsuario(e.extraInfo):(t.despuesDeListarSisUsuario([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getIsPeriodoAbierto=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/getIsPeriodoAbierto",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerIsPeriodoAbierto(e.extraInfo):(t.despuesDeObtenerIsPeriodoAbierto(!1),a.toastr.warning(e.operacionMensaje,"Aviso")),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e=s([Object(a.Injectable)({providedIn:"root"}),c("design:paramtypes",[i.a,r.b,n.a])],e)}()},GiCt:function(e,t){e.exports='<div class="card m-0" *ngIf="listaResultadoXiiiSueldo?.length>0 ">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarXiiiSueldo" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="cambiarActivar()"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activarXiiiSueldo?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{constantes.RRHH_XIII_SUELDO_LISTADO}}</strong>\r\n\r\n    <div class="card-header-actions" *ngIf="!esContable">\r\n      <div class="btn-group d-lg-none">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarXiiiSueldo" (click)="exportarXiiiSueldo()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarXiiiSueldo" (click)="guardarXiiiSueldo()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarXiiiSueldo" title="{{constantes.ATAJO_CANCELAR}}"\r\n          (click)="cancelar()" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarXiiiSueldo" (click)="exportarXiiiSueldo()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarXiiiSueldo" (click)="guardarXiiiSueldo()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_MAYORIZAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarXiiiSueldo" title="{{constantes.ATAJO_CANCELAR}}"\r\n          (click)="cancelar()" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="card-header-actions" *ngIf="esContable">\r\n      <app-botones-accion [conContable]="conContableCopia" [data]="data" (enviarAccion)="accionesBotones($event)"></app-botones-accion>\r\n    </div>\r\n\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="p-1" *ngIf="esContable">\r\n      <app-contable-cabecera [data]="data" [conContable]="conContableCopia" [tipoSeleccionado]="tipoSeleccionado"\r\n        [empresaSeleccionada]="empresaSeleccionada" (accionFechaValido)="fechaContableValido = $event"></app-contable-cabecera>\r\n    </div>\r\n    <div class="row" *ngIf="!esContable">\r\n\r\n      <div class="col-sm-4 col-md-4 pr-0">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="col-sm-6 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="observacionAdicional" class="form-control form-control-sm input-filter mousetrap text-uppercase"\r\n            style="font-family: Arial, FontAwesome;" placeholder="&#xf007; {{constantes.TAG_OBSERVACION_GENERAL}}..."\r\n            size="100" appUppercase>\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_EDITAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="col-sm-2 col-md-2 pl-0">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n    <div class="p-1">\r\n      <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listaResultadoXiiiSueldo"\r\n        [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n        [enableColResize]="true" [components]="components" [context]="context" (gridReady)="onGridReady($event)"\r\n        (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)" [frameworkComponents]="frameworkComponents"\r\n        (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimensionarColumnas()" (gridSizeChanged)="redimensionarColumnas()"\r\n        [stopEditingWhenGridLosesFocus]="true" [singleClickEdit]="true" [pinnedBottomRowData]="pinnedBottomRowData" [suppressDragLeaveHidesColumns]="true"\r\n        (cellEditingStopped)="alCambiarValorDeCelda($event)" (contextmenu)="data && data.accion === constantes.ACCION_MAYORIZAR?$event.preventDefault():null"\r\n        (cellContextMenu)="data && data.accion === constantes.ACCION_MAYORIZAR?mostrarContextMenu($event.data, $event.event):null">\r\n      </ag-grid-angular>\r\n      <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n    </div>\r\n\r\n  </div>\r\n</div>'},Gq5e:function(e,t){e.exports='<div class="modal-primary" *ngIf="parametrosBusqueda">\r\n  <div class="card m-0" *ngIf="listadoProductos?.length>0">\r\n    <div class="modal-header p-2" *ngIf="isModal">\r\n      <h4 class="modal-title">{{constantes.INVENTARIO_PRODUCTO_LISTADO}}</h4>\r\n      <button type="button" class="close" style="color: white;" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n        <span aria-hidden="true">&times;</span>\r\n      </button>\r\n    </div>\r\n\r\n    <div class="card-header p-1" *ngIf="!isModal">\r\n      <button id="btnActivarListado" class="btn btn-sm btn-primary mr-1" *ngIf="isScreamMd" (click)="cambiarActivar()"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b> {{constantes.INVENTARIO_PRODUCTO_LISTADO}}</b>\r\n      <div class="card-header-actions" *ngIf="activarAtajos">\r\n        <div class="btn-group d-lg-none">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirProductos" (click)="imprimirProductos()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarProductos" (click)="exportarProductos()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n        </div>\r\n        <div class="btn-group d-none d-lg-block">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirProductos" (click)="imprimirProductos()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarProductos" (click)="exportarProductos()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="card-body" style="padding: 0 0 0 0">\r\n      <div class="row">\r\n        <div class="col-sm-5 col-md-6">\r\n          <div class="input-group p-1">\r\n            <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n              size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n              size="100">\r\n            <div class="input-group-append">\r\n              <span class="input-group-text">\r\n                <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-sm-7 col-md-6">\r\n          <div class="float-right pr-1">\r\n            <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n              maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n        [rowData]="listadoProductos" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n        [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n        [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n        (rowSelected)="vistaListadoProducto? objetoSeleccionadoListadoProductos = $event.node.data :objectSelect = $event.node.data"\r\n        (cellContextMenu)="!this.isModal?mostrarContextMenu($event.data, $event.event):null" (contextmenu)="!this.isModal?$event.preventDefault():null"\r\n        (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)"\r\n        (cellDoubleClicked)="this.isModal?filaSeleccionar():consultarProducto()">\r\n      </ag-grid-angular>\r\n    </div>\r\n  </div>\r\n</div>\r\n<p-contextMenu #menuOpciones [model]="opciones" appendTo="body" [baseZIndex]="1100"></p-contextMenu>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n'},HfXy:function(e,t){e.exports='<div class="card m-0" [hidden]="parametrosCompra || objetoContableEnviar">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{titulo}} - {{empresaSeleccionada.empNombre}}</strong>\r\n    <div class="card-header-actions">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirContable" *ngIf="accion == constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}" (click)="imprimirListaPagosIndividual()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <button *ngIf="accion === constantes.ACCION_CREAR" type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar"\r\n          (click)="guardar(frmDatos)" placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> </span>\r\n        </button>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anular()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Reversar--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_REVERSAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_REVERSAR}}" (click)="reversar()">\r\n          <i class="{{constantes.ICON_REVERSAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n          ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n          (click)="cancelar()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirContable" *ngIf="accion == constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}" (click)="imprimirListaPagosIndividual()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_IMPRIMIR}}</span>\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <button *ngIf="accion === constantes.ACCION_CREAR" type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar"\r\n          (click)="guardar(frmDatos)" placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anular()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n        </button>\r\n        \x3c!--Reversar--\x3e\r\n        <button id="btnGuardar" *ngIf="accion === constantes.ACCION_REVERSAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_REVERSAR}}" (click)="reversar()">\r\n          <i class="{{constantes.ICON_REVERSAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_REVERSAR}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n          (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <form #frmDatos=\'ngForm\' name="frmDatos" autocomplete="off" class="card-body p-1">\r\n    <fieldset [disabled]="accion !== constantes.ACCION_CREAR">\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_PROVEEDOR}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseProveedorInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseProveedorInfo">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_PROVEEDOR}}</b>\r\n              </label>\r\n              <input type="text" id="proveedor" name="proveedor" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [(ngModel)]="pago.provCodigo" class="form-control form-control-sm text-uppercase mousetrap" (keydown)="buscarProveedor($event)"\r\n                (blur)="validarProveedor()" [appFocus]="accion === constantes.ACCION_CREAR" required appUppercase>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback mr-3"\r\n                placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_EMPLEADO}}" triggers="mouseenter:mouseleave"\r\n                container="body"></span>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-8">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_NOMBRE}}</b>\r\n              </label>\r\n              <input type="text" name="nombreProveedor" [(ngModel)]="pago.conApellidosNombres" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_RUC_ID}}</b>\r\n              </label>\r\n              <input type="text" name="ruc" [(ngModel)]="ruc" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-8">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DIRECCION}}</b>\r\n              </label>\r\n              <input type="text" name="direccion" [(ngModel)]="direccion" class="form-control form-control-sm text-uppercase mousetrap"\r\n                disabled appUppercase>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseDatos"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseDatos">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FECHA}}</b>\r\n              </label>\r\n              <p-calendar class="mousetrap calendar" inputId="fecha" name="fecha" [inputStyleClass]="isFechaValido == false ? \'has-error \' : \'\' "\r\n                [(ngModel)]="fechaActual" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                [required]="true" (ngModelChange)="validarFechaPorPeriodo()" placeholder="DD/MM/YYYY"></p-calendar>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-8">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_OBSERVACION}}</b>\r\n              </label>\r\n              <textarea type="text" name="observaciones" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="observaciones"\r\n                appUppercase class="form-control form-control-sm text-uppercase mousetrap"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n    <div class="card mb-1" *ngIf="codigoProveedor && seEncontraronResultados">\r\n      <div class="card-header">\r\n        <b> {{constantes.TAG_DETALLE_DOCUMENTOS_POR_PAGAR}}</b>\r\n        <div class="card-header-actions">\r\n          <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseDG"\r\n            aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n            <i class="fa fa-minus"></i>\r\n          </a>\r\n        </div>\r\n      </div>\r\n      <div class="collapse show" id="collapseDG">\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%;" [gridAutoHeight]="true" class="ag-theme-balham"\r\n          [rowData]="listadoPagos" [columnDefs]="columnDefsSelected" [enableSorting]="true" [rowSelection]="rowSelection"\r\n          [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n          [animateRows]="true" [overlayNoRowsTemplate]="noData" [suppressClickEdit]=true (gridReady)="onGridReady($event)"\r\n          (rowSelected)="compraSeleccionada = $event.node.data" (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()"\r\n          (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (cellEditingStopped)="alCambiarValorDeCelda($event)" [stopEditingWhenGridLosesFocus]="true"\r\n          [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()" (cellDoubleClicked)="compraSeleccionada = $event.node.data;consultarCompra()">\r\n        </ag-grid-angular>\r\n      </div>\r\n      <div class="card-footer">\r\n        <div class="card-header-actions mr-3">\r\n          <h2>{{constantes.TAG_TOTAL}} : {{totales.pago | number:\'1.2-2\'}}</h2>\r\n        </div>\r\n      </div>\r\n      <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n    </div>\r\n    <div class="row m-0 p-0" *ngIf="codigoProveedor && seEncontraronResultados">\r\n      \x3c!--formas de pago--\x3e\r\n      <div style="padding: 0!important;" [ngClass]="{\'col-md-7 p-0\':listadoPagosAnticipos?.length>0,\'col-md-12 p-0\':!listadoPagosAnticipos?.length>0}">\r\n        <app-pago-forma-detalle [listaFormaPago]="listaFormaPago" [listadoDeFormasDePago]="listadoDeFormasDePago"\r\n          [totales]="totales" [configAutonumericReales]="configAutonumericReales" [accion]="accion" [gridApi]="gridApiForma"></app-pago-forma-detalle>\r\n      </div>\r\n      \x3c!--Anticipos--\x3e\r\n      <div class="col-md-5 pr-0" *ngIf="listadoPagosAnticipos?.length>0">\r\n        <app-pago-anticipo-detalle [totales]="totales" [configAutonumericReales]="configAutonumericReales"\r\n          [listadoPagosAnticipos]="listadoPagosAnticipos" [accion]="accion" (enviarAccion)="ejecutarAccion($event)"\r\n          [gridApi]="gridApiAnticipo"></app-pago-anticipo-detalle>\r\n      </div>\r\n    </div>\r\n  </form>\r\n  <div class="card-footer" *ngIf="codigoProveedor && seEncontraronResultados">\r\n    <div class="card-header-actions mr-3">\r\n      <h2>{{constantes.TAG_DIFERENCIA}} : {{totales.diferencia | number:\'1.2-2\'}}</h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="parametrosCompra">\r\n  <app-compras-formulario [data]="parametrosCompra" [empresaSeleccionada]="empresaSeleccionada" (enviarAccion)="ejecutarAccion($event)"></app-compras-formulario>\r\n</div>\r\n<div *ngIf="objetoContableEnviar">\r\n  <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n    (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},IGT0:function(e,t,o){"use strict";o.d(t,"a",function(){return n});var a=o("4sC9"),i=o("flmD"),r=o("sOUC"),n=function(){function e(e){this.invPedidosMotivoPK=new a.a,this.pmDetalle="",this.pmAprobacionAutomatica=!1,this.pmExigirCliente=!1,this.pmLunes=!1,this.pmMartes=!1,this.pmMiercoles=!1,this.pmJueves=!1,this.pmViernes=!1,this.pmSabado=!1,this.pmDomingo=!1,this.pmHoraInicio=null,this.pmHoraFin=null,this.pmPlazoPredeterminado=0,this.pmNotificarProveedor=!1,this.pmNotificarAprobador=!0,this.pmNotificarRegistrador=!0,this.pmNotificarEjecutor=!0,this.pmInactivo=!1,this.usrCodigo="",this.usrFechaInserta=null,this.prdSector=new i.a,this.invProductoCategoria=new r.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invPedidosMotivoPK=e.invPedidosMotivoPK?e.invPedidosMotivoPK:this.invPedidosMotivoPK,this.pmDetalle=e.pmDetalle?e.pmDetalle:this.pmDetalle,this.pmLunes=e.pmLunes?e.pmLunes:this.pmLunes,this.pmMartes=e.pmMartes?e.pmMartes:this.pmMartes,this.pmMiercoles=e.pmMiercoles?e.pmMiercoles:this.pmMiercoles,this.pmJueves=e.pmJueves?e.pmJueves:this.pmJueves,this.pmViernes=e.pmViernes?e.pmViernes:this.pmViernes,this.pmSabado=e.pmSabado?e.pmSabado:this.pmSabado,this.pmDomingo=e.pmDomingo?e.pmDomingo:this.pmDomingo,this.pmHoraInicio=e.pmHoraInicio?e.pmHoraInicio:this.pmHoraInicio,this.pmHoraFin=e.pmHoraFin?e.pmHoraFin:this.pmHoraFin,this.pmPlazoPredeterminado=e.pmPlazoPredeterminado?e.pmPlazoPredeterminado:this.pmPlazoPredeterminado,this.pmInactivo=e.pmInactivo?e.pmInactivo:this.pmInactivo,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.prdSector=e.prdSector?e.prdSector:this.prdSector,this.invProductoCategoria=e.invProductoCategoria?e.invProductoCategoria:this.invProductoCategoria,this.pmAprobacionAutomatica=!0===e.pmAprobacionAutomatica||!1===e.pmAprobacionAutomatica?e.pmAprobacionAutomatica:this.pmAprobacionAutomatica,this.pmNotificarAprobador=!0===e.pmNotificarAprobador||!1===e.pmNotificarAprobador?e.pmNotificarAprobador:this.pmNotificarAprobador,this.pmNotificarRegistrador=!0===e.pmNotificarRegistrador||!1===e.pmNotificarRegistrador?e.pmNotificarRegistrador:this.pmNotificarRegistrador,this.pmNotificarEjecutor=e.pmNotificarEjecutor?e.pmNotificarEjecutor:this.pmNotificarEjecutor,this.pmNotificarProveedor=e.pmNotificarProveedor?e.pmNotificarProveedor:this.pmNotificarProveedor,this.pmExigirCliente=e.pmExigirCliente?e.pmExigirCliente:this.pmExigirCliente},e}()},IY89:function(e,t,o){"use strict";var a,i=o("CcnG"),r=o("5Gob"),n=o("ZYCi"),s=o("SZbH"),c=o("hyxj"),l=o("yccp"),d=o("CEfs"),p=o("nR5P"),u=o("mwBN"),h=o("6E6y"),m=o("FejU"),C=o("i8Jn"),v=o("BPXi"),A=o("bodW"),f=o("Ungd"),g=o("0cNW"),b=o("z5Y/"),O=o("8fiX"),S=o("EnEm"),I=o("madF"),E=o("L5HG"),R=o("gLZI"),T=o("zkCp");!function(e){e.ANTICIPO="recursoshumanos.rh_anticipo",e.BONO="recursoshumanos.rh_bono",e.PRESTAMO="recursoshumanos.rh_prestamo",e.ROL="recursoshumanos.rh_rol",e.UTILIDAD="recursoshumanos.rh_utilidades",e.XIIISUELDO="recursoshumanos.rh_xiii_sueldo",e.XIVSUELDO="recursoshumanos.rh_xiv_sueldo",e.PROVISIONES="recursoshumanos.rh_provisiones",e.VACACIONES="recursoshumanos.rh_vacaciones",e.LIQUIDACION="recursoshumanos.rh_liquidacion"}(a||(a={}));var _=o("EF/R");o.d(t,"a",function(){return y});var P=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},N=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(){function e(e,t,o,a,i,n,s,c,l,d,p,u,h,m){this.api=e,this.route=t,this.toastr=o,this.sectorService=a,this.atajoService=i,this.filasService=n,this.utilService=s,this.archivoService=c,this.planContableService=l,this.contableListadoService=d,this.periodoService=p,this.tipoContableService=u,this.cdRef=h,this.auth=m,this.empresaSeleccionada=new O.a,this.listaEmpresas=[],this.listaSectores=[],this.listadoResultado=[],this.listaPeriodos=[],this.listaTipos=[],this.objetoSeleccionado=new r.a,this.tamanioEstructura=0,this.constantes={},this.periodoSeleccionado=new C.a,this.tipoSeleccionado=new v.a,this.objetoContableEnviar=null,this.objetoContableEnviarRRHH=null,this.estadoGeneral=!1,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.mostrarContabilidaAcciones=!1,this.busqueda="",this.mensajeDialogo="",this.mostrarDialogo=!1,this.listaMensajes=new Array,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new S.a,this.rowClassRules={},this.referencia="",this.vaAlModuloRRHH=!1}return e.prototype.ngOnInit=function(){this.constantes=u.a,this.listaEmpresas=this.route.snapshot.data.contableListado,this.referencia=this.route.snapshot.data.referencia,this.isScreamMd=!(window.innerWidth<=576),this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.cambiarEmpresaSeleccionada()),this.iniciarAtajos()},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576),this.redimencionarColumnas()},e.prototype.listarContables=function(e){if(this.busqueda=this.busqueda?this.busqueda.trim():"",this.tipoSeleccionado||this.periodoSeleccionado||this.busqueda){this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,periodo:this.periodoSeleccionado?this.periodoSeleccionado.sisPeriodoPK.perCodigo:"",tipo:this.tipoSeleccionado?this.tipoSeleccionado.tipCodigo:"",busqueda:this.busqueda,referencia:this.referencia?this.referencia:"",nRegistros:e};this.cargando=!0,this.filasTiempo.iniciarContador(),this.contableListadoService.listarContables(t,this,u.a.KEY_EMPRESA_SELECT)}else this.toastr.warning(u.a.MSJ_INGRESE_AL_MENOS_PERIODO_TIPO_BUSQUEDA,u.a.TAG_AVISO)},e.prototype.despuesDeListarContables=function(e){this.filasTiempo.finalizarContador(),this.listadoResultado=e||[],this.cargando=!1,this.iniciarAgGrid()},e.prototype.listarSectores=function(){this.listaSectores=[];var e={empresa:this.empresaSeleccionada.empCodigo,activo:!0};this.sectorService.listarPrdListaSectorTO(e,this,u.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){this.listaSectores=e||[]},e.prototype.listarPeriodos=function(){this.listaPeriodos=[],this.cargando=!0;var e={empresa:u.a.KEY_EMPRESA_SELECT};this.periodoService.listarPeriodos(e,this,u.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPeriodos=function(e){var t=this;this.listaPeriodos=e||[],this.cargando=!1,this.listaPeriodos.length>0?this.periodoSeleccionado=this.periodoSeleccionado?this.listaPeriodos.find(function(e){return e.sisPeriodoPK.perCodigo===t.periodoSeleccionado.sisPeriodoPK.perCodigo}):this.listaPeriodos[0]:this.periodoSeleccionado=null},e.prototype.listarTipos=function(){this.listaTipos=[],this.cargando=!0;var e={empresa:u.a.KEY_EMPRESA_SELECT,referencia:this.referencia};this.referencia?this.tipoContableService.getListaConTipoReferencia(e,this,u.a.KEY_EMPRESA_SELECT):this.tipoContableService.listarTipoContable(e,this,u.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarTipoContable=function(e){var t=this;this.listaTipos=e||[],this.cargando=!1,this.listaTipos.length>0?this.tipoSeleccionado=this.tipoSeleccionado?this.listaTipos.find(function(e){return e.tipCodigo===t.tipoSeleccionado.tipCodigo}):this.listaTipos[0]:this.tipoSeleccionado=null},e.prototype.despuesDeGetListaConTipoReferencia=function(e){var t=this;this.listaTipos=e||[],this.cargando=!1,this.listaTipos.length>0?this.tipoSeleccionado=this.tipoSeleccionado?this.listaTipos.find(function(e){return e.tipCodigo===t.tipoSeleccionado.tipCodigo}):this.listaTipos[0]:this.tipoSeleccionado=null},e.prototype.operacionContableListado=function(e,t){this.vaAlModuloRRHH=!1;var o=this.referencia,i=!1;switch(this.objetoSeleccionado.conReferencia){case a.ANTICIPO:case a.BONO:case a.LIQUIDACION:case a.PRESTAMO:case a.ROL:case a.UTILIDAD:case a.VACACIONES:case a.XIIISUELDO:case a.XIVSUELDO:i=!0}this.vaAlModuloRRHH=o&&i&&t||!o&&i&&t&&e!=u.a.ACCION_CONSULTAR,this.vaAlModuloRRHH?(this.cargando=!1,this.objetoContableEnviarRRHH={accion:e,contable:this.objetoSeleccionado.perCodigo+"|"+this.objetoSeleccionado.tipCodigo+"|"+this.objetoSeleccionado.conNumero,listadoSectores:this.listaSectores,tamanioEstructura:this.tamanioEstructura,empresaSeleccionada:this.empresaSeleccionada,activar:this.activar,tipoContable:this.tipoSeleccionado,listaPeriodos:[],volverACargar:!1},this.cdRef.detectChanges()):t&&(this.cargando=!0,this.objetoContableEnviar={accion:e,contable:this.objetoSeleccionado.perCodigo+"|"+this.objetoSeleccionado.tipCodigo+"|"+this.objetoSeleccionado.conNumero,listadoSectores:this.listaSectores,tamanioEstructura:this.tamanioEstructura,empresaSeleccionada:this.empresaSeleccionada,activar:this.activar,tipoContable:this.tipoSeleccionado,listaPeriodos:[],volverACargar:!1},this.cdRef.detectChanges())},e.prototype.nuevoContable=function(){this.empresaSeleccionada.listaSisPermisoTO.gruCrear&&this.tipoSeleccionado&&(this.cargando=!0,this.objetoContableEnviar={accion:u.a.ACCION_NUEVO,contable:null,listadoSectores:this.listaSectores,tamanioEstructura:this.tamanioEstructura,empresaSeleccionada:this.empresaSeleccionada,activar:!1,tipoContable:this.tipoSeleccionado,listaPeriodos:this.listaPeriodos,volverACargar:!1},this.cdRef.detectChanges())},e.prototype.imprimirListadoContable=function(){var e=this;if(this.empresaSeleccionada.listaSisPermisoTO.gruImprimir){this.cargando=!0;var t=this.utilService.getAGSelectedData(this.gridApi),o=this.utilService.enviarListadoSeleccionados(t.slice());if(o.conStatus)this.cargando=!1,this.toastr.warning(o.mensaje);else if(o.listadoResultado.length>0){var a={ListaConContableTO:o.listadoResultado};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableDetalle",a,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("listadoContables.pdf",t):e.toastr.warning(u.a.MSJ_ERROR_IMPRIMIR,u.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}else this.cargando=!1,this.toastr.warning(o.mensaje,u.a.TAG_AVISO)}},e.prototype.imprimirListadoContableIndividual=function(){var e=this;if(this.empresaSeleccionada.listaSisPermisoTO.gruImprimir){this.cargando=!0;var t={ListaConContableTO:[this.objetoSeleccionado]};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableDetalle",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("listadoContables.pdf",t):e.toastr.warning(u.a.MSJ_ERROR_IMPRIMIR,u.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}else this.cargando=!1,this.toastr.warning(u.a.MSJ_ERROR_IMPRIMIR,u.a.TAG_AVISO)},e.prototype.validacionAntesDeImprimir=function(e){var t=this.utilService.getAGSelectedData(this.gridApi);if(!t||0===t.length)return this.toastr.warning(u.a.MSJ_NO_ITEM_SELECCIONADO,u.a.TOAST_INFORMACION),!1;if(t.length>1)return this.toastr.warning(u.a.MSJ_DEBE_SELECCIONAR_UN_SOLO_CONTABLE,u.a.TOAST_INFORMACION),!1;if(this.respuestaVerificacionLista=this.utilService.enviarListadoSeleccionados(t.slice()),this.respuestaVerificacionLista.conStatus)return this.toastr.warning(this.respuestaVerificacionLista.mensaje),!1;if("I"===e)switch(this.objetoSeleccionado.conReferencia){case a.BONO:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_BONO,u.a.TAG_AVISO),!1;case a.VACACIONES:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_VACACIONES,u.a.TAG_AVISO),!1;case a.PROVISIONES:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_PROVISIONES,u.a.TAG_AVISO),!1}else if("L"===e)switch(this.objetoSeleccionado.conReferencia){case a.BONO:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_COLECTIVO_BONO,u.a.TAG_AVISO),!1;case a.VACACIONES:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_COLECTIVO_VACACIONES,u.a.TAG_AVISO),!1;case a.PROVISIONES:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_COLECTIVO_PROVISIONES,u.a.TAG_AVISO),!1;case a.UTILIDAD:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_COLECTIVO_UTILIDAD,u.a.TAG_AVISO),!1;case a.XIIISUELDO:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_COLECTIVO_XIII_SUELDO,u.a.TAG_AVISO),!1;case a.XIVSUELDO:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_COLECTIVO_XIV_SUELDO,u.a.TAG_AVISO),!1}else if("S"===e)switch(this.objetoSeleccionado.conReferencia){case a.BONO:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_SOPORTE_BONO,u.a.TAG_AVISO),!1;case a.PRESTAMO:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_SOPORTE_PRESTAMO,u.a.TAG_AVISO),!1;case a.VACACIONES:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_SOPORTE_VACACIONES,u.a.TAG_AVISO),!1;case a.PROVISIONES:return this.toastr.warning(u.a.MSJ_NO_IMPRIMIR_SOPORTE_PROVISIONES,u.a.TAG_AVISO),!1}return!0},e.prototype.imprimirRRHHIndividual=function(){var e=this;if(this.utilService.verificarPermiso(u.a.ACCION_IMPRIMIR,this,!0)&&this.validacionAntesDeImprimir("I")){this.cargando=!0;var t={ListaConContableTO:this.respuestaVerificacionLista.listadoResultado};this.archivoService.postPDF("todocompuWS/rrhhWebController/generarReporteRRHHIndividual",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("listadoContables.pdf",t):e.toastr.warning(u.a.MSJ_ERROR_IMPRIMIR,u.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.imprimirRRHHPorLote=function(){var e=this;if(this.utilService.verificarPermiso(u.a.ACCION_IMPRIMIR,this,!0)&&this.validacionAntesDeImprimir("L")){this.cargando=!0;var t={listado:this.respuestaVerificacionLista.listadoResultado};this.archivoService.postPDF("todocompuWS/rrhhWebController/generarReporteComprobanteColectivo",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("listadoComprobanteColectivo.pdf",t):e.toastr.warning(u.a.MSJ_ERROR_IMPRIMIR,u.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.imprimirListadoSoporte=function(){var e=this;if(this.utilService.verificarPermiso(u.a.ACCION_IMPRIMIR,this,!0)&&this.validacionAntesDeImprimir("S")){this.cargando=!0;var t={listado:this.respuestaVerificacionLista.listadoResultado};this.archivoService.postPDF("todocompuWS/rrhhWebController/generarReporteSoporte",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("listadoSoporte.pdf",t):e.toastr.warning(u.a.MSJ_ERROR_IMPRIMIR,u.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.iniciarAtajos=function(){var e=this;this.atajoService.add(new l.Hotkey(u.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirContable");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return e.listadoResultado.length>0&&(e.activar=!e.activar),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarContables");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_NUEVO,function(){var e=document.getElementById("btnNuevo");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_CONSULTAR,function(){return e.utilService.verificarPermiso(u.a.ACCION_CONSULTAR,e,!0)&&e.objetoSeleccionado&&e.operacionContableListado(u.a.ACCION_CONSULTAR,!0),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_MAYORIZAR,function(){var t=e.empresaSeleccionada.listaSisPermisoTO.gruMayorizarContables&&e.objetoSeleccionado&&e.objetoSeleccionado.conStatus===u.a.ETIQUETA_PENDIENTE;return t&&e.operacionContableListado(u.a.ACCION_MAYORIZAR,t),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_DESMAYORIZAR,function(){var t=e.empresaSeleccionada.listaSisPermisoTO.gruDesmayorizarContables&&e.objetoSeleccionado&&e.objetoSeleccionado.conStatus!==u.a.ETIQUETA_PENDIENTE&&e.objetoSeleccionado.conAnulado!==u.a.ETIQUETA_ANULADO&&e.objetoSeleccionado.conReversado!==u.a.ETIQUETA_REVERSADO&&e.objetoSeleccionado.conBloqueado!==u.a.ETIQUETA_BLOQUEADO;return t&&e.operacionContableListado(u.a.ACCION_DESMAYORIZAR,t),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_REVERSAR,function(){var t=e.empresaSeleccionada.listaSisPermisoTO.gruAnularContables&&e.objetoSeleccionado&&e.objetoSeleccionado.conStatus!==u.a.ETIQUETA_PENDIENTE&&e.objetoSeleccionado.conAnulado!==u.a.ETIQUETA_ANULADO&&e.objetoSeleccionado.conReversado!==u.a.ETIQUETA_REVERSADO&&e.objetoSeleccionado.conBloqueado!==u.a.ETIQUETA_BLOQUEADO;return t&&e.operacionContableListado(u.a.ACCION_REVERSAR,t),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_ANULAR,function(){var t=e.empresaSeleccionada.listaSisPermisoTO.gruAnularContables&&e.objetoSeleccionado&&e.objetoSeleccionado.conStatus!==u.a.ETIQUETA_PENDIENTE&&e.objetoSeleccionado.conAnulado!==u.a.ETIQUETA_ANULADO&&e.objetoSeleccionado.conReversado!==u.a.ETIQUETA_REVERSADO&&e.objetoSeleccionado.conBloqueado!==u.a.ETIQUETA_BLOQUEADO;return t&&e.operacionContableListado(u.a.ACCION_ANULAR,t),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_RESTAURAR,function(){var t=e.empresaSeleccionada.listaSisPermisoTO.gruAnularContables&&e.objetoSeleccionado&&(e.objetoSeleccionado.conAnulado===u.a.ETIQUETA_ANULADO||e.objetoSeleccionado.conReversado===u.a.ETIQUETA_REVERSADO);return t&&e.operacionContableListado(u.a.ACCION_RESTAURAR,t),!1})),this.atajoService.add(new l.Hotkey(u.a.ATAJO_DESBLOQUEAR,function(){var t=e.empresaSeleccionada.listaSisPermisoTO.gruAnularContables&&e.objetoSeleccionado&&e.objetoSeleccionado.conBloqueado===u.a.ETIQUETA_BLOQUEADO;return t&&e.operacionContableListado(u.a.ACCION_DESBLOQUEAR,t),!1}))},e.prototype.generarOpciones=function(){var e=this,t=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruMayorizarContables&&this.objetoSeleccionado.conStatus===u.a.ETIQUETA_PENDIENTE,o=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruDesmayorizarContables&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_ANULADO&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_REVERSADO&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_BLOQUEADO,a=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruAnularContables&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_ANULADO&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_REVERSADO&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_BLOQUEADO,i=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruAnularContables&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_ANULADO&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_REVERSADO&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_BLOQUEADO,r=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruAnularContables&&(this.objetoSeleccionado.conStatus===u.a.ETIQUETA_ANULADO||this.objetoSeleccionado.conStatus===u.a.ETIQUETA_REVERSADO),n=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruAnularContables&&this.objetoSeleccionado.conStatus===u.a.ETIQUETA_BLOQUEADO,s=this.objetoSeleccionado&&this.empresaSeleccionada.listaSisPermisoTO.gruImprimir&&this.objetoSeleccionado.conStatus!==u.a.ETIQUETA_PENDIENTE,c=this.objetoSeleccionado&&this.utilService.verificarPermiso(u.a.ACCION_ELIMINAR_PC,this)&&"ADM"===this.auth.getCodigoUser();this.opciones=[{label:u.a.ACCION_CONSULTAR,icon:u.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.operacionContableListado(u.a.ACCION_CONSULTAR,!0)}},{label:u.a.ACCION_MAYORIZAR,icon:u.a.ICON_MAYORIZAR,disabled:!t,command:function(){return t?e.operacionContableListado(u.a.ACCION_MAYORIZAR,t):null}},{label:u.a.ACCION_DESMAYORIZAR,icon:u.a.ICON_DESMAYORIZAR,disabled:!o,command:function(){return o?e.operacionContableListado(u.a.ACCION_DESMAYORIZAR,o):null}},{label:u.a.ACCION_REVERSAR,icon:u.a.ICON_REVERSAR,disabled:!a,command:function(){return a?e.operacionContableListado(u.a.ACCION_REVERSAR,a):null}},{label:u.a.ACCION_ANULAR,icon:u.a.ICON_ANULAR,disabled:!i,command:function(){return i?e.operacionContableListado(u.a.ACCION_ANULAR,i):null}},{label:u.a.ACCION_RESTAURAR,icon:u.a.ICON_RESTAURAR,disabled:!r,command:function(){return r?e.operacionContableListado(u.a.ACCION_RESTAURAR,r):null}},{label:u.a.ACCION_DESBLOQUEAR,icon:u.a.ICON_DESBLOQUEAR,disabled:!n,command:function(){return n?e.operacionContableListado(u.a.ACCION_DESBLOQUEAR,n):null}},{label:u.a.ACCION_IMPRIMIR,icon:u.a.ICON_IMPRIMIR,disabled:!s,command:function(){return s?e.imprimirListadoContableIndividual():null}}],this.referencia&&this.opciones.push({label:u.a.ACCION_ELIMINAR,icon:u.a.ICON_ELIMINAR,disabled:!c,command:function(){return c?e.operacionContableListado(u.a.ACCION_ELIMINAR,c):null}})},e.prototype.consultar=function(e){this.objetoSeleccionado=e,this.operacionContableListado(u.a.ACCION_CONSULTAR,!0)},e.prototype.limpiarResultado=function(){this.gridApi=null,this.gridColumnApi=null,this.filtroGlobal="",this.listadoResultado=[],this.objetoSeleccionado=null,this.filasTiempo.resetearContador(),this.actualizarFilas(),this.estadoGeneral=!1},e.prototype.cambiarEmpresaSeleccionada=function(){var e=this;u.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado(),this.tipoSeleccionado=null,this.periodoSeleccionado=null,this.listarSectores(),this.listarPeriodos(),this.listarTipos(),this.planContableService.getTamanioListaConEstructura({empresa:this.empresaSeleccionada.empCodigo},u.a.KEY_EMPRESA_SELECT).then(function(t){e.tamanioEstructura=t[0].estGrupo1+t[0].estGrupo2+t[0].estGrupo3+t[0].estGrupo4+t[0].estGrupo5+t[0].estGrupo6}).catch(function(t){e.utilService.handleError(t,e)})},e.prototype.cerrarContabilidadAcciones=function(e){if(e.contable)if(this.objetoContableEnviar&&this.objetoContableEnviar.accion===u.a.ACCION_NUEVO){var t=new r.a;this.setearValoresItem(t,e),t.conNumero=e.contable.conContablePK.conNumero,t.perCodigo=e.contable.conContablePK.conPeriodo,t.tipCodigo=e.contable.conContablePK.conTipo,this.refrescarTabla(t,"I")}else this.objetoContableEnviarRRHH&&this.objetoContableEnviarRRHH.accion===u.a.ACCION_ELIMINAR?this.refrescarTabla(this.objetoSeleccionado,"D"):(this.setearValoresItem(this.objetoSeleccionado,e),this.refrescarTabla(this.objetoSeleccionado,"U"));this.activar=!!e.objetoEnviar&&e.objetoEnviar.activar,this.objetoContableEnviar=e.objetoEnviar,this.objetoContableEnviarRRHH=e.objetoEnviar,this.mostrarContabilidaAcciones=e.mostrarContilidadAcciones,this.actualizarFilas(),this.iniciarAtajos()},e.prototype.setearValoresItem=function(e,t){t.contable.conAnulado?e.conStatus=u.a.ETIQUETA_ANULADO:t.contable.conPendiente?e.conStatus=u.a.ETIQUETA_PENDIENTE:t.contable.conBloqueado?e.conStatus=u.a.ETIQUETA_BLOQUEADO:t.contable.conReversado?e.conStatus=u.a.ETIQUETA_REVERSADO:e.conStatus="",e.conObservaciones=t.contable.conObservaciones,e.conConcepto=t.contable.conConcepto,e.conDetalle=t.contable.conDetalle,e.conFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(new Date(t.contable.conFecha))},e.prototype.desmayorizarContableSeleccionado=function(){var e=this;if(this.utilService.verificarPermiso(u.a.ACCION_DESMAYORIZAR,this,!0)){this.cargando=!0,this.listaMensajes=[];var t=this.utilService.getAGSelectedData(this.gridApi);if(1===t.length)this.objetoSeleccionado=t[0],this.operacionContableListado(u.a.ACCION_DESMAYORIZAR,!0);else if(t.length>1){var o={listadoConContablePK:this.contableListadoService.getConContablePKDeListaConContableTO(t)};this.api.post("todocompuWS/contabilidadWebController/desmayorizarListaConContable",o,u.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===u.a.KEY_EXITO&&t.extraInfo.length>0?(e.listaMensajes=e.contableListadoService.formatearMensajesDesmayorizar(t.extraInfo,e),e.mostrarDialogo=!0,e.refrescarTabla(e.objetoSeleccionado,"U")):e.toastr.warning(t.operacionMensaje,u.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}else this.cargando=!1,this.toastr.warning(u.a.MSJ_NO_ITEM_SELECCIONADO,u.a.TAG_AVISO)}},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e},e.prototype.cambiarEstadoActivar=function(e){this.activar=e,this.cdRef.detectChanges()},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.contableListadoService.generarColumnasContableListado(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={botonOpciones:I.a,toolTip:R.a,iconoEstado:E.a},this.rowClassRules={"fila-pendiente":function(e){return"PENDIENTE"===e.data.conStatus}},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.getDataSelected=function(){return this.utilService.getAGSelectedData(this.gridApi)},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoResultado.length>0)(a=this.listadoResultado.slice()).unshift(e),this.listadoResultado=a;break;case"U":var o=this.listadoResultado.findIndex(function(t){return t.perCodigo===e.perCodigo&&t.conNumero===e.conNumero&&t.tipCodigo===e.tipCodigo});(a=this.listadoResultado.slice())[o]=e,this.listadoResultado=a;break;case"D":var a;o=this.listadoResultado.findIndex(function(t){return t.perCodigo===e.perCodigo&&t.conNumero===e.conNumero&&t.tipCodigo===e.tipCodigo});(a=this.listadoResultado.slice()).splice(o,1),this.listadoResultado=a}this.refreshGrid()},P([Object(i.ViewChild)("menuOpciones"),N("design:type",T.ContextMenu)],e.prototype,"menuOpciones",void 0),P([Object(i.HostListener)("window:resize",["$event"]),N("design:type",Function),N("design:paramtypes",[]),N("design:returntype",void 0)],e.prototype,"onResize",null),e=P([Object(i.Component)({selector:"app-contable-listado",template:o("JEfi"),styles:[o("EKjD")]}),N("design:paramtypes",[b.a,n.ActivatedRoute,s.b,c.a,l.HotkeysService,d.a,p.a,f.a,h.a,m.a,g.a,A.a,i.ChangeDetectorRef,_.a])],e)}()},Il6u:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("mwBN"),r=o("z5Y/"),n=o("SZbH"),s=o("nR5P"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.obtenerDatosParaCrudCuentas=function(e,t,o){var a=this;this.api.post("todocompuWS/bancoWebController/obtenerDatosParaCrudCuentas",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaCrudCuentas(e.extraInfo):(a.toastr.warning(e.operacionMensaje,i.a.TOAST_ADVERTENCIA),t.isModal&&t.activeModal.close()),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarInvListaCuentasTO=function(e,t,o){var a=this;this.api.post("todocompuWS/bancoWebController/getListaBanCuentaTO",e,o).then(function(e){e?t.despuesDeListarInvListaCuentasTO(e):(t.despuesDeListarInvListaCuentasTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarGetBanComboBancoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/bancoWebController/getBanComboBancoTO",e,o).then(function(e){e?t.despuesDeGetBanComboBancoTO(e):(t.despuesDeGetBanComboBancoTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getCuentaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/bancoWebController/getBancoCuentaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetCuentaTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case i.a.ACCION_CONSULTAR:a=!0;break;case i.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case i.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar;break;case i.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar}return o&&!a&&this.toastr.warning(i.a.ERROR_403_TEXTO,i.a.ERROR_403_TITULO),a},e.prototype.generarColumnas=function(e){return[{headerName:i.a.TAG_BANCO,field:"banBanco",width:80,minWidth:100},{headerName:i.a.TAG_NUMERO,field:"ctaNumero",width:80,minWidth:100},{headerName:i.a.TAG_TITULAR,field:"ctaTitular",width:100,minWidth:100},{headerName:i.a.TAG_OFICIAL,field:"ctaOficial",width:120,minWidth:100},{headerName:i.a.TAG_FORMATO_CHEQUE,field:"ctaFormatoCheque",width:100,minWidth:100},{headerName:i.a.TAG_CUENTA_CONTABLE,field:"ctaCuentaContable",width:100,minWidth:100},e?null:this.utilService.getColumnaOpciones()]},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[r.a,n.b,s.a])],e)}()},Ils2:function(e,t){e.exports=""},J2gc:function(e,t){e.exports=""},JEfi:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i> <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmContableListado="ngForm">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control input-sm" name="cboEmpresa" [(ngModel)]="empresaSeleccionada" (ngModelChange)="cambiarEmpresaSeleccionada()"\r\n              [disabled]="mostrarContabilidaAcciones" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option selected [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">\r\n                {{empresa.empNombre}} ({{empresa.empCodigo}})\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_PERIODO}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarPeriodos()" *ngIf="!mostrarContabilidaAcciones">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_PERIODOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaPeriodos" name="periodo" [showClear]="true" [(ngModel)]="periodoSeleccionado"\r\n              placeholder="{{constantes.TAG_TODOS}}" optionLabel="perDetalle" (ngModelChange)="limpiarResultado()"\r\n              [disabled]="mostrarContabilidaAcciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{periodoSeleccionado?.perDetalle}}\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class=""> {{fs.value.perDetalle}}</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_TIPO_COMPROBANTES}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarTipos()" *ngIf="!mostrarContabilidaAcciones">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_TIPOS_COMPROBANTES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaTipos" name="tipo" [showClear]="true" [(ngModel)]="tipoSeleccionado"\r\n              placeholder="{{constantes.TAG_TODOS}}" optionLabel="tipDetalle" (ngModelChange)="limpiarResultado()"\r\n              [disabled]="mostrarContabilidaAcciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{tipoSeleccionado?.tipDetalle}} ({{tipoSeleccionado?.tipCodigo}} )\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div class=""> {{fs.value.tipDetalle}} ({{fs.value.tipCodigo}})\r\n                </div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_BUSQUEDA}}</b>\r\n            </label>\r\n            <input name="txtBusqueda" (ngModelChange)="limpiarResultado()" [disabled]="mostrarContabilidaAcciones"\r\n              [(ngModel)]="busqueda" placeholder="{{tipoSeleccionado &&  !periodoSeleccionado?\'OBLIGATORIO\':\'OPCIONAL\'}}"\r\n              class="form-control input-sm text-uppercase" maxlength="20" triggers="mouseenter:mouseleave" [appFocus]=true>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer" *ngIf="!mostrarContabilidaAcciones">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button type="button" id="btnBuscarContables" class="btn btn-sm btn-primary" title="{{constantes.ATAJO_BUSCAR}}"\r\n              [ngbTooltip]="tipContentGuardar" (click)="listarContables(20)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split  mr-1"\r\n              data-toggle="dropdown" style="margin-right: 3px;">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="listarContables(50)"> {{constantes.TAG_ULTIMOS_50}}</a>\r\n              <a class="dropdown-item" (click)="listarContables(100)"> {{constantes.TAG_ULTIMOS_100}}</a>\r\n              <a class="dropdown-item" (click)="listarContables(null)"> {{constantes.TAG_TODOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" id="btnNuevo" *ngIf="!referencia" class="btn btn-sm btn-primary" title="{{constantes.ATAJO_NUEVO}}"\r\n            (click)="nuevoContable()" [disabled]="!frmContableListado.valid || !empresaSeleccionada.listaSisPermisoTO.gruCrear || !tipoSeleccionado">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="mostrarContabilidaAcciones">\r\n    <div class="card m-0" *ngIf="listadoResultado?.length > 0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar" type="button"\r\n          title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.CONTABILIDAD_CONTABLE_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" (click)="desmayorizarContableSeleccionado()"\r\n              [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruMayorizarContables" placement="top" ngbTooltip="{{constantes.LABEL_DESMAYORIZAR}}"\r\n              container="body" title="{{constantes.ATAJO_DESMAYORIZAR}}">\r\n              <i class="{{constantes.ICON_DESMAYORIZAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_DESMAYORIZAR}}</span>\r\n            </button>\r\n            <button id="btnImprimirContable" type="button" class="btn btn-sm btn-primary" (click)="imprimirListadoContable()"\r\n              [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n              container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1 dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="imprimirListadoSoporte()" *ngIf="referencia">{{constantes.LABEL_CAMINO_SOPORTE}}</a>\r\n              <a class="dropdown-item" (click)="imprimirRRHHIndividual()" *ngIf="referencia">{{constantes.LABEL_IMPRIMIR_INDIVIDUAL}}</a>\r\n              <a class="dropdown-item" (click)="imprimirRRHHPorLote()" *ngIf="referencia">{{constantes.LABEL_IMPRIMIR_LOTE}}</a>\r\n              <a class="dropdown-item" (click)="imprimirListadoContable()" *ngIf="!referencia">{{constantes.LABEL_IMPRIMIR_LOTE}}</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listadoResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [suppressRowClickSelection]="true" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n          [context]="context" [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n          (gridSizeChanged)="redimencionarColumnas()" (cellDoubleClicked)="consultar($event.node.data)" [rowClassRules]="rowClassRules">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="objetoContableEnviar">\r\n    <app-contable-formulario [data]="objetoContableEnviar" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n      (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"></app-contable-formulario>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="objetoContableEnviarRRHH && vaAlModuloRRHH">\r\n    <app-contable-rrhh-formulario [data]="objetoContableEnviarRRHH" (cargandoEstado)="cambiarEstadoCargando($event)"\r\n      (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivar($event)"\r\n      (mostrarFormulario)="mostrarContabilidaAcciones = $event"></app-contable-rrhh-formulario>\r\n  </div>\r\n</div>\r\n\r\n\x3c!-- Modal que muestra los errores --\x3e\r\n<p-dialog header="Aviso" [(visible)]="mostrarDialogo" [modal]="true" [responsive]="true" [contentStyle]="{\'max-height\':\'500px\', \'max-width\':\'550px\'}"\r\n  [baseZIndex]="10000">\r\n  <div *ngFor="let mensaje of listaMensajes" class="alert alert-{{mensaje.tipo}} p-1 mb-1" role="alert">\r\n    <span>\r\n      <i class="{{mensaje.icono}}"></i>\r\n    </span>\r\n    {{mensaje.texto}}\r\n  </div>\r\n  <p-footer>\r\n    <div class="text-center">\r\n      <button type="button" (click)="mostrarDialogo=false" class="btn btn-sm btn-primary">{{constantes.LABEL_ACEPTAR}}</button>\r\n    </div>\r\n  </p-footer>\r\n</p-dialog>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},JmMb:function(e,t,o){"use strict";o.d(t,"a",function(){return O});var a=o("CcnG"),i=o("mwBN"),r=o("sXuD"),n=o("PYZn"),s=o("yccp"),c=o("wd/R"),l=o("8fiX"),d=o("VO10"),p=o("ZYCi"),u=o("SZbH"),h=o("RDZc"),m=o("eUd/"),C=o("nR5P"),v=o("CEfs"),A=o("LlOB"),f=o("G/9+"),g=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t,o,n,s,p,u,h,m){this.route=e,this.atajoService=t,this.toastr=o,this.bodegaService=n,this.modalService=s,this.utilService=p,this.filasService=u,this.sistemaService=h,this.kardexService=m,this.activar=!1,this.cargando=!1,this.listaEmpresas=[],this.empresaSeleccionada=new l.a,this.listaBodegas=new Array,this.bodegaSeleccionada=new d.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.productoSeleccionado=new r.a,this.productoCodigoCopia=null,this.formatoLista="",this.busquedaListado=null,this.dataListado={},this.vistaFormulario=null,this.vistaListado=!1,this.deshabilitarOpciones=!1,this.cerrarKardex=new a.EventEmitter,this.es={},this.objetoConsultaEnviar={},this.objetoFormularioEnviar={},this.operacionListado={},this.mostrarBtnRegresarFomulario=!1,this.listadoPeriodos=new Array,this.listaConsumoMotivo=[],c.locale("es"),this.constantes=i.a,this.es=this.utilService.setLocaleDate()}return e.prototype.ngOnInit=function(){this.objetoDesdeFuera?this.setearValoresDesdeFuera():(this.listaEmpresas=this.route.snapshot.data.kardexValorizado,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.cambiarempresaSeleccionada(),this.obtenerFechaInicioActualMes(),this.iniciarAtajos()),this.focusProducto()},e.prototype.setearValoresDesdeFuera=function(){this.listaEmpresas.push(this.objetoDesdeFuera.empresa),this.empresaSeleccionada=this.listaEmpresas[0],this.objetoDesdeFuera.bodega&&("string"==typeof this.objetoDesdeFuera.bodega?this.listarBodegas():this.listaBodegas.push(this.objetoDesdeFuera.bodega)),this.bodegaSeleccionada=this.listaBodegas[0],this.productoSeleccionado=this.objetoDesdeFuera.productoSeleccionado,this.productoCodigoCopia=this.productoSeleccionado.proCodigoPrincipal,this.fechaDesde=this.objetoDesdeFuera.fechaDesde,this.fechaHasta=this.objetoDesdeFuera.fechaHasta,this.mostrarBtnRegresarFomulario=!0,this.obtenerDatosParaKardex()},e.prototype.obtenerDatosParaKardex=function(){this.cargando=!0,this.kardexService.obtenerDatosParaKardex({empresa:i.a.KEY_EMPRESA_SELECT},this,i.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosParaKardex=function(e){this.cargando=!1,e&&(this.listaBodegas=e.listadoBodegas,this.listadoPeriodos=e.listadoPeriodos,this.listaConsumoMotivo=e.listadoMotivos,this.busquedaKardex(this.objetoDesdeFuera.incluirTodos))},e.prototype.cerrarKardexComponente=function(){this.cerrarKardex.emit(!1)},e.prototype.iniciarAtajos=function(){this.atajoService.add(new s.Hotkey(i.a.ATAJO_BUSCAR,function(){return document.getElementById("btnBuscar").click(),!1}))},e.prototype.cambiarempresaSeleccionada=function(){i.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cargando=!0,this.productoSeleccionado=new r.a,this.bodegaSeleccionada=null,this.listarBodegas()},e.prototype.listarBodegas=function(){this.cargando=!0,this.listaBodegas=[],this.limpiarResultado();var e={empresa:this.empresaSeleccionada.empCodigo,inactivo:!1};this.bodegaService.listarInvListaBodegasTO(e,this,i.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvListaBodegasTO=function(e){var t=this;this.listaBodegas=e,this.objetoDesdeFuera&&this.objetoDesdeFuera.bodega&&(this.bodegaSeleccionada="string"==typeof this.objetoDesdeFuera.bodega?new d.a({bodCodigo:this.objetoDesdeFuera.bodega}):this.bodegaSeleccionada),this.listaBodegas.length>0?this.bodegaSeleccionada=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.listaBodegas.find(function(e){return e.bodCodigo===t.bodegaSeleccionada.bodCodigo}):null:this.bodegaSeleccionada=null,this.cargando=!1,this.objetoDesdeFuera&&this.objetoDesdeFuera.bodega&&"string"==typeof this.objetoDesdeFuera.bodega&&this.busquedaKardex(this.objetoDesdeFuera.incluirTodos)},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,i.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaDesde.setMonth(e.fechaDesde.getMonth()-1),e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.limpiarResultado=function(){this.busquedaListado=null,this.filasService.actualizarFilas(0)},e.prototype.buscarKardex=function(e,t){var o=this.utilService.establecerFormularioTocado(e);this.cargando=!0,e&&e.valid&&o?this.busquedaKardex(t):(this.toastr.error(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS),this.cargando=!1)},e.prototype.busquedaKardex=function(e){this.filasService.actualizarFilas(0),this.dataListado={vista:this.formatoLista,nombreProducto:this.productoSeleccionado.proNombre},this.busquedaListado=this.generarObjetoListado(e),this.vistaListado=!0,this.cargando=!1},e.prototype.generarObjetoListado=function(e){return{empresa:i.a.KEY_EMPRESA_SELECT,bodega:this.bodegaSeleccionada?this.bodegaSeleccionada.bodCodigo:null,producto:this.productoSeleccionado.proCodigoPrincipal,desde:this.utilService.formatearDateToStringYYYYMMDD(this.fechaDesde),hasta:this.utilService.formatearDateToStringYYYYMMDD(this.fechaHasta),promedio:i.a.KEY_KARDEX_PROMEDIO,mostrarBtnRegresar:!!this.objetoDesdeFuera,incluirTodos:e,vista:"kardexValorizado"}},e.prototype.cambiarActivar=function(e){this.activar=e,this.deshabilitarOpciones=!0},e.prototype.cancelar=function(){this.cerrarKardexComponente(),this.activar=!1,this.deshabilitarOpciones=!1,this.vistaListado=!0},e.prototype.buscarProducto=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esCuentaCodigoValido())if(this.productoSeleccionado.proCodigoPrincipal&&this.productoSeleccionado.proCodigoPrincipal.length>0){var o={empresa:this.empresaSeleccionada.empCodigo,busqueda:this.productoSeleccionado.proCodigoPrincipal,categoria:null,incluirInactivos:!1,limite:!1};e.srcElement.blur(),e.preventDefault();var a=this.modalService.open(n.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.parametrosBusqueda=o,a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){t.productoCodigoCopia=e.proCodigoPrincipal,t.productoSeleccionado=e},function(){t.focusProducto()})}else this.toastr.info(i.a.MSJ_ENTER_NO_DATA,i.a.TOAST_INFORMACION)},e.prototype.focusProducto=function(){var e=document.getElementById("idProducto");e&&e.focus()},e.prototype.esCuentaCodigoValido=function(){return this.productoCodigoCopia&&this.productoCodigoCopia===this.productoSeleccionado.proCodigoPrincipal},e.prototype.validarProducto=function(){this.productoCodigoCopia!==this.productoSeleccionado.proCodigoPrincipal&&(this.productoCodigoCopia=null,this.productoSeleccionado=new r.a)},g([Object(a.Input)(),b("design:type",Object)],e.prototype,"objetoDesdeFuera",void 0),g([Object(a.Output)(),b("design:type",Object)],e.prototype,"cerrarKardex",void 0),e=g([Object(a.Component)({selector:"app-kardex-valorizado",template:o("m5XJ"),styles:[o("5dnF")]}),b("design:paramtypes",[p.ActivatedRoute,s.HotkeysService,u.b,h.a,m.b,C.a,v.a,A.a,f.a])],e)}()},"K/pM":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.empCodigo=null,this.bodCodigo=null,this.bodNombre=null,this.bodInactiva=!1,this.secEmpresa=null,this.secCodigo=null,this.detEmpresa=null,this.detUsuario=null,this.usrEmpresa=null,this.usrInsertaBodega=null,this.usrFechaInsertaBodega=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.empCodigo=e.empCodigo?e.empCodigo:this.empCodigo,this.bodCodigo=e.bodCodigo?e.bodCodigo:this.bodCodigo,this.bodNombre=e.bodNombre?e.bodNombre:this.bodNombre,this.bodInactiva=e.bodInactiva?e.bodInactiva:this.bodInactiva,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.detEmpresa=e.detEmpresa?e.detEmpresa:this.detEmpresa,this.detUsuario=e.detUsuario?e.detUsuario:this.detUsuario,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrInsertaBodega=e.usrInsertaBodega?e.usrInsertaBodega:this.usrInsertaBodega,this.usrFechaInsertaBodega=e.usrFechaInsertaBodega?e.usrFechaInsertaBodega:this.usrFechaInsertaBodega},e}()},K3zs:function(e,t,o){"use strict";var a=o("CcnG"),i=o("mwBN"),r=o("eUd/"),n=o("SZbH"),s=o("nR5P"),c=o("CEfs"),l=o("8fiX"),d=o("z5Y/"),p=o("yccp"),u=o("ZYCi"),h=o("/qCj"),m=function(){function e(e){this.tipCodigo="",this.tipDetalle="",this.tipTipo="",this.tipActivo=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.tipCodigo=e.tipCodigo?e.tipCodigo:this.tipCodigo,this.tipDetalle=e.tipDetalle?e.tipDetalle:this.tipDetalle,this.tipTipo=e.tipTipo?e.tipTipo:this.tipTipo,this.tipActivo=e.tipActivo?e.tipActivo:this.tipActivo},e}(),C=o("jEGE"),v=o("U2oW"),A=o("Ungd"),f=o("zkCp"),g=o("madF"),b=o("gLZI"),O=o("+JJ7"),S=o("EnEm");o.d(t,"a",function(){return R});var I=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},E=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},R=function(){function e(e,t,o,a,r,n,s,c,d){this.route=e,this.api=t,this.activeModal=o,this.toastr=a,this.utilService=r,this.archivoService=n,this.filasService=s,this.atajoService=c,this.tipoService=d,this.esModal=!1,this.empresaSeleccionada=new l.a,this.listaEmpresas=Array(),this.invProductoTipoTO=new C.a,this.vistaFormulario=!1,this.accion=null,this.listadoInvProductoTipoComboTO=Array(),this.tipoSeleccionado=new m,this.tipoNuevoSeleccionado=new m,this.isScreamMd=!0,this.listaTipoProducto=Array(),this.filasTiempo=new S.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.constantes=i.a,this.frmTitulo=i.a.TITULO_FILTROS,this.classTitulo=i.a.ICON_FILTRAR,this.listaTipoProducto=i.a.LISTA_TIPOS_PRODUCTO,this.inicializarAtajos(),this.iniciarAgGrid()}return e.prototype.ngOnInit=function(){this.empresaModal?(this.esModal=!0,this.activar=!0,this.listaEmpresas.push(this.empresaModal),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),i.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.buscarProductoTipo(),this.cambiarEmpresaSeleccionada()):(this.listaEmpresas=this.route.snapshot.data.tipoProducto,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),i.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSeleccionada())),this.isScreamMd=!(window.innerWidth<=576)},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new p.Hotkey(i.a.ATAJO_ESC,function(){return e.cerrarTipo(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscarTipoProducto");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirTipoProducto");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarTipoProducto");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevoTipoProducto");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_EDITAR,function(t){return!e.vistaFormulario&&e.listadoInvProductoTipoComboTO.length>0&&e.editarProductoTipo(e.tipoSeleccionado),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_ELIMINAR,function(t){return!e.vistaFormulario&&e.listadoInvProductoTipoComboTO.length>0&&e.eliminarProductoTipo(e.tipoSeleccionado),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_GUARDAR,function(t){if(e.vistaFormulario){var o=document.getElementById("btnGuardarTipoProducto");return o&&o.click(),!1}})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_CANCELAR,function(t){return e.vistaFormulario&&e.resetearFormulario(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){i.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.invProductoTipoTO=new C.a,this.limpiarListado(),this.vistaFormulario=!1,this.activar=!1,this.activar=!0,this.accion=null},e.prototype.buscarProductoTipo=function(){this.cargando=!0,this.accion=null,this.limpiarListado(),this.filasTiempo.iniciarContador();var e={empresa:this.empresaSeleccionada.empCodigo,accion:"LISTADO"};this.tipoService.listarInvProductoTipoTO(e,this,i.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvProductoTipoTO=function(e){this.filasTiempo.finalizarContador(),this.listadoInvProductoTipoComboTO=e||[],this.cargando=!1},e.prototype.limpiarListado=function(){this.listadoInvProductoTipoComboTO=[],this.actualizarFilas()},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(i.a.ACCION_EDITAR,this)&&!this.vistaFormulario,o=this.utilService.verificarPermiso(i.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario;this.opciones=[{label:i.a.ACCION_EDITAR,icon:i.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editarProductoTipo(e.tipoSeleccionado):null}},{label:i.a.ACCION_ELIMINAR,icon:i.a.ICON_ELIMINAR,disabled:!o,command:function(t){return o?e.eliminarProductoTipo(e.tipoSeleccionado):null}}]},e.prototype.nuevoProductoTipo=function(){this.utilService.verificarPermiso(i.a.ACCION_CREAR,this,!0)&&(this.cargando=!0,this.activar=!1,this.listaTipoProducto=i.a.LISTA_TIPOS_PRODUCTO,this.accion=i.a.ACCION_CREAR,this.frmTitulo=i.a.TITULO_FORM_NUEVO_PRODUCTO_TIPO,this.classTitulo=i.a.ICON_CREAR,this.invProductoTipoTO=new C.a,this.invProductoTipoTO.tipTipo=this.listaTipoProducto[0],this.vistaFormulario=!0,this.cargando=!1)},e.prototype.guardarProductoTipo=function(e){var t=this;if(this.utilService.verificarPermiso(i.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.tipoService.formatearInvProductoTipoTO(this.invProductoTipoTO,this),r={invProductoTipoTO:a,accion:"I"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoTipo",r,i.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.tipoNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"I"),t.toastr.success(e.operacionMensaje,i.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,i.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.warning(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.resetearFormulario=function(){this.frmTitulo=i.a.TITULO_FILTROS,this.classTitulo=i.a.ICON_FILTRAR,this.invProductoTipoTO=new C.a,this.vistaFormulario=!1,this.activar=!0,this.accion=null},e.prototype.editarProductoTipo=function(e){this.utilService.verificarPermiso(i.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.activar=!1,this.listaTipoProducto=i.a.LISTA_TIPOS_PRODUCTO,this.accion=i.a.ACCION_EDITAR,this.frmTitulo=i.a.TITULO_FORM_EDITAR_PRODUCTO_TIPO,this.classTitulo=i.a.ICON_EDITAR,this.invProductoTipoTO=new C.a(e),this.vistaFormulario=!0,this.cargando=!1)},e.prototype.actualizarProductoTipo=function(e){var t=this;if(this.utilService.verificarPermiso(i.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.tipoService.formatearInvProductoTipoTO(this.invProductoTipoTO,this),r={invProductoTipoTO:a,accion:"M"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoTipo",r,i.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.tipoNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"U"),t.toastr.success(e.operacionMensaje,i.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,i.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.warning(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarProductoTipo=function(e){var t=this;if(this.utilService.verificarPermiso(i.a.ACCION_ELIMINAR,this,!0)){var o={title:i.a.MSJ_TITULO_ELIMINAR,texto:i.a.MSJ_PREGUNTA_ELIMINAR,type:i.a.SWAL_WARNING,confirmButtonText:i.a.MSJ_SI_ELIMINAR,cancelButtonText:i.a.MSJ_NO_CANCELAR,confirmButtonColor:i.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invProductoTipoPK:new v.a({tipEmpresa:t.empresaSeleccionada.empCodigo,tipCodigo:e.tipCodigo})};t.api.post("todocompuWS/inventarioWebController/eliminarInvProductoTipo",a,i.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?t.refrescarTabla(e,"D"):t.toastr.warning(o.operacionMensaje,i.a.TOAST_ADVERTENCIA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}})}},e.prototype.cerrarTipo=function(){this.tipoNuevoSeleccionado=this.tipoNuevoSeleccionado&&""==this.tipoNuevoSeleccionado.tipCodigo?null:this.tipoNuevoSeleccionado;var e={tipoSeleccionado:this.tipoNuevoSeleccionado};this.activeModal.close(e)},e.prototype.imprimirTipoProducto=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listInvProductoTipoComboTO:this.listadoInvProductoTipoComboTO};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteProductoTipo",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoProductoTipo_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(i.a.MSJ_ERROR_IMPRIMIR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarTipoProducto=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listInvProductoTipoComboTO:this.listadoInvProductoTipoComboTO};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteProductoTipo",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoProductoTipo_"):e.toastr.warning(i.a.MSJ_ERROR_EXPORTAR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoInvProductoTipoComboTO.length>0)(a=this.listadoInvProductoTipoComboTO.slice()).unshift(e),this.listadoInvProductoTipoComboTO=a,this.seleccionarFila(0);break;case"U":var o=this.listadoInvProductoTipoComboTO.findIndex(function(t){return t.tipCodigo===e.tipCodigo});(a=this.listadoInvProductoTipoComboTO.slice())[o]=e,this.listadoInvProductoTipoComboTO=a,this.seleccionarFila(o);break;case"D":var a;o=this.listadoInvProductoTipoComboTO.findIndex(function(t){return t.tipCodigo===e.tipCodigo});(a=this.listadoInvProductoTipoComboTO.slice()).splice(o,1),this.listadoInvProductoTipoComboTO=a,this.listadoInvProductoTipoComboTO.length>0&&this.seleccionarFila(0===o?0:o-1)}this.activar=!0},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.tipoService.generarColumnas(this.esModal),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:g.a,toolTip:b.a,inputEstado:O.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.tipoSeleccionado=t?t.data:null},e.prototype.filaSeleccionar=function(){this.enviarItem(this.tipoSeleccionado)},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.tipoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},I([Object(a.Input)(),E("design:type",l.a)],e.prototype,"empresaModal",void 0),I([Object(a.ViewChild)("menuOpciones"),E("design:type",f.ContextMenu)],e.prototype,"menuOpciones",void 0),e=I([Object(a.Component)({selector:"app-producto-tipo",template:o("wFx/"),styles:[o("T0hF")]}),E("design:paramtypes",[u.ActivatedRoute,d.a,r.a,n.b,s.a,A.a,c.a,p.HotkeysService,h.a])],e)}()},KE7K:function(e,t){e.exports=""},KRTG:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.obtenerEtiquetas=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/traerEtiquetas",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerEtiquetas(e.extraInfo):(t.despuesDeObtenerEtiquetas(null),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[i.a,r.b,n.a])],e)}()},KgXW:function(e,t){e.exports=""},Kqy8:function(e,t,o){"use strict";var a=o("CcnG"),i=o("8fiX"),r=o("zkCp"),n=o("EnEm"),s=o("ydE8"),c=o("iQoG"),l=o("yccp"),d=o("mwBN"),p=function(){function e(e){this.ccCodigo="",this.ccDetalle="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.ccCodigo=e.pcCodigo?e.pcCodigo:this.ccCodigo,this.ccDetalle=e.pcDetalle?e.pcDetalle:this.ccDetalle},e}(),u=o("SZbH"),h=o("nR5P"),m=o("z5Y/"),C=o("CEfs"),v=o("ZYCi"),A=o("eUd/");o.d(t,"a",function(){return b});var f=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,o,a,r,c,l,u){this.clienteCategoriaService=e,this.filasService=t,this.atajoService=o,this.api=a,this.toastr=r,this.utilService=c,this.activeModal=l,this.route=u,this.esModal=!1,this.empresaSeleccionada=new i.a,this.listaEmpresas=Array(),this.invClienteCategoriaTO=new s.a,this.vistaFormulario=!1,this.accion=null,this.listaIncClienteCategoriaComboListado=Array(),this.tipoContribuyenteSeleccionado=new p,this.tipoContribuyenteNuevoSeleccionado=new p,this.isScreamMd=!0,this.filtroGlobal="",this.filasTiempo=new n.a,this.columnDefs=[],this.columnDefsSelected=[],this.constantes=d.a,this.frmTitulo=d.a.TITULO_FILTROS,this.classTitulo=d.a.ICON_FILTRAR,this.inicializarAtajos()}return e.prototype.ngOnInit=function(){this.activar=!0,this.empresaModal?(this.esModal=!0,this.listaEmpresas.push(this.empresaModal),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),d.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSeleccionada(),this.buscarTipoContribuyente()):(this.listaEmpresas=this.route.snapshot.data.vendedor,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),d.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSeleccionada())),this.iniciarAgGrid(),this.isScreamMd=!(window.innerWidth<=576)},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new l.Hotkey(d.a.ATAJO_ESC,function(){return e.cerrarTipoContribuyente(),!1})),this.atajoService.add(new l.Hotkey(d.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscarTipoContribuyente");return t&&t.click(),!1})),this.atajoService.add(new l.Hotkey(d.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirVendedor");return t&&t.click(),!1})),this.atajoService.add(new l.Hotkey(d.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarVendedor");return t&&t.click(),!1})),this.atajoService.add(new l.Hotkey(d.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevoTipoContribuyente");return t&&t.click(),!1})),this.atajoService.add(new l.Hotkey(d.a.ATAJO_EDITAR,function(t){return!e.vistaFormulario&&e.listaIncClienteCategoriaComboListado.length>0&&e.editarTipoContribuyente(e.tipoContribuyenteSeleccionado),!1})),this.atajoService.add(new l.Hotkey(d.a.ATAJO_ELIMINAR,function(t){return!e.vistaFormulario&&e.listaIncClienteCategoriaComboListado.length>0&&e.eliminarTipoContribuyente(e.tipoContribuyenteSeleccionado),!1})),this.atajoService.add(new l.Hotkey(d.a.ATAJO_GUARDAR,function(t){if(e.vistaFormulario){var o=document.getElementById("btnGuardarTipoContribuyente");return o&&o.click(),!1}})),this.atajoService.add(new l.Hotkey(d.a.ATAJO_CANCELAR,function(t){return e.vistaFormulario&&e.resetearFormulario(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){d.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.invClienteCategoriaTO=new s.a,this.limpiarListado(),this.vistaFormulario=!1,this.activar=!0,this.accion=null},e.prototype.buscarTipoContribuyente=function(){this.cargando=!0,this.accion=null,this.limpiarListado();var e={empresa:this.empresaSeleccionada.empCodigo};this.clienteCategoriaService.listarInvClienteCategoriaTO(e,this,d.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvClienteCategoriaTO=function(e){this.listaIncClienteCategoriaComboListado=e||[],this.cargando=!1,0==this.listaIncClienteCategoriaComboListado.length&&this.nuevoTipoContribuyente()},e.prototype.limpiarListado=function(){this.listaIncClienteCategoriaComboListado=[],this.tipoContribuyenteSeleccionado=new p,this.actualizarFilas()},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(d.a.ACCION_EDITAR,this)&&!this.vistaFormulario,o=this.utilService.verificarPermiso(d.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario;this.opciones=[{label:d.a.ACCION_EDITAR,icon:d.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editarTipoContribuyente(e.tipoContribuyenteSeleccionado):null}},{label:d.a.ACCION_ELIMINAR,icon:d.a.ICON_ELIMINAR,disabled:!o,command:function(t){return o?e.eliminarTipoContribuyente(e.tipoContribuyenteSeleccionado):null}}]},e.prototype.nuevoTipoContribuyente=function(){this.utilService.verificarPermiso(d.a.ACCION_CREAR,this,!0)&&(this.cargando=!0,this.accion=d.a.ACCION_CREAR,this.frmTitulo=d.a.TITULO_FORM_NUEVO_TIPO_CONTRIBUYENTE,this.classTitulo=d.a.ICON_CREAR,this.invClienteCategoriaTO=new s.a,this.vistaFormulario=!0,this.cargando=!1,this.activar=!1)},e.prototype.guardarTipoContribuyente=function(e){var t=this;if(this.utilService.verificarPermiso(d.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.clienteCategoriaService.formatearInvClienteCategoria(this.invClienteCategoriaTO,this),i={invClienteCategoriaTO:a,accion:"I"};this.api.post("todocompuWS/inventarioWebController/accionInvClienteCategoria",i,d.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.tipoContribuyenteNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"I"),t.toastr.success(e.operacionMensaje,d.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,d.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.warning(d.a.MSJ_CAMPOS_INVALIDOS,d.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.resetearFormulario=function(){this.activar=!0,this.frmTitulo=d.a.TITULO_FILTROS,this.classTitulo=d.a.ICON_FILTRAR,this.invClienteCategoriaTO=new s.a,this.vistaFormulario=!1,this.accion=null},e.prototype.editarTipoContribuyente=function(e){this.utilService.verificarPermiso(d.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.accion=d.a.ACCION_EDITAR,this.frmTitulo=d.a.TITULO_FORM_EDITAR_TIPO_CONTRIBUYENTE,this.classTitulo=d.a.ICON_EDITAR,this.invClienteCategoriaTO=new s.a(e),this.vistaFormulario=!0,this.cargando=!1,this.activar=!1)},e.prototype.actualizarTipoContribuyente=function(e){var t=this;if(this.utilService.verificarPermiso(d.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.clienteCategoriaService.formatearInvClienteCategoria(this.invClienteCategoriaTO,this),i={invClienteCategoriaTO:a,accion:"M"};this.api.post("todocompuWS/inventarioWebController/accionInvClienteCategoria",i,d.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.tipoContribuyenteNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"U"),t.toastr.success(e.operacionMensaje,d.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,d.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.warning(d.a.MSJ_CAMPOS_INVALIDOS,d.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarTipoContribuyente=function(e){var t=this;if(this.utilService.verificarPermiso(d.a.ACCION_ELIMINAR,this,!0)){var o={title:d.a.MSJ_TITULO_ELIMINAR,texto:d.a.MSJ_PREGUNTA_ELIMINAR+"<br>C\xf3digo: "+e.ccCodigo,type:d.a.SWAL_QUESTION,confirmButtonText:d.a.MSJ_SI_ACEPTAR,cancelButtonText:d.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invClienteCategoriaTO:t.tipoContribuyenteSeleccionado,accion:"E"};t.api.post("todocompuWS/inventarioWebController/accionInvClienteCategoria",a,d.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?(t.refrescarTabla(e,"D"),t.toastr.success(o.operacionMensaje,d.a.TOAST_CORRECTO),0==t.listaIncClienteCategoriaComboListado.length&&t.nuevoTipoContribuyente()):t.toastr.warning(o.operacionMensaje,d.a.TOAST_ADVERTENCIA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}})}},e.prototype.cerrarTipoContribuyente=function(){this.tipoContribuyenteNuevoSeleccionado=this.tipoContribuyenteNuevoSeleccionado&&""==this.tipoContribuyenteNuevoSeleccionado.ccCodigo?null:this.tipoContribuyenteNuevoSeleccionado;var e={listaTipoContribuyente:this.listaIncClienteCategoriaComboListado,tipoContribuyenteSeleccionado:this.tipoContribuyenteNuevoSeleccionado};this.activeModal.close(e)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.clienteCategoriaService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.noDatos=d.a.MSJ_NO_HAY_DATOS},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.gridApi.sizeColumnsToFit(),this.seleccionarFila(0)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.tipoContribuyenteSeleccionado=t?t.data:null},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.tipoContribuyenteSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listaIncClienteCategoriaComboListado.length>0)(a=this.listaIncClienteCategoriaComboListado.slice()).unshift(e),this.listaIncClienteCategoriaComboListado=a,this.seleccionarFila(0);break;case"U":var o=this.listaIncClienteCategoriaComboListado.findIndex(function(t){return t.ccCodigo===e.ccCodigo});(a=this.listaIncClienteCategoriaComboListado.slice())[o]=e,this.listaIncClienteCategoriaComboListado=a,this.seleccionarFila(o);break;case"D":var a;o=this.listaIncClienteCategoriaComboListado.findIndex(function(t){return t.ccCodigo===e.ccCodigo});(a=this.listaIncClienteCategoriaComboListado.slice()).splice(o,1),this.listaIncClienteCategoriaComboListado=a,this.listaIncClienteCategoriaComboListado.length>0&&this.seleccionarFila(0===o?0:o-1)}this.activar=!0},f([Object(a.Input)(),g("design:type",i.a)],e.prototype,"empresaModal",void 0),f([Object(a.Input)(),g("design:type",String)],e.prototype,"razonSocial",void 0),f([Object(a.ViewChild)("menuOpciones"),g("design:type",r.ContextMenu)],e.prototype,"menuOpciones",void 0),e=f([Object(a.Component)({selector:"app-tipo-contribuyente",template:o("7L+h"),styles:[o("+SCY")]}),g("design:paramtypes",[c.a,C.a,l.HotkeysService,m.a,u.b,h.a,A.a,v.ActivatedRoute])],e)}()},L0eQ:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.id=0,this.chqSecuencia=0,this.chqCuentaCodigo="",this.chqCuentaDetalle="",this.chqBeneficiario="",this.chqNumero="",this.chqValor=0,this.chqFechaEmision="",this.chqFechaVencimiento="",this.chqContablePeriodo="",this.chqContableTipo="",this.chqContableNumero="",this.chqContableReferencia="",this.chqOrden=0,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.chqSecuencia=e.chqSecuencia?e.chqSecuencia:this.chqSecuencia,this.chqCuentaCodigo=e.chqCuentaCodigo?e.chqCuentaCodigo:this.chqCuentaCodigo,this.chqCuentaDetalle=e.chqCuentaDetalle?e.chqCuentaDetalle:this.chqCuentaDetalle,this.chqBeneficiario=e.chqBeneficiario?e.chqBeneficiario:this.chqBeneficiario,this.chqNumero=e.chqNumero?e.chqNumero:this.chqNumero,this.chqValor=e.chqValor?e.chqValor:this.chqValor,this.chqFechaEmision=e.chqFechaEmision?e.chqFechaEmision:this.chqFechaEmision,this.chqFechaVencimiento=e.chqFechaVencimiento?e.chqFechaVencimiento:this.chqFechaVencimiento,this.chqContablePeriodo=e.chqContablePeriodo?e.chqContablePeriodo:this.chqContablePeriodo,this.chqContableTipo=e.chqContableTipo?e.chqContableTipo:this.chqContableTipo,this.chqContableNumero=e.chqContableNumero?e.chqContableNumero:this.chqContableNumero,this.chqContableReferencia=e.chqContableReferencia?e.chqContableReferencia:this.chqContableReferencia,this.chqOrden=e.chqOrden?e.chqOrden:this.chqOrden},e}()},LG3P:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.cuentaCodigo=null,this.empCodigo=null,this.cuentaDetalle=null,this.cuentaActivo=!0,this.usrInsertaCuenta="",this.usrFechaInsertaCuenta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.cuentaCodigo=e.cuentaCodigo?e.cuentaCodigo:this.cuentaCodigo,this.empCodigo=e.empCodigo?e.empCodigo:this.empCodigo,this.cuentaDetalle=e.cuentaDetalle?e.cuentaDetalle:this.cuentaDetalle,this.cuentaActivo=e.cuentaActivo?e.cuentaActivo:this.cuentaActivo,this.usrInsertaCuenta=e.usrInsertaCuenta?e.usrInsertaCuenta:this.usrInsertaCuenta,this.usrFechaInsertaCuenta=e.usrFechaInsertaCuenta?e.usrFechaInsertaCuenta:this.usrFechaInsertaCuenta},e}()},LO3C:function(e,t){e.exports='<div class="row" *ngIf="!mostrarKardex">\r\n\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i><b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frm=\'ngForm\' name="frm">\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_BODEGA}}</b>\r\n              &nbsp;\r\n              <a (click)="listarBodegas()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre"\r\n              optionLabel="bodNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [disabled]="vistaFormulario" [maxDate]="fechaHasta"\r\n              [appMaxDate]="fechaHasta"></p-calendar>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n              (ngModelChange)="limpiarResultado()" [required]="true" [disabled]="vistaFormulario" [minDate]="fechaDesde"\r\n              [maxDate]="fechaActual" [appMinDate]="fechaDesde" [appMaxDate]="fechaActual"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button type="button" class="btn btn-sm btn-primary mr-2 " id="btnBuscarSaldoBodegaComprobMonto" (click)="buscarSaldoBodegaComprobacion(frm)">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listadoResultadoSaldo?.length>0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarSaldoBodegaComprobMonto" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_SALDO_BODEGA_COMPROBACION_MONTOS_LISTADO}}</strong>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirSaldoBodegaComprobMonto" (click)="imprimirSaldoBodegaComprobMonto()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarSaldoBodegaComprobMonto" (click)="exportarSaldoBodegaComprobMonto()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirSaldoBodegaComprobMonto" (click)="imprimirSaldoBodegaComprobMonto()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarSaldoBodegaComprobMonto" (click)="exportarSaldoBodegaComprobMonto()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body p-0">\r\n\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--195px--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listadoResultadoSaldo" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (filterChanged)="actualizarFilas()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data; consultarKardex()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<div *ngIf="mostrarKardex && objetoDesdeFuera">\r\n  <app-kardex [objetoDesdeFuera]="objetoDesdeFuera" (cerrarKardex)="cerrarKardex($event)"></app-kardex>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},LOHe:function(e,t){e.exports='<form #frmDistribucion=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <div class="card-body p-1">\r\n    <fieldset>\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_PRODUCTO_INFORMACION}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseProducto"\r\n              aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseProducto">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_PRODUCTO}}</strong>\r\n              </label>\r\n              <input type="text" [appFocus]="true" (keydown)="abrirModalProducto($event)" appUppercase class="form-control form-control-sm text-uppercase mousetrap"\r\n                id="producto" name="producto" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="codigoPrincipal"\r\n                (blur)="validarProducto()" required>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_NOMBRE}}</strong>\r\n              </label>\r\n              <input type="text" appUppercase class="form-control form-control-sm text-uppercase mousetrap" id="proNombre"\r\n                name="proNombre" [(ngModel)]="invProducto.proNombre" disabled>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_MEDIDA}}</strong>\r\n              </label>\r\n              <input type="text" appUppercase class="form-control form-control-sm text-uppercase mousetrap" id="proMedida"\r\n                name="proMedida" [(ngModel)]="invProducto.invProductoMedida.medDetalle" disabled>\r\n            </div>\r\n            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_CANTIDAD}}</strong>\r\n              </label>\r\n              <input type="text" class="form-control form-control-sm text-uppercase mousetrap" id="cantidad" name="cantidad"\r\n                [appAutonumeric]="configAutonumeric" [appAutonumericValue]="cantidad" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                [(ngModel)]="cantidad" (blur)="onSelectionChanged()" required>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n    <div class="card mb-1">\r\n      <div class="card-header">\r\n        <strong>{{constantes.TAG_DETALLE}}</strong>\r\n      </div>\r\n      <div class="card-body m-0 p-0">\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 520px);" class="ag-theme-balham"\r\n          [rowData]="listadoPiscinas" [columnDefs]="columnDefs" [enableSorting]="true" [rowSelection]="rowSelection"\r\n          [enableColResize]="true" [components]="components" [context]="context" (gridReady)="onGridReady($event)"\r\n          [overlayNoRowsTemplate]="noData" [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()"\r\n          (selectionChanged)="onSelectionChanged()" [suppressRowClickSelection]="true">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},LfZo:function(e,t){e.exports=""},LhHt:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i> <b>{{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frm=\'ngForm\' name="frm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_PRODUCTO}}</strong>\r\n            </label>\r\n            <input name="proCodigoPrincipal" id="idProducto" [(ngModel)]="productoSeleccionado.proCodigoPrincipal"\r\n              (ngModelChange)="limpiarResultado();" pattern="{{constantes.PATTERN_CODIGO}}" class="form-control input-sm mousetrap text-uppercase"\r\n              maxlength="500" (keydown)="buscarProducto($event)" (blur)="validarProducto()" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n              appUppercase required>\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" triggers="mouseenter:mouseleave"\r\n              ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}" container="body"></span>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_NOMBRE}}</strong>\r\n            </label>\r\n            <input name="proNombre" [(ngModel)]="productoSeleccionado.proNombre" placeholder="{{constantes.TAG_PRODUCTO_NOMBRE}}"\r\n              class="form-control input-sm mousetrap text-uppercase" readonly disabled>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer text-muted">\r\n        <div class="text-right">\r\n          <button id="btnBuscarSaldoBodegaGeneral" type="button" class="btn btn-sm btn-primary" (click)="listarSaldoBodegaGeneral(frm)">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n\r\n      <div class="card-header p-1">\r\n\r\n        <button id="btnActivarSaldoBodegaGeneral" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n\r\n        <strong>{{constantes.INVENTARIO_SALDO_BODEGA_GENERAL_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarSaldoBodegaGeneral" (click)="exportarSaldoBodegaGeneral()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarSaldoBodegaGeneral" (click)="exportarSaldoBodegaGeneral()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          (gridReady)="onGridReady($event)" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n          (gridSizeChanged)="redimencionarColumnas()">\r\n        </ag-grid-angular>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},M7Ow:function(e,t){e.exports='\x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n<div class="card m-0" [hidden]="!vistaListado" *ngIf="listadoResultado?.length > 0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarOrdenPedido" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="cambiarActivar()"\r\n      type="button">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{constantes.PEDIDOS_LISTADO}}</strong>\r\n    <div class="card-header-actions">\r\n      <div class="btn-group">\r\n        <div class="btn-group mr-1">\r\n          <button id="btnImprimirListado" type="button" class="btn btn-sm btn-primary" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n            container="body" (click)="imprimirListado()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir"\r\n            title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n            [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="imprimirIndividual()">{{constantes.LABEL_IMPRIMIR_INDIVIDUAL}}</a>\r\n          </div>\r\n        </div>\r\n        <button id="btnExportarListado" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n          container="body" (click)="exportar()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n            size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n      [rowData]="listadoResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n      [suppressRowClickSelection]="true" (gridSizeChanged)="redimensionarColumnas()" [rowSelection]="rowSelection"\r\n      [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n      (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n      (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (cellDoubleClicked)="parametrosBusqueda.visualizarConsultaOrdenPedido?consultarOrdenPedidoEvaluando(): consultarOrdenPedido()"\r\n      (cellFocused)="filaFocused($event)">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>\r\n\r\n\x3c!-- ORDEN DE PEDIDO --\x3e\r\n<app-orden-pedido-formulario *ngIf="dataFormularioPedido && !mostrarFormularioAprobarOrden && !mostrarFormularioEjecutarOrden"\r\n  [data]="dataFormularioPedido" [empresaSeleccionada]="empresaSeleccionada" (enviarActivar)="cambiarActivarFormulario($event)"\r\n  (enviarCancelar)="cancelar()" (enviarLista)="operacionEnLista($event)"></app-orden-pedido-formulario>\r\n\r\n\x3c!-- ORDEN DE PEDIDO APROBADA--\x3e\r\n<app-aprobar-orden-pedido-formulario *ngIf="dataFormularioPedido && mostrarFormularioAprobarOrden && !mostrarFormularioEjecutarOrden"\r\n  [data]="dataFormularioPedido" [empresaSeleccionada]="empresaSeleccionada" (enviarActivar)="cambiarActivarFormulario($event)"\r\n  (enviarCancelar)="cancelar()" (enviarLista)="operacionEnLista($event)"></app-aprobar-orden-pedido-formulario>\r\n\r\n\x3c!-- ORDEN DE PEDIDO EJECUTADA --\x3e\r\n<div *ngIf="!mostrarFormularioAprobarOrden && mostrarFormularioEjecutarOrden">\r\n  <app-detalle-pedido-para-orden-compra [hidden]="dataFormularioCompra" [data]="dataFormularioPedido"\r\n    [empresaSeleccionada]="empresaSeleccionada" (enviarActivar)="cambiarActivarFormulario($event)" (enviarAccion)="consultarOrdenCompra($event)"\r\n    (enviarCancelar)="cancelar()" (enviarLista)="operacionEnLista($event)"></app-detalle-pedido-para-orden-compra>\r\n\r\n  <app-formulario-generar-orden-compra *ngIf="dataFormularioCompra" [data]="dataFormularioCompra" [empresaSeleccionada]="empresaSeleccionada"\r\n    (enviarActivar)="cambiarActivarFormulario($event)" (enviarCancelar)="cancelar($event)" (enviarLista)="operacionEnLista($event)"></app-formulario-generar-orden-compra>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>\r\n\r\n<div class="row justify-content-end">\r\n  <a href="" id="excelDownload" #excelDownload></a>\r\n</div>'},M9xU:function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("+JJ7"),l=o("yccp"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o,a){this.api=e,this.utilService=t,this.toastr=o,this.atajoService=a}return e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_CREAR:a=t.listaSisPermisoTO.gruCrear;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:case s.a.ACCION_RESTAURAR:a=t.listaSisPermisoTO.gruModificar;break;case s.a.ACCION_ELIMINAR:a=t.listaSisPermisoTO.gruEliminar;break;case s.a.ACCION_IMPRIMIR:a=t.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.listaSisPermisoTO.gruExportar}return o&&!a&&this.mostrarSwalNoPermiso(),a},e.prototype.definirAtajosDeTeclado=function(e){this.atajoService.add(new l.Hotkey(s.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_CANCELAR,function(e){var t=document.getElementById("btnCancelar");return t&&t.click(),!1}))},e.prototype.autonumeric30=function(){return{decimalPlaces:0,decimalPlacesRawValue:0,decimalPlacesShownOnBlur:0,decimalPlacesShownOnFocus:0,maximumValue:"999",minimumValue:"0"}},e.prototype.autonumeric92=function(){return{decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999.99",minimumValue:"0"}},e.prototype.mostrarSwalNoPermiso=function(){var e={title:s.a.TOAST_INFORMACION,texto:s.a.ERROR_403_TEXTO,type:s.a.SWAL_INFO,confirmButtonText:"<i class='"+s.a.ICON_AGREGAR+"'></i>  "+s.a.LABEL_MAS_INFORMACION,cancelButtonText:s.a.MSJ_ACEPTAR};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&window.open(s.a.ENLACE_MANUAL_USUARIO,"_blank")})},e.prototype.listarEmpleados=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getListaEmpleado",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarEmpleados(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.despuesDeListarEmpleados([]),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarFunEmpleados=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getRhFunListadoEmpleadosTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarFunEmpleados(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.despuesDeListarEmpleados([]),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosParaBusquedaEmpleados=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/obtenerDatosParaBusquedaEmpleados",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaBusquedaEmpleados(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosParaCrudEmpleados=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/obtenerDatosParaCrudEmpleados",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaCrudEmpleados(e.extraInfo):t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getListaEmpleadoLote=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getListaEmpleadoLote",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetListaEmpleadoLote(e.extraInfo):(t.despuesDeGetListaEmpleadoLote(e.extraInfo),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.accionEmpleados=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/accionRhEmpleado",e,o).then(function(e){e&&e.extraInfo?t.despuesDeAccionEmpleados(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarModificarRhEmpleado=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarModificarRhEmpleado",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarModificarRhEmpleado(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.cambiarEstadoRhEmpleado=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/cambiarEstadoRhEmpleado",e,o).then(function(e){e&&e.extraInfo?t.despuesDeCambiarEstadoRhEmpleado(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.eliminarRhEmpleado=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/eliminarRhEmpleado",e,o).then(function(e){e&&e.extraInfo?t.despuesDeEliminarRhEmpleado(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getRhParametros=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getRhParametros",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetRhParametros(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getEmpleadoDescuentosFijos=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getEmpleadoDescuentosFijos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetEmpleadoDescuentosFijos(e.extraInfo):t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerComplementosEmpleado=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/obtenerComplementosEmpleado",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerComplementosEmpleado(e.extraInfo):t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=[];return t.push({headerName:s.a.TAG_IDENTIFICACION,width:150,minWidth:150,valueGetter:function(e){return e.data.rhEmpleadoPK?e.data.rhEmpleadoPK.empId:""}},{headerName:s.a.TAG_APELLIDOS_Y_NOMBRES,width:500,minWidth:500,valueGetter:function(e){return e.data.empApellidos+" "+e.data.empNombres}},{headerName:s.a.TAG_CARGO,width:200,minWidth:100,valueGetter:function(e){return e.data.empCargo}},{headerName:s.a.TAG_CATEGORIA,width:150,minWidth:150,valueGetter:function(e){return e.data.rhCategoria&&e.data.rhCategoria.rhCategoriaPK?e.data.rhCategoria.rhCategoriaPK.catNombre:""}}),e?t.push(this.utilService.getSpanSelect()):t.push({headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"empInactivo",width:115,minWidth:115,cellRendererFramework:c.a,cellClass:"text-md-center"},this.utilService.getColumnaOpciones()),t},e.prototype.generarColumnasConsulta=function(e){var t=[];return t.push({headerName:s.a.TAG_IDENTIFICACION,width:150,minWidth:150,valueGetter:function(e){return e.data.empId}},{headerName:s.a.TAG_APELLIDOS_Y_NOMBRES,width:500,minWidth:500,valueGetter:function(e){return e.data.empApellidos+" "+e.data.empNombres}},{headerName:s.a.TAG_CARGO,width:200,minWidth:200,valueGetter:function(e){return e.data.empCargo}},{headerName:s.a.TAG_CATEGORIA,width:150,minWidth:150,valueGetter:function(e){return e.data.catNombre}}),e?t.push(this.utilService.getSpanSelect()):t.push({headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"empInactivo",width:115,minWidth:115,cellRendererFramework:c.a,cellClass:"text-md-center"}),t},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[i.a,n.a,r.b,l.HotkeysService])],e)}()},MHMZ:function(e,t,o){"use strict";var a=o("CcnG"),i=o("z5Y/"),r=o("nR5P"),n=o("SZbH"),s=o("mwBN"),c=o("Ip0R"),l=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.obtenerAnexoConceptoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getAnexoConceptoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarAnexoConcepto(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.despuesDeListarAnexoConcepto([]),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarAnxConceptoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getListaAnxConceptoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarAnxConceptoTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnasModal=function(){return[{headerName:s.a.TAG_CODIGO,field:"conCodigo",width:100,minWidth:100},{headerName:s.a.TAG_DETALLE,field:"conConcepto",width:150,minWidth:150},{headerName:s.a.TAG_PORCENTAJE,field:"conPorcentaje",width:100,minWidth:100},{headerName:s.a.TAG_INGRESOS+" (%)",field:"conIngresaPorcentaje",width:100,minWidth:100}]},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_CODIGO,field:"conCodigo",width:200,minWidth:200},{headerName:s.a.TAG_CONCEPTO,field:"conConcepto",width:400,minWidth:400},{headerName:s.a.TAG_PORCENTAJE,field:"conPorcentaje",width:200,minWidth:200,valueFormatter:u,cellClass:"text-whitespace text-right"},{headerName:s.a.TAG_FECHA_INICIO,field:"fechaInicio",width:200,minWidth:200},{headerName:s.a.TAG_FECHA_FIN,headerClass:"cell-header-center",field:"fechaFin",width:100,minWidth:100}]},e=l([Object(a.Injectable)({providedIn:"root"}),d("design:paramtypes",[i.a,n.b,r.a])],e)}();function u(e){return new c.DecimalPipe("en-US").transform(e.value,"1.2-2")}var h=o("8fiX"),m=o("CEfs"),C=o("EnEm"),v=o("ZYCi"),A=o("eUd/");o.d(t,"a",function(){return b});var f=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,o,a,i,r){this.activeModal=e,this.route=t,this.toastr=o,this.conceptoRetencion=a,this.filasService=i,this.utilService=r,this.enterKey=0,this.cargando=!1,this.listaResultado=[],this.listaEmpresas=[],this.filasTiempo=new C.a,this.accion=null,this.activar=!1,this.classIcon=s.a.ICON_FILTRAR,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal=""}return e.prototype.ngOnInit=function(){this.constantes=s.a,this.screamXS=window.innerWidth<s.a.WINDOW_WIDTH_XS,this.isModal?this.listarconceptos():(this.listaEmpresas=this.route.snapshot.data.conceptosRetencion,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.iniciarAgGrid())},e.prototype.listarconceptos=function(){this.filtroGlobal="",this.cargando=!0,this.conceptoRetencion.listarAnxConceptoTO(this.parametrosBusqueda,this,s.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarAnxConceptoTO=function(e){this.listaResultado=e,this.iniciarAgGrid(),this.cargando=!1,this.isModal&&1==e.length&&this.activeModal.close(e[0])},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.handleKeyboardEvent=function(e){this.isModal&&13===e.keyCode&&(this.enterKey>0&&this.enviarItem(this.objetoSeleccionado),this.enterKey=this.enterKey+1)},e.prototype.listarConceptoRetencion=function(e){this.filtrarRapido(),e&&e.valid?(this.cargando=!0,this.conceptoRetencion.obtenerAnexoConceptoTO({empresa:s.a.KEY_EMPRESA_SELECT},this,s.a.KEY_EMPRESA_SELECT)):(this.toastr.error(s.a.MSJ_CAMPOS_INVALIDOS,s.a.MSJ_TITULO_INVALIDOS),this.cargando=!1)},e.prototype.despuesDeListarAnexoConcepto=function(e){this.cargando=!1,this.listaResultado=e},e.prototype.cambiarEmpresaSeleccionada=function(){s.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listaResultado=[],this.limpiarResultado()},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.filasService.actualizarFilas("0","0")},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.isModal?this.conceptoRetencion.generarColumnasModal():this.conceptoRetencion.generarColumnas(),this.columnDefsSelected=this.columnDefs,this.rowSelection="single",this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.onResize=function(){this.screamXS=window.innerWidth<s.a.WINDOW_WIDTH_XS},f([Object(a.Input)(),g("design:type",Boolean)],e.prototype,"isModal",void 0),f([Object(a.Input)(),g("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),f([Object(a.Input)(),g("design:type",h.a)],e.prototype,"empresaSeleccionada",void 0),f([Object(a.HostListener)("document:keydown",["$event"]),g("design:type",Function),g("design:paramtypes",[KeyboardEvent]),g("design:returntype",void 0)],e.prototype,"handleKeyboardEvent",null),f([Object(a.HostListener)("window:resize",["$event"]),g("design:type",Function),g("design:paramtypes",[]),g("design:returntype",void 0)],e.prototype,"onResize",null),e=f([Object(a.Component)({selector:"app-conceptos-retencion",template:o("yy+e"),styles:[o("t+mx")]}),g("design:paramtypes",[A.a,v.ActivatedRoute,n.b,p,m.a,r.a])],e)}()},MLhd:function(e,t){e.exports=""},MeKl:function(e,t){e.exports=""},Mk4X:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.id=0,this.cliCodigo="",this.cliTipoId="",this.cliId="",this.cliNombre="",this.cliRazonSocial="",this.cliCategoria="",this.cliProvincia="",this.cliCiudad="",this.cliZona="",this.cliDireccion="",this.cliTelefono="",this.cliCelular="",this.cliEmail="",this.cliObservaciones="",this.cliInactivo=!1,this.cliDiasCredito=null,this.cliLugaresEntrega=null,this.cliGrupoEmpresarialNombre=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.cliCodigo=e.cliCodigo?e.cliCodigo:this.cliCodigo,this.cliTipoId=e.cliTipoId?e.cliTipoId:this.cliTipoId,this.cliId=e.cliId?e.cliId:this.cliId,this.cliNombre=e.cliNombre?e.cliNombre:this.cliNombre,this.cliRazonSocial=e.cliRazonSocial?e.cliRazonSocial:this.cliRazonSocial,this.cliCategoria=e.cliCategoria?e.cliCategoria:this.cliCategoria,this.cliProvincia=e.cliProvincia?e.cliProvincia:this.cliProvincia,this.cliCiudad=e.cliCiudad?e.cliCiudad:this.cliCiudad,this.cliZona=e.cliZona?e.cliZona:this.cliZona,this.cliDireccion=e.cliDireccion?e.cliDireccion:this.cliDireccion,this.cliTelefono=e.cliTelefono?e.cliTelefono:this.cliTelefono,this.cliCelular=e.cliCelular?e.cliCelular:this.cliCelular,this.cliEmail=e.cliEmail?e.cliEmail:this.cliEmail,this.cliObservaciones=e.cliObservaciones?e.cliObservaciones:this.cliObservaciones,this.cliInactivo=e.cliInactivo?e.cliInactivo:this.cliInactivo,this.cliDiasCredito=e.cliDiasCredito?e.cliDiasCredito:this.cliDiasCredito,this.cliLugaresEntrega=e.cliLugaresEntrega?e.cliLugaresEntrega:this.cliLugaresEntrega,this.cliGrupoEmpresarialNombre=e.cliGrupoEmpresarialNombre?e.cliGrupoEmpresarialNombre:this.cliGrupoEmpresarialNombre},e}()},Mwk2:function(e,t,o){"use strict";o.d(t,"a",function(){return p});var a=o("nR5P"),i=o("CcnG"),r=o("SZbH"),n=o("z5Y/"),s=o("mwBN"),c=o("2sJq"),l=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,o){this.utilService=e,this.api=t,this.toastr=o}return e.prototype.obtenerUltimaAutorizacion=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getAnxUltimaAutorizacionTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerUltimaAutorizacion(e.extraInfo):(t.despuesDeObtenerUltimaAutorizacion(null),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO)),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.validarDocumentoRepetido=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/validarNumeroFacturaCompraProveedor",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarDocumentoRepetido(!1):(t.despuesDeValidarDocumentoRepetido(!0),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO)),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.validarChequeRepetido=function(e,t,o){var a=this;this.api.post("todocompuWS/bancoWebController/isExisteChequeAimprimir",e,o).then(function(e){e&&e.extraInfo?(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.despuesDeValidarChequeRepetido(e.extraInfo)):t.despuesDeValidarChequeRepetido(e.extraInfo),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.contabilizarCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/contabilizarComprasTrans",e,o).then(function(e){e&&e.extraInfo?t.despuesDeContabilizarCompra(e):(t.despuesDeContabilizarCompra(null),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO)),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.recontabilizarCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/recontabilizarComprasTrans",e,o).then(function(e){e&&e.extraInfo?t.despuesDeRecontabilizarCompra(e):(t.despuesDeRecontabilizarCompra(null),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO)),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.buscarComprobanteElectronico=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/buscarComprobanteElectronico",e,o).then(function(e){e&&e.extraInfo?t.despuesDeBuscarComprobanteElectronico(e.extraInfo):a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.bodegaFocusAndEditingCell=function(e,t){t.setFocusedCell(e,"bodCodigo"),t.startEditingCell({rowIndex:e,colKey:"bodCodigo"})},e.prototype.productoFocusAndEditingCell=function(e,t){t.setFocusedCell(e,"proCodigoPrincipal"),t.startEditingCell({rowIndex:e,colKey:"proCodigoPrincipal"})},e.prototype.cantidadFocusAndEditingCell=function(e,t){t.setFocusedCell(e,"detCantidad"),t.startEditingCell({rowIndex:e,colKey:"detCantidad"})},e.prototype.fpPorPagar=function(){return{ctaCodigo:"000000000000",fpDetalle:"POR PAGAR",validar:!1}},e.prototype.focus=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.focusedProducto=function(e,t){var o=this;setTimeout(function(){o.productoFocusAndEditingCell(e,t)},50)},e.prototype.focusedBodega=function(e,t){var o=this;setTimeout(function(){o.bodegaFocusAndEditingCell(e,t)},50)},e.prototype.convertirInvListaDetalleComprasTOAInvComprasDetalleTO=function(e){var t=[];return e.forEach(function(e){var o=new c.a;o.detSecuencia=e.secuencial,o.proCodigoPrincipal=e.codigoProducto,o.proCodigoPrincipalCopia=e.codigoProducto,o.bodCodigo=e.codigoBodega,o.bodCodigoCopia=e.codigoBodega,o.detCantidad=e.cantidadProducto,o.detPrecio=e.precioProducto,o.detIce=e.detIce,o.pisNumero=e.codigoCC,o.secCodigo=e.codigoCP,o.parcialProducto=e.cantidadProducto*e.precioProducto,o.medidaDetalle=e.medidaDetalle,o.nombreProducto=e.nombreProducto,o.proEstadoIva=e.gravaIva,o.detPendiente=e.pendiente,t.push(o)}),t},e.prototype.formatearListaQuitarTemporales=function(e){var t=this;return e.forEach(function(e){t.eliminarCamposTemportales(e)}),e},e.prototype.eliminarCamposTemportales=function(e){delete e.bodCodigoCopia,delete e.proCodigoPrincipalCopia,delete e.parcialProducto,delete e.medidaDetalle,delete e.nombreProducto,delete e.listadoPiscinaTO},e.prototype.validarDetalle=function(e){for(var t=0;t<e.length;t++){var o=e[t];if(!o.bodCodigoCopia||!o.proCodigoPrincipalCopia||!o.parcialProducto||o.parcialProducto<=0||!o.detCantidad||o.detCantidad<=0)return!1;this.eliminarCamposTemportales(o)}return!0},e=l([Object(i.Injectable)({providedIn:"root"}),d("design:paramtypes",[a.a,n.a,r.b])],e)}()},NOfB:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.vendEmpresa="",this.vendCodigo="",this.vendNombre="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.vendEmpresa=e.vendEmpresa?e.vendEmpresa:this.vendEmpresa,this.vendCodigo=e.vendCodigo?e.vendCodigo:this.vendCodigo,this.vendNombre=e.vendNombre?e.vendNombre:this.vendNombre,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},NVz6:function(e,t){e.exports='<div *ngIf="listadoEmpleadosLote?.length>0">\r\n  <form #frmDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n    <div class="card-header p-1">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n        title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b> {{titulo}} - {{empresaSeleccionada.empNombre}}</b>\r\n      <div class="card-header-actions" *ngIf="!esContable">\r\n        \x3c!--Sin etiquetas--\x3e\r\n        <div class="btn-group d-lg-none">\r\n          \x3c!--Calcular--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnCalcular" type="button" title="{{constantes.ATAJO_DISTRIBUIR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.TAG_CALCULAR_VALORES}}" (click)="calcularValores()">\r\n              <i class="{{constantes.ICON_CALCULADORA}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"></span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Guardar--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnGuardar" type="button" title="{{constantes.ATAJO_GUARDAR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" (click)="guardar()">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"></span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Cancelar y/o regresar--\x3e\r\n          <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n            (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n            <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n              aria-hidden="true"></i>\r\n          </button>\r\n        </div>\r\n        \x3c!-- Con etiquetas--\x3e\r\n        <div class="btn-group d-none d-lg-block">\r\n          \x3c!--Calcular--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnCalcular" type="button" title="{{constantes.ATAJO_DISTRIBUIR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.TAG_CALCULAR_VALORES}}" (click)="calcularValores()">\r\n              <i class="{{constantes.ICON_CALCULADORA}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.TAG_CALCULAR_VALORES}}</span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Guardar--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnGuardar" type="button" title="{{constantes.ATAJO_GUARDAR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" (click)="guardar()">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Cancelar y/o regresar--\x3e\r\n          <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n            (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n            <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n              aria-hidden="true"></i>\r\n            {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class="card-header-actions" *ngIf="esContable">\r\n        <app-botones-accion [conContable]="conContableCopia" [data]="data" (enviarAccion)="accionesBotones($event)"></app-botones-accion>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="card-body p-0">\r\n      <div class="p-1" *ngIf="esContable">\r\n        <app-contable-cabecera [data]="data" [conContable]="conContableCopia" [tipoSeleccionado]="tipoSeleccionado"\r\n          [empresaSeleccionada]="empresaSeleccionada" (accionFechaValido)="fechaContableValido = $event"></app-contable-cabecera>\r\n      </div>\r\n      <div class="row" *ngIf="!esContable">\r\n        <div class="col-sm-4 col-md-4 pr-0">\r\n          <div class="input-group p-1">\r\n            <input type="text" [(ngModel)]="filtroGlobal" name="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n              style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n            <div class="input-group-append">\r\n              <span class="input-group-text">\r\n                <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-sm-6 col-md-6">\r\n          <div class="input-group p-1">\r\n            <input type="text" [(ngModel)]="observacionesContable" appUppercase name="observacionesContable" class="form-control form-control-sm text-uppercase input-filter mousetrap"\r\n              style="font-family: Arial, FontAwesome;" placeholder="&#xf007; {{constantes.TAG_OBSERVACION_GENERAL}}..."\r\n              size="100">\r\n            <div class="input-group-append">\r\n              <span class="input-group-text">\r\n                <i class="{{constantes.ICON_EDITAR}}"></i>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-sm-2 col-md-2 pl-0">\r\n          <div class="float-right pr-1">\r\n            <p-multiSelect class="ocultar-en-tabla" [options]="columnDefs" [(ngModel)]="columnDefsSelected" name="columnDefsSelected"\r\n              optionLabel="headerName" maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n              defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="p-1">\r\n        <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listadoEmpleadosLote"\r\n          [columnDefs]="columnDefsSelected" [enableSorting]="true" (gridSizeChanged)="redimensionarColumnas()"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [context]="context" (cellEditingStopped)="terminadoEditar($event)"\r\n          [pinnedBottomRowData]="pinnedBottomRowData" [suppressDragLeaveHidesColumns]="true" [suppressClickEdit]=true\r\n          (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (gridReady)="onGridReady($event)" [stopEditingWhenGridLosesFocus]="true" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (filterChanged)="actualizarFilas()" (cellFocused)="filaFocused($event)">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n    <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n  </form>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},NrYH:function(e,t){e.exports=""},OClv:function(e,t){e.exports='<form #frm=\'ngForm\' autocomplete="off" class="card m-0" *ngIf="!mostrarFormularioPagos && mostrarFormularioCompras && !mostrarAccionesContabilidad && !mostrarAccionesProveedor && !mostrarProrrateoCompras && !mostrarRetencionCompras">\r\n  <div class="card-header" style="padding: 0.5rem 0.5rem;">\r\n    <button id="btnActivarCompra" class="btn btn-sm btn-primary" *ngIf="!screamXS" (click)="cambiarEstadoActivar()"\r\n      type="button">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{tituloForm}} - {{empresaSeleccionada?.empNombre}}</b>\r\n    <div class="card-header-actions" *ngIf="!estamosEnVistaImagenes">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirCompra" *ngIf="accion === constantes.ACCION_CONSULTAR && !invCompraTO?.compPendiente && !invCompraTO?.compAnulado"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}"\r\n          (click)="imprimirCompras()">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Imagenes--\x3e\r\n        <button id="btnImagenesCompra" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.TAG_IMAGENES}}"\r\n          (click)="imagenesCompra()">\r\n          <i class="{{constantes.ICON_IMAGENES}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Contable--\x3e\r\n        <button id="btnContableCompra" *ngIf="accion === constantes.ACCION_CONSULTAR && !invCompraTO.compAnulado && !invCompraTO.compPendiente && this.invCompraTO.contNumero"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_VER_CONTABLE}}"\r\n          (click)="verContable()">\r\n          <i class="{{constantes.ICON_VER}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Contabilizar--\x3e\r\n        <button id="btnContabilizarCompra" *ngIf="accion === constantes.ACCION_CONSULTAR && !invCompraTO.compAnulado && !invCompraTO.compPendiente && !this.invCompraTO.contNumero && mostrarBtnContabilizar"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_CONTABILIZAR}}"\r\n          (click)="contabilizarCompra()">\r\n          <i class="{{constantes.ICON_CALCULADORA}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Retencion--\x3e\r\n        <button id="btnRetencionCompra" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_RETENCION}}"\r\n          (click)="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR?consultarRetencion():retencionCompras(frm)"\r\n          *ngIf="invCompraTO.compDocumentoTipo &&\r\n          ((invCompraTO.compDocumentoTipo === constantes.CODIGO_NOTA_CREDITO && invCompraTO.compDocumentoNumero !== \'999-999-999999999\') ||\r\n          (invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_ENTREGA && invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_CREDITO))">\r\n          <i class="{{constantes.ICON_RETENCION}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Guardar y mayorizar--\x3e\r\n        <div class="btn-group" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR">\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnGuardarCompra" (click)="accion ===constantes.ACCION_CREAR?insertarCompra(frm,false):modificarCompra(frm,false)"\r\n            title="{{constantes.ATAJO_GUARDAR}}">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"></span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n            style="margin-right: 3px;">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="accion ===constantes.ACCION_CREAR?insertarCompra(frm,true):modificarCompra(frm,true)">\r\n              {{constantes.TAG_PENDIENTE}}</a>\r\n          </div>\r\n        </div>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnAnularCompra" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anularCompra()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Restaurar--\x3e\r\n        <button id="btnRestaurarCompra" *ngIf="accion === constantes.ACCION_RESTAURAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_RESTAURAR}}" (click)="restaurarCompra()">\r\n          <i class="{{constantes.ICON_OK}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarCompra"\r\n          ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n          (click)="cancelar()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirCompra" *ngIf="accion === constantes.ACCION_CONSULTAR && !invCompraTO?.compPendiente && !invCompraTO?.compAnulado"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}"\r\n          (click)="imprimirCompra()">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_IMPRIMIR}}</span>\r\n        </button>\r\n        \x3c!--Imagenes--\x3e\r\n        <button id="btnImagenesCompra" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.TAG_IMAGENES}}"\r\n          (click)="imagenesCompra()">\r\n          <i class="{{constantes.ICON_IMAGENES}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.TAG_IMAGENES}}</span>\r\n        </button>\r\n        \x3c!--Contable--\x3e\r\n        <button id="btnContableCompra" *ngIf="accion === constantes.ACCION_CONSULTAR && !invCompraTO.compAnulado && !invCompraTO.compPendiente && this.invCompraTO.contNumero"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_VER_CONTABLE}}"\r\n          (click)="verContable()">\r\n          <i class="{{constantes.ICON_VER}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_CONTABLE}}</span>\r\n        </button>\r\n        \x3c!--Contabilizar--\x3e\r\n        <button id="btnContabilizarCompra" *ngIf="accion === constantes.ACCION_CONSULTAR && !invCompraTO.compAnulado && !invCompraTO.compPendiente && !this.invCompraTO.contNumero && mostrarBtnContabilizar"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_CONTABILIZAR}}"\r\n          (click)="contabilizarCompra()">\r\n          <i class="{{constantes.ICON_CALCULADORA}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_CONTABILIZAR}}</span>\r\n        </button>\r\n        \x3c!--Retencion--\x3e\r\n        <button id="btnRetencionCompra" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_RETENCION}}"\r\n          (click)="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR?consultarRetencion():retencionCompras(frm)"\r\n          *ngIf="invCompraTO.compDocumentoTipo &&\r\n          ((invCompraTO.compDocumentoTipo === constantes.CODIGO_NOTA_CREDITO && invCompraTO.compDocumentoNumero !== \'999-999-999999999\') ||\r\n          (invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_ENTREGA && invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_CREDITO))">\r\n          <i class="{{constantes.ICON_RETENCION}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.TAG_RETENCION}}</span>\r\n        </button>\r\n        \x3c!--Guardar y mayorizar--\x3e\r\n        <div class="btn-group" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR">\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnGuardarCompra" (click)="accion ===constantes.ACCION_CREAR?insertarCompra(frm,false):modificarCompra(frm,false)"\r\n            title="{{constantes.ATAJO_GUARDAR}}">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n            style="margin-right: 3px;">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="accion ===constantes.ACCION_CREAR?insertarCompra(frm,true):modificarCompra(frm,true)">\r\n              {{constantes.TAG_PENDIENTE}}</a>\r\n          </div>\r\n        </div>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnAnularCompra" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anularCompra()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n        </button>\r\n        \x3c!--Restaurar--\x3e\r\n        <button id="btnRestaurarCompra" *ngIf="accion === constantes.ACCION_RESTAURAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_RESTAURAR}}" (click)="restaurarCompra()">\r\n          <i class="{{constantes.ICON_OK}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_RESTAURAR}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarCompra"\r\n          (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class="card-header-actions" *ngIf="estamosEnVistaImagenes">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarImagenes"\r\n          ngbTooltip="{{constantes.LABEL_REGRESAR}}" (click)="estamosEnVistaImagenes = false;">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarImagenes"\r\n          (click)="estamosEnVistaImagenes = false;" ngbTooltip="{{constantes.LABEL_REGRESAR}}">\r\n          <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n          {{constantes.LABEL_REGRESAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body p-1" [hidden]="estamosEnVistaImagenes">\r\n    <fieldset [disabled]="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR">\r\n      \x3c!--Datos de la cabecera de la venta--\x3e\r\n      <div class="card mb-0" [ngClass]="{\'card-accent-warning\': invCompraTO?.compAnulado, \'card-accent-success\': invCompraTO?.compRevisado, \'card-accent-danger\': invCompraTO?.compPendiente && accion !== constantes.ACCION_CREAR}">\r\n        <div class="row pl-3 pr-3">\r\n          \x3c!--DATOS DE LA COMPRA--\x3e\r\n          <div class="col-md-3 col-sm-12 p-0" style="border-right: 1px solid #c8ced3;">\r\n            <div class="card-header">\r\n              <b>{{constantes.TAG_DATOS_PROVEEDOR}}</b>\r\n            </div>\r\n            <div class="card-body p-2">\r\n              <div class="row" *ngIf="!proveedor.provCodigo || \r\n              ((accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR) && !importarXmlEstado && !comprobarRetencionAutorizadaProcesamiento)">\r\n                <div class="form-group-sm col-lg-12">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_CODIGO}} </strong>\r\n                  </label>\r\n                  <input [appFocus]="true" id="provCodigo" name="provCodigo" [(ngModel)]="invCompraTO.provCodigo"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n                    maxlength="500" (keydown)="buscarProveedor($event)" (blur)="validarProveedor()" [ngbTooltip]="proveedor.provRazonSocial ? proveedor.provRazonSocial : null"\r\n                    appUppercase required>\r\n                </div>\r\n              </div>\r\n              <div class="row" *ngIf="proveedor.provCodigo">\r\n                <div class="form-group-sm col-lg-12" *ngIf="(accion === constantes.ACCION_CONSULTAR \r\n                || accion === constantes.ACCION_ANULAR \r\n                || accion === constantes.ACCION_RESTAURAR \r\n                || (accion === constantes.ACCION_MAYORIZAR && comprobarRetencionAutorizadaProcesamiento) \r\n                || ((accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR) && importarXmlEstado))">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_CODIGO}}: </strong> {{proveedor?.provCodigo}}\r\n                  </label>\r\n                </div>\r\n\r\n                <div class="form-group-sm col-lg-12">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_RUC_ID}}: </strong> {{proveedor?.provId}}\r\n                  </label>\r\n                </div>\r\n\r\n                <div class="form-group-sm col-lg-12">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_NOMBRE}}: </strong> {{proveedor?.provRazonSocial}}\r\n                  </label>\r\n                </div>\r\n                <div class="form-group-sm col-lg-12">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_DIRECCION}}: </strong> {{proveedor?.provDireccion}}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-9 col-sm-12 p-0">\r\n            <div class="card-header">\r\n              <b>{{constantes.TAG_DATOS_GENERALES}}</b>\r\n            </div>\r\n            <div class="card-body p-2">\r\n              <div class="row">\r\n                \x3c!--Fecha emision--\x3e\r\n                <div class="form-group form-group-sm col-lg-3">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_FECHA_EMISION}} </strong>\r\n                  </label>\r\n                  <p-calendar inputId="fechaEmision" class="mousetrap calendar" name="fechaEmision" [(ngModel)]="fechaEmision"\r\n                    [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true"\r\n                    (ngModelChange)="validarFechaVencimiento()" [minDate]="fechaInicioMesGuardado" [appMinDate]="fechaInicioMesGuardado"\r\n                    placeholder="DD/MM/YYYY" [disabled]="((accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR) && importarXmlEstado) || \r\n                     (accion === constantes.ACCION_MAYORIZAR && comprobarRetencionAutorizadaProcesamiento)"\r\n                    [maxDate]="fechaFinMesGuardado" [appMaxDate]="fechaFinMesGuardado" [inputStyleClass]="periodoAbierto == false ? \'has-error height-26\' : \'height-26\' "></p-calendar>\r\n                </div>\r\n                \x3c!--Motivo--\x3e\r\n                <div class="form-group form-group-sm col-lg-3 has-feedback">\r\n                  <label style="margin-bottom: 3px;">\r\n                    <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n                  </label>\r\n                  &nbsp;\r\n                  <a (click)="listarMotivos()" *ngIf="accion === constantes.ACCION_CREAR">\r\n                    <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                      container="body"></span>\r\n                  </a>\r\n                  <label class="form-control form-control-sm text-uppercase label-input" *ngIf="accion !== constantes.ACCION_CREAR">{{motivoSeleccionado?.cmDetalle}}\r\n                  </label>\r\n                  <select class="form-control form-control-sm mousetrap color-no-disabled" name="cboMotivo" [(ngModel)]="motivoSeleccionado"\r\n                    [compareWith]="inicializarMotivos" required *ngIf="accion === constantes.ACCION_CREAR">\r\n                    <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="motivo" *ngFor="let motivo of listadoMotivos"> {{motivo.cmDetalle}}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n                \x3c!--Documento--\x3e\r\n                <div class="form-group form-group-sm col-lg-3">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_DOCUMENTO}}</b>\r\n                  </label>\r\n                  <select id="documento" class="form-control form-control-sm mousetrap color-no-disabled" name="documento"\r\n                    [(ngModel)]="invCompraTO.compDocumentoTipo" required [disabled]="!invCompraTO.provCodigo || \r\n                    (accion === constantes.ACCION_MAYORIZAR && comprobarRetencionAutorizadaProcesamiento) ||\r\n                    ((accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR) && importarXmlEstado)"\r\n                    (ngModelChange)="validarSiEsNotaEntrega()">\r\n                    <option [ngValue]="doc.tcCodigo" *ngFor="let doc of listaDocumentos">\r\n                      {{doc.tcDescripcion}} ({{doc?.tcCodigo}})\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n\r\n                \x3c!--observaciones--\x3e\r\n                <div class="form-group form-group-sm col-lg-3">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_OBSERVACIONES}} </strong>\r\n                  </label>\r\n                  <textarea class="form-control form-control-sm text-uppercase mousetrap" appUppercase type="text" cols="2"\r\n                    [(ngModel)]="invCompraTO.compObservaciones" placeholder="{{constantes.TAG_OBSERVACIONES}}" name="observacion"></textarea>\r\n                </div>\r\n\r\n                \x3c!--Fecha autoriz--\x3e\r\n                <div class="form-group form-group-sm col-lg-3" *ngIf="invCompraTO.compDocumentoTipo &&\r\n                ((invCompraTO.compDocumentoTipo === constantes.CODIGO_NOTA_CREDITO && invCompraTO.compDocumentoNumero !== \'999-999-999999999\') ||\r\n                (invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_ENTREGA && invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_CREDITO))">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_FECHA_AUTORIZACION}} </strong>\r\n                  </label>\r\n                  <p-calendar class="mousetrap calendar" name="fechaAutorizacion" [(ngModel)]="fechaAutorizacion"\r\n                    [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true"\r\n                    (ngModelChange)="validacionFechas();" placeholder="DD/MM/YYYY" [inputStyleClass]="fechaAutorizacionValida == false?\'has-error height-26\':\'height-26\'"\r\n                    [disabled]="(accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR) && importarXmlEstado"></p-calendar>\r\n                </div>\r\n                \x3c!--Fecha caduca--\x3e\r\n                <div class="form-group form-group-sm col-lg-3" *ngIf="invCompraTO.compDocumentoTipo &&\r\n                ((invCompraTO.compDocumentoTipo === constantes.CODIGO_NOTA_CREDITO && invCompraTO.compDocumentoNumero !== \'999-999-999999999\') ||\r\n                (invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_ENTREGA && invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_CREDITO))">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_FECHA_CADUCA}} </strong>\r\n                  </label>\r\n                  <p-calendar class="mousetrap calendar" name="fechaCaduca" [(ngModel)]="fechaCaduca" [showIcon]="true"\r\n                    [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true" (ngModelChange)="validacionFechas()"\r\n                    placeholder="DD/MM/YYYY" [inputStyleClass]=" fechaCaducaValida ==false?\'has-error height-26\':\'height-26\'"\r\n                    [disabled]="(accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR) && importarXmlEstado"></p-calendar>\r\n                </div>\r\n                \x3c!--Numero--\x3e\r\n                <div class="form-group form-group-sm col-lg-3" *ngIf="invCompraTO.compDocumentoTipo && invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_ENTREGA">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_NUMERO}}</strong>\r\n                  </label>\r\n                  <p-inputMask class="mousetrap mascara" name="numeroDoc" [(ngModel)]="invCompraTO.compDocumentoNumero"\r\n                    mask="999-999-999999999" required (onBlur)="invCompraTO.compDocumentoNumero ? validarNumeroDocumento() : null"\r\n                    [ngClass]="{\'has-error\': !numeroDocValido000 || numeroRepetido}" [disabled]="invCompraTO.compDocumentoTipo === constantes.CODIGO_COMPROBANTE_PAGOS \r\n                    || ((accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR) && importarXmlEstado)\r\n                    || (accion === constantes.ACCION_MAYORIZAR && comprobarRetencionAutorizadaProcesamiento)"></p-inputMask>\r\n                </div>\r\n                \x3c!--Nro autorizacion--\x3e\r\n                <div class="form-group form-group-sm col-lg-3" *ngIf="invCompraTO.compDocumentoTipo &&\r\n                ((invCompraTO.compDocumentoTipo === constantes.CODIGO_NOTA_CREDITO && invCompraTO.compDocumentoNumero !== \'999-999-999999999\') ||\r\n                (invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_ENTREGA && invCompraTO.compDocumentoTipo !== constantes.CODIGO_NOTA_CREDITO))">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_NUMERO_AUTORIZACION}} </strong>\r\n                  </label>\r\n                  <input class="form-control form-control-sm mousetrap text-uppercase " name="nroAutorizacion"\r\n                    maxlength="49" onkeypress=\'return event.charCode >= 48 && event.charCode <= 57\' type="text"\r\n                    placeholder="{{constantes.TAG_SIN_DETALLE}}" [(ngModel)]="anxCompraTO.compAutorizacion" (ngModelChange)="validarNumeroAutorizacionRetencion();validacionFechas()"\r\n                    id="detalle" required [ngClass]="{\'has-error\': !numeroAutorizacionValidaLongitud}" [disabled]="(accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR) && importarXmlEstado">\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n    \x3c!--Datos del detalle de la cabecera--\x3e\r\n    <div class="card mb-1">\r\n      <div class="card-header">\r\n        <strong>{{constantes.TAG_DETALLE_COMPRA}}</strong>\r\n      </div>\r\n      <div class="card-body m-0 p-0" *ngIf="listInvComprasDetalleTO?.length>0">\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 590px); min-height: 95px" class="ag-theme-balham"\r\n          [rowData]="listInvComprasDetalleTO" [columnDefs]="columnDefs" [enableSorting]="true" [rowSelection]="rowSelection"\r\n          [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n          [rowDragManaged]="true" (rowDragEnd)="refrescarOrdenDetalle()" [animateRows]="true" [suppressClickEdit]=true\r\n          (gridReady)="onGridReady($event)" (rowSelected)="detalleSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (filterChanged)="actualizarFilas()" (contextmenu)="accion !== constantes.ACCION_CONSULTAR?  $event.preventDefault():null"\r\n          (cellContextMenu)="accion !== constantes.ACCION_CONSULTAR? mostrarContextMenu($event.data,$event.rowIndex, $event.event):null"\r\n          (cellEditingStopped)="alCambiarValorDeCelda($event)" [stopEditingWhenGridLosesFocus]="true"\r\n          [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n    \x3c!--TAB PANEL PARA OPCIONES DE PECIOS, INFORMAC. ADICIONAL Y FORMA DE PAGO--\x3e\r\n    <div class="card mb-1">\r\n      <div class="row">\r\n        <div class="col-lg-7 col-md-7">\r\n          <ul class="nav nav-tabs nav-justified" role="tablist" id="ulOpciones" style="box-shadow: inset 0 -1px 0 #ddd;">\r\n            <li role="presentation" class="nav-item">\r\n              <a class="nav-link active p-1" href data-target="#formaPago" aria-controls="formaPago" role="tab"\r\n                data-toggle="tab">\r\n                <b>{{constantes.INVENTARIO_FORMA_PAGO}}</b>\r\n              </a>\r\n            </li>\r\n            <li role="presentation" class="nav-item">\r\n              <a class="nav-link p-1" href data-target="#otros" aria-controls="otros" role="tab" data-toggle="tab">\r\n                <b>{{constantes.TAG_OTROS}}</b>\r\n              </a>\r\n            </li>\r\n            <li role="presentation" class="nav-item" *ngIf="listaInvListadoPagosTO.length>0">\r\n              <a class="nav-link p-1" href data-target="#pagos" aria-controls="pagos" role="tab" data-toggle="tab">\r\n                <b>{{constantes.TAG_PAGOS}}</b>\r\n              </a>\r\n            </li>\r\n          </ul>\r\n          <div class="tab-content panel" style="border-top-width: 0px;">\r\n\r\n            <div role="tabpanel" class="tab-pane fade show active" id="formaPago">\r\n              <div class="panel-default">\r\n                <div class="panel-body">\r\n                  <fieldset [disabled]="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR">\r\n                    <div class="row">\r\n\r\n                      <div class="form-group form-group-sm col-lg-4">\r\n                        <label>\r\n                          <strong>{{constantes.TAG_FECHA_VENCIMIENTO}} </strong>\r\n                        </label>\r\n                        <p-calendar class="mousetrap calendar" name="compFechaVencimiento" [(ngModel)]="fechaVencimiento"\r\n                          [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true"\r\n                          placeholder="DD/MM/YYYY" [minDate]="fechaEmision" [appMinDate]="fechaEmision"></p-calendar>\r\n                      </div>\r\n\r\n                      <div class="form-group form-group-sm col-md-4 has-feedback">\r\n                        <label>\r\n                          <strong>{{constantes.TAG_TIPO}}</strong>\r\n                          &nbsp;\r\n                          <a (click)="listarFormaPago()" *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR">\r\n                            <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_FORMAS_PAGO}}"\r\n                              container="body"></span>\r\n                          </a>\r\n                        </label>\r\n                        <select class="form-control form-control-sm mousetrap" name="formaPago" [(ngModel)]="formaPagoSeleccionada"\r\n                          required (ngModelChange)="validarChequeRepetido();" [compareWith]="inicializarTipos">\r\n                          <option disabled selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                          <option [ngValue]="fp" *ngFor="let fp of listaFormaPago"> {{fp?.fpDetalle}}</option>\r\n                        </select>\r\n                      </div>\r\n\r\n                      <div class="form-group form-group-sm col-md-4">\r\n                        <label>\r\n                          <strong>{{constantes.TAG_REFERENCIA}}</strong>\r\n                        </label>\r\n                        <input class="form-control form-control-sm mousetrap text-uppercase " name="referencia"\r\n                          maxlength="30" type="text" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="invCompraTO.compDocumentoFormaPago"\r\n                          id="detalle" [ngClass]="{\'has-error\': chequeRepetido}" (blur)="validarChequeRepetido()">\r\n                      </div>\r\n\r\n                    </div>\r\n                  </fieldset>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div role="tabpanel" class="tab-pane fade" id="otros">\r\n              <fieldset [disabled]="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR">\r\n                <div class="row">\r\n                  <div class="col-lg-4">\r\n                    <button type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_DISTRIBUIR_DESCUENTO}}"\r\n                      (click)="distribuirDescuento()">\r\n                      <i class="{{constantes.ICON_DISTRIBUIR}}" aria-hidden="true"></i>\r\n                      <span class="d-none d-md-inline"> {{constantes.ACCION_DISTRIBUIR_DESCUENTO}}</span>\r\n                    </button>\r\n                  </div>\r\n                  <div class="col-lg-4">\r\n                    <button type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_DISTRIBUIR_COSTO}}"\r\n                      (click)="distrubuirCosto()">\r\n                      <i class="{{constantes.ICON_DISTRIBUIR}}" aria-hidden="true"></i>\r\n                      <span class="d-none d-md-inline"> {{constantes.ACCION_DISTRIBUIR_COSTO}}</span>\r\n                    </button>\r\n                  </div>\r\n                  <div class="col-lg-4" *ngIf="accion !== constantes.ACCION_CREAR">\r\n                    <input [(ngModel)]="invCompraTO.compElectronica" class="form-check-input" name="compElectronica"\r\n                      type="checkbox" [disabled]="!importarXmlEstado"> {{constantes.TAG_IMPORTAR_XML}}\r\n                  </div>\r\n                </div>\r\n              </fieldset>\r\n            </div>\r\n\r\n            <div role="tabpanel" class="tab-pane fade" id="pagos" *ngIf="listaInvListadoPagosTO.length>0">\r\n              <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true" [value]="listaInvListadoPagosTO">\r\n                <ng-template pTemplate="header">\r\n                  <tr class="text-center">\r\n                    <th style="width:100px" pResizableColumn>{{constantes.TAG_PERIODO}}</th>\r\n                    <th style="width:80px" pResizableColumn>{{constantes.TAG_MOTIVO}}</th>\r\n                    <th style="width:80px" pResizableColumn>{{constantes.TAG_NUMERO}}</th>\r\n                    <th style="width:80px" pResizableColumn>{{constantes.TAG_FECHA}}</th>\r\n                    <th style="width:80px" pResizableColumn>{{constantes.TAG_VALOR}}</th>\r\n                    <th style="width:80px" pResizableColumn></th>\r\n                  </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate="body" let-item>\r\n                  <tr>\r\n                    <td style="width:100px">{{item.pagPeriodo}}</td>\r\n                    <td style="width:80px">{{item.pagTipo}}</td>\r\n                    <td style="width:80px">{{item.pagNumero}}</td>\r\n                    <td style="width:80px">{{item.pagFecha}}</td>\r\n                    <td style="width:80px" class="text-right">{{item.pagValor}}</td>\r\n                    <td style="width:80px" class="text-center">\r\n                      <button type="button" class="btn btn-sm btn-primary" (click)="consultarPagos(item)"><i class="{{constantes.ICON_CONSULTAR}}"\r\n                          aria-hidden="true"></i></button>\r\n                    </td>\r\n                  </tr>\r\n                </ng-template>\r\n              </p-table>\r\n\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--TOTALES--\x3e\r\n        <div class="col-md-5 col-lg-5">\r\n          <br>\r\n          <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n            <ng-template pTemplate="colgroup" *ngIf="!screamXS">\r\n              <colgroup>\r\n                <col [style.width]="\'100px\'">\r\n                <col [style.width]="\'80px\'">\r\n                <col [style.width]="\'80px\'">\r\n              </colgroup>\r\n            </ng-template>\r\n            <ng-template pTemplate="header">\r\n              <tr class="text-center">\r\n                <th style="width:100px" pResizableColumn></th>\r\n                <th style="width:80px" pResizableColumn>0%</th>\r\n                <th style="width:80px" pResizableColumn>{{invCompraTO.compIvaVigente}}%</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="footer">\r\n              <tr>\r\n                <td class="totales-tabla">{{constantes.TAG_SUBTOTAL}}</td>\r\n                <td>\r\n                  <span class="f-r">{{invCompraTO.compBase0 | number : \'1.2-2\'}}</span>\r\n                </td>\r\n                <td>\r\n                  <span class="f-r">{{invCompraTO.compBaseImponible | number : \'1.2-2\'}}</span>\r\n                </td>\r\n              </tr>\r\n              \x3c!--Ice--\x3e\r\n              <tr>\r\n                <td class="totales-tabla">{{constantes.TAG_ICE}}</td>\r\n                <td></td>\r\n                <td>\r\n                  <span class="f-r">{{invCompraTO.compIce| number : \'1.2-2\'}}</span>\r\n                </td>\r\n              </tr>\r\n              \x3c!--Iva--\x3e\r\n              <tr>\r\n                <td class="totales-tabla">{{constantes.TAG_IVA}}</td>\r\n                <td></td>\r\n                <td>\r\n                  <span class="f-r">{{invCompraTO.compMontoIva| number : \'1.2-2\'}}</span>\r\n                </td>\r\n              </tr>\r\n              \x3c!--Otrs imp--\x3e\r\n              <tr>\r\n                <td class="totales-tabla">{{constantes.TAG_OTROS_IMPUESTOS}}</td>\r\n                <td></td>\r\n                <td>\r\n                  <span class="f-r">{{invCompraTO.compOtrosImpuestos| number : \'1.2-2\'}}</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="summary" style="height: 90px;">\r\n              <h1>{{invCompraTO.compTotal| number : \'1.2-2\'}}</h1>\r\n            </ng-template>\r\n          </p-table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-1" [hidden]="!estamosEnVistaImagenes">\r\n    <app-subir-imagenes></app-subir-imagenes>\r\n  </div>\r\n</form>\r\n\r\n\r\n\x3c!--Pagos--\x3e\r\n<div *ngIf="mostrarFormularioPagos">\r\n  <app-pago-formulario [empresaSeleccionada]="empresaSeleccionada" [parametrosFormulario]="parametrosFormularioPagos"\r\n    (enviarAccion)="ejecutarAccion($event)"></app-pago-formulario>\r\n</div>\r\n\x3c!--Proveedor--\x3e\r\n<div *ngIf="mostrarAccionesProveedor">\r\n  <app-proveedor-formulario [parametros]="parametrosFormulario" (cerrarFormularioProveedor)="cerrarFormularioProveedor($event)"\r\n    (activarEstado)="cambiarEstadoActivar($event)"></app-proveedor-formulario>\r\n</div>\r\n\x3c!--Prorrateo--\x3e\r\n<div *ngIf="mostrarProrrateoCompras">\r\n  <app-prorrateo-compras [empresaSeleccionada]="empresaSeleccionada" [activar]="activar" [fecha]="fechaEmision"\r\n    (accionProrrateo)="accionProrrateo($event)"></app-prorrateo-compras>\r\n</div>\r\n\x3c!--Retencion compras--\x3e\r\n<div *ngIf="parametrosRetencion">\r\n  <app-retencion-compras [empresaSeleccionada]="empresaSeleccionada" [fechaCompra]="fechaEmision"\r\n    [comprobarRetencionAutorizadaProcesamiento]="comprobarRetencionAutorizadaProcesamiento" [fechaAutorizacion]="fechaAutorizacion"\r\n    [fechaCaduca]="fechaCaduca" [activar]="activar" [parametrosRetencion]="parametrosRetencion" (enviarAccion)="accionRetencion($event)"\r\n    (mostrarRetencionCompras)="mostrarRetencionCompras=$event"></app-retencion-compras>\r\n</div>\r\n\x3c!--Contable--\x3e\r\n<div *ngIf="mostrarAccionesContabilidad">\r\n  <app-contable-formulario [data]="parametrosContabilidad" (cargandoEstado)="cargando = $event"\r\n    (cerrarContabilidadAcciones)="cerrarContabilidadAcciones($event)" (activarEstado)="cambiarEstadoActivarContabilidad($event)"></app-contable-formulario>\r\n</div>\r\n\r\n<p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},OQWk:function(e,t){e.exports='<div *ngIf="vistaFormulario">\r\n  \x3c!-- FORMULARIO DE ORDEN DE PEDIDO --\x3e\r\n  <div class="card m-0">\r\n    <div class="card-header p-1">\r\n      <button id="btnActivarFormOrdenPedido" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="cambiarActivar()"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <strong>{{ frmTitulo }}\r\n        <strong *ngIf="accion!=constantes.ACCION_CREAR"> No. {{invPedidos.invPedidosPK.pedNumero}}</strong>\r\n        <span class="text-primary">: {{ empresaSeleccionada.empNombre }}</span>\r\n      </strong>\r\n      <div class="card-header-actions">\r\n        \x3c!--  BOTONES   --\x3e\r\n        <div class="btn-group">\r\n          \x3c!-- Aprobador --\x3e\r\n          <button *ngIf="(accion === constantes.ACCION_APROBAR && funcionesUsuario.indexOf(\'Aprobador\')>-1)" type="button"\r\n            class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_APROBAR}}" (click)="actualizarOrdenPedido(frmOrdenPedido, false)">\r\n            <i class="{{constantes.ICON_APROBAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_APROBAR}}</span>\r\n          </button>\r\n          \x3c!-- Desaprobar--\x3e\r\n          <button id="btnDesaprobarOrdenPedido" *ngIf="accion === constantes.ACCION_DESAPROBAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n            placement="top" ngbTooltip="{{constantes.ACCION_DESAPROBAR}}" (click)="desaprobarPedido()">\r\n            <i class="{{constantes.ICON_DESAPROBAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.ACCION_DESAPROBAR}}</span>\r\n          </button>\r\n          \x3c!-- Anular--\x3e\r\n          <button id="btnAnularOrdenPedido" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n            placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anularOrdenPedido()">\r\n            <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n          </button>\r\n          \x3c!--Reporte historial Y exportar--\x3e\r\n          <button id="btnImprimirOrdenPedido" *ngIf="accion === constantes.ACCION_CONSULTAR && !invPedidos.pedAnulado"\r\n            type="button" class="btn btn-sm btn-primary mr-1" (click)="imprimirInvPedidos(false, true)" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" [disabled]="cargando">\r\n            <i class="fa fa-print" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button id="btnExportarOrdenPedido" *ngIf="accion === constantes.ACCION_CONSULTAR && !invPedidos.pedAnulado"\r\n            type="button" class="btn btn-sm btn-primary mr-1" (click)="exportarInvPedidos(true)" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_EXPORTAR}}" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar && !cargando">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n          \x3c!--Cancelar--\x3e\r\n          <button *ngIf="!(accion === constantes.ACCION_CONSULTAR)" type="button" class="btn btn-sm btn-default mr-1"\r\n            (click)="cancelarAccion()" placement="top" ngbTooltip="{{constantes.LABEL_CANCELAR}}" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n          </button>\r\n          <button *ngIf="accion === constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-default mr-1"\r\n            (click)="cancelarAccion()" placement="top" ngbTooltip="{{constantes.LABEL_REGRESAR}}" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="card-body p-1">\r\n\r\n      <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR || accion === constantes.ACCION_ANULAR || accion === constantes.ACCION_DESAPROBAR">\r\n        <form #frmOrdenPedido="ngForm" autocomplete="off">\r\n          \x3c!--Informacion general de orden de pedido--\x3e\r\n          <div class="card mb-1" [ngClass]="{\'card-accent-danger\': invPedidos.pedPendiente, \'card-accent-success\': invPedidos.pedAprobado && !invPedidos.pedEjecutado, \'card-accent-warning\': invPedidos.pedAprobado && invPedidos.pedEjecutado, \'card-accent-default\': invPedidos.pedAnulado}">\r\n            <div class="card-header">\r\n              <strong>{{ constantes.TAG_DATOS_GENERALES }}</strong>\r\n              <div class="card-header-actions">\r\n                <span class="mr-2 badge badge-pill" [ngClass]="{\'badge-danger\': invPedidos.pedPendiente, \'badge-success\': invPedidos.pedAprobado && !invPedidos.pedEjecutado, \'badge-warning\': invPedidos.pedAprobado && invPedidos.pedEjecutado, \'badge-default\': invPedidos.pedAnulado}">{{pedidoEstado}}</span>\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionOrden"\r\n                  aria-expanded="true" placement="left" ngbTooltip="Ocultar/Mostrar" (click)="collpase()">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionOrden">\r\n              <div class="row">\r\n\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA}}</b>\r\n                    </label>\r\n                    <p-calendar inputId="pedFechaEmision" name="pedFechaEmision" [(ngModel)]="invPedidos.pedFechaEmision"\r\n                      [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true"\r\n                      disabled></p-calendar>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_REGISTRADOR}}</b>\r\n                    </label>\r\n                    <input name="usrRegistradorNombre" [(ngModel)]="usrRegistradorNombre" class="form-control form-control-sm"\r\n                      disabled>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3" *ngIf="!isAprobadorRegistrador">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_APROBADOR}}</b>\r\n                    </label>\r\n                    <input name="usrAprobadorNombre" [(ngModel)]="usrAprobadorNombre" class="form-control form-control-sm"\r\n                      disabled>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3" *ngIf="!invPedidos.invCliente || !invPedidos.invCliente.invClientePK.cliCodigo">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA_HORA_ENTREGA}}</b>\r\n                    </label>\r\n                    <p-calendar name="pedidoFechaHora" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                      [showIcon]="true" [(ngModel)]="invPedidos.pedFechaHoraEntrega" showTime="true" hourFormat="24"\r\n                      [required]="true" [minDate]="fechaActual" [appMinDate]="fechaActual"></p-calendar>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <strong>{{constantes.TAG_DE_REGISTRO_OBSERVACIONES}}</strong>\r\n                    </label>\r\n                    <input id="pedObservacionesRegistra" name="pedObservacionesRegistra" [(ngModel)]="invPedidos.pedObservacionesRegistra"\r\n                      class="form-control form-control-sm text-uppercase mousetrap" maxlength="1000" appUppercase\r\n                      disabled>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="{{!motivoSeleccionado.pmExigirCliente && !invPedidos.invCliente?\'col-md-3\':\'col-md-6\'}}"\r\n                  *ngIf="!isAprobadorRegistrador">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <strong>{{constantes.TAG_DE_APROBACION_OBSERVACIONES}} </strong>\r\n                    </label>\r\n                    <input id="pedObservacionesAprueba" name="pedObservacionesAprueba" [(ngModel)]="invPedidos.pedObservacionesAprueba"\r\n                      class="form-control form-control-sm text-uppercase mousetrap" maxlength="1000" required\r\n                      appUppercase>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          \x3c!--Informacion de cliente--\x3e\r\n          <div class="card mb-1" *ngIf="invPedidos.invCliente && invPedidos.invCliente.invClientePK.cliCodigo">\r\n            <div class="card-header">\r\n              <strong>{{ constantes.TAG_DATOS_CLIENTE }}<span class="text-primary">: {{\r\n                  invPedidos.invCliente.cliRazonSocial}}</span></strong>\r\n              <div class="card-header-actions">\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionCliente"\r\n                  aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}" (click)="collpaseCliente()">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionCliente">\r\n              <div class="row">\r\n                \x3c!--Orden de compra--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <strong>{{constantes.TAG_ORDEN_COMPRA}} </strong>\r\n                    </label>\r\n                    <input id="invPedidos.pedOrdenCompra" name="pedOrdenCompra" [(ngModel)]="invPedidos.pedOrdenCompra"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      maxlength="1000" required appUppercase>\r\n                    <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_CODIGO_ORDEN_COMPRA}}"\r\n                      container="body"></span>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_CODIGO_CLIENTE}}</b>\r\n                    </label>\r\n                    <input id="codCliente" name="txtCodigoCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      type="text" [(ngModel)]="invPedidos.invCliente.invClientePK.cliCodigo" disabled>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3" *ngIf="invPedidos.invCliente.invClienteGrupoEmpresarial && invPedidos.invCliente.invClienteGrupoEmpresarial.geNombre">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.INVENTARIO_GRUPO_EMPRESARIAL}}</b>\r\n                    </label>\r\n                    <input id="grupoEmpresarialCliente" name="txtGrupoEmpresarialCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      type="text" required [(ngModel)]="invPedidos.invCliente.invClienteGrupoEmpresarial.geNombre"\r\n                      disabled>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label" [ngClass]="{\'mb-6-important\': accion === constantes.ACCION_APROBAR}">\r\n                      <b>{{constantes.TAG_CONTACTO_NOMBRE}}</b>\r\n                    </label>\r\n                    <input id="pedContactoNombre" name="pedContactoNombre" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      type="text" required [(ngModel)]="invPedidos.pedContactoNombre" disabled *ngIf="accion !== constantes.ACCION_APROBAR">\r\n                    <span class="ui-fluid" *ngIf="accion === constantes.ACCION_APROBAR">\r\n                      <p-autoComplete name="pedContactoNombre" isAutocomple="true" autofocus inputId="pedContactoNombre"\r\n                        required="true" [(ngModel)]="contactoPredeterminado" [suggestions]="arrayContactoFiltrada"\r\n                        (completeMethod)="filtrarContactos($event)" (onSelect)="seleccionarContacto()" field="contacto"\r\n                        placeholder="{{constantes.TAG_OBLIGATORIO}}" [dropdown]="true" [minLength]="1"\r\n                        [inputStyleClass]="\'text-uppercase\'">\r\n                      </p-autoComplete>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label" [ngClass]="{\'mb-6-important\': accion === constantes.ACCION_APROBAR}">\r\n                      <b>{{constantes.TAG_LUGAR_ENTREGA}}</b>\r\n                    </label>\r\n                    <input name="pedidoLugar" class="form-control form-control-sm mousetrap text-uppercase" type="text"\r\n                      required [(ngModel)]="invPedidos.pedLugarEntrega" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                      appUppercase *ngIf="accion !== constantes.ACCION_APROBAR">\r\n                    <span class="ui-fluid" *ngIf="accion === constantes.ACCION_APROBAR">\r\n                      <p-autoComplete name="pedLugarEntrega" isAutocomple="true" autofocus inputId="nombre" required="true"\r\n                        [(ngModel)]="lugarEntrega" [suggestions]="arrayContactoLugarEntregaFiltrada" (completeMethod)="filtrarLugarEntrega($event)"\r\n                        (onSelect)="seleccionarLugarEntrega()" field="nombre" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                        [dropdown]="true" [minLength]="1" [inputStyleClass]="\'text-uppercase\'">\r\n                      </p-autoComplete>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_TELEFONO}}</b>\r\n                    </label>\r\n                    <input name="pedidoTelefono" class="form-control form-control-sm mousetrap text-uppercase" type="text"\r\n                      required [(ngModel)]="invPedidos.pedContactoTelefono" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                      (keypress)="soloNumeros($event)">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA_HORA_ENTREGA}}</b>\r\n                    </label>\r\n                    <p-calendar name="pedidoFechaHora" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                      [showIcon]="true" [(ngModel)]="invPedidos.pedFechaHoraEntrega" showTime="true" hourFormat="24"\r\n                      [required]="true" [minDate]="fechaActual" [appMinDate]="fechaActual"></p-calendar>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </form>\r\n      </fieldset>\r\n      \x3c!--Detalle de pedidos--\x3e\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <strong>{{constantes.PEDIDOS_DETALLE}}</strong>\r\n        </div>\r\n        <div class="card-body m-0 p-0">\r\n          <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listadoResultado"\r\n            [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n            [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n            [rowDragManaged]="true" [animateRows]="true" [singleClickEdit]="true" [rowClassRules]="rowClassRules"\r\n            (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n            [stopEditingWhenGridLosesFocus]="true" (rowDragEnd)="refrescarOrdenDetallePedido()"\r\n            [suppressDragLeaveHidesColumns]="true" (gridColumnsChanged)="redimensionarColumnas()" (gridSizeChanged)="redimensionarColumnas()">\r\n          </ag-grid-angular>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},OTvs:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.ctaCodigo="",this.fpDetalle="",this.secCodigo="",this.fpCodigoMinisterial=0,this.validar=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.fpDetalle=e.fpDetalle?e.fpDetalle:this.fpDetalle,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.fpCodigoMinisterial=e.fpCodigoMinisterial?e.fpCodigoMinisterial:this.fpCodigoMinisterial,this.validar=e.validar?e.validar:this.validar},e}()},OiCm:function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong> {{constantes.TAG_VENDEDOR}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}</strong>\r\n    </span>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrarVendedor()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div [ngClass]="{\'modal-body\': esModal}">\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card mb-0">\r\n          <div class="card-header p-1">\r\n            <i class="{{classTitulo}}"></i>\r\n            <b>{{frmTitulo}}</b>\r\n            <div class="card-header-actions" *ngIf="vistaFormulario">\r\n              <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardarVendedor" type="button" (click)="guardarVendedor(frmVendedor)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardarVendedor" type="button" (click)="actualizarVendedor(frmVendedor)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button (click)="resetearFormulario();" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n                title="{{constantes.ATAJO_CANCELAR}}" *ngIf="listaInvVendedorComboListadoTO.length!=0">\r\n                <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            <form #frmVendedor="ngForm" autocomplete="off">\r\n              <div class="form-group" *ngIf="false">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_EMPRESA}}</b>\r\n                </label>\r\n                <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n                  [disabled]="vistaFormulario" (change)="cambiarEmpresaSeleccionada();" required>\r\n                  <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                  <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                    ({{empresa.empCodigo}})</option>\r\n                </select>\r\n              </div>\r\n              <div *ngIf="vistaFormulario" class="row">\r\n                <div class="form-group form-group-sm col-sm-12 col-md-5 col-lg-4">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                  </label>\r\n                  <p *ngIf="!(accion===constantes.ACCION_CREAR)" class="form-control input-sm">{{invVendedorTO.vendCodigo}}</p>\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" type="text" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                    name="vendCodigo" [(ngModel)]="invVendedorTO.vendCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n                    required maxlength="30" appUppercase>\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-info-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body" triggers="mouseenter:mouseleave"></span>\r\n                </div>\r\n                <div class="form-group form-group-sm col-sm-12 col-md-7 col-lg-8">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_NOMBRE}}</strong>\r\n                  </label>\r\n                  <input [appFocus]="accion===constantes.ACCION_EDITAR" name="vendNombre" [(ngModel)]="invVendedorTO.vendNombre"\r\n                    class="form-control form-control-sm mousetrap text-uppercase" required minlength="3" maxlength="1000"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" appUppercase>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div [ngClass]="{\'col-lg-8 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n        <div class="card mb-0" *ngIf="listaInvVendedorComboListadoTO?.length > 0 && !vistaFormulario">\r\n          <div class="card-header p-1">\r\n            <strong>{{constantes.INVENTARIO_VENDEDOR_LISTADO}}</strong>\r\n            <div class="card-header-actions">\r\n              <button id="btnBuscarVendedor" *ngIf="false" type="button" class="btn btn-sm btn-primary mr-1" (click)="buscarVendedores()"\r\n                [disabled]="cargando" title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> &nbsp; {{constantes.LABEL_BUSCAR}}</button>\r\n              <button id="btnNuevoVendedor" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoVendedor()"\r\n                [disabled]="!frmVendedor.form.valid || !empresaSeleccionada.listaSisPermisoTO.gruCrear" title="{{constantes.ATAJO_NUEVO}}"\r\n                ngbTooltip="{{constantes.LABEL_NUEVO}}" container="body">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          \x3c!--Listado de vendedor--\x3e\r\n          <div class="card-body p-0">\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group p-1">\r\n                  <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                    size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                    size="100">\r\n                  <div class="input-group-append">\r\n                    <span class="input-group-text">\r\n                      <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div class="float-right pr-1">\r\n                  <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                    maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--listado de cliente listado--\x3e\r\n            <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 215px);" class="ag-theme-balham"\r\n              [rowData]="listaInvVendedorComboListadoTO" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n              [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [context]="context"\r\n              (gridSizeChanged)="redimensionarColumnas()" (gridReady)="onGridReady($event)" (rowSelected)="vendedorSeleccionado = $event.node.data"\r\n              (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()"\r\n              (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimensionarColumnas()" (cellFocused)="filaFocused($event)">\r\n            </ag-grid-angular>\r\n          </div>\r\n          <p-contextMenu #menuOpciones [model]="opciones" appendTo="body" [baseZIndex]="1100"></p-contextMenu>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},P7IR:function(e,t,o){"use strict";o.d(t,"a",function(){return h});var a=o("gLZI"),i=o("madF"),r=o("nR5P"),n=o("SZbH"),s=o("z5Y/"),c=o("CcnG"),l=o("Ip0R"),d=o("mwBN"),p=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listaRhDetalleRolesTO=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getRhDetalleRolesTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarRhDetalleRolesTO(e.extraInfo):(t.despuesDeListarRhDetalleRolesTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:70,minWidth:70,pinned:"left"},{headerName:d.a.TAG_IDENTIFICACION,field:"lrpId",width:170,minWidth:150,pinned:"left",cellClass:function(e){return e.data.lrpId?"":"tr-negrita"}},{headerName:d.a.TAG_APELLIDOS_Y_NOMBRES,field:"lrpNombres",width:300,minWidth:300,pinned:"left",cellClass:function(e){return e.data.lrpId?"":"tr-negrita"}},{headerName:d.a.TAG_CARGO,field:"lrpCargo",width:150,minWidth:120,cellClass:function(e){return e.data.lrpId?"":"tr-negrita"}},{headerName:d.a.TAG_DESDE,field:"lrpDesde",width:120,minWidth:120,cellClass:function(e){return e.data.lrpId?"":"tr-negrita"}},{headerName:d.a.TAG_HASTA,field:"lrpHasta",width:120,minWidth:120,cellClass:function(e){return e.data.lrpId?"":"tr-negrita"}},{headerName:d.a.TAG_DL,field:"lrpDl",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_DIAS_LABORADOS,text:d.a.TAG_DL}},{headerName:d.a.TAG_DF,field:"lrpDf",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_DIAS_FALTA,text:d.a.TAG_DF}},{headerName:d.a.TAG_DE,field:"lrpDe",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_DIAS_EXTRAS,text:d.a.TAG_DE}},{headerName:d.a.TAG_DD,field:"lrpDd",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_DIAS_DESCANSO_MEDICO,text:d.a.TAG_DD}},{headerName:d.a.TAG_DPM,field:"lrpDpm",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_DIAS_PERMISO_MEDICO,text:d.a.TAG_DPM}},{headerName:d.a.TAG_DP,field:"lrpDp",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_DIAS_PAGADOS,text:d.a.TAG_DP}},{headerName:d.a.TAG_SALDO,field:"lrpSaldo",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_INGRESOS,field:"lrpIngresos",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_HORAS_EXTRAS_50,field:"lrplrpHorasExtras",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_HORAS_EXTRAS_100,field:"lrpHorasExtras100",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_BONOS,field:"lrpBonos",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_BONOS_ND,field:"lrpBonosnd",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_BONOS_NO_DEDUCIBLE,text:d.a.TAG_BONOS_ND}},{headerName:d.a.TAG_BONOS_FIJO,field:"lrpBonosFijo",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_BONOS_FIJO_ND,field:"lrpBonosFijoNd",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_BONOS_FIJO_NO_DEDUCIBLE,text:d.a.TAG_BONOS_FIJO_ND}},{headerName:d.a.TAG_LIQUIDACION,field:"lrpLiquidacion",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_FONDO_RESERVA,field:"lrpFondoReserva",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_TOTAL_INGRESO,field:"lrpTotalIngresos",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_ANTICIPOS,field:"lrpAnticipos",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_PRESTAMOS,field:"lrpPrestamos",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_IESS,field:"lrpIess",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_IESS_EXTENSION,field:"lrpIessExtension",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_P_QUIROGRAFARIOS,field:"lrpPrestamoQuirografario",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_PRESTAMOS_QUIROGRAFARIOS,text:d.a.TAG_P_QUIROGRAFARIOS}},{headerName:d.a.TAG_P_HIPOTECARIOS,field:"lrpRetencion",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_PRESTAMOS_HIPOTECARIOS,text:d.a.TAG_P_HIPOTECARIOS}},{headerName:d.a.TAG_RETENCION,field:"crpRetencion",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_D_PERMISO_MEDICO,field:"lrpDescuentoPermisoMedico",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"},headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_DESCUENTO_PERMISO_MEDICO,text:d.a.TAG_D_PERMISO_MEDICO}},{headerName:d.a.TAG_DESCUENTOS,field:"lrpDescuentos",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_TOTAL,field:"lrpTotal",width:150,minWidth:150,valueFormatter:m,cellClass:function(e){return e.data.lrpId?"text-right":"tr-negrita text-right"}},{headerName:d.a.TAG_FORMA_PAGO,field:"lrpFormaPago",width:150,minWidth:150,cellClass:function(e){return e.data.lrpId?"":"tr-negrita"}},{headerName:d.a.TAG_DOCUMENTO,field:"lrpDocumento",width:150,minWidth:150,cellClass:function(e){return e.data.lrpId?"":"tr-negrita"}},{headerName:d.a.TAG_CONTABLE,field:"lrpContable",width:150,minWidth:150,cellClass:function(e){return e.data.lrpId?"":"tr-negrita"}},{headerName:d.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:function(e){return e.data.lrpId?"text-center":"d-none"},width:d.a.WIDTH_OPCIONES,minWidth:d.a.WIDTH_OPCIONES,cellRendererFramework:i.a,headerComponentFramework:a.a,headerComponentParams:{class:d.a.ICON_OPCIONES,tooltip:d.a.TAG_OPCIONES,text:"",enableSorting:!1}}]},e.prototype.generarColumnasConfirmacionRol=function(){return[{headerName:d.a.TAG_CONCEPTO,field:"sedConcepto",width:100,minWidth:100},{headerName:d.a.TAG_DETALLE,field:"sedDetalle",width:150,minWidth:150},{headerName:d.a.TAG_CP,field:"sedCp",width:100,minWidth:100,headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_CENTRO_PRODUCCION,text:d.a.TAG_CP}},{headerName:d.a.TAG_CC,field:"sedCc",width:100,minWidth:100,headerComponentFramework:a.a,headerComponentParams:{class:"",tooltip:d.a.TAG_CENTRO_COSTO,text:d.a.TAG_CC}},{headerName:d.a.TAG_FECHA,field:"sedFecha",width:100,minWidth:100},{headerName:d.a.TAG_VALOR,field:"sedValor",cellClass:"text-right",width:150,minWidth:150,valueFormatter:m},{headerName:d.a.TAG_CONTABLE,field:"sedContable",width:100,minWidth:100},{headerName:d.a.TAG_OBSERVACION,field:"sedObservaciones",width:200,minWidth:200}]},e=p([Object(c.Injectable)({providedIn:"root"}),u("design:paramtypes",[s.a,n.b,r.a])],e)}();function m(e){return new l.DecimalPipe("en-US").transform(e.value,"1.2-2")}},P8XS:function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_TIPO_CONTRIBUYENTE}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}</strong>\r\n    </span>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrarTipoContribuyente()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n<div [ngClass]="{\'modal-body\': esModal}">\r\n  <div class="row">\r\n    <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11" *ngIf="vistaFormulario">\r\n      <div class="card m-0 mb-2">\r\n        <div class="card-header p-1">\r\n          <i class="{{classIcon}}"></i><b>{{tituloForm}}</b>\r\n          <div class="card-header-actions" *ngIf="accion && accion !== constantes.ACCION_ELIMINAR && vistaFormulario">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="insertarCategoria(frmCategoriaDatos)"\r\n              *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="actualizarCategoria(frmCategoriaDatos)"\r\n              *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n            <button class="btn btn-sm btn-default mr-1" type="button" (click)="resetear()" title="{{constantes.ATAJO_CANCELAR}}">\r\n              <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          \x3c!--FORMULARIO OPERACIONES--\x3e\r\n          <form #frmCategoriaDatos=\'ngForm\' autocomplete="off">\r\n            <div *ngIf="accion && accion !== constantes.ACCION_ELIMINAR && vistaFormulario">\r\n              <div class="form-group form-group-sm has-feedback">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_CODIGO}}</b>\r\n                </label>\r\n                <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="invProveedorCategoriaTO.pcCodigo"\r\n                  pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                  class="form-control input-sm mousetrap" required maxlength="20" (ngModelChange)="invProveedorCategoriaTO.pcCodigo = invProveedorCategoriaTO.pcCodigo.toUpperCase()">\r\n                <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                  placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body"></span>\r\n              </div>\r\n              <div class="form-group form-group-sm">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_DETALLE}}</b>\r\n                </label>\r\n                <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap"\r\n                  name="detalle" maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invProveedorCategoriaTO.pcDetalle"\r\n                  (ngModelChange)="invProveedorCategoriaTO.pcDetalle = invProveedorCategoriaTO.pcDetalle.toUpperCase()"\r\n                  id="detalle" required [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n              </div>\r\n              <div class="form-group form-group-sm">\r\n                <input type="checkbox" [(ngModel)]="invProveedorCategoriaTO.pcAplicaRetencionIva" name="aplicaRetencionIva" />\r\n                <b> {{constantes.TAG_APLICA_RETENCION_IVA}}</b>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n      <div class="card m-0" *ngIf="listaResultado?.length>0 && !vistaFormulario">\r\n        <div class="card-header p-1">\r\n          <strong>{{constantes.INVENTARIO_CATEGORIA_PROVEEDOR_LISTADO}}</strong>\r\n          <div class="card-header-actions">\r\n            <div class="btn-group d-lg-none">\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnNuevo" (click)="operacionesCategoria(constantes.ACCION_CREAR)"\r\n                title="{{constantes.ATAJO_NUEVO}}">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirCategoriaProveedor" (click)="imprimirCategoriaProveedor()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarCategoriaProveedor" (click)="exportarCategoriaProveedor()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              </button>\r\n            </div>\r\n            <div class="btn-group d-none d-lg-block">\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnNuevo" (click)="operacionesCategoria(constantes.ACCION_CREAR)"\r\n                title="{{constantes.ATAJO_NUEVO}}">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirCategoriaProveedor" (click)="imprimirCategoriaProveedor()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarCategoriaProveedor" (click)="exportarCategoriaProveedor()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="card-body" style="padding: 0 0 0 0">\r\n          <div class="row">\r\n            <div class="col-sm-5 col-md-6">\r\n              <div class="input-group p-1">\r\n                <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                  size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                  size="100">\r\n                <div class="input-group-append">\r\n                  <span class="input-group-text">\r\n                    <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-7 col-md-6">\r\n              <div class="float-right pr-1">\r\n                <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                  maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \x3c!--listado de proveedor categoria--\x3e\r\n          <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 220px);" class="ag-theme-balham"\r\n            [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n            [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n            [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n            (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n            (contextmenu)="this.esModal ? $event.preventDefault(): null" (filterChanged)="actualizarFilas()"\r\n            (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)">\r\n          </ag-grid-angular>\r\n          \x3c!--end listado de proveedor categoria--\x3e\r\n        </div>\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body" [baseZIndex]="1100"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},PNp2:function(e,t,o){"use strict";o.d(t,"a",function(){return p});var a=o("CcnG"),i=o("mwBN"),r=o("nR5P"),n=o("SZbH"),s=o("z5Y/"),c=o("Ungd"),l=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarListaPagosCobrosFormaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarListaPagosCobrosFormaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarCarListaPagosCobrosFormaTO(e.extraInfo):(t.despuesDeListarCarListaPagosCobrosFormaTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.accionCarPagosForma=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/accionCarPagosForma",e,o).then(function(o){o&&o.extraInfo?(o.formaPago=e.carPagosCobrosFormaTO,t.despuesDeAccionCarPagosForma(o)):(t.despuesDeAccionCarPagosForma(null),a.toastr.warning(o.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarEstadoFormaPago=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/modificarEstadoCarPagosForma",e,o).then(function(o){o&&o.extraInfo?(o.formaPago=e.carPagosCobrosFormaTO,t.despuesDeModificarEstadoFormaPago(o)):(t.despuesDeModificarEstadoFormaPago(null),a.toastr.warning(o.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirFormaPago=function(e,t,o){var a=this;e.cargando=!0,this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarReporteFormaCobroPago",t,o).then(function(t){t._body.byteLength>0?a.utilService.descargarArchivoPDF("ListadoFormaPago.pdf",t):a.toastr.warning(i.a.MSJ_ERROR_IMPRIMIR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.exportarFormaPago=function(e,t,o){var a=this;e.cargando=!0,this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarReporteFormaCobroPago",t,o).then(function(t){t?a.utilService.descargarArchivoExcel(t._body,"ListadoFormaPago_"):a.toastr.warning(i.a.MSJ_ERROR_EXPORTAR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.seleccionarSector=function(e,t){return e.find(function(e){return e.secCodigo==t})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case i.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case i.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar;break;case i.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar;break;case i.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case i.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(i.a.ERROR_403_TEXTO,i.a.ERROR_403_TITULO),a},e.prototype.generarColumnas=function(){return[{headerName:i.a.TAG_CUENTA,field:"ctaCodigo",width:120,minWidth:120},{headerName:i.a.TAG_DETALLE,field:"fpDetalle",width:400,minWidth:400},{headerName:i.a.TAG_SECTOR,field:"secCodigo",width:90,minWidth:90},{headerName:i.a.TAG_INACTIVO,headerClass:"text-md-center",field:"fpInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e=l([Object(a.Injectable)({providedIn:"root"}),d("design:paramtypes",[s.a,n.b,r.a,c.a])],e)}()},PYZn:function(e,t,o){"use strict";o.d(t,"a",function(){return O});var a=o("CcnG"),i=o("eUd/"),r=o("mwBN"),n=o("CEfs"),s=o("8fiX"),c=o("nR5P"),l=o("XwtN"),d=o("yqOf"),p=o("Ungd"),u=o("SZbH"),h=o("yccp"),m=o("EnEm"),C=o("zkCp"),v=o("+JJ7"),A=o("gLZI"),f=o("madF"),g=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t,o,i,n,s,c){this.activeModal=e,this.productoService=t,this.filasService=o,this.utilService=i,this.archivoService=n,this.toastr=s,this.atajoService=c,this.parametrosBusqueda=null,this.objetoNuevoEditado={producto:null,accion:null},this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.listadoProductos=[],this.constantes=r.a,this.enterKey=0,this.activar=!1,this.cargando=!1,this.vistaListadoProducto=!1,this.filasTiempo=new m.a,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal=""}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),this.isModal&&this.buscarProductos(),this.definirAtajosDeTeclado(),this.iniciarAgGrid()},e.prototype.ngOnChanges=function(){this.listar?this.buscarProductos():(this.objetoNuevoEditado&&this.objetoNuevoEditado.accion===r.a.ACCION_CREADO&&this.refrescarTabla(this.objetoNuevoEditado.producto,"I"),this.objetoNuevoEditado&&this.objetoNuevoEditado.accion===r.a.ACCION_MODIFICADO&&this.refrescarTabla(this.objetoNuevoEditado.producto,"U")),this.definirAtajosDeTeclado()},e.prototype.buscarProductos=function(){this.cargando=!0,this.filtroGlobal="",this.listadoProductos=new Array,this.filasTiempo.iniciarContador(),this.vistaListadoProducto=!(!this.parametrosBusqueda||!this.parametrosBusqueda.vista||"listadoProductos"!==this.parametrosBusqueda.vista),this.vistaListadoProducto?this.productoService.getListaInvFunListadoProductosTO(this.parametrosBusqueda,this,r.a.KEY_EMPRESA_SELECT):this.productoService.getListaProductosTO(this.parametrosBusqueda,this,r.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvFunListadoProductosTO=function(e){this.filasTiempo.finalizarContador(),this.listadoProductos=e,this.cargando=!1,this.iniciarAgGrid()},e.prototype.despuesDeListarProducto=function(e){this.filasTiempo.finalizarContador(),0===e.length?this.activeModal.dismiss():1===e.length&&this.isModal?this.activeModal.close(e[0]):this.listadoProductos=e,this.cargando=!1},e.prototype.consultarProducto=function(){this.vistaListadoProducto&&this.vistaListadoProducto&&(this.objectSelect=this.objetoSeleccionadoListadoProductos?this.productoService.convertirInvFunListadoProductosTOAInvListaProductosGeneralTO(this.objetoSeleccionadoListadoProductos):null),this.objectSelect&&this.emitirAccion(r.a.ACCION_CONSULTAR,this.objectSelect)},e.prototype.eliminar=function(e){var t=this,o={title:r.a.MSJ_TITULO_ELIMINAR,texto:r.a.MSJ_PREGUNTA_ELIMINAR+"<br/>"+r.a.TAG_PRODUCTO+": "+e.proNombre,type:r.a.SWAL_WARNING,confirmButtonText:r.a.MSJ_SI_ELIMINAR,cancelButtonText:r.a.MSJ_CANCELAR,confirmButtonColor:r.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invProductoPK:new l.a({proEmpresa:r.a.KEY_EMPRESA_SELECT,proCodigoPrincipal:e.proCodigoPrincipal})};t.productoService.eliminarProducto(a,t,r.a.KEY_EMPRESA_SELECT)}})},e.prototype.despuesDeEliminarProducto=function(){this.refrescarTabla(this.objectSelect,"D"),this.cargando=!1},e.prototype.cambiarEstado=function(e,t){var o,a,i=this,n=!0;e==r.a.ACCION_INACTIVAR?(o=r.a.MSJ_PREGUNTA_INACTIVAR,a=r.a.MSJ_TITULO_INACTIVAR):(o=r.a.MSJ_PREGUNTA_ACTIVAR,a=r.a.MSJ_TITULO_ACTIVAR,n=!1);var s={title:a,texto:o+"<br>"+r.a.TAG_PRODUCTO+": "+t.proNombre,type:r.a.SWAL_QUESTION,confirmButtonText:r.a.MSJ_SI_ACEPTAR,cancelButtonText:r.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(s).then(function(e){if(e){i.cargando=!0;var o={estado:n,invProductoPK:new l.a({proEmpresa:r.a.KEY_EMPRESA_SELECT,proCodigoPrincipal:t.proCodigoPrincipal})};i.productoService.cambiarEstadoProducto(o,i,r.a.KEY_EMPRESA_SELECT)}})},e.prototype.despuesDeCambiarEstadoProducto=function(e){e&&(this.objectSelect.proInactivo=!this.objectSelect.proInactivo,this.refrescarTabla(this.objectSelect,"U")),this.cargando=!1},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit(this.activar)},e.prototype.imprimirProductos=function(){var e=this;if(this.utilService.verificarPermiso(r.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listInvListaProductosGeneralTO:this.vistaListadoProducto?null:this.listadoProductos,listInvFunListadoProductosTO:this.vistaListadoProducto?this.listadoProductos:null};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteProductos",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoPDF("listaUnidadesMedida"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(r.a.MSJ_ERROR_IMPRIMIR,r.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarProductos=function(){var e=this;if(this.utilService.verificarPermiso(r.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listInvListaProductosGeneralTO:this.vistaListadoProducto?null:this.listadoProductos,listInvFunListadoProductosTO:this.vistaListadoProducto?this.listadoProductos:null};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteInvListaProductosGeneralTO",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListaProductos_"):e.toastr.warning(r.a.MSJ_ERROR_EXPORTAR,r.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new h.Hotkey(r.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarListado");return e&&e.click(),!1})),this.atajoService.add(new h.Hotkey(r.a.ATAJO_EDITAR,function(){return e.productoService.verificarPermiso(r.a.ACCION_EDITAR,e)&&e.activarAtajos&&e.emitirAccion(r.a.ACCION_EDITAR,e.objectSelect),!1})),this.atajoService.add(new h.Hotkey(r.a.ATAJO_CONSULTAR,function(){return e.productoService.verificarPermiso(r.a.ACCION_CONSULTAR,e)&&e.activarAtajos&&e.emitirAccion(r.a.ACCION_CONSULTAR,e.objectSelect),!1})),this.atajoService.add(new h.Hotkey(r.a.ATAJO_ELIMINAR,function(){return e.productoService.verificarPermiso(r.a.ACCION_ELIMINAR,e)&&e.activarAtajos&&e.eliminar(e.objectSelect),!1})),this.atajoService.add(new h.Hotkey(r.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirProductos");return e&&e.click(),!1})),this.atajoService.add(new h.Hotkey(r.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarProductos");return e&&e.click(),!1}))},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoProductos.length>0)(i=this.listadoProductos.slice()).unshift(e),this.listadoProductos=i,this.seleccionarFila(0);break;case"U":if(this.vistaListadoProducto){var o=this.listadoProductos.findIndex(function(t){return t.prdCodigoPrincipal===e.proCodigoPrincipal}),a=(i=this.listadoProductos.slice())[o];a.prdNombre=e.proNombre,a.prdMedida=e.detalleMedida,a.prdCategoria=e.proCategoria,this.listadoProductos=i}else{o=this.listadoProductos.findIndex(function(t){return t.proCodigoPrincipal===e.proCodigoPrincipal});(i=this.listadoProductos.slice())[o]=e,this.listadoProductos=i}this.seleccionarFila(o);break;case"D":var i;o=this.listadoProductos.findIndex(function(t){return t.proCodigoPrincipal===e.proCodigoPrincipal});(i=this.listadoProductos.slice()).splice(o,1),this.listadoProductos=i,this.listadoProductos.length>0&&this.seleccionarFila(0===o?0:o-1)}this.refreshGrid()},e.prototype.emitirAccion=function(e,t){var o={accion:e,objetoSeleccionado:t};this.enviarAccion.emit(o)},e.prototype.generarOpciones=function(){var e=this;this.vistaListadoProducto&&(this.objectSelect=this.objetoSeleccionadoListadoProductos?this.productoService.convertirInvFunListadoProductosTOAInvListaProductosGeneralTO(this.objetoSeleccionadoListadoProductos):null);var t=this.objectSelect,o=this.productoService.verificarPermiso(r.a.ACCION_EDITAR,this)&&this.objectSelect,a=this.productoService.verificarPermiso(r.a.ACCION_ELIMINAR,this)&&this.objectSelect;this.opciones=[{label:r.a.ACCION_CONSULTAR,icon:r.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.emitirAccion(r.a.ACCION_CONSULTAR,e.objectSelect):null}},{label:r.a.ACCION_EDITAR,icon:r.a.ICON_EDITAR,disabled:!o,command:function(){return o?e.emitirAccion(r.a.ACCION_EDITAR,e.objectSelect):null}}],this.vistaListadoProducto||this.opciones.push({label:r.a.ACCION_ELIMINAR,icon:r.a.ICON_ELIMINAR,disabled:!a,command:function(){return a?e.eliminar(e.objectSelect):null}},{label:r.a.ACCION_INACTIVAR,icon:r.a.ICON_INACTIVAR,disabled:!o||this.objectSelect.proInactivo,command:function(){return o&&e.objectSelect.proInactivo?null:e.cambiarEstado(r.a.ACCION_INACTIVAR,e.objectSelect)}},{label:r.a.ACCION_ACTIVAR,icon:r.a.ICON_ACTIVAR,disabled:!o||!this.objectSelect.proInactivo,command:function(){return!o||e.objectSelect.proInactivo?e.cambiarEstado(r.a.ACCION_ACTIVAR,e.objectSelect):null}})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.vistaListadoProducto?this.productoService.generarColumnasProductoListado():this.productoService.generarColumnasGenerales(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:f.a,toolTip:A.a,inputEstado:v.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.vistaListadoProducto?this.objetoSeleccionadoListadoProductos=t?t.data:null:this.objectSelect=t?t.data:null},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objectSelect=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.filaSeleccionar=function(){this.enviarItem(this.objectSelect)},e.prototype.ejecutarSpanAccion=function(e,t){this.enviarItem(t)},e.prototype.handleKeyboardEvent=function(e){this.isModal&&13===e.keyCode&&(this.enterKey>0&&this.enviarItem(this.objectSelect),this.enterKey=this.enterKey+1)},g([Object(a.Input)(),b("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),g([Object(a.Input)(),b("design:type",s.a)],e.prototype,"empresaSeleccionada",void 0),g([Object(a.Input)(),b("design:type",Boolean)],e.prototype,"isModal",void 0),g([Object(a.Input)(),b("design:type",Boolean)],e.prototype,"isConsumos",void 0),g([Object(a.Input)(),b("design:type",Boolean)],e.prototype,"listar",void 0),g([Object(a.Input)(),b("design:type",Boolean)],e.prototype,"activarAtajos",void 0),g([Object(a.Input)(),b("design:type",Object)],e.prototype,"objetoNuevoEditado",void 0),g([Object(a.Output)(),b("design:type",Object)],e.prototype,"enviarActivar",void 0),g([Object(a.Output)(),b("design:type",Object)],e.prototype,"enviarAccion",void 0),g([Object(a.ViewChild)("menuOpciones"),b("design:type",C.ContextMenu)],e.prototype,"menuOpciones",void 0),g([Object(a.HostListener)("document:keydown",["$event"]),b("design:type",Function),b("design:paramtypes",[KeyboardEvent]),b("design:returntype",void 0)],e.prototype,"handleKeyboardEvent",null),e=g([Object(a.Component)({selector:"app-listado-productos",template:o("Gq5e"),styles:[o("4uWv")]}),b("design:paramtypes",[i.a,d.a,n.a,c.a,p.a,u.b,h.HotkeysService])],e)}()},Pdok:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.empCodigo=null,this.compPeriodo=null,this.compMotivo=null,this.compNumero=null,this.compDocumentoProveedor=null,this.compDocumentoTipo=null,this.compDocumentoNumero=null,this.compFecha=null,this.compFechaVencimiento=null,this.compIvaVigente=0,this.compObservaciones=null,this.compElectronica=!1,this.compActivoFijo=!1,this.compImportacion=!1,this.compPendiente=!1,this.compRevisado=!1,this.compAnulado=!1,this.compFormaPago=null,this.compDocumentoFormaPago=null,this.compBase0=0,this.compBaseImponible=0,this.compBaseNoObjeto=0,this.compBaseExenta=0,this.compIce=0,this.compMontoIva=0,this.compOtrosImpuestos=0,this.compPropina=0,this.compTotal=0,this.compValorRetenido=0,this.compRetencionAsumida=!1,this.compSaldo=0,this.provEmpresa=null,this.provCodigo=null,this.bodEmpresa=null,this.bodCodigo=null,this.secEmpresa=null,this.secCodigo=null,this.ctaEmpresa=null,this.ctaCodigo=null,this.contPeriodo=null,this.contTipo=null,this.contNumero=null,this.usrInsertaCompra=null,this.usrFechaInsertaCompra=null,this.ocEmpresa=null,this.ocSector=null,this.ocMotivo=null,this.ocNumero=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.empCodigo=e.empCodigo?e.empCodigo:this.empCodigo,this.compPeriodo=e.compPeriodo?e.compPeriodo:this.compPeriodo,this.compMotivo=e.compMotivo?e.compMotivo:this.compMotivo,this.compNumero=e.compNumero?e.compNumero:this.compNumero,this.compDocumentoProveedor=e.compDocumentoProveedor?e.compDocumentoProveedor:this.compDocumentoProveedor,this.compDocumentoTipo=e.compDocumentoTipo?e.compDocumentoTipo:this.compDocumentoTipo,this.compDocumentoNumero=e.compDocumentoNumero?e.compDocumentoNumero:this.compDocumentoNumero,this.compFecha=e.compFecha?e.compFecha:this.compFecha,this.compFechaVencimiento=e.compFechaVencimiento?e.compFechaVencimiento:this.compFechaVencimiento,this.compIvaVigente=e.compIvaVigente?e.compIvaVigente:this.compIvaVigente,this.compObservaciones=e.compObservaciones?e.compObservaciones:this.compObservaciones,this.compElectronica=e.compElectronica?e.compElectronica:this.compElectronica,this.compActivoFijo=e.compActivoFijo?e.compActivoFijo:this.compActivoFijo,this.compImportacion=e.compImportacion?e.compImportacion:this.compImportacion,this.compPendiente=e.compPendiente?e.compPendiente:this.compPendiente,this.compRevisado=e.compRevisado?e.compRevisado:this.compRevisado,this.compAnulado=e.compAnulado?e.compAnulado:this.compAnulado,this.compFormaPago=e.compFormaPago?e.compFormaPago:this.compFormaPago,this.compDocumentoFormaPago=e.compDocumentoFormaPago?e.compDocumentoFormaPago:this.compDocumentoFormaPago,this.compBase0=e.compBase0?e.compBase0:this.compBase0,this.compBaseImponible=e.compBaseImponible?e.compBaseImponible:this.compBaseImponible,this.compBaseNoObjeto=e.compBaseNoObjeto?e.compBaseNoObjeto:this.compBaseNoObjeto,this.compBaseExenta=e.compBaseExenta?e.compBaseExenta:this.compBaseExenta,this.compIce=e.compIce?e.compIce:this.compIce,this.compMontoIva=e.compMontoIva?e.compMontoIva:this.compMontoIva,this.compOtrosImpuestos=e.compOtrosImpuestos?e.compOtrosImpuestos:this.compOtrosImpuestos,this.compPropina=e.compPropina?e.compPropina:this.compPropina,this.compTotal=e.compTotal?e.compTotal:this.compTotal,this.compValorRetenido=e.compValorRetenido?e.compValorRetenido:this.compValorRetenido,this.compRetencionAsumida=e.compRetencionAsumida?e.compRetencionAsumida:this.compRetencionAsumida,this.compSaldo=e.compSaldo?e.compSaldo:this.compSaldo,this.provEmpresa=e.provEmpresa?e.provEmpresa:this.provEmpresa,this.provCodigo=e.provCodigo?e.provCodigo:this.provCodigo,this.bodEmpresa=e.bodEmpresa?e.bodEmpresa:this.bodEmpresa,this.bodCodigo=e.bodCodigo?e.bodCodigo:this.bodCodigo,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.ctaEmpresa=e.ctaEmpresa?e.ctaEmpresa:this.ctaEmpresa,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.contPeriodo=e.contPeriodo?e.contPeriodo:this.contPeriodo,this.contTipo=e.contTipo?e.contTipo:this.contTipo,this.contNumero=e.contNumero?e.contNumero:this.contNumero,this.usrInsertaCompra=e.usrInsertaCompra?e.usrInsertaCompra:this.usrInsertaCompra,this.usrFechaInsertaCompra=e.usrFechaInsertaCompra?e.usrFechaInsertaCompra:this.usrFechaInsertaCompra,this.ocEmpresa=e.ocEmpresa?e.ocEmpresa:this.ocEmpresa,this.ocSector=e.ocSector?e.ocSector:this.ocSector,this.ocMotivo=e.ocMotivo?e.ocMotivo:this.ocMotivo,this.ocNumero=e.ocNumero?e.ocNumero:this.ocNumero},e}()},PwPW:function(e,t){e.exports='<div *ngIf="vistaFormulario">\r\n  \x3c!-- FORMULARIO DE ORDEN DE PEDIDO --\x3e\r\n  <div class="card m-0">\r\n    <div class="card-header p-1">\r\n      <button id="btnActivarFormOrdenPedido" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="cambiarActivar()"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <strong>{{ frmTitulo }}\r\n        <strong *ngIf="accion!=constantes.ACCION_CREAR"> No. {{invPedidos.invPedidosPK.pedNumero}}</strong>\r\n        <span class="text-primary">: {{ empresaSeleccionada.empNombre }}</span>\r\n      </strong>\r\n      <div class="card-header-actions">\r\n        \x3c!--  BOTONES   --\x3e\r\n        <div class="btn-group">\r\n          \x3c!--Reporte historial--\x3e\r\n          <button *ngIf="accion===constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n            (click)="imprimirInvPedidos(false, true)" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n            [disabled]="cargando">\r\n            <i class="fa fa-print" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button *ngIf="accion===constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n            (click)="exportarInvPedidos(true)" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar && !cargando">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n          \x3c!-- Eliminar --\x3e\r\n          <button id="btnEliminarOrdenPedido" *ngIf="accion===constantes.ACCION_ELIMINAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n            placement="top" ngbTooltip="{{constantes.ACCION_ELIMINAR}}" (click)="eliminarOrdenPedido()">\r\n            <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.ACCION_ELIMINAR}}</span>\r\n          </button>\r\n          \x3c!--Cancelar--\x3e\r\n          <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelar" (click)="cancelarAccion()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_REGRESAR}}" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="card-body p-1">\r\n\r\n      <fieldset [disabled]="true">\r\n        <form #frmOrdenPedido="ngForm" autocomplete="off">\r\n          \x3c!--Informacion general de orden de pedido--\x3e\r\n          <div class="card mb-1" [ngClass]="{\'card-accent-danger\': invPedidos.pedPendiente, \'card-accent-success\': invPedidos.pedAprobado && !invPedidos.pedEjecutado, \'card-accent-warning\': invPedidos.pedAprobado && invPedidos.pedEjecutado, \'card-accent-default\': invPedidos.pedAnulado}">\r\n            <div class="card-header">\r\n              <strong>{{ constantes.TAG_DATOS_GENERALES }}</strong>\r\n              <div class="card-header-actions">\r\n                <span class="mr-2 badge badge-pill" [ngClass]="{\'badge-danger\': invPedidos.pedPendiente, \'badge-success\': invPedidos.pedAprobado && !invPedidos.pedEjecutado, \'badge-warning\': invPedidos.pedAprobado && invPedidos.pedEjecutado, \'badge-default\': invPedidos.pedAnulado}">{{pedidoEstado}}</span>\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionOrden"\r\n                  aria-expanded="true" placement="left" ngbTooltip="Ocultar/Mostrar" (click)="collpase()">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionOrden">\r\n              <div class="row">\r\n                <div class="{{!motivoSeleccionado.pmExigirCliente && !invPedidos.invCliente?\'col-md-3\':\'col-md-4\'}}">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA}}</b>\r\n                    </label>\r\n                    <p-calendar inputId="pedFechaEmision" name="pedFechaEmision" [(ngModel)]="invPedidos.pedFechaEmision"\r\n                      [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true"\r\n                      disabled></p-calendar>\r\n                  </div>\r\n                </div>\r\n                <div class="{{!motivoSeleccionado.pmExigirCliente && !invPedidos.invCliente?\'col-md-3\':\'col-md-4\'}}">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_REGISTRADOR}}</b>\r\n                    </label>\r\n                    <input name="usrRegistradorNombre" [(ngModel)]="usrRegistradorNombre" class="form-control form-control-sm"\r\n                      disabled>\r\n                  </div>\r\n                </div>\r\n                <div class="{{!motivoSeleccionado.pmExigirCliente && !invPedidos.invCliente?\'col-md-3\':\'col-md-4\'}}">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_APROBADOR}}</b>\r\n                    </label>\r\n                    <input name="usrRegistradorNombre" [(ngModel)]="usrAprobadorNombre" class="form-control form-control-sm"\r\n                      disabled>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3" *ngIf="!motivoSeleccionado.pmExigirCliente && !invPedidos.invCliente">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA_HORA_ENTREGA}}</b>\r\n                    </label>\r\n                    <p-calendar name="pedidoFechaHora" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                      [showIcon]="true" [(ngModel)]="invPedidos.pedFechaHoraEntrega" showTime="true" hourFormat="24"\r\n                      [required]="true" [minDate]="fechaActual" [appMinDate]="fechaActual"></p-calendar>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <strong>{{constantes.TAG_OBSERVACIONES}} </strong>\r\n                    </label>\r\n                    <input id="pedObservacionesRegistra" name="pedObservacionesRegistra" [(ngModel)]="invPedidos.pedObservacionesRegistra"\r\n                      class="form-control form-control-sm text-uppercase mousetrap" maxlength="1000" required\r\n                      appUppercase>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          \x3c!--Informacion de cliente--\x3e\r\n          <div class="card mb-1" *ngIf="motivoSeleccionado.pmExigirCliente && invPedidos.invCliente">\r\n            <div class="card-header">\r\n              <strong>{{ constantes.TAG_DATOS_CLIENTE }}</strong>\r\n              <div class="card-header-actions">\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionCliente"\r\n                  aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}" (click)="collpaseCliente()">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionCliente">\r\n              <div class="row">\r\n                \x3c!--Orden de compra--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <strong>{{constantes.TAG_ORDEN_COMPRA}} </strong>\r\n                    </label>\r\n                    <input id="invPedidos.pedOrdenCompra" name="pedOrdenCompra" [(ngModel)]="invPedidos.pedOrdenCompra"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      maxlength="1000" required appUppercase>\r\n                    <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_CODIGO_ORDEN_COMPRA}}"\r\n                      container="body"></span>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_CODIGO}}</b>\r\n                    </label>\r\n                    <input id="codCliente" name="txtCodigoCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      type="text" required (blur)="validarCliente()" (keydown)="buscarCliente($event);" [(ngModel)]="invPedidos.invCliente.invClientePK.cliCodigo"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_CONTACTO}}</b>\r\n                    </label>\r\n                    <input name="pedidoContacto" class="form-control form-control-sm mousetrap text-uppercase" type="text"\r\n                      required [(ngModel)]="invPedidos.pedContactoNombre" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                      appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_TELEFONO}}</b>\r\n                    </label>\r\n                    <input name="pedidoTelefono" class="form-control form-control-sm mousetrap text-uppercase" type="text"\r\n                      required [(ngModel)]="invPedidos.pedContactoTelefono" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                      (keypress)="soloNumeros($event)">\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA_HORA_ENTREGA}}</b>\r\n                    </label>\r\n                    <p-calendar name="pedidoFechaHora" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                      [showIcon]="true" [(ngModel)]="invPedidos.pedFechaHoraEntrega" showTime="true" hourFormat="24"\r\n                      [required]="true" [minDate]="fechaActual" [appMinDate]="fechaActual"></p-calendar>\r\n                  </div>\r\n                </div>\r\n                <div class="col-md-6">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_LUGAR_ENTREGA}}</b>\r\n                    </label>\r\n                    <input name="pedidoLugar" class="form-control form-control-sm mousetrap text-uppercase" type="text"\r\n                      required [(ngModel)]="invPedidos.pedLugarEntrega" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                      appUppercase>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </form>\r\n      </fieldset>\r\n      \x3c!--Detalle de pedidos--\x3e\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <strong>{{constantes.PEDIDOS_DETALLE}}</strong>\r\n        </div>\r\n        <div class="card-body m-0 p-0">\r\n          <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listadoResultado"\r\n            [columnDefs]="columnDefs" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n            [enableColResize]="true" [context]="context" [frameworkComponents]="frameworkComponents" [rowDragManaged]="true"\r\n            [animateRows]="true" [rowClassRules]="rowClassRules" (gridReady)="onGridReady($event)" (gridColumnsChanged)="redimensionarColumnas()"\r\n            (gridSizeChanged)="redimensionarColumnas()" [suppressDragLeaveHidesColumns]="true">\r\n          </ag-grid-angular>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},Q8hO:function(e,t,o){"use strict";var a,i=o("CcnG"),r=o("PYZn"),n=o("dGCu"),s=o("uhNP"),c=o("mwBN"),l=o("8fiX"),d=o("pwhb"),p=o("z5Y/"),u=o("SZbH"),h=o("nR5P"),m=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},C=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarTipoIdentificacionTO=function(e,t){var o=this;this.api.post("todocompuWS/anexosWebController/getListaAnxTipoIdentificacionTO",{},t).then(function(t){t&&t.extraInfo?e.despuesDeListarAnxTipoIdentificacionTO(t.extraInfo):(o.toastr.warning(t.operacionMensaje,"Aviso"),e.cargando=!1)}).catch(function(t){return o.utilService.handleError(t,e)})},e=m([Object(i.Injectable)({providedIn:"root"}),C("design:paramtypes",[p.a,u.b,h.a])],e)}(),A=function(){function e(e){this.codigo="",this.nombre="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.codigo=e.codigo?e.codigo:this.codigo,this.nombre=e.nombre?e.nombre:this.nombre},e}(),f=o("6AkL"),g=o("FkBQ"),b=o("q6bj"),O=o("CDHH"),S=o("yccp"),I=o("gIcY"),E=o("iQoG"),R=o("vrQg"),T=o("eUd/"),_=o("YEjl"),P=function(){function e(e){this.contacto="",this.telefono="",this.email="",this.cargo="",this.lugarEntrega="",this.lugarEntrega2="",this.lugarDestino="",this.transporte="",this.recordatorio="",this.predeterminado=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.contacto=e.contacto?e.contacto:this.contacto,this.telefono=e.telefono?e.telefono:this.telefono,this.email=e.email?e.email:this.email,this.cargo=e.cargo?e.cargo:this.cargo,this.lugarEntrega=e.lugarEntrega?e.lugarEntrega:this.lugarEntrega,this.lugarEntrega2=e.lugarEntrega2?e.lugarEntrega2:this.lugarEntrega2,this.lugarDestino=e.lugarDestino?e.lugarDestino:this.lugarDestino,this.transporte=e.transporte?e.transporte:this.transporte,this.recordatorio=e.recordatorio?e.recordatorio:this.recordatorio,this.predeterminado=e.predeterminado?e.predeterminado:this.predeterminado},e}(),N=o("zkCp"),y=o("+JJ7"),D=o("EnEm"),L=o("CEfs"),M=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},x=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},F=function(){function e(e,t,o,a,i,r){this.activeModal=e,this.atajoService=t,this.clienteService=o,this.utilService=a,this.filasService=i,this.toastr=r,this.constantes=c.a,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.vistaFormulario=!1,this.contacto=new P,this.contactoSeleccionado=new P,this.listaContactos=new Array,this.listaEmpresas=new Array,this.accionContacto=null,this.filtroGlobal="",this.correos=[],this.filasTiempo=new D.a,this.columnDefs=[],this.columnDefsSelected=[],this.definirAtajosDeTeclado()}return e.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),this.listaContactos=this.cliente.cliLugaresEntrega?JSON.parse(this.cliente.cliLugaresEntrega):new Array,this.listaEmpresas.push(this.empresaSeleccionada),0==this.listaContactos.length&&this.nuevo(),this.separarEmail(),this.contacto.transporte=c.a.TAG_TERRESTRE,this.iniciarAgGrid(this.accion)},e.prototype.clickear=function(){var e=new RegExp(c.a.EXP_REGULAR_EMAIL),t=this.correos[this.correos.length-1];t=t.toLowerCase(),e.test(t)?this.correos[this.correos.length-1]=t:(this.toastr.warning(c.a.MSJ_CORREO_NO_VALIDO),this.correos.splice(this.correos.length-1))},e.prototype.separarEmail=function(){""!=this.contacto.email&&(this.correos=this.contacto.email.split(";"))},e.prototype.agregarEmail=function(){this.contacto.email="";for(var e=0;e<this.correos.length;e++)e<this.correos.length-1?this.contacto.email+=this.correos[e]+";":e==this.correos.length-1&&(this.contacto.email+=this.correos[e])},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevoGrupoEmp");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardarGrupoEmp");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.vistaFormulario&&e.resetear(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ACEPTAR,function(e){var t=document.getElementById("btnAceptar");return t&&t.click(),!1}))},e.prototype.aceptar=function(){this.cliente.cliLugaresEntrega=this.listaContactos&&this.listaContactos.length>0?JSON.stringify(this.listaContactos):null},e.prototype.soloNumeros=function(e){return e.charCode>=48&&e.charCode<=57},e.prototype.generarOpciones=function(e){var t=this;this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_BUSCAR,disabled:this.vistaFormulario,command:function(e){return t.consultar()}},{label:c.a.ACCION_EDITAR,icon:c.a.ICON_EDITAR,disabled:this.accion===c.a.ACCION_CONSULTAR||this.vistaFormulario,command:function(e){return t.paraEdicion()}},{label:c.a.ACCION_ELIMINAR,icon:c.a.ICON_ELIMINAR,disabled:this.accion===c.a.ACCION_CONSULTAR||this.vistaFormulario,command:function(e){return t.eliminar()}},{label:c.a.TAG_PREDETERMINAR,icon:c.a.ICON_SELECCIONAR,disabled:this.accion===c.a.ACCION_CONSULTAR||e.predeterminado||this.vistaFormulario,command:function(e){return t.predeterminar()}}]},e.prototype.consultar=function(){this.contacto=this.contactoSeleccionado,this.separarEmail(),this.vistaFormulario=!0,this.accionContacto=c.a.ACCION_CONSULTAR,this.iniciarAgGrid(this.accionContacto)},e.prototype.paraEdicion=function(){this.contacto=this.contactoSeleccionado,this.separarEmail(),this.vistaFormulario=!0,this.accionContacto=c.a.ACCION_EDITAR,this.iniciarAgGrid(this.accionContacto)},e.prototype.eliminar=function(){var e=this,t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ELIMINAR,cancelButtonText:c.a.MSJ_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&(e.gridApi&&e.gridApi.updateRowData({remove:[e.contactoSeleccionado]}),e.listaContactos=[],e.gridApi.forEachNode(function(t){e.listaContactos.push(t.data),e.contactoSeleccionado.predeterminado&&(e.listaContactos[0].predeterminado=!0)}),e.aceptar(),0==e.listaContactos.length&&e.nuevo())})},e.prototype.predeterminar=function(){var e=this,t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_SOLO_UNO_PREDETERMINADO,type:c.a.SWAL_WARNING,confirmButtonText:"<label style='color: #595959'>"+c.a.MSJ_SI_PREDETERMINAR+"</label>",cancelButtonText:c.a.MSJ_CANCELAR,confirmButtonColor:c.a.COLOR_ADVERTENCIA};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&(e.contactoSeleccionado.predeterminado=!0,e.predeterminarSoloUno(),e.contactoSeleccionado.predeterminado=!0,e.gridApi&&e.gridApi.updateRowData({update:[e.contactoSeleccionado]}),e.aceptar())})},e.prototype.nuevo=function(){this.vistaFormulario=!0,this.accionContacto=c.a.ACCION_CREAR,this.contacto=new P,this.correos=[],this.contacto.transporte=this.constantes.TAG_TERRESTRE,this.contacto.predeterminado=!0,this.iniciarAgGrid(this.accionContacto)},e.prototype.apilarContactos=function(e){var t=this.utilService.establecerFormularioTocado(e);e&&e.valid&&t?this.aRepetidoNombre(e.value.contacto)?(this.focusContacto(),this.toastr.warning(c.a.MSJ_EXISTE_CONTACTO,c.a.MSJ_TITULO_EXISTE_CONTACTO)):(this.contacto.predeterminado&&this.listaContactos&&this.listaContactos.length>0&&this.predeterminarSoloUno(),this.agregarEmail(),this.listaContactos.push(this.contacto),this.gridApi&&this.gridApi.updateRowData({add:[this.contacto]}),this.aceptar(),this.resetear()):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1)},e.prototype.focusContacto=function(){var e=document.getElementById("contacto");e&&e.focus()},e.prototype.aRepetidoNombre=function(e){var t=0,o=this.cliente.cliLugaresEntrega?JSON.parse(this.cliente.cliLugaresEntrega):new Array;if(o.length>0)if(this.accionContacto==c.a.ACCION_EDITAR){for(var a=0;a<this.listaContactos.length;a++)this.listaContactos[a].contacto==e&&this.listaContactos[a].contacto==e&&t++;1==t&&(t=0)}else for(a=0;a<o.length;a++)o[a].contacto==e&&t++;return t>0},e.prototype.predeterminarSoloUno=function(){var e=[];this.gridApi.forEachNode(function(t){var o=t.data;o.predeterminado=!1,e.push(o)}),this.listaContactos=e},e.prototype.actualizarLista=function(){var e=[];this.gridApi.forEachNode(function(t){var o=t.data;e.push(o)}),this.listaContactos=e},e.prototype.editarContactos=function(e){var t=this.utilService.establecerFormularioTocado(e);e&&e.valid&&t?this.aRepetidoNombre(e.value.contacto)?(this.focusContacto(),this.toastr.warning(c.a.MSJ_EXISTE_CONTACTO,c.a.MSJ_TITULO_EXISTE_CONTACTO)):(this.agregarEmail(),this.gridApi&&this.gridApi.updateRowData({update:[this.contactoSeleccionado]}),this.contactoSeleccionado.predeterminado&&this.listaContactos&&this.listaContactos.length>0?(this.predeterminarSoloUno(),this.contactoSeleccionado.predeterminado=!0,this.gridApi&&this.gridApi.updateRowData({update:[this.contactoSeleccionado]})):this.actualizarLista(),this.aceptar(),this.resetear()):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1)},e.prototype.resetear=function(){0!=this.listaContactos.length?(this.listaContactos=this.cliente.cliLugaresEntrega?JSON.parse(this.cliente.cliLugaresEntrega):new Array,this.contacto=new P,this.correos=[],this.vistaFormulario=!1,this.accionContacto=null):this.activeModal.dismiss("Cross click")},e.prototype.iniciarAgGrid=function(e){this.columnDefs=this.clienteService.generarColumnasContacto(e),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.noDatos=c.a.MSJ_NO_HAY_DATOS,this.frameworkComponents={inputEstado:y.a}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.gridApi.sizeColumnsToFit(),this.seleccionarPrimerFila()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.contactoSeleccionado=t?t.data:null},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.contactoSeleccionado=e,this.generarOpciones(this.contactoSeleccionado),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.ejecutarAccion=function(){this.consultar()},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.tamanioChico=function(){document.querySelector("#correocontacto input").className="chico form-control form-control-sm"},e.prototype.tamanioGrande=function(){0==this.correos.length&&(document.querySelector("#correocontacto input").className="grande form-control form-control-sm")},M([Object(i.Input)(),x("design:type",d.a)],e.prototype,"cliente",void 0),M([Object(i.Input)(),x("design:type",String)],e.prototype,"accion",void 0),M([Object(i.Input)(),x("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),M([Object(i.Input)(),x("design:type",String)],e.prototype,"razonSocial",void 0),M([Object(i.ViewChild)("menuOpciones"),x("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),e=M([Object(i.Component)({selector:"app-contactos",template:o("rLIa"),styles:[o("X9qb")]}),x("design:paramtypes",[T.a,S.HotkeysService,O.a,h.a,L.a,u.b])],e)}(),w=o("Kqy8"),G=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},j=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},U=function(){function e(e,t,o,a,r,n,s,l,p,u){this.identificacionService=e,this.cantonService=t,this.vendedorService=o,this.clienteCategoriaService=a,this.clienteService=r,this.atajoService=n,this.utilService=s,this.toastr=l,this.modalService=p,this.cdRef=u,this.constantes=c.a,this.accion=null,this.rptaCedula=null,this.rptaRepetido=null,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.isScreamMd=!0,this.cargando=!0,this.empresaExtranjera=!1,this.activar=!1,this.listadoTipoIdentificacion=new Array,this.listadoProvincias=new Array,this.listadoCiudades=new Array,this.listadoVendedores=new Array,this.listadoGrupoEmpresarial=new Array,this.digitosCedulaMax=30,this.digitosCedulaMin=1,this.codigoAnterior="",this.correos=[],this.activarContactos=!0,this.cliente=new d.a,this.provinciaSeleccionada=new A,this.ciudadSeleccionada=new A,this.vendedorSeleccionado=new g.a}return e.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.seleccionado=this.parametros.objetoSeleccionado,this.parametros.cliente&&(this.cliente=this.parametros.cliente),this.cliente.empCodigo=c.a.KEY_EMPRESA_SELECT;var e={empresa:c.a.KEY_EMPRESA_SELECT};this.empresaSeleccionada&&this.empresaSeleccionada.empPais!=c.a.LABEL_ECUADOR&&(this.empresaExtranjera=!0),this.actuarSegunAccion(),this.identificacionService.listarTipoIdentificacionTO(this,c.a.KEY_EMPRESA_SELECT),this.cantonService.listarAnxDpaProvinciaTO(this,c.a.KEY_EMPRESA_SELECT),this.listarVendedores(),!this.listadoCategorias||this.listadoCategorias.length<=0?this.clienteCategoriaService.listarInvClienteCategoriaTO(e,this,c.a.KEY_EMPRESA_SELECT):this.parametros&&this.parametros.categoriaSeleccionada&&(this.cliente.cliCategoria=this.parametros.categoriaSeleccionada.ccCodigo),this.clienteService.listarGrupoEmpresarial({empresa:c.a.KEY_EMPRESA_SELECT,busqueda:null},this,c.a.KEY_EMPRESA_SELECT),this.clienteService.obtenerPermisosDeCaja(e,this,c.a.KEY_EMPRESA_SELECT),this.seleccionado&&""!=this.seleccionado.cliEmail&&(this.correos=this.seleccionado.cliEmail.split(";"),this.tamanioChico()),this.definirAtajosDeTeclado(),this.extraerValoresIniciales()},e.prototype.clickear=function(){var e=new RegExp(c.a.EXP_REGULAR_EMAIL),t=this.correos[this.correos.length-1];t=t.toLowerCase(),e.test(t)?this.correos[this.correos.length-1]=t:(this.toastr.warning(c.a.MSJ_CORREO_NO_VALIDO),this.correos.splice(this.correos.length-1))},e.prototype.verificarPermiso=function(e,t){return this.clienteService.verificarPermiso(e,this,t)},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivarCliente");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.cancelar(),!1}))},e.prototype.actuarSegunAccion=function(){switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_CONSULTAR:this.obtenerInvClienteTO()}},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmClienteDatos?e.frmClienteDatos.value:null)),e.clienteInicial=JSON.parse(JSON.stringify(e.cliente?e.cliente:null))},50)},e.prototype.obtenerInvClienteTO=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,codigo:this.seleccionado?this.seleccionado.cliCodigo:""};this.clienteService.obtenerClienteTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerClienteTO=function(e){this.cliente=new d.a(e),this.llenarCombos(this.cliente),this.codigoAnterior=this.cliente.cliCodigo,c.a.ACCION_CONSULTAR==this.accion&&(this.activarContactos=!!this.cliente.cliLugaresEntrega&&JSON.parse(this.cliente.cliLugaresEntrega)),this.extraerValoresIniciales()},e.prototype.despuesDeObtenerPermisosDeCaja=function(e){this.caja=e,this.cargando=!1},e.prototype.llenarCombos=function(e){this.establecerLongitudIdentificacion(this.cliente.cliTipoId),this.provinciaSeleccionada=this.listadoProvincias.find(function(t){return t.nombre==e.cliProvincia}),this.provinciaSeleccionada&&this.provinciaSeleccionada.codigo&&this.listarCiudades(),this.listadoVendedores.length>0&&(this.vendedorSeleccionado=this.listadoVendedores.find(function(t){return t.vendCodigo==e.vendCodigo&&t.vendEmpresa==c.a.KEY_EMPRESA_SELECT}))},e.prototype.espacios=function(){for(var e=this.cliente.cliRazonSocial,t=0;t<e.length;t++)e=(e=(e=e.split("   ").join(" ")).split("  ").join(" ")).split("'").join("");this.cliente.cliRazonSocial=e},e.prototype.despuesDeListarAnxTipoIdentificacionTO=function(e){this.listadoTipoIdentificacion=e,this.accion===c.a.ACCION_NUEVO&&(this.cliente.cliTipoId=this.listadoTipoIdentificacion[0].tiCodigo,this.establecerLongitudIdentificacion(this.cliente.cliTipoId)),this.cargando=!1,this.extraerValoresIniciales()},e.prototype.despuesDeListarAnxDpaProvinciaTO=function(e){var t=this;this.listadoProvincias=e,this.provinciaSeleccionada=this.listadoProvincias.find(function(e){return e.nombre==t.cliente.cliProvincia}),this.provinciaSeleccionada&&this.provinciaSeleccionada.codigo&&this.listarCiudades(),this.cargando=!1},e.prototype.listarCiudades=function(){var e={codigoProvincia:this.provinciaSeleccionada.codigo};this.cantonService.listarCiudadesAnxDpaProvinciaTO(this,e,this.empresaSeleccionada.empCodigo)},e.prototype.despuesDeListarCiudadesAnxDpaProvinciaTO=function(e){this.listadoCiudades=e,this.cargando=!1},e.prototype.listarVendedores=function(){var e={empresa:this.empresaSeleccionada.empCodigo};this.vendedorService.listarComboinvListaVendedorTOs(this,e,this.empresaSeleccionada.empCodigo)},e.prototype.despuesDeListarVendedorTOs=function(e){this.listadoVendedores=e,this.cargando=!1},e.prototype.listadoTipoContribuyente=function(){var e={empresa:this.empresaSeleccionada.empCodigo};this.clienteCategoriaService.listarInvClienteCategoriaTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvClienteCategoriaTO=function(e){this.listadoCategorias=e,this.cargando=!1},e.prototype.cancelar=function(){var e=this,t={empresa:this.empresaSeleccionada,accion:c.a.ACCION_REGISTRO_NO_EXITOSO,cliente:this.seleccionado};switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_NUEVO:if(this.sePuedeCancelar())this.enviarCancelar.emit(t);else{var o={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o&&e.enviarCancelar.emit(t)})}break;default:this.enviarCancelar.emit(t)}},e.prototype.sePuedeCancelar=function(){return this.utilService.puedoCancelar(this.valoresIniciales,this.frmClienteDatos)&&this.utilService.compararObjetos(this.clienteInicial,this.cliente)},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarActivar.emit(e)},e.prototype.establecerLongitudIdentificacion=function(e){if(!this.empresaExtranjera)switch(e){case"R":this.digitosCedulaMax=13,this.digitosCedulaMin=13,this.cliente.cliId=this.cliente.cliId&&this.cliente.cliId.length<=13?this.cliente.cliId:"",this.validarIdentificacion(e);break;case"C":this.digitosCedulaMax=10,this.digitosCedulaMin=10,this.cliente.cliId=this.cliente.cliId&&this.cliente.cliId.length<=10?this.cliente.cliId:"",this.validarIdentificacion(e);break;default:this.rptaCedula=null,this.digitosCedulaMax=130,this.digitosCedulaMin=1,this.validarIdentificacion(e)}},e.prototype.validarIdentificacion=function(e){if(this.cliente.cliId){var t={empresa:c.a.KEY_EMPRESA_SELECT,id:this.cliente.cliId,codigo:this.cliente.cliCodigo};if(this.rptaRepetido=null,this.clienteService.obtenerSiEsClienteRepetido(t,this,c.a.KEY_EMPRESA_SELECT),!this.empresaExtranjera)switch(e){case"R":case"C":this.validarCedula()}}},e.prototype.soloNumeros=function(e){return e.charCode>=48&&e.charCode<=57},e.prototype.validarCedula=function(){if(this.cliente.cliId.length>9){var e={cedula:this.cliente.cliId};this.clienteService.validarCedula(e,this,c.a.KEY_EMPRESA_SELECT)}else this.rptaCedula=c.a.MSJ_CEDULA_NO_VALIDA},e.prototype.despuesDeValidarCedula=function(e){"T"!=e?(this.rptaCedula=e,this.toastr.warning(e,c.a.TAG_CEDULA)):this.rptaCedula=null,this.cargando=!1},e.prototype.insertarCliente=function(e){this.cargando=!0,this.espacios(),this.validarAntesDeEnviar(e)&&this.continuarInsersion()},e.prototype.validarAntesDeEnviar=function(e){var t=this;if(this.rptaCedula)return this.toastr.warning(this.rptaCedula,c.a.TAG_CEDULA),this.cargando=!1,!1;if(!e.valid)return this.utilService.establecerFormularioTocado(e),this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_CAMPOS_INVALIDOS),this.cargando=!1,!1;if(this.agregarEmail(),this.cliente.cliEmail)return!0;this.cargando=!1;var o={title:c.a.MSJ_PREGUNTA_GUARDAR_SIN_EMAIL,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e&&(t.accion==c.a.ACCION_NUEVO?t.continuarInsersion():t.continuarEdicion())})},e.prototype.agregarEmail=function(){this.cliente.cliEmail="";for(var e=0;e<this.correos.length;e++)e<this.correos.length-1?this.cliente.cliEmail+=this.correos[e]+";":e==this.correos.length-1&&(this.cliente.cliEmail+=this.correos[e])},e.prototype.continuarInsersion=function(){this.completarDatosAPartirDeCombos();var e={invClienteTO:this.cliente};this.clienteService.insertarCliente(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.continuarEdicion=function(){this.completarDatosAPartirDeCombos();var e={invClienteTO:this.cliente,codigoAnterior:this.codigoAnterior};this.clienteService.modificarCliente(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.completarDatosAPartirDeCombos=function(){this.cliente.geCodigo?this.cliente.geEmpresa=c.a.KEY_EMPRESA_SELECT:(this.cliente.geEmpresa=null,this.cliente.geCodigo=null),this.empresaExtranjera||(this.cliente.cliProvincia=this.provinciaSeleccionada?this.provinciaSeleccionada.nombre:"")},e.prototype.actualizarCliente=function(e){if(this.sePuedeCancelar()){var t={empresa:this.empresaSeleccionada,accion:c.a.ACCION_REGISTRO_NO_EXITOSO,cliente:this.seleccionado};this.enviarCancelar.emit(t),this.toastr.warning(c.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,c.a.TOAST_INFORMACION)}else this.cargando=!0,this.validarAntesDeEnviar(e)&&this.continuarEdicion()},e.prototype.despuesDeInsertarCliente=function(e){this.cargando=!1;var t={empresa:this.empresaSeleccionada,accion:c.a.ACCION_REGISTRO_EXITOSO,cliente:this.cliente};this.enviarCancelar.emit(t)},e.prototype.despuesDeModificarCliente=function(e){this.cargando=!1,this.enviarCancelar.emit(e)},e.prototype.despuesDeListarInvClienteGrupoEmpresarial=function(e){this.listadoGrupoEmpresarial=e,this.cargando=!1},e.prototype.despuesDeObtenerSiEsClienteRepetido=function(e){e?(this.rptaRepetido=c.a.MSJ_CLIENTE_MISMA_IDENTIFICACION,this.toastr.warning(this.rptaRepetido,c.a.TAG_REPETIDO)):this.rptaRepetido=null,this.cargando=!1},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_NUEVO:e.returnValue=!1;break;default:return!0}},e.prototype.mostrarContactos=function(){var e=this;if(this.accion===c.a.ACCION_CONSULTAR&&this.cliente&&!this.cliente.cliLugaresEntrega)this.toastr.warning(c.a.MSJ_NO_EXITEN_RESULTADOS,c.a.TOAST_INFORMACION);else{var t=this.modalService.open(F,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.cliente=this.cliente,t.componentInstance.accion=this.accion,t.componentInstance.empresaSeleccionada=this.empresaSeleccionada,t.componentInstance.razonSocial=""!=this.cliente.cliRazonSocial?"- "+this.cliente.cliRazonSocial:this.cliente.cliRazonSocial,t.result.then(function(){e.definirAtajosDeTeclado()},function(){e.definirAtajosDeTeclado()})}},e.prototype.mostrarTipoContribuyente=function(){var e=this,t=this.modalService.open(w.a,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.razonSocial=""!=this.cliente.cliRazonSocial?"- "+this.cliente.cliRazonSocial:this.cliente.cliRazonSocial,t.result.then(function(t){e.listadoTipoContribuyente(),null!=t.tipoContribuyenteSeleccionado&&(e.cliente.cliCategoria=t.tipoContribuyenteSeleccionado?t.tipoContribuyenteSeleccionado.ccCodigo:""),e.definirAtajosDeTeclado()},function(t){e.listadoTipoContribuyente(),e.definirAtajosDeTeclado()}),this.cdRef.detectChanges()},e.prototype.mostrarVendedor=function(){var e=this,t=this.modalService.open(R.a,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.razonSocial=""!=this.cliente.cliRazonSocial?"- "+this.cliente.cliRazonSocial:this.cliente.cliRazonSocial,t.componentInstance.vendedorSeleccionado=this.vendedorSeleccionado,t.result.then(function(t){e.listarVendedores(),null!=t.vendedorSeleccionado&&(e.cliente.vendCodigo=t.vendedorSeleccionado?t.vendedorSeleccionado.vendCodigo:"",e.cliente.vendEmpresa=t.vendedorSeleccionado?t.vendedorSeleccionado.vendEmpresa:""),e.definirAtajosDeTeclado()},function(t){e.listarVendedores(),e.definirAtajosDeTeclado()}),this.cdRef.detectChanges()},e.prototype.mostrarGrupoEmpresarial=function(){var e=this,t=this.modalService.open(_.a,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.listadoGrupos=this.listadoGrupoEmpresarial,t.componentInstance.razonSocial=""!=this.cliente.cliRazonSocial?"- "+this.cliente.cliRazonSocial:this.cliente.cliRazonSocial,t.result.then(function(t){e.clienteService.listarGrupoEmpresarial({empresa:c.a.KEY_EMPRESA_SELECT,busqueda:null},e,c.a.KEY_EMPRESA_SELECT),null!=t.grupoEmpresarialNuevoSeleccionado&&(e.cliente.geCodigo=t.grupoEmpresarialNuevoSeleccionado?t.grupoEmpresarialNuevoSeleccionado.geCodigo:""),e.definirAtajosDeTeclado()},function(t){e.clienteService.listarGrupoEmpresarial({empresa:c.a.KEY_EMPRESA_SELECT,busqueda:null},e,c.a.KEY_EMPRESA_SELECT),e.definirAtajosDeTeclado()}),this.cdRef.detectChanges()},e.prototype.tamanioChico=function(){document.querySelector("#correosolo input").className="chico form-control form-control-sm"},e.prototype.tamanioGrande=function(){0==this.correos.length&&(document.querySelector("#correosolo input").className="grande form-control form-control-sm")},G([Object(i.Input)(),j("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),G([Object(i.Input)(),j("design:type",Array)],e.prototype,"listadoCategorias",void 0),G([Object(i.Input)(),j("design:type",Object)],e.prototype,"parametros",void 0),G([Object(i.Output)(),j("design:type",Object)],e.prototype,"enviarCancelar",void 0),G([Object(i.Output)(),j("design:type",Object)],e.prototype,"enviarActivar",void 0),G([Object(i.ViewChild)("frmClienteDatos"),j("design:type",I.NgForm)],e.prototype,"frmClienteDatos",void 0),G([Object(i.HostListener)("window:beforeunload",["$event"]),j("design:type",Function),j("design:paramtypes",[Event]),j("design:returntype",void 0)],e.prototype,"unloadHandler",null),e=G([Object(i.Component)({selector:"app-cliente-formulario",template:o("1wFf"),styles:[o("e2BI")]}),j("design:paramtypes",[v,f.a,b.a,E.a,O.a,S.HotkeysService,h.a,u.b,T.b,i.ChangeDetectorRef])],e)}(),B=o("lThc"),V=o("/qCj");!function(e){e.GRAVA="GRAVA",e.NO_GRAVA="NO GRAVA",e.EXENTO="EXENTO",e.NO_OBJETO="NO OBJETO"}(a||(a={}));var k,W=o("RC2U"),z=function(){function e(e){this.marCodigo="",this.marDetalle="",this.marAbreviado="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.marCodigo=e.marCodigo?e.marCodigo:this.marCodigo,this.marDetalle=e.marDetalle?e.marDetalle:this.marDetalle,this.marAbreviado=e.marAbreviado?e.marAbreviado:this.marAbreviado},e}(),J=function(){function e(e){this.marEmpresa="",this.marCodigo="",this.marDetalle="",this.marAbreviado="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.marEmpresa=e.marEmpresa?e.marEmpresa:this.marEmpresa,this.marCodigo=e.marCodigo?e.marCodigo:this.marCodigo,this.marDetalle=e.marDetalle?e.marDetalle:this.marDetalle,this.marAbreviado=e.marAbreviado?e.marAbreviado:this.marAbreviado,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),K=o("EF/R"),Y=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},q=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},H=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listarInvMarcaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvMarcaComboListadoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvMarcaTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.formatearInvProductoMarcaTO=function(e,t){var o=new J(e);return o.usrEmpresa=t.empresaSeleccionada.empCodigo,o.marEmpresa=t.empresaSeleccionada.empCodigo,t.accion===c.a.ACCION_CREAR&&(o.usrFechaInserta=null,o.usrCodigo=this.auth.getCodigoUser()),o},e.prototype.generarColumnas=function(e){return[{headerName:c.a.TAG_CODIGO,field:"marCodigo",width:100,minWidth:100},{headerName:c.a.TAG_DETALLE,field:"marDetalle",width:250,minWidth:250},{headerName:c.a.TAG_ABREVIADO,field:"marAbreviado",width:100,minWidth:100},this.utilService.getColumnaOpciones()]},e=Y([Object(i.Injectable)({providedIn:"root"}),q("design:paramtypes",[p.a,u.b,h.a,K.a])],e)}(),X=function(){function e(e){this.presuEmpresa="",this.presuCodigo="",this.presuDetalle="",this.presuAbreviado="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.presuEmpresa=e.presuEmpresa?e.presuEmpresa:this.presuEmpresa,this.presuCodigo=e.presuCodigo?e.presuCodigo:this.presuCodigo,this.presuDetalle=e.presuDetalle?e.presuDetalle:this.presuDetalle,this.presuAbreviado=e.presuAbreviado?e.presuAbreviado:this.presuAbreviado,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),Z=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},$=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Q=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listaPresentacionUnidadTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaPresentacionUnidadComboTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarPresentacionUnidadTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.formatearInvProductoPresentacionUnidadesTO=function(e,t){var o=new X(e);return o.usrEmpresa=t.empresaSeleccionada.empCodigo,o.presuEmpresa=t.empresaSeleccionada.empCodigo,t.accion===c.a.ACCION_CREAR&&(o.usrCodigo=this.auth.getCodigoUser(),o.usrFechaInserta=null),o},e.prototype.generarColumnas=function(e){return[{headerName:c.a.TAG_CODIGO,field:"presuCodigo",width:100,minWidth:100},{headerName:c.a.TAG_DETALLE,field:"presuDetalle",width:250,minWidth:250},{headerName:c.a.TAG_ABREVIADO,field:"presuAbreviado",width:100,minWidth:100},this.utilService.getColumnaOpciones()]},e=Z([Object(i.Injectable)({providedIn:"root"}),$("design:paramtypes",[p.a,u.b,h.a,K.a])],e)}(),ee=function(){function e(e){this.prescEmpresa="",this.prescCodigo="",this.prescDetalle="",this.prescAbreviado="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.prescEmpresa=e.prescEmpresa?e.prescEmpresa:this.prescEmpresa,this.prescCodigo=e.prescCodigo?e.prescCodigo:this.prescCodigo,this.prescDetalle=e.prescDetalle?e.prescDetalle:this.prescDetalle,this.prescAbreviado=e.prescAbreviado?e.prescAbreviado:this.prescAbreviado,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),te=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},oe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ae=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listarPresentacionCajaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaPresentacionCajaComboTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarPresentacionCajaTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.formatearInvProductoPresentacionCajasTO=function(e,t){var o=new ee(e);return o.usrEmpresa=t.empresaSeleccionada.empCodigo,o.prescEmpresa=t.empresaSeleccionada.empCodigo,t.accion===c.a.ACCION_CREAR&&(o.usrCodigo=this.auth.getCodigoUser(),o.usrFechaInserta=null),o},e.prototype.generarColumnas=function(e){return[{headerName:c.a.TAG_CODIGO,field:"prescCodigo",width:100,minWidth:100},{headerName:c.a.TAG_DETALLE,field:"prescDetalle",width:250,minWidth:250},{headerName:c.a.TAG_ABREVIADO,field:"prescAbreviado",width:100,minWidth:100},this.utilService.getColumnaOpciones()]},e=te([Object(i.Injectable)({providedIn:"root"}),oe("design:paramtypes",[p.a,u.b,h.a,K.a])],e)}(),ie=o("tmev"),re=o("LG3P"),ne=o("ZYCi"),se=function(){function e(e){this.presuCodigo="",this.presuDetalle="",this.presuAbreviado="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.presuCodigo=e.presuCodigo?e.presuCodigo:this.presuCodigo,this.presuDetalle=e.presuDetalle?e.presuDetalle:this.presuDetalle,this.presuAbreviado=e.presuAbreviado?e.presuAbreviado:this.presuAbreviado},e}(),ce=o("lS66"),le=o("Ungd"),de=o("madF"),pe=o("gLZI"),ue=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},he=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},me=function(){function e(e,t,o,a,i,r,n,s,d,p){this.route=e,this.api=t,this.activeModal=o,this.toastr=a,this.utilService=i,this.filasService=r,this.atajoService=n,this.cdRef=s,this.archivoService=d,this.ppUnidadService=p,this.esModal=!1,this.empresaSeleccionada=new l.a,this.listaEmpresas=Array(),this.invProductoPresentacionUnidadesTO=new X,this.classTitulo=c.a.ICON_FILTRAR,this.vistaFormulario=!1,this.accion=null,this.listadoInvProductoPresentacionUnidadesComboListadoTO=Array(),this.unidadSeleccionada=new se,this.unidadNuevoSeleccionada=new se,this.isScreamMd=!0,this.filtroGlobal="",this.filasTiempo=new D.a,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.constantes=c.a,this.frmTitulo=c.a.TITULO_FILTROS,this.classTitulo=c.a.ICON_FILTRAR,this.inicializarAtajos()}return e.prototype.ngOnInit=function(){this.activar=!0,this.empresaModal?(this.esModal=!0,this.listaEmpresas.push(this.empresaModal),this.empresaSeleccionada=this.listaEmpresas[0],c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.buscarProductoPresentacionUnidad(),this.cambiarEmpresaSeleccionada()):(this.listaEmpresas=this.route.snapshot.data.productoPresentacionUnidad,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&(c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo),this.listaEmpresas&&this.cambiarEmpresaSeleccionada()),this.iniciarAgGrid(),this.iniciarAgGrid(),this.isScreamMd=!(window.innerWidth<=576),this.cdRef.detectChanges()},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_ESC,function(){return e.cerrarProductoPresentacion(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscarPresentacionMedida");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirPresentacionMedida");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarPresentacionMedida");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevoPresentacionMedida");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EDITAR,function(t){return!e.vistaFormulario&&e.listadoInvProductoPresentacionUnidadesComboListadoTO.length>0&&e.editarProductoPresentacionUnidad(e.unidadSeleccionada),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ELIMINAR,function(t){return!e.vistaFormulario&&e.listadoInvProductoPresentacionUnidadesComboListadoTO.length>0&&e.eliminarProductoPresentacionUnidad(e.unidadSeleccionada),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(t){if(e.vistaFormulario){var o=document.getElementById("btnGuardarPresentacionMedida");return o&&o.click(),!1}})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.vistaFormulario&&e.resetearFormulario(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.invProductoPresentacionUnidadesTO=new X,this.limpiarListado(),this.vistaFormulario=!1,this.accion=null},e.prototype.buscarProductoPresentacionUnidad=function(){this.cargando=!0,this.accion=null,this.limpiarListado();var e={empresa:this.empresaSeleccionada.empCodigo};this.ppUnidadService.listaPresentacionUnidadTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPresentacionUnidadTO=function(e){this.listadoInvProductoPresentacionUnidadesComboListadoTO=e||[],this.cargando=!1},e.prototype.limpiarListado=function(){this.listadoInvProductoPresentacionUnidadesComboListadoTO=[],this.actualizarFilas()},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this)&&!this.vistaFormulario,o=this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario;this.opciones=[{label:c.a.ACCION_EDITAR,icon:c.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editarProductoPresentacionUnidad(e.unidadSeleccionada):null}},{label:c.a.ACCION_ELIMINAR,icon:c.a.ICON_ELIMINAR,disabled:!o,command:function(t){return o?e.eliminarProductoPresentacionUnidad(e.unidadSeleccionada):null}}]},e.prototype.nuevoProductoPresentacionUnidad=function(){this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&(this.cargando=!0,this.activar=!1,this.accion=c.a.ACCION_CREAR,this.frmTitulo=c.a.TITULO_FORM_NUEVO_PRODUCTO_PRESENTACION_UNIDAD,this.classTitulo=c.a.ICON_CREAR,this.invProductoPresentacionUnidadesTO=new X,this.vistaFormulario=!0,this.cargando=!1)},e.prototype.guardarProductoPresentacionUnidad=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.ppUnidadService.formatearInvProductoPresentacionUnidadesTO(this.invProductoPresentacionUnidadesTO,this),i={invProductoPresentacionUnidadesTO:a,accion:"I"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoPresentacionUnidadesTO",i,c.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.unidadNuevoSeleccionada=a,t.resetearFormulario(),t.refrescarTabla(a,"I"),t.toastr.info(e.operacionMensaje,c.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,c.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.resetearFormulario=function(){this.frmTitulo=c.a.TITULO_FILTROS,this.classTitulo=c.a.ICON_FILTRAR,this.invProductoPresentacionUnidadesTO=new X,this.vistaFormulario=!1,this.activar=!0,this.accion=null},e.prototype.editarProductoPresentacionUnidad=function(e){this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.activar=!1,this.accion=c.a.ACCION_EDITAR,this.frmTitulo=c.a.TITULO_FORM_EDITAR_PRODUCTO_PRESENTACION_UNIDAD,this.classTitulo=c.a.ICON_EDITAR,this.invProductoPresentacionUnidadesTO=new X(e),this.vistaFormulario=!0,this.cargando=!1)},e.prototype.actualizarProductoPresentacionUnidad=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.ppUnidadService.formatearInvProductoPresentacionUnidadesTO(this.invProductoPresentacionUnidadesTO,this),i={invProductoPresentacionUnidadesTO:a,accion:"M"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoPresentacionUnidadesTO",i,c.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.unidadNuevoSeleccionada=a,t.resetearFormulario(),t.refrescarTabla(a,"U"),t.toastr.info(e.operacionMensaje,c.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,c.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarProductoPresentacionUnidad=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this,!0)){var o={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ELIMINAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invProductoPresentacionUnidadesPK:new ce.a({presuEmpresa:t.empresaSeleccionada.empCodigo,presuCodigo:e.presuCodigo})};t.api.post("todocompuWS/inventarioWebController/eliminarInvProductoPresentacionUnidades",a,c.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?(t.refrescarTabla(e,"D"),t.toastr.info(o.operacionMensaje,c.a.TOAST_CORRECTO)):t.toastr.warning(o.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}})}},e.prototype.cerrarProductoPresentacion=function(){this.unidadNuevoSeleccionada=this.unidadNuevoSeleccionada&&""==this.unidadNuevoSeleccionada.presuCodigo?null:this.unidadNuevoSeleccionada;var e={presUnidadSeleccionada:this.unidadNuevoSeleccionada};this.activeModal.close(e)},e.prototype.imprimirPresentacionMedida=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listInvProductoPresentacionUnidadesTO:this.listadoInvProductoPresentacionUnidadesComboListadoTO};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteProductoPresentacionUnidad",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoPresentacionUnidad_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarPresentacionMedida=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listInvProductoPresentacionUnidadesTO:this.listadoInvProductoPresentacionUnidadesComboListadoTO};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReportePresentacionUnidad",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoPresentacionUnidad_"):e.toastr.warning(c.a.MSJ_ERROR_EXPORTAR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoInvProductoPresentacionUnidadesComboListadoTO.length>0)(o=this.listadoInvProductoPresentacionUnidadesComboListadoTO.slice()).unshift(e),this.listadoInvProductoPresentacionUnidadesComboListadoTO=o,this.seleccionarFila(0);break;case"U":var o,a=this.listadoInvProductoPresentacionUnidadesComboListadoTO.findIndex(function(t){return t.presuCodigo===e.presuCodigo});(o=this.listadoInvProductoPresentacionUnidadesComboListadoTO.slice())[a]=e,this.listadoInvProductoPresentacionUnidadesComboListadoTO=o,this.seleccionarFila(a);break;case"D":a=this.listadoInvProductoPresentacionUnidadesComboListadoTO.findIndex(function(t){return t.presuCodigo===e.presuCodigo});this.listadoInvProductoPresentacionUnidadesComboListadoTO=this.listadoInvProductoPresentacionUnidadesComboListadoTO.filter(function(e,t){return t!=a}),this.listadoInvProductoPresentacionUnidadesComboListadoTO.length>0&&this.seleccionarFila(0===a?0:a-1)}this.activar=!0},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.ppUnidadService.generarColumnas(this.esModal),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a,inputEstado:y.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.unidadSeleccionada=t?t.data:null},e.prototype.filaSeleccionar=function(){this.enviarItem(this.unidadSeleccionada)},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.unidadSeleccionada=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},ue([Object(i.Input)(),he("design:type",l.a)],e.prototype,"empresaModal",void 0),ue([Object(i.Input)(),he("design:type",String)],e.prototype,"razonSocial",void 0),ue([Object(i.ViewChild)("menuOpciones"),he("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),ue([Object(i.HostListener)("window:resize",["$event"]),he("design:type",Function),he("design:paramtypes",[]),he("design:returntype",void 0)],e.prototype,"onResize",null),e=ue([Object(i.Component)({selector:"app-producto-presentacion-medida",template:o("vEe0"),styles:[o("25D0")]}),he("design:paramtypes",[ne.ActivatedRoute,p.a,T.a,u.b,h.a,L.a,S.HotkeysService,i.ChangeDetectorRef,le.a,Q])],e)}(),Ce=o("lgnl"),ve=function(){function e(e){this.prescCodigo="",this.prescDetalle="",this.prescAbreviado="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.prescCodigo=e.prescCodigo?e.prescCodigo:this.prescCodigo,this.prescDetalle=e.prescDetalle?e.prescDetalle:this.prescDetalle,this.prescAbreviado=e.prescAbreviado?e.prescAbreviado:this.prescAbreviado},e}(),Ae=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},fe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ge=function(){function e(e,t,o,a,i,r,n,s,d,p){this.route=e,this.api=t,this.activeModal=o,this.toastr=a,this.utilService=i,this.filasService=r,this.atajoService=n,this.cdRef=s,this.archivoService=d,this.ppCajaService=p,this.esModal=!1,this.empresaSeleccionada=new l.a,this.listaEmpresas=Array(),this.invProductoPresentacionCajasTO=new ee,this.classTitulo=c.a.ICON_FILTRAR,this.vistaFormulario=!1,this.accion=null,this.listadoInvProductoPresentacionCajasComboListadoTO=Array(),this.pPresentacionCajaSeleccionado=new ve,this.pPresentacionCajaNuevoSeleccionado=new ve,this.isScreamMd=!0,this.filasTiempo=new D.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.constantes=c.a,this.frmTitulo=c.a.TITULO_FILTROS,this.classTitulo=c.a.ICON_FILTRAR,this.inicializarAtajos()}return e.prototype.ngOnInit=function(){this.empresaModal?(this.esModal=!0,this.activar=!0,this.listaEmpresas.push(this.empresaModal),this.empresaSeleccionada=this.listaEmpresas[0],c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.buscarProductoPresentacionCajas(),this.cambiarEmpresaSeleccionada()):(this.listaEmpresas=this.route.snapshot.data.productoPresentacionCaja,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&(c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo),this.listaEmpresas&&this.cambiarEmpresaSeleccionada()),this.iniciarAgGrid(),this.isScreamMd=!(window.innerWidth<=576),this.cdRef.detectChanges()},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_ESC,function(){return e.cerrarPresCaja(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscarPresentacionCaja");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirPresentacionCaja");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarPresentacionCaja");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevoPresentacionCaja");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EDITAR,function(t){return!e.vistaFormulario&&e.listadoInvProductoPresentacionCajasComboListadoTO.length>0&&e.editarProductoPresentacionCajas(e.pPresentacionCajaSeleccionado),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ELIMINAR,function(t){return!e.vistaFormulario&&e.listadoInvProductoPresentacionCajasComboListadoTO.length>0&&e.eliminarProductoPresentacionCajas(e.pPresentacionCajaSeleccionado),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(t){if(e.vistaFormulario){var o=document.getElementById("btnGuardarPresentacionCaja");return o&&o.click(),!1}})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.vistaFormulario&&e.resetearFormulario(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.invProductoPresentacionCajasTO=new ee,this.limpiarListado(),this.vistaFormulario=!1,this.activar=!0,this.accion=null},e.prototype.buscarProductoPresentacionCajas=function(){this.cargando=!0,this.accion=null,this.limpiarListado();var e={empresa:this.empresaSeleccionada.empCodigo};this.ppCajaService.listarPresentacionCajaTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPresentacionCajaTO=function(e){this.listadoInvProductoPresentacionCajasComboListadoTO=e||[],this.cargando=!1},e.prototype.limpiarListado=function(){this.listadoInvProductoPresentacionCajasComboListadoTO=[],this.actualizarFilas()},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this)&&!this.vistaFormulario,o=this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario;this.opciones=[{label:c.a.ACCION_EDITAR,icon:c.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editarProductoPresentacionCajas(e.pPresentacionCajaSeleccionado):null}},{label:c.a.ACCION_ELIMINAR,icon:c.a.ICON_ELIMINAR,disabled:!o,command:function(t){return o?e.eliminarProductoPresentacionCajas(e.pPresentacionCajaSeleccionado):null}}]},e.prototype.nuevoProductoPresentacionCajas=function(){this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_CREAR,this.frmTitulo=c.a.TITULO_FORM_NUEVO_PRODUCTO_PRESENTACION_CAJA,this.classTitulo=c.a.ICON_CREAR,this.invProductoPresentacionCajasTO=new ee,this.vistaFormulario=!0,this.cargando=!1,this.activar=!1)},e.prototype.guardarProductoPresentacionCajas=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.ppCajaService.formatearInvProductoPresentacionCajasTO(this.invProductoPresentacionCajasTO,this),i={invProductoPresentacionCajasTO:a,accion:"I"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoPresentacionCajasTO",i,c.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.pPresentacionCajaNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"I"),t.toastr.info(e.operacionMensaje,c.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,c.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.resetearFormulario=function(){this.activar=!0,this.frmTitulo=c.a.TITULO_FILTROS,this.classTitulo=c.a.ICON_FILTRAR,this.invProductoPresentacionCajasTO=new ee,this.vistaFormulario=!1,this.accion=null},e.prototype.editarProductoPresentacionCajas=function(e){this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_EDITAR,this.frmTitulo=c.a.TITULO_FORM_EDITAR_PRODUCTO_PRESENTACION_CAJA,this.classTitulo=c.a.ICON_EDITAR,this.invProductoPresentacionCajasTO=new ee(e),this.vistaFormulario=!0,this.cargando=!1,this.activar=!1)},e.prototype.actualizarProductoPresentacionCajas=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.ppCajaService.formatearInvProductoPresentacionCajasTO(this.invProductoPresentacionCajasTO,this),i={invProductoPresentacionCajasTO:a,accion:"M"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoPresentacionCajasTO",i,c.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.pPresentacionCajaNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"U"),t.toastr.info(e.operacionMensaje,c.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,c.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarProductoPresentacionCajas=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this,!0)){var o={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ELIMINAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invProductoPresentacionCajasPK:new Ce.a({prescEmpresa:t.empresaSeleccionada.empCodigo,prescCodigo:e.prescCodigo})};t.api.post("todocompuWS/inventarioWebController/eliminarInvPresentacionCajas",a,c.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?(t.refrescarTabla(e,"D"),t.toastr.info(o.operacionMensaje,c.a.TOAST_CORRECTO)):t.toastr.warning(o.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}})}},e.prototype.cerrarPresCaja=function(){this.pPresentacionCajaNuevoSeleccionado=this.pPresentacionCajaNuevoSeleccionado&&""==this.pPresentacionCajaNuevoSeleccionado.prescCodigo?null:this.pPresentacionCajaNuevoSeleccionado;var e={presCajaSeleccionado:this.pPresentacionCajaNuevoSeleccionado};this.activeModal.close(e)},e.prototype.imprimirPresentacionCaja=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listInvProductoPresentacionCajasComboListadoTO:this.listadoInvProductoPresentacionCajasComboListadoTO};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReportePresentacionCaja",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoPresentacionCaja_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarPresentacionCaja=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listInvProductoPresentacionCajasComboListadoTO:this.listadoInvProductoPresentacionCajasComboListadoTO};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReportePresentacionCaja",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoPresentacionCaja_"):e.toastr.warning(c.a.MSJ_ERROR_EXPORTAR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoInvProductoPresentacionCajasComboListadoTO.length>0)(o=this.listadoInvProductoPresentacionCajasComboListadoTO.slice()).unshift(e),this.listadoInvProductoPresentacionCajasComboListadoTO=o,this.seleccionarFila(0);this.cdRef.detectChanges();break;case"U":var o,a=this.listadoInvProductoPresentacionCajasComboListadoTO.findIndex(function(t){return t.prescCodigo===e.prescCodigo});(o=this.listadoInvProductoPresentacionCajasComboListadoTO.slice())[a]=e,this.listadoInvProductoPresentacionCajasComboListadoTO=o,this.seleccionarFila(a);break;case"D":a=this.listadoInvProductoPresentacionCajasComboListadoTO.findIndex(function(t){return t.prescCodigo===e.prescCodigo});this.listadoInvProductoPresentacionCajasComboListadoTO=this.listadoInvProductoPresentacionCajasComboListadoTO.filter(function(e,t){return t!=a}),this.listadoInvProductoPresentacionCajasComboListadoTO.length>0&&this.seleccionarFila(0===a?0:a-1)}this.activar=!0},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.ppCajaService.generarColumnas(this.esModal),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a,inputEstado:y.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.pPresentacionCajaSeleccionado=t?t.data:null},e.prototype.filaSeleccionar=function(){this.enviarItem(this.pPresentacionCajaSeleccionado)},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.pPresentacionCajaSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},Ae([Object(i.Input)(),fe("design:type",l.a)],e.prototype,"empresaModal",void 0),Ae([Object(i.Input)(),fe("design:type",String)],e.prototype,"razonSocial",void 0),Ae([Object(i.ViewChild)("menuOpciones"),fe("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),Ae([Object(i.HostListener)("window:resize",["$event"]),fe("design:type",Function),fe("design:paramtypes",[]),fe("design:returntype",void 0)],e.prototype,"onResize",null),e=Ae([Object(i.Component)({selector:"app-producto-presentacion-cajas",template:o("j/JE"),styles:[o("wSGy")]}),fe("design:paramtypes",[ne.ActivatedRoute,p.a,T.a,u.b,h.a,L.a,S.HotkeysService,i.ChangeDetectorRef,le.a,ae])],e)}(),be=o("rvcC"),Oe=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Se=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ie=function(){function e(e,t,o,a,i,r,n,s,d,p){this.route=e,this.api=t,this.activeModal=o,this.toastr=a,this.utilService=i,this.filasService=r,this.atajoService=n,this.cdRef=s,this.archivoService=d,this.marcaService=p,this.marcaNuevoSeleccionada=new z,this.esModal=!1,this.empresaSeleccionada=new l.a,this.listaEmpresas=Array(),this.invProductoMarcaTO=new J,this.vistaFormulario=!1,this.accion=null,this.listadoInvProductoMarcaComboListadoTO=Array(),this.isScreamMd=!0,this.filasTiempo=new D.a,this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.constantes=c.a,this.frmTitulo=c.a.TITULO_FILTROS,this.classTitulo=c.a.ICON_FILTRAR,this.inicializarAtajos()}return e.prototype.ngOnInit=function(){this.empresaModal?(this.esModal=!0,this.activar=!0,this.listaEmpresas.push(this.empresaModal),this.empresaSeleccionada=this.listaEmpresas[0],c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.buscarProductoMarcas(),this.cambiarEmpresaSeleccionada()):(this.listaEmpresas=this.route.snapshot.data.productoMarca,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&(c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo),this.listaEmpresas&&this.cambiarEmpresaSeleccionada()),this.iniciarAgGrid(),this.isScreamMd=!(window.innerWidth<=576),this.cdRef.detectChanges()},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_ESC,function(){return e.cerrarProductoMarca(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscarMarcaProducto");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirMarcaProducto");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarMarcaProducto");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevoMarcaProducto");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EDITAR,function(t){return!e.vistaFormulario&&e.listadoInvProductoMarcaComboListadoTO.length>0&&e.editarProductoMarca(e.marcaSeleccionada),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ELIMINAR,function(t){return!e.vistaFormulario&&e.listadoInvProductoMarcaComboListadoTO.length>0&&e.eliminarProductoMarca(e.marcaSeleccionada),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(t){if(e.vistaFormulario){var o=document.getElementById("btnGuardarMarcaProducto");return o&&o.click(),!1}})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.vistaFormulario&&e.resetearFormulario(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.invProductoMarcaTO=new J,this.limpiarListado(),this.vistaFormulario=!1,this.activar=!0,this.accion=null},e.prototype.buscarProductoMarcas=function(){this.cargando=!0,this.accion=null,this.limpiarListado();var e={empresa:this.empresaSeleccionada.empCodigo};this.marcaService.listarInvMarcaTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvMarcaTO=function(e){this.listadoInvProductoMarcaComboListadoTO=e||[],this.actualizarFilas(),this.cargando=!1},e.prototype.limpiarListado=function(){this.listadoInvProductoMarcaComboListadoTO=[],this.marcaSeleccionada=new z,this.actualizarFilas()},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this)&&!this.vistaFormulario,o=this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario;this.opciones=[{label:c.a.ACCION_EDITAR,icon:c.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editarProductoMarca(e.marcaSeleccionada):null}},{label:c.a.ACCION_ELIMINAR,icon:c.a.ICON_ELIMINAR,disabled:!o,command:function(t){return o?e.eliminarProductoMarca(e.marcaSeleccionada):null}}]},e.prototype.nuevoProductoMarca=function(){this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_CREAR,this.frmTitulo=c.a.TITULO_FORM_NUEVO_PRODUCTO_MARCA,this.classTitulo=c.a.ICON_CREAR,this.invProductoMarcaTO=new J,this.vistaFormulario=!0,this.cargando=!1,this.activar=!1)},e.prototype.guardarProductoMarca=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.marcaService.formatearInvProductoMarcaTO(this.invProductoMarcaTO,this),i={invProductoMarcaTO:a,accion:"I"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoMarcaTO",i,c.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.marcaNuevoSeleccionada=a,t.resetearFormulario(),t.refrescarTabla(a,"I"),t.toastr.info(e.operacionMensaje,c.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,c.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.resetearFormulario=function(){this.frmTitulo=c.a.TITULO_FILTROS,this.classTitulo=c.a.ICON_FILTRAR,this.invProductoMarcaTO=new J,this.vistaFormulario=!1,this.accion=null,this.activar=!0},e.prototype.editarProductoMarca=function(e){this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_EDITAR,this.frmTitulo=c.a.TITULO_FORM_EDITAR_PRODUCTO_MARCA,this.classTitulo=c.a.ICON_EDITAR,this.invProductoMarcaTO=new J(e),this.vistaFormulario=!0,this.cargando=!1,this.activar=!1)},e.prototype.actualizarProductoMarca=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.marcaService.formatearInvProductoMarcaTO(this.invProductoMarcaTO,this),i={invProductoMarcaTO:a,accion:"M"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoMarcaTO",i,c.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.marcaNuevoSeleccionada=a,t.resetearFormulario(),t.refrescarTabla(a,"U"),t.toastr.info(e.operacionMensaje,c.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,c.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarProductoMarca=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this,!0)){var o={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ELIMINAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invProductoMarcaPK:new be.a({marEmpresa:t.empresaSeleccionada.empCodigo,marCodigo:e.marCodigo})};t.api.post("todocompuWS/inventarioWebController/eliminarInvProductoMarca",a,c.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?(t.refrescarTabla(e,"D"),t.toastr.info(o.operacionMensaje,c.a.TOAST_CORRECTO)):t.toastr.warning(o.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}})}},e.prototype.cerrarProductoMarca=function(){this.marcaNuevoSeleccionada=this.marcaNuevoSeleccionada&&""==this.marcaNuevoSeleccionada.marCodigo?null:this.marcaNuevoSeleccionada;var e={marcaSeleccionado:this.marcaNuevoSeleccionada};this.activeModal.close(e)},e.prototype.imprimirMarcaProducto=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listInvProductoMarcaComboListadoTO:this.listadoInvProductoMarcaComboListadoTO};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteProductoMarca",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoMarcaProductos_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarMarcaProducto=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listInvProductoMarcaComboListadoTO:this.listadoInvProductoMarcaComboListadoTO};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteProductoMarca",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoMarcaProductos_"):e.toastr.warning(c.a.MSJ_ERROR_EXPORTAR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoInvProductoMarcaComboListadoTO.length>0)(o=this.listadoInvProductoMarcaComboListadoTO.slice()).unshift(e),this.listadoInvProductoMarcaComboListadoTO=o,this.seleccionarFila(0);break;case"U":var o,a=this.listadoInvProductoMarcaComboListadoTO.findIndex(function(t){return t.marCodigo===e.marCodigo});(o=this.listadoInvProductoMarcaComboListadoTO.slice())[a]=e,this.listadoInvProductoMarcaComboListadoTO=o,this.seleccionarFila(a);break;case"D":a=this.listadoInvProductoMarcaComboListadoTO.findIndex(function(t){return t.marCodigo===e.marCodigo});this.listadoInvProductoMarcaComboListadoTO=this.listadoInvProductoMarcaComboListadoTO.filter(function(e,t){return t!=a}),this.listadoInvProductoMarcaComboListadoTO.length>0&&this.seleccionarFila(0===a?0:a-1)}this.activar=!0},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.marcaService.generarColumnas(this.esModal),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a,inputEstado:y.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.marcaSeleccionada=t?t.data:null},e.prototype.filaSeleccionar=function(){this.enviarItem(this.marcaSeleccionada)},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.marcaSeleccionada=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},Oe([Object(i.Input)(),Se("design:type",l.a)],e.prototype,"empresaModal",void 0),Oe([Object(i.Input)(),Se("design:type",z)],e.prototype,"marcaSeleccionada",void 0),Oe([Object(i.Input)(),Se("design:type",String)],e.prototype,"razonSocial",void 0),Oe([Object(i.ViewChild)("menuOpciones"),Se("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),Oe([Object(i.HostListener)("window:resize",["$event"]),Se("design:type",Function),Se("design:paramtypes",[]),Se("design:returntype",void 0)],e.prototype,"onResize",null),e=Oe([Object(i.Component)({selector:"app-producto-marca",template:o("XHlA"),styles:[o("9og1")]}),Se("design:paramtypes",[ne.ActivatedRoute,p.a,T.a,u.b,h.a,L.a,S.HotkeysService,i.ChangeDetectorRef,le.a,H])],e)}(),Ee=o("K3zs"),Re=o("yqOf"),Te=o("auvS"),_e=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Pe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ne=function(){function e(e,t,o,a){this.activeModal=e,this.productoService=t,this.atajoService=o,this.ventaService=a,this.constantes=c.a,this.etiquetas=[],this.etiquetasCostos=[],this.definirAtajosDeTeclado(),this.configAutonumeric={decimalPlaces:6,decimalPlacesRawValue:6,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:6,maximumValue:"99999999999.99",minimumValue:"0"}}return e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.activeModal.close(),!1}))},e.prototype.ngOnInit=function(){this.accion===c.a.ACCION_CONSULTAR&&(this.configAutonumeric.readOnly=!0),this.tablaPrecios(),this.tablaCostos(),setTimeout(function(){var e=document.getElementById("Precio_0");e&&(e.autofocus=!0),e&&e.focus()},50)},e.prototype.verificarPermiso=function(e,t){return this.productoService.verificarPermiso(e,this,t)},e.prototype.tablaPrecios=function(){this.congeladasCol=[{field:"tag",header:c.a.TAG_OPCIONES}],this.scrollableCols=[],this.inputs=[{tag:c.a.TAG_PRECIO},{tag:c.a.TAG_DESCUENTO},{tag:c.a.TAG_CANTIDAD},{tag:c.a.TAG_UTILIDAD}];for(var e=0;e<this.etiquetas.length;e++){var t=this.ventaService.obtenerCampoDesdeReferencia(this.etiquetas[e].field);this.scrollableCols.push({field:t,header:this.etiquetas[e].value}),this.inputs[0][t]=this.producto[t],this.inputs[1][t]=this.producto["proDescuento"+(e+1)],this.inputs[2][t]=this.producto["proCantidad"+(e+1)],this.inputs[3][t]=this.producto["proMargenUtilidad"+(e+1)]}},e.prototype.tablaCostos=function(){this.congeladasColCostos=[{field:"tag",header:c.a.TAG_PRECIOS}],this.scrollableColsCostos=[],this.inputsCostos=[{tag:"Costo"}];for(var e=0;e<this.etiquetasCostos.length;e++){var t=this.ventaService.obtenerCampoDesdeReferencia(this.etiquetasCostos[e].field);this.scrollableColsCostos.push({field:t,header:this.etiquetasCostos[e].value}),this.inputsCostos[0][t]=this.producto[t]}},e.prototype.aceptar=function(){this.activeModal.close()},e.prototype.cambiarValor=function(e,t,o){switch(t){case"Precio":this.producto["proPrecio"+(o+1)]=e;break;case"Descuento":this.producto["proDescuento"+(o+1)]=e;break;case"Cantidad":this.producto["proCantidad"+(o+1)]=e;break;case"Utilidad":this.producto["proMargenUtilidad"+(o+1)]=e;break;case"Costo":this.producto["proCostoReferencial"+(o+1)]=e}},_e([Object(i.Input)(),Pe("design:type",B.a)],e.prototype,"producto",void 0),_e([Object(i.Input)(),Pe("design:type",String)],e.prototype,"accion",void 0),_e([Object(i.Input)(),Pe("design:type",Object)],e.prototype,"etiquetas",void 0),_e([Object(i.Input)(),Pe("design:type",Object)],e.prototype,"etiquetasCostos",void 0),e=_e([Object(i.Component)({selector:"app-precios",template:o("8Cr9")}),Pe("design:paramtypes",[T.a,Re.a,S.HotkeysService,Te.a])],e)}(),ye=o("Vlg3"),De=o("xbly"),Le=o("40E6"),Me=o("egWh"),xe=o("kbPt"),Fe=o("9CJC"),we=function(){function e(e){this.adjSecuencial=null,this.adjArchivo=null,this.invProducto=new Fe.a,this.imagenString=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.adjSecuencial=e.adjSecuencial?e.adjSecuencial:this.adjSecuencial,this.adjArchivo=e.adjArchivo?e.adjArchivo:this.adjArchivo,this.invProducto=e.invProducto?e.invProducto:this.invProducto,this.imagenString=e.imagenString?e.imagenString:this.imagenString},e}(),Ge=o("EEhU"),je=o("XwtN"),Ue=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Be=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ve=function(){function e(e,t){this.activeModal=e,this.atajoService=t,this.constantes=c.a,this.definirAtajosDeTeclado()}return e.prototype.ngOnInit=function(){},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.activeModal.dismiss("Cross click"),!1}))},e.prototype.cerrar=function(){this.activeModal.dismiss("Cross click")},e.prototype.guardar=function(){this.activeModal.close(this.codigoBarra)},Ue([Object(i.Input)(),Be("design:type",Object)],e.prototype,"codigoBarra",void 0),e=Ue([Object(i.Component)({selector:"app-codigo-barras",template:o("g/d4"),styles:[o("ctgr")]}),Be("design:paramtypes",[T.a,S.HotkeysService])],e)}(),ke=o("sXuD"),We=o("6E6y"),ze=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Je=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ke=function(){function e(e,t,o,a,r,n,s,l,d,p,u,h,m,C,v){this.productoCategoriaService=e,this.atajoService=t,this.utilService=o,this.productoService=a,this.productoTipoService=r,this.productoMedidaService=n,this.productoMarcaService=s,this.planCuentasService=l,this.productoPresentacionMedidaService=d,this.productoPresentacionCajaService=p,this.toastr=u,this.modalService=h,this.auth=m,this.router=C,this.api=v,this.constantes=c.a,this.accion=null,this.rptaRepetido=null,this.vistaFormulario=!1,this.enviarAccion=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.invProductoEtiquetas=new xe.a,this.marcaSeleccionada=new z,this.tamanioEstructura=0,this.codigoCuenta=null,this.rptaCuentaVenta=null,this.rptaCuentaCompra=null,this.codigoAnterior="",this.maxLengthCompras=!0,this.maxLengthCostos=!0,this.maxLengthVentas=!0,this.isScreamMd=!0,this.cargando=!0,this.empresaExtranjera=!1,this.activar=!0,this.puedeModificarIva=!0,this.listadoSustentos=new Array,this.listadoTipos=new Array,this.listadoMedidas=new Array,this.listadoOpcionesIVA=new Array,this.listadoMarcas=new Array,this.listadoPresentacionesMedida=new Array,this.listadoPresentacionesCaja=new Array,this.listadoConceptos=new Array,this.etiquetas=[],this.etiquetasCostos=[],this.mostrarCampos=!0,this.listadoImagenes=new Array,this.listadoImagenesEliminados=new Array,this.mostrarFileUploadNuevo=!0,this.visualizarImagen=!1,this.imagen=!1,this.mostrarCreditoTributario=!1,this.cuentasValidoC=!0,this.cuentasValidoV=!0,this.cuentasValidoA=!0,this.router.url.toString().indexOf("pedidoProducto")>-1&&(this.mostrarCampos=!1),this.producto=new B.a,this.cuentaCompras=new re.a,this.cuentaCostos=new re.a,this.cuentaVentas=new re.a,this.definirAtajosDeTeclado(),this.configAutonumeric={decimalPlaces:6,decimalPlacesRawValue:6,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:6,maximumValue:"99999999999.99",minimumValue:"0"},this.configAutonumericEnteros={decimalPlaces:0,decimalPlacesRawValue:0,decimalPlacesShownOnBlur:0,decimalPlacesShownOnFocus:0,maximumValue:"999999999",minimumValue:"0"}}return e.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.activar=this.parametros.activar,this.seleccionado=this.parametros.objetoSeleccionado,this.producto.proEmpresa=c.a.KEY_EMPRESA_SELECT;var e={empresa:c.a.KEY_EMPRESA_SELECT,tipoComprobante:"",accion:c.a.ACCION_COMBO};for(var t in this.empresaSeleccionada&&this.empresaSeleccionada.empPais!=c.a.LABEL_ECUADOR&&(this.empresaExtranjera=!0),this.productoService.obtenerDatosParaCrudProductos(e,this,c.a.KEY_EMPRESA_SELECT),this.actuarSegunAccion(),(!this.listadoCategorias||this.listadoCategorias&&this.listadoCategorias.length<=0)&&this.productoCategoriaService.listarInvProductoCategoriaTO(e,this,c.a.KEY_EMPRESA_SELECT),a)this.listadoOpcionesIVA.push(new W.a({clave:a[t],valor:t}))},e.prototype.activarCreditoTributario=function(){this.producto.proIva==this.listadoOpcionesIVA[0].clave?this.mostrarCreditoTributario=!0:(this.mostrarCreditoTributario=!1,this.producto.proCreditoTributario=!1)},e.prototype.despuesDeObtenerDatosParaCrudProductos=function(e){var t=this;this.tamanioEstructura=e.tamanioEstructura,this.listadoTipos=e.listadoTipos,this.listadoMarcas=e.listadoMarcas,this.listadoSustentos=e.listadoSustentos,this.listadoMedidas=e.listadoMedidas,this.listadoPresentacionesMedida=e.listadoPresentacionesMedida,this.listadoConceptos=e.listadoConceptos,this.listadoPresentacionesCaja=e.listadoPresentacionesCaja,this.listadoTipos&&this.listadoTipos.length>0&&(this.producto.tipCodigo=this.producto.tipCodigo?this.producto.tipCodigo:this.listadoTipos[0].tipCodigo),this.listadoMarcas&&this.listadoMarcas.length>0&&(this.marcaSeleccionada=this.producto.marCodigo?this.listadoMarcas.find(function(e){return e.marCodigo===t.producto.marCodigo}):this.listadoMarcas[0],this.producto.marCodigo=this.marcaSeleccionada.marCodigo),this.listadoMedidas&&this.listadoMedidas.length>0&&(this.producto.medCodigo=this.producto.medCodigo?this.producto.medCodigo:this.listadoMedidas[0].medidaCodigo),this.listadoPresentacionesMedida&&this.listadoPresentacionesMedida.length>0&&(this.producto.presUCodigo=this.producto.presUCodigo?this.producto.presUCodigo:this.listadoPresentacionesMedida[0].presuCodigo),this.listadoPresentacionesCaja&&this.listadoPresentacionesCaja.length>0&&(this.producto.presCCodigo=this.producto.presCCodigo?this.producto.presCCodigo:this.listadoPresentacionesCaja[0].prescCodigo),this.listadoCategorias&&this.listadoCategorias.length>0&&(this.producto.catCodigo=this.producto.catCodigo?this.producto.catCodigo:this.listadoCategorias[0].catCodigo),this.listadoOpcionesIVA&&this.listadoOpcionesIVA.length>0&&(this.producto.proIva=this.producto.proIva?this.producto.proIva:this.listadoOpcionesIVA[0].clave,this.producto.proIva==this.listadoOpcionesIVA[0].clave&&(this.mostrarCreditoTributario=!0)),e.invProductoEtiquetas&&this.despuesDeObtenerEtiquetas(e.invProductoEtiquetas),null!=this.producto.proCuentaVenta&&null!=this.producto.proCuentaInventario||(null==this.producto.proCuentaVenta?this.maxLengthVentas=!1:this.maxLengthCompras=!1),null==this.producto.proCuentaCostoAutomatico&&null==this.producto.proCuentaInventario&&(this.maxLengthCostos=!0),this.extraerValoresIniciales()},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmProductoDatos?e.frmProductoDatos.value:null)),e.productoInicial=JSON.parse(JSON.stringify(e.producto?e.producto:null)),e.imagenesIniciales=JSON.parse(JSON.stringify(e.listadoImagenes?e.listadoImagenes:null))},100)},e.prototype.despuesDeObtenerEtiquetas=function(e){for(var t in this.invProductoEtiquetas=new xe.a(e),this.invProductoEtiquetas)t.toString().indexOf("eprecio")>=0&&""!=this.invProductoEtiquetas[t]&&this.etiquetas.push({field:t,value:this.invProductoEtiquetas[t]}),t.toString().indexOf("ecosto")>=0&&""!=this.invProductoEtiquetas[t]&&this.etiquetasCostos.push({field:t,value:this.invProductoEtiquetas[t]})},e.prototype.verificarPermiso=function(e,t){return this.productoService.verificarPermiso(e,this,t)},e.prototype.espacios=function(){for(var e=this.producto.proNombre,t=0;t<e.length;t++)e=(e=(e=e.split("   ").join(" ")).split("  ").join(" ")).split("'").join("");this.producto.proNombre=e},e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardarProducto");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFormulario");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarProducto");return e&&e.click(),!1}))},e.prototype.despuesDeListarAnxSustentoTO=function(e){this.listadoSustentos=e,this.cargando=!1},e.prototype.despuesDeListarInvProductoTipoTO=function(e){this.listadoTipos=e,this.cargando=!1},e.prototype.despuesDeListarInvMedidaTO=function(e){this.listadoMedidas=e,this.cargando=!1},e.prototype.despuesDeListarInvMarcaTO=function(e){this.listadoMarcas=e,this.cargando=!1},e.prototype.despuesDeListarPresentacionUnidadTO=function(e){this.listadoPresentacionesMedida=e,this.cargando=!1},e.prototype.despuesDeListarPresentacionCajaTO=function(e){this.listadoPresentacionesCaja=e,this.cargando=!1},e.prototype.despuesDeListarAnxConceptoTO=function(e){this.listadoConceptos=e,this.cargando=!1},e.prototype.actuarSegunAccion=function(){switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_CONSULTAR:this.obtenerInvProductoTO()}},e.prototype.despuesDeListarInvProductoCategoriaTO=function(e){this.listadoCategorias=e,this.cargando=!1},e.prototype.obtenerInvProductoTO=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,codigo:this.seleccionado?this.seleccionado.proCodigoPrincipal:""};this.productoService.obtenerProducto(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerProducto=function(e){var t=this,o={empresa:c.a.KEY_EMPRESA_SELECT,producto:this.seleccionado.proCodigoPrincipal};this.api.post("todocompuWS/inventarioWebController/getPuedeEliminarProducto",o,c.a.KEY_EMPRESA_SELECT).then(function(e){e&&(t.puedeModificarIva=e.extraInfo)}).catch(function(e){return t.utilService.handleError(e,t)}),this.producto=new B.a(e),this.cuentaCompras.cuentaCodigo=this.producto.proCuentaInventario,this.cuentaVentas.cuentaCodigo=this.producto.proCuentaVenta,this.cuentaCostos.cuentaCodigo=this.producto.proCuentaCostoAutomatico,this.codigoAnterior=this.producto.proCodigoPrincipal,this.accion===c.a.ACCION_EDITAR&&this.verImagenes(),this.buscarPlanCuentas()},e.prototype.insertarProducto=function(e){if(this.cargando=!0,this.producto.usrEmpresa=c.a.KEY_EMPRESA_SELECT,this.producto.proEmpresa=c.a.KEY_EMPRESA_SELECT,this.producto.usrInsertaProducto=this.auth.getCodigoUser(),this.producto.proCuentaInventario=this.producto.proCuentaInventario?this.producto.proCuentaInventario:null,this.producto.proCuentaVenta=this.producto.proCuentaVenta?this.producto.proCuentaVenta:null,this.validarRequiredCuentas(),this.validarAntesDeEnviar(e)){this.completarDatosAPartirDeCombos();var t={invProductoTO:this.producto,listaImagenes:this.listadoImagenes};this.productoService.insertarProducto(t,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.completarDatosAPartirDeCombos=function(){var e=this;this.marcaSeleccionada=this.producto.marCodigo?this.listadoMarcas.find(function(t){return t.marCodigo===e.producto.marCodigo}):this.listadoMarcas[0],this.producto.catEmpresa=this.producto.catCodigo?c.a.KEY_EMPRESA_SELECT:"",this.producto.marEmpresa=this.producto.marCodigo?c.a.KEY_EMPRESA_SELECT:"",this.producto.medEmpresa=this.producto.medCodigo?c.a.KEY_EMPRESA_SELECT:"",this.producto.presCEmpresa=this.producto.presCCodigo?c.a.KEY_EMPRESA_SELECT:"",this.producto.presUEmpresa=this.producto.presUCodigo?c.a.KEY_EMPRESA_SELECT:"",this.producto.tipEmpresa=this.producto.tipCodigo?c.a.KEY_EMPRESA_SELECT:""},e.prototype.validarAntesDeEnviar=function(e){this.mostrarCampos&&this.validarCuenta("C"),this.mostrarCampos&&this.validarCuenta("V"),this.mostrarCampos&&this.validarCuenta("A");var t=this.utilService.establecerFormularioTocado(e);return this.producto.proCuentaInventario||this.producto.proCuentaVenta||this.producto.proCuentaCostoAutomatico||!this.mostrarCampos?this.producto.proCuentaInventario&&!this.producto.proCuentaVenta&&!this.producto.proCuentaCostoAutomatico&&this.mostrarCampos?(this.toastr.error(c.a.MSJ_LLENE_CAMPO_VENTAS_O_COSTO_AUTOMATICO,c.a.MSJ_CAMPOS_INVALIDOS),this.cargando=!1,!1):!this.producto.proCuentaInventario&&this.producto.proCuentaVenta&&!this.producto.proCuentaCostoAutomatico&&this.mostrarCampos?(this.toastr.error(c.a.MSJ_LLENE_CAMPO_COMPRAS_O_COSTO_AUTOMATICO,c.a.MSJ_CAMPOS_INVALIDOS),this.cargando=!1,!1):!this.producto.proCuentaInventario&&!this.producto.proCuentaVenta&&this.producto.proCuentaCostoAutomatico&&this.mostrarCampos?(this.toastr.error(c.a.MSJ_LLENE_CAMPO_COMPRAS_O_VENTAS,c.a.MSJ_CAMPOS_INVALIDOS),this.cargando=!1,!1):!t||!e.invalid||(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_CAMPOS_INVALIDOS),this.cargando=!1,!1):(this.toastr.error(c.a.MSJ_LLENE_CAMPO_VENTAS_O_COMPRAS_COSTO,c.a.MSJ_CAMPOS_INVALIDOS),this.cargando=!1,this.error1=!1,this.cuentasValidoC=!1,this.cuentasValidoA=!1,this.cuentasValidoV=!1,!1)},e.prototype.despuesDeInsertarProducto=function(e){this.cargando=!1,this.producto.proCodigoPrincipal=e,"9999999"==this.marcaSeleccionada.marCodigo?this.producto.proNombre=this.producto.proNombre:this.producto.proNombre=this.marcaSeleccionada.marDetalle+" > "+this.producto.proNombre,this.enviarAccion.emit({accion:c.a.ACCION_CREADO,objeto:this.producto})},e.prototype.actualizarProducto=function(e){if(this.sePuedeCancelar())this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}),this.toastr.warning(c.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,c.a.TOAST_INFORMACION);else if(this.cargando=!0,this.validarAntesDeEnviar(e)){this.completarDatosAPartirDeCombos();var t={invProductoTO:this.producto,codigoCambiarLlave:this.codigoAnterior,listaImagenesInsertar:this.listadoImagenes,listaImagenesEliminar:this.listadoImagenesEliminados};this.productoService.modificarProducto(t,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.sePuedeCancelar=function(){return this.utilService.puedoCancelar(this.valoresIniciales,this.frmProductoDatos)&&this.utilService.compararObjetos(this.imagenesIniciales,this.listadoImagenes)&&this.utilService.compararObjetos(this.productoInicial,this.producto)},e.prototype.despuesDeModificarProducto=function(e){this.cargando=!1,"9999999"==this.marcaSeleccionada.marCodigo?this.producto.proNombre=this.producto.proNombre:this.producto.proNombre=this.marcaSeleccionada.marDetalle+" > "+this.producto.proNombre;var t=new ke.a;t.proCodigoPrincipal=this.producto.proCodigoPrincipal,t.proNombre=this.producto.proNombre,t.proCategoria=e?e.prdCategoria:null,t.detalleMedida=e?e.prdMedida:null,t.proInactivo=!!e&&e.prdInactivo,this.enviarAccion.emit({accion:c.a.ACCION_MODIFICADO,objeto:t})},e.prototype.inicializarMarca=function(e,t){if(e&&t)return e.marCodigo===t.marCodigo},e.prototype.cancelar=function(){var e=this;switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_CREAR:if(this.sePuedeCancelar())this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})}break;case c.a.ACCION_CONSULTAR:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});break;default:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})}},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit(this.activar)},e.prototype.buscarConfiguracionDeCuentas=function(e,t,o){if(this.utilService.validarKeyBuscar(e.keyCode)&&t){var a={empresa:c.a.KEY_EMPRESA_SELECT,buscar:t};switch(o){case"C":(""==this.cuentaCompras.empCodigo||this.producto.proCuentaInventario&&this.producto.proCuentaInventario.length<=this.tamanioEstructura)&&this.producto.proCuentaInventario&&this.abrirModalDeCuentas(e,a,o);break;case"V":(""==this.cuentaVentas.empCodigo||this.producto.proCuentaVenta&&this.producto.proCuentaVenta.length<=this.tamanioEstructura)&&this.abrirModalDeCuentas(e,a,o);break;case"A":(""==this.cuentaCostos.empCodigo||this.producto.proCuentaCostoAutomatico&&this.producto.proCuentaCostoAutomatico.length<=this.tamanioEstructura)&&this.producto.proCuentaCostoAutomatico&&this.abrirModalDeCuentas(e,a,o)}}},e.prototype.abrirModalDeCuentas=function(e,t,o){var a=this;e.srcElement.blur(),e.preventDefault();var i=this.modalService.open(ie.a,{size:"lg",windowClass:"miSize",backdrop:"static"});i.componentInstance.filtrosBusquedaPlanCuenta=t,i.componentInstance.tamanioEstructura=this.tamanioEstructura,i.result.then(function(e){if(e)switch(o){case"C":a.cuentaCompras=e,a.producto.proCuentaInventario=e.cuentaCodigo,a.validarRequiredCuentas(),document.getElementById("tipCuentaVenta").focus();break;case"V":a.cuentaVentas=e,a.producto.proCuentaVenta=e.cuentaCodigo,a.validarRequiredCuentas(),a.producto.proCuentaInventario?a.empresaExtranjera?a.mostrarFileUploadNuevo?document.getElementById("imageUploadNuevo").focus():document.getElementById("imageUploadEditar").focus():document.getElementById("susCodigo").focus():document.getElementById("tipCuentaCosto").focus();break;case"A":a.cuentaCostos=e,a.producto.proCuentaCostoAutomatico=e.cuentaCodigo,a.validarRequiredCuentas(),a.empresaExtranjera?a.mostrarFileUploadNuevo?document.getElementById("imageUploadNuevo").focus():document.getElementById("imageUploadEditar").focus():document.getElementById("susCodigo").focus()}},function(){})},e.prototype.buscarPlanCuentas=function(){var e=this;if(this.accion===c.a.ACCION_EDITAR||this.accion===c.a.ACCION_CONSULTAR){if(this.producto.proCuentaInventario){var t={empresa:c.a.KEY_EMPRESA_SELECT,buscar:this.producto.proCuentaInventario};this.planCuentasService.getListaBuscarConCuentas(t,c.a.KEY_EMPRESA_SELECT).then(function(t){0!=t.length&&(e.cuentaCompras=t[0])})}if(this.producto.proCuentaVenta){t={empresa:c.a.KEY_EMPRESA_SELECT,buscar:this.producto.proCuentaVenta};this.planCuentasService.getListaBuscarConCuentas(t,c.a.KEY_EMPRESA_SELECT).then(function(t){0!=t.length&&(e.cuentaVentas=t[0])})}if(this.producto.proCuentaCostoAutomatico){t={empresa:c.a.KEY_EMPRESA_SELECT,buscar:this.producto.proCuentaCostoAutomatico};this.planCuentasService.getListaBuscarConCuentas(t,c.a.KEY_EMPRESA_SELECT).then(function(t){0!=t.length&&(e.cuentaCostos=t[0])})}}this.extraerValoresIniciales()},e.prototype.validarRequiredCuentas=function(){return this.maxLengthVentas=!this.producto.proCuentaInventario&&!this.producto.proCuentaCostoAutomatico,this.maxLengthCompras=!this.producto.proCuentaVenta&&!this.producto.proCuentaCostoAutomatico,this.maxLengthCostos=!this.producto.proCuentaVenta&&!this.producto.proCuentaInventario,this.producto.proCuentaInventario&&this.producto.proCuentaVenta&&this.producto.proCuentaCostoAutomatico||this.producto.proCuentaInventario&&this.producto.proCuentaVenta||this.producto.proCuentaVenta&&this.producto.proCuentaCostoAutomatico?(this.cargando=!1,this.cuentasValidoC=!0,this.cuentasValidoA=!0,this.cuentasValidoV=!0,!1):this.producto.proCuentaInventario||this.producto.proCuentaVenta||this.producto.proCuentaCostoAutomatico||!this.mostrarCampos?this.producto.proCuentaInventario&&!this.producto.proCuentaVenta&&!this.producto.proCuentaCostoAutomatico&&this.mostrarCampos?(this.cargando=!1,this.cuentasValidoC=!0,this.cuentasValidoA=!1,this.cuentasValidoV=!1,!1):!this.producto.proCuentaInventario&&this.producto.proCuentaVenta&&!this.producto.proCuentaCostoAutomatico&&this.mostrarCampos?(this.cargando=!1,this.cuentasValidoC=!1,this.cuentasValidoA=!1,this.cuentasValidoV=!0,!1):!this.producto.proCuentaInventario&&!this.producto.proCuentaVenta&&this.producto.proCuentaCostoAutomatico&&this.mostrarCampos?(this.cargando=!1,this.cuentasValidoC=!1,this.cuentasValidoA=!0,this.cuentasValidoV=!1,!1):void 0:(this.cargando=!1,this.cuentasValidoC=!1,this.cuentasValidoA=!1,this.cuentasValidoV=!1,!1)},e.prototype.buscarPlanCuentasTipo=function(e){var t=this;if(this.accion===c.a.ACCION_EDITAR||this.accion===c.a.ACCION_CREAR)switch(e){case"C":if(this.producto.proCuentaInventario){var o={empresa:c.a.KEY_EMPRESA_SELECT,buscar:this.producto.proCuentaInventario};this.planCuentasService.getListaBuscarConCuentas(o,c.a.KEY_EMPRESA_SELECT).then(function(e){0!=e.length?t.cuentaCompras=e[0]:(t.cuentaCompras.cuentaCodigo=null,t.cuentaCompras.cuentaDetalle=null,t.producto.proCuentaInventario=null)})}break;case"V":if(this.producto.proCuentaVenta){o={empresa:c.a.KEY_EMPRESA_SELECT,buscar:this.producto.proCuentaVenta};this.planCuentasService.getListaBuscarConCuentas(o,c.a.KEY_EMPRESA_SELECT).then(function(e){0!=e.length?t.cuentaVentas=e[0]:(t.cuentaVentas.cuentaCodigo=null,t.cuentaVentas.cuentaDetalle=null,t.producto.proCuentaVenta=null)})}break;case"A":if(this.producto.proCuentaCostoAutomatico){o={empresa:c.a.KEY_EMPRESA_SELECT,buscar:this.producto.proCuentaCostoAutomatico};this.planCuentasService.getListaBuscarConCuentas(o,c.a.KEY_EMPRESA_SELECT).then(function(e){0!=e.length?t.cuentaCostos=e[0]:(t.cuentaCostos.cuentaCodigo=null,t.cuentaCostos.cuentaDetalle=null,t.producto.proCuentaCostoAutomatico=null)})}}},e.prototype.validarCuenta=function(e){switch(e){case"C":this.producto.proCuentaInventario?(this.producto.proCuentaInventario.length===this.tamanioEstructura?this.buscarPlanCuentasTipo("C"):(this.cuentaCompras.cuentaCodigo=null,this.cuentaCompras.cuentaDetalle=null,this.producto.proCuentaInventario=null),this.validarRequiredCuentas()):(this.cuentaCompras.cuentaCodigo=null,this.cuentaCompras.cuentaDetalle=null,this.producto.proCuentaInventario=null);break;case"V":this.producto.proCuentaVenta?(this.producto.proCuentaVenta.length===this.tamanioEstructura?this.buscarPlanCuentasTipo("V"):(this.cuentaVentas.cuentaCodigo=null,this.cuentaVentas.cuentaDetalle=null,this.producto.proCuentaVenta=null),this.validarRequiredCuentas()):(this.cuentaVentas.cuentaCodigo=null,this.cuentaVentas.cuentaDetalle=null,this.producto.proCuentaVenta=null);break;case"A":this.producto.proCuentaCostoAutomatico?(this.producto.proCuentaCostoAutomatico.length===this.tamanioEstructura?this.buscarPlanCuentasTipo("A"):(this.cuentaCostos.cuentaCodigo=null,this.cuentaCostos.cuentaDetalle=null,this.producto.proCuentaCostoAutomatico=null),this.validarRequiredCuentas()):(this.cuentaCostos.cuentaCodigo=null,this.cuentaCostos.cuentaDetalle=null,this.producto.proCuentaCostoAutomatico=null)}},e.prototype.verImagenes=function(){this.cargando=!0,this.productoService.consultarImagenes({invProductoPK:this.obtenerPk()},this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeConsultarImagenes=function(e){var t=this,o=e;if(this.cargando=!1,o&&o.length>0)if(this.accion===c.a.ACCION_CONSULTAR){var a=[];o.forEach(function(e){a.push({source:e.imagenString,alt:"",title:t.empresaSeleccionada.empNombre})}),this.modalService.open(Ge.a,{size:"lg",windowClass:"miSize",backdrop:"static"}).componentInstance.listaImagenes=a}else this.mostrarFileUploadNuevo=!1,this.listadoImagenes=o;else this.mostrarFileUploadNuevo=!0,this.accion===c.a.ACCION_CONSULTAR&&this.toastr.warning(c.a.MSJ_NO_HAY_IMAGENES)},e.prototype.crearInvAdjuntosProductosWebTO=function(e){var t=new we,o=e;return t.imagenString=o,t},e.prototype.seleccionarImagenes=function(e){if(e&&e.files)for(var t=0;t<e.files.length;t++)this.convertirFiles(e.files[t])},e.prototype.convertirFiles=function(e){var t=this;if(e.size<=1e6){var o=new FileReader;o.readAsDataURL(e),o.onload=function(){if(o.result){var e=t.crearInvAdjuntosProductosWebTO(o.result);if(0===t.listadoImagenes.length)t.listadoImagenes.push(e);else!t.listadoImagenes.find(function(t){return t.imagenString===e.imagenString})&&t.listadoImagenes.push(e)}}}},e.prototype.eliminarItem=function(e){var t=this;if(e.file){var o=new FileReader;o.readAsDataURL(e.file),o.onload=function(){if(o.result){var e=t.crearInvAdjuntosProductosWebTO(o.result);t.eliminar(e)}}}},e.prototype.eliminar=function(e){if(e.adjSecuencial)var t=this.listadoImagenes.findIndex(function(t){return t.adjSecuencial===e.adjSecuencial});else t=this.listadoImagenes.findIndex(function(t){return t.imagenString===e.imagenString});var o=this.listadoImagenes.slice();o.splice(t,1),this.listadoImagenes=o,e.adjSecuencial&&this.listadoImagenesEliminados.push(e)},e.prototype.visualizar=function(e){this.imagen=e,this.visualizarImagen=!0},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.mostrarPPCajas=function(){var e=this,t=this.modalService.open(ge,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.razonSocial=""!=this.producto.proNombre?"- "+this.producto.proNombre:this.producto.proNombre,t.componentInstance.cajaSeleccionado=this.producto.presCCodigo;var o={empresa:c.a.KEY_EMPRESA_SELECT};t.result.then(function(t){e.productoPresentacionCajaService.listarPresentacionCajaTO(o,e,c.a.KEY_EMPRESA_SELECT),null!=t.presCajaSeleccionado&&(e.producto.presCCodigo=t.presCajaSeleccionado.prescCodigo,e.producto.presCEmpresa=t.presCajaSeleccionado.prescEmpresa),e.definirAtajosDeTeclado()},function(){e.productoPresentacionCajaService.listarPresentacionCajaTO(o,e,c.a.KEY_EMPRESA_SELECT),e.definirAtajosDeTeclado()})},e.prototype.medidaProducto=function(){var e=this,t=this.modalService.open(Le.a,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.razonSocial=""!=this.producto.proNombre?"- "+this.producto.proNombre:this.producto.proNombre;var o={empresa:c.a.KEY_EMPRESA_SELECT};t.result.then(function(t){e.productoMedidaService.listarInvMedidaTO(o,e,c.a.KEY_EMPRESA_SELECT),e.productoPresentacionMedidaService.listaPresentacionUnidadTO(o,e,c.a.KEY_EMPRESA_SELECT),null!=t.medidaSeleccionada&&(e.producto.medCodigo=t.medidaSeleccionada.medCodigo,e.producto.medEmpresa=t.medidaSeleccionada.medEmpresa),e.definirAtajosDeTeclado()},function(){e.productoMedidaService.listarInvMedidaTO(o,e,c.a.KEY_EMPRESA_SELECT),e.definirAtajosDeTeclado()})},e.prototype.mostrarCodigoBarras=function(){var e=this,t=this.modalService.open(Ve,{size:"lg",windowClass:"miSize",backdrop:"static"}),o={proCodigoBarra:this.producto.proCodigoBarra,proCodigoBarra2:this.producto.proCodigoBarra2,proCodigoBarra3:this.producto.proCodigoBarra3,proCodigoBarra4:this.producto.proCodigoBarra4,proCodigoBarra5:this.producto.proCodigoBarra5};t.componentInstance.codigoBarra=o,t.result.then(function(t){e.producto.proCodigoBarra=t.proCodigoBarra,e.producto.proCodigoBarra2=t.proCodigoBarra2,e.producto.proCodigoBarra3=t.proCodigoBarra3,e.producto.proCodigoBarra4=t.proCodigoBarra4,e.producto.proCodigoBarra5=t.proCodigoBarra5,e.definirAtajosDeTeclado()},function(){e.definirAtajosDeTeclado()})},e.prototype.mostrarProductoPresentacionMedida=function(){var e=this,t=this.modalService.open(me,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.razonSocial=""!=this.producto.proNombre?"- "+this.producto.proNombre:this.producto.proNombre;var o={empresa:c.a.KEY_EMPRESA_SELECT};t.result.then(function(t){e.productoPresentacionMedidaService.listaPresentacionUnidadTO(o,e,c.a.KEY_EMPRESA_SELECT),null!=t.presUnidadSeleccionada&&(e.producto.presUCodigo=t.presUnidadSeleccionada.presuCodigo,e.producto.presUEmpresa=t.presUnidadSeleccionada.presuEmpresa),e.definirAtajosDeTeclado()},function(){e.productoPresentacionMedidaService.listaPresentacionUnidadTO(o,e,c.a.KEY_EMPRESA_SELECT),e.definirAtajosDeTeclado()})},e.prototype.mostrarProductoMarca=function(){var e=this,t=this.modalService.open(Ie,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.razonSocial=""!=this.producto.proNombre?"- "+this.producto.proNombre:this.producto.proNombre,t.componentInstance.marcaSeleccionadA=this.marcaSeleccionada;var o={empresa:c.a.KEY_EMPRESA_SELECT};t.result.then(function(t){e.productoMarcaService.listarInvMarcaTO(o,e,c.a.KEY_EMPRESA_SELECT),null!=t.marcaSeleccionado&&(e.producto.marCodigo=t.marcaSeleccionado.marCodigo,e.producto.marEmpresa=t.marcaSeleccionado.marEmpresa),e.definirAtajosDeTeclado()},function(){e.productoMarcaService.listarInvMarcaTO(o,e,c.a.KEY_EMPRESA_SELECT),e.definirAtajosDeTeclado()})},e.prototype.mostrarProductoTipo=function(){var e=this,t=this.modalService.open(Ee.a,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.razonSocial=""!=this.producto.proNombre?"- "+this.producto.proNombre:this.producto.proNombre;var o={empresa:c.a.KEY_EMPRESA_SELECT,accion:"COMBO"};t.result.then(function(t){e.productoTipoService.listarInvProductoTipoTO(o,e,c.a.KEY_EMPRESA_SELECT),null!=t.tipoSeleccionado&&(e.producto.tipCodigo=t.tipoSeleccionado.tipCodigo,e.producto.tipEmpresa=t.tipoSeleccionado.tipEmpresa),e.definirAtajosDeTeclado()},function(){e.productoTipoService.listarInvProductoTipoTO(o,e,c.a.KEY_EMPRESA_SELECT),e.definirAtajosDeTeclado()})},e.prototype.mostrarProductoCategoria=function(){var e=this,t=this.modalService.open(Me.a,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.razonSocial=""!=this.producto.proNombre?"- "+this.producto.proNombre:this.producto.proNombre;var o={empresa:c.a.KEY_EMPRESA_SELECT};t.result.then(function(t){e.productoCategoriaService.listarInvProductoCategoriaTO(o,e,c.a.KEY_EMPRESA_SELECT),null!=t.categoriaSeleccionado&&(e.producto.catCodigo=t.categoriaSeleccionado.catCodigo,e.producto.catEmpresa=t.categoriaSeleccionado.catEmpresa),e.definirAtajosDeTeclado()},function(){e.productoCategoriaService.listarInvProductoCategoriaTO(o,e,c.a.KEY_EMPRESA_SELECT),e.definirAtajosDeTeclado()})},e.prototype.verPrecios=function(){var e=this;if(this.etiquetas&&0==this.etiquetas.length&&this.etiquetasCostos&&0==this.etiquetasCostos.length){var t={title:c.a.TOAST_INFORMACION,texto:c.a.MSJ_INFO_CONFIGURAR_PRECIOS,type:c.a.SWAL_INFO,confirmButtonText:c.a.LABEL_MAS_INFORMACION,cancelButtonText:c.a.MSJ_SI_ACEPTAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})}else{var o;if(this.etiquetas&&this.etiquetas.length>1||this.etiquetasCostos&&this.etiquetasCostos.length>1)(o=this.modalService.open(Ne,{size:"lg",backdrop:"static"})).componentInstance.producto=this.producto,o.componentInstance.accion=this.accion,o.componentInstance.etiquetas=this.etiquetas,o.componentInstance.etiquetasCostos=this.etiquetasCostos,o.result.then(function(){e.definirAtajosDeTeclado()},function(){e.definirAtajosDeTeclado()});else(o=this.modalService.open(Ne,{size:"sm",backdrop:"static"})).componentInstance.producto=this.producto,o.componentInstance.accion=this.accion,o.componentInstance.etiquetas=this.etiquetas,o.componentInstance.etiquetasCostos=this.etiquetasCostos,o.result.then(function(){e.definirAtajosDeTeclado()},function(){e.definirAtajosDeTeclado()})}},e.prototype.obtenerPk=function(){var e=new je.a;return e.proEmpresa=this.producto.proEmpresa,e.proCodigoPrincipal=this.producto.proCodigoPrincipal,e},ze([Object(i.Input)(),Je("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),ze([Object(i.Input)(),Je("design:type",Array)],e.prototype,"listadoCategorias",void 0),ze([Object(i.Input)(),Je("design:type",Object)],e.prototype,"parametros",void 0),ze([Object(i.Output)(),Je("design:type",Object)],e.prototype,"enviarAccion",void 0),ze([Object(i.Output)(),Je("design:type",Object)],e.prototype,"enviarActivar",void 0),ze([Object(i.ViewChild)("frmProductoDatos"),Je("design:type",I.NgForm)],e.prototype,"frmProductoDatos",void 0),ze([Object(i.HostListener)("window:beforeunload",["$event"]),Je("design:type",Function),Je("design:paramtypes",[Event]),Je("design:returntype",void 0)],e.prototype,"unloadHandler",null),e=ze([Object(i.Component)({selector:"app-formulario-productos",template:o("E3Da"),styles:[o("/LET")]}),Je("design:paramtypes",[ye.a,S.HotkeysService,h.a,Re.a,V.a,De.a,H,We.a,Q,ae,u.b,T.b,K.a,ne.Router,p.a])],e)}(),Ye=o("i8Jn"),qe=o("0cNW"),He=o("lpxS"),Xe=o("FJOi"),Ze=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},$e=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Qe=function(){function e(e,t,o,a,r,n,s){this.route=e,this.motivoVentaService=t,this.periodoService=o,this.atajoService=a,this.ventaService=r,this.toastr=n,this.utilService=s,this.listaEmpresas=new Array,this.listadoPeriodos=new Array,this.listadoMotivos=new Array,this.empresaSeleccionada=new l.a,this.motivoSeleccionado=new He.a,this.periodoSeleccionado=new Ye.a,this.ruta="",this.tipoDocumento="",this.vistaFormulario=!1,this.enviarAccion=new i.EventEmitter,this.filtro="",this.constantes=c.a,this.activar=!1,this.cargando=!1,this.definirAtajosDeTeclado()}return e.prototype.ngOnInit=function(){this.listaEmpresas=this.route.snapshot.data[this.ruta],this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.cambiarEmpresaSelect())},e.prototype.ngOnChanges=function(e){e.vistaFormulario&&(this.vistaFormulario=this.vistaFormulario)},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_BUSCAR,function(t){return!e.vistaFormulario&&e.listarVentas(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_NUEVO,function(t){return!e.vistaFormulario&&e.nuevaVenta(),!1}))},e.prototype.cambiarEmpresaSelect=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo;var e={empresa:this.empresaSeleccionada,accion:c.a.ACCION_CAMBIAR_EMPRESA};this.enviarAccion.emit(e),this.activar=!1,this.listarPeriodos(),this.listarInvVentaMotivoComboTO(!1)},e.prototype.limpiarLista=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo;var e={empresa:this.empresaSeleccionada,accion:c.a.ACCION_CAMBIAR_EMPRESA};this.enviarAccion.emit(e),this.activar=!1},e.prototype.listarVentas=function(){if(this.validarObligatorios()){this.vistaFormulario=!1;var e={empresaSeleccionada:this.empresaSeleccionada,accion:c.a.ACCION_LISTAR,empresa:c.a.KEY_EMPRESA_SELECT,periodo:this.periodoSeleccionado?this.periodoSeleccionado.sisPeriodoPK.perCodigo:"",motivo:this.motivoSeleccionado?this.motivoSeleccionado.vmCodigo:"",busqueda:this.filtro,tipoDocumento:this.tipoDocumento,listaPeriodos:this.listadoPeriodos};this.enviarAccion.emit(e)}},e.prototype.validarObligatorios=function(){return!!(this.periodoSeleccionado||this.motivoSeleccionado||this.filtro)||(this.toastr.warning(c.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,c.a.TAG_AVISO),!1)},e.prototype.nuevaVenta=function(){var e={empresa:this.empresaSeleccionada,accion:c.a.ACCION_CREAR};this.enviarAccion.emit(e)},e.prototype.listarPeriodos=function(){var e={empresa:c.a.KEY_EMPRESA_SELECT};this.cargando=!0,this.periodoService.listarPeriodos(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPeriodos=function(e){this.listadoPeriodos=e||[],this.periodoSeleccionado=this.listadoPeriodos.length>0?this.listadoPeriodos[0]:null},e.prototype.listarInvVentaMotivoComboTO=function(e){var t={empresa:c.a.KEY_EMPRESA_SELECT,filtrarInactivos:e};this.cargando=!0,this.motivoVentaService.listarInvVentaMotivoTO(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvVentaMotivoTO=function(e){this.listadoMotivos=e,this.motivoSeleccionado=e[0]},e.prototype.verificarPermiso=function(e,t){return this.ventaService.verificarPermiso(e,this.empresaSeleccionada,t)},Ze([Object(i.Input)(),$e("design:type",String)],e.prototype,"ruta",void 0),Ze([Object(i.Input)(),$e("design:type",String)],e.prototype,"tipoDocumento",void 0),Ze([Object(i.Input)(),$e("design:type",Boolean)],e.prototype,"vistaFormulario",void 0),Ze([Object(i.Output)(),$e("design:type",Object)],e.prototype,"enviarAccion",void 0),e=Ze([Object(i.Component)({selector:"app-venta-busqueda",template:o("9v/X")}),$e("design:paramtypes",[ne.ActivatedRoute,Xe.a,qe.a,S.HotkeysService,Te.a,u.b,h.a])],e)}(),et=o("VxUY"),tt=function(){function e(e){this.vtaEmpresa="",this.vtaPeriodo="",this.vtaMotivo="",this.vtaNumero="",this.vtaDocumentoTipo="",this.vtaDocumentoNumero="",this.vtaFecha="",this.vtaFechaVencimiento="",this.vtaIvaVigente=0,this.vtaObservaciones="",this.vtaInformacionAdicional="",this.vtaPendiente=!1,this.vtaRevisado=!1,this.vtaAnulado=!1,this.vtaFormaPago="",this.cliEmpresa="",this.cliCodigo="",this.vtaRecargoBase0=0,this.vtaRecargoBaseImponible=0,this.vtaBase0=0,this.vtaBaseImponible=0,this.vtaBaseNoObjeto=0,this.vtaBaseExenta=0,this.vtaDescuentoBase0=0,this.vtaDescuentoBaseImponible=0,this.vtaDescuentoBaseNoObjeto=0,this.vtaDescuentoBaseExenta=0,this.vtaSubtotalBase0=0,this.vtaSubtotalBaseImponible=0,this.vtaSubtotalBaseNoObjeto=0,this.vtaSubtotalBaseExenta=0,this.vtaMontoIva=0,this.vtaTotal=0,this.vtaPagadoEfectivo=0,this.vtaPagadoDineroElectronico=0,this.vtaPagadoTarjetaCredito=0,this.vtaPagadoOtro=0,this.bodEmpresa="",this.bodCodigo="",this.secEmpresa=null,this.secCodigo=null,this.ctaEmpresa=null,this.ctaCodigo=null,this.conEmpresa=null,this.conPeriodo=null,this.conTipo=null,this.conNumero=null,this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",this.usrModifica="",this.usrFechaModifica="",this.usrComentario="",this.vtaListaDePrecios="",this.vtaReembolso=!1,this.fcBanco="",this.fcCuenta="",this.fcCheque="",this.fcLote="",this.fcTitular="",this.fcSecuencial=null,this.profEmpresa="",this.profPeriodo="",this.profMotivo="",this.profNumero="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.vtaEmpresa=e.vtaEmpresa?e.vtaEmpresa:this.vtaEmpresa,this.vtaPeriodo=e.vtaPeriodo?e.vtaPeriodo:this.vtaPeriodo,this.vtaMotivo=e.vtaMotivo?e.vtaMotivo:this.vtaMotivo,this.vtaNumero=e.vtaNumero?e.vtaNumero:this.vtaNumero,this.vtaDocumentoTipo=e.vtaDocumentoTipo?e.vtaDocumentoTipo:this.vtaDocumentoTipo,this.vtaDocumentoNumero=e.vtaDocumentoNumero?e.vtaDocumentoNumero:this.vtaDocumentoNumero,this.vtaFecha=e.vtaFecha?e.vtaFecha:this.vtaFecha,this.vtaFechaVencimiento=e.vtaFechaVencimiento?e.vtaFechaVencimiento:this.vtaFechaVencimiento,this.vtaIvaVigente=e.vtaIvaVigente?e.vtaIvaVigente:this.vtaIvaVigente,this.vtaObservaciones=e.vtaObservaciones?e.vtaObservaciones:this.vtaObservaciones,this.vtaInformacionAdicional=e.vtaInformacionAdicional?e.vtaInformacionAdicional:this.vtaInformacionAdicional,this.vtaPendiente=!0===e.vtaPendiente||!1===e.vtaPendiente?e.vtaPendiente:this.vtaPendiente,this.vtaRevisado=e.vtaRevisado?e.vtaRevisado:this.vtaRevisado,this.vtaAnulado=e.vtaAnulado?e.vtaAnulado:this.vtaAnulado,this.vtaFormaPago=e.vtaFormaPago?e.vtaFormaPago:this.vtaFormaPago,this.cliEmpresa=e.cliEmpresa?e.cliEmpresa:this.cliEmpresa,this.cliCodigo=e.cliCodigo?e.cliCodigo:this.cliCodigo,this.vtaRecargoBase0=e.vtaRecargoBase0?e.vtaRecargoBase0:this.vtaRecargoBase0,this.vtaRecargoBaseImponible=e.vtaRecargoBaseImponible?e.vtaRecargoBaseImponible:this.vtaRecargoBaseImponible,this.vtaBase0=e.vtaBase0?e.vtaBase0:this.vtaBase0,this.vtaBaseImponible=e.vtaBaseImponible?e.vtaBaseImponible:this.vtaBaseImponible,this.vtaBaseNoObjeto=e.vtaBaseNoObjeto?e.vtaBaseNoObjeto:this.vtaBaseNoObjeto,this.vtaBaseExenta=e.vtaBaseExenta?e.vtaBaseExenta:this.vtaBaseExenta,this.vtaDescuentoBase0=e.vtaDescuentoBase0?e.vtaDescuentoBase0:this.vtaDescuentoBase0,this.vtaDescuentoBaseImponible=e.vtaDescuentoBaseImponible?e.vtaDescuentoBaseImponible:this.vtaDescuentoBaseImponible,this.vtaDescuentoBaseNoObjeto=e.vtaDescuentoBaseNoObjeto?e.vtaDescuentoBaseNoObjeto:this.vtaDescuentoBaseNoObjeto,this.vtaDescuentoBaseExenta=e.vtaDescuentoBaseExenta?e.vtaDescuentoBaseExenta:this.vtaDescuentoBaseExenta,this.vtaSubtotalBase0=e.vtaSubtotalBase0?e.vtaSubtotalBase0:this.vtaSubtotalBase0,this.vtaSubtotalBaseImponible=e.vtaSubtotalBaseImponible?e.vtaSubtotalBaseImponible:this.vtaSubtotalBaseImponible,this.vtaSubtotalBaseNoObjeto=e.vtaSubtotalBaseNoObjeto?e.vtaSubtotalBaseNoObjeto:this.vtaSubtotalBaseNoObjeto,this.vtaSubtotalBaseExenta=e.vtaSubtotalBaseExenta?e.vtaSubtotalBaseExenta:this.vtaSubtotalBaseExenta,this.vtaMontoIva=e.vtaMontoIva?e.vtaMontoIva:this.vtaMontoIva,this.vtaTotal=e.vtaTotal?e.vtaTotal:this.vtaTotal,this.vtaPagadoEfectivo=e.vtaPagadoEfectivo?e.vtaPagadoEfectivo:this.vtaPagadoEfectivo,this.vtaPagadoDineroElectronico=e.vtaPagadoDineroElectronico?e.vtaPagadoDineroElectronico:this.vtaPagadoDineroElectronico,this.vtaPagadoTarjetaCredito=e.vtaPagadoTarjetaCredito?e.vtaPagadoTarjetaCredito:this.vtaPagadoTarjetaCredito,this.vtaPagadoOtro=e.vtaPagadoOtro?e.vtaPagadoOtro:this.vtaPagadoOtro,this.bodEmpresa=e.bodEmpresa?e.bodEmpresa:this.bodEmpresa,this.bodCodigo=e.bodCodigo?e.bodCodigo:this.bodCodigo,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.ctaEmpresa=e.ctaEmpresa?e.ctaEmpresa:this.ctaEmpresa,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.conEmpresa=e.conEmpresa?e.conEmpresa:this.conEmpresa,this.conPeriodo=e.conPeriodo?e.conPeriodo:this.conPeriodo,this.conTipo=e.conTipo?e.conTipo:this.conTipo,this.conNumero=e.conNumero?e.conNumero:this.conNumero,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.usrModifica=e.usrModifica?e.usrModifica:this.usrModifica,this.usrFechaModifica=e.usrFechaModifica?e.usrFechaModifica:this.usrFechaModifica,this.usrComentario=e.usrComentario?e.usrComentario:this.usrComentario,this.vtaListaDePrecios=e.vtaListaDePrecios?e.vtaListaDePrecios:this.vtaListaDePrecios,this.vtaReembolso=e.vtaReembolso?e.vtaReembolso:this.vtaReembolso,this.fcBanco=e.fcBanco?e.fcBanco:this.fcBanco,this.fcCuenta=e.fcCuenta?e.fcCuenta:this.fcCuenta,this.fcCheque=e.fcCheque?e.fcCheque:this.fcCheque,this.fcLote=e.fcLote?e.fcLote:this.fcLote,this.fcTitular=e.fcTitular?e.fcTitular:this.fcTitular,this.fcSecuencial=e.fcSecuencial?e.fcSecuencial:this.fcSecuencial,this.profEmpresa=e.profEmpresa?e.profEmpresa:this.profEmpresa,this.profPeriodo=e.profPeriodo?e.profPeriodo:this.profPeriodo,this.profMotivo=e.profMotivo?e.profMotivo:this.profMotivo,this.profNumero=e.profNumero?e.profNumero:this.profNumero},e}(),ot=function(){function e(e){this.detSecuencia=0,this.detOrden=0,this.detPendiente=!0,this.detCantidad=0,this.detPrecio=0,this.detPorcentajeRecargo=0,this.detPorcentajeDescuento=0,this.detValorPromedio=0,this.detValorUltimaCompra=0,this.detSaldo=0,this.bodEmpresa="",this.bodCodigo="",this.proEmpresa="",this.proCodigoPrincipal="",this.proNombre="",this.proCreditoTributario=!0,this.secEmpresa=null,this.secCodigo=null,this.pisEmpresa=null,this.pisSector=null,this.pisNumero=null,this.vtaEmpresa="",this.vtaPeriodo="",this.vtaMotivo="",this.vtaNumero="",this.vtIva=!0,this.vtCodigoPorcentaje="",this.proMedida="",this.proEstadoIva="",this.proTipo="",this.catPrecioFijo=!1,this.estadoProducto=!1,this.estadoPrecio=!1,this.proCodigoPrincipalCopia="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencia=e.detSecuencia?e.detSecuencia:this.detSecuencia,this.detOrden=e.detOrden?e.detOrden:this.detOrden,this.detPendiente=e.detPendiente?e.detPendiente:this.detPendiente,this.detCantidad=e.detCantidad?e.detCantidad:this.detCantidad,this.detPrecio=e.detPrecio?e.detPrecio:this.detPrecio,this.detPorcentajeRecargo=e.detPorcentajeRecargo?e.detPorcentajeRecargo:this.detPorcentajeRecargo,this.detPorcentajeDescuento=e.detPorcentajeDescuento?e.detPorcentajeDescuento:this.detPorcentajeDescuento,this.detValorPromedio=e.detValorPromedio?e.detValorPromedio:this.detValorPromedio,this.detValorUltimaCompra=e.detValorUltimaCompra?e.detValorUltimaCompra:this.detValorUltimaCompra,this.detSaldo=e.detSaldo?e.detSaldo:this.detSaldo,this.bodEmpresa=e.bodEmpresa?e.bodEmpresa:this.bodEmpresa,this.bodCodigo=e.bodCodigo?e.bodCodigo:this.bodCodigo,this.proEmpresa=e.proEmpresa?e.proEmpresa:this.proEmpresa,this.proCodigoPrincipal=e.proCodigoPrincipal?e.proCodigoPrincipal:this.proCodigoPrincipal,this.proNombre=e.proNombre?e.proNombre:this.proNombre,this.proCreditoTributario=e.proCreditoTributario?e.proCreditoTributario:this.proCreditoTributario,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.pisEmpresa=e.pisEmpresa?e.pisEmpresa:this.pisEmpresa,this.pisSector=e.pisSector?e.pisSector:this.pisSector,this.pisNumero=e.pisNumero?e.pisNumero:this.pisNumero,this.vtaEmpresa=e.vtaEmpresa?e.vtaEmpresa:this.vtaEmpresa,this.vtaPeriodo=e.vtaPeriodo?e.vtaPeriodo:this.vtaPeriodo,this.vtaMotivo=e.vtaMotivo?e.vtaMotivo:this.vtaMotivo,this.vtaNumero=e.vtaNumero?e.vtaNumero:this.vtaNumero,this.vtIva=e.vtIva?e.vtIva:this.vtIva,this.vtCodigoPorcentaje=e.vtCodigoPorcentaje?e.vtCodigoPorcentaje:this.vtCodigoPorcentaje,this.proMedida=e.proMedida?e.proMedida:this.proMedida,this.proEstadoIva=e.proEstadoIva?e.proEstadoIva:this.proEstadoIva,this.proTipo=e.proTipo?e.proTipo:this.proTipo},e}(),at=o("Mk4X"),it=o("WtL1"),rt=o("VO10"),nt=o("9wkQ"),st=function(){function e(e){this.proEmpresa="",this.proCodigoPrincipal="",this.proCodigoAlterno="",this.proCodigoBarra="",this.proCodigoBarra2="",this.proCodigoBarra3="",this.proCodigoBarra4="",this.proCodigoBarra5="",this.proEmpaque="",this.proNombre="",this.proDetalle="",this.proCantidad1=0,this.proCantidad2=0,this.proCantidad3=0,this.proCantidad4=0,this.proCantidad5=0,this.proPrecio1=0,this.proPrecio2=0,this.proPrecio3=0,this.proPrecio4=0,this.proPrecio5=0,this.proDescuento1=0,this.proDescuento2=0,this.proDescuento3=0,this.proDescueno4=0,this.proDescuento5=0,this.proMargenUtilidad1=0,this.proMargenUtilidad2=0,this.proMargenUtilidad3=0,this.proMargenUtilidad4=0,this.proMargenUtilidad5=0,this.proMinimo=0,this.proMaximo=0,this.proIva="",this.proCreditoTributario=!1,this.proCompuesto=!1,this.proInactivo=!1,this.proCuentaInventario="",this.proCuentaGasto="",this.proCuentaVenta="",this.proCuentaTransferenciaIpp="",this.catCodigo="",this.catDetalle="",this.catPrecioFijo=!1,this.catActiva=!1,this.marCodigo="",this.marDetalle="",this.marAbreviado="",this.presuCodigo="",this.presuDetalle="",this.presuAbreviado="",this.prescCodigo="",this.prescDetalle="",this.prescAbreviado="",this.tipCodigo="",this.tipTipo="",this.tipDetalle="",this.tipActivo=!1,this.medCodigo="",this.medDetalle="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",this.proFactorCajaSacoBulto=0,this.conCodigo="",this.susCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.proEmpresa=e.proEmpresa?e.proEmpresa:this.proEmpresa,this.proCodigoPrincipal=e.proCodigoPrincipal?e.proCodigoPrincipal:this.proCodigoPrincipal,this.proCodigoAlterno=e.proCodigoAlterno?e.proCodigoAlterno:this.proCodigoAlterno,this.proCodigoBarra=e.proCodigoBarra?e.proCodigoBarra:this.proCodigoBarra,this.proCodigoBarra2=e.proCodigoBarra2?e.proCodigoBarra2:this.proCodigoBarra2,this.proCodigoBarra3=e.proCodigoBarra3?e.proCodigoBarra3:this.proCodigoBarra3,this.proCodigoBarra4=e.proCodigoBarra4?e.proCodigoBarra4:this.proCodigoBarra4,this.proCodigoBarra5=e.proCodigoBarra5?e.proCodigoBarra5:this.proCodigoBarra5,this.proEmpaque=e.proEmpaque?e.proEmpaque:this.proEmpaque,this.proNombre=e.proNombre?e.proNombre:this.proNombre,this.proDetalle=e.proDetalle?e.proDetalle:this.proDetalle,this.proCantidad1=e.proCantidad1?e.proCantidad1:this.proCantidad1,this.proCantidad2=e.proCantidad2?e.proCantidad2:this.proCantidad2,this.proCantidad3=e.proCantidad3?e.proCantidad3:this.proCantidad3,this.proCantidad4=e.proCantidad4?e.proCantidad4:this.proCantidad4,this.proCantidad5=e.proCantidad5?e.proCantidad5:this.proCantidad5,this.proPrecio1=e.proPrecio1?e.proPrecio1:this.proPrecio1,this.proPrecio2=e.proPrecio2?e.proPrecio2:this.proPrecio2,this.proPrecio3=e.proPrecio3?e.proPrecio3:this.proPrecio3,this.proPrecio4=e.proPrecio4?e.proPrecio4:this.proPrecio4,this.proPrecio5=e.proPrecio5?e.proPrecio5:this.proPrecio5,this.proDescuento1=e.proDescuento1?e.proDescuento1:this.proDescuento1,this.proDescuento2=e.proDescuento2?e.proDescuento2:this.proDescuento2,this.proDescuento3=e.proDescuento3?e.proDescuento3:this.proDescuento3,this.proDescueno4=e.proDescueno4?e.proDescueno4:this.proDescueno4,this.proDescuento5=e.proDescuento5?e.proDescuento5:this.proDescuento5,this.proMargenUtilidad1=e.proMargenUtilidad1?e.proMargenUtilidad1:this.proMargenUtilidad1,this.proMargenUtilidad2=e.proMargenUtilidad2?e.proMargenUtilidad2:this.proMargenUtilidad2,this.proMargenUtilidad3=e.proMargenUtilidad3?e.proMargenUtilidad3:this.proMargenUtilidad3,this.proMargenUtilidad4=e.proMargenUtilidad4?e.proMargenUtilidad4:this.proMargenUtilidad4,this.proMargenUtilidad5=e.proMargenUtilidad5?e.proMargenUtilidad5:this.proMargenUtilidad5,this.proMinimo=e.proMinimo?e.proMinimo:this.proMinimo,this.proMaximo=e.proMaximo?e.proMaximo:this.proMaximo,this.proIva=e.proIva?e.proIva:this.proIva,this.proCreditoTributario=e.proCreditoTributario?e.proCreditoTributario:this.proCreditoTributario,this.proCompuesto=e.proCompuesto?e.proCompuesto:this.proCompuesto,this.proInactivo=e.proInactivo?e.proInactivo:this.proInactivo,this.proCuentaInventario=e.proCuentaInventario?e.proCuentaInventario:this.proCuentaInventario,this.proCuentaGasto=e.proCuentaGasto?e.proCuentaGasto:this.proCuentaGasto,this.proCuentaVenta=e.proCuentaVenta?e.proCuentaVenta:this.proCuentaVenta,this.proCuentaTransferenciaIpp=e.proCuentaTransferenciaIpp?e.proCuentaTransferenciaIpp:this.proCuentaTransferenciaIpp,this.catCodigo=e.catCodigo?e.catCodigo:this.catCodigo,this.catDetalle=e.catDetalle?e.catDetalle:this.catDetalle,this.catPrecioFijo=e.catPrecioFijo?e.catPrecioFijo:this.catPrecioFijo,this.catActiva=e.catActiva?e.catActiva:this.catActiva,this.marCodigo=e.marCodigo?e.marCodigo:this.marCodigo,this.marDetalle=e.marDetalle?e.marDetalle:this.marDetalle,this.marAbreviado=e.marAbreviado?e.marAbreviado:this.marAbreviado,this.presuCodigo=e.presuCodigo?e.presuCodigo:this.presuCodigo,this.presuDetalle=e.presuDetalle?e.presuDetalle:this.presuDetalle,this.presuAbreviado=e.presuAbreviado?e.presuAbreviado:this.presuAbreviado,this.prescCodigo=e.prescCodigo?e.prescCodigo:this.prescCodigo,this.prescDetalle=e.prescDetalle?e.prescDetalle:this.prescDetalle,this.prescAbreviado=e.prescAbreviado?e.prescAbreviado:this.prescAbreviado,this.tipCodigo=e.tipCodigo?e.tipCodigo:this.tipCodigo,this.tipTipo=e.tipTipo?e.tipTipo:this.tipTipo,this.tipDetalle=e.tipDetalle?e.tipDetalle:this.tipDetalle,this.tipActivo=e.tipActivo?e.tipActivo:this.tipActivo,this.medCodigo=e.medCodigo?e.medCodigo:this.medCodigo,this.medDetalle=e.medDetalle?e.medDetalle:this.medDetalle,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.proFactorCajaSacoBulto=e.proFactorCajaSacoBulto?e.proFactorCajaSacoBulto:this.proFactorCajaSacoBulto,this.conCodigo=e.conCodigo?e.conCodigo:this.conCodigo,this.susCodigo=e.susCodigo?e.susCodigo:this.susCodigo},e}(),ct=function(){function e(e){this.venEmpresa="",this.venPeriodo="",this.venMotivo="",this.venNumero="",this.venRetencionNumero="",this.venRetencionAutorizacion="",this.venRetencionFechaEmision="",this.venBase0=0,this.venBaseImponible=0,this.venBaseNoObjetoIva=0,this.venMontoIva=0,this.venValorRetenidoIva=0,this.venValorRetenidoRenta=0,this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.venEmpresa=e.venEmpresa?e.venEmpresa:this.venEmpresa,this.venPeriodo=e.venPeriodo?e.venPeriodo:this.venPeriodo,this.venMotivo=e.venMotivo?e.venMotivo:this.venMotivo,this.venNumero=e.venNumero?e.venNumero:this.venNumero,this.venRetencionNumero=e.venRetencionNumero?e.venRetencionNumero:this.venRetencionNumero,this.venRetencionAutorizacion=e.venRetencionAutorizacion?e.venRetencionAutorizacion:this.venRetencionAutorizacion,this.venRetencionFechaEmision=e.venRetencionFechaEmision?e.venRetencionFechaEmision:this.venRetencionFechaEmision,this.venBase0=e.venBase0?e.venBase0:this.venBase0,this.venBaseImponible=e.venBaseImponible?e.venBaseImponible:this.venBaseImponible,this.venBaseNoObjetoIva=e.venBaseNoObjetoIva?e.venBaseNoObjetoIva:this.venBaseNoObjetoIva,this.venMontoIva=e.venMontoIva?e.venMontoIva:this.venMontoIva,this.venValorRetenidoIva=e.venValorRetenidoIva?e.venValorRetenidoIva:this.venValorRetenidoIva,this.venValorRetenidoRenta=e.venValorRetenidoRenta?e.venValorRetenidoRenta:this.venValorRetenidoRenta,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),lt=function(){function e(e){this.fecha="",this.retencionNumero="",this.retencionAutorizacion="",this.retencionIR=0,this.retencionIVA=0,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.fecha=e.fecha?e.fecha:this.fecha,this.retencionNumero=e.retencionNumero?e.retencionNumero:this.retencionNumero,this.retencionAutorizacion=e.retencionAutorizacion?e.retencionAutorizacion:this.retencionAutorizacion,this.retencionIR=e.retencionIR?e.retencionIR:this.retencionIR,this.retencionIVA=e.retencionIVA?e.retencionIVA:this.retencionIVA},e}(),dt=o("WCSX"),pt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ut=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ht=function(){function e(e,t,o,a){this.utilService=e,this.filasService=t,this.atajoService=o,this.auth=a}return e.prototype.obtenerAutonumeric=function(){return{decimalPlaces:6,decimalPlacesRawValue:6,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:6,maximumValue:"9999999999.999999",minimumValue:"0"}},e.prototype.definirAtajosDeTeclado=function(e){this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.cancelar(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivarVenta");return t&&t.click(),!1}))},e.prototype.agregarFila=function(e,t,o,a){var i=t.indexOf(o);if(i>=0){i="up"===e?i:i+1;var r=new ot({detCantidad:1}),n=t.slice();n.splice(i,0,r),t=n,this.focusedProducto(i,a)}return t},e.prototype.agregarFilaAlFinal=function(e,t,o,a,i){var r=e.event.keyCode,n=t.indexOf(o);if(this.utilService.validarKeyBuscar(r)&&(a===c.a.ACCION_CREAR||a===c.a.ACCION_EDITAR)&&n>=0&&n===t.length-1){var s=new ot({detCantidad:1}),l=t.slice();l.push(s),t=l,this.focusedProducto(n+1,i)}return t},e.prototype.enfocarInput=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.focusCantidad=function(e){this.enfocarInput("detCantidad_"+e)},e.prototype.refreshGrid=function(e){var t=this;e&&e.refreshCells(),setTimeout(function(){e&&t.actualizarFilas(e)},50)},e.prototype.actualizarFilas=function(e){var t=new D.a;t.filas=e?e.getDisplayedRowCount():0,this.filasService.actualizarFilas(t.filas,t.getTiempo())},e.prototype.focusedProducto=function(e,t){var o=this;setTimeout(function(){o.productoFocusAndEditingCell(e,t)},50)},e.prototype.productoFocusAndEditingCell=function(e,t){t.setFocusedCell(e,"proCodigoPrincipal"),t.startEditingCell({rowIndex:e,colKey:"proCodigoPrincipal"})},e.prototype.cantidadFocusAndEditingCell=function(e,t){t.setFocusedCell(e,"detCantidad"),t.startEditingCell({rowIndex:e,colKey:"detCantidad"})},e.prototype.calcularValoresVenta=function(e,t,o){e.vtaBaseImponible=0,e.vtaRecargoBaseImponible=0,e.vtaDescuentoBaseImponible=0,e.vtaSubtotalBaseImponible=0,e.vtaBase0=0,e.vtaRecargoBase0=0,e.vtaDescuentoBase0=0,e.vtaSubtotalBase0=0,e.vtaMontoIva=0,e.vtaTotal=0;for(var a=0,i=t;a<i.length;a++){var r=i[a],n=0,s=0;r.estadoProducto&&(n=this.utilService.convertirDecimaleFloat(r.parcial)*(this.utilService.convertirDecimaleFloat(r.detPorcentajeRecargo)/100),s=(this.utilService.convertirDecimaleFloat(r.parcial)+n)*(this.utilService.convertirDecimaleFloat(r.detPorcentajeRecargo)/100),"GRAVA"==r.proEstadoIva?(e.vtaBaseImponible=this.utilService.convertirDecimaleFloat(e.vtaBaseImponible)+this.utilService.convertirDecimaleFloat(r.parcial),e.vtaRecargoBaseImponible=this.utilService.convertirDecimaleFloat(e.vtaRecargoBaseImponible)+n,e.vtaDescuentoBaseImponible=this.utilService.convertirDecimaleFloat(e.vtaDescuentoBaseImponible)+s):(e.vtaBase0=this.utilService.convertirDecimaleFloat(e.vtaBase0)+this.utilService.convertirDecimaleFloat(r.parcial),e.vtaRecargoBase0=this.utilService.convertirDecimaleFloat(e.vtaRecargoBase0)+n,e.vtaDescuentoBase0=this.utilService.convertirDecimaleFloat(e.vtaDescuentoBase0)+s),e.vtaMontoIva=this.utilService.convertirNDecimale(this.utilService.convertirDecimaleFloat(e.vtaMontoIva)+this.utilService.convertirDecimaleFloat(r.vtIva),2))}return e.vtaSubtotalBaseImponible=this.utilService.convertirDecimaleFloat(e.vtaBaseImponible)+this.utilService.convertirDecimaleFloat(e.vtaRecargoBaseImponible)-this.utilService.convertirDecimaleFloat(e.vtaDescuentoBaseImponible),e.vtaSubtotalBase0=this.utilService.convertirDecimaleFloat(e.vtaBase0)+this.utilService.convertirDecimaleFloat(e.vtaRecargoBase0)-this.utilService.convertirDecimaleFloat(e.vtaDescuentoBase0),e.vtaTotal=this.utilService.convertirNDecimale(this.utilService.convertirDecimaleFloat(e.vtaMontoIva)+this.utilService.convertirDecimaleFloat(e.vtaSubtotalBaseImponible)+this.utilService.convertirDecimaleFloat(e.vtaSubtotalBase0),2),this.refreshGrid(o),e},e.prototype.calcularValorItem=function(e,t){e.detPorcentajeRecargo=this.utilService.convertirNDecimale(e.detPorcentajeRecargo,6),e.detPorcentajeDescuento=this.utilService.convertirNDecimale(e.detPorcentajeDescuento,6),e.detCantidad=this.utilService.convertirNDecimale(e.detCantidad,6),e.detPrecio=this.utilService.convertirNDecimale(e.detPrecio,6),e.parcial=this.utilService.convertirNDecimale(this.utilService.convertirDecimaleFloat(e.detPrecio)*this.utilService.convertirDecimaleFloat(e.detCantidad),6);var o=this.utilService.convertirDecimaleFloat(e.parcial)+this.utilService.convertirDecimaleFloat(e.parcial)*(this.utilService.convertirDecimaleFloat(e.detPorcentajeRecargo)/100)-this.utilService.convertirDecimaleFloat(e.parcial)*(this.utilService.convertirDecimaleFloat(e.detPorcentajeDescuento)/100);return e.vtIva="GRAVA"==e.proEstadoIva?this.utilService.convertirNDecimale(parseFloat(o*(parseFloat(t.vtaIvaVigente+"")/100)+""),6):this.utilService.convertirNDecimale(0,6),e.total=o+this.utilService.convertirDecimaleFloat(e.vtIva),e},e.prototype.formatearVentaDetalle=function(e,t,o){for(var a=[],i=0,r=e;i<r.length;i++){var n=r[i];(n=new ot(n)).vtIva=!0,n.detCantidad=this.utilService.quitarComasNumero(n.detCantidad),n.detPorcentajeDescuento=this.utilService.quitarComasNumero(n.detPorcentajeDescuento),n.detPorcentajeRecargo=this.utilService.quitarComasNumero(n.detPorcentajeRecargo),n.detPrecio=this.utilService.quitarComasNumero(n.detPrecio),n.detSaldo=this.utilService.quitarComasNumero(n.detSaldo),n.detValorPromedio=this.utilService.quitarComasNumero(n.detValorPromedio),n.detValorUltimaCompra=this.utilService.quitarComasNumero(n.detValorUltimaCompra),n.vtaEmpresa=c.a.KEY_EMPRESA_SELECT,t.bodCodigo&&(n.bodCodigo=t.bodCodigo,n.bodEmpresa=n.bodCodigo?t.bodEmpresa:null,n.pisSector=o.codigoCP,n.pisEmpresa=n.pisSector?c.a.KEY_EMPRESA_SELECT:null,n.secCodigo=o.codigoCP,n.secEmpresa=n.secCodigo?c.a.KEY_EMPRESA_SELECT:null),delete n.catPrecioFijo,delete n.estadoProducto,delete n.estadoPrecio,delete n.proCodigoPrincipalCopia,delete n.conversion,delete n.total,delete n.parcial,a.push(n)}return a},e.prototype.formatearVenta=function(e,t){e.vtaEmpresa=c.a.KEY_EMPRESA_SELECT,e.bodEmpresa=e.bodCodigo?c.a.KEY_EMPRESA_SELECT:null,e.conEmpresa=e.conPeriodo?c.a.KEY_EMPRESA_SELECT:null,e.cliEmpresa=c.a.KEY_EMPRESA_SELECT,e.ctaEmpresa=e.ctaCodigo?c.a.KEY_EMPRESA_SELECT:null,e.secCodigo=t.bodegaSeleccionada.codigoCP?t.bodegaSeleccionada.codigoCP:null,e.secEmpresa=e.secCodigo?c.a.KEY_EMPRESA_SELECT:null,e.usrEmpresa=c.a.KEY_EMPRESA_SELECT,e.usrCodigo=this.auth.getCodigoUser(),e.vtaDocumentoTipo=t.tipoDocumento,e.vtaListaDePrecios=t.etiquetaSeleccionada;var o=new Date(t.fechaEmision);return o.setDate(o.getDate()+t.diasCredito),e.vtaFechaVencimiento=this.utilService.formatearDateToStringYYYYMMDD(o),e.vtaFecha=this.utilService.formatearDateToStringYYYYMMDD(new Date(t.fechaEmision)),e.vtaBase0=this.utilService.quitarComasNumero(e.vtaBase0),e.vtaBaseExenta=this.utilService.quitarComasNumero(e.vtaBaseExenta),e.vtaBaseImponible=this.utilService.quitarComasNumero(e.vtaBaseImponible),e.vtaBaseNoObjeto=this.utilService.quitarComasNumero(e.vtaBaseNoObjeto),e.vtaDescuentoBase0=this.utilService.quitarComasNumero(e.vtaDescuentoBase0),e.vtaDescuentoBaseExenta=this.utilService.quitarComasNumero(e.vtaDescuentoBaseExenta),e.vtaDescuentoBaseImponible=this.utilService.quitarComasNumero(e.vtaDescuentoBaseImponible),e.vtaDescuentoBaseNoObjeto=this.utilService.quitarComasNumero(e.vtaDescuentoBaseNoObjeto),e.vtaIvaVigente=this.utilService.quitarComasNumero(e.vtaIvaVigente),e.vtaMontoIva=this.utilService.quitarComasNumero(e.vtaMontoIva),e.vtaPagadoDineroElectronico=this.utilService.quitarComasNumero(e.vtaPagadoDineroElectronico),e.vtaPagadoEfectivo=this.utilService.quitarComasNumero(e.vtaPagadoEfectivo),e.vtaPagadoOtro=this.utilService.quitarComasNumero(e.vtaPagadoOtro),e.vtaPagadoTarjetaCredito=this.utilService.quitarComasNumero(e.vtaPagadoTarjetaCredito),e.vtaRecargoBase0=this.utilService.quitarComasNumero(e.vtaRecargoBase0),e.vtaRecargoBaseImponible=this.utilService.quitarComasNumero(e.vtaRecargoBaseImponible),e.vtaSubtotalBase0=this.utilService.quitarComasNumero(e.vtaSubtotalBase0),e.vtaSubtotalBaseExenta=this.utilService.quitarComasNumero(e.vtaSubtotalBaseExenta),e.vtaSubtotalBaseImponible=this.utilService.quitarComasNumero(e.vtaSubtotalBaseImponible),e.vtaSubtotalBaseNoObjeto=this.utilService.quitarComasNumero(e.vtaSubtotalBaseNoObjeto),e.vtaTotal=this.utilService.quitarComasNumero(e.vtaTotal),e},e.prototype.construirRetencion=function(e,t,o){return t&&t.retencionIR>0&&t.retencionIVA>0?(e.usrCodigo=this.auth.getCodigoUser(),e.usrEmpresa=c.a.KEY_EMPRESA_SELECT,e.venBase0=o.vtaBase0,e.venBaseImponible=o.vtaBaseImponible,e.venBaseNoObjetoIva=o.vtaBaseNoObjeto,e.venEmpresa=o.vtaEmpresa,e.venMontoIva=o.vtaMontoIva,e.venMotivo=o.vtaMotivo,e.venNumero=o.vtaNumero,e.venPeriodo=o.vtaPeriodo,e.venRetencionAutorizacion=t.retencionAutorizacion,e.venRetencionFechaEmision=t.fecha,e.venRetencionNumero=t.retencionNumero,e.venValorRetenidoIva=t.retencionIVA,e.venValorRetenidoRenta=t.retencionIR):e=null,e},e.prototype.seleccionarBodega=function(e,t){return e.find(function(e){return e.bodCodigo==t.permisoBodegaPermitida})},e.prototype.seleccionarFormaCobro=function(e,t){return e.find(function(e){return e.fcSecuencial==t.fcSecuencial})},e.prototype.seleccionarFormaCobroPorFcSecuencial=function(e,t){return e.find(function(e){return e.fcSecuencial==t})},e.prototype.seleccionarFormaCobroPorCtaCodigo=function(e,t){return e.find(function(e){return e.ctaCodigo==t})},e.prototype.seleccionarMotivo=function(e,t){return e.find(function(e){return e.vmCodigo==t.vtaMotivo})},e.prototype.formatearIformacionAdicional=function(e){var t="";if(e&&e.length>0)for(var o=0;o<e.length;o++)t=t+e[o].clave+"="+e[o].valor+"|";return t},e.prototype.construirObjetoParaPonerloEnLaLista=function(e,t){var o=new dt.a;return o.vtaNumero=e.vtaPeriodo+"|"+e.vtaMotivo+"|"+e.vtaNumero,!0===e.vtaAnulado?o.vtaStatus="ANULADO":!0===e.vtaPendiente?o.vtaStatus="PENDIENTE":o.vtaStatus="",e&&e.conPeriodo&&e.conTipo&&e.conNumero&&(o.conNumero=e.conPeriodo+"|"+e.conTipo+"|"+e.conNumero),o.vtaDocumentoNumero=e.vtaDocumentoNumero,o.vtaDocumentoTipo=e.vtaDocumentoTipo,o.cliCodigo=e.cliCodigo,o.cliNombre=t.cliRazonSocial,o.vtaFecha=e.vtaFecha,o.vtaTotal=e.vtaTotal,o.vtaFormaPago=e.vtaFormaPago,o.vtaObservaciones=e.vtaObservaciones,o},e.prototype.precioSeleccionado=function(e){return 1===e.permisoClientePrecioPermitido?"eprecio01":2===e.permisoClientePrecioPermitido?"eprecio02":3===e.permisoClientePrecioPermitido?"eprecio03":4===e.permisoClientePrecioPermitido?"eprecio04":5===e.permisoClientePrecioPermitido?"eprecio05":6===e.permisoClientePrecioPermitido?"eprecio06":7===e.permisoClientePrecioPermitido?"eprecio07":8===e.permisoClientePrecioPermitido?"eprecio08":9===e.permisoClientePrecioPermitido?"eprecio09":10===e.permisoClientePrecioPermitido?"eprecio10":11===e.permisoClientePrecioPermitido?"eprecio11":12===e.permisoClientePrecioPermitido?"eprecio12":13===e.permisoClientePrecioPermitido?"eprecio13":14===e.permisoClientePrecioPermitido?"eprecio14":15===e.permisoClientePrecioPermitido?"eprecio15":16===e.permisoClientePrecioPermitido?"eprecio16":"proPorCantidad"},e=pt([Object(i.Injectable)({providedIn:"root"}),ut("design:paramtypes",[h.a,L.a,S.HotkeysService,K.a])],e)}(),mt=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ct=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},vt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},At=function(){function e(e,t,o,a,i,r,n,s){this.activeModal=e,this.utilService=t,this.ventaService=o,this.archivoService=a,this.toastr=i,this.auth=r,this.api=n,this.ventaFormularioService=s,this.constantes=c.a,this.bodegaSeleccionada=new rt.a,this.motivoSeleccionado=new He.a,this.anxVentasTO=new ct,this.retencion=new lt,this.formasDeImprimir=c.a.LISTA_MOTIVOS_VENTA_FORMA_IMPRIMIR,this.cargando=!1,this.validarElectronico=!1,this.montoTotalPagoValido=!1,this.vistaSoloParcial=!1,this.valor=0,this.cambio=0,this.conversion=0}return e.prototype.ngOnInit=function(){var e=this;this.autonumericCambios=mt({},this.configAutonumeric),this.autonumericCambios.maximumValue="9999999999.99",this.isScreamMd=!(window.innerWidth<=576),this.valor=this.utilService.convertirNDecimale(this.valor,6),this.conversion=this.item?this.item.detCantidad:0,this.item&&(this.item.vtIva=this.utilService.quitarComasNumero(this.item.vtIva)),this.venta.vtaPagadoEfectivo=0,this.venta.vtaPagadoDineroElectronico=0,this.venta.vtaPagadoTarjetaCredito=0,this.venta.vtaPagadoOtro=0,this.item&&(this.item.conversion=this.item.conversion?this.item.conversion:1),this.itemCopia=JSON.parse(JSON.stringify(this.item)),"precio"===this.tipo?setTimeout(function(){e.enfocarInput("precio")},50):"cantidad"===this.tipo?setTimeout(function(){e.enfocarInput("bultos")},50):"detalle"===this.tipo&&setTimeout(function(){e.enfocarInput("parcial")},50)},e.prototype.enfocarInput=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.validarDesbordamiento=function(){return!(this.utilService.quitarComasNumero(this.conversion)*this.utilService.quitarComasNumero(this.item.conversion)>9999999999.99)||(this.toastr.warning(c.a.MSJ_DESBORDAMIENTO,c.a.TAG_AVISO),!1)},e.prototype.aceptarVenta=function(e){this.accion===c.a.ACCION_MAYORIZAR?this.modificarVenta(e):this.insertarVenta(e)},e.prototype.insertarVenta=function(e){this.cargando=!0,this.venta=this.ventaFormularioService.formatearVenta(this.venta,this),this.venta.vtaPendiente=e,this.anxVentasTO=this.ventaFormularioService.construirRetencion(this.anxVentasTO,this.retencion,this.venta);var t=this.ventaFormularioService.formatearVentaDetalle(this.listaInvVentasDetalleTO,this.venta,this.bodegaSeleccionada),o={invVentasTO:new tt(this.venta),listaInvVentasDetalleTO:t,anxVentasTO:this.anxVentasTO,tipoDocumentoComplemento:this.contexto.tipoDocumentoComplemento,numeroDocumentoComplemento:this.contexto.numeroDocumentoComplemento,motivoDocumentoComplemento:this.contexto.motivoComplemento,isComprobanteElectronica:!1};this.ventaService.insertarVenta(o,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeInsertarVenta=function(e){this.venta=e.extraInfo.invVentasTO;try{if(!0===this.venta.vtaPendiente)this.cargando=!1,this.mensajeOk(e.operacionMensaje),this.activeModal.close(this.venta);else switch(this.motivoSeleccionado.vmFormaContabilizar){case"PREGUNTAR":this.preguntarContabilizar(e.operacionMensaje);break;default:this.formaDeImprimir(e.operacionMensaje)}}catch(t){this.cargando=!1,this.mensajeOk(e.operacionMensaje),this.activeModal.close(this.venta)}},e.prototype.despuesDeContabilizarVenta=function(e){this.formaDeImprimir(e)},e.prototype.formaDeImprimir=function(e){switch(this.motivoSeleccionado.vmFormaImprimir){case"AUTOMATICAMENTE":case"VISTA PREVIA":case"SELECCIONAR IMPRESORA":this.mensajeOk(e),this.imprimirInvVentas();break;case"PREGUNTAR":case"PREGUNTAR, VISTA PREVIA":case"PREGUNTAR, SELECCIONAR IMPRESORA":this.preguntarImprimirVenta(e);break;case"NO IMPRIMIR":default:this.mensajeOk(e),this.activeModal.close(this.venta)}},e.prototype.mensajeOk=function(e){this.utilService.generarSwal(c.a.VENTA,c.a.SWAL_SUCCESS,e)},e.prototype.preguntarContabilizar=function(e){var t=this,o={title:c.a.TOAST_CORRECTO,texto:e+"<br>"+c.a.MSJ_PREGUNTA_CONTABILIZAR,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_CALCULADORA+"'></i>  "+c.a.LABEL_CONTABILIZAR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){var a={empresa:c.a.KEY_EMPRESA_SELECT,periodo:t.venta.vtaPeriodo,motivo:t.venta.vtaMotivo,ventaNumero:t.venta.vtaNumero,codigoUsuario:t.auth.getCodigoUser()};t.api.post("todocompuWS/inventarioWebController/insertarInvContableVentasTO",a,c.a.KEY_EMPRESA_SELECT).then(function(o){if(o){var a=o.operacionMensaje?e+" <br><br><strong>"+o.operacionMensaje+"</strong>":e;t.despuesDeContabilizarVenta(a)}}).catch(function(e){return t.utilService.handleError(e,t)})}else t.formaDeImprimir(e)})},e.prototype.preguntarImprimirVenta=function(e){var t=this;if(this.ventaService.verificarPermiso(c.a.ACCION_IMPRIMIR,this.empresaSeleccionada,!0)){var o={title:c.a.TOAST_CORRECTO,texto:e+"<br>"+c.a.MSJ_PREGUNTA_IMPRIMIR+"<br>"+c.a.TAG_NUMERO+": "+this.venta.vtaNumero,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_IMPRIMIR+"'></i>  "+c.a.LABEL_IMPRIMIR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.imprimirInvVentas():t.activeModal.close(t.venta)})}else this.activeModal.close(this.venta)},e.prototype.imprimirInvVentas=function(){var e=this;this.cargando=!0;var t=this.ventaFormularioService.formatearVentaDetalle(this.listaInvVentasDetalleTO,this.venta,this.bodegaSeleccionada),o={invVentasTO:new tt(this.venta),listaInvVentasDetalleTO:t,isComprobanteElectronica:!1,nombreReporte:"reportComprobanteVenta"};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteVentaDetalleImpresion",o,this.empresaSeleccionada).then(function(t){t&&t._body&&t._body.byteLength>0?e.utilService.descargarArchivoPDF("venta"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),e.cargando=!1,e.activeModal.close(e.venta)}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.modificarVenta=function(e){this.cargando=!0,this.venta=this.ventaFormularioService.formatearVenta(this.venta,this),this.venta.vtaPendiente=e,this.anxVentasTO=this.ventaFormularioService.construirRetencion(this.anxVentasTO,this.retencion,this.venta);var t=this.ventaFormularioService.formatearVentaDetalle(this.listaInvVentasDetalleTO,this.venta,this.bodegaSeleccionada),o={invVentasTO:new tt(this.venta),listaInvVentasDetalleTO:t,anxVentasTO:this.anxVentasTO,tipoDocumentoComplemento:this.contexto.tipoDocumentoComplemento,numeroDocumentoComplemento:this.contexto.numeroDocumentoComplemento,motivoDocumentoComplemento:this.contexto.motivoComplemento,isComprobanteElectronica:!1};this.ventaService.modificarVenta(o,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeModificarVenta=function(e){this.cargando=!1,this.mensajeOk(e.operacionMensaje),this.activeModal.close(this.venta)},e.prototype.calcularTotales=function(e){e.detPorcentajeRecargo=this.utilService.convertirNDecimale(e.detPorcentajeRecargo,6),e.detPorcentajeDescuento=this.utilService.convertirNDecimale(e.detPorcentajeDescuento,6),e.detCantidad=this.utilService.convertirNDecimale(e.detCantidad,6),e.detPrecio=this.utilService.convertirNDecimale(this.utilService.convertirDecimaleFloat(e.parcial)/this.utilService.convertirDecimaleFloat(e.detCantidad),6);var t=this.utilService.convertirDecimaleFloat(e.parcial)*(this.utilService.convertirDecimaleFloat(e.detPorcentajeRecargo)/100),o=(this.utilService.convertirDecimaleFloat(e.parcial)+t)*(this.utilService.convertirDecimaleFloat(e.detPorcentajeDescuento)/100),a=this.utilService.convertirDecimaleFloat(e.parcial)+t-o;e.vtIva="GRAVA"==e.proEstadoIva?this.utilService.convertirNDecimale(parseFloat(a*(parseFloat(this.venta.vtaIvaVigente+"")/100)+""),6):this.utilService.convertirNDecimale(0,6),e.vtIva=this.utilService.quitarComasNumero(e.vtIva),e.total=a+this.utilService.convertirDecimaleFloat(e.vtIva),this.ventaFormularioService.calcularValoresVenta(this.venta,this.listaInvVentasDetalleTO,null)},e.prototype.calcularTotales2=function(e){e=this.ventaFormularioService.calcularValorItem(e,this.venta),this.ventaFormularioService.calcularValoresVenta(this.venta,this.listaInvVentasDetalleTO,null)},e.prototype.calcularPrecio=function(e){var t=this.utilService.convertirNDecimale(this.venta.vtaIvaVigente,6);this.valor=this.utilService.convertirNDecimale(this.valor,6),"GRAVA"==e.proEstadoIva?(this.valor=this.utilService.quitarComasNumero(this.valor),t=this.utilService.quitarComasNumero(t),e.detPrecio=this.valor/(t/100+1)):e.detPrecio=this.valor,this.calcularTotales2(e),this.activeModal.close()},e.prototype.calcularCantidadBultos=function(e){if(this.validarDesbordamiento()){e.detCantidad=this.utilService.convertirNDecimale(this.conversion,6),e.detCantidad=this.utilService.convertirNDecimale(this.utilService.convertirDecimaleFloat(e.detCantidad)*this.utilService.convertirDecimaleFloat(e.conversion),6),this.calcularTotales(e);var t={colDef:{field:"detCantidad"},data:e};this.contexto.alCambiarValorDeCelda(t),this.activeModal.close()}},e.prototype.calcularParcialInput=function(e){e.parcial=this.utilService.convertirNDecimale(e.parcial,6),e.detPrecio=this.utilService.convertirNDecimale(e.detCantidad,6),this.calcularTotales(e)},e.prototype.calculoValoresDescuentoRecargo=function(e){var t=this.utilService.convertirDecimaleFloat(JSON.parse(JSON.stringify(e.total)));e.detPorcentajeRecargo=this.utilService.convertirNDecimale(e.detPorcentajeRecargo,6),e.detPorcentajeDescuento=this.utilService.convertirNDecimale(e.detPorcentajeDescuento,6),this.utilService.convertirDecimaleFloat(e.detPorcentajeRecargo)>t&&(this.toastr.warning(c.a.MSJ_SUPERO_RECARGO_100_PORCIENTO,c.a.TOAST_ADVERTENCIA),e.detPorcentajeRecargo=this.utilService.convertirNDecimale(0,6)),this.utilService.convertirDecimaleFloat(e.detPorcentajeDescuento)>t&&(this.toastr.warning(c.a.MSJ_SUPERO_DESCUENTO_100_PORCIENTO,c.a.TOAST_ADVERTENCIA),e.detPorcentajeDescuento=this.utilService.convertirNDecimale(0,6));var o=this.utilService.convertirDecimaleFloat(e.parcial)*(this.utilService.convertirDecimaleFloat(e.detPorcentajeRecargo)/100),a=(this.utilService.convertirDecimaleFloat(e.parcial)+this.utilService.convertirDecimaleFloat(o))*(this.utilService.convertirDecimaleFloat(e.detPorcentajeDescuento)/100);e.total=this.utilService.convertirDecimaleFloat(e.parcial)+this.utilService.convertirDecimaleFloat(o)-this.utilService.convertirDecimaleFloat(a),this.calcularTotales(e)},e.prototype.validarDetalle=function(e){this.item.pisNumero=e.pisNumero,this.item.detPorcentajeRecargo=e.detPorcentajeRecargo,this.item.detPorcentajeDescuento=e.detPorcentajeDescuento,this.item.parcial=e.parcial,this.item.total=e.total,this.contexto.gridApi.refreshCells(),this.calcularTotales(this.item),this.activeModal.close()},e.prototype.verDatosParcial=function(){this.vistaSoloParcial=!0},e.prototype.cancelarParcial=function(){this.vistaSoloParcial=!1},e.prototype.calcularParcialModal=function(e){var t=this.utilService.convertirNDecimale(this.venta.vtaIvaVigente,6);this.valor=this.utilService.convertirNDecimale(this.valor,6),"GRAVA"===e.proEstadoIva?e.parcial=this.utilService.convertirDecimaleFloat(this.valor)/(this.utilService.convertirDecimaleFloat(t)/100+1):e.parcial=this.utilService.convertirDecimaleFloat(this.valor),e.parcial=this.utilService.convertirNDecimale(e.parcial,6),e.detCantidad=this.utilService.convertirNDecimale(e.detCantidad,6),e.detPrecio=this.utilService.convertirDecimaleFloat(e.parcial)/this.utilService.convertirDecimaleFloat(e.detCantidad),this.calcularTotales2(e),this.activeModal.close()},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.calcularCambio=function(){this.validarElectronico=!1,this.montoTotalPagoValido=!1,this.venta.vtaPagadoEfectivo=this.utilService.convertirNDecimale(this.venta.vtaPagadoEfectivo,2),this.venta.vtaPagadoDineroElectronico=this.utilService.convertirNDecimale(this.venta.vtaPagadoDineroElectronico,2),this.venta.vtaPagadoTarjetaCredito=this.utilService.convertirNDecimale(this.venta.vtaPagadoTarjetaCredito,2),this.venta.vtaPagadoOtro=this.utilService.convertirNDecimale(this.venta.vtaPagadoOtro,2),this.validarElectronico=0!==this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoEfectivo)&&this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoEfectivo)<this.utilService.convertirDecimaleFloat(this.venta.vtaTotal),this.validarElectronico||(this.venta.vtaPagadoDineroElectronico=this.utilService.convertirNDecimale(0,2),this.venta.vtaPagadoTarjetaCredito=this.utilService.convertirNDecimale(0,2));var e=this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoDineroElectronico)+this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoEfectivo)+this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoTarjetaCredito);this.validarElectronico||(this.venta.vtaPagadoOtro=this.utilService.convertirNDecimale(0,2)),e+=this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoOtro),this.validarBotonGuardar(e)},e.prototype.validarBotonGuardar=function(e){var t=this.venta.vtaTotal;this.cambio=e-this.utilService.convertirDecimaleFloat(t),this.cambio=this.cambio<0?0:this.cambio,this.montoTotalPagoValido=this.validarElectronico?0!==e&&e===this.utilService.convertirDecimaleFloat(t):e>=this.utilService.convertirDecimaleFloat(t)},e.prototype.calcularDiferenciaMontoTotal=function(){var e=this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoDineroElectronico)+this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoEfectivo)+this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoTarjetaCredito),t=this.utilService.convertirDecimaleFloat(this.venta.vtaTotal)-e;this.venta.vtaPagadoOtro=0===e?this.utilService.convertirNDecimale(this.venta.vtaTotal,2):this.utilService.convertirNDecimale(t<0?0:t,2);var o=e+this.utilService.convertirDecimaleFloat(this.venta.vtaPagadoOtro);this.validarBotonGuardar(o)},Ct([Object(i.Input)(),vt("design:type",ot)],e.prototype,"item",void 0),Ct([Object(i.Input)(),vt("design:type",tt)],e.prototype,"venta",void 0),Ct([Object(i.Input)(),vt("design:type",String)],e.prototype,"tipo",void 0),Ct([Object(i.Input)(),vt("design:type",et.a)],e.prototype,"caja",void 0),Ct([Object(i.Input)(),vt("design:type",Object)],e.prototype,"tipoDocumento",void 0),Ct([Object(i.Input)(),vt("design:type",Object)],e.prototype,"tipoEmpresa",void 0),Ct([Object(i.Input)(),vt("design:type",Object)],e.prototype,"accion",void 0),Ct([Object(i.Input)(),vt("design:type",Object)],e.prototype,"configAutonumeric",void 0),Ct([Object(i.Input)(),vt("design:type",Array)],e.prototype,"listaInvVentasDetalleTO",void 0),Ct([Object(i.Input)(),vt("design:type",Array)],e.prototype,"listadoPiscinaTO",void 0),Ct([Object(i.Input)(),vt("design:type",Object)],e.prototype,"etiquetaSeleccionada",void 0),Ct([Object(i.Input)(),vt("design:type",Object)],e.prototype,"fechaEmision",void 0),Ct([Object(i.Input)(),vt("design:type",Object)],e.prototype,"diasCredito",void 0),Ct([Object(i.Input)(),vt("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),Ct([Object(i.Input)(),vt("design:type",rt.a)],e.prototype,"bodegaSeleccionada",void 0),Ct([Object(i.Input)(),vt("design:type",He.a)],e.prototype,"motivoSeleccionado",void 0),Ct([Object(i.Input)(),vt("design:type",ct)],e.prototype,"anxVentasTO",void 0),Ct([Object(i.Input)(),vt("design:type",Object)],e.prototype,"contexto",void 0),Ct([Object(i.HostListener)("window:resize",["$event"]),vt("design:type",Function),vt("design:paramtypes",[]),vt("design:returntype",void 0)],e.prototype,"onResize",null),e=Ct([Object(i.Component)({selector:"app-modal-venta-detalle",template:o("v+UO")}),vt("design:paramtypes",[T.a,h.a,Te.a,le.a,u.b,K.a,p.a,ht])],e)}();!function(e){e.ANULACION="ANULACION",e.DEVOLUCION="DEVOLUCION",e.OTROS="OTROS"}(k||(k={}));var ft=o("G21y"),gt=o("tIKS"),bt=o("HaXn"),Ot=o("9eNg"),St=function(){function e(e){this.vtaEmpresa=null,this.vtaPeriodo=null,this.vtaMotivo=null,this.vtaNumero=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.vtaEmpresa=e.vtaEmpresa?e.vtaEmpresa:this.vtaEmpresa,this.vtaPeriodo=e.vtaPeriodo?e.vtaPeriodo:this.vtaPeriodo,this.vtaMotivo=e.vtaMotivo?e.vtaMotivo:this.vtaMotivo,this.vtaNumero=e.vtaNumero?e.vtaNumero:this.vtaNumero},e}(),It=o("pZ6e"),Et=o("SxCF"),Rt=function(){function e(e){this.profEmpresa=null,this.profPeriodo=null,this.profMotivo=null,this.profNumero=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.profEmpresa=e.profEmpresa?e.profEmpresa:this.profEmpresa,this.profPeriodo=e.profPeriodo?e.profPeriodo:this.profPeriodo,this.profMotivo=e.profMotivo?e.profMotivo:this.profMotivo,this.profNumero=e.profNumero?e.profNumero:this.profNumero},e}(),Tt=function(){function e(e){this.invProformasPK=new Rt,this.profFecha=null,this.profIvaVigente=0,this.profObservaciones=null,this.profPendiente=!1,this.profAnulado=!1,this.profBase0=0,this.profBaseimponible=0,this.profDescuentoBase0=0,this.profDescuentoBaseimponible=0,this.profSubtotalBase0=0,this.profSubtotalBaseimponible=0,this.profMontoiva=0,this.profTotal=0,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invCliente=new It.a,this.invProformasDetalleList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invProformasPK=e.invProformasPK?e.invProformasPK:this.invProformasPK,this.profFecha=e.profFecha?e.profFecha:this.profFecha,this.profIvaVigente=e.profIvaVigente?e.profIvaVigente:this.profIvaVigente,this.profObservaciones=e.profObservaciones?e.profObservaciones:this.profObservaciones,this.profPendiente=e.profPendiente?e.profPendiente:this.profPendiente,this.profAnulado=e.profAnulado?e.profAnulado:this.profAnulado,this.profBase0=e.profBase0?e.profBase0:this.profBase0,this.profBaseimponible=e.profBaseimponible?e.profBaseimponible:this.profBaseimponible,this.profDescuentoBase0=e.profDescuentoBase0?e.profDescuentoBase0:this.profDescuentoBase0,this.profDescuentoBaseimponible=e.profDescuentoBaseimponible?e.profDescuentoBaseimponible:this.profDescuentoBaseimponible,this.profSubtotalBase0=e.profSubtotalBase0?e.profSubtotalBase0:this.profSubtotalBase0,this.profSubtotalBaseimponible=e.profSubtotalBaseimponible?e.profSubtotalBaseimponible:this.profSubtotalBaseimponible,this.profMontoiva=e.profMontoiva?e.profMontoiva:this.profMontoiva,this.profTotal=e.profTotal?e.profTotal:this.profTotal,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invCliente=e.invCliente?e.invCliente:this.invCliente,this.invProformasDetalleList=e.invProformasDetalleList?e.invProformasDetalleList:this.invProformasDetalleList},e}(),_t=function(){function e(e){this.fcSecuencial=null,this.fcDetalle="",this.fcTipoPrincipal="",this.fcInactivo=!1,this.secEmpresa="",this.secCodigo="",this.ctaEmpresa="",this.ctaCodigo="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=new Date,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.fcSecuencial=e.fcSecuencial?e.fcSecuencial:this.fcSecuencial,this.fcDetalle=e.fcDetalle?e.fcDetalle:this.fcDetalle,this.fcTipoPrincipal=e.fcTipoPrincipal?e.fcTipoPrincipal:this.fcTipoPrincipal,this.fcInactivo=e.fcInactivo?e.fcInactivo:this.fcInactivo,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.ctaEmpresa=e.ctaEmpresa?e.ctaEmpresa:this.ctaEmpresa,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),Pt=function(){function e(e){this.invVentasPK=new St,this.vtaNumeroAlterno=null,this.vtaDocumentoEmpresa=null,this.vtaDocumentoTipo=null,this.vtaDocumentoNumero=null,this.vtaFecha=null,this.vtaFechaVencimiento=null,this.vtaIvaVigente=0,this.vtaObservaciones=null,this.vtaInformacionAdicional=null,this.vtaPendiente=!1,this.vtaRevisado=!1,this.vtaAnulado=!1,this.vtaFormaPago=null,this.vtaBase0=0,this.vtaBaseImponible=0,this.vtaBaseNoObjeto=0,this.vtaBaseExenta=0,this.vtaDescuentoBase0=0,this.vtaDescuentoBaseImponible=0,this.vtaDescuentoBaseNoObjeto=0,this.vtaDescuentoBaseExenta=0,this.vtaSubtotalBase0=0,this.vtaSubtotalBaseImponible=0,this.vtaSubtotalBaseNoObjeto=0,this.vtaSubtotalBaseExenta=0,this.vtaMontoiva=0,this.vtaTotal=0,this.vtaPagadoEfectivo=0,this.vtaPagadoDineroElectronico=0,this.vtaPagadoTarjetaCredito=0,this.vtaPagadoOtro=0,this.secEmpresa=null,this.secCodigo=null,this.ctaEmpresa=null,this.ctaCodigo=null,this.conEmpresa=null,this.conPeriodo=null,this.conTipo=null,this.conNumero=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.usrModifica=null,this.usrFechaModifica=null,this.usrComentario=null,this.invVentasDetalleList=[],this.invVentasRecepcionList=[],this.invVentasMotivoAnulacionList=[],this.invVentasComplementoList=[],this.invCliente=new It.a,this.invBodega=new Et.a,this.vtaListaDePrecios="",this.vtaReembolso=!1,this.fcBanco="",this.fcCuenta="",this.fcCheque="",this.fcLote="",this.fcTitular="",this.invProformas=new Tt,this.fcSecuencial=new _t,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invVentasPK=e.invVentasPK?e.invVentasPK:this.invVentasPK,this.vtaNumeroAlterno=e.vtaNumeroAlterno?e.vtaNumeroAlterno:this.vtaNumeroAlterno,this.vtaDocumentoEmpresa=e.vtaDocumentoEmpresa?e.vtaDocumentoEmpresa:this.vtaDocumentoEmpresa,this.vtaDocumentoTipo=e.vtaDocumentoTipo?e.vtaDocumentoTipo:this.vtaDocumentoTipo,this.vtaDocumentoNumero=e.vtaDocumentoNumero?e.vtaDocumentoNumero:this.vtaDocumentoNumero,this.vtaFecha=e.vtaFecha?e.vtaFecha:this.vtaFecha,this.vtaFechaVencimiento=e.vtaFechaVencimiento?e.vtaFechaVencimiento:this.vtaFechaVencimiento,this.vtaIvaVigente=e.vtaIvaVigente?e.vtaIvaVigente:this.vtaIvaVigente,this.vtaObservaciones=e.vtaObservaciones?e.vtaObservaciones:this.vtaObservaciones,this.vtaInformacionAdicional=e.vtaInformacionAdicional?e.vtaInformacionAdicional:this.vtaInformacionAdicional,this.vtaPendiente=e.vtaPendiente?e.vtaPendiente:this.vtaPendiente,this.vtaRevisado=e.vtaRevisado?e.vtaRevisado:this.vtaRevisado,this.vtaAnulado=e.vtaAnulado?e.vtaAnulado:this.vtaAnulado,this.vtaFormaPago=e.vtaFormaPago?e.vtaFormaPago:this.vtaFormaPago,this.vtaBase0=e.vtaBase0?e.vtaBase0:this.vtaBase0,this.vtaBaseImponible=e.vtaBaseImponible?e.vtaBaseImponible:this.vtaBaseImponible,this.vtaBaseNoObjeto=e.vtaBaseNoObjeto?e.vtaBaseNoObjeto:this.vtaBaseNoObjeto,this.vtaBaseExenta=e.vtaBaseExenta?e.vtaBaseExenta:this.vtaBaseExenta,this.vtaDescuentoBase0=e.vtaDescuentoBase0?e.vtaDescuentoBase0:this.vtaDescuentoBase0,this.vtaDescuentoBaseImponible=e.vtaDescuentoBaseImponible?e.vtaDescuentoBaseImponible:this.vtaDescuentoBaseImponible,this.vtaDescuentoBaseNoObjeto=e.vtaDescuentoBaseNoObjeto?e.vtaDescuentoBaseNoObjeto:this.vtaDescuentoBaseNoObjeto,this.vtaDescuentoBaseExenta=e.vtaDescuentoBaseExenta?e.vtaDescuentoBaseExenta:this.vtaDescuentoBaseExenta,this.vtaSubtotalBase0=e.vtaSubtotalBase0?e.vtaSubtotalBase0:this.vtaSubtotalBase0,this.vtaSubtotalBaseImponible=e.vtaSubtotalBaseImponible?e.vtaSubtotalBaseImponible:this.vtaSubtotalBaseImponible,this.vtaSubtotalBaseNoObjeto=e.vtaSubtotalBaseNoObjeto?e.vtaSubtotalBaseNoObjeto:this.vtaSubtotalBaseNoObjeto,this.vtaSubtotalBaseExenta=e.vtaSubtotalBaseExenta?e.vtaSubtotalBaseExenta:this.vtaSubtotalBaseExenta,this.vtaMontoiva=e.vtaMontoiva?e.vtaMontoiva:this.vtaMontoiva,this.vtaTotal=e.vtaTotal?e.vtaTotal:this.vtaTotal,this.vtaPagadoEfectivo=e.vtaPagadoEfectivo?e.vtaPagadoEfectivo:this.vtaPagadoEfectivo,this.vtaPagadoDineroElectronico=e.vtaPagadoDineroElectronico?e.vtaPagadoDineroElectronico:this.vtaPagadoDineroElectronico,this.vtaPagadoTarjetaCredito=e.vtaPagadoTarjetaCredito?e.vtaPagadoTarjetaCredito:this.vtaPagadoTarjetaCredito,this.vtaPagadoOtro=e.vtaPagadoOtro?e.vtaPagadoOtro:this.vtaPagadoOtro,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.ctaEmpresa=e.ctaEmpresa?e.ctaEmpresa:this.ctaEmpresa,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.conEmpresa=e.conEmpresa?e.conEmpresa:this.conEmpresa,this.conPeriodo=e.conPeriodo?e.conPeriodo:this.conPeriodo,this.conTipo=e.conTipo?e.conTipo:this.conTipo,this.conNumero=e.conNumero?e.conNumero:this.conNumero,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.usrModifica=e.usrModifica?e.usrModifica:this.usrModifica,this.usrFechaModifica=e.usrFechaModifica?e.usrFechaModifica:this.usrFechaModifica,this.usrComentario=e.usrComentario?e.usrComentario:this.usrComentario,this.invVentasDetalleList=e.invVentasDetalleList?e.invVentasDetalleList:this.invVentasDetalleList,this.invVentasRecepcionList=e.invVentasRecepcionList?e.invVentasRecepcionList:this.invVentasRecepcionList,this.invVentasMotivoAnulacionList=e.invVentasMotivoAnulacionList?e.invVentasMotivoAnulacionList:this.invVentasMotivoAnulacionList,this.invVentasComplementoList=e.invVentasComplementoList?e.invVentasComplementoList:this.invVentasComplementoList,this.invCliente=e.invCliente?e.invCliente:this.invCliente,this.invBodega=e.invBodega?e.invBodega:this.invBodega,this.vtaListaDePrecios=e.vtaListaDePrecios?e.vtaListaDePrecios:this.vtaListaDePrecios,this.vtaReembolso=e.vtaReembolso?e.vtaReembolso:this.vtaReembolso,this.fcBanco=e.fcBanco?e.fcBanco:this.fcBanco,this.fcCuenta=e.fcCuenta?e.fcCuenta:this.fcCuenta,this.fcCheque=e.fcCheque?e.fcCheque:this.fcCheque,this.fcLote=e.fcLote?e.fcLote:this.fcLote,this.fcTitular=e.fcTitular?e.fcTitular:this.fcTitular,this.invProformas=e.invProformas?e.invProformas:this.invProformas,this.fcSecuencial=e.fcSecuencial?e.fcSecuencial:this.fcSecuencial},e}(),Nt=function(){function e(e){this.anuSecuencial=0,this.anuComentario=null,this.invVentas=new Pt,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.anuSecuencial=e.anuSecuencial?e.anuSecuencial:this.anuSecuencial,this.anuComentario=e.anuComentario?e.anuComentario:this.anuComentario,this.invVentas=e.invVentas?e.invVentas:this.invVentas},e}(),yt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Dt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Lt=function(){function e(e,t,o,a,r,n,s,l,d,p){this.auth=e,this.modalService=t,this.utilService=o,this.ventaService=a,this.toastr=r,this.filasService=n,this.piscinaService=s,this.api=l,this.archivoService=d,this.ventaFormularioService=p,this.constantes=c.a,this.accion=null,this.tipoEmpresa="",this.etiquetaSeleccionada="",this.tipoDocumentoComplemento="",this.numeroDocumentoComplemento="",this.motivoComplemento="",this.titulo="",this.enviarAccion=new i.EventEmitter,this.listaInvVentasDetalleTO=new Array,this.listaInvVentasEliminarDetalleTO=new Array,this.listadoPiscinaTO=new Array,this.listadoFormaCobro=new Array,this.listadoPeriodos=new Array,this.listadoMotivos=new Array,this.listadoBodegas=new Array,this.listadoTipoComprobante=new Array,this.listadoMotivoComplemento=new Array,this.anxVentasTO=new ct,this.opcionesDetalle=[],this.invVentasTO=new tt,this.invProductoEtiquetas=new xe.a,this.caja=new et.a,this.bodegaSeleccionada=new rt.a,this.formaCobroSeleccionada=new nt.a,this.cliente=new at.a,this.detalleSeleccionado=new ot,this.motivoSeleccionado=new He.a,this.informacionAdicional=new Array,this.etiquetas=[],this.filasTiempo=new D.a,this.diasCredito=0,this.isScreamMd=!0,this.cargando=!1,this.empresaExtranjera=!1,this.activar=!1,this.isClienteValido=!1,this.mostrarAccionesContabilidad=!1,this.mostrarAccionesCliente=!1,this.documentoValido=!0,this.documentoNumeroCopia=null,this.fechaVencimientoValido=!1,this.documentoCaducado=!1,this.esNota=!1,this.puedeEditar=!0,this.contabilizar=!1,this.verContable=!1,this.objetoContableEnviar={},this.columnDefs=[],this.components={},this.estilos={},this.ventaFormularioService.definirAtajosDeTeclado(this),this.es=this.utilService.setLocaleDate(),this.configAutonumeric=this.ventaFormularioService.obtenerAutonumeric()}return e.prototype.ngOnInit=function(){if(this.cargando=!0,this.accion=this.parametros.accion,this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS),this.titulo=this.ventaService.obtenerTituloFormulario(this.tipoDocumento),"04"==this.tipoDocumento||"05"==this.tipoDocumento)for(var e in this.esNota=!0,this.estilos={width:"100%",height:"calc(100vh - 620px)"},k)this.listadoMotivoComplemento.push(new W.a({clave:k[e],valor:e}));else this.estilos={width:"100%",height:"calc(100vh - 490px)"};this.ventaFormularioService.enfocarInput("codCliente"),c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.inicializar(),this.obtenerDatosParaVentas()},e.prototype.actuarSegunAccionDelPadre=function(e){var t=this.parametros.seleccionado;switch(e){case c.a.ACCION_CONSULTAR:case c.a.ACCION_ANULAR:case c.a.ACCION_RESTAURAR:t.conNumero?(this.verContable=!0,this.contabilizar=!1):(this.verContable=!1,this.contabilizar=!1),this.puedeEditar=!1,this.consultarVenta(t.vtaDocumentoNumero,t.vtaDocumentoTipo,t.vtaNumero);break;case c.a.ACCION_CREAR:this.puedeEditar=!0;var o=new ot({detCantidad:1});this.listaInvVentasDetalleTO.push(o),this.caja.permisoFormaPagoPermitida?this.formaCobroSeleccionada=this.ventaFormularioService.seleccionarFormaCobroPorCtaCodigo(this.listadoFormaCobro,this.caja.permisoFormaPagoPermitida):this.formaCobroSeleccionada=null,this.cargando=!1;break;case c.a.ACCION_MAYORIZAR:t.conNumero?(this.verContable=!0,this.contabilizar=!1):(this.verContable=!1,this.contabilizar=!0),this.contabilizar=!0,this.puedeEditar=!0,this.consultarVenta(t.vtaDocumentoNumero,t.vtaDocumentoTipo,t.vtaNumero)}this.iniciarAgGrid()},e.prototype.inicializar=function(){this.tipoEmpresa=this.empresaSeleccionada.parametros[0]?this.empresaSeleccionada.parametros[0].parActividad:"",this.invVentasTO=new tt,this.activar=!1,this.cliente=new at.a,this.fechaVencimientoValido=!0,this.listaInvVentasDetalleTO=new Array,this.listaInvVentasEliminarDetalleTO=new Array},e.prototype.obtenerDatosParaVentas=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,usuarioCodigo:this.auth.getCodigoUser(),tipoDocumento:this.tipoDocumento};this.ventaService.obtenerDatosParaVentas(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosParaVentas=function(e){this.caja=new et.a(e.caja),this.caja.permisoClientePrecioPermitido=e.caja.permisoClientePrecioPermitido,this.listadoPeriodos=e.listadoPeriodos,this.listadoMotivos=e.listadoMotivos,this.listadoBodegas=e.listadoBodegas,this.bodegaSeleccionada=this.ventaFormularioService.seleccionarBodega(this.listadoBodegas,this.caja),this.listadoTipoComprobante=e.listadoTipoComprobante?e.listadoTipoComprobante:new Array,this.tipoDocumentoComplemento=this.esNota&&this.listadoTipoComprobante[0]?this.listadoTipoComprobante[0].tcCodigo:"",e.etiquetas?this.despuesDeObtenerEtiquetas(e.etiquetas):this.etiquetaSeleccionada="proPorCantidad",this.etiquetaSeleccionada=this.ventaFormularioService.precioSeleccionado(this.caja),this.fechaEmision=new Date(e.fechaActual),this.listadoPiscinaTO=e.listadoPiscinas,this.listadoFormaCobro=e.listadoFormaCobro?e.listadoFormaCobro:new Array,this.invVentasTO=new tt(e.venta),this.invVentasTO.vtaDocumentoNumero=""===this.invVentasTO.vtaDocumentoNumero?null:this.invVentasTO.vtaDocumentoNumero,this.invVentasTO.fcSecuencial?this.formaCobroSeleccionada=this.ventaFormularioService.seleccionarFormaCobroPorFcSecuencial(this.listadoFormaCobro,this.invVentasTO.fcSecuencial):this.formaCobroSeleccionada=null,this.motivoSeleccionado=this.ventaFormularioService.seleccionarMotivo(this.listadoMotivos,this.invVentasTO),this.actuarSegunAccionDelPadre(this.accion),this.accion===c.a.ACCION_CREAR&&this.validarNumeroDoc()},e.prototype.despuesDeObtenerEtiquetas=function(e){for(var t in this.invProductoEtiquetas=new xe.a(e),this.invProductoEtiquetas)t.toString().indexOf("eprecio")>=0&&""!=this.invProductoEtiquetas[t]&&this.etiquetas.push({field:t,value:this.invProductoEtiquetas[t]})},e.prototype.cambiarActivar=function(e){this.activar=!e;var t={empresa:this.empresaSeleccionada,accion:c.a.ACCION_ACTIVAR,estado:e};this.enviarAccion.emit(t)},e.prototype.getIVA=function(){var e={fechaFactura:this.fechaEmision};this.ventaService.obtenerIva(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.verificarPermiso=function(e,t){return this.ventaService.verificarPermiso(e,this.empresaSeleccionada,t)},e.prototype.despuesDeObtenerIva=function(e){this.invVentasTO.vtaIvaVigente=e,this.calcularValoresPrecioLista()},e.prototype.cancelar=function(){var e=this,t={empresa:this.empresaSeleccionada,accion:c.a.ACCION_CANCELAR};switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CREAR:var o={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o&&e.enviarAccion.emit(t)});break;default:this.enviarAccion.emit(t)}},e.prototype.ejecutarAccion=function(e,t){switch(t){case c.a.ACCION_VER_DETALLE_ITEM_VENTA:this.detalleSeleccionado=e,this.accionAdicional(this.detalleSeleccionado)}},e.prototype.cantidadFocusAndEditingCell=function(e){this.gridApi.setFocusedCell(e,"detCantidad"),this.gridApi.startEditingCell({rowIndex:e,colKey:"detCantidad"})},e.prototype.accionAdicional=function(e,t){var o=this,a=!1;switch(t=t||"detalle"){case"precio":a=e&&e.proCodigoPrincipal&&(this.caja.permisoCambiarPrecio||!e.catPrecioFijo||!e.estadoPrecio)&&e.estadoProducto;break;case"cantidad":a=e&&e.proCodigoPrincipal&&e.estadoProducto;break;default:a=!0}if(a){this.invVentasTO.vtaInformacionAdicional=this.ventaFormularioService.formatearIformacionAdicional(this.informacionAdicional),this.invVentasTO.fcSecuencial=this.formaCobroSeleccionada&&this.formaCobroSeleccionada.fcSecuencial?this.formaCobroSeleccionada.fcSecuencial:null;var i=this.modalService.open(At,{size:"lg",windowClass:"miSize",backdrop:"static"});i.componentInstance.item=e,i.componentInstance.venta=this.invVentasTO,i.componentInstance.anxVentasTO=this.anxVentasTO,i.componentInstance.tipo=t,i.componentInstance.caja=this.caja,i.componentInstance.tipoDocumento=this.tipoDocumento,i.componentInstance.tipoEmpresa=this.tipoEmpresa,i.componentInstance.accion=this.accion,i.componentInstance.configAutonumeric=this.configAutonumeric,i.componentInstance.listaInvVentasDetalleTO=this.listaInvVentasDetalleTO,i.componentInstance.listadoPiscinaTO=this.listadoPiscinaTO,i.componentInstance.etiquetaSeleccionada=this.etiquetaSeleccionada,i.componentInstance.empresaSeleccionada=this.empresaSeleccionada,i.componentInstance.fechaEmision=this.fechaEmision,i.componentInstance.diasCredito=this.diasCredito,i.componentInstance.bodegaSeleccionada=this.bodegaSeleccionada,i.componentInstance.motivoSeleccionado=this.motivoSeleccionado,i.componentInstance.contexto=this,i.result.then(function(e){if(o.ventaFormularioService.refreshGrid(o.gridApi),e){var a={accion:c.a.ACCION_CREADO,vtaResultante:o.ventaFormularioService.construirObjetoParaPonerloEnLaLista(e,o.cliente),empresa:o.empresaSeleccionada};o.enviarAccion.emit(a)}if("cantidad"===t){var i=o.listaInvVentasDetalleTO.findIndex(function(e){return e.proCodigoPrincipal===o.detalleSeleccionado.proCodigoPrincipal});o.gridApi.setFocusedCell(i,"proCodigoPrincipal"),o.ventaFormularioService.cantidadFocusAndEditingCell(i,o.gridApi)}},function(){})}},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_NUEVO:case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS)},e.prototype.generarOpciones=function(e){var t=this,o=this.ventaService.verificarPermiso(this.accion,this.empresaSeleccionada,!1),a=e&&e.proCodigoPrincipal&&e.estadoProducto;this.opcionesDetalle=[{label:c.a.MSJ_VER_DATOS,icon:c.a.ICON_INFO_CIRCULO,disabled:!a,command:function(){return a?t.accionAdicional(e):null}},{label:c.a.ACCION_AGREGAR_FILA_ARRIBA,icon:c.a.ICON_FLECHA_ARRIBA,disabled:!o,command:function(){return o?t.agregarFila("up",e):null}},{label:c.a.ACCION_AGREGAR_FILA_ABAJO,icon:c.a.ICON_FLECHA_ABAJO,disabled:!o,command:function(){return o?t.agregarFila("down",e):null}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?t.eliminarFila(e):null}}]},e.prototype.agregarFilaAlFinal=function(e){this.listaInvVentasDetalleTO=this.ventaFormularioService.agregarFilaAlFinal(e,this.listaInvVentasDetalleTO,this.detalleSeleccionado,this.accion,this.gridApi)},e.prototype.agregarFila=function(e,t){this.listaInvVentasDetalleTO=this.ventaFormularioService.agregarFila(e,this.listaInvVentasDetalleTO,t,this.gridApi)},e.prototype.refrescarOrdenDetalle=function(e){var t=this,o=0;e||this.listaInvVentasDetalleTO.forEach(function(e){var a=e;a.detOrden=o,t.listaInvVentasDetalleTO[o]=a,o+=1}),this.listaInvVentasDetalleTO.length>0&&(this.detalleSeleccionado=0===e?this.listaInvVentasDetalleTO[0]:this.listaInvVentasDetalleTO[this.listaInvVentasDetalleTO.length-1]),this.filasService.actualizarFilas(this.listaInvVentasDetalleTO.length)},e.prototype.eliminarFila=function(e){var t=this;if(this.listaInvVentasDetalleTO.length>1){var o=this.listaInvVentasDetalleTO.indexOf(e);if(e&&e.detSecuencia>0){var a={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(a).then(function(a){a&&(t.cargando=!0,t.listaInvVentasEliminarDetalleTO.push(e),t.quitarElementoDeFila(o))})}else this.quitarElementoDeFila(o)}},e.prototype.quitarElementoDeFila=function(e){var t=this.listaInvVentasDetalleTO.slice();t.splice(e,1),this.listaInvVentasDetalleTO=t,this.ventaFormularioService.calcularValoresVenta(this.invVentasTO,this.listaInvVentasDetalleTO,this.gridApi),this.ventaFormularioService.refreshGrid(this.gridApi),this.cargando=!1},e.prototype.validarFechaVenc=function(){Number(this.diasCredito)>this.cliente.cliDiasCredito&&(this.diasCredito=this.cliente.cliDiasCredito)},e.prototype.validarFechaCaducaNumeroDoc=function(){if(this.documentoCaducado=!0,this.invVentasTO.vtaDocumentoNumero&&this.fechaEmision&&this.documentoCaducado){var e={empresa:c.a.KEY_EMPRESA_SELECT,numeroRetencion:this.invVentasTO.vtaDocumentoNumero,numeroComprobante:this.tipoDocumento,fechaVencimiento:this.utilService.convertirFechaStringYYYYMMDD(this.fechaEmision)};this.ventaService.validarNumeroAutorizacion(e,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeValidarNumeroAutorizacion=function(e){e&&("CADUCADO"===e.numeroAutorizacion?(this.documentoCaducado=!0,this.toastr.warning(c.a.MSJ_DOCUMENTO_CADUCADO,c.a.TAG_AVISO)):this.documentoCaducado=!1)},e.prototype.validarNumeroDoc=function(){var e=!0,t={empresa:c.a.KEY_EMPRESA_SELECT,tipoDocumento:this.tipoDocumento,numeroDocumento:this.invVentasTO.vtaDocumentoNumero};this.accion===c.a.ACCION_MAYORIZAR&&this.documentoNumeroCopia===this.invVentasTO.vtaDocumentoNumero&&(e=!1,this.documentoValido=!0),e&&this.invVentasTO.vtaDocumentoNumero&&this.ventaService.validarNumero(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeValidarNumero=function(e){this.documentoValido=e,this.validarFechaCaducaNumeroDoc()},e.prototype.validarCamposObligatorios=function(){var e=this;return this.motivoSeleccionado=this.motivoSeleccionado?this.motivoSeleccionado:this.listadoMotivos.find(function(t){return t.vmCodigo==e.invVentasTO.vtaMotivo}),!!(this.bodegaSeleccionada.bodCodigo&&this.formaCobroSeleccionada&&this.motivoSeleccionado&&this.etiquetaSeleccionada)&&(this.invVentasTO.vtaFormaPago="CUENTAS POR COBRAR"===this.formaCobroSeleccionada.fcTipoPrincipal?"POR PAGAR":this.formaCobroSeleccionada.fcDetalle,this.invVentasTO.ctaCodigo=this.formaCobroSeleccionada.ctaCodigo,this.invVentasTO.ctaEmpresa=this.formaCobroSeleccionada.ctaEmpresa,!0)},e.prototype.listarPiscinas=function(){this.invVentasTO.bodCodigo=this.bodegaSeleccionada.bodCodigo,this.listadoPiscinaTO=new Array,this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,sector:this.bodegaSeleccionada.codigoCP};this.piscinaService.listarPrdListaPiscinaTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPiscina=function(e){this.listadoPiscinaTO=e,this.cargando=!1},e.prototype.calcularTotales=function(e){e=this.ventaFormularioService.calcularValorItem(e,this.invVentasTO),this.invVentasTO=this.ventaFormularioService.calcularValoresVenta(this.invVentasTO,this.listaInvVentasDetalleTO,this.gridApi)},e.prototype.calcularPrecioLista=function(e){var t=this;this.toastr.warning(c.a.MSJ_VERIFIQUE_PRECIOS,c.a.TOAST_ADVERTENCIA),e.forEach(function(e){e.proCodigoPrincipal&&t.establecerValoresDeProducto(e)})},e.prototype.calcularValoresPrecioLista=function(){var e=this;this.listaInvVentasDetalleTO.forEach(function(t){e.calcularTotales(t)})},e.prototype.verContableVenta=function(){this.invVentasTO.conPeriodo&&this.invVentasTO.conTipo&&this.invVentasTO.conNumero?(this.mostrarAccionesContabilidad=!0,this.cargando=!0,this.objetoContableEnviar={accion:this.accion,contable:this.invVentasTO.conPeriodo+" | "+this.invVentasTO.conTipo+" | "+this.invVentasTO.conNumero,empresaSeleccionada:this.empresaSeleccionada,activar:!0,volverACargar:!0}):this.toastr.warning(c.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,c.a.TAG_AVISO)},e.prototype.cerrarContabilidadAcciones=function(e){this.activar=e.objetoEnviar?e.objetoEnviar.activar:this.activar,this.cambiarActivar(this.activar),this.objetoContableEnviar=e.objetoEnviar,this.mostrarAccionesContabilidad=e.mostrarContilidadAcciones},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e},e.prototype.cambiarEstadoActivar=function(e){this.activar=e,this.cambiarActivar(this.activar)},e.prototype.buscarCliente=function(e){var t=this,o=""!=this.invVentasTO.cliCodigo&&this.invVentasTO.cliCodigo===this.cliente.cliCodigo;if(this.utilService.validarKeyBuscar(e.keyCode)&&this.invVentasTO.cliCodigo&&!o){var a={empresa:c.a.KEY_EMPRESA_SELECT,busqueda:this.invVentasTO.cliCodigo,mostrarInactivo:!1};e.srcElement.blur(),e.preventDefault();var i=this.modalService.open(s.a,{size:"lg",backdrop:"static"});i.componentInstance.parametros=a,i.componentInstance.isModal=!0,i.result.then(function(e){e?(t.cliente=e,t.invVentasTO.cliCodigo=t.cliente.cliCodigo,t.isClienteValido=!0,t.diasCredito=t.cliente.cliDiasCredito,t.caja&&t.caja.permisoMotivoPermitido&&t.ventaFormularioService.focusedProducto(0,t.gridApi),t.ventaFormularioService.enfocarInput("cboMotivo")):t.deseaAgregarCliente()},function(e){e||t.deseaAgregarCliente()})}},e.prototype.deseaAgregarCliente=function(){var e=this,t={title:c.a.VENTA,texto:c.a.MSJ_PREGUNTA_INSERTAR_CLIENTE,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t?e.mostrarFormularioCliente():e.ventaFormularioService.enfocarInput("codCliente")})},e.prototype.mostrarFormularioCliente=function(){this.mostrarAccionesCliente=!0,this.parametros.cliente=new d.a,this.parametros.accion=c.a.ACCION_NUEVO;var e=Number(this.invVentasTO.cliCodigo);e?this.parametros.cliente.cliCodigo=e:this.parametros.cliente.cliRazonSocial=this.invVentasTO.cliCodigo},e.prototype.validarCliente=function(){this.isClienteValido=!1,this.invVentasTO.cliCodigo!==this.cliente.cliCodigo&&(this.invVentasTO.cliCodigo=null,this.cliente=new at.a),this.invVentasTO.cliCodigo&&this.cliente&&this.invVentasTO.cliCodigo===this.cliente.cliCodigo&&(this.isClienteValido=!0)},e.prototype.ejecutarAccionCliente=function(e){switch(e.accion){case c.a.ACCION_REGISTRO_EXITOSO:this.cliente=e.cliente,this.invVentasTO.cliCodigo=e.cliente.cliCodigo,this.diasCredito=this.cliente.cliDiasCredito,this.ventaFormularioService.focusedProducto(0,this.gridApi),this.isClienteValido=!0,this.mostrarAccionesCliente=!1;break;case c.a.ACCION_REGISTRO_NO_EXITOSO:this.mostrarAccionesCliente=!1,this.ventaFormularioService.enfocarInput("codCliente")}},e.prototype.buscarProducto=function(e){var t=e.event.keyCode,o=e.event.target.value,a=e.data.proCodigoPrincipal;if(this.utilService.validarKeyBuscar(t))if(e.data.proCodigoPrincipal=o,o===a&&o&&a)c.a.KEYCODE_TAB,this.ventaFormularioService.productoFocusAndEditingCell(e.node.rowIndex,this.gridApi);else if(o=o?o.toUpperCase():null){var i={empresa:this.empresaSeleccionada.empCodigo,busqueda:o,categoria:null,bodega:this.bodegaSeleccionada?this.bodegaSeleccionada.bodCodigo:null,incluirInactivos:!1,limite:!1};this.abrirModalProducto(i,e)}else c.a.KEYCODE_TAB,this.ventaFormularioService.productoFocusAndEditingCell(e.node.rowIndex,this.gridApi)},e.prototype.abrirModalProducto=function(e,t){var o=this;if(this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_EDITAR||this.accion===c.a.ACCION_MAYORIZAR){var a=this.modalService.open(r.a,{size:"lg",backdrop:"static",windowClass:"miSize"});a.componentInstance.parametrosBusqueda=e,a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){if(e){var a=new ke.a(e);t.event.target.value=a.proCodigoPrincipal,t.data.estadoProducto=!0,t.data.proCodigoPrincipal=a.proCodigoPrincipal,t.data.proEmpresa=o.empresaSeleccionada.empCodigo,t.data.proNombre=a.proNombre,t.data.proMedida=a.detalleMedida,t.data.proEstadoIva=a.proGravaIva,t.data.proCodigoPrincipalCopia=a.proCodigoPrincipal,o.gridApi.getRowNode(t.node.rowIndex).setData(t.data),o.establecerValoresDeProducto(t.data),o.ventaFormularioService.cantidadFocusAndEditingCell(t.node.rowIndex,o.gridApi)}else o.ventaFormularioService.productoFocusAndEditingCell(t.node.rowIndex,o.gridApi)},function(){t.data.proCodigoPrincipal="",o.validarProducto(t.data),o.gridApi.setFocusedCell(t.node.rowIndex,"proNombre"),o.ventaFormularioService.productoFocusAndEditingCell(t.node.rowIndex,o.gridApi)})}},e.prototype.validarProducto=function(e){return e.proCodigoPrincipal===e.proCodigoPrincipalCopia||(this.resetearProducto(e),!1)},e.prototype.resetearProducto=function(e){e.proCodigoPrincipalCopia=null,e.proCodigoPrincipal=null,e.proNombre=null,e.proMedida=null,e.estadoProducto=!1,this.refreshGrid()},e.prototype.establecerValoresDeProducto=function(e){var t=this,o=this.ventaService.obtenerCampoDesdeReferencia(this.etiquetaSeleccionada),a={empresa:c.a.KEY_EMPRESA_SELECT,codigoProducto:e.proCodigoPrincipal};this.api.post("todocompuWS/inventarioWebController/buscarInvProductoDAOTO",a,c.a.KEY_EMPRESA_SELECT).then(function(i){if(i&&i.extraInfo){e.detPrecio=t.utilService.convertirNDecimale(0,6);var r=new st(i.extraInfo);e.catPrecioFijo=r.catPrecioFijo,e.conversion=t.utilService.convertirNDecimale(r.proFactorCajaSacoBulto,6),"CANTIDAD"!==t.empresaSeleccionada.parametros[0].parEscogerPrecioPor&&o?(e.detPrecio=t.utilService.convertirNDecimale(r[o],6),e.estadoPrecio=e.detPrecio>0,t.calcularTotales(e)):(a.cliente=t.cliente.cliCodigo,a.cantidad=e.detCantidad,t.api.post("todocompuWS/inventarioWebController/getPrecioProductoPorCantidad",a,c.a.KEY_EMPRESA_SELECT).then(function(a){a&&a.extraInfo?e.detPrecio=t.utilService.convertirNDecimale(a.extraInfo,6):e.detPrecio=t.utilService.convertirNDecimale(r[o],6),e.estadoPrecio=e.detPrecio>0,t.calcularTotales(e)}).catch(function(e){return t.utilService.handleError(e,t)}))}else t.toastr.warning(i.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})},e.prototype.validarAntesDeEnviar=function(e){var t=!0,o=this.utilService.establecerFormularioTocado(e),a=this.validarDetalle(),i=this.ventaService.validarInformacionAdicional(this.informacionAdicional),r=this.getRowData();return o&&e&&e.valid&&a&&i&&this.documentoValido&&!this.documentoCaducado&&this.validarCamposObligatorios()?0===r.length&&(this.toastr.error(c.a.MSJ_INGRESE_DATOS_DETALLE,c.a.MSJ_TITULO_INVALIDOS),t=!1):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),t=!1),t},e.prototype.validarDetalle=function(){var e=this,t=!0;return this.gridApi&&this.gridApi.forEachNode(function(o){!(e.ventaService.validarCantidad(o.data)&&e.ventaService.validarProducto(o.data)&&e.ventaService.validarPrecio(o.data))&&(t=!1)}),t},e.prototype.getRowData=function(){var e=[];return this.gridApi&&this.gridApi.forEachNode(function(t){e.push(t.data)}),e},e.prototype.guardarVenta=function(e,t){this.invVentasTO.vtaPendiente=t,this.validarAntesDeEnviar(e)&&this.accionAdicional(null,"cambio")},e.prototype.anularVenta=function(){var e=this,t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ANULAR_VENTA,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ANULAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0,e.invVentasTO=e.ventaFormularioService.formatearVenta(e.invVentasTO,e),e.invVentasTO.vtaAnulado=!0;var o=e.ventaFormularioService.formatearVentaDetalle(e.listaInvVentasDetalleTO,e.invVentasTO,e.bodegaSeleccionada),a=new Nt;a.anuComentario="VENTA ANULADA DESDE LA APLICACION WEB",a.invVentas=null;var i={invVentasTO:new tt(e.invVentasTO),listaInvVentasDetalleTO:o,anxVentasTO:e.anxVentasTO,invVentasMotivoAnulacion:a};e.ventaService.modificarVenta(i,e,c.a.KEY_EMPRESA_SELECT)}else e.cargando=!1})},e.prototype.restaurarVenta=function(){if(this.ventaService.verificarPermiso(c.a.ACCION_RESTAURAR,this.empresaSeleccionada))if(!this.anxVentasTO||this.anxVentasTO.venBase0===this.invVentasTO.vtaBase0&&this.anxVentasTO.venBaseImponible===this.invVentasTO.vtaBaseImponible){this.cargando=!0,this.invVentasTO=this.ventaFormularioService.formatearVenta(this.invVentasTO,this);var e=this.ventaFormularioService.formatearVentaDetalle(this.listaInvVentasDetalleTO,this.invVentasTO,this.bodegaSeleccionada),t={invVentasTO:new tt(this.invVentasTO),listaInvVentasDetalleTO:e,anxVentasTO:this.anxVentasTO,tipoDocumentoComplemento:this.tipoDocumentoComplemento,numeroDocumentoComplemento:this.numeroDocumentoComplemento,quitarAnulado:!0};this.ventaService.modificarVenta(t,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.warning(c.a.MSJ_NO_RESTAURO_VENTA_POR_RETENCION_CAMBIADA,c.a.TAG_AVISO);else this.toastr.warning(c.a.ERROR_403_TEXTO,c.a.TAG_AVISO)},e.prototype.consultarVenta=function(e,t,o){var a={empresa:c.a.KEY_EMPRESA_SELECT,numeroDocumento:e,vtaNumero:o,tipoDocumento:this.accion===c.a.ACCION_CREAR?this.tipoDocumentoComplemento:t};this.cargando=!0,this.ventaService.consultarVenta(a,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeConsultarVenta=function(e){var t=this;if(this.diasCredito=e.diasCredito,this.invVentasTO=e.ventasTO,this.anxVentasTO=e.anxVentasTO,this.listaInvVentasDetalleTO=e.listaInvVentasDetalleTO,this.cliente=new at.a(e.cliente),this.bodegaSeleccionada=this.listadoBodegas.find(function(e){return e.bodCodigo==t.invVentasTO.bodCodigo}),this.bodegaSeleccionada=this.bodegaSeleccionada?this.bodegaSeleccionada:new rt.a,"00"!==this.tipoDocumentoComplemento||this.numeroDocumentoComplemento||(this.tipoDocumentoComplemento=this.esNota&&e.invVentasComplemento?e.invVentasComplemento.comDocumentoTipo:"",this.numeroDocumentoComplemento=this.esNota&&e.invVentasComplemento?e.invVentasComplemento.comDocumentoNumero:"",this.motivoComplemento=this.esNota&&e.invVentasComplemento?e.invVentasComplemento.comDocumentoMotivo:""),this.formaCobroSeleccionada=this.listadoFormaCobro.find(function(e){return e.fcSecuencial==t.invVentasTO.fcSecuencial}),this.formaCobroSeleccionada=this.formaCobroSeleccionada?this.formaCobroSeleccionada:new nt.a,this.etiquetaSeleccionada=this.invVentasTO.vtaListaDePrecios,this.fechaEmision="string"==typeof this.invVentasTO.vtaFecha?this.utilService.fomatearFechaString(this.invVentasTO.vtaFecha,"YYYY-MM-DD"):new Date(this.invVentasTO.vtaFecha),this.listaInvVentasDetalleTO&&this.listaInvVentasDetalleTO.length>0)for(var o=0;o<this.listaInvVentasDetalleTO.length;o++)this.listaInvVentasDetalleTO[o].estadoProducto=!0,this.listaInvVentasDetalleTO[o].proCodigoPrincipalCopia=this.listaInvVentasDetalleTO[o].proCodigoPrincipal,this.listaInvVentasDetalleTO[o]=this.ventaFormularioService.calcularValorItem(this.listaInvVentasDetalleTO[o],this.invVentasTO);this.listadoPeriodos=this.parametros&&this.parametros.listadoPeriodos?this.parametros.listadoPeriodos:this.listadoPeriodos,this.cargando=!1,this.accion===c.a.ACCION_MAYORIZAR&&(this.documentoValido=!0,this.documentoNumeroCopia=this.invVentasTO.vtaDocumentoNumero)},e.prototype.contabilizarVenta=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,periodo:this.invVentasTO.vtaPeriodo,motivo:this.invVentasTO.vtaMotivo,ventaNumero:this.invVentasTO.vtaNumero,codigoUsuario:this.auth.getCodigoUser()};this.ventaService.contabilizar(e,this)},e.prototype.despuesDeContabilizarVenta=function(e){var t=this,o={title:c.a.TOAST_CORRECTO,texto:e+"<br>"+c.a.MSJ_PREGUNTA_VER_CONTABLE,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_VER+"'></i>  "+c.a.ACCION_VER_CONTABLE,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.verContableVenta():t.cargando=!1})},e.prototype.despuesDeModificarVenta=function(e){this.accion===c.a.ACCION_RESTAURAR&&(this.invVentasTO.vtaAnulado=!1),this.cargando=!1;var t={accion:c.a.ACCION_CREADO,vtaResultante:this.ventaFormularioService.construirObjetoParaPonerloEnLaLista(this.invVentasTO,this.cliente),empresa:this.empresaSeleccionada};this.enviarAccion.emit(t),this.utilService.generarSwal(c.a.VENTA,c.a.SWAL_SUCCESS,e.operacionMensaje)},e.prototype.imprimirVenta=function(){var e=this;this.cargando=!0;var t=this.ventaFormularioService.formatearVentaDetalle(this.listaInvVentasDetalleTO,this.invVentasTO,this.bodegaSeleccionada),o={invVentasTO:new tt(this.invVentasTO),listaInvVentasDetalleTO:t,isComprobanteElectronica:!1,nombreReporte:"reportComprobanteVenta"};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteVentaDetalleImpresion",o,this.empresaSeleccionada).then(function(t){t&&t._body&&t._body.byteLength>0?e.utilService.descargarArchivoPDF("venta"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.ventaService.generarColumnasDetalle(this),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={popOverInformacion:gt.a,inputLabelCell:ft.a,inputNumeric:bt.a,labelNumeric:Ot.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.gridApi.sizeColumnsToFit(),this.ventaFormularioService.calcularValoresVenta(this.invVentasTO,this.listaInvVentasDetalleTO,this.gridApi)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null,i=a?a.getColDef():null;i&&i.editable&&this.gridApi&&a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}),this.detalleSeleccionado=t?t.data:null},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.puedeEditar&&(this.detalleSeleccionado=e,this.generarOpciones(this.detalleSeleccionado),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.alCambiarValorDeCelda=function(e){this.accion!==c.a.ACCION_CREAR&&this.accion!==c.a.ACCION_MAYORIZAR||("proCodigoPrincipal"===e.colDef.field&&this.validarProducto(e.data),"detCantidad"===e.colDef.field&&this.calcularTotales(e.data),"detPrecio"===e.colDef.field&&this.calcularTotales(e.data))},yt([Object(i.Input)(),Dt("design:type",Object)],e.prototype,"parametros",void 0),yt([Object(i.Output)(),Dt("design:type",Object)],e.prototype,"enviarAccion",void 0),yt([Object(i.Input)(),Dt("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),yt([Object(i.Input)(),Dt("design:type",String)],e.prototype,"tipoDocumento",void 0),yt([Object(i.ViewChild)("menuOpciones"),Dt("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),yt([Object(i.HostListener)("window:beforeunload",["$event"]),Dt("design:type",Function),Dt("design:paramtypes",[Event]),Dt("design:returntype",void 0)],e.prototype,"unloadHandler",null),yt([Object(i.HostListener)("window:resize",["$event"]),Dt("design:type",Function),Dt("design:paramtypes",[]),Dt("design:returntype",void 0)],e.prototype,"onResize",null),e=yt([Object(i.Component)({selector:"app-venta-formulario",template:o("99Zv")}),Dt("design:paramtypes",[K.a,T.b,h.a,Te.a,u.b,L.a,it.a,p.a,le.a,ht])],e)}(),Mt=o("uuNs"),xt=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ft=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},wt=function(){function e(e,t,o,a,r,n,s){this.activeModal=e,this.ventaService=t,this.filasService=o,this.utilService=a,this.toastr=r,this.auth=n,this.ventaListadoService=s,this.parametrosBusqueda=null,this.enviarActivar=new i.EventEmitter,this.enviarAccion=new i.EventEmitter,this.listadoVentas=[],this.columnasSeleccionadas=[],this.constantes=c.a,this.veces=0,this.activar=!1,this.cargando=!1,this.filasTiempo=new D.a,this.objetoContableEnviar={},this.mostrarAccionesContabilidad=!1,this.titulo="",this.columnDefs=[],this.columnDefsSelected=[]}return e.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),this.ventaListadoService.definirAtajosDeTeclado(),this.iniciarAgGrid()},e.prototype.buscarVentas=function(){this.cargando=!0,this.listadoVentas=new Array,this.ventaService.listarVentas(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarVenta=function(e){this.listadoVentas=e,this.cargando=!1},e.prototype.generarOpciones=function(){var e=this,t=this.ventaService.verificarPermiso(c.a.ACCION_DESMAYORIZAR,this.empresaSeleccionada)&&(!this.objetoSeleccionado.vtaStatus||" "===this.objetoSeleccionado.vtaStatus),o=this.ventaService.verificarPermiso(c.a.ACCION_MAYORIZAR,this.empresaSeleccionada)&&this.objetoSeleccionado.vtaStatus===c.a.ETIQUETA_PENDIENTE,a=this.ventaService.verificarPermiso(c.a.ACCION_ANULAR,this.empresaSeleccionada)&&this.objetoSeleccionado.vtaStatus!==c.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.vtaStatus!==c.a.ETIQUETA_ANULADO,i=this.ventaService.verificarPermiso(c.a.ACCION_RESTAURAR,this.empresaSeleccionada)&&this.objetoSeleccionado.vtaStatus===c.a.ETIQUETA_ANULADO,r=!(this.objetoSeleccionado.conNumero||this.objetoSeleccionado.vtaStatus&&" "!==this.objetoSeleccionado.vtaStatus),n=this.objetoSeleccionado.conNumero;this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.emitirAccion(c.a.ACCION_CONSULTAR,e.objetoSeleccionado)}},{label:c.a.ACCION_DESMAYORIZAR,icon:c.a.ICON_DESMAYORIZAR,disabled:!t,command:function(){return t?e.desmayorizar():null}},{label:c.a.ACCION_MAYORIZAR,icon:c.a.ICON_MAYORIZAR,disabled:!o,command:function(){return o?e.emitirAccion(c.a.ACCION_MAYORIZAR,e.objetoSeleccionado):null}},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!a,command:function(){return a?e.emitirAccion(c.a.ACCION_ANULAR,e.objetoSeleccionado):null}},{label:c.a.ACCION_RESTAURAR,icon:c.a.ICON_RESTAURAR,disabled:!i,command:function(){return i?e.emitirAccion(c.a.ACCION_RESTAURAR,e.objetoSeleccionado):null}},{label:c.a.ACCION_CONTABILIZAR,icon:c.a.ICON_CALCULADORA,disabled:!r,command:function(){return r?e.contabilizarVenta():null}},{label:c.a.ACCION_VER_CONTABLE,icon:c.a.ICON_CALCULADORA,disabled:!n,command:function(){return n?e.verContableVenta():null}}]},e.prototype.consultarVenta=function(){this.emitirAccion(c.a.ACCION_CONSULTAR,this.objetoSeleccionado)},e.prototype.emitirAccion=function(e,t){var o={accion:e,objetoSeleccionado:t,listadoPeriodos:this.parametrosBusqueda&&this.parametrosBusqueda.listaPeriodos?this.parametrosBusqueda.listaPeriodos:[]};this.enviarAccion.emit(o)},e.prototype.desmayorizar=function(){if(this.ventaService.verificarPermiso(c.a.ACCION_DESMAYORIZAR,this.empresaSeleccionada)){var e={empresa:c.a.KEY_EMPRESA_SELECT,numeroDocumento:this.objetoSeleccionado.vtaDocumentoNumero,tipoDocumento:this.objetoSeleccionado.vtaDocumentoTipo};this.cargando=!0,this.ventaService.desmayorizarVenta(e,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.warning(c.a.ERROR_403_TEXTO,c.a.TAG_AVISO),this.cargando=!1},e.prototype.despuesDeDesmayorizarVenta=function(e){var t=this;this.objetoSeleccionado.vtaStatus="PENDIENTE";var o={title:c.a.TOAST_CORRECTO,texto:e.operacionMensaje+"<br>"+c.a.MSJ_PREGUNTA_MAYORIZAR,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_MAYORIZAR+"'></i>  "+c.a.ACCION_MAYORIZAR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?(t.cargando=!1,t.actualizarTabla(t.objetoSeleccionado),t.emitirAccion(c.a.ACCION_MAYORIZAR,t.objetoSeleccionado)):(t.actualizarTabla(t.objetoSeleccionado),t.cargando=!1)})},e.prototype.contabilizarVenta=function(){this.cargando=!0;var e=this.objetoSeleccionado.vtaNumero?this.objetoSeleccionado.vtaNumero.split("|"):new Array;if(e&&3===e.length){var t={empresa:c.a.KEY_EMPRESA_SELECT,periodo:e[0],motivo:e[1],ventaNumero:e[2],codigoUsuario:this.auth.getCodigoUser()};this.ventaService.contabilizar(t,this)}else this.toastr.warning(c.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,c.a.TAG_AVISO),this.cargando=!1},e.prototype.despuesDeContabilizarVenta=function(e){var t=this,o={title:c.a.TOAST_CORRECTO,texto:e+"<br>"+c.a.MSJ_PREGUNTA_VER_CONTABLE,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_VER+"'></i>  "+c.a.ACCION_VER_CONTABLE,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?(t.construirObjetoPK(),t.verContableVenta()):t.cargando=!1})},e.prototype.construirObjetoPK=function(){var e=this.objetoSeleccionado.vtaNumero?this.objetoSeleccionado.vtaNumero.split("|"):new Array,t=e[0],o=e[2];this.objetoSeleccionado.conNumero=t+"|C-VEN|"+o},e.prototype.verContableVenta=function(){this.objetoSeleccionado.conNumero?(this.mostrarAccionesContabilidad=!0,this.cargando=!0,this.objetoContableEnviar={accion:c.a.ACCION_CONSULTAR,contable:this.objetoSeleccionado.conNumero,empresaSeleccionada:this.empresaSeleccionada,activar:!0,tipoContable:null,listaPeriodos:[],volverACargar:!0}):(this.toastr.warning(c.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,c.a.TAG_AVISO),this.cargando=!1)},e.prototype.cerrarContabilidadAcciones=function(e){this.activar=e.objetoEnviar?e.objetoEnviar.activar:this.activar,this.cambiarActivar(this.activar),this.objetoContableEnviar=e.objetoEnviar,this.mostrarAccionesContabilidad=e.mostrarContilidadAcciones},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e},e.prototype.cambiarEstadoActivar=function(e){this.activar=e,this.cambiarActivar(this.activar)},e.prototype.ngOnChanges=function(e){e.parametrosBusqueda&&(e.parametrosBusqueda.currentValue&&e.parametrosBusqueda.currentValue.listar?(this.titulo=this.parametrosBusqueda.titulo,this.buscarVentas()):e.parametrosBusqueda.currentValue&&e.parametrosBusqueda.currentValue.vtaResultante?this.actualizarTabla(e.parametrosBusqueda.currentValue.vtaResultante):this.listadoVentas=new Array)},e.prototype.actualizarTabla=function(e){var t=e,o=this.listadoVentas.findIndex(function(e){return e.vtaDocumentoNumero==t.vtaDocumentoNumero});if(o>=0){if(t.id=o,this.listadoVentas[o]=t,this.gridApi)this.gridApi.getRowNode(""+o).setData(t)}else{var a=this.listadoVentas.slice();a.unshift(t),this.listadoVentas=a}this.refreshGrid()},e.prototype.seleccionarBodega=function(e,t){return e.find(function(e){return e.bodCodigo==t.permisoBodegaPermitida})},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarActivar.emit(e)},e.prototype.imprimirVentas=function(){this.ventaService.verificarPermiso(c.a.ACCION_IMPRIMIR,this.empresaSeleccionada,!0)&&this.ventaListadoService.imprimirVentas(this)},e.prototype.exportarVentas=function(){this.ventaService.verificarPermiso(c.a.ACCION_EXPORTAR,this.empresaSeleccionada,!0)&&this.ventaListadoService.exportarVentas(this)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.ventaListadoService.generarColumnasConsulta(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},xt([Object(i.Input)(),Ft("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),xt([Object(i.Input)(),Ft("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),xt([Object(i.Output)(),Ft("design:type",Object)],e.prototype,"enviarActivar",void 0),xt([Object(i.Output)(),Ft("design:type",Object)],e.prototype,"enviarAccion",void 0),xt([Object(i.ViewChild)("menuOpciones"),Ft("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),e=xt([Object(i.Component)({selector:"app-venta-listado",template:o("586F")}),Ft("design:paramtypes",[T.a,Te.a,L.a,h.a,u.b,K.a,Mt.a])],e)}(),Gt=function(){function e(e){this.id=0,this.kTransaccion="",this.kFecha="",this.kEntradasCantidad=0,this.kEntradasCosto=0,this.kSalidasCantidad=0,this.kSalidasCosto=0,this.kSaldosCantidad=0,this.kSaldosCosto=0,this.kCostoActual=0,this.kSectorPiscina="",this.kNumeroSistema="",this.kDocumentoNumero="",this.kProveedor="",this.kObservaciones="",this.kStatus="",this.kBodega="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.kTransaccion=e.kTransaccion?e.kTransaccion:this.kTransaccion,this.kFecha=e.kFecha?e.kFecha:this.kFecha,this.kEntradasCantidad=e.kEntradasCantidad?e.kEntradasCantidad:this.kEntradasCantidad,this.kEntradasCosto=e.kEntradasCosto?e.kEntradasCosto:this.kEntradasCosto,this.kSalidasCantidad=e.kSalidasCantidad?e.kSalidasCantidad:this.kSalidasCantidad,this.kSalidasCosto=e.kSalidasCosto?e.kSalidasCosto:this.kSalidasCosto,this.kSaldosCantidad=e.kSaldosCantidad?e.kSaldosCantidad:this.kSaldosCantidad,this.kSaldosCosto=e.kSaldosCosto?e.kSaldosCosto:this.kSaldosCosto,this.kCostoActual=e.kCostoActual?e.kCostoActual:this.kCostoActual,this.kSectorPiscina=e.kSectorPiscina?e.kSectorPiscina:this.kSectorPiscina,this.kNumeroSistema=e.kNumeroSistema?e.kNumeroSistema:this.kNumeroSistema,this.kDocumentoNumero=e.kDocumentoNumero?e.kDocumentoNumero:this.kDocumentoNumero,this.kProveedor=e.kProveedor?e.kProveedor:this.kProveedor,this.kObservaciones=e.kObservaciones?e.kObservaciones:this.kObservaciones,this.kStatus=e.kStatus?e.kStatus:this.kStatus,this.kBodega=e.kBodega?e.kBodega:this.kBodega},e}(),jt=o("G/9+"),Ut=o("wd/R"),Bt=o("RDZc"),Vt=o("L5HG"),kt=o("qFWa"),Wt=o("VpYo"),zt=o("aoE9"),Jt=o("eeDj"),Kt=o("BV+X"),Yt=function(){function e(e){this.recep_secuencial=null,this.recepFecha="",this.compEmpresa="",this.compPeriodo="",this.compMotivo="",this.compNumero="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.recep_secuencial=e.recep_secuencial?e.recep_secuencial:this.recep_secuencial,this.recepFecha=e.recepFecha?e.recepFecha:this.recepFecha,this.compEmpresa=e.compEmpresa?e.compEmpresa:this.compEmpresa,this.compPeriodo=e.compPeriodo?e.compPeriodo:this.compPeriodo,this.compMotivo=e.compMotivo?e.compMotivo:this.compMotivo,this.compNumero=e.compNumero?e.compNumero:this.compNumero,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),qt=o("LlOB"),Ht=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Xt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Zt=function(){function e(e,t,o,a,i,r,n){this.kardexService=e,this.activeModal=t,this.utilService=o,this.toastr=a,this.atajoService=i,this.auth=r,this.sistemaService=n,this.cargando=!0,this.constantes=c.a,this.es={},this.esModal=!1,this.datosCambiarFecha=new Yt,this.fecha=null,this.fechaActual=new Date,this.fechaValida=!0,this.datosCambiarFecha=new Yt,this.constantes=c.a,Ut.locale("es"),this.es=this.utilService.setLocaleDate()}return e.prototype.ngOnInit=function(){this.parametros&&(this.esModal=!0,this.cargando=!0,this.obtenerDatosFechaRecepcion(),this.iniciarAtajos(),this.extraerValoresIniciales())},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmCambiarFecha?e.frmCambiarFecha.value:null)),e.datosCambiarFechaR=JSON.parse(JSON.stringify(e.datosCambiarFecha?e.datosCambiarFecha:null))},50)},e.prototype.iniciarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_ESC,function(){return e.cerrarModal(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardar");return t&&t.click(),!1}))},e.prototype.obtenerFechaActual=function(){this.sistemaService.obtenerFechaServidor(this,this.empresaSeleccionada)},e.prototype.despuesDeObtenerFechaServidor=function(e){this.fechaActual=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e)},e.prototype.obtenerDatosFechaRecepcion=function(){this.kardexService.cambiarFechaRecepcion(this.parametros,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeCambiarFechaRecepcion=function(e){e?(this.datosCambiarFecha=new Yt(e),this.fecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.datosCambiarFecha.recepFecha)):this.setearNuevosValores(this.datosCambiarFecha),this.esModal=!0,this.cargando=!1},e.prototype.insertar=function(e){if(this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)){this.cargando=!0;var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t){this.setearValores(this.datosCambiarFecha);var o={invComprasRecepcionTO:this.datosCambiarFecha};this.kardexService.insertarCambioFechaRecepcion(o,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.despuesDeInsertarCambioFechaRecepcion=function(e){this.cargando=!1,this.toastr.success(e.operacionMensaje,"Aviso"),this.fechaValida=!0,this.cerrarModal()},e.prototype.setearValores=function(e){e.compEmpresa=c.a.KEY_EMPRESA_SELECT,e.compMotivo=this.datosCambiarFecha.compMotivo,e.compNumero=this.datosCambiarFecha.compNumero,e.compPeriodo=this.datosCambiarFecha.compPeriodo,e.recepFecha=this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fecha),e.usrCodigo=this.auth.getCodigoUser()},e.prototype.setearNuevosValores=function(e){e.compEmpresa=c.a.KEY_EMPRESA_SELECT,e.compMotivo=this.parametros.motivo,e.compNumero=this.parametros.numero,e.compPeriodo=this.parametros.periodo},e.prototype.cerrarModal=function(){this.utilService.puedoCancelar(this.valoresIniciales,this.frmCambiarFecha)?this.activeModal.close():this.activeModal.close({esFechaValido:this.fechaValida,datosCambiarFecha:this.datosCambiarFecha})},Ht([Object(i.Input)(),Xt("design:type",Object)],e.prototype,"empresaSeleccionada",void 0),Ht([Object(i.Input)(),Xt("design:type",Object)],e.prototype,"parametros",void 0),Ht([Object(i.ViewChild)("frmCambiarFecha"),Xt("design:type",I.NgForm)],e.prototype,"frmCambiarFecha",void 0),e=Ht([Object(i.Component)({selector:"app-cambiar-fecha-recepcion",template:o("wK6v"),styles:[o("8Zyk")]}),Xt("design:paramtypes",[jt.a,T.a,h.a,u.b,S.HotkeysService,K.a,qt.a])],e)}(),$t=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Qt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},eo=function(){function e(e,t,o,a,r,n,s,d,p,u,h,m,C){this.kardexService=e,this.utilService=t,this.filasService=o,this.atajoService=a,this.activeModal=r,this.bodegaService=n,this.toastr=s,this.ventaService=d,this.consumoService=p,this.archivoService=u,this.transferenciasService=h,this.comprasService=m,this.modalService=C,this.isModal=!1,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.empresaSeleccionada=new l.a,this.enviarMostrarBtnRegresarFormulario=new i.EventEmitter,this.mostrandoFormulario=new i.EventEmitter,this.fechaDesde=new Date,this.fechaHasta=new Date,this.activar=!1,this.esKardex=!0,this.cargando=!1,this.listaEmpresas=Array(),this.listadoResultado=new Array,this.objetoSeleccionado=new Gt,this.isScreamMd=!0,this.filasTiempo=new D.a,this.fechaActual=new Date,this.listaBodegas=new Array,this.es={},this.estilos={},this.enviarAccion=new i.EventEmitter,this.vistaFormulario=!1,this.tipoDocumento=null,this.listaConsumoMotivo=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.rowClassRules={},Ut.locale("es"),this.constantes=c.a,this.es=this.utilService.setLocaleDate()}return e.prototype.ngOnChanges=function(e){e.parametrosBusqueda&&this.parametrosBusqueda&&(this.listaConsumoMotivo=this.parametrosBusqueda.listaConsumoMotivo,this.iniciarBusqueda()),e.parametrosBusqueda&&null===this.parametrosBusqueda&&this.limpiarResultado()},e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),this.iniciarAtajos(),this.isModal&&this.parametrosBusqueda&&(this.fechaDesde=new Date(this.parametrosBusqueda.desde),this.listarBodegas(),this.iniciarBusqueda());var e=this.isModal?"313px":"203px";this.estilos={width:"100%",height:"calc(100vh - "+e+")"}},e.prototype.iniciarAtajos=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirKardex");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarKardex");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarKardex");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarKardex");return e&&e.click(),!1}))},e.prototype.iniciarBusqueda=function(){this.activar=!1,this.cargando=!1,this.buscarKardex()},e.prototype.listarBodegas=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,inactivo:!1};this.isModal&&(e.empresa=this.parametrosBusqueda.empresa),this.bodegaService.listarInvListaBodegasTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvListaBodegasTO=function(e){this.listaBodegas=e||new Array,this.cargando=!1},e.prototype.limpiarResultado=function(){this.gridApi=null,this.vistaFormulario=!1,this.gridColumnApi=null,this.listadoResultado=[],this.objetoSeleccionado=new Gt,this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.cerrarKardex=function(){this.enviarCancelar.emit(!0)},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit(this.activar)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.kardexService.generarColumnasKardex(this.parametrosBusqueda.vista,this,this.isModal),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a,iconoEstado:Vt.a},this.components={},this.rowClassRules={"tr-negrita":function(e){var t=e.data.kTransaccion;return"SALDO INICIAL"===t||"Totales --\x3e"===t}}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.gridApi.sizeColumnsToFit()},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.generarOpciones=function(){this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!0},{label:c.a.ACCION_DESMAYORIZAR,icon:c.a.ICON_DESMAYORIZAR,disabled:!0},{label:c.a.ACCION_MAYORIZAR,icon:c.a.ICON_MAYORIZAR,disabled:!0},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!0},{label:c.a.ACCION_RESTAURAR,icon:c.a.ICON_RESTAURAR,disabled:!0}]},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,"VENTA"===this.objetoSeleccionado.kTransaccion?this.generarOpcionesVenta():"CONSUMO"===this.objetoSeleccionado.kTransaccion?this.generarOpcionesConsumo():("TRANS+"!==this.objetoSeleccionado.kTransaccion&&"TRANS-"!==this.objetoSeleccionado.kTransaccion||this.generarOpcionesTransferencia(),"COMPRA"===this.objetoSeleccionado.kTransaccion&&this.generarOpcionesCompras()),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.buscarKardex=function(){this.cargando=!0,this.limpiarResultado(),this.isModal&&(this.parametrosBusqueda.desde=this.utilService.formatearDateToStringDDMMYYYY(this.fechaDesde),this.parametrosBusqueda.hasta=this.utilService.formatearDateToStringDDMMYYYY(this.fechaHasta),this.parametrosBusqueda.bodega=this.parametrosBusqueda.bodega?this.parametrosBusqueda.bodega:null),this.filasTiempo.iniciarContador(),this.kardexService.getListaInvKardexTO(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGetListaInvKardexTO=function(e){this.filasTiempo.finalizarContador(),this.listadoResultado=e&&e.length>0?e:[],this.enviarMostrarBtnRegresarFormulario.emit(!(e&&e.length>0)),this.cargando=!1,this.iniciarAgGrid(),this.iniciarAtajos()},e.prototype.imprimirKardex=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listInvKardexTO:this.listadoResultado,fechaDesde:this.parametrosBusqueda.desde,fechaHasta:this.parametrosBusqueda.hasta,nombreProducto:this.datos.nombreProducto,banderaCosto:"kardexValorizado"===this.parametrosBusqueda.vista};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteInvKardex",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoKardex"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_NO_REPORTE_ERRORES),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarKardex=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listInvKardexTO:this.listadoResultado,fechaDesde:this.parametrosBusqueda.desde,fechaHasta:this.parametrosBusqueda.hasta,nombreProducto:this.datos.nombreProducto,banderaCosto:"kardexValorizado"===this.parametrosBusqueda.vista};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteInvKardex",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoKardex_"):e.toastr.warning(c.a.MSJ_NO_DATA),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.generarOpcionesVenta=function(){var e=this,t="VENTA"===this.objetoSeleccionado.kTransaccion,o="VENTA"===this.objetoSeleccionado.kTransaccion&&this.ventaService.verificarPermiso(c.a.ACCION_DESMAYORIZAR,this.empresaSeleccionada)&&(!this.objetoSeleccionado.kStatus||" "===this.objetoSeleccionado.kStatus),a="VENTA"===this.objetoSeleccionado.kTransaccion&&this.ventaService.verificarPermiso(c.a.ACCION_MAYORIZAR,this.empresaSeleccionada)&&this.objetoSeleccionado.kStatus===c.a.ETIQUETA_PENDIENTE,i="VENTA"===this.objetoSeleccionado.kTransaccion&&this.ventaService.verificarPermiso(c.a.ACCION_ANULAR,this.empresaSeleccionada)&&this.objetoSeleccionado.kStatus!==c.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.kStatus!==c.a.ETIQUETA_ANULADO,r="VENTA"===this.objetoSeleccionado.kTransaccion&&this.ventaService.verificarPermiso(c.a.ACCION_RESTAURAR,this.empresaSeleccionada)&&this.objetoSeleccionado.kStatus===c.a.ETIQUETA_ANULADO;this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.emitirAccion(c.a.ACCION_CONSULTAR):null}},{label:c.a.ACCION_DESMAYORIZAR,icon:c.a.ICON_DESMAYORIZAR,disabled:!o,command:function(){return o?e.desmayorizar():null}},{label:c.a.ACCION_MAYORIZAR,icon:c.a.ICON_MAYORIZAR,disabled:!a,command:function(){return a?e.emitirAccion(c.a.ACCION_MAYORIZAR):null}},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!i,command:function(){return i?e.emitirAccion(c.a.ACCION_ANULAR):null}},{label:c.a.ACCION_RESTAURAR,icon:c.a.ICON_RESTAURAR,disabled:!r,command:function(){return r?e.emitirAccion(c.a.ACCION_RESTAURAR):null}}]},e.prototype.ejecutarAccion=function(e){switch(e.accion){case c.a.ACCION_CANCELAR:this.cancelar();break;case c.a.ACCION_CREADO:this.parametrosBusqueda.incluirTodos=!0,this.buscarKardex(),this.cancelar()}},e.prototype.emitirAccion=function(e){var t=new dt.a;t.vtaStatus=this.objetoSeleccionado.kStatus,t.vtaDocumentoNumero=this.objetoSeleccionado.kDocumentoNumero.split("|")[1].trim(),t.vtaDocumentoTipo=this.objetoSeleccionado.kDocumentoNumero.split("|")[0].trim(),t.vtaNumero=this.objetoSeleccionado.kNumeroSistema,this.tipoDocumento=t.vtaDocumentoTipo,this.parametrosFormulario={accion:e,seleccionado:t,listadoPeriodos:this.parametrosBusqueda&&this.parametrosBusqueda.listaPeriodos?this.parametrosBusqueda.listaPeriodos:[]},this.vistaFormulario=!0,this.mostrandoFormulario.emit(!0)},e.prototype.desmayorizar=function(){var e=this,t={title:c.a.VENTA+" "+this.objetoSeleccionado.kNumeroSistema,texto:c.a.MSJ_PREGUNTA_DESMAYORIZAR,type:c.a.SWAL_QUESTION,confirmButtonText:"<i class='"+c.a.ICON_DESMAYORIZAR+"'></i>  "+c.a.ACCION_DESMAYORIZAR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){var o={empresa:c.a.KEY_EMPRESA_SELECT,numeroDocumento:e.objetoSeleccionado.kDocumentoNumero.split("|")[1].trim(),tipoDocumento:e.objetoSeleccionado.kDocumentoNumero.split("|")[0].trim()};e.cargando=!0,e.ventaService.desmayorizarVenta(o,e,c.a.KEY_EMPRESA_SELECT)}else e.cargando=!1})},e.prototype.despuesDeDesmayorizarVenta=function(e){var t=this;this.objetoSeleccionado.kStatus="PENDIENTE";var o=new dt.a;o.vtaStatus=this.objetoSeleccionado.kStatus,o.vtaDocumentoNumero=this.objetoSeleccionado.kDocumentoNumero.split("|")[1].trim(),o.vtaDocumentoTipo=this.objetoSeleccionado.kDocumentoNumero.split("|")[0].trim(),o.vtaObservaciones=this.objetoSeleccionado.kObservaciones,o.vtaFecha=this.objetoSeleccionado.kFecha;var a={title:c.a.TOAST_CORRECTO,texto:e.operacionMensaje+"<br>"+c.a.MSJ_PREGUNTA_MAYORIZAR,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_MAYORIZAR+"'></i>  "+c.a.ACCION_MAYORIZAR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(a).then(function(e){e?(t.cargando=!1,t.parametrosBusqueda.incluirTodos=!0,t.buscarKardex(),t.emitirAccion(c.a.ACCION_MAYORIZAR)):(t.parametrosBusqueda.incluirTodos=!0,t.buscarKardex(),t.cargando=!1)})},e.prototype.generarOpcionesConsumo=function(){var e=this,t="CONSUMO"===this.objetoSeleccionado.kTransaccion,o="CONSUMO"===this.objetoSeleccionado.kTransaccion&&this.consumoService.verificarPermiso(c.a.ACCION_DESMAYORIZAR,this.empresaSeleccionada)&&(!this.objetoSeleccionado.kStatus||" "===this.objetoSeleccionado.kStatus),a="CONSUMO"===this.objetoSeleccionado.kTransaccion&&this.consumoService.verificarPermiso(c.a.ACCION_MAYORIZAR,this.empresaSeleccionada)&&this.objetoSeleccionado.kStatus===c.a.ETIQUETA_PENDIENTE,i="CONSUMO"===this.objetoSeleccionado.kTransaccion&&this.consumoService.verificarPermiso(c.a.ACCION_ANULAR,this.empresaSeleccionada)&&this.objetoSeleccionado.kStatus!==c.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.kStatus!==c.a.ETIQUETA_ANULADO,r="CONSUMO"===this.objetoSeleccionado.kTransaccion&&this.consumoService.verificarPermiso(c.a.ACCION_RESTAURAR,this.empresaSeleccionada)&&this.objetoSeleccionado.kStatus===c.a.ETIQUETA_ANULADO;this.opciones=[{label:c.a.ACCION_CONSULTAR_CONSUMO,icon:c.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.emitirAccionConsumos(c.a.ACCION_CONSULTAR):null}},{label:c.a.ACCION_DESMAYORIZAR,icon:c.a.ICON_DESMAYORIZAR,disabled:!o,command:function(){return o?e.desmayorizarConsumo():null}},{label:c.a.ACCION_MAYORIZAR,icon:c.a.ICON_MAYORIZAR,disabled:!a,command:function(){return a?e.emitirAccionConsumos(c.a.ACCION_MAYORIZAR):null}},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!i,command:function(){return i?e.emitirAccionConsumos(c.a.ACCION_ANULAR):null}},{label:c.a.ACCION_RESTAURAR,icon:c.a.ICON_RESTAURAR,disabled:!r,command:function(){return r?e.emitirAccionConsumos(c.a.ACCION_RESTAURAR):null}}]},e.prototype.ejecutarAccionConsumos=function(e){switch(e.accion){case c.a.ACCION_CANCELAR:this.cancelar();break;case c.a.ACCION_CREADO:this.parametrosBusqueda.incluirTodos=!0,this.buscarKardex(),this.cancelar()}},e.prototype.emitirAccionConsumos=function(e){var t=new kt.a;t.consFecha=this.objetoSeleccionado.kFecha,t.consNumero=this.objetoSeleccionado.kNumeroSistema,t.consObservaciones=this.objetoSeleccionado.kObservaciones,t.consStatus=this.objetoSeleccionado.kStatus,this.parametrosFormularioConsumo={accion:e,seleccionado:t},this.vistaFormulario=!0,this.mostrandoFormulario.emit(!0)},e.prototype.desmayorizarConsumo=function(){var e=this.objetoSeleccionado.kNumeroSistema.split("|"),t=e[0].trim(),o=e[1].trim(),a=e[2].trim(),i={empresa:c.a.KEY_EMPRESA_SELECT,periodo:t,motivo:o,numero:a};this.cargando=!0,this.consumoService.desmayorizarConsumo(i,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeDesmayorizarConsumo=function(e){var t=this;this.objetoSeleccionado.kStatus="PENDIENTE";var o=new kt.a;o.consStatus=this.objetoSeleccionado.kStatus,o.consNumero=this.objetoSeleccionado.kDocumentoNumero,o.consObservaciones=this.objetoSeleccionado.kObservaciones,o.consFecha=this.objetoSeleccionado.kFecha;var a={title:c.a.TOAST_CORRECTO,texto:e.operacionMensaje+"<br>"+c.a.MSJ_PREGUNTA_MAYORIZAR,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_MAYORIZAR+"'></i>  "+c.a.ACCION_MAYORIZAR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(a).then(function(e){e?(t.cargando=!1,t.parametrosBusqueda.incluirTodos=!0,t.buscarKardex(),t.emitirAccionConsumos(c.a.ACCION_MAYORIZAR)):(t.parametrosBusqueda.incluirTodos=!0,t.buscarKardex(),t.cargando=!1)})},e.prototype.generarOpcionesTransferencia=function(){var e=this,t="TRANS+"===this.objetoSeleccionado.kTransaccion||"TRANS-"===this.objetoSeleccionado.kTransaccion,o=("TRANS+"===this.objetoSeleccionado.kTransaccion||"TRANS-"===this.objetoSeleccionado.kTransaccion)&&this.transferenciasService.verificarPermiso(c.a.ACCION_DESMAYORIZAR,this.empresaSeleccionada)&&(!this.objetoSeleccionado.kStatus||" "===this.objetoSeleccionado.kStatus),a=("TRANS+"===this.objetoSeleccionado.kTransaccion||"TRANS-"===this.objetoSeleccionado.kTransaccion)&&this.transferenciasService.verificarPermiso(c.a.ACCION_MAYORIZAR,this.empresaSeleccionada)&&this.objetoSeleccionado.kStatus===c.a.ETIQUETA_PENDIENTE,i=("TRANS+"===this.objetoSeleccionado.kTransaccion||"TRANS-"===this.objetoSeleccionado.kTransaccion)&&this.transferenciasService.verificarPermiso(c.a.ACCION_ANULAR,this.empresaSeleccionada)&&this.objetoSeleccionado.kStatus!==c.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.kStatus!==c.a.ETIQUETA_ANULADO,r=("TRANS+"===this.objetoSeleccionado.kTransaccion||"TRANS-"===this.objetoSeleccionado.kTransaccion)&&this.transferenciasService.verificarPermiso(c.a.ACCION_RESTAURAR,this.empresaSeleccionada)&&this.objetoSeleccionado.kStatus===c.a.ETIQUETA_ANULADO;this.opciones=[{label:c.a.ACCION_CONSULTAR_TRANSFERENCIA,icon:c.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.operacionTransferenciaListado(c.a.ACCION_CONSULTAR,t):null}},{label:c.a.ACCION_DESMAYORIZAR,icon:c.a.ICON_DESMAYORIZAR,disabled:!o,command:function(){return o?e.desmayorizarTransferencia():null}},{label:c.a.ACCION_MAYORIZAR,icon:c.a.ICON_MAYORIZAR,disabled:!a,command:function(){return a?e.operacionTransferenciaListado(c.a.ACCION_MAYORIZAR,a):null}},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!i,command:function(){return i?e.operacionTransferenciaListado(c.a.ACCION_ANULAR,i):null}},{label:c.a.ACCION_RESTAURAR,icon:c.a.ICON_RESTAURAR,disabled:!r,command:function(){return r?e.operacionTransferenciaListado(c.a.ACCION_RESTAURAR,r):null}}]},e.prototype.ejecutarAccionTransferencia=function(e){switch(e.accion){case c.a.ACCION_CANCELAR:this.cancelar();break;case c.a.ACCION_CREADO:case c.a.ACCION_MODIFICADO:case c.a.ACCION_DESMAYORIZAR:this.parametrosBusqueda.incluirTodos=!0,this.buscarKardex(),this.cancelar()}},e.prototype.operacionTransferenciaListado=function(e,t){t&&(this.vistaFormulario=!0,this.mostrandoFormulario.emit(!0),this.parametrosFormularioTransferencia={accion:e,transferencia:this.objetoSeleccionado.kNumeroSistema,empresaSeleccionada:this.empresaSeleccionada,activar:!0,volverACargar:!1})},e.prototype.desmayorizarTransferencia=function(){var e=this.objetoSeleccionado.kNumeroSistema.split("|"),t=e[0].trim(),o=e[1].trim(),a=e[2].trim(),i={empresa:c.a.KEY_EMPRESA_SELECT,periodo:t,motivo:o,numero:a};this.cargando=!0,this.transferenciasService.desmayorizarTransferencias(i,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeDesmayorizarTransferencia=function(e){var t=this;this.objetoSeleccionado.kStatus="PENDIENTE";var o={title:c.a.TOAST_CORRECTO,texto:e.extraInfo+"<br>"+c.a.MSJ_PREGUNTA_MAYORIZAR,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_MAYORIZAR+"'></i>  "+c.a.ACCION_MAYORIZAR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){if(e){t.cargando=!1;var o=t.transferenciasService.verificarPermiso(c.a.ACCION_MAYORIZAR,t.empresaSeleccionada)&&"PENDIENTE"===t.objetoSeleccionado.kStatus;t.parametrosBusqueda.incluirTodos=!0,t.buscarKardex(),t.operacionTransferenciaListado(c.a.ACCION_MAYORIZAR,o)}else t.parametrosBusqueda.incluirTodos=!0,t.buscarKardex(),t.cargando=!1})},e.prototype.generarOpcionesCompras=function(){var e=this,t="COMPRA"===this.objetoSeleccionado.kTransaccion,o="COMPRA"===this.objetoSeleccionado.kTransaccion&&this.comprasService.verificarPermiso(c.a.ACCION_DESMAYORIZAR,this,!0)&&(!this.objetoSeleccionado.kStatus||" "===this.objetoSeleccionado.kStatus),a="COMPRA"===this.objetoSeleccionado.kTransaccion&&this.comprasService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0)&&this.objetoSeleccionado.kStatus===c.a.ETIQUETA_PENDIENTE,i="COMPRA"===this.objetoSeleccionado.kTransaccion&&this.comprasService.verificarPermiso(c.a.ACCION_ANULAR,this,!0)&&this.objetoSeleccionado.kStatus!==c.a.ETIQUETA_PENDIENTE&&this.objetoSeleccionado.kStatus!==c.a.ETIQUETA_ANULADO,r="COMPRA"===this.objetoSeleccionado.kTransaccion&&this.comprasService.verificarPermiso(c.a.ACCION_RESTAURAR,this,!0)&&this.objetoSeleccionado.kStatus===c.a.ETIQUETA_ANULADO,n="COMPRA"===this.objetoSeleccionado.kTransaccion&&this.comprasService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&(!this.objetoSeleccionado.kStatus||" "===this.objetoSeleccionado.kStatus);this.opciones=[{label:c.a.ACCION_CONSULTAR_COMPRA,icon:c.a.ICON_CONSULTAR,disabled:!t,command:function(){return t?e.emitirAccionCompras(c.a.ACCION_CONSULTAR):null}},{label:c.a.ACCION_DESMAYORIZAR,icon:c.a.ICON_DESMAYORIZAR,disabled:!o,command:function(){return o?e.desmayorizarCompras():null}},{label:c.a.ACCION_MAYORIZAR,icon:c.a.ICON_MAYORIZAR,disabled:!a,command:function(){return a?e.emitirAccionCompras(c.a.ACCION_MAYORIZAR):null}},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!i,command:function(){return i?e.emitirAccionCompras(c.a.ACCION_ANULAR):null}},{label:c.a.ACCION_RESTAURAR,icon:c.a.ICON_RESTAURAR,disabled:!r,command:function(){return r?e.emitirAccionCompras(c.a.ACCION_RESTAURAR):null}},{label:c.a.ACCION_CAMBIAR_FECHA_RECEPCION,icon:c.a.ICON_EDITAR,disabled:!n,command:function(){return n?e.cambiarFechaRecepcion():null}}]},e.prototype.ejecutarAccionCompras=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.cambiarActivar();break;case c.a.ACCION_CANCELAR:this.cancelar()}},e.prototype.emitirAccionCompras=function(e){if(this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this,!0)){var t=this.objetoSeleccionado.kNumeroSistema.split("|"),o=t[0].split(" "),a=t[1].split(" "),i=t[2].split(" ");this.parametrosCompra={accion:e,parametroBusqueda:{empresa:this.empresaSeleccionada.empCodigo,periodo:o[0],motivo:a[1],numero:i[1]}},this.vistaFormulario=!0,this.mostrandoFormulario.emit(!0)}},e.prototype.desmayorizarCompras=function(){if(this.objetoSeleccionado.kNumeroSistema){this.cargando=!0;var e=this.objetoSeleccionado.kNumeroSistema.split("|"),t=e[0].split(" "),o=e[1].split(" "),a=e[2].split(" "),i=new Kt.a({compEmpresa:this.empresaSeleccionada.empCodigo,compPeriodo:t[0],compMotivo:o[1],compNumero:a[1]});this.comprasService.desmayorizarCompra({invComprasPK:i},this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeDesmayorizarCompra=function(e){var t=this;this.objetoSeleccionado.kStatus="PENDIENTE";var o={title:c.a.TOAST_CORRECTO,texto:e.operacionMensaje+"<br>"+c.a.MSJ_PREGUNTA_MAYORIZAR,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_MAYORIZAR+"'></i>  "+c.a.ACCION_MAYORIZAR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?(t.cargando=!1,t.parametrosBusqueda.incluirTodos=!0,t.emitirAccionCompras(c.a.ACCION_MAYORIZAR)):(t.parametrosBusqueda.incluirTodos=!0,t.buscarKardex(),t.cargando=!1)})},e.prototype.cambiarFechaRecepcion=function(){var e=this;if(this.objetoSeleccionado.kNumeroSistema){var t=this.objetoSeleccionado.kNumeroSistema.split("|"),o=t[0].split(" "),a=t[1].split(" "),i=t[2].split(" "),r={empresa:c.a.KEY_EMPRESA_SELECT,periodo:o[0],motivo:a[1],numero:i[1]},n=this.modalService.open(Zt,{size:"lg",backdrop:"static"});n.componentInstance.parametros=r,n.componentInstance.empresaSeleccionada=this.empresaSeleccionada,n.result.then(function(t){t&&t.esFechaValido&&(e.refrescarTabla(t.datosCambiarFecha),e.iniciarAtajos())},function(){e.iniciarAtajos()})}else this.toastr.warning(c.a.MSJ_INGRESE_DATOS_VALIDOS,c.a.TAG_AVISO)},e.prototype.refrescarTabla=function(e){var t=this.convertirComprasAKardex(e),o=this.listadoResultado.findIndex(function(e){return e.kNumeroSistema===t.kNumeroSistema}),a=this.listadoResultado.slice();a[o]=t,this.listadoResultado=a,this.objetoSeleccionado=this.listadoResultado[o]},e.prototype.convertirComprasAKardex=function(e){var t=new Gt;return t.id=this.objetoSeleccionado.id,t.kCostoActual=this.objetoSeleccionado.kCostoActual,t.kBodega=this.objetoSeleccionado.kBodega,t.kDocumentoNumero=this.objetoSeleccionado.kDocumentoNumero,t.kEntradasCantidad=this.objetoSeleccionado.kEntradasCantidad,t.kEntradasCosto=this.objetoSeleccionado.kEntradasCosto,t.kFecha=e.recepFecha,t.kNumeroSistema=e.compPeriodo+" | "+e.compMotivo+" | "+e.compNumero,t.kObservaciones=this.objetoSeleccionado.kObservaciones,t.kProveedor=this.objetoSeleccionado.kProveedor,t.kSaldosCantidad=this.objetoSeleccionado.kSaldosCantidad,t.kSaldosCosto=this.objetoSeleccionado.kSaldosCosto,t.kSalidasCantidad=this.objetoSeleccionado.kSalidasCantidad,t.kSalidasCosto=this.objetoSeleccionado.kSalidasCosto,t.kSectorPiscina=this.objetoSeleccionado.kSectorPiscina,t.kStatus=this.objetoSeleccionado.kStatus,t.kTransaccion=this.objetoSeleccionado.kTransaccion,t},e.prototype.consultar=function(){switch(this.objetoSeleccionado.kTransaccion){case"VENTA":this.emitirAccion(c.a.ACCION_CONSULTAR);break;case"CONSUMO":this.emitirAccionConsumos(c.a.ACCION_CONSULTAR);break;case"TRANS+":case"TRANS-":this.operacionTransferenciaListado(c.a.ACCION_CONSULTAR,!0);break;case"COMPRA":this.emitirAccionCompras(c.a.ACCION_CONSULTAR)}},e.prototype.cancelar=function(){this.iniciarAtajos(),this.vistaFormulario=!1,this.parametrosFormulario=null,this.parametrosFormularioConsumo=null,this.parametrosFormularioTransferencia=null,this.parametrosCompra=null,this.mostrandoFormulario.emit(!1)},$t([Object(i.Input)(),Qt("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),$t([Object(i.Input)(),Qt("design:type",Object)],e.prototype,"datos",void 0),$t([Object(i.Input)(),Qt("design:type",Boolean)],e.prototype,"isModal",void 0),$t([Object(i.Output)(),Qt("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),$t([Object(i.Output)(),Qt("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),$t([Object(i.Input)(),Qt("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),$t([Object(i.Output)(),Qt("design:type",i.EventEmitter)],e.prototype,"enviarMostrarBtnRegresarFormulario",void 0),$t([Object(i.Output)(),Qt("design:type",i.EventEmitter)],e.prototype,"mostrandoFormulario",void 0),$t([Object(i.ViewChild)("menuOpciones"),Qt("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),$t([Object(i.Output)(),Qt("design:type",Object)],e.prototype,"enviarAccion",void 0),e=$t([Object(i.Component)({selector:"app-kardex-listado",template:o("rC/9"),styles:[o("5O5m")]}),Qt("design:paramtypes",[jt.a,h.a,L.a,S.HotkeysService,T.a,Bt.a,u.b,Te.a,Wt.a,le.a,zt.a,Jt.a,T.b])],e)}(),to=o("c3nV"),oo=o("gKqU"),ao=o("kZx3"),io=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ro=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},no=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){e.columnDefs&&this.columnDefs,e.rowData&&this.rowData},io([Object(i.Input)("rowData"),ro("design:type",Array)],e.prototype,"rowData",void 0),io([Object(i.Input)("columnDefs"),ro("design:type",Array)],e.prototype,"columnDefs",void 0),io([Object(i.Input)("components"),ro("design:type",Object)],e.prototype,"components",void 0),io([Object(i.Input)("context"),ro("design:type",Object)],e.prototype,"context",void 0),io([Object(i.Input)("frameworkComponents"),ro("design:type",Object)],e.prototype,"frameworkComponents",void 0),e=io([Object(i.Component)({selector:"app-list-detail",template:o("o6Fk"),styles:[o("cotW")]}),ro("design:paramtypes",[])],e)}(),so=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},co=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},lo=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.authService=a}return e.prototype.listarCajCajaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/cajaWebController/getListadoCajCajaTO",e,o).then(function(e){e&&e.estadoOperacion===c.a.KEY_EXITO&&e.extraInfo?t.despuesDeGetListadoCajCajaTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarUsuariosResponsables=function(e,t,o){var a=this;this.api.post("todocompuWS/cajaWebController/getListaUsuariosDisponiblesCaja",e,o).then(function(e){e&&e.estadoOperacion===c.a.KEY_EXITO&&e.extraInfo?t.despuesDeListarUsuariosResponsables(e.extraInfo):(a.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.formatearCajCajaTO=function(e,t){var o=Object.assign({},e);if(t.accion===c.a.ACCION_CREAR){var a=this.authService.getCodigoUser();o.cajaEmpresa=t.empresaSeleccionada.empCodigo,o.cajaUsuarioResponsable=t.usuarioSeleccionado.usrCodigo,o.cajaUsuarioNombre=t.usuarioSeleccionado.usrNombre+" "+t.usuarioSeleccionado.usrApellido,o.usrEmpresa=a,o.usrCodigo=a}return o.permisoMotivoPermitido=t.motivoVentaSeleccionado?t.motivoVentaSeleccionado.vmCodigo:null,o.permisoDocumentoPermitido=t.tipoComprobanteSeleccionado?t.tipoComprobanteSeleccionado.tcCodigo:null,o.permisoBodegaPermitida=t.bodegaSeleccionada?t.bodegaSeleccionada.bodCodigo:null,o.permisoClientePrecioPermitido=t.precioVentaSeleccionada?t.precioVentaSeleccionada.value:null,o.permisoFormaPagoPermitida=t.formaCobroSeleccionado?t.formaCobroSeleccionado.ctaCodigo:null,o},e.prototype.generarColumnasCaja=function(){return[{headerName:c.a.TAG_CODIGO,field:"cajaUsuarioResponsable",width:150},{headerName:c.a.TAG_NOMBRE,field:"cajaUsuarioNombre",width:350},{headerName:c.a.TAG_SEC_FACTURAS,field:"permisoSecuencialFacturas",width:160,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_SECUENCIAL_FACTURAS,text:c.a.TAG_SEC_FACTURAS,enableSorting:!0}},{headerName:c.a.TAG_SEC_NOTAS_CREDITO,field:"permisoSecuencialNotasCredito",width:160,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_SECUENCIAL_NOTAS_CREDITO,text:c.a.TAG_SEC_NOTAS_CREDITO,enableSorting:!0}},{headerName:c.a.TAG_SEC_NOTAS_DEBITO,field:"permisoSecuencialNotasDebito",width:160,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_SECUENCIAL_NOTAS_DEBITO,text:c.a.TAG_SEC_NOTAS_DEBITO,enableSorting:!0}},{headerName:c.a.TAG_SEC_RETENCIONES,field:"permisoSecuencialRetenciones",width:160,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:c.a.TAG_SECUENCIAL_RETENCIONES,text:c.a.TAG_SEC_RETENCIONES,enableSorting:!0}},this.utilService.getColumnaOpciones()]},e=so([Object(i.Injectable)({providedIn:"root"}),co("design:paramtypes",[p.a,u.b,h.a,K.a])],e)}(),po=function(){function e(e){this.cajaEmpresa="",this.cajaUsuarioResponsable="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.cajaEmpresa=e.cajaEmpresa?e.cajaEmpresa:this.cajaEmpresa,this.cajaUsuarioResponsable=e.cajaUsuarioResponsable?e.cajaUsuarioResponsable:this.cajaUsuarioResponsable},e}(),uo=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ho=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},mo=function(){function e(e,t,o,a,r,n,s){this.utilService=e,this.filasService=t,this.atajoService=o,this.activeModal=a,this.toastr=r,this.api=n,this.perfilFacturacionService=s,this.empresaSeleccionada=new l.a,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.activar=!1,this.cargando=!1,this.isScreamMd=!0,this.listaEmpresas=Array(),this.listadoResultado=new Array,this.objetoSeleccionado=null,this.vistaListado=!1,this.accion=null,this.dataFormularioPerfil=null,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new D.a,this.constantes=c.a}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),this.iniciarAtajos()},e.prototype.ngOnChanges=function(e){e.parametrosBusqueda&&this.parametrosBusqueda&&this.iniciarBusqueda(),e.operacion&&this.operacion&&this.operacionEnLista(this.operacion)},e.prototype.iniciarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimir");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CONSULTAR,function(t){return e.objetoSeleccionado&&e.consultarCaja(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EDITAR,function(t){return e.objetoSeleccionado&&e.editarCaja(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ELIMINAR,function(t){return e.objetoSeleccionado&&e.eliminarCaja(),!1}))},e.prototype.operacionEnLista=function(e){switch(e.accion){case c.a.LST_INSERTAR:this.refrescarTabla(e.objeto,"I");case c.a.LST_ACTUALIZAR:this.refrescarTabla(e.objeto,"U");break;case c.a.LST_ELIMINAR:this.refrescarTabla(e.objeto,"D");break;case c.a.LST_LIMPIAR:this.limpiarResultado();break;case c.a.LST_FILAS:this.actualizarFilas()}this.cancelar()},e.prototype.cancelar=function(){this.accion=null,this.vistaListado=!0,this.dataFormularioPerfil=null,this.enviarCancelar.emit()},e.prototype.iniciarBusqueda=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.activar=!1,this.cargando=!1,this.vistaListado=!1,this.accion=null,this.dataFormularioPerfil=null,this.iniciarAgGrid(),this.buscarPerfilFacturacion()},e.prototype.buscarPerfilFacturacion=function(){this.cargando=!0,this.limpiarResultado(),this.filasTiempo.iniciarContador(),this.perfilFacturacionService.listarCajCajaTO(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGetListadoCajCajaTO=function(e){this.filasTiempo.finalizarContador(),this.listadoResultado=e&&e.length>0?e:[],this.vistaListado=!0,this.cargando=!1},e.prototype.limpiarResultado=function(){this.gridApi=null,this.gridColumnApi=null,this.filtroGlobal="",this.listadoResultado=[],this.vistaListado=!1,this.objetoSeleccionado=new et.a,this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!1})},e.prototype.consultarCaja=function(){this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_CONSULTAR,this.mostrarObjetoParaAccion())},e.prototype.editarCaja=function(){this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_EDITAR,this.mostrarObjetoParaAccion())},e.prototype.eliminarCaja=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this,!0)){var t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR+"<br>"+c.a.TAG_PERFIL_FACTURACION+": "+this.objetoSeleccionado.cajaUsuarioNombre,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ELIMINAR,cancelButtonText:c.a.MSJ_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0;var o={cajCajaTO:e.objetoSeleccionado,accion:"D"};e.api.post("todocompuWS/cajaWebController/accionCajCajaTO",o,c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo?(e.toastr.success(t.operacionMensaje,c.a.TOAST_CORRECTO,{enableHtml:!0}),e.refrescarTabla(e.objetoSeleccionado,"D")):e.toastr.warning(t.operacionMensaje),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}})}},e.prototype.mostrarObjetoParaAccion=function(){this.dataFormularioPerfil={accion:this.accion,cajCajaPK:new po({cajaEmpresa:this.objetoSeleccionado.cajaEmpresa,cajaUsuarioResponsable:this.objetoSeleccionado.cajaUsuarioResponsable})},this.cargando=!1},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.perfilFacturacionService.generarColumnasCaja(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this)&&this.objetoSeleccionado,o=this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this)&&this.objetoSeleccionado,a=this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this)&&this.objetoSeleccionado;this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!t,command:function(o){return t?e.consultarCaja():null}},{label:c.a.ACCION_EDITAR,icon:c.a.ICON_EDITAR,disabled:!o,command:function(t){return o?e.editarCaja():null}},{label:c.a.ACCION_ELIMINAR,icon:c.a.ICON_ELIMINAR,disabled:!a,command:function(t){return a?e.eliminarCaja():null}}]},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoResultado.length>0)(a=this.listadoResultado.slice()).unshift(e),this.listadoResultado=a;break;case"U":var o=this.listadoResultado.findIndex(function(t){return t.cajaUsuarioResponsable===e.cajaUsuarioResponsable});(a=this.listadoResultado.slice())[o]=e,this.listadoResultado=a;break;case"D":var a;o=this.listadoResultado.findIndex(function(t){return t.cajaUsuarioResponsable===e.cajaUsuarioResponsable});(a=this.listadoResultado.slice()).splice(o,1),this.listadoResultado=a}this.refreshGrid()},e.prototype.cancelarFormulario=function(){this.dataFormularioPerfil=null,this.accion=null,this.vistaListado=!0,this.enviarCancelar.emit()},e.prototype.cambiarActivarFormulario=function(e){this.vistaListado=e.vistaListado;var t={activar:e.activar,deshabilitarOpciones:!0};this.enviarActivar.emit(t)},uo([Object(i.Input)(),ho("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),uo([Object(i.Input)(),ho("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),uo([Object(i.Input)(),ho("design:type",Object)],e.prototype,"operacion",void 0),uo([Object(i.Output)(),ho("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),uo([Object(i.Output)(),ho("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),uo([Object(i.ViewChild)("menuOpciones"),ho("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),e=uo([Object(i.Component)({selector:"app-perfil-facturacion-listado",template:o("dtq1"),styles:[o("dwjf")]}),ho("design:paramtypes",[h.a,L.a,S.HotkeysService,T.a,u.b,p.a,lo])],e)}(),Co=o("VYM3"),vo=o("mEBT"),Ao=function(){function e(e){this.value="",this.label="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.value=e.value?e.value:this.value,this.label=e.label?e.label:this.label},e}(),fo=o("yaVs"),go=o("mmnz"),bo=o("KRTG"),Oo=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},So=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Io=function(){function e(e,t,o,a,r,n,s,d,p,u,h){this.utilService=e,this.api=t,this.toastr=o,this.motivoVentaService=a,this.tipoDocumentoService=r,this.bodegaService=n,this.etiquetasService=s,this.formaCobroService=d,this.perfilFacturacionService=p,this.filasService=u,this.atajoService=h,this.empresaSeleccionada=new l.a,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.enviarLista=new i.EventEmitter,this.vistaFormulario=!0,this.cargando=!1,this.activar=!1,this.accion=null,this.cajCajaTO=new et.a,this.archivoPerfil=null,this.archivoPerfilByte=null,this.listaUsuarios=new Array,this.usuarioSeleccionado=null,this.usuarioCopia=null,this.listaMotivoVenta=new Array,this.motivoVentaSeleccionado=null,this.motivoVentaCopia=null,this.listaTipoComprobante=new Array,this.tipoComprobanteSeleccionado=null,this.tipoComprobanteCopia=null,this.listaBodega=new Array,this.bodegaSeleccionada=null,this.bodegaCopia=null,this.listaPrecioventa=new Array,this.precioVentaSeleccionada=null,this.precioVentaCopia=null,this.invProductoEtiquetas=new xe.a,this.listaFormaCobro=new Array,this.formaCobroSeleccionado=null,this.formaCobroCopia=null,this.constantes=c.a}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),this.iniciarAtajos()},e.prototype.ngOnChanges=function(e){e.data&&(this.reiniciarValores(),this.iniciarFormulario())},e.prototype.iniciarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivarPerfilFacturacion");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardarPerfilFacturacion");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.cancelarAccion(),!1}))},e.prototype.reiniciarValores=function(){this.cajCajaTO=new et.a,this.activar=!1,this.frmTitulo="",this.vistaFormulario=!1,this.motivoVentaCopia=null,this.tipoComprobanteCopia=null,this.bodegaCopia=null,this.precioVentaCopia=null,this.formaCobroCopia=null},e.prototype.iniciarFormulario=function(){if(this.empresaSeleccionada&&this.data&&this.data.accion)switch(c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.data.accion,this.accion){case c.a.ACCION_CREAR:this.crearPerfilFacturacion();break;case c.a.ACCION_CONSULTAR:this.consultarPerfilFacturacion();break;case c.a.ACCION_EDITAR:this.editarPerfilFacturacion()}},e.prototype.crearPerfilFacturacion=function(){this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&(this.cargando=!0,this.frmTitulo=c.a.TITULO_FORM_NUEVO_CAJA,this.obtenerDatosPerfilFacturacion())},e.prototype.consultarPerfilFacturacion=function(){this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this,!0)&&(this.cargando=!0,this.frmTitulo=c.a.TITULO_FORM_CONSULTAR_CAJA,this.obtenerDatosPerfilFacturacion())},e.prototype.editarPerfilFacturacion=function(){this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.frmTitulo=c.a.TITULO_FORM_EDITAR_CAJA,this.obtenerDatosPerfilFacturacion())},e.prototype.obtenerDatosPerfilFacturacion=function(){var e=this;this.cargando=!0;var t={empresa:c.a.KEY_EMPRESA_SELECT,cajCajaPK:this.data.cajCajaPK?this.data.cajCajaPK:null};this.api.post("todocompuWS/cajaWebController/getDatosPerfilFacturacion",t,c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo&&t.estadoOperacion===c.a.KEY_EXITO?e.cargarDatos(t.extraInfo):(e.cargando=!1,e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO),e.cerrarFormulario())}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.cargarDatos=function(e){this.accion!==c.a.ACCION_CONSULTAR&&this.accion!==c.a.ACCION_EDITAR||!e.cajCajaTO?this.accion===c.a.ACCION_CREAR&&(this.formatearSelect(e),this.mostrarFormulario()):(this.cajCajaTO=e.cajCajaTO,this.motivoVentaCopia=this.cajCajaTO.permisoMotivoPermitido?new He.a({vmCodigo:this.cajCajaTO.permisoMotivoPermitido}):null,this.tipoComprobanteCopia=this.cajCajaTO.permisoDocumentoPermitido?new Co.a({tcCodigo:this.cajCajaTO.permisoDocumentoPermitido}):null,this.bodegaCopia=this.cajCajaTO.permisoBodegaPermitida?new vo.a({bodCodigo:this.cajCajaTO.permisoBodegaPermitida}):null,this.precioVentaCopia=this.cajCajaTO.permisoClientePrecioPermitido||0===this.cajCajaTO.permisoClientePrecioPermitido?new Ao({value:this.cajCajaTO.permisoClientePrecioPermitido.toString()}):null,this.formaCobroCopia=this.cajCajaTO.permisoFormaPagoPermitida?new nt.a({ctaCodigo:this.cajCajaTO.permisoFormaPagoPermitida}):null,this.formatearSelect(e),this.mostrarFormulario()),this.cargando=!1},e.prototype.formatearSelect=function(e){this.despuesDeListarUsuariosResponsables(e.listaSisListaUsuarioTO),this.despuesDeListarVentaMotivoComboTO(e.listaInvVentaMotivoComboTO),this.despuesDeListarAnxTipoComprobanteComboTO(e.listaAnxTipoComprobanteComboTO),this.despuesDeListarInvComboBodegaTO(e.listaInvComboBodegaTO),this.despuesDeObtenerEtiquetas(e.invProductoEtiquetas),this.despuesDeListarInvListarInvVentasFormaCobroTO(e.listaInvVentasFormaCobroTO)},e.prototype.mostrarFormulario=function(){this.vistaFormulario=!0,this.cambiarActivar(),this.actualizarFilas()},e.prototype.cerrarFormulario=function(){this.enviarCancelar.emit()},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!0,vistaListado:!1})},e.prototype.enviarObjetoAListaCerrar=function(e){switch(this.accion){case c.a.ACCION_CREAR:this.enviarLista.emit({objeto:e,accion:c.a.LST_INSERTAR});break;case c.a.ACCION_EDITAR:this.enviarLista.emit({objeto:e,accion:c.a.LST_ACTUALIZAR})}},e.prototype.cancelarAccion=function(){var e=this;if(this.accion===c.a.ACCION_CONSULTAR)this.cerrarFormulario();else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.cerrarFormulario()})}},e.prototype.establecerArchivoElectronico=function(e){var t=this;if(e&&e.files&&e.files[0].name.toString().endsWith(".p12")){this.archivoPerfil=new FormData,this.archivoPerfil.append("archivoFirma",e.files[0]),this.cajCajaTO.cajaCertificadoFirmaDigitalNombre=e.files[0].name;var o=new FileReader;o.onload=function(e){t.archivoPerfilByte=o.result},o.readAsDataURL(e.files[0])}else this.limpiarArchivoElectronico()},e.prototype.limpiarArchivoElectronico=function(){this.archivoPerfil=null,this.cajCajaTO.cajaCertificadoFirmaDigitalNombre="",this.archivoPerfilByte=null},e.prototype.validarAntesDeEnviar=function(e){var t=!0,o=this.utilService.establecerFormularioTocado(e);return this.cajCajaTO.cajaCertificadoFirmaDigitalClave&&!this.cajCajaTO.cajaCertificadoFirmaDigitalNombre?(this.toastr.warning(c.a.MSJ_SELECCIONE_ARCHIVO,c.a.MSJ_TITULO_INVALIDOS),t=!1):e&&o&&e.valid||(this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),t=!1),this.cargando=t,t},e.prototype.guardarPerfilFacturacion=function(e){this.cargando=!0,this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&this.validarAntesDeEnviar(e)&&(this.archivoPerfil?this.guardarArchivoFirmaElectronica():this.insertarCaja(""))},e.prototype.guardarArchivoFirmaElectronica=function(){var e=this,t={archivoBase64:this.archivoPerfilByte,nombreArchivo:this.cajCajaTO.cajaCertificadoFirmaDigitalNombre};this.api.post("todocompuWS/sistemaWebController/guardarArchivoFirmaElectronica",t,c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===c.a.KEY_EXITO&&t.extraInfo?e.accion===c.a.ACCION_CREAR?e.insertarCaja(t.operacionMensaje):e.actualizarCaja(t.operacionMensaje):(e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.insertarCaja=function(e){var t=this,o=this.perfilFacturacionService.formatearCajCajaTO(this.cajCajaTO,this),a={cajCajaTO:o,accion:"I"};this.api.post("todocompuWS/cajaWebController/accionCajCajaTO",a,c.a.KEY_EMPRESA_SELECT).then(function(e){if(e&&e.estadoOperacion===c.a.KEY_EXITO&&e.extraInfo){t.cargando=!1;e.operacionMensaje;t.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK).then(function(e){t.enviarObjetoAListaCerrar(o)})}else t.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})},e.prototype.actualizarPerfilFacturacion=function(e){this.cargando=!0,this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)&&this.validarAntesDeEnviar(e)&&(this.archivoPerfil?this.guardarArchivoFirmaElectronica():this.actualizarCaja(""))},e.prototype.actualizarCaja=function(e){var t=this,o=this.perfilFacturacionService.formatearCajCajaTO(this.cajCajaTO,this),a={cajCajaTO:o,accion:"U"};this.api.post("todocompuWS/cajaWebController/accionCajCajaTO",a,c.a.KEY_EMPRESA_SELECT).then(function(e){if(e&&e.estadoOperacion===c.a.KEY_EXITO&&e.extraInfo){t.cargando=!1;e.operacionMensaje;t.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK).then(function(e){t.enviarObjetoAListaCerrar(o)})}else t.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})},e.prototype.listarUsuariosResponsables=function(){this.cargando=!0,this.listaUsuarios=[],this.usuarioCopia=this.usuarioSeleccionado,this.usuarioSeleccionado=null;var e={empresa:c.a.KEY_EMPRESA_SELECT};this.perfilFacturacionService.listarUsuariosResponsables(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarUsuariosResponsables=function(e){this.listaUsuarios=e,this.usuarioSeleccionado=this.utilService.getObjetoSeleccionadoComboOpcional(this.listaUsuarios,this.usuarioCopia,"usrCodigo"),this.cargando=!1},e.prototype.listarMotivoVenta=function(){this.cargando=!0,this.listaMotivoVenta=[],this.motivoVentaCopia=this.motivoVentaSeleccionado,this.motivoVentaSeleccionado=null;var e={empresa:c.a.KEY_EMPRESA_SELECT,filtrarInactivos:!1};this.motivoVentaService.listarVentaMotivoComboTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarVentaMotivoComboTO=function(e){this.listaMotivoVenta=e,this.motivoVentaSeleccionado=this.utilService.getObjetoSeleccionadoComboOpcional(this.listaMotivoVenta,this.motivoVentaCopia,"vmCodigo"),this.cargando=!1},e.prototype.listarDocumentos=function(){this.cargando=!0,this.listaTipoComprobante=[],this.tipoComprobanteCopia=this.tipoComprobanteSeleccionado,this.tipoComprobanteSeleccionado=null;var e={empresa:c.a.KEY_EMPRESA_SELECT,codigoTipoTransaccion:null};this.tipoDocumentoService.listarAnxTipoComprobanteComboTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarAnxTipoComprobanteComboTO=function(e){this.listaTipoComprobante=e,this.tipoComprobanteSeleccionado=this.utilService.getObjetoSeleccionadoComboOpcional(this.listaTipoComprobante,this.tipoComprobanteCopia,"tcCodigo"),this.cargando=!1},e.prototype.listarBodegas=function(){this.cargando=!0,this.listaBodega=[],this.bodegaCopia=this.bodegaSeleccionada,this.bodegaSeleccionada=null;var e={empresa:c.a.KEY_EMPRESA_SELECT};this.bodegaService.listarInvComboBodegaTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvComboBodegaTO=function(e){this.listaBodega=e,this.bodegaSeleccionada=this.utilService.getObjetoSeleccionadoComboOpcional(this.listaBodega,this.bodegaCopia,"bodCodigo"),this.cargando=!1},e.prototype.obtenerEtiquetas=function(){this.cargando=!0,this.listaPrecioventa=[],this.precioVentaCopia=this.precioVentaSeleccionada,this.precioVentaSeleccionada=null;var e={empresa:c.a.KEY_EMPRESA_SELECT};this.invProductoEtiquetas=new xe.a,this.etiquetasService.obtenerEtiquetas(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerEtiquetas=function(e){this.invProductoEtiquetas=new xe.a(e);var t=[new Ao({value:"0",label:c.a.LABEL_POR_CANTIDAD})];for(var o in this.invProductoEtiquetas)if(o.toString().indexOf("eprecio")>=0&&""!=this.invProductoEtiquetas[o]){var a=Number(o.toString().split("eprecio")[1]).toString();t.push(new Ao({value:a,label:this.invProductoEtiquetas[o]}))}this.listaPrecioventa=t.slice(),this.precioVentaSeleccionada=this.utilService.getObjetoSeleccionadoComboOpcional(this.listaPrecioventa,this.precioVentaCopia,"value"),this.cargando=!1},e.prototype.listarFormasCobro=function(){this.cargando=!0,this.listaFormaCobro=[],this.formaCobroCopia=this.formaCobroSeleccionado,this.formaCobroSeleccionado=null;var e={empresa:this.empresaSeleccionada.empCodigo,inactivos:!1};this.formaCobroService.listarInvListaInvVentasFormaCobroTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvListarInvVentasFormaCobroTO=function(e){this.listaFormaCobro=e,this.formaCobroSeleccionado=this.utilService.getObjetoSeleccionadoComboOpcional(this.listaFormaCobro,this.formaCobroCopia,"ctaCodigo"),this.cargando=!1},e.prototype.actualizarFilas=function(){this.filasService.actualizarFilas(0,0)},Oo([Object(i.Input)(),So("design:type",Object)],e.prototype,"data",void 0),Oo([Object(i.Input)(),So("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),Oo([Object(i.Output)(),So("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),Oo([Object(i.Output)(),So("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),Oo([Object(i.Output)(),So("design:type",i.EventEmitter)],e.prototype,"enviarLista",void 0),e=Oo([Object(i.Component)({selector:"app-perfil-facturacion-formulario",template:o("ZFRI"),styles:[o("jXhD")]}),So("design:paramtypes",[h.a,p.a,u.b,Xe.a,fo.a,Bt.a,bo.a,go.a,lo,L.a,S.HotkeysService])],e)}(),Eo=o("4EM/"),Ro=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},To=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_o=function(){function e(e,t,o,a){this.contabilizarIppCierreCorridasService=e,this.atajoService=t,this.utilService=o,this.toastr=a,this.enviarActivar=new i.EventEmitter,this.empresaSeleccionada=new l.a,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.listadoResultado=[],this.tamanioEstructura=0,this.filasTiempo=new D.a,this.tamanio="207px",this.columnDefs=[],this.components={},this.constantes=c.a}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS),this.inicializarAtajos(),this.iniciarAgGrid()},e.prototype.ngOnChanges=function(e){e.parametrosBusqueda&&this.reiniciarValoresGenerales()},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(t){if(e.listadoResultado.length>0){var o=document.getElementById("btnActivar");return o&&o.click(),!1}return!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CONTABILIZAR,function(e){var t=document.getElementById("btnContabilizar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(t){return e.cargando||e.limpiarResultado(),!1}))},e.prototype.reiniciarValoresGenerales=function(){this.parametrosBusqueda.empCodigo?(this.activar=!0,c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado(),this.listaContabilizarCorridaTO()):this.toastr.info(c.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,c.a.TOAST_ADVERTENCIA)},e.prototype.listaContabilizarCorridaTO=function(){this.cargando=!0,this.filasTiempo.iniciarContador(),this.contabilizarIppCierreCorridasService.listaContabilizarCorridaTO(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListaContabilizarCorridaTO=function(e){this.filasTiempo.finalizarContador(),this.listadoResultado=e,this.cargando=!1,this.cambiarActivar(this.activar)},e.prototype.limpiarResultado=function(){this.listadoResultado=[],this.enviarActivar.emit(!1)},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarActivar.emit(this.activar)},e.prototype.contabilizar=function(){this.cargando=!0,this.parametrosBusqueda.listaContabilizarCorrida=this.listadoResultado,this.contabilizarIppCierreCorridasService.insertarModificarContabilizarCorrida(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.contabilizarIppCierreCorridasService.generarColumnas(),this.frameworkComponents={toolTip:pe.a}},Ro([Object(i.Input)(),To("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),Ro([Object(i.Output)(),To("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),Ro([Object(i.Input)(),To("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),e=Ro([Object(i.Component)({selector:"app-contabilizar-ipp-cierre-corridas-listado",template:o("6rmq"),styles:[o("MLhd")]}),To("design:paramtypes",[Eo.a,S.HotkeysService,h.a,u.b])],e)}(),Po=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},No=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},yo=function(){function e(e,t,o){this.filasService=e,this.utilService=t,this.atajoService=o,this.filasTiempo=new D.a,this.isScreamMd=!0,this.constantes=c.a,this.estilos={},this.filtroGlobal="",this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS),this.definirAtajos(),this.iniciarAgGrid(),this.estilos={width:"100%",height:"calc(100vh - "+this.tamanio+")"}},e.prototype.definirAtajos=function(){},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.columnas,this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={toolTip:pe.a}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.redimencionarColumnas(),this.actualizarFilas()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.onFilterChanged=function(){this.actualizarFilas()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},Po([Object(i.Input)(),No("design:type",Object)],e.prototype,"columnas",void 0),Po([Object(i.Input)(),No("design:type",Object)],e.prototype,"listadoResultado",void 0),Po([Object(i.Input)(),No("design:type",Object)],e.prototype,"tamanio",void 0),Po([Object(i.Input)(),No("design:type",D.a)],e.prototype,"filasTiempo",void 0),e=Po([Object(i.Component)({selector:"app-tabla-ipp",template:o("hL/3"),styles:[o("cPX/")]}),No("design:paramtypes",[L.a,h.a,S.HotkeysService])],e)}(),Do=o("4b4a"),Lo=o("rx3f"),Mo=o("cDNE"),xo=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Fo=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},wo=function(){function e(e,t,o,a){this.toastr=e,this.empresaService=t,this.atajoService=o,this.utilService=a,this.constantes=c.a,this.enviarCancelar=new i.EventEmitter,this.empresa=new Mo.a,this.accion=null,this.cargando=!1,this.hayClave=!1,this.hayEmail=!1}return e.prototype.ngOnInit=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.definirAtajosDeTeclado(),this.obtenerEmpresa()},e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardarEmpresa");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(e){var t=document.getElementById("btnCancelarEmpresa");return t&&t.click(),!1}))},e.prototype.obtenerEmpresa=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT};this.empresaService.obtenerEmpresa(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.verificarCampos=function(){this.hayEmail=!!this.empresa.empEmailNotificaciones,this.hayClave=!!this.empresa.empClaveNotificaciones},e.prototype.despuesDeObtenerEmpresa=function(e){this.empresa=e,this.verificarCampos(),this.cargando=!1,this.extraerValoresIniciales()},e.prototype.cerrarFormulario=function(){var e=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmEmpresaDatos))this.enviarCancelar.emit();else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_ACEPTAR,cancelButtonText:c.a.MSJ_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarCancelar.emit()})}},e.prototype.verificarPermiso=function(e,t){return this.empresaService.verificarPermiso(e,this,t)},e.prototype.actualizarEmpresa=function(e){if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmEmpresaDatos))this.enviarCancelar.emit(),this.utilService.generarSwal(c.a.PEDIDOS_CONFIGURACION_CORREO,c.a.SWAL_SUCCESS,c.a.NO_REALIZO_NINGUN_CAMBIO);else if(this.utilService.establecerFormularioTocado(e)&&!e.invalid){this.cargando=!0;var t={sisEmpresa:this.empresa};this.empresaService.modificarSisEmpresa(t,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TOAST_ADVERTENCIA)},e.prototype.despuesDeModificarSisEmpresa=function(e){this.toastr.success(c.a.MSJ_CORREO_ACTUALIZADO,c.a.TOAST_CORRECTO),this.cargando=!1,this.enviarCancelar.emit()},e.prototype.unloadHandler=function(e){if(this.accion==c.a.ACCION_CONSULTAR||this.utilService.puedoCancelar(this.valoresIniciales,this.frmEmpresaDatos))return!0;e.returnValue=!1},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmEmpresaDatos?e.frmEmpresaDatos.value:null))},50)},xo([Object(i.Input)(),Fo("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),xo([Object(i.Input)(),Fo("design:type",Boolean)],e.prototype,"administracion",void 0),xo([Object(i.Output)(),Fo("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),xo([Object(i.Input)(),Fo("design:type",String)],e.prototype,"accion",void 0),xo([Object(i.ViewChild)("frmEmpresaDatos"),Fo("design:type",I.NgForm)],e.prototype,"frmEmpresaDatos",void 0),xo([Object(i.HostListener)("window:beforeunload",["$event"]),Fo("design:type",Function),Fo("design:paramtypes",[Event]),Fo("design:returntype",void 0)],e.prototype,"unloadHandler",null),e=xo([Object(i.Component)({selector:"app-empresa-formulario",template:o("j8lp"),styles:[o("hg2a")]}),Fo("design:paramtypes",[u.b,Lo.a,S.HotkeysService,h.a])],e)}(),Go=o("GAfr"),jo=o("ZJV5"),Uo=o("d+pv"),Bo=o("ax4V"),Vo=o("4sC9"),ko=o("sffu"),Wo=o("VCY8"),zo=o("mozY"),Jo=o("OeYz"),Ko=o("tc6t"),Yo=o("eJKR"),qo=o("nnK+"),Ho=o("UbKW"),Xo=o("bPTo"),Zo=o("C2aO"),$o=o("/TJv"),Qo=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ea=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ta=function(){function e(e,t,o,a,i){this.atajoService=e,this.utilService=t,this.ordenCompraService=o,this.toastr=a,this.archivoService=i}return e.prototype.iniciarAtajos=function(e){this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFormOrdenCompra");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardarOrdenCompra");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirOrdenCompra");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarOrdenCompra");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ANULAR,function(){var e=document.getElementById("btnAnularOrdenCompra");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelar");return e&&e.click(),!1}))},e.prototype.validarAntesDeEnviar=function(e,t,o){var a=!0,i=this.validarDetalle(o),r=this.utilService.establecerFormularioTocado(e),n=this.getRowData(o),s=this.ordenCompraService.crearListaDetalleOrdenCompra(n);return t.invPedidosOrdenCompra.ocValorRetencion=t.pinnedBottomRowData[1].ocValorRetencion,r&&e&&e.valid&&t.invPedidosOrdenCompra.ocValorRetencion<=t.pinnedBottomRowData[0].ocValorRetencion?i?""===t.campoCostoRerefencia&&(this.toastr.error(c.a.MSJ_INVALID_COSTO_REF,c.a.MSJ_TITULO_INVALIDOS),a=!1):(this.toastr.error(c.a.MSJ_INGRESE_DATOS_DETALLE,c.a.MSJ_TITULO_INVALIDOS),a=!1):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),a=!1),t.cargando=a,a&&(t.invPedidosOrdenCompra.invPedidosOrdenCompraDetalleList=s,t.invPedidosOrdenCompra.ocFormaPago=t.campoCostoRerefencia,t.invPedidosOrdenCompra.ocMontoTotal=this.ordenCompraService.obtenerTotalDeListaInvPedidosOrdenCompraDetalle(s),t.listaInvPedidosDetalle=this.ordenCompraService.establecerCantidadAdquiridaEnInvPedidosDetalle(s,t.listaInvPedidosDetalle)),a},e.prototype.validarDetalle=function(e){var t=this,o=!0,a=0;return e&&(e.forEachNode(function(e){var o=t.esInvalidaCantidad(e.data)||t.esInvalidoPrecioReal(e.data);(e.data.detCompletado&&!o||!o&&e.data.detCantidad>0)&&a++}),o=a>0),o},e.prototype.getRowData=function(e){var t=[];return e&&e.forEachNode(function(e){t.push(e.data)}),t},e.prototype.exportarOrdenCompra=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidosOrdenCompra",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoExcel(e._body,"OrdenCompra_"):a.toastr.warning(c.a.MSJ_NO_DATA),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.focusProveedorCodigo=function(){var e=document.getElementById("provCodigo");e&&e.focus()},e.prototype.esValidoProveedor=function(e,t){return""!=e.provCodigo&&e.provCodigo===t.invProveedor.invProveedorPK.provCodigo},e.prototype.generarPinnedBottonRowData=function(){return[{proCodigoPrincipal:"..",proNombre:"",medDetalle:"",detCantidadAprobada:0,detCantidadAdquirida:0,detCantidad:0,detPrecioReal:0,totalGeneral:0,ocValorRetencion:1,detObservaciones:""},{proCodigoPrincipal:".",proNombre:"",medDetalle:"",detCantidadAprobada:0,detCantidadAdquirida:0,detCantidad:0,detPrecioReal:0,totalGeneral:0,ocValorRetencion:1,detObservaciones:""},{proCodigoPrincipal:"",proNombre:"",medDetalle:"",detCantidadAprobada:0,detCantidadAdquirida:0,detCantidad:0,detPrecioReal:0,totalGeneral:0,ocValorRetencion:1,detObservaciones:""}]},e.prototype.generarColumnasOrdenCompraDetalle=function(e,t){var o=this,a=t===c.a.ACCION_EJECUTAR,i=[];return i.push({headerName:c.a.TAG_CODIGO,field:"proCodigoPrincipal",width:100,minWidth:100,rowDrag:a,cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.accion===c.a.ACCION_EJECUTAR}},valueGetter:function(e){return e.node.rowPinned?"":e.data.proCodigoPrincipal}},{headerName:c.a.TAG_KARDEX,headerClass:"cell-header-center",cellClass:"text-center cell-block",width:70,minWidth:70,headerComponentFramework:pe.a,headerComponentParams:{class:c.a.ICON_KARDEX,tooltip:c.a.TAG_KARDEX,text:"",enableSorting:!1},cellRendererFramework:$o.a,cellRendererParams:function(e){return e.node.rowPinned?null:{icono:c.a.ICON_KARDEX,tooltip:c.a.TAG_KARDEX,accion:"verKardex",class:""}}},{headerName:c.a.TAG_DESCRIPCION,field:"proNombre",width:150,minWidth:150,cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.accion===c.a.ACCION_EJECUTAR}}},{headerName:c.a.TAG_UNIDAD_MEDIDA,field:"medDetalle",width:150,minWidth:150,cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.accion===c.a.ACCION_EJECUTAR}}}),t===c.a.ACCION_EJECUTAR&&i.push({headerName:c.a.TAG_CANTIDAD_PENDIENTE,width:145,minWidth:145,cellClass:"text-right",cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.accion===c.a.ACCION_EJECUTAR}},valueFormatter:this.utilService.formatearA2Decimales,valueGetter:function(e){return e.data.detCantidadAprobada-e.data.detCantidadAdquirida||0},pinnedRowCellRenderer:"pinnedCell",pinnedRowCellRendererParams:{value:""}}),i.push({headerComponentFramework:ft.a,headerClass:"pr-0",headerComponentParams:{name:c.a.TAG_CANTIDAD,value:e.apruebaTodos,tooltipText:c.a.TAG_TODOS,noVisible:e.accion!==c.a.ACCION_EJECUTAR},field:"detCantidad",valueFormatter:this.utilService.formatearA2Decimales,width:114,minWidth:114,suppressKeyboardEvent:function(t){if(t.editing)return o.utilService.desplazarTablaArribaAbajo(t.event.keyCode,t.node.rowIndex,e.listadoResultado)||o.utilService.desplazarseInputIzquierdaDerecha(t.event.keyCode)},editable:function(e){return!(!a||e.node.rowPinned)},cellClass:"text-right",cellClassRules:{"cell-with-errors":function(t){if(!a||t.node.rowPinned)return!1;if(a){var i=o.esCantidadValida(t.data),r=o.validarDetalle(e.gridApi);return!i&&(!r||!i)}return!1},"cell-editing":function(e){return!!a&&!e.node.rowPinned}},cellEditor:"numericEditor",cellEditorParams:{name:"detCantidad",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},pinnedRowCellRenderer:"pinnedCell",pinnedRowCellRendererParams:{value:""}},{headerName:c.a.TAG_PRECIO,field:"detPrecioReal",valueFormatter:this.utilService.formatearA2Decimales,width:120,minWidth:120,suppressKeyboardEvent:function(t){if(t.editing)return o.utilService.desplazarTablaArribaAbajo(t.event.keyCode,t.node.rowIndex,e.listadoResultado)||o.utilService.desplazarseInputIzquierdaDerecha(t.event.keyCode)},editable:function(t){return!(!a||t.node.rowPinned)&&o.eseEditableSegunPrecioMotivo(t,e)},cellClass:"text-right",cellClassRules:{"cell-with-errors":function(t){if(!a||t.node.rowPinned)return!1;if(a){var i=o.esPrecioRealValido(t.data),r=o.validarDetalle(e.gridApi);return!i&&(!r||!i)}return!1},"cell-editing":function(e){return!!a&&!e.node.rowPinned}},cellEditor:"numericEditor",cellEditorParams:{name:"detPrecioReal",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric6},pinnedRowCellRenderer:"pinnedCell",pinnedRowCellRendererParams:function(e){return".."===e.node.data.proCodigoPrincipal?{value:"Subtotal: ",style:{"font-weight":"bold"}}:"."===e.node.data.proCodigoPrincipal?{value:"Total Retenci\xf3n: ",style:{"font-weight":"bold"}}:""===e.node.data.proCodigoPrincipal?{value:"Total: ",style:{"font-weight":"bold"}}:void 0}},{headerName:c.a.TAG_PARCIAL,cellClass:"text-right",width:200,minWidth:120,field:"ocValorRetencion",valueFormatter:this.utilService.formatearA2Decimales,cellClassRules:{"cell-block":function(t){return!(!t.node.rowPinned&&e.accion===c.a.ACCION_EJECUTAR)},"cell-with-errors":function(t){return!(!t.node.rowPinned||"."!==t.node.data.proCodigoPrincipal)&&!o.validarCantidadRetencion(t.data,e)}},editable:function(e){return!(!e.node.rowPinned||"."!==e.node.data.proCodigoPrincipal||t!==c.a.ACCION_EJECUTAR)},valueGetter:function(t){return a?t.node.rowPinned&&"."!==t.node.data.proCodigoPrincipal&&".."!==t.node.data.proCodigoPrincipal?t.data.totalGeneral?t.data.totalGeneral:0:t.node.rowPinned&&".."===t.node.data.proCodigoPrincipal?t.data.totalGeneral>0?t.data.totalGeneral-t.data.ocValorRetencion:t.data.ocValorRetencion:t.node.rowPinned&&"."===t.node.data.proCodigoPrincipal?t.data.ocValorRetencion:t.data.detCantidad*t.data.detPrecioReal:t.node.rowPinned&&"."!==t.node.data.proCodigoPrincipal&&".."!==t.node.data.proCodigoPrincipal?e.invPedidosOrdenCompra.ocMontoTotal-e.invPedidosOrdenCompra.ocValorRetencion:t.node.rowPinned&&".."===t.node.data.proCodigoPrincipal?e.invPedidosOrdenCompra.ocMontoTotal:t.node.rowPinned&&"."===t.node.data.proCodigoPrincipal?e.invPedidosOrdenCompra.ocValorRetencion:t.data.detCantidad*t.data.detPrecioReal},cellEditorFramework:zo.a,cellEditorParams:{name:"ocValorRetencion",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric}},{headerName:c.a.TAG_OBSERVACIONES,field:"detObservaciones",width:300,minWidth:180,suppressKeyboardEvent:function(t){if(t.editing)return o.utilService.desplazarTablaArribaAbajo(t.event.keyCode,t.node.rowIndex,e.listadoResultado)||o.utilService.desplazarseInputIzquierdaDerecha(t.event.keyCode)},editable:function(e){return!!a&&!e.node.rowPinned},cellClassRules:{"cell-editing":function(e){return!!a&&!e.node.rowPinned}},pinnedRowCellRenderer:"pinnedCell",cellEditor:"inputEditor",cellEditorParams:{name:"detObservaciones",maxlength:1e3,inputClass:"text-uppercase",placeholder:""}},{headerName:c.a.TAG_OBS_REGISTRADOR,field:"",width:130,minWidth:130,cellRendererFramework:gt.a,cellRendererParams:function(e){return{titulo:c.a.TAG_OBS_REGISTRADOR,informacion:e.data.ocObsRegistra}},headerComponentFramework:pe.a,headerComponentParams:{class:"",tooltip:c.a.TAG_OBSERVACION_REGISTRADOR,text:c.a.TAG_OBS_REGISTRADOR,enableSorting:!0},pinnedRowCellRenderer:"pinnedCell"},{headerName:c.a.TAG_OBS_APROBADOR,field:"",width:130,minWidth:130,cellRendererFramework:gt.a,cellRendererParams:function(e){return{titulo:c.a.TAG_OBS_APROBADOR,informacion:e.data.ocObsAprueba}},headerComponentFramework:pe.a,headerComponentParams:{class:"",tooltip:c.a.TAG_OBSERVACION_APROBADOR,text:c.a.TAG_OBS_APROBADOR,enableSorting:!0},pinnedRowCellRenderer:"pinnedCell",hide:e.data.pmAprobacionAutomatica}),a&&i.push({headerName:c.a.TAG_DAR_POR_COMPLETADO,headerClass:"cell-header-center",field:"detCompletado",cellClass:"text-sm-center",width:70,minWidth:70,cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.accion===c.a.ACCION_EJECUTAR}},headerComponent:"toolTip",headerComponentParams:{class:c.a.ICON_SELECCIONAR,tooltip:c.a.TAG_DAR_POR_COMPLETADO,text:"",enableSorting:!1},suppressKeyboardEvent:function(t){if(t.editing)return o.utilService.desplazarTablaArribaAbajo(t.event.keyCode,t.node.rowIndex,e.listadoResultado)||o.utilService.desplazarseInputIzquierdaDerecha(t.event.keyCode)},editable:function(e){return!!a&&!e.node.rowPinned},cellEditor:"checkEditor",cellEditorParams:{name:"detCompletado",clase:"mt-1"},valueFormatter:function(e){return e.value?"SI":"NO"},pinnedRowCellRenderer:"pinnedCell",pinnedRowCellRendererParams:{value:""}}),i},e.prototype.generarColumnasOrdenCompraDetalleConsulta=function(){var e=[];return e.push({headerName:c.a.TAG_CODIGO,width:100,minWidth:100,valueGetter:function(e){return e.data&&e.data.invPedidosDetalle?e.data.invPedidosDetalle.invProducto.invProductoPK.proCodigoPrincipal:""}},{headerName:c.a.TAG_KARDEX,headerClass:"cell-header-center",cellClass:"text-center cell-block",width:70,minWidth:70,headerComponentFramework:pe.a,headerComponentParams:{class:c.a.ICON_KARDEX,tooltip:c.a.TAG_KARDEX,text:"",enableSorting:!1},cellRendererFramework:$o.a,cellRendererParams:function(e){return e.node.rowPinned?null:{icono:c.a.ICON_KARDEX,tooltip:c.a.TAG_KARDEX,accion:"verKardex",class:""}}},{headerName:c.a.TAG_DESCRIPCION,width:150,minWidth:150,valueGetter:function(e){return e.data&&e.data.invPedidosDetalle?e.data.invPedidosDetalle.invProducto.proNombre:""}},{headerName:c.a.TAG_UNIDAD_MEDIDA,width:150,minWidth:150,valueGetter:function(e){return e.data&&e.data.invPedidosDetalle?e.data.invPedidosDetalle.invProducto.invProductoMedida.medDetalle:""}},{headerName:c.a.TAG_CANTIDAD,field:"detCantidad",valueFormatter:this.utilService.formatearA2Decimales,width:120,minWidth:120,cellClass:"text-sm-right",cellEditor:"numericEditor",cellEditorParams:{name:"detCantidad",maxlength:25,placeholder:"0.00"},pinnedRowCellRenderer:"pinnedCell",pinnedRowCellRendererParams:{value:""}},{headerName:c.a.TAG_PRECIO,field:"detPrecioReal",valueFormatter:this.utilService.formatearA2Decimales,width:120,minWidth:120,cellClass:"text-sm-right",cellEditor:"numericEditor",cellEditorParams:{name:"detPrecioReal",maxlength:25,placeholder:"0.00"},pinnedRowCellRenderer:"pinnedCell",pinnedRowCellRendererParams:function(e){return"."!==e.node.data.proCodigoPrincipal?{value:"Total: ",style:{"font-weight":"bold"}}:{value:"Total Retenci\xf3n: ",style:{"font-weight":"bold"}}}},{headerName:c.a.TAG_PARCIAL,cellClass:"text-sm-right",width:200,minWidth:120,field:"ocValorRetencion",valueFormatter:this.utilService.formatearA2Decimales,valueGetter:function(e){return e.node.rowPinned&&"."!==e.node.data.proCodigoPrincipal&&".."!==e.node.data.proCodigoPrincipal?e.data.totalGeneral?e.data.totalGeneral:0:e.node.rowPinned&&".."===e.node.data.proCodigoPrincipal?e.data.totalGeneral>0?e.data.totalGeneral-e.data.ocValorRetencion:e.data.ocValorRetencion:e.node.rowPinned&&"."===e.node.data.proCodigoPrincipal?e.data.ocValorRetencion:e.data.detCantidad*e.data.detPrecioReal}},{headerName:c.a.TAG_OBSERVACIONES,field:"detObservaciones",width:300,minWidth:120}),e},e.prototype.esInvalidaCantidad=function(e){var t=e.detCantidadAprobada-e.detCantidadAdquirida,o=e.detCantidad;return!!(null==o||o&&o<0||o&&o>t)},e.prototype.esCantidadValida=function(e){var t=e.detCantidadAprobada-e.detCantidadAdquirida,o=e.detCantidad;return!!(o&&o<=t)},e.prototype.esInvalidoPrecioReal=function(e){var t=e.detCantidad>0?.01:0,o=e.detPrecioReal;return null==o||o>=0&&o<t},e.prototype.esPrecioRealValido=function(e){var t=e.detCantidad>0?.01:0,o=e.detPrecioReal;return!!(o&&o>=t)},e.prototype.validarCantidadRetencion=function(e,t){return e.ocValorRetencion<=t.pinnedBottomRowData[0].ocValorRetencion},e.prototype.eseEditableSegunPrecioMotivo=function(e,t){var o;return(o=t.motivoOCSeleccionado&&t.motivoOCSeleccionado.ocmCostoFijo)&&0===e.data.detPrecioReferencial||!o},e=Qo([Object(i.Injectable)({providedIn:"root"}),ea("design:paramtypes",[S.HotkeysService,h.a,qo.a,u.b,le.a])],e)}(),oa=o("X2CA"),aa=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ia=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ra=function(){function e(e,t,o,a,r,n,s,l,d,p,u,h,m,C,v){this.api=e,this.utilService=t,this.generarOCService=o,this.modalService=a,this.auth=r,this.filasService=n,this.toastr=s,this.ordenCompraService=l,this.ordenPedidoService=d,this.motivoOrdenCompraService=p,this.archivoService=u,this.configuracionPedidoService=h,this.etiquetasService=m,this.sistemaService=C,this.proveedorService=v,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.enviarLista=new i.EventEmitter,this.accion=null,this.es={},this.cargando=!1,this.apruebaTodos=!0,this.activar=!1,this.vistaFormulario=!1,this.invPedidosOrdenCompra=new Go.a,this.listadoMotivoOC=[],this.motivoOCSeleccionado=null,this.motivoOCCopia=null,this.proveedorCopia=new Uo.a,this.fechaActual=new Date,this.fechaEmision=null,this.invProductoEtiquetas=new xe.a,this.listadoEtiquetas=[],this.etiquetaSeleccionada={field:null,value:null},this.funcionesUsuario=[],this.filasTiempo=new D.a,this.emailProveedor=null,this.campoCostoRerefencia="",this.invPedidoTO=null,this.estilos={},this.isCollapsed=!0,this.isCollapseCliente=!0,this.listaInvPedidosDetalle=[],this.listadoResultado=[],this.ordenesDeCompra=[],this.columnDefs=[],this.noData=c.a.MSJ_NO_DATA,this.ordenDeCompra="",Ut.locale("es"),this.constantes=c.a,this.es=this.utilService.setLocaleDate(),this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999.99",minimumValue:"0"},this.configAutonumericRead=Object.assign({},this.configAutonumeric),this.configAutonumericRead.readOnly=!0,this.configAutonumeric6=Object.assign({},this.configAutonumeric),this.configAutonumeric6.decimalPlaces=6,this.configAutonumeric6.decimalPlacesRawValue=6,this.configAutonumeric6.decimalPlacesShownOnFocus=6,this.configAutonumericRead6=Object.assign({},this.configAutonumeric6),this.configAutonumericRead6.readOnly=!0}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),this.estilos={width:"100%",height:"calc(100vh - 420px)","min-height":"165px"},this.generarOCService.iniciarAtajos(this)},e.prototype.ngOnChanges=function(e){e.data&&(this.reiniciarValores(),this.iniciarFormulario())},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS),this.redimensionarColumnas()},e.prototype.unloadHandler=function(e){if(this.accion!==c.a.ACCION_EJECUTAR)return!0;e.returnValue=!1},e.prototype.onFocusout=function(e){"ocValorRetencion_1"===e.id&&this.seleccionarPrimerFila()},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmOrdenCompra?e.frmOrdenCompra.value:null)),e.detalleInicial=JSON.parse(JSON.stringify(e.listadoResultado?e.listadoResultado:null))},50)},e.prototype.collpase=function(){this.isCollapsed=!this.isCollapsed;var e="";e=this.invPedidosOrdenCompra.invCliente&&this.invPedidosOrdenCompra.invCliente.invClientePK.cliCodigo?this.collapseAmbos():this.isCollapsed?"415px":"280px",this.cambiarTamanioTabla(e)},e.prototype.collpaseCliente=function(){this.isCollapseCliente=!this.isCollapseCliente;var e=this.collapseAmbos();this.cambiarTamanioTabla(e)},e.prototype.collapseAmbos=function(){return this.isCollapsed&&this.isCollapseCliente?"610px":this.isCollapsed||this.isCollapseCliente?this.isCollapsed&&!this.isCollapseCliente?"475px":"480px":"310px"},e.prototype.cambiarTamanioTabla=function(e){this.estilos={width:"100%",height:"calc(100vh - "+e+")","min-height":"165px"}},e.prototype.reiniciarValores=function(){this.invPedidosOrdenCompra=new Go.a,this.listaInvPedidosDetalle=[],this.configuracion=new Bo.a,this.funcionesUsuario=[],this.activar=!1,this.frmTitulo="",this.invPedidoTO=null,this.vistaFormulario=!1,this.listadoEtiquetas=[],this.listadoResultado=[],this.filasTiempo=new D.a},e.prototype.iniciarFormulario=function(){this.empresaSeleccionada&&this.data&&this.data.accion&&(this.accion=this.data.accion,this.iniciarAgGrid(),c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion===c.a.ACCION_EJECUTAR&&this.data.invPedidosPK?this.traerConfiguracionPedidos():(this.data.invPedidosOrdenCompraPK,this.realizarAccion()))},e.prototype.traerConfiguracionPedidos=function(){this.cargando=!0,this.funcionesUsuario=[];var e={empresa:c.a.KEY_EMPRESA_SELECT,invPedidosMotivoPK:new Vo.a({pmEmpresa:this.data.invPedidosPK.pedEmpresa,pmCodigo:this.data.invPedidosPK.pedMotivo,pmSector:this.data.invPedidosPK.pedSector})};this.configuracionPedidoService.getListaInvPedidosConfiguracion(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarConfiguracionPedido=function(e){this.configuracion=e,this.funcionesUsuario=this.ordenPedidoService.establecerFuncionesUsuario(this.configuracion),this.cargando=!1,this.realizarAccion()},e.prototype.realizarAccion=function(){switch(this.accion){case c.a.ACCION_EJECUTAR:this.ejecutarInvPedidosCrearOrdenCompra();break;case c.a.ACCION_CONSULTAR:case c.a.ACCION_ANULAR:case c.a.ACCION_APROBAR:this.consultarOrdenCompra();break;case c.a.ACCION_CARRITO:this.consultarParaCarrito()}},e.prototype.consultarParaCarrito=function(){var e=this;this.cargando=!0;var t={detSecuencial:this.data.detSecuencial};this.api.post("todocompuWS/pedidosWebController/listarInvPedidosOrdenCompra",t,c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo&&t.extraInfo.listadoInvPedidosOrdenCompra&&t.extraInfo.listadoInvPedidosOrdenCompra.length>0?(e.ordenesDeCompra=t.extraInfo.listadoInvPedidosOrdenCompra,e.frmTitulo=c.a.PEDIDOS_ORDEN_COMPRA_CONSULTAR,e.vistaFormulario=!0,e.cambiarActivar()):e.toastr.warning(c.a.MSJ_DETALLE_NO_ASOCIADO,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.ejecutarInvPedidosCrearOrdenCompra=function(){this.ordenPedidoService.verificarPermiso(c.a.ACCION_EJECUTAR,this,!0)&&(this.cargando=!0,this.frmTitulo=c.a.PEDIDOS_ORDEN_COMPRA_GENERAR,this.obtenerDatosGenerarInvPedidosOrdenCompra())},e.prototype.consultarOrdenCompra=function(){this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this,!0)&&(this.cargando=!0,this.frmTitulo=this.accion+" "+c.a.TAG_ORDEN_COMPRA.toLowerCase()+" No. ",this.obtenerOrdenCompra())},e.prototype.obtenerDatosGenerarInvPedidosOrdenCompra=function(){var e=this;this.cargando=!0;var t={invPedidosPK:this.data.invPedidosPK};this.filasTiempo.iniciarContador(),this.ordenCompraService.obtenerDatosGenerarInvPedidosOrdenCompra(t,this,c.a.KEY_EMPRESA_SELECT).then(function(t){e.filasTiempo.finalizarContador(),t&&!t.listaInvPedidosOrdenCompraMotivoTO||0==t.listaInvPedidosOrdenCompraMotivoTO.length?e.ordenCompraService.mostrarSwalMasInformacion(c.a.MSJ_NO_MOTIVOS_ORDEN_COMPRA,e):t?e.formatearDatosParaGenerarOrdenCompra(t):e.cerrarFormulario()}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.formatearDatosParaGenerarOrdenCompra=function(e){e.fechaActual?this.fechaActual=new Date(e.fechaActual):new Date,e.listaInvPedidosOrdenCompraMotivoTO&&this.despuesDeListarInvPedidosOrdenCompraMotivoTO(e.listaInvPedidosOrdenCompraMotivoTO),e.invProductoEtiquetas&&this.despuesDeObtenerEtiquetas(e.invProductoEtiquetas),this.invPedidosOrdenCompra=e.invPedidosOrdenCompra?new Go.a(e.invPedidosOrdenCompra):new Go.a,this.invPedidosOrdenCompra.ocFechaHoraEntrega=e.invPedidosOrdenCompra.ocFechaHoraEntrega?new Date(e.invPedidosOrdenCompra.ocFechaHoraEntrega):new Date(e.fechaActual),this.listaInvPedidosDetalle=e.listaInvPedidosDetalle,this.resetearFormulario(),this.vistaFormulario=!0,this.cambiarActivar(),this.cargando=!1,this.invPedidosOrdenCompra.invCliente&&this.invPedidosOrdenCompra.invCliente.invClientePK.cliCodigo&&this.cambiarTamanioTabla("610px"),this.ordenDeCompra=e.ordenDeCompra,this.extraerValoresIniciales(),"0992879254001"===this.empresaSeleccionada.empRuc&&this.proveedorPorCedula("0992846151001")},e.prototype.resetearFormulario=function(){this.motivoOCSeleccionado=this.listadoMotivoOC.length>0?this.listadoMotivoOC[0]:null,this.proveedorCopia=new Uo.a,this.invPedidosOrdenCompra&&(this.invPedidosOrdenCompra.invProveedor=new Zo.a),this.listadoResultado=this.ordenCompraService.obtenerFormatoGenerarOrdenCompraDetalleList(this.listaInvPedidosDetalle,this.apruebaTodos),this.invPedidosOrdenCompra.ocCodigoTransaccional=this.utilService.generarCodigoAleatorio(c.a.KEY_EMPRESA_SELECT,new Date),this.invPedidosOrdenCompra.ocFechaEmision=this.fechaActual,this.generarOCService.focusProveedorCodigo(),this.accion===c.a.ACCION_EJECUTAR&&(this.etiquetaSeleccionada?this.establecerCostoReferencial(this.etiquetaSeleccionada.field,!0):this.toastr.warning(c.a.MSJ_INVALID_COSTO_REF))},e.prototype.guardarOrdenCompra=function(e){this.cargando=!0,this.generarOCService.validarAntesDeEnviar(e,this,this.gridApi)&&this.actualizarEmailProveedor()},e.prototype.actualizarEmailProveedor=function(){var e=this;if(this.motivoOCSeleccionado.ocmAprobacionAutomatica&&this.motivoOCSeleccionado.ocmNotificarProveedor&&(null===this.proveedorCopia.provEmailOrdenCompra||""===this.proveedorCopia.provEmailOrdenCompra)){var t={message:c.a.MSJ_NOTIFICAR_PROVEEDOR,confirmButtonText:c.a.MSJ_ACEPTAR,input:"email"};this.utilService.generarSwallInputText(t).then(function(t){t.value&&(e.emailProveedor=t.value,e.accion===c.a.ACCION_EJECUTAR?e.insertarOrdenCompra():e.realizarAprobacionOC())})}else this.accion===c.a.ACCION_EJECUTAR?this.insertarOrdenCompra():this.realizarAprobacionOC()},e.prototype.insertarOrdenCompra=function(){var e=this;this.motivoOCSeleccionado.ocmAprobacionAutomatica&&(this.invPedidosOrdenCompra.ocAprobada=!0,this.invPedidosOrdenCompra.usrAprueba=this.auth.getCodigoUser());var t={invPedidosOrdenCompra:this.ordenCompraService.formatearOrdenCompra(this.invPedidosOrdenCompra,this),invPedidosPK:this.data.invPedidosPK,listaInvPedidosDetalle:this.listaInvPedidosDetalle};this.api.post("todocompuWS/pedidosWebController/insertarInvPedidosOrdenCompra",t,c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===c.a.KEY_EXITO&&t.extraInfo?t.extraInfo.invPedidosOrdenCompraPK?(e.invPedidosOrdenCompra.invPedidosOrdenCompraPK=t.extraInfo.invPedidosOrdenCompraPK,e.invPedidoTO=t.extraInfo.invPedidosTO,e.listaInvPedidosDetalle=t.extraInfo.listaInvPedidosDetalle,e.invPedidosOrdenCompra.ocAprobada?e.notificarProveedor(t.operacionMensaje):(e.enviarNotificacionesAprobadores(e.invPedidosOrdenCompra),e.despuesDeInsertarOrdenDeCompra(t.operacionMensaje))):(e.cargando=!1,e.listaInvPedidosDetalle=t.extraInfo.listaInvPedidosDetalle,e.listaInvPedidosDetalle.length>0?(e.invPedidoTO=t.extraInfo.invPedidosTO,e.listadoResultado=e.ordenCompraService.obtenerFormatoGenerarOrdenCompraDetalleList(e.listaInvPedidosDetalle,!1)):(e.toastr.warning(c.a.MSJ_NO_GENERO_OC_FALTA_ITEMS,c.a.TAG_AVISO),e.invPedidoTO=t.extraInfo.invPedidosTO,e.enviarObjetoAListaCerrar())):(e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO),e.cargando=!1)}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.enviarNotificacionesAprobadores=function(e){if(this.accion===c.a.ACCION_EJECUTAR&&this.configuracion.listAprobadores.length>0&&this.motivoOCSeleccionado.ocmNotificarAprobador){var t=location.protocol+"//"+location.host+location.pathname+c.a.MSJ_NOTIFICACION_RUTA_ENLACE_APROBADOR,o={usuarioCorreo:this.ordenPedidoService.obtenerUsuariosEmail("Aprobador",this.configuracion),notificacion:c.a.MSJ_NOTIFICACION_APROBADOR_OC+e.invPedidosOrdenCompraPK.ocNumero+c.a.MSJ_NOTIFICACION_ACCEDER_ENLACE_APROBADOR_OC+'<a href="'+t+'">'+t+"</a>"};this.sistemaService.enviarNotificacionUsuario(o,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.notificarProveedor=function(e){var t=this;if(this.motivoOCSeleccionado&&this.motivoOCSeleccionado.ocmNotificarProveedor){this.cargando=!0;var o={invPedidosOrdenCompraPK:this.invPedidosOrdenCompra.invPedidosOrdenCompraPK,emailProveedor:this.emailProveedor};this.archivoService.completarInformacionReporte(o,this.empresaSeleccionada,c.a.KEY_EMPRESA_SELECT),this.api.post("todocompuWS/pedidosWebController/enviarPDFOrdenCompra",o,c.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.estadoOperacion!==c.a.KEY_EXITO&&(o.operacionMensaje=c.a.PEDIDOS_ERROR_NOTIFICACION+o.operacionMensaje),t.despuesDeInsertarOrdenDeCompra(e,o.operacionMensaje),t.cargando=!1}).catch(function(o){t.utilService.handleError(o,t),t.despuesDeInsertarOrdenDeCompra(e)})}else this.despuesDeInsertarOrdenDeCompra(e),this.cargando=!1},e.prototype.despuesDeInsertarOrdenDeCompra=function(e,t){t=t||"",this.listadoResultado=this.ordenCompraService.obtenerFormatoGenerarOrdenCompraDetalleList(this.listaInvPedidosDetalle,!1);var o=document.getElementById("Cantidad");o&&this.apruebaTodos&&o.click(),this.gridApi&&this.gridApi.setRowData(this.listadoResultado);var a=" [Orden de compra No.: "+new Wo.a(this.invPedidosOrdenCompra.invPedidosOrdenCompraPK).toString()+"]";this.preguntarImprimirOrdenCompra(e+a+"<br>"+t)},e.prototype.preguntarImprimirOrdenCompra=function(e){var t=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){var o={title:c.a.TOAST_CORRECTO,texto:e+"<br>"+c.a.MSJ_PREGUNTA_IMPRIMIR,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_IMPRIMIR+"'></i>  "+c.a.LABEL_IMPRIMIR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.imprimirOrdenCompra():t.noQuiereImprimir()})}else this.noQuiereImprimir()},e.prototype.noQuiereImprimir=function(){this.accion===c.a.ACCION_APROBAR?this.enviarObjetoAListaOrdenCompraCerrar():this.invPedidoTO&&this.invPedidoTO.pedejecutado?this.enviarObjetoAListaCerrar():this.resetearFormulario(),this.cargando=!1},e.prototype.imprimirOrdenCompra=function(){var e=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0))if(this.cargando=!0,this.invPedidosOrdenCompra.ocAprobada){var t={invPedidosOrdenCompraPK:this.invPedidosOrdenCompra.invPedidosOrdenCompraPK,nombreReporte:c.a.NOMBRE_REPORTE_ORDEN_COMPRA_APROBADA};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosOrdenCompra",t,this.empresaSeleccionada).then(function(t){e.cargando=!1,t._body.byteLength>0?(e.utilService.descargarArchivoPDF("OrdenCompra_"+e.utilService.obtenerHorayFechaActual()+".pdf",t),e.accionesDespuesDeImprimir()):(e.accionesDespuesDeImprimir(),e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO))}).catch(function(t){return e.utilService.handleError(t,e)})}else{t={invPedidosOrdenCompraPK:this.invPedidosOrdenCompra.invPedidosOrdenCompraPK,nombreReporte:c.a.NOMBRE_REPORTE_ORDEN_COMPRA};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosOrdenCompra",t,this.empresaSeleccionada).then(function(t){e.cargando=!1,t._body.byteLength>0?(e.utilService.descargarArchivoPDF("OrdenCompra_"+e.utilService.obtenerHorayFechaActual()+".pdf",t),e.accionesDespuesDeImprimir()):(e.accionesDespuesDeImprimir(),e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO))}).catch(function(t){return e.utilService.handleError(t,e)})}else this.cargando=!1,this.accionesDespuesDeImprimir()},e.prototype.accionesDespuesDeImprimir=function(){this.accion===c.a.ACCION_APROBAR?this.enviarObjetoAListaOrdenCompraCerrar():this.accion===c.a.ACCION_EJECUTAR&&this.invPedidoTO.pedejecutado?this.enviarObjetoAListaCerrar():this.accion===c.a.ACCION_EJECUTAR&&this.resetearFormulario(),this.cargando=!1},e.prototype.enviarObjetoAListaCerrar=function(){this.enviarLista.emit({objeto:this.invPedidoTO,accion:c.a.LST_ELIMINAR})},e.prototype.obtenerOrdenCompra=function(){var e=this;this.cargando=!0;var t={invPedidosOrdenCompraPK:this.data.invPedidosOrdenCompraPK};this.filasTiempo.iniciarContador(),this.ordenCompraService.obtenerDatosInvPedidosOrdenCompra(t,this,c.a.KEY_EMPRESA_SELECT).then(function(t){if(t){e.filasTiempo.finalizarContador(),e.invPedidosOrdenCompra=t.invPedidosOrdenCompra,e.fechaEmision=t.invPedidosOrdenCompra.ocFechaEmision,e.invPedidosOrdenCompra.ocFechaEmision=e.utilService.fomatearFechaString(t.invPedidosOrdenCompra.ocFechaEmision,"YYYY-MM-DD"),e.invPedidosOrdenCompra.ocFechaHoraEntrega=new Date(e.invPedidosOrdenCompra.ocFechaHoraEntrega),e.proveedorCopia=new Uo.a,e.proveedorCopia.provCodigo=e.invPedidosOrdenCompra.invProveedor.invProveedorPK.provCodigo,e.proveedorCopia.provRazonSocial=e.invPedidosOrdenCompra.invProveedor.provRazonSocial,e.motivoOCCopia=new jo.a({ocmCodigo:e.invPedidosOrdenCompra.invPedidosOrdenCompraMotivo.invPedidosOrdenCompraMotivoPK.ocmCodigo});var o=e.ordenCompraService.obtenerCampoCostoDesdeEtiqueta(e.invPedidosOrdenCompra.ocFormaPago);e.etiquetaSeleccionada.field=o,t.listaInvPedidosOrdenCompraMotivoTO&&e.despuesDeListarInvPedidosOrdenCompraMotivoTO(t.listaInvPedidosOrdenCompraMotivoTO),t.invProductoEtiquetas&&e.despuesDeObtenerEtiquetas(t.invProductoEtiquetas),e.listadoResultado=e.ordenCompraService.obtenerFormatoConsultaOrdenCompraDetalleList(e.invPedidosOrdenCompra.invPedidosOrdenCompraDetalleList),e.vistaFormulario=!0,e.cargando=!1,e.ordenDeCompra=t.ordenDeCompra,e.cambiarActivar(),e.pinnedBottomRowData[2].totalGeneral=e.invPedidosOrdenCompra.ocMontoTotal,e.pinnedBottomRowData[1].ocValorRetencion=e.invPedidosOrdenCompra.ocValorRetencion,e.pinnedBottomRowData[0].ocValorRetencion=e.pinnedBottomRowData[2].totalGeneral>0?e.pinnedBottomRowData[2].totalGeneral-e.pinnedBottomRowData[1].ocValorRetencion:0,e.extraerValoresIniciales(),e.invPedidosOrdenCompra.invCliente&&e.invPedidosOrdenCompra.invCliente.invClientePK.cliCodigo&&(e.estilos={width:"100%",height:"calc(100vh - 610px)","min-height":"165px"})}}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.anularOrdenCompra=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_ANULAR_ORDEN_COMPRA,this,!0)){var t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ANULAR_ORDEN_COMPRA,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ANULAR,cancelButtonText:c.a.MSJ_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0;var o={invPedidosOrdenCompraPK:e.invPedidosOrdenCompra.invPedidosOrdenCompraPK};e.api.post("todocompuWS/pedidosWebController/anularInvPedidosOrdenCompra",o,c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo?(e.toastr.success(t.operacionMensaje,c.a.TOAST_CORRECTO),e.invPedidosOrdenCompra.ocAnulado=!0,e.enviarObjetoAListaOrdenCompraCerrar()):e.toastr.warning(t.operacionMensaje,c.a.TOAST_ERROR),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}})}},e.prototype.aprobarOrdenCompra=function(){this.utilService.verificarPermiso(c.a.ACCION_APROBAR_ORDEN_COMPRA,this,!0)&&this.actualizarEmailProveedor()},e.prototype.realizarAprobacionOC=function(){var e=this;this.cargando=!0,this.invPedidosOrdenCompra.usrAprueba=this.auth.getCodigoUser();var t={invPedidosOrdenCompraPK:this.invPedidosOrdenCompra.invPedidosOrdenCompraPK};this.api.post("todocompuWS/pedidosWebController/aprobarInvPedidosOrdenCompra",t,c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo?(e.invPedidosOrdenCompra.ocAprobada=!0,e.notificarProveedor(t.operacionMensaje)):(e.toastr.warning(t.operacionMensaje,c.a.TOAST_ERROR),e.cargando=!1)}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.enviarObjetoAListaOrdenCompraCerrar=function(){this.invPedidosOrdenCompra.ocFechaEmision=this.fechaEmision,(this.accion===c.a.ACCION_APROBAR||this.accion===c.a.ACCION_EJECUTAR&&this.motivoOCSeleccionado.ocmAprobacionAutomatica)&&(this.invPedidosOrdenCompra.usrAprueba=this.auth.getNombrecompleto());var e=this.ordenCompraService.crearInvOrdenCompraTO(this.invPedidosOrdenCompra);this.enviarLista.emit({objeto:e,accion:c.a.LST_ACTUALIZAR})},e.prototype.buscarProveedor=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.generarOCService.esValidoProveedor(this.proveedorCopia,this.invPedidosOrdenCompra)&&this.accion===c.a.ACCION_EJECUTAR)if(this.invPedidosOrdenCompra.invProveedor.invProveedorPK.provCodigo&&this.invPedidosOrdenCompra.invProveedor.invProveedorPK.provCodigo.length>0){var o=this.invPedidosOrdenCompra.invProveedor.invProveedorPK.provCodigo.toUpperCase(),a={empresa:c.a.KEY_EMPRESA_SELECT,categoria:this.data.catCodigo?this.data.catCodigo:null,inactivos:!1,busqueda:o};e.srcElement.blur(),e.preventDefault();var i=this.modalService.open(n.a,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.result.then(function(e){e&&(t.proveedorCopia=new Uo.a(e),t.invPedidosOrdenCompra.invProveedor.invProveedorPK.provCodigo=t.proveedorCopia.provCodigo,t.invPedidosOrdenCompra.invProveedor.invProveedorPK.provEmpresa=t.proveedorCopia.empCodigo,t.actualizarFilas(),t.focusedCantidad(0))},function(){t.actualizarFilas(),t.generarOCService.focusProveedorCodigo()})}else this.toastr.info(c.a.MSJ_ENTERTOMODAL,c.a.TAG_AVISO)},e.prototype.validarProveedor=function(){this.proveedorCopia.provCodigo!==this.invPedidosOrdenCompra.invProveedor.invProveedorPK.provCodigo&&(this.proveedorCopia=new Uo.a,this.invPedidosOrdenCompra.invProveedor.invProveedorPK.provCodigo=null)},e.prototype.proveedorPorCedula=function(e){this.cargando=!0;var t={busqueda:e,categoria:null,empresa:c.a.KEY_EMPRESA_SELECT,inactivos:!1};this.proveedorService.listarInvProveedorTO(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvProveedorTO=function(e){this.cargando=!1,this.proveedorCopia=new Uo.a(e[0]),this.invPedidosOrdenCompra.invProveedor.invProveedorPK.provCodigo=this.proveedorCopia.provCodigo,this.invPedidosOrdenCompra.invProveedor.invProveedorPK.provEmpresa=this.proveedorCopia.empCodigo,this.actualizarFilas(),this.focusedCantidad(0)},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!0,vistaListado:!1,vistaFormulario:!1,accion:this.accion})},e.prototype.cancelarAccion=function(){var e=this;if(this.accion===c.a.ACCION_CONSULTAR||this.accion===c.a.ACCION_CARRITO)this.cerrarFormulario();else if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmOrdenCompra)&&this.ordenPedidoService.puedoCancelarFormularioDetalle(this.detalleInicial,this.listadoResultado))this.enviarCancelar.emit();else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.cerrarFormulario()})}},e.prototype.cerrarFormulario=function(){this.cargando=!1,this.enviarCancelar.emit({accion:this.accion})},e.prototype.ejecutarAccion=function(e,t){"verKardex"===t&&this.buscarKardex(e)},e.prototype.buscarKardex=function(e){var t=this;if(e.proCodigoPrincipal&&e.proCodigoPrincipal.length>0){var o=new Date(this.utilService.obtenerFechaInicioMes());o.setMonth(o.getMonth()-1);var a={empresa:c.a.KEY_EMPRESA_SELECT,bodega:null,producto:e.proCodigoPrincipal,desde:o,hasta:this.utilService.formatearDateToStringDDMMYYYY(this.utilService.obtenerFechaFinMes()),promedio:c.a.KEY_KARDEX_PROMEDIO,isModal:!0},i=this.modalService.open(eo,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.componentInstance.datos={vista:"produccion",empresaSeleccionada:this.empresaSeleccionada},i.componentInstance.isModal=!0,i.result.then(function(){t.actualizarFilas()},function(){t.actualizarFilas()})}else this.toastr.info(c.a.MSJ_SELECCIONE_PRODUCTO,c.a.TOAST_INFORMACION)},e.prototype.exportarOrdenCompra=function(){if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var e={invPedidosOrdenCompraPK:this.invPedidosOrdenCompra.invPedidosOrdenCompraPK};this.generarOCService.exportarOrdenCompra(e,this,this.empresaSeleccionada)}},e.prototype.configurarEtiquetas=function(){var e=this,t=this.modalService.open(ao.a,{size:"lg",backdrop:"static"});t.componentInstance.empresaSeleccionada=this.empresaSeleccionada,t.componentInstance.accion=c.a.ACCION_CREAR,t.componentInstance.pedidos=!0,t.result.then(function(t){e.despuesDeObtenerEtiquetas(t)},function(){})},e.prototype.establecerPrecioReferencial=function(){var e=this;if(this.etiquetaSeleccionada&&this.etiquetaSeleccionada.field&&this.etiquetaSeleccionada.field.trim().length>0)if(this.motivoOCSeleccionado&&this.motivoOCSeleccionado.ocmCostoFijo)this.establecerCostoReferencial(this.etiquetaSeleccionada.field,!0);else{var t={title:c.a.TOAST_ADVERTENCIA,texto:c.a.MSJ_PREGUNTA_COSTOS,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){e.etiquetaSeleccionada&&e.establecerCostoReferencial(e.etiquetaSeleccionada.field,!!t)})}else this.toastr.warning(c.a.MSJ_NO_ITEM_VALIDO,c.a.TAG_AVISO)},e.prototype.establecerCostoReferencial=function(e,t){var o=this;if(this.gridApi){this.campoCostoRerefencia=this.ordenPedidoService.obtenerCampoDesdeReferencia(e);var a=[],i=0;this.gridApi.forEachNodeAfterFilterAndSort(function(e){var r=e.data,n=o.utilService.redondearNDecimales(r[o.campoCostoRerefencia],6);r.detPrecioReferencial=n,t&&(r.detPrecioReal=n),a.push(r);var s=r.detCantidad*r.detPrecioReal;i+=s}),this.pinnedBottomRowData[0].ocValorRetencion=i,this.accion===c.a.ACCION_EJECUTAR&&(this.invPedidosOrdenCompra.ocValorRetencion=i,this.pinnedBottomRowData[1].ocValorRetencion=.01*i,this.pinnedBottomRowData[2].totalGeneral=this.pinnedBottomRowData[0].ocValorRetencion-this.pinnedBottomRowData[1].ocValorRetencion),this.listadoResultado=a,this.gridApi.updateRowData({update:a}),this.refreshGrid()}},e.prototype.terminadoEditar=function(e){if(e&&e.colDef&&"detPrecioReal"===e.colDef.field||"detCantidad"===e.colDef.field){if("detCantidad"===e.colDef.field){var t=e.data.detCantidadAprobada-e.data.detCantidadAdquirida;e.data.detCantidad>t&&(e.data.detCantidad=t)}this.calcularTotal()}"ocValorRetencion"===e.colDef.field&&this.calcularTotalCambiandoRetencion()},e.prototype.iniciarAgGrid=function(){this.accion===c.a.ACCION_CARRITO?this.columnDefs=this.generarOCService.generarColumnasOrdenCompraDetalleConsulta():this.columnDefs=this.generarOCService.generarColumnasOrdenCompraDetalle(this,this.accion),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={toolTip:pe.a,numericEditor:zo.a,inputEditor:Jo.a,pinnedCell:Ko.a,checkEditor:Yo.a},this.pinnedBottomRowData=this.generarOCService.generarPinnedBottonRowData(),this.rowClassRules={"ag-footer-pinned":function(e){return!!e.node.rowPinned}},this.accion===c.a.ACCION_EJECUTAR&&this.calcularTotal()},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas(),this.gridApi.sizeColumnsToFit(),this.accion===c.a.ACCION_EJECUTAR&&(this.calcularTotal(),this.listadoEtiquetas.length>0?this.etiquetaSeleccionada?this.establecerCostoReferencial(this.etiquetaSeleccionada.field,!0):this.toastr.warning(c.a.MSJ_INVALID_COSTO_REF):this.etiquetaSeleccionada=null),this.generarOCService.focusProveedorCodigo()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.focusedCantidad=function(e){var t=this;setTimeout(function(){t.cantidadFocusAndEditingCell(e)},50)},e.prototype.filaFocused=function(e){if(!e.rowPinned){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null}},e.prototype.cambiarEstadoCheckCabecera=function(e){this.apruebaTodos=e,this.apruebaTodos?this.gridApi.forEachNode(function(e){e.data.detCantidad=e.data.detCantidadAprobada-e.data.detCantidadAdquirida}):this.gridApi.forEachNode(function(e){e.data.detCantidad=0}),this.calcularTotal()},e.prototype.cantidadFocusAndEditingCell=function(e){this.gridApi.setFocusedCell(e,"detCantidad"),this.gridApi.startEditingCell({rowIndex:e,colKey:"detCantidad"})},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.calcularTotal=function(){var e=0;this.gridApi&&(this.gridApi.forEachNode(function(t){var o=t.data.detCantidad*t.data.detPrecioReal;e+=o}),this.pinnedBottomRowData[0].ocValorRetencion=e,this.invPedidosOrdenCompra.ocValorRetencion=.01*e,this.pinnedBottomRowData[1].ocValorRetencion=this.invPedidosOrdenCompra.ocValorRetencion,this.pinnedBottomRowData[2].totalGeneral=this.pinnedBottomRowData[0].ocValorRetencion-this.pinnedBottomRowData[1].ocValorRetencion,this.refreshGrid())},e.prototype.calcularTotalCambiandoRetencion=function(){var e=0;this.gridApi&&(this.gridApi.forEachNode(function(t){var o=t.data.detCantidad*t.data.detPrecioReal;e+=o}),this.pinnedBottomRowData[0].ocValorRetencion=e,this.invPedidosOrdenCompra.ocValorRetencion=this.pinnedBottomRowData[1].ocValorRetencion,this.pinnedBottomRowData[2].totalGeneral=this.pinnedBottomRowData[0].ocValorRetencion-this.pinnedBottomRowData[1].ocValorRetencion,this.refreshGrid())},e.prototype.listarMotivosOC=function(){this.cargando=!0,this.listadoMotivoOC=[],this.motivoOCCopia=this.motivoOCSeleccionado,this.motivoOCSeleccionado=null;var e={empresa:c.a.KEY_EMPRESA_SELECT,sector:this.data.secCodigo};this.motivoOrdenCompraService.listarInvPedidosOrdenCompraMotivoTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvPedidosOrdenCompraMotivoTO=function(e){this.listadoMotivoOC=e,this.motivoOCSeleccionado=this.utilService.getObjetoSeleccionadoComboObligatorio(this.listadoMotivoOC,this.motivoOCCopia,"ocmCodigo"),this.cargando=!1},e.prototype.obtenerEtiquetas=function(){this.listadoEtiquetas=[],this.etiquetaSeleccionada=null;var e={empresa:c.a.KEY_EMPRESA_SELECT};this.etiquetasService.obtenerEtiquetas(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerEtiquetas=function(e){var t=this;for(var o in this.invProductoEtiquetas=new xe.a(e),this.invProductoEtiquetas)o.toString().indexOf("ecosto")>=0&&""!=this.invProductoEtiquetas[o]&&this.listadoEtiquetas.push({field:o,value:this.invProductoEtiquetas[o]});this.listadoEtiquetas.length>0?(this.etiquetaSeleccionada=this.etiquetaSeleccionada&&this.etiquetaSeleccionada.field?this.listadoEtiquetas.find(function(e){return e.field===t.etiquetaSeleccionada.field}):this.listadoEtiquetas[0],this.establecerCostoReferencial(this.etiquetaSeleccionada.field,!0)):this.etiquetaSeleccionada=null},e.prototype.inicializarCostoReferencial=function(e,t){if(e&&t)return e.field===t.field},aa([Object(i.Input)(),ia("design:type",Object)],e.prototype,"data",void 0),aa([Object(i.Input)(),ia("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),aa([Object(i.Output)(),ia("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),aa([Object(i.Output)(),ia("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),aa([Object(i.Output)(),ia("design:type",i.EventEmitter)],e.prototype,"enviarLista",void 0),aa([Object(i.ViewChild)("frmOrdenCompra"),ia("design:type",I.NgForm)],e.prototype,"frmOrdenCompra",void 0),aa([Object(i.HostListener)("window:resize",["$event"]),ia("design:type",Function),ia("design:paramtypes",[]),ia("design:returntype",void 0)],e.prototype,"onResize",null),aa([Object(i.HostListener)("window:beforeunload",["$event"]),ia("design:type",Function),ia("design:paramtypes",[Event]),ia("design:returntype",void 0)],e.prototype,"unloadHandler",null),aa([Object(i.HostListener)("focusout",["$event.target"]),ia("design:type",Function),ia("design:paramtypes",[Object]),ia("design:returntype",void 0)],e.prototype,"onFocusout",null),e=aa([Object(i.Component)({selector:"app-formulario-generar-orden-compra",template:o("1Avo")}),ia("design:paramtypes",[p.a,h.a,ta,T.b,K.a,L.a,u.b,qo.a,Ho.a,Xo.a,le.a,ko.a,bo.a,qt.a,oa.a])],e)}(),na=o("3IAp"),sa=o("QL9M"),ca=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},la=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},da=function(){function e(e,t,o,a,r,n){this.toastr=e,this.atajoService=t,this.utilService=o,this.filasService=a,this.ordenCompraService=r,this.archivoService=n,this.parametrosBusqueda=null,this.empresaSeleccionada=new l.a,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.opciones=[],this.es={},this.activar=!1,this.funcionesUsuario=[],this.cargando=!1,this.accion=null,this.vistaListado=!1,this.listadoResultado=[],this.objetoSeleccionado=new sa.a,this.invPedido=new na.a,this.dataFormularioCompra=null,this.emailProveedor=null,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new D.a,this.rowClassRules={},Ut.locale("es"),this.constantes=c.a,this.es=o.setLocaleDate()}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),this.iniciarAtajos()},e.prototype.ngOnChanges=function(e){if(e.parametrosBusqueda&&(this.reiniciarValores(),this.empresaSeleccionada&&this.parametrosBusqueda)){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo;var t=this.parametrosBusqueda.aprobacionAutomatica;this.filtroGlobal="",this.buscarOrdenesCompra(),this.iniciarAgGrid(t)}e.operacion&&this.operacionEnLista(this.operacion)},e.prototype.iniciarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivarOrdenCompra");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimir");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CONSULTAR,function(t){return!e.dataFormularioCompra&&e.objetoSeleccionado&&e.consultarOrdenCompra(e.objetoSeleccionado),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EDITAR,function(t){return!e.dataFormularioCompra&&e.objetoSeleccionado&&e.editarOrdenCompra(e.objetoSeleccionado),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ANULAR,function(t){return!e.dataFormularioCompra&&e.objetoSeleccionado&&e.anularOrdenCompra(e.objetoSeleccionado),!1}))},e.prototype.reiniciarValores=function(){this.activar=!1,this.accion=null,this.dataFormularioCompra=null,this.vistaListado=!1},e.prototype.buscarOrdenesCompra=function(){this.cargando=!0,this.limpiarResultado(),this.parametrosBusqueda.fechaInicio&&this.parametrosBusqueda.fechaFin&&(this.parametrosBusqueda.fechaInicio=this.utilService.formatearDateToStringDDMMYYYY(this.parametrosBusqueda.fechaInicio),this.parametrosBusqueda.fechaFin=this.utilService.formatearDateToStringDDMMYYYY(this.parametrosBusqueda.fechaFin)),this.filasTiempo.iniciarContador(),this.ordenCompraService.listarOrdenesCompra(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarOrdenesCompra=function(e){this.filasTiempo.finalizarContador(),this.listadoResultado=e||[],this.filasTiempo.setFilas(this.listadoResultado.length),this.actualizarFilas(),this.vistaListado=!0,this.cargando=!1},e.prototype.limpiarResultado=function(){this.vistaListado=!1,this.listadoResultado=[],this.objetoSeleccionado=new sa.a,this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.imprimir=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t=this.utilService.getAGSelectedData(this.gridApi);if(0===t.length)this.toastr.info(c.a.MSJ_NO_ITEM_SELECCIONADO,c.a.TOAST_INFORMACION),this.cargando=!1;else{var o=this.utilService.enviarListadoOrdenCompraSeleccionados(t.slice());if(o.conStatus)this.cargando=!1,this.toastr.warning(o.mensaje,c.a.TAG_AVISO);else{var a={listaInvPedidosOrdenCompraTO:t,nombreReporte:c.a.NOMBRE_REPORTE_ORDEN_COMPRA_LISTADO};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosOrdenCompraTO",a,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoOrdenesCompra_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_NO_DATA),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}}}},e.prototype.imprimirIndividual=function(){if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e=this.utilService.getAGSelectedData(this.gridApi),t=this.ordenCompraService.obtenerListaOrdenCompraSeleccionadoIndividual(e);if(0===t.length)this.toastr.info(c.a.MSJ_NO_ITEM_SELECCIONADO,c.a.TOAST_INFORMACION),this.cargando=!1;else{var o=this.utilService.enviarListadoOrdenCompraSeleccionados(e.slice());o.conStatus?(this.cargando=!1,this.toastr.warning(o.mensaje,c.a.TAG_AVISO)):o.listadoResultado.length>0&&this.irAImprimir("OrdenesCompra_","todocompuWS/pedidosWebController/generarReporteInvPedidosOrdenCompraLote",c.a.NOMBRE_REPORTE_ORDEN_COMPRA_APROBADA_LOTE,t)}}},e.prototype.imprimirConClickDerecho=function(){if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e=[],t=new Wo.a(this.objetoSeleccionado);e.push(t),this.objetoSeleccionado.ocAprobada?this.irAImprimir("OrdenesCompra_","todocompuWS/pedidosWebController/generarReporteInvPedidosOrdenCompraLote",c.a.NOMBRE_REPORTE_ORDEN_COMPRA_APROBADA,e):this.irAImprimir("OrdenesCompra_","todocompuWS/pedidosWebController/generarReporteInvPedidosOrdenCompraLote",c.a.NOMBRE_REPORTE_ORDEN_COMPRA,e)}},e.prototype.irAImprimir=function(e,t,o,a){var i=this;if(0===a.length)this.toastr.info(c.a.MSJ_NO_ITEM_SELECCIONADO,c.a.TOAST_INFORMACION),this.cargando=!1;else{var r={listaInvPedidosOrdenCompraPK:a,nombreReporte:o};this.archivoService.postPDF(t,r,this.empresaSeleccionada).then(function(t){t?i.utilService.descargarArchivoPDF(e+i.utilService.obtenerHorayFechaActual()+".pdf",t):i.toastr.warning(c.a.MSJ_NO_DATA),i.cargando=!1}).catch(function(e){return i.utilService.handleError(e,i)})}},e.prototype.exportar=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t=this.utilService.getAGSelectedData(this.gridApi);if(0===t.length)this.toastr.info(c.a.MSJ_NO_ITEM_SELECCIONADO,c.a.TOAST_INFORMACION),this.cargando=!1;else{var o={listaInvPedidosOrdenCompraTO:t};this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidosOrdenCompraTO",o,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoOrdenesCompra_"):e.toastr.warning(c.a.MSJ_NO_DATA),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}}},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this),o=this.utilService.verificarPermiso(c.a.ACCION_NOTIFICAR_PROVEEDOR,this)&&!this.objetoSeleccionado.ocAnulado&&this.objetoSeleccionado.ocAprobada&&this.objetoSeleccionado.ocmNotificarProveedor,a=this.utilService.verificarPermiso(c.a.ACCION_ANULAR_ORDEN_COMPRA,this)&&!this.objetoSeleccionado.ocAnulado,i=this.utilService.verificarPermiso(c.a.ACCION_APROBAR_ORDEN_COMPRA,this)&&!this.objetoSeleccionado.ocAnulado&&!this.objetoSeleccionado.ocAprobada&&this.objetoSeleccionado.ocPuedeAprobar,r=this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this)&&!this.objetoSeleccionado.ocAnulado;this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!t,command:function(o){return t?e.consultarOrdenCompra(e.objetoSeleccionado):null}},{label:c.a.ACCION_NOTIFICAR_PROVEEDOR,icon:c.a.ICON_NOTIFICAR,disabled:!o,command:function(t){return o?e.notificarOrdenCompra(e.objetoSeleccionado):null}},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!a,command:function(t){return a?e.anularOrdenCompra(e.objetoSeleccionado):null}},{label:c.a.ACCION_APROBAR,icon:c.a.ICON_APROBAR,disabled:!i,command:function(t){return a?e.aprobarOrdenCompra(e.objetoSeleccionado):null}},{label:c.a.ACCION_IMPRIMIR,icon:c.a.ICON_IMPRIMIR,disabled:!r,command:function(t){return r?e.imprimirConClickDerecho():null}}]},e.prototype.consultarOrdenCompra=function(e){this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this,!0)&&(this.accion=c.a.ACCION_CONSULTAR,this.dataFormularioCompra={accion:this.accion,invPedidosOrdenCompraPK:new Wo.a(e),vista:"ordencompra"})},e.prototype.editarOrdenCompra=function(e){this.utilService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)&&(this.accion=c.a.ACCION_EDITAR,this.dataFormularioCompra={accion:this.accion,invPedidosOrdenCompraPK:new Wo.a(e),vista:"ordencompra"})},e.prototype.notificarOrdenCompra=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_APROBAR,this,!0)){var o={title:c.a.TOAST_INFORMACION,texto:c.a.MSJ_NOTIFICACION_PROVEEDOR,type:c.a.SWAL_INFO,confirmButtonText:c.a.TAG_ENVIAR,cancelButtonText:c.a.MSJ_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o)if(null===e.provEmailOrdenCompra||""===e.provEmailOrdenCompra){var a={message:c.a.MSJ_NOTIFICAR_PROVEEDOR,confirmButtonText:c.a.MSJ_ACEPTAR,input:"email",inputValidator:c.a.MSJ_VALID_EMAIL,showCancelButton:!0};t.utilService.generarSwallInputText(a).then(function(o){o.value&&(t.emailProveedor=o.value,t.notificarProveedor(e))})}else t.notificarProveedor(e)})}},e.prototype.anularOrdenCompra=function(e){this.utilService.verificarPermiso(c.a.ACCION_ANULAR_ORDEN_COMPRA,this,!0)&&(this.accion=c.a.ACCION_ANULAR,this.dataFormularioCompra={accion:this.accion,invPedidosOrdenCompraPK:new Wo.a(e),vista:"ordencompra"})},e.prototype.aprobarOrdenCompra=function(e){this.utilService.verificarPermiso(c.a.ACCION_APROBAR_ORDEN_COMPRA,this,!0)&&(this.accion=c.a.ACCION_APROBAR,this.dataFormularioCompra={accion:this.accion,invPedidosOrdenCompraPK:new Wo.a(e),vista:"ordencompra"})},e.prototype.notificarProveedor=function(e){if(e.ocmNotificarProveedor){this.cargando=!0;var t={invPedidosOrdenCompraPK:new Wo.a(e),emailProveedor:this.emailProveedor};this.ordenCompraService.enviarNotificacionProveedor(t,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeEnviarNotificacion=function(e){e&&e.estadoOperacion===c.a.KEY_EXITO?this.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO):this.toastr.warning(e.operacionMensaje,c.a.TOAST_ERROR)},e.prototype.cancelar=function(){this.actualizarFilas(),this.dataFormularioCompra=null,this.vistaListado=!0,this.accion=null,this.invPedido=new na.a,this.enviarCancelar.emit()},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!1})},e.prototype.cambiarActivarFormulario=function(e){this.vistaListado=e.vistaListado;var t={activar:e.activar,deshabilitarOpciones:!0};this.enviarActivar.emit(t)},e.prototype.operacionEnLista=function(e){switch(e.accion){case c.a.LST_INSERTAR:this.refrescarTabla(e.objeto,"I");case c.a.LST_ACTUALIZAR:this.refrescarTabla(e.objeto,"U");break;case c.a.LST_LIMPIAR:this.limpiarResultado()}this.cancelar()},e.prototype.iniciarAgGrid=function(e){this.columnDefs=this.ordenCompraService.generarColumnasOrdenCompra(e),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a,inputEstado:y.a,iconoEstado:Vt.a},this.components={},this.rowClassRules={"fila-pendiente":function(e){return"PENDIENTE"==e.data.estado}}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.getDataSelected=function(){return this.utilService.getAGSelectedData(this.gridApi)},e.prototype.onCellDoubleClicked=function(e){this.consultarOrdenCompra(e.data)},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoResultado.length>0)(a=this.listadoResultado.slice()).unshift(e),this.listadoResultado=a;break;case"U":var o=this.listadoResultado.findIndex(function(t){return t.ocNumero===e.ocNumero});(a=this.listadoResultado.slice())[o]=e,this.listadoResultado=a;break;case"D":var a;o=this.listadoResultado.findIndex(function(t){return t.ocNumero===e.ocNumero});(a=this.listadoResultado.slice()).splice(o,1),this.listadoResultado=a}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},ca([Object(i.ViewChild)("menuOpciones"),la("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),ca([Object(i.Input)(),la("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),ca([Object(i.Input)(),la("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),ca([Object(i.Input)(),la("design:type",Object)],e.prototype,"operacion",void 0),ca([Object(i.Output)(),la("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),ca([Object(i.Output)(),la("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),ca([Object(i.ViewChild)("excelDownload"),la("design:type",Object)],e.prototype,"excelDownload",void 0),ca([Object(i.HostListener)("window:resize",["$event"]),la("design:type",Function),la("design:paramtypes",[]),la("design:returntype",void 0)],e.prototype,"onResize",null),e=ca([Object(i.Component)({selector:"app-orden-compra-listado",template:o("zeZ/")}),la("design:paramtypes",[u.b,S.HotkeysService,h.a,L.a,qo.a,le.a])],e)}(),pa=o("n/Mz"),ua=o("IGT0"),ha=o("XYH7"),ma=o("PSD3"),Ca=o.n(ma),va=function(){function e(e){this.nombre=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.nombre=e.nombre?e.nombre:this.nombre},e}(),Aa=o("jC/Q"),fa=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ga=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ba=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Oa=function(){function e(e,t,o,a,r,n,s,l,d,p,u){this.api=e,this.utilService=t,this.archivoService=o,this.atajoService=a,this.toastr=r,this.filasService=n,this.authService=s,this.configuracionPedidoService=l,this.ordenPedidoService=d,this.sistemaService=p,this.modalService=u,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.enviarLista=new i.EventEmitter,this.accion=null,this.es={},this.cargando=!1,this.activar=!1,this.vistaFormulario=!1,this.invPedidos=new na.a,this.pedidoEstado="",this.fechaActual=new Date,this.funcionesUsuario=[],this.filasTiempo=new D.a,this.listadoResultado=[],this.objetoSeleccionado=null,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.isCollapsed=!0,this.estilos={},this.parametro={},this.isCollapseCliente=!0,this.clienteCodigo=null,this.contactoPredeterminado=null,this.lugarEntrega=null,this.arrayContacto=[],this.arrayContactoFiltrada=[],this.arrayContactoLugarEntrega=[],this.arrayContactoLugarEntregaFiltrada=[],this.listaSectores=[],this.listaMotivos=[],this.mostrarMotivoSeleccionar=!1,this.texto="",this.constantes=c.a,this.arrayContacto=[],Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"99999999.99",minimumValue:"0"}}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS),this.iniciarAtajos(),this.accion===c.a.ACCION_CREAR&&(this.iniciarSectorMotivoDefault(),this.mostrarMotivoSeleccionar=!0),this.accion===c.a.ACCION_MAYORIZAR&&this.obtenerFechaServidor(),this.estilos={width:"100%",height:this.mostrarMotivoSeleccionar?"calc(100vh - 415px)":"calc(100vh - 335px)","min-height":"135px"}},e.prototype.ngOnChanges=function(e){e.data&&(this.reiniciarValores(),this.iniciarFormulario())},e.prototype.unloadHandler=function(e){if(this.accion==c.a.ACCION_CONSULTAR)return!0;e.returnValue=!1},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmOrdenPedido?e.frmOrdenPedido.value:null)),e.detalleInicial=JSON.parse(JSON.stringify(e.listadoResultado?e.listadoResultado:null))},50)},e.prototype.iniciarAtajos=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFormOrdenPedido");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardarOrdenPedido");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirOrdenPedido");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarOrdenPedido");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ELIMINAR,function(){var e=document.getElementById("btnEliminarOrdenPedido");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ANULAR,function(){var e=document.getElementById("btnAnularOrdenPedido");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarOrdenPedido");return e&&e.click(),!1}))},e.prototype.reiniciarValores=function(){this.motivoSeleccionado=new ua.a,this.configuracion=new Bo.a,this.funcionesUsuario=[],this.activar=!1,this.frmTitulo="",this.vistaFormulario=!1},e.prototype.iniciarFormulario=function(){this.empresaSeleccionada&&this.data&&this.data.accion&&this.data.invPedidosPK&&(c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.data.accion,this.iniciarAgGrid(),this.obtenerDatosParaGenerarOP())},e.prototype.obtenerDatosParaGenerarOP=function(){var e=this;this.cargando=!0;var t=new Vo.a;t.pmEmpresa=this.data.invPedidosPK.pedEmpresa,t.pmCodigo=this.data.invPedidosPK.pedMotivo,t.pmSector=this.data.invPedidosPK.pedSector;var o={invPedidosMotivoPK:t};this.ordenPedidoService.obtenerDatosParaGenerarOP(o,this,c.a.KEY_EMPRESA_SELECT).then(function(t){t?e.formatearDatosIniciarAccion(t):e.cerrarFormulario()}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.cerrarFormulario=function(){this.enviarCancelar.emit()},e.prototype.formatearDatosIniciarAccion=function(e){this.fechaActual=new Date(e.fechaActual),this.fechaActual.setUTCSeconds(0),this.invPedidos.pedFechaEmision=this.obtenerFechaEmision(e.fechaActual),this.configuracion=e.invPedidosConfiguracionTO,this.funcionesUsuario=this.ordenPedidoService.establecerFuncionesUsuario(this.configuracion),this.motivoSeleccionado=new ua.a(e.invPedidosMotivo),this.realizarAccion()},e.prototype.establecerResponsables=function(){this.usrRegistradorNombre=this.data.invPedidoTO?this.data.invPedidoTO.registrador:"S/D",this.usrAprobadorNombre=this.invPedidos.pedAprobado&&this.data.invPedidoTO?this.data.invPedidoTO.aprobador:"S/D",this.usrEjecutorNombre=this.invPedidos.pedEjecutado&&this.data.invPedidoTO?this.data.invPedidoTO.ejecutor:"S/D"},e.prototype.validarAntesDeEnviar=function(e){var t=!0,o=this.validarDetalle(),a=this.getRowData();return this.utilService.establecerFormularioTocado(e)&&e&&e.valid&&o?0===a.length&&(this.toastr.error(c.a.MSJ_INGRESE_DATOS_DETALLE,c.a.MSJ_TITULO_INVALIDOS),t=!1):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),t=!1),this.invPedidos.pedFechaEmision>this.invPedidos.pedFechaHoraEntrega&&(e.controls.pedidoFechaHora.markAsTouched(),e.controls.pedidoFechaHora.updateValueAndValidity(),t&&this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),t=!1),t&&(this.invPedidos.invPedidosDetalleList=a),this.cargando=t,t},e.prototype.enviarNotificaciones=function(e){var t=location.protocol+"//"+location.host+location.pathname;switch(this.accion){case c.a.ACCION_CREAR:if(this.configuracion.listAprobadores.length>0){if(this.funcionesUsuario.indexOf("Registrador")>-1&&!this.motivoSeleccionado.pmAprobacionAutomatica&&this.motivoSeleccionado.pmNotificarAprobador&&!e.pedPendiente){var o=this.ordenPedidoService.obtenerUsuariosEmail("Aprobador",this.configuracion),a=t+c.a.MSJ_NOTIFICACION_RUTA_ENLACE_APROBADOR,i={usuarioCorreo:o,notificacion:c.a.MSJ_NOTIFICACION_APROBADOR+e.invPedidosPK.pedNumero+c.a.MSJ_NOTIFICACION_ACCEDER_ENLACE_APROBADOR+'<a href="'+a+'">'+a+"</a>"};this.sistemaService.enviarNotificacionUsuario(i,this,c.a.KEY_EMPRESA_SELECT)}if(this.funcionesUsuario.indexOf("Registrador")>-1&&this.funcionesUsuario.indexOf("Aprobador")>-1&&this.motivoSeleccionado.pmAprobacionAutomatica&&e.pedAprobado&&this.motivoSeleccionado.pmNotificarEjecutor&&!e.pedPendiente){var r=this.ordenPedidoService.obtenerUsuariosEmail("Ejecutor",this.configuracion);a=t+c.a.MSJ_NOTIFICACION_RUTA_ENLACE_EJECUTAR,i={usuarioCorreo:r,notificacion:c.a.MSJ_NOTIFICACION_EJECUTOR+e.invPedidosPK.pedNumero+c.a.MSJ_NOTIFICACION_ACCEDER_ENLACE_EJECUTAR+NaN+a+'">'+a+"</a>"};this.sistemaService.enviarNotificacionUsuario(i,this,c.a.KEY_EMPRESA_SELECT)}}}},e.prototype.preguntarImprimirOrdenPedido=function(e){var t=this;if(this.motivoSeleccionado.pmAprobacionAutomatica&&this.funcionesUsuario.indexOf("Ejecutor")>-1&&!this.invPedidos.pedPendiente&&!this.invPedidos.pedAnulado&&this.invPedidos.pedAprobado)Ca()({title:c.a.TOAST_CORRECTO,type:"success",html:e+"<br>\xbfDesea generar la orden de compra?",showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:"<i class='"+c.a.ICON_IMPRIMIR+"'></i>  "+c.a.LABEL_IMPRIMIR,confirmButtonColor:"#416273"}).then(function(e){if(e.value)t.accion=c.a.ACCION_EJECUTAR,t.enviarObjetoAListaCerrar();else{var o=e.dismiss;o&&"close"===o?t.enviarObjetoAListaCerrar():t.imprimirInvPedidos()}});else if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0))if(this.invPedidos.pedPendiente)this.utilService.generarSwal(c.a.TOAST_CORRECTO,c.a.SWAL_SUCCESS,e),this.enviarObjetoAListaCerrar();else{var o={title:c.a.TOAST_CORRECTO,texto:e+"<br>"+c.a.MSJ_PREGUNTA_IMPRIMIR,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_IMPRIMIR+"'></i>  "+c.a.LABEL_IMPRIMIR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.imprimirInvPedidos(!0):t.enviarObjetoAListaCerrar()})}},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!0,vistaListado:!1})},e.prototype.cancelarAccion=function(){var e=this;if(this.accion===c.a.ACCION_CONSULTAR)this.enviarCancelar.emit();else if(this.sePuedeCancelar())this.enviarCancelar.emit();else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarCancelar.emit()})}},e.prototype.sePuedeCancelar=function(){return this.utilService.puedoCancelar(this.valoresIniciales,this.frmOrdenPedido)&&this.ordenPedidoService.puedoCancelarFormularioDetalle(this.detalleInicial,this.listadoResultado)},e.prototype.enviarObjetoAListaCerrar=function(){var e=this.ordenPedidoService.crearInvPedidoTODeInvPedidos(this.invPedidos,this.configuracion,this.motivoSeleccionado);this.accion===c.a.ACCION_CREAR?this.enviarLista.emit({objeto:e,accion:c.a.LST_INSERTAR}):this.accion===c.a.ACCION_ELIMINAR?this.enviarLista.emit({objeto:e,accion:c.a.LST_ELIMINAR}):this.accion===c.a.ACCION_ANULAR?this.enviarLista.emit({objeto:e,accion:c.a.LST_ACTUALIZAR}):this.accion===c.a.ACCION_EJECUTAR?this.enviarLista.emit({objeto:e,accion:c.a.ACCION_EJECUTAR}):this.enviarLista.emit({objeto:e,accion:c.a.LST_ACTUALIZAR})},e.prototype.collpase=function(){this.isCollapsed=!this.isCollapsed;var e="";e=this.motivoSeleccionado.pmExigirCliente&&this.invPedidos.invCliente?this.collapseAmbos():this.isCollapsed?this.mostrarMotivoSeleccionar?"415px":"335px":"265px",this.cambiarTamanioTabla(e)},e.prototype.collpaseCliente=function(){this.isCollapseCliente=!this.isCollapseCliente;var e=this.collapseAmbos();this.cambiarTamanioTabla(e)},e.prototype.collapseAmbos=function(){return this.isCollapsed&&this.isCollapseCliente?"520px":this.isCollapsed||this.isCollapseCliente?this.isCollapsed&&!this.isCollapseCliente?"380px":"445px":"310px"},e.prototype.cambiarTamanioTabla=function(e){this.estilos={width:"100%",height:"calc(100vh - "+e+")","min-height":"135px"}},e.prototype.soloNumeros=function(e){return this.utilService.soloNumeros(e)},e.prototype.obtenerFechaServidor=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,c.a.KEY_EMPRESA_SELECT).then(function(t){e.invPedidos.pedFechaHoraEntrega=t[1],e.extraerValoresIniciales()}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.ordenPedidoService.generarColumnasOrdenPedidoDetalle(this,this.accion),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={popOverInformacion:gt.a,inputLabelCell:ft.a,botonAccion:$o.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.gridApi.sizeColumnsToFit(),this.accion!==c.a.ACCION_CREAR&&this.accion!==c.a.ACCION_MAYORIZAR||(this.motivoSeleccionado.pmExigirCliente?this.focusOrdenDeCompra():this.focusedProducto(0))},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.alCambiarValorDeCelda=function(e){"proCodigoPrincipal"===e.colDef.field&&this.validarProducto(e.data)},e.prototype.getRowData=function(){var e=[];return this.gridApi&&this.gridApi.forEachNode(function(t){e.push(t.data)}),e},e.prototype.validarDetalle=function(){var e=this,t=!0;return this.gridApi&&this.gridApi.forEachNode(function(o){o.data.categoriaProductoValido=e.ordenPedidoService.validarCategoriaProducto(o.data,e.motivoSeleccionado),e.refreshGrid(),!(e.ordenPedidoService.validarCantidadSolicitada(o.data)&&e.ordenPedidoService.validarProducto(o.data)&&o.data.categoriaProductoValido)&&(t=!1)}),t},e.prototype.verificarAntesDeEliminarFila=function(){var e=this,t=this.listadoResultado.indexOf(this.objetoSeleccionado);if(this.listadoResultado.length>1&&t>=0)if(this.objetoSeleccionado&&this.objetoSeleccionado.detSecuencial>0){var o={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){e.cargando=!0;var a={detSecuencial:e.objetoSeleccionado.detSecuencial};e.api.post("todocompuWS/pedidosWebController/eliminarInvPedidosDetalle",a,c.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?(e.toastr.success(o.operacionMensaje,"Correcto"),e.eliminarFila(t)):e.toastr.warning(o.operacionMensaje,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}})}else this.eliminarFila(t)},e.prototype.buscarProducto=function(e){var t=e.event.keyCode,o=e.event.target.value,a=e.data.invProducto.invProductoPK.proCodigoPrincipal;if(this.utilService.validarKeyBuscar(t))if(e.data.proCodigoPrincipal=o,o&&a&&o===a)t===c.a.KEYCODE_TAB?this.gridApi.tabToNextCell():this.productoFocusCell(e.node.rowIndex);else if(o=(o=""===o?null:o)?o.toUpperCase():null){var i={empresa:this.empresaSeleccionada.empCodigo,busqueda:o,categoria:this.motivoSeleccionado.invProductoCategoria.invProductoCategoriaPK.catCodigo,incluirInactivos:!1,limite:!1};this.abrirModalProducto(i,e)}else t===c.a.KEYCODE_TAB?this.gridApi.tabToNextCell():this.productoFocusCell(e.node.rowIndex)},e.prototype.abrirModalProducto=function(e,t){var o=this,a=t.node.rowIndex,i=this.modalService.open(r.a,{size:"lg",backdrop:"static",windowClass:"miSize"});i.componentInstance.parametrosBusqueda=e,i.componentInstance.empresaSeleccionada=this.empresaSeleccionada,i.componentInstance.isModal=!0,i.result.then(function(e){if(e){var i=new ke.a(e);t.event.target.value=i.proCodigoPrincipal,t.data.proCodigoPrincipal=i.proCodigoPrincipal,t.data.invProducto.invProductoPK.proCodigoPrincipal=i.proCodigoPrincipal,t.data.invProducto.invProductoPK.proEmpresa=o.empresaSeleccionada.empCodigo,t.data.invProducto.proNombre=i.proNombre,t.data.invProducto.invProductoMedida.medDetalle=i.detalleMedida,t.data.invProducto.invProductoCategoria.catDetalle=i.proCategoria,t.data.categoriaProductoValido=!0,o.refreshGrid(),a>=0&&a===o.listadoResultado.length-1&&o.agregarFila("down",!1),o.cantidadFocusCell(a)}else o.productoFocusCell(a)},function(){t.data.proCodigoPrincipal="",o.validarProducto(t.data),o.gridApi.setFocusedCell(a,"proNombre"),o.productoFocusCell(a)})},e.prototype.validarProducto=function(e){e.invProducto.invProductoPK.proCodigoPrincipal!==e.proCodigoPrincipal&&this.resetearProducto(e)},e.prototype.resetearProducto=function(e){e.proCodigoPrincipal=null,e.invProducto.invProductoPK.proCodigoPrincipal=null,e.invProducto.invProductoPK.proEmpresa=null,e.invProducto.proNombre=null,e.invProducto.invProductoMedida.medDetalle=null,this.refreshGrid()},e.prototype.buscarKardex=function(e){var t=this;if(e.invProducto.invProductoPK.proCodigoPrincipal&&e.invProducto.invProductoPK.proCodigoPrincipal.length>0){var o=new Date(this.utilService.obtenerFechaInicioMes());o.setMonth(o.getMonth()-1);var a={empresa:c.a.KEY_EMPRESA_SELECT,bodega:null,producto:e.invProducto.invProductoPK.proCodigoPrincipal,desde:o,hasta:this.utilService.formatearDateToStringDDMMYYYY(this.utilService.obtenerFechaFinMes()),promedio:c.a.KEY_KARDEX_PROMEDIO,isModal:!0},i=this.modalService.open(eo,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.componentInstance.datos={vista:"produccion",empresaSeleccionada:this.empresaSeleccionada},i.componentInstance.isModal=!0,i.result.then(function(){t.actualizarFilas()},function(){t.actualizarFilas()})}else this.toastr.info(c.a.MSJ_SELECCIONE_PRODUCTO,c.a.TOAST_INFORMACION)},e.prototype.ejecutarAccion=function(e,t){"verKardex"===t&&this.buscarKardex(e)},e.prototype.buscarCliente=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.invPedidos.invCliente.invClientePK.cliCodigo&&!(this.invPedidos.invCliente.invClientePK.cliCodigo&&this.clienteCodigo&&this.invPedidos.invCliente.invClientePK.cliCodigo===this.clienteCodigo)){var t={empresa:c.a.KEY_EMPRESA_SELECT,busqueda:this.invPedidos.invCliente.invClientePK.cliCodigo,mostrarInactivo:!1};e.srcElement.blur(),e.preventDefault(),this.abrirModalCliente(t)}},e.prototype.abrirModalCliente=function(e){var t=this,o=this.modalService.open(s.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametros=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.clienteCodigo=e?e.cliCodigo:null,t.invPedidos.invCliente.invClientePK.cliEmpresa=t.empresaSeleccionada.empCodigo,t.invPedidos.invCliente.invClientePK.cliCodigo=e?e.cliCodigo:null,t.invPedidos.invCliente.cliRazonSocial=e?e.cliRazonSocial:null,t.invPedidos.invCliente.invClienteGrupoEmpresarial.geNombre=e?e.cliGrupoEmpresarialNombre:null,t.seleccionandoCliente(e),t.focusContactoNombre()):t.focusClienteCodigo()},function(){t.focusClienteCodigo()})},e.prototype.seleccionandoCliente=function(e){if(e&&e.cliLugaresEntrega){this.arrayContacto=JSON.parse(e.cliLugaresEntrega);for(var t=0;t<this.arrayContacto.length&&(this.contactoPredeterminado=this.arrayContacto[t].predeterminado?this.arrayContacto[t]:null,!this.arrayContacto[t].predeterminado);t++);}this.seleccionarContacto()},e.prototype.seleccionarContacto=function(){this.arrayContactoLugarEntrega=[],this.contactoPredeterminado&&this.contactoPredeterminado.lugarEntrega&&this.arrayContactoLugarEntrega.push(new va({nombre:this.contactoPredeterminado.lugarEntrega})),this.contactoPredeterminado&&this.contactoPredeterminado.lugarEntrega2&&this.arrayContactoLugarEntrega.push(new va({nombre:this.contactoPredeterminado.lugarEntrega2})),this.lugarEntrega=this.arrayContactoLugarEntrega.length>0?this.arrayContactoLugarEntrega[0]:null,this.invPedidos.pedLugarEntrega=this.lugarEntrega,this.invPedidos.pedContactoNombre=this.contactoPredeterminado?this.contactoPredeterminado.contacto:null,this.invPedidos.pedContactoTelefono=this.contactoPredeterminado?this.contactoPredeterminado.telefono:null,this.invPedidos.pedObservacionesRegistra=this.contactoPredeterminado?this.contactoPredeterminado.recordatorio:null},e.prototype.seleccionarLugarEntrega=function(){this.invPedidos.pedLugarEntrega=this.lugarEntrega},e.prototype.filtrarContactos=function(e){var t=e.query,o=[];this.arrayContacto.forEach(function(e){0==e.contacto.toLowerCase().indexOf(t.toLowerCase())&&o.push(e)}),this.arrayContactoFiltrada=o},e.prototype.filtrarLugarEntrega=function(e){var t=e.query,o=[];this.arrayContactoLugarEntrega.forEach(function(e){0==e.nombre.toLowerCase().indexOf(t.toLowerCase())&&o.push(e)}),this.arrayContactoLugarEntregaFiltrada=o},e.prototype.validarCliente=function(){this.invPedidos.invCliente.invClientePK.cliCodigo!==this.clienteCodigo&&(this.clienteCodigo=null,this.invPedidos.invCliente=new It.a,this.invPedidos.pedContactoNombre=null,this.invPedidos.pedLugarEntrega=null,this.invPedidos.pedContactoTelefono=null,this.arrayContacto=[],this.contactoPredeterminado=null)},e.prototype.verificarSiExigeCliente=function(){this.motivoSeleccionado.pmExigirCliente&&!this.invPedidos.invCliente&&this.accion==c.a.ACCION_MAYORIZAR&&(this.invPedidos.invCliente=new It.a),this.motivoSeleccionado.pmExigirCliente&&this.invPedidos.invCliente&&(this.estilos={width:"100%",height:"calc(100vh - 520px)","min-height":"135px"}),this.motivoSeleccionado.pmExigirCliente&&this.invPedidos.invCliente&&(this.clienteCodigo=this.invPedidos.invCliente.invClientePK.cliCodigo),this.invPedidos.invCliente&&this.accion===c.a.ACCION_MAYORIZAR&&this.crearObjetoContactoYLugar()},e.prototype.crearObjetoContactoYLugar=function(){if(this.contactoPredeterminado=null,this.lugarEntrega=null,this.arrayContactoLugarEntrega=[],this.invPedidos.pedContactoNombre&&this.invPedidos.pedContactoTelefono&&this.invPedidos.pedLugarEntrega){this.arrayContacto=this.invPedidos.invCliente.cliLugaresEntrega?JSON.parse(this.invPedidos.invCliente.cliLugaresEntrega):[];for(var e=0;e<this.arrayContacto.length;e++){var t=this.arrayContacto[e];if(this.invPedidos.pedContactoNombre&&t.contacto.trim()===this.invPedidos.pedContactoNombre.trim()){this.contactoPredeterminado=t,this.arrayContactoLugarEntrega.push(new va({nombre:this.invPedidos.pedLugarEntrega.trim()})),t.lugarEntrega&&this.arrayContactoLugarEntrega.push(new va({nombre:t.lugarEntrega})),t.lugarEntrega2&&this.arrayContactoLugarEntrega.push(new va({nombre:t.lugarEntrega2})),this.lugarEntrega=this.arrayContactoLugarEntrega.length>0?this.arrayContactoLugarEntrega[0]:null;break}}this.contactoPredeterminado||(this.contactoPredeterminado=new P,this.contactoPredeterminado.contacto=this.invPedidos.pedContactoNombre.trim(),this.contactoPredeterminado.telefono=this.invPedidos.pedContactoTelefono.trim(),this.contactoPredeterminado.lugarEntrega=this.invPedidos.pedLugarEntrega.trim(),this.lugarEntrega=new va({nombre:this.invPedidos.pedLugarEntrega.trim()}))}},e.prototype.focusedProducto=function(e){var t=this;setTimeout(function(){t.productoFocusCell(e)},50)},e.prototype.productoFocusCell=function(e){this.gridApi.setFocusedCell(e,"proCodigoPrincipal")},e.prototype.cantidadFocusCell=function(e){this.gridApi.setFocusedCell(e,"detCantidadSolicitada")},e.prototype.focusClienteCodigo=function(){var e=document.getElementById("codCliente");e&&e.focus()},e.prototype.focusOrdenDeCompra=function(){var e=document.getElementById("pedOrdenCompra");e&&e.focus()},e.prototype.focusContactoNombre=function(){var e=document.getElementById("pedContactoNombre");e&&e.focus()},e.prototype.realizarAccion=function(){if(this.ordenPedidoService.verificarPermiso(this.accion,this,!0))switch(this.accion){case c.a.ACCION_CREAR:this.crearInvPedidos();break;case c.a.ACCION_CONSULTAR:this.frmTitulo=c.a.PEDIDOS_CONSULTAR,this.obtenerInvPedidos();break;case c.a.ACCION_ANULAR:this.frmTitulo=c.a.PEDIDOS_ANULAR,this.obtenerInvPedidos();break;case c.a.ACCION_MAYORIZAR:this.frmTitulo=c.a.PEDIDOS_EDITAR,this.obtenerInvPedidos();break;case c.a.ACCION_ELIMINAR:this.frmTitulo=c.a.PEDIDOS_ELIMINAR,this.obtenerInvPedidos()}},e.prototype.crearInvPedidos=function(){if(this.cargando=!0,this.configuracionPedidoService.esConfiguracionPedidoValida(this.configuracion)){var e=this.configuracionPedidoService.esValidoPeriodoInvMotivo(this.fechaActual,this.motivoSeleccionado,!0);e||(this.cargando=!1,this.cerrarFormulario()),this.ordenPedidoService.verificarPermiso(this.accion,this,!0)&&e&&(this.frmTitulo=c.a.PEDIDOS_NUEVO,this.invPedidos=new na.a,this.invPedidos.pedCodigoTransaccional=this.utilService.generarCodigoAleatorio(c.a.KEY_EMPRESA_SELECT,new Date),this.invPedidos.pedFechaEmision=this.obtenerFechaEmision(this.fechaActual),this.invPedidos.usrRegistra=this.authService.getCodigoUser(),this.usrRegistradorNombre=this.authService.getNombrecompleto(),this.invPedidos.invPedidosDetalleList=[new pa.a({detOrden:0,detCantidadSolicitada:1})],this.listadoResultado=this.invPedidos.invPedidosDetalleList,this.pedidoEstado="",this.cambiarActivar(),this.vistaFormulario=!0,this.cargando=!1,this.motivoSeleccionado.pmExigirCliente&&(this.estilos={width:"100%",height:"calc(100vh - 520px)","min-height":"135px"}),this.obtenerFechaServidor(),this.extraerValoresIniciales()),this.cargando=!1}else this.utilService.generarSwal(c.a.TAG_AVISO,c.a.SWAL_INFO,c.a.MSJ_ESTABLECER_CONFIGURACION_PEDIDO),this.cargando=!1,this.cerrarFormulario()},e.prototype.obtenerFechaEmision=function(e){if(e){var t=Ut(this.fechaActual).format("YYYY-MM-DD");return new Date(t+":00:00:00")}return new Date},e.prototype.guardarOrdenPedido=function(e,t,o){var a=this;this.cargando=!0,this.sistemaService.getFechaInicioActualMes(this,c.a.KEY_EMPRESA_SELECT).then(function(i){if(a.fechaActual=i[1],a.validarAntesDeEnviar(e)){var r=a.ordenPedidoService.formatearOrdenPedido(a.invPedidos,t,a,o);r.pedContactoNombre=a.contactoPredeterminado&&a.contactoPredeterminado.contacto?a.contactoPredeterminado.contacto.toUpperCase():a.contactoPredeterminado,r.pedLugarEntrega=a.lugarEntrega&&a.lugarEntrega.nombre?a.lugarEntrega.nombre.toUpperCase():a.lugarEntrega,a.parametro={invPedidos:fa({},r)},a.ordenPedidoService.insertarOrdenPedido(a.parametro,a,c.a.KEY_EMPRESA_SELECT)}}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.despuesDeInsertarOrdenPedido=function(e){this.cargando=!1,this.invPedidos=this.ordenPedidoService.establecerFormatoVistaIvPedidos(e.extraInfo),this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),this.enviarNotificaciones(this.invPedidos),this.preguntarImprimirOrdenPedido(e.operacionMensaje),this.texto=e.operacionMensaje},e.prototype.actualizarOrdenPedido=function(e,t,o){var a=this;this.cargando=!0,this.sistemaService.getFechaInicioActualMes(this,c.a.KEY_EMPRESA_SELECT).then(function(i){if(a.fechaActual=i[1],a.validarAntesDeEnviar(e)){var r=a.ordenPedidoService.formatearOrdenPedido(a.invPedidos,t,a,o);r.invCliente=a.motivoSeleccionado.pmExigirCliente?r.invCliente:null,r.pedLugarEntrega=a.motivoSeleccionado.pmExigirCliente?a.lugarEntrega&&a.lugarEntrega.nombre?a.lugarEntrega.nombre.toUpperCase():a.lugarEntrega:null,r.pedContactoNombre=a.motivoSeleccionado.pmExigirCliente?a.contactoPredeterminado&&a.contactoPredeterminado.contacto?a.contactoPredeterminado.contacto.toUpperCase():a.contactoPredeterminado:null,r.pedContactoTelefono=a.motivoSeleccionado.pmExigirCliente?r.pedContactoTelefono:null,r.pedLugarEntrega=a.motivoSeleccionado.pmExigirCliente?r.pedLugarEntrega:null;var n=a.ordenPedidoService.obtenerAccionInvPedidos(a.accion);a.parametro={invPedidos:fa({},r),accion:n},a.ordenPedidoService.actualizarOrdenPedido(a.parametro,a,c.a.KEY_EMPRESA_SELECT)}}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.despuesDeActualizarOrdenPedido=function(e){this.invPedidos=this.ordenPedidoService.establecerFormatoVistaIvPedidos(e.extraInfo),this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),this.enviarNotificaciones(this.parametro.invPedidos),"PENDIENTE"!==this.pedidoEstado?this.preguntarImprimirOrdenPedido(e.operacionMensaje):(this.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),this.enviarObjetoAListaCerrar())},e.prototype.eliminarOrdenPedido=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this,!0)){var t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ELIMINAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0;var o={invPedidosPK:new ha.a(e.invPedidos.invPedidosPK)};e.ordenPedidoService.eliminarOrdenPedido(o,e,c.a.KEY_EMPRESA_SELECT)}})}},e.prototype.despuesDeEliminarOrdenPedido=function(e){this.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),this.enviarObjetoAListaCerrar()},e.prototype.anularOrdenPedido=function(){var e=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_ANULAR,this,!0)){var t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ANULAR_ORDEN_PEDIDO,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ANULAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&(e.cargando=!0,e.ordenPedidoService.anularOrdenPedido({invPedidosPK:e.invPedidos.invPedidosPK,tipo:"GENERAROP"},e,c.a.KEY_EMPRESA_SELECT))})}},e.prototype.despuesDeAnularOrdenPedido=function(e){this.invPedidos.pedAnulado=!0,this.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),this.enviarObjetoAListaCerrar(),this.cargando=!1},e.prototype.imprimirInvPedidos=function(e){var t=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){if(this.cargando=!0,this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),0===this.ordenPedidoService.establecerFormatoEnvioIvPedidos(this.invPedidos,this.pedidoEstado).invPedidosDetalleList.length)return this.toastr.warning(c.a.MSJ_NO_DATOS_IMPRIMIR,c.a.TAG_AVISO),void(this.cargando=!1);var o={invPedidosPK:new ha.a(this.invPedidos.invPedidosPK),nombreReporte:c.a.NOMBRE_REPORTE_GENERAR_ORDEN_PEDIDO};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosGeneral",o,this.empresaSeleccionada).then(function(o){o._body.byteLength>0?t.utilService.descargarArchivoPDF("ordenDePedido "+t.utilService.obtenerHorayFechaActual()+".pdf",o):t.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR),e?t.enviarObjetoAListaCerrar():t.preguntarImprimirOrdenPedido(t.texto),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},e.prototype.exportarInvPedidos=function(){var e=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){if(this.cargando=!0,this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),0===this.ordenPedidoService.establecerFormatoEnvioIvPedidos(this.invPedidos,this.pedidoEstado).invPedidosDetalleList.length)return this.toastr.warning(c.a.MSJ_NO_DATOS_EXPORTAR,c.a.TAG_AVISO),void(this.cargando=!1);var t={invPedidosPK:new ha.a(this.invPedidos.invPedidosPK)};this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidos",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"OrdenPedido_"):e.toastr.warning(c.a.MSJ_NO_DATA),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.obtenerInvPedidos=function(){this.cargando=!0;var e={empresa:this.data.invPedidosPK.pedEmpresa,motivo:this.data.invPedidosPK.pedMotivo,numero:this.data.invPedidosPK.pedNumero,sector:this.data.invPedidosPK.pedSector};this.ordenPedidoService.obtenerOrdenPedido(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerOrdenPedido=function(e){this.invPedidos=this.ordenPedidoService.establecerFormatoVistaIvPedidos(e),this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),this.listadoResultado=this.invPedidos.invPedidosDetalleList,this.establecerResponsables(),this.vistaFormulario=!0,this.cambiarActivar(),this.cargando=!1,this.verificarSiExigeCliente(),this.extraerValoresIniciales()},e.prototype.generarOpciones=function(){var e=this,t=this.empresaSeleccionada.listaSisPermisoTO.gruCrear&&(this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_MAYORIZAR);this.opciones=[{label:c.a.ACCION_AGREGAR_FILA_ARRIBA,icon:c.a.ICON_FLECHA_ARRIBA,disabled:!t,command:function(){return t?e.agregarFila("up",!0):null}},{label:c.a.ACCION_AGREGAR_FILA_ABAJO,icon:c.a.ICON_FLECHA_ABAJO,disabled:!t,command:function(){return t?e.agregarFila("down",!0):null}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!t,command:function(){return t?e.verificarAntesDeEliminarFila():null}}]},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.agregarFila=function(e,t){var o=this.listadoResultado.indexOf(this.objetoSeleccionado);if(o>=0){o="up"===e?o:o+1;var a=this.ordenPedidoService.crearInvPedidoDetalle(),i=this.listadoResultado.slice();i.splice(o,0,a),this.listadoResultado=i,t&&this.focusedProducto(o)}this.refreshGrid()},e.prototype.agregarFilaAlFinal=function(e){var t=e.event.keyCode,o=this.listadoResultado.indexOf(this.objetoSeleccionado);if(this.utilService.validarKeyBuscar(t)&&(this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_MAYORIZAR)&&o>=0&&o===this.listadoResultado.length-1){var a=this.ordenPedidoService.crearInvPedidoDetalle(),i=this.listadoResultado.slice();i.push(a),this.listadoResultado=i,this.focusedProducto(o+1)}},e.prototype.eliminarFila=function(e){var t=this.listadoResultado.slice();t.splice(e,1),this.listadoResultado=t,this.refreshGrid()},e.prototype.refrescarOrdenDetallePedido=function(){var e=0;this.gridApi.forEachNode(function(t){t.data.detOrden=e,e+=1})},e.prototype.iniciarSectorMotivoDefault=function(){this.data&&(this.listaMotivos=this.data.listaMotivos)},e.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[];var e=this.empresaSeleccionada.empCodigo,t={empresa:e,incluirInactivos:!1,prdSectorPK:this.sectorSeleccionado?new Aa.a({secEmpresa:e,secCodigo:this.sectorSeleccionado.secCodigo}):null,invProductoCategoriaPK:null};this.configuracionPedidoService.listarInvPedidosMotivo(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarMotivos=function(e){var t=this;this.listaMotivos=e.slice(),this.listaMotivos.length>0?this.motivoSeleccionado=this.listaMotivos&&this.motivoSeleccionado.invPedidosMotivoPK.pmCodigo?this.listaMotivos.find(function(e){return e.invPedidosMotivoPK.pmCodigo===t.motivoSeleccionado.invPedidosMotivoPK.pmCodigo}):this.listaMotivos[0]:this.motivoSeleccionado=null,this.cargando=!1,this.traerConfiguracionPedidos()},e.prototype.traerConfiguracionPedidos=function(){if(this.funcionesUsuario=[],this.configuracion=new Bo.a,this.motivoSeleccionado&&this.motivoSeleccionado.invPedidosMotivoPK.pmCodigo){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,invPedidosMotivoPK:this.motivoSeleccionado.invPedidosMotivoPK};this.configuracionPedidoService.getListaInvPedidosConfiguracion(e,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeListarConfiguracionPedido=function(e){this.motivoSeleccionado.pmExigirCliente?this.estilos={width:"100%",height:"calc(100vh - 520px)","min-height":"135px"}:(this.invPedidos.invCliente=new It.a,this.invPedidos.pedContactoTelefono=null,this.invPedidos.pedLugarEntrega=null,this.invPedidos.pedContactoNombre=null,this.arrayContacto=[],this.arrayContactoLugarEntrega=[],this.lugarEntrega=null,this.contactoPredeterminado=null,this.estilos={width:"100%",height:this.mostrarMotivoSeleccionar?"calc(100vh - 415px)":"calc(100vh - 335px)","min-height":"135px"}),this.configuracion=e,this.funcionesUsuario=this.ordenPedidoService.establecerFuncionesUsuario(this.configuracion),this.funcionesUsuario.indexOf("Registrador")<=-1&&this.toastr.warning(c.a.ERROR_403_TEXTO,c.a.ERROR_403_TITULO),this.cargando=!1},e.prototype.inicializarMotivos=function(e,t){if(e&&t)return e.invPedidosMotivoPK.pmCodigo===t.invPedidosMotivoPK.pmCodigo},ga([Object(i.Input)(),ba("design:type",Object)],e.prototype,"data",void 0),ga([Object(i.Input)(),ba("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),ga([Object(i.Output)(),ba("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),ga([Object(i.Output)(),ba("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),ga([Object(i.Output)(),ba("design:type",i.EventEmitter)],e.prototype,"enviarLista",void 0),ga([Object(i.ViewChild)("menuOpciones"),ba("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),ga([Object(i.ViewChild)("frmOrdenPedido"),ba("design:type",I.NgForm)],e.prototype,"frmOrdenPedido",void 0),ga([Object(i.HostListener)("window:beforeunload",["$event"]),ba("design:type",Function),ba("design:paramtypes",[Event]),ba("design:returntype",void 0)],e.prototype,"unloadHandler",null),ga([Object(i.HostListener)("window:resize",["$event"]),ba("design:type",Function),ba("design:paramtypes",[]),ba("design:returntype",void 0)],e.prototype,"onResize",null),e=ga([Object(i.Component)({selector:"app-orden-pedido-formulario",template:o("sQV6")}),ba("design:paramtypes",[p.a,h.a,le.a,S.HotkeysService,u.b,L.a,K.a,ko.a,Ho.a,qt.a,T.b])],e)}(),Sa=o("EBa0"),Ia=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ea=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ra=function(){function e(e,t,o,a,r,n,s){this.toastr=e,this.atajoService=t,this.ordenPedidoService=o,this.utilService=a,this.filasService=r,this.api=n,this.archivoService=s,this.parametrosBusqueda=null,this.empresaSeleccionada=new l.a,this.filasTiempoRecargar=!1,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.enviarDatosOC=new i.EventEmitter,this.opciones=[],this.es={},this.activar=!1,this.cargando=!1,this.accion=null,this.vistaListado=!1,this.listadoResultado=[],this.objetoSeleccionado=new Sa.a,this.dataFormularioPedido=null,this.dataFormularioCompra=null,this.mostrarFormularioAprobarOrden=!1,this.mostrarFormularioEjecutarOrden=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new D.a,this.funcionesUsuario=[],Ut.locale("es"),this.constantes=c.a,this.es=a.setLocaleDate()}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),this.iniciarAtajos()},e.prototype.ngOnChanges=function(e){e.parametrosBusqueda&&(this.reiniciarValores(),this.empresaSeleccionada&&this.parametrosBusqueda&&(c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.filtroGlobal="",this.buscarOrdenesPedido())),e.filasTiempoRecargar&&this.actualizarFilas(),e.operacion&&this.operacion.accion&&this.operacionEnLista(this.operacion)},e.prototype.iniciarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivarOrdenPedido");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirListado");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarListado");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CONSULTAR,function(t){return e.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,e,!0)&&e.objetoSeleccionado&&(e.parametrosBusqueda.visualizarConsultaOrdenPedido?e.consultarOrdenPedidoEvaluando():e.consultarOrdenPedido()),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_DESMAYORIZAR,function(t){return e.dataFormularioPedido||e.dataFormularioCompra||e.objetoSeleccionado&&e.ordenPedidoService.verificarPermiso(c.a.ACCION_DESMAYORIZAR,e)&&e.ordenPedidoService.getEstadoInvPedidoTO(e.objetoSeleccionado)===c.a.ETIQUETA_POR_APROBAR_PEDIDO&&e.desmayorizarOrdenPedido(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MAYORIZAR,function(t){return e.dataFormularioPedido||e.dataFormularioCompra||e.objetoSeleccionado&&e.ordenPedidoService.verificarPermiso(c.a.ACCION_MAYORIZAR,e)&&e.ordenPedidoService.getEstadoInvPedidoTO(e.objetoSeleccionado)===c.a.ETIQUETA_PENDIENTE&&e.mayorizarOrdenPedido(e.objetoSeleccionado),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ANULAR,function(t){return e.dataFormularioPedido||e.dataFormularioCompra||e.objetoSeleccionado&&e.ordenPedidoService.verificarPermiso(c.a.ACCION_ANULAR,e)&&e.ordenPedidoService.getEstadoInvPedidoTO(e.objetoSeleccionado)!==c.a.ETIQUETA_PENDIENTE&&e.ordenPedidoService.getEstadoInvPedidoTO(e.objetoSeleccionado)!==c.a.ETIQUETA_ANULADO&&e.anularOrdenPedido(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_RESTAURAR,function(t){return e.dataFormularioPedido||e.dataFormularioCompra||e.objetoSeleccionado&&e.ordenPedidoService.verificarPermiso(c.a.ACCION_RESTAURAR,e)&&e.ordenPedidoService.getEstadoInvPedidoTO(e.objetoSeleccionado)===c.a.ETIQUETA_ANULADO&&e.resturarOrdenPedido(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_ELIMINAR,function(t){return e.dataFormularioPedido||e.dataFormularioCompra||e.objetoSeleccionado&&e.ordenPedidoService.verificarPermiso(c.a.ACCION_ELIMINAR,e)&&e.ordenPedidoService.getEstadoInvPedidoTO(e.objetoSeleccionado)===c.a.ETIQUETA_PENDIENTE&&e.eliminarOrdenPedido(e.objetoSeleccionado),!1}))},e.prototype.reiniciarValores=function(){this.filasTiempo.filas=0,this.activar=!1,this.accion=null,this.dataFormularioPedido=null,this.vistaListado=!1,this.mostrarFormularioAprobarOrden=!1,this.mostrarFormularioEjecutarOrden=!1,this.iniciarAtajos()},e.prototype.buscarOrdenesPedido=function(){this.filasTiempo.filas=0,this.cargando=!0,this.limpiarResultado(),this.parametrosBusqueda.fechaInicio&&this.parametrosBusqueda.fechaFin&&(this.parametrosBusqueda.fechaInicio=this.utilService.formatearDateToStringDDMMYYYY(this.parametrosBusqueda.fechaInicio),this.parametrosBusqueda.fechaFin=this.utilService.formatearDateToStringDDMMYYYY(this.parametrosBusqueda.fechaFin)),this.funcionesUsuario=this.parametrosBusqueda?this.parametrosBusqueda.funcionesUsuario:null,this.parametrosBusqueda.visualizarConsultaOrdenPedido?this.ordenPedidoService.listaInvPedidosOrdenTO(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT):this.ordenPedidoService.listarOrdenesPedido(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarOrdenPedido=function(e){this.listadoResultado=e||[],this.actualizarFilas(),this.vistaListado=!0,this.cargando=!1,this.iniciarAgGrid()},e.prototype.limpiarResultado=function(){this.vistaListado=!1,this.listadoResultado=[],this.objetoSeleccionado=new Sa.a,this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.imprimirListado=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t=this.utilService.getAGSelectedData(this.gridApi);if(0===t.length)this.toastr.info(c.a.MSJ_NO_ITEM_SELECCIONADO,c.a.TOAST_INFORMACION),this.cargando=!1;else{var o=this.utilService.enviarListadoPedidosSeleccionados(t.slice());if(o.conStatus)this.cargando=!1,this.toastr.warning(o.mensaje,c.a.TAG_AVISO);else if(o.listadoResultado.length>0){var a={codigoSector:this.parametrosBusqueda&&this.parametrosBusqueda.busqueda?this.parametrosBusqueda.busqueda:"",codigoMotivo:this.parametrosBusqueda&&this.parametrosBusqueda.motivo?this.parametrosBusqueda.motivo:"",listadoInvPedidosTO:t,nombreReporte:(this.parametrosBusqueda.visualizarConsultaOrdenPedido,c.a.NOMBRE_REPORTE_GENERAR_ORDEN_PEDIDO_LISTADO)};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosTO",a,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ordenesPedidoListado_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}}}},e.prototype.imprimirIndividual=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t=this.utilService.getAGSelectedData(this.gridApi),o=this.ordenPedidoService.formatearImprimirPedidosIndividual(t);if(0===o.length)this.toastr.info(c.a.MSJ_NO_ITEM_SELECCIONADO,c.a.TOAST_INFORMACION),this.cargando=!1;else{var a=this.utilService.enviarListadoPedidosSeleccionados(t.slice());if(a.conStatus)this.cargando=!1,this.toastr.warning(a.mensaje,c.a.TAG_AVISO);else if(a.listadoResultado.length>0){var i={listaInvPedidosPK:o,nombreReporte:(this.parametrosBusqueda.visualizarConsultaOrdenPedido,c.a.NOMBRE_REPORTE_GENERAR_ORDEN_PEDIDO_LOTE)};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosLote",i,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ordenesPedidosIndividual_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}}}},e.prototype.imprimirOrdenPedido=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var o={invPedidosPK:new ha.a({pedEmpresa:e.codigoempresa,pedNumero:e.pedidonumero,pedMotivo:e.codigomotivo,pedSector:e.codigosector}),nombreReporte:c.a.NOMBRE_REPORTE_GENERAR_ORDEN_PEDIDO};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosGeneral",o,this.empresaSeleccionada).then(function(e){e?t.utilService.descargarArchivoPDF("ordenDePedido_"+t.utilService.obtenerHorayFechaActual()+".pdf",e):t.toastr.warning(c.a.MSJ_NO_DATA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},e.prototype.exportar=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t=this.utilService.getAGSelectedData(this.gridApi);if(0===t.length)this.toastr.info(c.a.MSJ_NO_ITEM_SELECCIONADO,c.a.TOAST_INFORMACION),this.cargando=!1;else{var o={codigoMotivo:this.parametrosBusqueda&&this.parametrosBusqueda.motivoSeleccionado?this.parametrosBusqueda.motivoSeleccionado.pmCodigo:"",listadoInvPedidosTO:t};this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidosTO",o,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoOrdenesPedido_"):e.toastr.warning(c.a.MSJ_NO_DATA),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}}},e.prototype.consultarOrdenPedidoEvaluando=function(){switch(this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)){case c.a.ETIQUETA_PENDIENTE:case c.a.ETIQUETA_POR_APROBAR_PEDIDO:case c.a.ETIQUETA_ANULADO:this.consultarOrdenPedido(),this.mostrarFormularioAprobarOrden=!1,this.mostrarFormularioEjecutarOrden=!1;break;case c.a.ETIQUETA_PEDIDO_APROBADO:this.consultarOrdenPedido(),this.mostrarFormularioAprobarOrden=!0,this.mostrarFormularioEjecutarOrden=!1;break;case c.a.ETIQUETA_EJECUTADO:this.consultarOrdenPedidoEjecutado(),this.mostrarFormularioAprobarOrden=!1,this.mostrarFormularioEjecutarOrden=!0}},e.prototype.consultarOrdenPedido=function(){this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_CONSULTAR,this.mostrarObjetoParaAccion(this.objetoSeleccionado))},e.prototype.consultarOrdenPedidoEjecutado=function(){this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_CONSULTAR,this.dataFormularioPedido={accion:this.accion,invPedidosPK:new ha.a({pedEmpresa:this.objetoSeleccionado.codigoempresa,pedMotivo:this.objetoSeleccionado.codigomotivo,pedNumero:this.objetoSeleccionado.pedidonumero,pedSector:this.objetoSeleccionado.codigosector}),invPedidoTO:this.objetoSeleccionado},this.cargando=!1)},e.prototype.consultarOrdenCompra=function(e){e.accion&&e.detSecuencial&&this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this,!0)&&e.accion===c.a.ACCION_CARRITO&&(this.dataFormularioCompra={accion:c.a.ACCION_CARRITO,detSecuencial:e.detSecuencial,vista:"ordencompra"})},e.prototype.mayorizarOrdenPedido=function(e){this.ordenPedidoService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_MAYORIZAR,this.mostrarObjetoParaAccion(e))},e.prototype.desmayorizarOrdenPedido=function(){var e=this;this.cargando=!0;var t=new ha.a({pedEmpresa:this.objetoSeleccionado.codigoempresa,pedSector:this.objetoSeleccionado.codigosector,pedMotivo:this.objetoSeleccionado.codigomotivo,pedNumero:this.objetoSeleccionado.pedidonumero});this.api.post("todocompuWS/pedidosWebController/desmayorizarInvPedidos",{invPedidosPK:t},c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo?(e.objetoSeleccionado.estado=c.a.ETIQUETA_PENDIENTE,e.objetoSeleccionado.pedpendiente=!0,e.refreshGrid(),e.toastr.success(t.operacionMensaje,c.a.TOAST_CORRECTO),e.ordenPedidoService.verificarPermiso(c.a.ACCION_MAYORIZAR,e)&&e.ordenPedidoService.getEstadoInvPedidoTO(e.objetoSeleccionado)===c.a.ETIQUETA_PENDIENTE&&Ca()(e.utilService.generarSwalConfirmationOption(c.a.MSJ_TITULO_MAYORIZAR,c.a.MSJ_PREGUNTA_MAYORIZAR,c.a.SWAL_QUESTION)).then(function(t){t.value&&e.mayorizarOrdenPedido(e.objetoSeleccionado)})):e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.anularOrdenPedido=function(){this.ordenPedidoService.verificarPermiso(c.a.ACCION_ANULAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_ANULAR,this.mostrarObjetoParaAccion(this.objetoSeleccionado))},e.prototype.resturarOrdenPedido=function(){var e=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_RESTAURAR,this,!0)){this.cargando=!0;var t=new ha.a({pedEmpresa:this.objetoSeleccionado.codigoempresa,pedSector:this.objetoSeleccionado.codigosector,pedMotivo:this.objetoSeleccionado.codigomotivo,pedNumero:this.objetoSeleccionado.pedidonumero});this.api.post("todocompuWS/pedidosWebController/restaturarInvPedidos",{invPedidosPK:t},c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo?(e.objetoSeleccionado.estado=c.a.ETIQUETA_POR_APROBAR_PEDIDO,e.objetoSeleccionado.pedanulado=!1,e.refreshGrid(),e.toastr.success(t.operacionMensaje,c.a.TOAST_CORRECTO)):e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.ejecutarOrdenPedido=function(e){this.utilService.verificarPermiso(c.a.ACCION_EJECUTAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_EJECUTAR,this.mostrarObjetoParaAccion(e))},e.prototype.eliminarOrdenPedido=function(e){this.ordenPedidoService.verificarPermiso(c.a.ACCION_ELIMINAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_ELIMINAR,this.mostrarObjetoParaAccion(e))},e.prototype.desAprobarOrdenPedido=function(e){this.ordenPedidoService.verificarPermiso(c.a.ACCION_DESAPROBAR,this,!0)&&(this.cargando=!0,this.accion=c.a.ACCION_DESAPROBAR,this.mostrarObjetoParaAccion(e))},e.prototype.mostrarObjetoParaAccion=function(e){this.dataFormularioPedido={accion:this.accion,invPedidosPK:new ha.a({pedEmpresa:e.codigoempresa,pedMotivo:e.codigomotivo,pedNumero:e.pedidonumero,pedSector:e.codigosector}),tipo:"GENERAROP",invPedidoTO:e},this.cargando=!1},e.prototype.cancelar=function(e){e&&e.accion===c.a.ACCION_CARRITO?this.dataFormularioCompra=null:(this.enviarCancelar.emit(),this.dataFormularioPedido=null,this.dataFormularioCompra=null,this.vistaListado=!0,this.accion=null,this.mostrarFormularioAprobarOrden=!1,this.mostrarFormularioEjecutarOrden=!1,this.iniciarAtajos())},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!1,gridApi:this.gridApi}),this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.cambiarActivarFormulario=function(e){this.vistaListado=e.vistaListado;var t={activar:e.activar,deshabilitarOpciones:!0};this.enviarActivar.emit(t)},e.prototype.operacionEnLista=function(e){switch(e.accion){case c.a.LST_INSERTAR:this.refrescarTabla(e.objeto,"I"),this.cancelar();case c.a.LST_ACTUALIZAR:this.refrescarTabla(e.objeto,"U"),this.cancelar();break;case c.a.LST_ELIMINAR:this.refrescarTabla(e.objeto,"D"),this.cancelar();break;case c.a.LST_LIMPIAR:this.limpiarResultado(),this.cancelar();break;case c.a.ACCION_EJECUTAR:this.dataFormularioPedido=null,this.mostrarFormularioAprobarOrden=!1,this.enviarDatosOC.emit(e)}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.ordenPedidoService.generarColumnasOrdenPedido(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a,iconoEstado:Vt.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.parametrosBusqueda.visualizarConsultaOrdenPedido?this.generarOpcionesConsultaOrdenesPedido():this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this),o=this.ordenPedidoService.verificarPermiso(c.a.ACCION_MAYORIZAR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===c.a.ETIQUETA_PENDIENTE,a=this.ordenPedidoService.verificarPermiso(c.a.ACCION_DESMAYORIZAR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===c.a.ETIQUETA_POR_APROBAR_PEDIDO,i=this.ordenPedidoService.verificarPermiso(c.a.ACCION_ELIMINAR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===c.a.ETIQUETA_PENDIENTE,r=this.ordenPedidoService.verificarPermiso(c.a.ACCION_ANULAR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==c.a.ETIQUETA_PENDIENTE&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==c.a.ETIQUETA_ANULADO,n=this.ordenPedidoService.verificarPermiso(c.a.ACCION_RESTAURAR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===c.a.ETIQUETA_ANULADO,s=this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==c.a.ETIQUETA_PENDIENTE&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==c.a.ETIQUETA_ANULADO;this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!t,command:function(o){return t?e.consultarOrdenPedido():null}},{label:c.a.ACCION_MAYORIZAR,icon:c.a.ICON_MAYORIZAR,disabled:!o,command:function(t){return o?e.mayorizarOrdenPedido(e.objetoSeleccionado):null}},{label:c.a.ACCION_DESMAYORIZAR,icon:c.a.ICON_DESMAYORIZAR,disabled:!a,command:function(t){return a?e.desmayorizarOrdenPedido():null}},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!r,command:function(t){return r?e.anularOrdenPedido():null}},{label:c.a.ACCION_RESTAURAR,icon:c.a.ICON_RESTAURAR,disabled:!n,command:function(t){return n?e.resturarOrdenPedido():null}},{label:c.a.ACCION_ELIMINAR,icon:c.a.ICON_ELIMINAR,disabled:!i,command:function(t){return i?e.eliminarOrdenPedido(e.objetoSeleccionado):null}},{label:c.a.ACCION_IMPRIMIR,icon:c.a.ICON_IMPRIMIR,disabled:!s,command:function(t){return s?e.imprimirOrdenPedido(e.objetoSeleccionado):null}}]},e.prototype.generarOpcionesConsultaOrdenesPedido=function(){var e=this,t=this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado),o=this.utilService.verificarPermiso(c.a.ACCION_CONSULTAR,this),a=this.ordenPedidoService.verificarPermiso(c.a.ACCION_MAYORIZAR,this),i=this.ordenPedidoService.verificarPermiso(c.a.ACCION_ELIMINAR,this),r=this.ordenPedidoService.verificarPermiso(c.a.ACCION_DESMAYORIZAR,this),n=this.ordenPedidoService.verificarPermiso(c.a.ACCION_ANULAR,this),s=this.ordenPedidoService.verificarPermiso(c.a.ACCION_RESTAURAR,this),l=this.ordenPedidoService.verificarPermiso(c.a.ACCION_DESAPROBAR,this),d=this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this);switch(t){case c.a.ETIQUETA_PENDIENTE:this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!o,command:function(t){return o?e.consultarOrdenPedido():null}},{label:c.a.ACCION_MAYORIZAR,icon:c.a.ICON_MAYORIZAR,disabled:!a,command:function(t){return a?e.mayorizarOrdenPedido(e.objetoSeleccionado):null}},{label:c.a.ACCION_ELIMINAR,icon:c.a.ICON_ELIMINAR,disabled:!i,command:function(t){return i?e.eliminarOrdenPedido(e.objetoSeleccionado):null}}],this.mostrarFormularioAprobarOrden=!1,this.mostrarFormularioEjecutarOrden=!1;break;case c.a.ETIQUETA_POR_APROBAR_PEDIDO:this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!o,command:function(t){return o?e.consultarOrdenPedido():null}},{label:c.a.ACCION_DESMAYORIZAR,icon:c.a.ICON_DESMAYORIZAR,disabled:!r,command:function(t){return r?e.desmayorizarOrdenPedido():null}},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!n,command:function(t){return n?e.anularOrdenPedido():null}},{label:c.a.ACCION_IMPRIMIR,icon:c.a.ICON_IMPRIMIR,disabled:!d,command:function(t){return d?e.imprimirOrdenPedido(e.objetoSeleccionado):null}}],this.mostrarFormularioAprobarOrden=!1,this.mostrarFormularioEjecutarOrden=!1;break;case c.a.ETIQUETA_ANULADO:this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!o,command:function(t){return o?e.consultarOrdenPedido():null}},{label:c.a.ACCION_RESTAURAR,icon:c.a.ICON_RESTAURAR,disabled:!s,command:function(t){return s?e.resturarOrdenPedido():null}},{label:c.a.ACCION_IMPRIMIR,icon:c.a.ICON_IMPRIMIR,disabled:!d,command:function(t){return d?e.imprimirOrdenPedido(e.objetoSeleccionado):null}}],this.mostrarFormularioAprobarOrden=!1,this.mostrarFormularioEjecutarOrden=!1;break;case c.a.ETIQUETA_PEDIDO_APROBADO:this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!o,command:function(t){return o?e.consultarOrdenPedido():null}},{label:c.a.ACCION_DESAPROBAR,icon:c.a.ICON_DESAPROBAR,disabled:!l,command:function(){return l?e.desAprobarOrdenPedido(e.objetoSeleccionado):null}},{label:c.a.ACCION_ANULAR,icon:c.a.ICON_ANULAR,disabled:!n,command:function(){return n?e.anularOrdenPedido():null}},{label:c.a.ACCION_IMPRIMIR,icon:c.a.ICON_IMPRIMIR,disabled:!d,command:function(t){return d?e.imprimirOrdenPedido(e.objetoSeleccionado):null}}],this.mostrarFormularioAprobarOrden=!0,this.mostrarFormularioEjecutarOrden=!1;break;case c.a.ETIQUETA_EJECUTADO:this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!o,command:function(t){return o?e.consultarOrdenPedidoEjecutado():null}},{label:c.a.ACCION_IMPRIMIR,icon:c.a.ICON_IMPRIMIR,disabled:!d,command:function(t){return d?e.imprimirOrdenPedido(e.objetoSeleccionado):null}}],this.mostrarFormularioAprobarOrden=!1,this.mostrarFormularioEjecutarOrden=!0}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.getDataSelected=function(){return this.utilService.getAGSelectedData(this.gridApi)},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoResultado.length>0){var o=this.listadoResultado.slice();e.pedfecha=JSON.parse(JSON.stringify(this.utilService.convertirFechaStringYYYYMMDD(e.pedfecha))),o.unshift(e),this.listadoResultado=o}break;case"U":e.pedfecha=JSON.parse(JSON.stringify(this.utilService.convertirFechaStringYYYYMMDD(e.pedfecha)));var a=this.listadoResultado.findIndex(function(t){return t.pedidonumero===e.pedidonumero});(o=this.listadoResultado.slice())[a]=e,this.listadoResultado=o;break;case"D":a=this.listadoResultado.findIndex(function(t){return t.pedidonumero===e.pedidonumero});(o=this.listadoResultado.slice()).splice(a,1),this.listadoResultado=o}this.refreshGrid()},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},Ia([Object(i.ViewChild)("menuOpciones"),Ea("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),Ia([Object(i.Input)(),Ea("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),Ia([Object(i.Input)(),Ea("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),Ia([Object(i.Input)(),Ea("design:type",Object)],e.prototype,"operacion",void 0),Ia([Object(i.Input)(),Ea("design:type",Boolean)],e.prototype,"filasTiempoRecargar",void 0),Ia([Object(i.Output)(),Ea("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),Ia([Object(i.Output)(),Ea("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),Ia([Object(i.Output)(),Ea("design:type",i.EventEmitter)],e.prototype,"enviarDatosOC",void 0),Ia([Object(i.ViewChild)("excelDownload"),Ea("design:type",Object)],e.prototype,"excelDownload",void 0),Ia([Object(i.HostListener)("window:resize",["$event"]),Ea("design:type",Function),Ea("design:paramtypes",[]),Ea("design:returntype",void 0)],e.prototype,"onResize",null),e=Ia([Object(i.Component)({selector:"app-listado-orden-pedido",template:o("M7Ow")}),Ea("design:paramtypes",[u.b,S.HotkeysService,Ho.a,h.a,L.a,p.a,le.a])],e)}(),Ta=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},_a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pa=function(){function e(e,t,o,a,r,n,s,l){this.utilService=e,this.archivoService=t,this.atajoService=o,this.toastr=a,this.filasService=r,this.ordenPedidoService=n,this.sistemaService=s,this.modalService=l,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.enviarLista=new i.EventEmitter,this.accion=null,this.es={},this.cargando=!1,this.activar=!1,this.vistaFormulario=!1,this.invPedidos=new na.a,this.pedidoEstado="",this.fechaActual=new Date,this.funcionesUsuario=[],this.filasTiempo=new D.a,this.listadoResultado=[],this.objetoSeleccionado=null,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.isAprobador=!1,this.isAprobadorRegistrador=!1,this.cantidadAprobadaCheck=!0,this.isCollapsed=!0,this.estilos={},this.parametro={},this.isCollapseCliente=!0,this.contactoPredeterminado=null,this.lugarEntrega=null,this.arrayContacto=[],this.arrayContactoFiltrada=[],this.arrayContactoLugarEntrega=[],this.arrayContactoLugarEntregaFiltrada=[],this.constantes=c.a,Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"99999999.99",minimumValue:"0"},this.estilos={width:"100%",height:"calc(100vh - 400px)","min-height":"135px"}}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS),this.iniciarAtajos()},e.prototype.ngOnChanges=function(e){e.data&&(this.reiniciarValores(),this.iniciarFormulario())},e.prototype.unloadHandler=function(e){if(this.accion==c.a.ACCION_CONSULTAR)return!0;e.returnValue=!1},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmOrdenPedido?e.frmOrdenPedido.value:null)),e.detalleInicial=JSON.parse(JSON.stringify(e.listadoResultado?e.listadoResultado:null))},50)},e.prototype.iniciarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFormOrdenPedido");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardar");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){return e.cancelarAccion(),!1}))},e.prototype.cancelarAccion=function(){var e=this;if(this.accion===c.a.ACCION_CONSULTAR&&this.enviarCancelar.emit(),this.utilService.puedoCancelar(this.valoresIniciales,this.frmOrdenPedido)&&this.ordenPedidoService.puedoCancelarFormularioDetalle(this.detalleInicial,this.listadoResultado))this.enviarCancelar.emit();else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarCancelar.emit()})}},e.prototype.reiniciarValores=function(){this.motivoSeleccionado=new ua.a,this.configuracion=new Bo.a,this.funcionesUsuario=[],this.activar=!1,this.frmTitulo="",this.vistaFormulario=!1},e.prototype.iniciarFormulario=function(){this.empresaSeleccionada&&this.data&&this.data.accion&&this.data.invPedidosPK&&(c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.data.accion,this.iniciarAgGrid(),this.obtenerDatosParaGenerarOP())},e.prototype.obtenerDatosParaGenerarOP=function(){var e=this;this.cargando=!0;var t=new Vo.a;t.pmEmpresa=this.data.invPedidosPK.pedEmpresa,t.pmCodigo=this.data.invPedidosPK.pedMotivo,t.pmSector=this.data.invPedidosPK.pedSector;var o={invPedidosMotivoPK:t};this.ordenPedidoService.obtenerDatosParaGenerarOP(o,this,c.a.KEY_EMPRESA_SELECT).then(function(t){t?e.formatearDatosIniciarAccion(t):e.cerrarFormulario()}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.cerrarFormulario=function(){this.enviarCancelar.emit()},e.prototype.formatearDatosIniciarAccion=function(e){this.fechaActual=new Date(e.fechaActual),this.fechaActual.setUTCSeconds(0),this.configuracion=e.invPedidosConfiguracionTO,this.funcionesUsuario=this.ordenPedidoService.establecerFuncionesUsuario(this.configuracion),this.motivoSeleccionado=new ua.a(e.invPedidosMotivo),this.realizarAccion()},e.prototype.establecerResponsables=function(){this.usrRegistradorNombre=this.data.invPedidoTO?this.data.invPedidoTO.registrador:"S/D",this.usrAprobadorNombre=this.invPedidos.pedAprobado&&this.data.invPedidoTO?this.data.invPedidoTO.aprobador:"S/D",this.isAprobadorRegistrador=this.motivoSeleccionado&&this.motivoSeleccionado.pmAprobacionAutomatica&&this.usrRegistradorNombre.trim()===this.usrAprobadorNombre.trim()&&this.invPedidos.pedObservacionesRegistra===this.invPedidos.pedObservacionesAprueba},e.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!0,vistaListado:!1})},e.prototype.cambiarEstadoCheckCabecera=function(e){this.cantidadAprobadaCheck=e,this.cantidadAprobadaCheck?this.gridApi.forEachNode(function(e){e.data.detCantidadAprobada=e.data.detCantidadSolicitada}):this.gridApi.forEachNode(function(e){e.data.detCantidadAprobada=0}),this.refreshGrid()},e.prototype.aprobarTodosPorDefecto=function(){var e=this;this.listadoResultado.forEach(function(t){t.detCantidadAprobada=t.detCantidadSolicitada,t.detObservacionesAprueba=e.motivoSeleccionado&&e.motivoSeleccionado.pmAprobacionAutomatica?t.detObservacionesRegistra:t.detObservacionesAprueba})},e.prototype.validarAntesDeEnviar=function(e){var t=!0,o=this.validarDetalle(),a=this.getRowData();return this.utilService.establecerFormularioTocado(e)&&e&&e.valid&&o?0===a.length&&(this.toastr.error(c.a.MSJ_INGRESE_DATOS_DETALLE,c.a.MSJ_TITULO_INVALIDOS),t=!1):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),t=!1),this.fechaActual>this.invPedidos.pedFechaHoraEntrega&&(e.controls.pedidoFechaHora.markAsTouched(),e.controls.pedidoFechaHora.updateValueAndValidity(),this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),t=!1),t&&(this.invPedidos.invPedidosDetalleList=a),this.cargando=t,t},e.prototype.validarDetalle=function(){var e=this,t=!0;return this.gridApi&&this.gridApi.forEachNode(function(o){var a=!e.isAprobador||e.ordenPedidoService.validarCantidadAprobar(o.data);(!(e.ordenPedidoService.validarCantidadSolicitada(o.data)&&e.ordenPedidoService.validarProducto(o.data))||!a)&&(t=!1)}),t},e.prototype.collpase=function(){this.isCollapsed=!this.isCollapsed;var e="";e=this.motivoSeleccionado&&this.motivoSeleccionado.pmExigirCliente&&this.invPedidos.invCliente?this.collapseAmbos():this.isCollapsed?"400px":"260px",this.cambiarTamanioTabla(e)},e.prototype.collpaseCliente=function(){this.isCollapseCliente=!this.isCollapseCliente;var e=this.collapseAmbos();this.cambiarTamanioTabla(e)},e.prototype.collapseAmbos=function(){return this.isCollapsed&&this.isCollapseCliente?"585px":this.isCollapsed||this.isCollapseCliente?this.isCollapsed&&!this.isCollapseCliente?"445px":"440px":"305px"},e.prototype.cambiarTamanioTabla=function(e){this.estilos={width:"100%",height:"calc(100vh - "+e+")","min-height":"135px"}},e.prototype.soloNumeros=function(e){return this.utilService.soloNumeros(e)},e.prototype.preguntarImprimirOrdenPedido=function(e){var t=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){var o={title:c.a.TOAST_CORRECTO,texto:e+"<br>"+c.a.MSJ_PREGUNTA_IMPRIMIR+"<br>",type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_IMPRIMIR+"'></i>  "+c.a.LABEL_IMPRIMIR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.imprimirInvPedidos(!0):t.enviarObjetoAListaCerrar()})}},e.prototype.enviarObjetoAListaCerrar=function(){var e=this.ordenPedidoService.crearInvPedidoTODeInvPedidos(this.invPedidos,this.configuracion,this.motivoSeleccionado);this.enviarLista.emit({objeto:e,accion:c.a.LST_ACTUALIZAR})},e.prototype.enviarNotificaciones=function(e){var t=location.protocol+"//"+location.host+location.pathname;switch(this.accion){case c.a.ACCION_APROBAR:if(this.configuracion.listAprobadores.length>0&&e.pedAprobado){if(this.motivoSeleccionado&&this.motivoSeleccionado.pmNotificarEjecutor){var o=this.ordenPedidoService.obtenerUsuariosEmail("Ejecutor",this.configuracion),a=t+c.a.MSJ_NOTIFICACION_RUTA_ENLACE_EJECUTAR,i={usuarioCorreo:o,notificacion:c.a.MSJ_NOTIFICACION_EJECUTOR+e.invPedidosPK.pedNumero+c.a.MSJ_NOTIFICACION_ACCEDER_ENLACE_EJECUTAR+'<a href="'+a+'">'+a+"</a>"};this.sistemaService.enviarNotificacionUsuario(i,this,c.a.KEY_EMPRESA_SELECT)}if(this.ordenPedidoService.estaAprobadoTodo(e)&&this.motivoSeleccionado&&this.motivoSeleccionado.pmNotificarRegistrador){var r=this.ordenPedidoService.obtenerUsuariosEmail("Registrador",this.configuracion);a=t+c.a.MSJ_NOTIFICACION_RUTA_ENLACE_APROBADOR,i={usuarioCorreo:r,notificacion:c.a.MSJ_NOTIFICACION_REGISTRADOR+e.invPedidosPK.pedNumero+c.a.MSJ_NOTIFICACION_ACCEDER_ENLACE_REGISTRADOR+'<a href="'+a+'">'+a+"</a>"};this.sistemaService.enviarNotificacionUsuario(i,this,c.a.KEY_EMPRESA_SELECT)}}}},e.prototype.ejecutarAccion=function(e,t){"verKardex"===t&&this.buscarKardex(e)},e.prototype.buscarKardex=function(e){var t=this;if(e.invProducto.invProductoPK.proCodigoPrincipal&&e.invProducto.invProductoPK.proCodigoPrincipal.length>0){var o=new Date(this.utilService.obtenerFechaInicioMes());o.setMonth(o.getMonth()-1);var a={empresa:c.a.KEY_EMPRESA_SELECT,bodega:null,producto:e.invProducto.invProductoPK.proCodigoPrincipal,desde:o,hasta:this.utilService.formatearDateToStringDDMMYYYY(this.utilService.obtenerFechaFinMes()),promedio:c.a.KEY_KARDEX_PROMEDIO,isModal:!0},i=this.modalService.open(eo,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.componentInstance.datos={vista:"produccion",empresaSeleccionada:this.empresaSeleccionada},i.componentInstance.isModal=!0,i.result.then(function(){t.actualizarFilas()},function(){t.actualizarFilas()})}else this.toastr.info(c.a.MSJ_SELECCIONE_PRODUCTO,c.a.TOAST_INFORMACION)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.ordenPedidoService.generarColumnasOrdenPedidoDetalleAprobar(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={popOverInformacion:gt.a,inputLabelCell:ft.a,botonAccion:$o.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.gridApi.sizeColumnsToFit()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.getRowData=function(){var e=[];return this.gridApi&&this.gridApi.forEachNode(function(t){e.push(t.data)}),e},e.prototype.verificarSiExigeCliente=function(){this.invPedidos.invCliente&&(this.estilos={width:"100%",height:"calc(100vh - 585px)","min-height":"135px"}),this.invPedidos.invCliente&&this.invPedidos.invCliente.invClientePK.cliCodigo&&this.crearObjetoContactoYLugar()},e.prototype.crearObjetoContactoYLugar=function(){if(this.contactoPredeterminado=null,this.lugarEntrega=null,this.arrayContactoLugarEntrega=[],this.invPedidos.pedContactoNombre&&this.invPedidos.pedContactoTelefono&&this.invPedidos.pedLugarEntrega){this.arrayContacto=this.invPedidos.invCliente.cliLugaresEntrega?JSON.parse(this.invPedidos.invCliente.cliLugaresEntrega):[];for(var e=0;e<this.arrayContacto.length;e++){var t=this.arrayContacto[e];if(this.invPedidos.pedContactoNombre&&t.contacto.trim()===this.invPedidos.pedContactoNombre.trim()){this.contactoPredeterminado=t,this.arrayContactoLugarEntrega.push(new va({nombre:this.invPedidos.pedLugarEntrega.trim()})),t.lugarEntrega&&this.arrayContactoLugarEntrega.push(new va({nombre:t.lugarEntrega})),t.lugarEntrega2&&this.arrayContactoLugarEntrega.push(new va({nombre:t.lugarEntrega2})),this.lugarEntrega=this.arrayContactoLugarEntrega.length>0?this.arrayContactoLugarEntrega[0]:null;break}}this.contactoPredeterminado||(this.contactoPredeterminado=new P,this.contactoPredeterminado.contacto=this.invPedidos.pedContactoNombre.trim(),this.contactoPredeterminado.telefono=this.invPedidos.pedContactoTelefono.trim(),this.contactoPredeterminado.lugarEntrega=this.invPedidos.pedLugarEntrega.trim(),this.lugarEntrega=new va({nombre:this.invPedidos.pedLugarEntrega.trim()}))}},e.prototype.seleccionarContacto=function(){this.arrayContactoLugarEntrega=[],this.contactoPredeterminado&&this.contactoPredeterminado.lugarEntrega&&this.arrayContactoLugarEntrega.push(new va({nombre:this.contactoPredeterminado.lugarEntrega})),this.contactoPredeterminado&&this.contactoPredeterminado.lugarEntrega2&&this.arrayContactoLugarEntrega.push(new va({nombre:this.contactoPredeterminado.lugarEntrega2})),this.lugarEntrega=this.arrayContactoLugarEntrega.length>0?this.arrayContactoLugarEntrega[0]:null,this.invPedidos.pedLugarEntrega=this.lugarEntrega,this.invPedidos.pedContactoNombre=this.contactoPredeterminado?this.contactoPredeterminado.contacto:null,this.invPedidos.pedContactoTelefono=this.contactoPredeterminado?this.contactoPredeterminado.telefono:null,this.invPedidos.pedObservacionesRegistra=this.contactoPredeterminado?this.contactoPredeterminado.recordatorio:null},e.prototype.seleccionarLugarEntrega=function(){this.invPedidos.pedLugarEntrega=this.lugarEntrega},e.prototype.filtrarContactos=function(e){var t=e.query,o=[];this.arrayContacto.forEach(function(e){0==e.contacto.toLowerCase().indexOf(t.toLowerCase())&&o.push(e)}),this.arrayContactoFiltrada=o},e.prototype.filtrarLugarEntrega=function(e){var t=e.query,o=[];this.arrayContactoLugarEntrega.forEach(function(e){0==e.nombre.toLowerCase().indexOf(t.toLowerCase())&&o.push(e)}),this.arrayContactoLugarEntregaFiltrada=o},e.prototype.realizarAccion=function(){if(this.ordenPedidoService.verificarPermiso(this.accion,this,!0))switch(this.accion){case c.a.ACCION_CONSULTAR:this.frmTitulo=c.a.PEDIDOS_CONSULTAR,this.obtenerInvPedidos();break;case c.a.ACCION_ANULAR:this.frmTitulo=c.a.PEDIDOS_ANULAR,this.obtenerInvPedidos();break;case c.a.ACCION_APROBAR:this.frmTitulo=c.a.PEDIDOS_APROBAR,this.obtenerInvPedidos();break;case c.a.ACCION_DESAPROBAR:this.frmTitulo=c.a.PEDIDOS_DESAPROBAR,this.obtenerInvPedidos()}},e.prototype.obtenerInvPedidos=function(){this.cargando=!0;var e={empresa:this.data.invPedidosPK.pedEmpresa,motivo:this.data.invPedidosPK.pedMotivo,numero:this.data.invPedidosPK.pedNumero,sector:this.data.invPedidosPK.pedSector};this.ordenPedidoService.obtenerOrdenPedido(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerOrdenPedido=function(e){this.invPedidos=this.ordenPedidoService.establecerFormatoVistaIvPedidos(e),this.invPedidos.pedObservacionesAprueba=this.accion===c.a.ACCION_APROBAR&&this.motivoSeleccionado&&this.motivoSeleccionado.pmAprobacionAutomatica?this.invPedidos.pedObservacionesRegistra:this.invPedidos.pedObservacionesAprueba,this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),this.listadoResultado=this.invPedidos.invPedidosDetalleList,this.establecerResponsables(),this.vistaFormulario=!0,this.cambiarActivar(),this.cargando=!1,this.invPedidos.invCliente&&(this.estilos={width:"100%",height:"calc(100vh - 585px)","min-height":"135px"}),this.verificarSiExigeCliente(),this.accion===c.a.ACCION_APROBAR&&this.aprobarTodosPorDefecto(),this.iniciarAgGrid(),this.extraerValoresIniciales()},e.prototype.anularOrdenPedido=function(){var e=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_ANULAR,this,!0)){var t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ANULAR_ORDEN_PEDIDO,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ANULAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&(e.cargando=!0,e.ordenPedidoService.anularOrdenPedido({invPedidosPK:e.invPedidos.invPedidosPK,tipo:"APROBAROP"},e,c.a.KEY_EMPRESA_SELECT))})}},e.prototype.despuesDeAnularOrdenPedido=function(e){this.invPedidos.pedAprobado=!1,this.invPedidos.pedAnulado=!0,this.cargando=!1,this.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),this.enviarObjetoAListaCerrar()},e.prototype.actualizarOrdenPedido=function(e,t,o){var a=this;this.cargando=!0,this.isAprobador=this.accion===c.a.ACCION_APROBAR,this.sistemaService.getFechaInicioActualMes(this,c.a.KEY_EMPRESA_SELECT).then(function(i){if(a.fechaActual=i[1],a.validarAntesDeEnviar(e)){var r=a.ordenPedidoService.formatearOrdenPedido(a.invPedidos,t,a,o);if(r.pedContactoNombre=a.contactoPredeterminado&&a.contactoPredeterminado.contacto?a.contactoPredeterminado.contacto.toUpperCase():a.contactoPredeterminado,r.pedLugarEntrega=a.lugarEntrega&&a.lugarEntrega.nombre?a.lugarEntrega.nombre.toUpperCase():a.lugarEntrega,r.pedAnulado){a.cargando=!1;var n={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ANULAR_ORDEN_PEDIDO,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ANULAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};a.utilService.generarSwallConfirmacionHtml(n).then(function(e){if(e){var t=a.ordenPedidoService.obtenerAccionInvPedidos(a.accion);a.parametro={invPedidos:r,accion:t},a.ordenPedidoService.actualizarOrdenPedido(a.parametro,a,c.a.KEY_EMPRESA_SELECT)}})}else{var s=a.ordenPedidoService.obtenerAccionInvPedidos(a.accion);a.parametro={invPedidos:r,accion:s},a.ordenPedidoService.actualizarOrdenPedido(a.parametro,a,c.a.KEY_EMPRESA_SELECT)}}}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.despuesDeActualizarOrdenPedido=function(e){this.invPedidos=this.ordenPedidoService.establecerFormatoVistaIvPedidos(e.extraInfo),this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),this.enviarNotificaciones(this.parametro.invPedidos),"PEDIDO APROBADO"===this.pedidoEstado||"PENDIENTE"===this.pedidoEstado||"EJECUTADO"===this.pedidoEstado&&this.ordenPedidoService.puedeImprimirInvPedidos(this.invPedidos.invPedidosDetalleList)?this.preguntarImprimirOrdenPedido(e.operacionMensaje):(this.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),this.enviarObjetoAListaCerrar())},e.prototype.desaprobarPedido=function(){var e=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_DESAPROBAR,this,!0)){var t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_DESAPROBAR,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_DESAPROBAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0;var o=e.ordenPedidoService.formatearOrdenPedido(e.invPedidos,!1,e,null);e.ordenPedidoService.desaprobarOrdenPedido({invPedidos:o},e,c.a.KEY_EMPRESA_SELECT)}})}},e.prototype.despuesDeDesaprobarOrdenPedido=function(e){this.cargando=!1,this.invPedidos=this.ordenPedidoService.establecerFormatoVistaIvPedidos(e.extraInfo),this.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),this.enviarObjetoAListaCerrar()},e.prototype.imprimirInvPedidos=function(e){var t=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){if(this.cargando=!0,this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),0===this.ordenPedidoService.establecerFormatoEnvioIvPedidos(this.invPedidos,this.pedidoEstado).invPedidosDetalleList.length)return this.toastr.warning(c.a.MSJ_NO_DATOS_IMPRIMIR,c.a.TAG_AVISO),void(this.cargando=!1);var o={invPedidosPK:new ha.a(this.invPedidos.invPedidosPK),nombreReporte:c.a.NOMBRE_REPORTE_APROBAR_ORDEN_PEDIDO};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosGeneral",o,this.empresaSeleccionada).then(function(o){o._body.byteLength>0?t.utilService.descargarArchivoPDF("ordenDePedido"+t.utilService.obtenerHorayFechaActual()+".pdf",o):t.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR),e&&t.enviarObjetoAListaCerrar(),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},e.prototype.exportarInvPedidos=function(){var e=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){if(this.cargando=!0,this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),0===this.ordenPedidoService.establecerFormatoEnvioIvPedidos(this.invPedidos,this.pedidoEstado).invPedidosDetalleList.length)return this.toastr.warning(c.a.MSJ_NO_DATOS_EXPORTAR,c.a.TAG_AVISO),void(this.cargando=!1);var t={invPedidosPK:new ha.a(this.invPedidos.invPedidosPK)};this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidos",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"OrdenPedido_"):e.toastr.warning(c.a.MSJ_NO_DATA),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},Ta([Object(i.Input)(),_a("design:type",Object)],e.prototype,"data",void 0),Ta([Object(i.Input)(),_a("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),Ta([Object(i.Output)(),_a("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),Ta([Object(i.Output)(),_a("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),Ta([Object(i.Output)(),_a("design:type",i.EventEmitter)],e.prototype,"enviarLista",void 0),Ta([Object(i.ViewChild)("frmOrdenPedido"),_a("design:type",I.NgForm)],e.prototype,"frmOrdenPedido",void 0),Ta([Object(i.HostListener)("window:beforeunload",["$event"]),_a("design:type",Function),_a("design:paramtypes",[Event]),_a("design:returntype",void 0)],e.prototype,"unloadHandler",null),Ta([Object(i.HostListener)("window:resize",["$event"]),_a("design:type",Function),_a("design:paramtypes",[]),_a("design:returntype",void 0)],e.prototype,"onResize",null),e=Ta([Object(i.Component)({selector:"app-aprobar-orden-pedido-formulario",template:o("OQWk")}),_a("design:paramtypes",[h.a,le.a,S.HotkeysService,u.b,L.a,Ho.a,qt.a,T.b])],e)}(),Na=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ya=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Da=function(){function e(e,t,o,a,r,n,s,l,d){this.api=e,this.utilService=t,this.archivoService=o,this.atajoService=a,this.toastr=r,this.filasService=n,this.ordenPedidoService=s,this.sistemaService=l,this.modalService=d,this.enviarCancelar=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.enviarLista=new i.EventEmitter,this.enviarAccion=new i.EventEmitter,this.accion=null,this.es={},this.cargando=!1,this.activar=!1,this.vistaFormulario=!1,this.paraOrdenCompra=!0,this.invPedidos=new na.a,this.pedidoEstado="",this.registradorAprobadorIgual=!1,this.fechaActual=new Date,this.funcionesUsuario=[],this.filasTiempo=new D.a,this.dataFormularioCompra=null,this.listadoResultado=[],this.columnDefs=[],this.isAprobador=!1,this.isCollapsed=!0,this.estilos={},this.parametro={},this.isCollapseCliente=!0,this.clienteCodigo=null,this.contactoPredeterminado=new P,this.arrayLugarEntrega=[],this.indiceDeContactoPredeterminado=0,this.constantes=c.a,Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.estilos={width:"100%",height:"calc(100vh - 410px)","min-height":"135px"}}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS),this.iniciarAtajos()},e.prototype.ngOnChanges=function(e){e.data&&this.iniciarFormulario()},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.iniciarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFormOrdenPedido");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimir");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportar");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){return e.cancelarAccion(),!1}))},e.prototype.iniciarFormulario=function(){this.empresaSeleccionada&&this.data&&this.data.accion&&this.data.invPedidosPK&&(c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.data.accion,this.obtenerDatosParaGenerarOP())},e.prototype.consultarOrdenesCompra=function(e){var t=e.detSecuencial;this.dataFormularioCompra={accion:c.a.ACCION_CARRITO,detSecuencial:t},this.enviarAccion.emit(this.dataFormularioCompra)},e.prototype.obtenerDatosParaGenerarOP=function(){var e=this;this.cargando=!0;var t=new Vo.a;t.pmEmpresa=this.data.invPedidosPK.pedEmpresa,t.pmCodigo=this.data.invPedidosPK.pedMotivo,t.pmSector=this.data.invPedidosPK.pedSector;var o={invPedidosMotivoPK:t};this.ordenPedidoService.obtenerDatosParaGenerarOP(o,this,c.a.KEY_EMPRESA_SELECT).then(function(t){t?e.formatearDatosIniciarAccion(t):e.cerrarFormulario()}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.cerrarFormulario=function(){this.enviarCancelar.emit()},e.prototype.formatearDatosIniciarAccion=function(e){this.fechaActual=new Date(e.fechaActual),this.fechaActual.setUTCSeconds(0),this.configuracion=e.invPedidosConfiguracionTO,this.funcionesUsuario=this.ordenPedidoService.establecerFuncionesUsuario(this.configuracion),this.motivoSeleccionado=new ua.a(e.invPedidosMotivo),this.realizarAccion()},e.prototype.realizarAccion=function(){if(this.ordenPedidoService.verificarPermiso(this.accion,this,!0))switch(this.accion){case c.a.ACCION_CONSULTAR:this.frmTitulo=c.a.PEDIDOS_CONSULTAR,this.obtenerInvPedidos();break;case c.a.ACCION_ELIMINAR:this.frmTitulo=c.a.PEDIDOS_ELIMINAR,this.obtenerInvPedidos()}this.iniciarAgGrid()},e.prototype.establecerResponsables=function(){this.usrRegistradorNombre=this.data.invPedidoTO?this.data.invPedidoTO.registrador:"S/D",this.usrAprobadorNombre=this.invPedidos.pedAprobado&&this.data.invPedidoTO?this.data.invPedidoTO.aprobador:"S/D",this.usrEjecutorNombre=this.invPedidos.pedEjecutado&&this.data.invPedidoTO?this.data.invPedidoTO.ejecutor:"S/D",this.registradorAprobadorIgual=this.usrRegistradorNombre===this.usrAprobadorNombre},e.prototype.imprimirInvPedidos=function(e){var t=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){if(this.cargando=!0,this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),0===this.ordenPedidoService.establecerFormatoEnvioIvPedidos(this.invPedidos,this.pedidoEstado).invPedidosDetalleList.length)return this.toastr.warning(c.a.MSJ_NO_DATOS_IMPRIMIR,c.a.TAG_AVISO),void(this.cargando=!1);var o={invPedidosPK:new ha.a(this.invPedidos.invPedidosPK),nombreReporte:c.a.NOMBRE_REPORTE_APROBAR_ORDEN_PEDIDO};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosGeneral",o,this.empresaSeleccionada).then(function(o){o._body.byteLength>0?t.utilService.descargarArchivoPDF("ordenDePedido "+t.utilService.obtenerHorayFechaActual()+".pdf",o):t.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR),e&&t.cancelarAccion(),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}},e.prototype.exportarInvPedidos=function(){var e=this;if(this.ordenPedidoService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){if(this.cargando=!0,this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),0===this.ordenPedidoService.establecerFormatoEnvioIvPedidos(this.invPedidos,this.pedidoEstado).invPedidosDetalleList.length)return this.toastr.warning(c.a.MSJ_NO_DATOS_EXPORTAR,c.a.TAG_AVISO),void(this.cargando=!1);var t={invPedidosPK:new ha.a(this.invPedidos.invPedidosPK)};this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidos",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"OrdenPedido_"):e.toastr.warning(c.a.MSJ_NO_DATA),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.eliminarOrdenPedido=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this,!0)){var t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ELIMINAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0;var o={invPedidosPK:new ha.a(e.invPedidos.invPedidosPK)};e.api.post("todocompuWS/pedidosWebController/eliminarInvPedidos",o,c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.extraInfo?(e.toastr.success(t.operacionMensaje,c.a.TOAST_CORRECTO),e.enviarLista.emit({objeto:e.ordenPedidoService.crearInvPedidoTODeInvPedidos(e.invPedidos,e.configuracion,e.motivoSeleccionado),accion:c.a.LST_ELIMINAR})):e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}})}},e.prototype.cambiarActivar=function(e){this.activar=e||!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!0,vistaListado:!1})},e.prototype.cancelarAccion=function(){this.enviarCancelar.emit()},e.prototype.collpase=function(){this.isCollapsed=!this.isCollapsed;var e="";e=this.motivoSeleccionado.pmExigirCliente&&this.invPedidos.invCliente?this.collapseAmbos():this.isCollapsed?"410px":"265px",this.cambiarTamanioTabla(e)},e.prototype.collpaseCliente=function(){this.isCollapseCliente=!this.isCollapseCliente;var e=this.collapseAmbos();this.cambiarTamanioTabla(e)},e.prototype.collapseAmbos=function(){return this.isCollapsed&&this.isCollapseCliente?"585px":this.isCollapsed||this.isCollapseCliente?this.isCollapsed&&!this.isCollapseCliente?"445px":"475px":"305px"},e.prototype.cambiarTamanioTabla=function(e){this.estilos={width:"100%",height:"calc(100vh - "+e+")"}},e.prototype.soloNumeros=function(e){return this.utilService.soloNumeros(e)},e.prototype.obtenerFechaServidor=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,c.a.KEY_EMPRESA_SELECT).then(function(t){e.invPedidos.pedFechaHoraEntrega=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.ordenPedidoService.generarColumnasOrdenPedidoDetalle(this,this.accion),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={popOverInformacion:gt.a,botonAccion:$o.a}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.gridApi.sizeColumnsToFit()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.buscarKardex=function(e){var t=this;if(e.invProducto.invProductoPK.proCodigoPrincipal&&e.invProducto.invProductoPK.proCodigoPrincipal.length>0){var o=new Date(this.utilService.obtenerFechaInicioMes());o.setMonth(o.getMonth()-1);var a={empresa:c.a.KEY_EMPRESA_SELECT,bodega:null,producto:e.invProducto.invProductoPK.proCodigoPrincipal,desde:o,hasta:this.utilService.formatearDateToStringDDMMYYYY(this.utilService.obtenerFechaFinMes()),promedio:c.a.KEY_KARDEX_PROMEDIO,isModal:!0},i=this.modalService.open(eo,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.componentInstance.datos={vista:"produccion",empresaSeleccionada:this.empresaSeleccionada},i.componentInstance.isModal=!0,i.result.then(function(){t.actualizarFilas()},function(){t.actualizarFilas()})}else this.toastr.info(c.a.MSJ_SELECCIONE_PRODUCTO,c.a.TOAST_INFORMACION)},e.prototype.obtenerInvPedidos=function(){this.cargando=!0;var e={empresa:this.data.invPedidosPK.pedEmpresa,motivo:this.data.invPedidosPK.pedMotivo,numero:this.data.invPedidosPK.pedNumero,sector:this.data.invPedidosPK.pedSector};this.ordenPedidoService.obtenerOrdenPedido(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerOrdenPedido=function(e){this.invPedidos=this.ordenPedidoService.establecerFormatoVistaIvPedidos(e),this.pedidoEstado=this.ordenPedidoService.getEstadoInvPedidos(this.invPedidos),this.listadoResultado=this.invPedidos.invPedidosDetalleList,this.establecerResponsables(),this.vistaFormulario=!0,this.cambiarActivar(!0),this.cargando=!1,this.motivoSeleccionado.pmExigirCliente&&this.invPedidos.invCliente&&(this.estilos={width:"100%",height:"calc(100vh - 585px)"}),this.motivoSeleccionado.pmExigirCliente&&this.invPedidos.invCliente&&(this.clienteCodigo=this.invPedidos.invCliente.invClientePK.cliCodigo)},e.prototype.ejecutarAccion=function(e,t){"verKardex"===t&&this.buscarKardex(e),"consultarOrdenesCompra"===t&&this.consultarOrdenesCompra(e)},Na([Object(i.Input)(),ya("design:type",Object)],e.prototype,"data",void 0),Na([Object(i.Input)(),ya("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),Na([Object(i.Output)(),ya("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),Na([Object(i.Output)(),ya("design:type",i.EventEmitter)],e.prototype,"enviarActivar",void 0),Na([Object(i.Output)(),ya("design:type",i.EventEmitter)],e.prototype,"enviarLista",void 0),Na([Object(i.Output)(),ya("design:type",i.EventEmitter)],e.prototype,"enviarAccion",void 0),Na([Object(i.HostListener)("window:resize",["$event"]),ya("design:type",Function),ya("design:paramtypes",[]),ya("design:returntype",void 0)],e.prototype,"onResize",null),e=Na([Object(i.Component)({selector:"app-detalle-pedido-para-orden-compra",template:o("PwPW")}),ya("design:paramtypes",[p.a,h.a,le.a,S.HotkeysService,u.b,L.a,Ho.a,qt.a,T.b])],e)}(),La=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ma=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},xa=function(){function e(e){this.utilService=e,this.listaIA=new Array,this.constantes=c.a,this.columnDefs=[],this.isScreamMd=!0}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS),this.iniciarAgGrid(),this.formatearIA()},e.prototype.formatearIA=function(){if(this.invVentasTO&&this.invVentasTO.vtaInformacionAdicional){var e=this.invVentasTO.vtaInformacionAdicional.split("|");if(null!=e)for(var t=0;t<e.length;t++){var o=e[t].split("=");if(null!=o&&o.length>1){var a=new W.a;a.clave=o[0]+"",a.valor=o[1]+"",this.listaIA.push(a)}}}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.generarColumnas(),this.rowSelection="single",this.context={componentParent:this}},e.prototype.generarColumnas=function(){var e=this,t=[];return t.push({headerName:c.a.TAG_ATRIBUTO,field:"clave",width:50,minWidth:50,cellClass:"text-uppercase",cellClassRules:{"cell-with-errors":function(e){return!e.data.clave&&e.data.valor||!e.data.clave&&!e.data.valor}},suppressKeyboardEvent:function(t){switch(t.event.keyCode){case c.a.KEYCODE_TAB:e.valorFocusAndEditingCell(t.node.rowIndex);break;case c.a.KEYCODE_DOWN:case c.a.KEYCODE_UP:if(t.editing)return e.utilService.desplazarTablaArribaAbajo(t.event.keyCode,t.node.rowIndex,e.listaIA);break;default:return!0}},editable:this.puedeEditar,cellEditorFramework:Jo.a,cellEditorParams:{name:"clave",maxlength:150,inputClass:"text-uppercase",placeholder:""}},{headerName:c.a.TAG_VALOR,field:"valor",width:100,minWidth:100,cellClass:"text-uppercase",cellClassRules:{"cell-with-errors":function(e){return e.data.clave&&!e.data.valor||!e.data.clave&&!e.data.valor}},editable:this.puedeEditar,suppressKeyboardEvent:function(t){switch(t.event.keyCode){case c.a.KEYCODE_DOWN:case c.a.KEYCODE_UP:if(t.editing)return e.utilService.desplazarTablaArribaAbajo(t.event.keyCode,t.node.rowIndex,e.listaIA);break;default:return!0}},cellEditorFramework:Jo.a,cellEditorParams:{name:"valor",inputClass:"text-uppercase mousetrap"}}),this.puedeEditar&&t.push({headerName:c.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:"text-center",width:20,minWidth:20,cellRendererFramework:de.a,headerComponentFramework:pe.a,headerComponentParams:{class:c.a.ICON_OPCIONES,tooltip:c.a.TAG_OPCIONES,text:"",enableSorting:!1}}),t},e.prototype.generarOpciones=function(){var e=this;this.opciones=[{label:c.a.ACCION_AGREGAR_FILA,icon:c.a.ICON_FLECHA_ABAJO,command:function(){return e.agregarFila()}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,command:function(){return e.eliminarFila()}}]},e.prototype.eliminarFila=function(){var e=this.listaIA.slice();e.splice(this.indiceSeleccionado,1),this.listaIA=e,this.refreshGrid()},e.prototype.agregarFila=function(){var e=this,t=new W.a;this.listaIA.push(t);var o=this.listaIA.length;setTimeout(function(){e.gridApi.setFocusedCell(o-1,"clave"),e.gridApi.startEditingCell({rowIndex:o-1,colKey:"clave"})},50),this.gridApi&&this.gridApi.updateRowData({add:[t]})},e.prototype.valorFocusAndEditingCell=function(e){this.gridApi.setFocusedCell(e,"valor"),this.gridApi.startEditingCell({rowIndex:e,colKey:"valor"})},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.gridApi.sizeColumnsToFit(),this.redimensionarColumnas()},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.filaFocused=function(e){this.indiceSeleccionado=e.rowIndex;var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;a&&a.getColDef().editable&&this.gridApi&&a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}),this.iaSseleccionado=t?t.data:null},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.puedeEditar&&(this.iaSseleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS)},La([Object(i.Input)(),Ma("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),La([Object(i.Input)(),Ma("design:type",tt)],e.prototype,"invVentasTO",void 0),La([Object(i.Input)(),Ma("design:type",Boolean)],e.prototype,"puedeEditar",void 0),La([Object(i.Input)(),Ma("design:type",Array)],e.prototype,"listaIA",void 0),La([Object(i.ViewChild)("menuOpciones"),Ma("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),La([Object(i.HostListener)("window:resize",["$event"]),Ma("design:type",Function),Ma("design:paramtypes",[]),Ma("design:returntype",void 0)],e.prototype,"onResize",null),e=La([Object(i.Component)({selector:"app-venta-informacion-adicional",template:o("rT3V")}),Ma("design:paramtypes",[h.a])],e)}(),Fa=o("1t1C"),wa=o("AP3O"),Ga=o("nxr/"),ja=function(){function e(e){this.id=null,this.ctaCodigo=null,this.ctaDetalle=null,this.secCodigo=null,this.pisNumero=null,this.detDocumento=null,this.detCreditos=0,this.detDebitos=0,this.detObservaciones=null,this.detSecuencia=null,this.detGenerado=!1,this.detReferencia=null,this.conCuentas=new Fa.a,this.conEstado=!0,this.conCuentaVacia=!1,this.conEstadoDebitoCreditoValido=!0,this.conChequeRepetido=!1,this.conChequeImprimir=!1,this.conFilaEstado=!0,this.piscinaSeleccionada=new wa.a,this.sectorSeleccionado=new Ga.a,this.debidoCredito="",this.saldo=null,this.listapiscinaSeleccionada=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.conCuentas=e.conCuentas?e.conCuentas:this.conCuentas,this.conEstado=e.conEstado?e.conEstado:this.conEstado,this.conFilaEstado=e.conFilaEstado?e.conFilaEstado:this.conFilaEstado,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.ctaDetalle=e.ctaDetalle?e.ctaDetalle:this.ctaDetalle,this.debidoCredito=e.debidoCredito?e.debidoCredito:this.debidoCredito,this.detCreditos=e.detCreditos?e.detCreditos:this.detCreditos,this.detDebitos=e.detDebitos?e.detDebitos:this.detDebitos,this.detDocumento=e.detDocumento?e.detDocumento:this.detDocumento,this.detGenerado=e.detGenerado?e.detGenerado:this.detGenerado,this.detObservaciones=e.detObservaciones?e.detObservaciones:this.detObservaciones,this.detSecuencia=e.detSecuencia?e.detSecuencia:this.detSecuencia,this.id=e.id?e.id:this.id,this.listapiscinaSeleccionada=e.listapiscinaSeleccionada?e.listapiscinaSeleccionada:this.listapiscinaSeleccionada,this.pisNumero=e.pisNumero?e.pisNumero:this.pisNumero,this.piscinaSeleccionada=e.piscinaSeleccionada?e.piscinaSeleccionada:this.piscinaSeleccionada,this.saldo=e.saldo?e.saldo:this.saldo,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.sectorSeleccionado=e.sectorSeleccionado?e.sectorSeleccionado:this.sectorSeleccionado,this.conCuentaVacia=e.conCuentaVacia?e.conCuentaVacia:this.conCuentaVacia,this.conEstadoDebitoCreditoValido=e.conEstadoDebitoCreditoValido?e.conEstadoDebitoCreditoValido:this.conEstadoDebitoCreditoValido,this.conChequeRepetido=e.conChequeRepetido?e.conChequeRepetido:this.conChequeRepetido,this.conChequeImprimir=e.conChequeImprimir?e.conChequeImprimir:this.conChequeImprimir},e}(),Ua=o("0uIf"),Ba=o("BPXi"),Va=function(){function e(e){this.conContable=new Ua.a,this.detalle=null,this.periodoSeleccionado=new Ye.a,this.tipoSeleccionado=new Ba.a,this.hydrate(e)}return e.prototype.hydrate=function(e){this.conContable=e?e.conContable:this.conContable,this.detalle=e?e.detalle:this.detalle,this.periodoSeleccionado=e?e.periodoSeleccionado:this.periodoSeleccionado,this.tipoSeleccionado=e?e.tipoSeleccionado:this.tipoSeleccionado},e}(),ka=o("5Gob"),Wa=o("FejU"),za=o("bodW"),Ja=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ka=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ya=function(){function e(e,t,o,a,r,n,s,c,l,d){this.utilService=e,this.api=t,this.toastr=o,this.modalService=a,this.auth=r,this.atajoService=n,this.archivoService=s,this.filasService=c,this.contableService=l,this.tipoContableService=d,this.cargandoEstado=new i.EventEmitter,this.activarEstado=new i.EventEmitter,this.cerrarContabilidadAcciones=new i.EventEmitter,this.listaFiltrado=[],this.listaPeriodos=[],this.listaSectores=[],this.listaCuentasDeBanco=[],this.objetoContable=new Va,this.conContable=new Ua.a,this.periodoSeleccionado=new Ye.a,this.objetoSeleccionado=new ja,this.tituloForm="",this.tipoConcepto="",this.totalesDebitos=0,this.totalesCreditos=0,this.totalesDiferencia=0,this.fechaMin=null,this.fechaMax=null,this.activar=!0,this.mostrarContable=!1,this.constantes=null,this.es={},this.isCompra=!1,this.objetoAlDesmayorizar=null,this.filasTiempo=new D.a,this.formularioCorrecto=!1,this.detalleValido=!1,this.fechaValido=!0,this.isValidoCheques=!1,this.isValidoCuentas=!1,this.isValidoDebitosCreditos=!1,this.listaTipos=[],this.tipoSeleccionado=new Ba.a,this.screamXS=!0,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.rowSelection="single",this.isCollapsed=!1,this.estilos={},this.configuracionAutoNumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"9999999.99",minimumValue:"0"}}return e.prototype.ngOnInit=function(){this.constantes=c.a,this.screamXS=window.innerWidth<c.a.WINDOW_WIDTH_XS,Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.obtenerDatosParaCrudContable(),this.data&&(this.operaciones(),this.generarOpcionesDetalle()),this.estilos={width:"100%",height:"calc(100vh - 394px)"},this.inicializarAtajos()},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmContableDetalle?e.frmContableDetalle.value:null)),e.listaFiltradoInicial=JSON.parse(JSON.stringify(e.listaFiltrado?e.listaFiltrado:null))},50)},e.prototype.inicializarRangoPeriodoSeleccionado=function(){this.data.accion===c.a.ACCION_NUEVO?(this.fechaMin=new Date(this.listaPeriodos[this.listaPeriodos.length-1].perDesde),this.fechaMax=new Date(this.listaPeriodos[0].perHasta),this.periodoSeleccionado=new Ye.a,this.periodoSeleccionado.perDesde=JSON.parse(JSON.stringify(this.fechaMin.getTime())),this.periodoSeleccionado.perHasta=JSON.parse(JSON.stringify(this.fechaMax.getTime()))):(this.fechaMin=new Date(this.periodoSeleccionado.perDesde),this.fechaMax=new Date(this.periodoSeleccionado.perHasta))},e.prototype.inicializarAtajos=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirContable");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarContable");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarContable");return e&&e.click(),!1}))},e.prototype.inicializarValores=function(){var e=this.conContable.conReferencia?this.conContable.conReferencia.split("."):null;this.isCompra=!!e&&"inv_compras"===e[1],this.listaSectores=this.data.listadoSectores,this.listaPeriodos=this.data.listaPeriodos,this.objetoSeleccionado=this.listaFiltrado[0],this.activar=this.data.activar,this.data.accion!==c.a.ACCION_NUEVO&&this.generarTotales(),this.inicializarRangoPeriodoSeleccionado(),this.cerrarContabilidadAcciones.emit({mostrarContilidadAcciones:!0,objetoEnviar:this.data,contable:null,noIniciarAtajoPadre:!0}),this.cargandoEstado.emit(!1),this.tipoConcepto=this.objetoContable.tipoSeleccionado.tipTipoPrincipal===c.a.LISTA_TIPOS[2]?c.a.TAG_CONCEPTO:c.a.TAG_BENEFICIARIO,this.mostrarContable=!0,this.filasTiempo.finalizarContador(),this.extraerValoresIniciales(),this.iniciarAgGrid(),this.inicializarAtajos()},e.prototype.obtenerDatosParaCrudContable=function(){var e={empresa:c.a.KEY_EMPRESA_SELECT};this.contableService.obtenerDatosParaCrudContable(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosParaCrudContable=function(e){this.listaCuentasDeBanco=e.cuentaBanco,this.despuesDeListarTipoContable(e.tipos)},e.prototype.listarTipos=function(){this.listaTipos=[];var e={empresa:c.a.KEY_EMPRESA_SELECT};this.tipoContableService.listarTipoContable(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarTipoContable=function(e){var t=this;this.listaTipos=e||[],this.listaTipos.length>0?this.tipoSeleccionado=this.tipoSeleccionado?this.listaTipos.find(function(e){return e.tipCodigo===t.tipoSeleccionado.tipCodigo}):this.listaTipos[0]:this.tipoSeleccionado=null},e.prototype.operaciones=function(){switch(this.filasTiempo.iniciarContador(),this.data.accion){case c.a.ACCION_NUEVO:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_NUEVO,this,!0)?(this.tituloForm=c.a.TITULO_FORM_NUEVO_COMPROBANTE_CONTABLE,this.nuevoContable()):this.cargandoEstado.emit(!1);break;case c.a.ACCION_CONSULTAR:this.tituloForm=c.a.TITULO_FORM_CONSULTA_COMPROBANTE_CONTABLE,this.obtenerObjetoItemListaContableTO();break;case c.a.ACCION_MAYORIZAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_MAYORIZAR,this,!0)?(this.tituloForm=c.a.TITULO_FORM_MAYORIZAR_COMPROBANTE_CONTABLE,this.obtenerContablePorOperacion()):this.cargandoEstado.emit(!1);break;case c.a.ACCION_DESMAYORIZAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_DESMAYORIZAR,this,!0)?this.desmayorizarContable():this.cargandoEstado.emit(!1);break;case c.a.ACCION_REVERSAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_REVERSAR,this,!0)?(this.tituloForm=c.a.TITULO_FORM_REVERSAR_COMPROBANTE_CONTABLE,this.obtenerContablePorOperacion()):this.cargandoEstado.emit(!1);break;case c.a.ACCION_ANULAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_ANULAR,this,!0)?(this.tituloForm=c.a.TITULO_FORM_ANULAR_COMPROBANTE_CONTABLE,this.obtenerContablePorOperacion()):this.cargandoEstado.emit(!1);break;case c.a.ACCION_RESTAURAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_RESTAURAR,this,!0)?this.restaurarContable():this.cargandoEstado.emit(!1);break;case c.a.ACCION_DESBLOQUEAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_DESBLOQUEAR,this,!0)?this.desbloquerContable():this.cargandoEstado.emit(!1)}},e.prototype.nuevoContable=function(){this.objetoContable=new Va,this.objetoContable.tipoSeleccionado=this.data.tipoContable,this.conContable=new Ua.a,this.listaFiltrado.push(new ja),this.listaFiltrado[0].sectorSeleccionado=this.data.listadoSectores[0],this.tipoSeleccionado=this.data.tipoContable,this.listarPiscina(this.listaFiltrado[0]),this.inicializarValores(),this.verificarFechaValida(),this.extraerValoresIniciales()},e.prototype.desmayorizarContable=function(){this.contableService.desmayorizarContable(this,this.obtenerconContablePK())},e.prototype.despuesDeDesmayorizarContable=function(e){this.cargandoEstado.emit(!1),this.toastr.success(e.operacionMensaje,c.a.TAG_AVISO),this.objetoAlDesmayorizar=e.extraInfo,this.data.empresaSeleccionada.listaSisPermisoTO.gruMayorizarContables?this.confirmacionMayorizar(e.extraInfo):this.data.volverACargar?this.cerrarDefinitivo(!1):this.cerrarDefinitivo(e.extraInfo)},e.prototype.restaurarContable=function(){this.cargandoEstado.emit(!0),this.contableService.restaurarContable(this,this.obtenerconContablePK())},e.prototype.despuesDeRestaurarContable=function(e){this.cargandoEstado.emit(!1),this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje),this.data.volverACargar?this.cerrarDefinitivo(!1):this.cerrarDefinitivo(e.extraInfo)},e.prototype.desbloquerContable=function(){this.cargandoEstado.emit(!0);var e={conContablePK:this.utilService.obtenerConContablePK(this.data.contable,c.a.KEY_EMPRESA_SELECT,"|"),usuario:this.auth.getCodigoUser()};this.contableService.desbloquerContable(this,e)},e.prototype.despuesDeDesbloquerContable=function(e){this.cargandoEstado.emit(!1),this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje),this.data.volverACargar?this.cerrarDefinitivo(!1):this.cerrarDefinitivo(e.extraInfo)},e.prototype.mayorizarContable=function(e){this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_MAYORIZAR,this,!0)&&(this.cargandoEstado.emit(!0),this.contableService.mayorizarContable(this,e))},e.prototype.despuesDeMayorizarContable=function(e){this.cargandoEstado.emit(!1),this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK),this.data.volverACargar?this.cerrarDefinitivo(!0):this.cerrarDefinitivo(e.extraInfo)},e.prototype.anularReversarContable=function(e){this.contableService.anularReversarContable(this,e)},e.prototype.despuesDeAnularReversarContable=function(e){this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje),this.data.volverACargar?this.cerrarDefinitivo(!1):this.cerrarDefinitivo(e.extraInfo)},e.prototype.insertarContable=function(e){this.contableService.insertarContable(this,e)},e.prototype.despuesDeInsertarContable=function(e){this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK),this.cerrarDefinitivo(e.extraInfo)},e.prototype.obtenerObjetoItemListaContableTO=function(){var e=this;this.api.post("todocompuWS/contabilidadWebController/consultaContable",this.obtenerconContablePK(),c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===c.a.KEY_EXITO?(e.objetoContable=new Va(t.extraInfo),e.data.listadoSectores=t.extraInfo.listasectorSeleccionado,e.conContable=e.objetoContable.conContable,e.conContable.conFecha=e.utilService.formatoDateSinZonaHorariaYYYMMDD(e.objetoContable.conContable.conFecha),e.listaFiltrado=e.objetoContable.detalle,e.llenarSectorSeleccionado(),e.periodoSeleccionado=new Ye.a(t.extraInfo.periodoSeleccionado),e.tipoSeleccionado=e.objetoContable.tipoSeleccionado,e.inicializarValores(),e.cargandoEstado.emit(!1),e.extraerValoresIniciales()):(e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO),e.cerrarDefinitivo(null))}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.llenarSectorSeleccionado=function(){for(var e=this,t=function(t){o.listaFiltrado[t].sectorSeleccionado=o.listaFiltrado[t].sectorSeleccionado?o.data.listadoSectores.find(function(o){return o.secCodigo===e.listaFiltrado[t].sectorSeleccionado.secCodigo}):null,o.listaFiltrado[t].piscinaSeleccionada=o.listaFiltrado[t].piscinaSeleccionada?o.listaFiltrado[t].listapiscinaSeleccionada.find(function(o){return o.pisNumero===e.listaFiltrado[t].piscinaSeleccionada.pisNumero}):null},o=this,a=0;a<this.listaFiltrado.length;a++)t(a)},e.prototype.imprimirContable=function(){var e=this;if(this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_IMPRIMIR,this,!0)){this.cargandoEstado.emit(!0);var t=new ka.a,o=[];t.empCodigo=this.data.empresaSeleccionada.empCodigo,t.perCodigo=this.conContable.conContablePK.conPeriodo,t.tipCodigo=this.conContable.conContablePK.conTipo,t.conNumero=this.conContable.conContablePK.conNumero,t.conFecha=this.utilService.convertirFechaStringDDMMYYYY(JSON.parse(JSON.stringify(this.conContable.conFecha))),t.conPendiente=this.conContable.conPendiente?c.a.ETIQUETA_PENDIENTE:" ",t.conAnulado=this.conContable.conAnulado?c.a.ETIQUETA_ANULADO:" ",t.conReversado=this.conContable.conReversado?c.a.ETIQUETA_REVERSADO:" ",t.conBloqueado=this.conContable.conBloqueado?c.a.ETIQUETA_BLOQUEADO:" ",t.conConcepto=this.conContable.conConcepto,t.conDetalle=this.conContable.conDetalle,t.conObservaciones=this.conContable.conObservaciones,t.conReferencia=this.conContable.conReferencia,delete t.seleccionado,o.push(t);var a={ListaConContableTO:o};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableDetalle",a,this.data.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("listadoContables.pdf",t):e.toastr.warning(c.a.MSJ_SE_PUEDE_IMPRIMIR_POR_ESTADO,c.a.TAG_AVISO),e.cargandoEstado.emit(!1)}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.verImagenes=function(){var e=this;this.cargandoEstado.emit(!0),this.api.post("todocompuWS/inventarioWebController/obtenerAdjuntosCompra",this.obtenerconContablePK(),c.a.KEY_EMPRESA_SELECT).then(function(t){if(t&&t.estadoOperacion===c.a.KEY_EXITO){var o=t.extraInfo?t.extraInfo:[],a=[];if(o.forEach(function(e){a.push({source:e.imagenString,alt:e.adjTipo,title:e.adjTipo})}),o.length>0)e.modalService.open(Ge.a,{size:"lg",backdrop:"static"}).componentInstance.listaImagenes=a;else e.toastr.warning(c.a.MSJ_NO_HAY_IMAGENES,c.a.TAG_AVISO)}else e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO);e.cargandoEstado.emit(!1)}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.collpase=function(){this.isCollapsed=!this.isCollapsed;var e=this.isCollapsed?"260px":"405px";this.estilos={width:"100%",height:"calc(100vh - "+e+")"}},e.prototype.listarPiscina=function(e){var t=this;e.listapiscinaSeleccionada=[],e.piscinaSeleccionada=null;var o={empresa:this.data.empresaSeleccionada.empCodigo,sector:e.sectorSeleccionado.secCodigo};this.api.post("todocompuWS/produccionWebController/getListaPiscinaTO",o,c.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?e.listapiscinaSeleccionada=o.extraInfo:e.listapiscinaSeleccionada=[],t.refreshGrid(),t.extraerValoresIniciales()}).catch(function(e){return t.utilService.handleError(e,t)})},e.prototype.buscarConCuentas=function(e){var t=e.event.keyCode,o=e.event.target.value,a=e.data.conCuentas.conCuentasPK.ctaCodigo;if(this.utilService.validarKeyBuscar(t))if(e.data.ctaCodigo=o,o&&a&&o===a)this.gridApi.tabToNextCell();else if(o=(o=""===o?null:o)?o.toUpperCase():null){var i={empresa:c.a.KEY_EMPRESA_SELECT,buscar:o,ctaGrupo:null};this.abrirModalCuentas(i,e)}else t===c.a.KEYCODE_TAB?this.gridApi.tabToNextCell():this.cuentaFocusCell(e.node.rowIndex)},e.prototype.abrirModalCuentas=function(e,t){var o=this,a=t.node.rowIndex,i=this.modalService.open(ie.a,{size:"lg",windowClass:"miSize",backdrop:"static"});i.componentInstance.filtrosBusquedaPlanCuenta=e,i.componentInstance.tamanioEstructura=this.data.tamanioEstructura,i.result.then(function(e){e?(t.event.target.value=e?e.cuentaCodigo:null,t.data.conCuentas.conCuentasPK.ctaCodigo=e?e.cuentaCodigo:null,t.data.conCuentas.conCuentasPK.ctaEmpresa=e?e.empCodigo:null,t.data.conCuentas.ctaDetalle=e?e.cuentaDetalle.trim():null,t.data.conCuentas.usrEmpresa=e?e.usrInsertaCuenta.trim():null,t.data.ctaCodigo=e?e.cuentaCodigo:null,t.data.ctaDetalle=e?e.cuentaDetalle.trim():null,t.data.conCuentaVacia=!1,o.refreshGrid(),a>=0&&a===o.listaFiltrado.length-1&&o.agregarFila("down",!1),o.documentoFocusCell(a)):(t.data.conCuentaVacia=!0,o.cuentaFocusCell(a),o.refreshGrid())},function(){t.data.ctaCodigo="",t.data.conCuentaVacia=!0,o.cuentaFocusCell(a),o.refreshGrid()})},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpcionesDetalle(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.generarOpcionesDetalle=function(){var e=this,t=this.data.accion===c.a.ACCION_MAYORIZAR||this.data.accion===c.a.ACCION_NUEVO,o=this.data.accion===c.a.ACCION_MAYORIZAR||this.data.accion===c.a.ACCION_NUEVO;this.opcionesDetalle=[{label:c.a.ACCION_AGREGAR_FILA_ARRIBA,icon:c.a.ICON_FLECHA_ARRIBA,disabled:!t,command:function(){return t?e.agregarFila("up",!0):null}},{label:c.a.ACCION_AGREGAR_FILA_ABAJO,icon:c.a.ICON_FLECHA_ABAJO,disabled:!t,command:function(){return t?e.agregarFila("down",!0):null}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?e.eliminarFila():null}}]},e.prototype.agregarFila=function(e,t){var o=this.gridApi.getFocusedCell().rowIndex;if(o>=0){o="up"===e?o:o+1;var a=this.obtenerNuevoDetalle(this.objetoSeleccionado),i=this.listaFiltrado.slice();i.splice(o,0,a),this.listaFiltrado=i,t&&this.focusedCuenta(o)}this.refreshGrid()},e.prototype.eliminarFila=function(){if(this.listaFiltrado.length>1){var e=this.gridApi.getFocusedCell(),t=this.listaFiltrado.slice();t.splice(e.rowIndex,1),this.listaFiltrado=t,this.refreshGrid()}},e.prototype.confirmacionCerrarContable=function(){var e=this;this.data.accion===c.a.ACCION_NUEVO?this.sePuedeCancelar()?this.cerrarDefinitivo(null):Ca()(this.utilService.generarSwalConfirmationOption(c.a.MSJ_PREGUNTA_CANCELAR,c.a.MSJ_PERDERA_TODOS_DATOS_INGRESADOS,c.a.SWAL_QUESTION)).then(function(t){t.value&&e.cerrarDefinitivo(null)}):this.data.accion===c.a.ACCION_MAYORIZAR?this.sePuedeCancelar()?(this.objetoAlDesmayorizar&&!0===this.objetoAlDesmayorizar.conPendiente&&this.cerrarContabilidadAcciones.emit({mostrarContilidadAcciones:!1,objetoEnviar:null,contable:this.objetoAlDesmayorizar}),this.cerrarDefinitivo(null)):Ca()(this.utilService.generarSwalConfirmationOption(c.a.MSJ_PREGUNTA_CANCELAR,c.a.MSJ_PERDERA_TODOS_DATOS_MODIFICADOS,c.a.SWAL_QUESTION)).then(function(t){t.value&&(e.objetoAlDesmayorizar?e.cerrarDefinitivo(e.objetoAlDesmayorizar):e.cerrarDefinitivo(null))}):this.cerrarDefinitivo(null)},e.prototype.sePuedeCancelar=function(){return this.utilService.puedoCancelar(this.valoresIniciales,this.frmContableDetalle)&&this.utilService.compararObjetos(this.listaFiltradoInicial,this.listaFiltrado)},e.prototype.confirmacionMayorizar=function(e){var t=this;Ca()(this.utilService.generarSwalConfirmationOption(c.a.MSJ_TITULO_MAYORIZAR,c.a.MSJ_PREGUNTA_MAYORIZAR,c.a.SWAL_QUESTION)).then(function(o){o.value&&(t.cargandoEstado.emit(!0),t.data.accion=c.a.ACCION_MAYORIZAR,t.obtenerObjetoItemListaContableTO()),o.dismiss&&(t.data.volverACargar?t.cerrarDefinitivo(!1):t.cerrarDefinitivo(e))})},e.prototype.setearDatosPrincipalesContable=function(){var e=new Va;return e.conContable=JSON.parse(JSON.stringify(this.conContable)),e.conContable.conContablePK.conEmpresa=c.a.KEY_EMPRESA_SELECT,e.conContable.conContablePK.conTipo=this.tipoSeleccionado.tipCodigo,e.detalle=this.utilService.formatearDebitosCreditosStringNumber(JSON.parse(JSON.stringify(this.listaFiltrado))),e.conContable.conFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.conContable.conFecha),e},e.prototype.cambiarEstadoActivar=function(){this.activar=!this.activar,this.activarEstado.emit(this.activar)},e.prototype.cerrarDefinitivo=function(e){this.listaSectores=[],this.listaFiltrado=[],this.tituloForm=null,this.mostrarContable=!1,this.cargandoEstado.emit(!1),this.cerrarContabilidadAcciones.emit({mostrarContilidadAcciones:!1,objetoEnviar:null,contable:e}),this.objetoContable=null,this.conContable=null,this.tipoConcepto=null,this.data=null},e.prototype.obtenerContablePorOperacion=function(){var e=this;this.cargandoEstado.emit(!0),this.api.post("todocompuWS/contabilidadWebController/getConContable",this.obtenerconContablePK(),c.a.KEY_EMPRESA_SELECT).then(function(t){if(t&&t.estadoOperacion===c.a.KEY_EXITO){var o=t.extraInfo;e.sePuedeVisualizarContable(o)?e.obtenerObjetoItemListaContableTO():(e.toastr.warning(c.a.MSJ_NO_SE_PUEDE+e.data.accion+c.a.MSJ_EL_CONTABLE+o.conContablePK.conNumero+" "+e.obtenerMensajeError(o)+" ",c.a.TAG_AVISO),e.cerrarDefinitivo(null)),e.extraerValoresIniciales()}else e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO),e.cerrarDefinitivo(null)}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.obtenerconContablePK=function(){return{conContablePK:this.utilService.obtenerConContablePK(this.data.contable,c.a.KEY_EMPRESA_SELECT,"|")}},e.prototype.obtenerMensajeError=function(e){var t="."+c.a.MSJ_ESTA;return this.data.accion===c.a.ACCION_MAYORIZAR?t=e.conPendiente?"":"."+c.a.MSJ_NO_ESTA+c.a.ETIQUETA_PENDIENTE:t+=e.conPendiente?c.a.ETIQUETA_PENDIENTE:e.conBloqueado?c.a.ETIQUETA_BLOQUEADO:e.conReversado?c.a.ETIQUETA_BLOQUEADO:c.a.ETIQUETA_REVERSADO,t},e.prototype.sePuedeVisualizarContable=function(e){return this.data.accion===c.a.ACCION_MAYORIZAR?e.conPendiente:!(e.conAnulado||e.conBloqueado||e.conPendiente||e.conReversado)},e.prototype.obtenerNuevoDetalle=function(e){var t=new ja;return t.sectorSeleccionado=e.sectorSeleccionado,t.piscinaSeleccionada=e.piscinaSeleccionada,t.listapiscinaSeleccionada=e.listapiscinaSeleccionada,t},e.prototype.verificarFechaValida=function(){if(this.fechaValido=!1,this.conContable.conFecha){var e=this.conContable.conFecha.getTime();this.data.accion===c.a.ACCION_MAYORIZAR?this.fechaValido=JSON.parse(JSON.stringify(this.periodoSeleccionado.perDesde))<=e&&e<=JSON.parse(JSON.stringify(this.periodoSeleccionado.perHasta)):this.utilService.validarPeriodo({fecha:this.conContable.conFecha},this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeValidarPeriodo=function(e){this.fechaValido=null!=e&&!e.perCerrado},e.prototype.verificarCuentaCorrecta=function(e){e.ctaCodigo!==e.conCuentas.conCuentasPK.ctaCodigo&&(e.ctaCodigo=null,e.ctaDetalle=null,e.conCuentas=new Fa.a,this.refreshGrid()),this.verificarChequeImprimir(e)},e.prototype.verificarGuardarComoPendiente=function(){return this.utilService.convertirDecimaleFloat(JSON.parse(JSON.stringify(this.totalesDebitos)))!==this.utilService.convertirDecimaleFloat(JSON.parse(JSON.stringify(this.totalesCreditos)))},e.prototype.onresize=function(){this.screamXS=window.innerWidth<c.a.WINDOW_WIDTH_XS},e.prototype.unloadHandler=function(e){if(this.data.accion===c.a.ACCION_CONSULTAR)return!0;e.returnValue=!1},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.contableService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.context={componentParent:this},this.frameworkComponents={toolTip:pe.a,numericCell:zo.a,pinnedCell:Ko.a},this.pinnedBottomRowData=[{ctaCodigo:"",ctaDetalle:"",sectorSeleccionado:"",piscinaSeleccionada:"",detDocumento:"",detDebitos:0,detCreditos:0}],this.components={},this.rowClassRules={"ag-footer-pinned":function(e){return!!e.node.rowPinned}},this.inicializarAtajos()},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.gridApi.sizeColumnsToFit(),this.data.accion===c.a.ACCION_NUEVO&&this.focusedCuenta(0)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null},e.prototype.celdaEditingStopped=function(e){var t=e.column.getId();"ctaCodigo"===t&&this.verificarCuentaCorrecta(e.data),"detDocumento"===t&&this.verificarChequeImprimir(e.data),"detDebitos"===t&&(this.calcularDebito(e.data),this.generarTotales()),"detCreditos"===t&&(this.calcularCredito(e.data),this.generarTotales())},e.prototype.validarFilaCompleta=function(e){var t=e.event.keyCode,o=this.listaFiltrado.indexOf(this.objetoSeleccionado);this.utilService.validarKeyBuscar(t)&&o===this.listaFiltrado.length-1&&this.objetoSeleccionado.conCuentas.conCuentasPK.ctaCodigo&&(this.objetoSeleccionado.detCreditos>0||this.objetoSeleccionado.detDebitos>0)&&(this.agregarFila("down",!0),this.cuentaFocusCell(o+1))},e.prototype.focusedCuenta=function(e){var t=this;setTimeout(function(){t.cuentaFocusCell(e)},50)},e.prototype.cuentaFocusCell=function(e){this.gridApi.setFocusedCell(e,"ctaCodigo")},e.prototype.documentoFocusCell=function(e){this.gridApi.setFocusedCell(e,"detDocumento")},e.prototype.ejecutarMetodoChange=function(e,t){var o=e.node.data;o.sectorSeleccionado=t,this.refreshGrid(),this.listarPiscina(o)},e.prototype.verificarChequeImprimir=function(e){e.conChequeImprimir=!0,this.gridApi&&this.gridApi.updateRowData({update:[e]});var t=e&&e.conCuentas?this.listaCuentasDeBanco.find(function(t){return t.ctaCuentaContable===e.conCuentas.conCuentasPK.ctaCodigo}):null;e.detDocumento&&t?this.contableService.verificarChequeImprimir(e,this):(e.conChequeImprimir=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.validarDocumentosRepetido())},e.prototype.despuesDeVerificarChequeImprimir=function(e,t){t.conChequeImprimir=!e,this.objetoSeleccionado.conChequeImprimir=!e,this.gridApi&&this.gridApi.updateRowData({update:[t]}),this.validarDocumentosRepetido()},e.prototype.validarDocumentosRepetido=function(){var e=this;this.listaFiltrado.forEach(function(t){var o=t&&t.conCuentas?e.listaCuentasDeBanco.find(function(e){return e.ctaCuentaContable===t.conCuentas.conCuentasPK.ctaCodigo}):null,a=e.listaFiltrado.filter(function(e){return e.detDocumento&&t.detDocumento&&e!==t&&e.detDocumento.trim()===t.detDocumento.trim()&&o});t.conChequeRepetido=a.length>0}),this.refreshGrid()},e.prototype.calcularDebito=function(e){e.detDebitos>0&&(e.debidoCredito="D",e.detCreditos=0)},e.prototype.calcularCredito=function(e){e.detCreditos>0&&(e.debidoCredito="C",e.detDebitos=0)},e.prototype.generarTotales=function(){var e=this,t=0,o=0;this.listaFiltrado.forEach(function(a){var i=JSON.parse(JSON.stringify(e.utilService.convertirDecimaleFloat(a.detDebitos))),r=JSON.parse(JSON.stringify(e.utilService.convertirDecimaleFloat(a.detCreditos)));0===i&&0===r?a.conEstadoDebitoCreditoValido=!1:(t+=i,o+=r,a.conEstadoDebitoCreditoValido=!0)}),this.totalesDebitos=Math.round(100*t)/100,this.totalesCreditos=Math.round(100*o)/100,this.totalesDiferencia=Math.abs(this.totalesDebitos-this.totalesCreditos),this.refreshGrid()},e.prototype.verificarAntesGuardar=function(e){var t=0,o=0,a=0;this.listaFiltrado.forEach(function(e){e.conCuentas.conCuentasPK.ctaCodigo||(e.conCuentaVacia=!0,t++),0===e.detDebitos&&0===e.detCreditos&&(e.conEstadoDebitoCreditoValido=!1,o++),(e.conChequeRepetido||e.conChequeImprimir)&&a++}),this.isValidoDebitosCreditos=0===o,this.isValidoCheques=0===a,this.isValidoCuentas=0===t,this.conContable.conConcepto||this.conContable.conDetalle||this.conContable.conObservaciones?this.detalleValido=!0:this.detalleValido=!1,this.formularioCorrecto=this.utilService.establecerFormularioTocado(e),this.refreshGrid()},e.prototype.mensajesErrores=function(){this.isValidoCheques&&this.fechaValido&&this.isValidoDebitosCreditos&&this.isValidoCuentas||this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.listaFiltrado.length<2&&this.toastr.warning(c.a.MSJ_INGRESAR_2_FILAS,c.a.TAG_AVISO),this.detalleValido||this.toastr.warning(c.a.MSJ_INGRESAR_AL_MENOS_CONCEPTO_DETALLE_OBSERVACION,c.a.TAG_AVISO)},e.prototype.sePuedeGuardar=function(){return this.isValidoCuentas&&this.isValidoCheques&&this.isValidoDebitosCreditos&&this.fechaValido&&this.listaFiltrado.length>=2&&this.detalleValido},e.prototype.verificarSiGuardarComoPendiente=function(e){var t=this;if(this.data.accion===c.a.ACCION_NUEVO&&this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_NUEVO,this,!0)||this.data.accion===c.a.ACCION_MAYORIZAR&&this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_MAYORIZAR,this,!0))if(this.verificarAntesGuardar(e),this.sePuedeGuardar()){var o=this.setearDatosPrincipalesContable();this.verificarGuardarComoPendiente()?Ca()(this.utilService.generarSwalConfirmationOption(c.a.MSJ_PREGUNTA_GUARDAR,c.a.MSJ_CONTABLE_TIENE_DIFERENCIAS_DEBITO+this.totalesDebitos.toFixed(2)+c.a.MSJ_Y_CREDITO+this.totalesCreditos.toFixed(2)+c.a.MSJ_DESEA_GUARDAR_CONTABLE_COMO_PENDIENTE,c.a.SWAL_QUESTION)).then(function(e){e.value&&(o.conContable.conPendiente=!0,t.data.accion===c.a.ACCION_NUEVO&&t.guardarNuevoContable(o),t.data.accion===c.a.ACCION_MAYORIZAR&&t.guardarMayorizarContable(o))}):(o.conContable.conPendiente=!1,this.data.accion===c.a.ACCION_NUEVO&&this.guardarNuevoContable(o),this.data.accion===c.a.ACCION_MAYORIZAR&&this.guardarMayorizarContable(o))}else this.mensajesErrores()},e.prototype.guardarNuevoContable=function(e){this.cargandoEstado.emit(!0),e.conContable.conCodigo=this.utilService.generarCodigoAleatorio(c.a.KEY_EMPRESA_SELECT,new Date),this.insertarContable({itemListaContableTO:e})},e.prototype.guardarMayorizarContable=function(e){this.cargandoEstado.emit(!0),this.mayorizarContable({itemListaContableTO:e})},e.prototype.guardarNuevoContablePendiente=function(e){if(this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_NUEVO,this,!0))if(this.verificarAntesGuardar(e),this.sePuedeGuardar()){this.cargandoEstado.emit(!0);var t=this.setearDatosPrincipalesContable();t.conContable.conCodigo=this.utilService.generarCodigoAleatorio(c.a.KEY_EMPRESA_SELECT,new Date),t.conContable.conPendiente=!0,this.insertarContable({itemListaContableTO:t})}else this.mensajesErrores()},e.prototype.guardarMayorizarPendiente=function(e){if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmContableDetalle))this.toastr.warning(c.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,c.a.TOAST_INFORMACION),this.cerrarDefinitivo(!1);else if(this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_MAYORIZAR,this,!0))if(this.verificarAntesGuardar(e),this.sePuedeGuardar()){this.cargandoEstado.emit(!0);var t=this.setearDatosPrincipalesContable();t.conContable.conPendiente=!0,this.mayorizarContable({itemListaContableTO:t})}else this.mensajesErrores()},e.prototype.guardarAnularReversar=function(){if(this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_ANULAR,this,!0)){this.cargandoEstado.emit(!0);var e={conContablePK:this.utilService.obtenerConContablePK(this.data.contable,c.a.KEY_EMPRESA_SELECT,"|"),anularReversar:this.data.accion===c.a.ACCION_ANULAR};this.anularReversarContable(e)}},Ja([Object(i.ViewChild)("menuOpciones"),Ka("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),Ja([Object(i.Input)(),Ka("design:type",Object)],e.prototype,"data",void 0),Ja([Object(i.Output)(),Ka("design:type",Object)],e.prototype,"cargandoEstado",void 0),Ja([Object(i.Output)(),Ka("design:type",Object)],e.prototype,"activarEstado",void 0),Ja([Object(i.Output)(),Ka("design:type",Object)],e.prototype,"cerrarContabilidadAcciones",void 0),Ja([Object(i.ViewChild)("frmContableDetalle"),Ka("design:type",I.NgForm)],e.prototype,"frmContableDetalle",void 0),Ja([Object(i.HostListener)("window:resize",["$event"]),Ka("design:type",Function),Ka("design:paramtypes",[]),Ka("design:returntype",void 0)],e.prototype,"onresize",null),Ja([Object(i.HostListener)("window:beforeunload",["$event"]),Ka("design:type",Function),Ka("design:paramtypes",[Event]),Ka("design:returntype",void 0)],e.prototype,"unloadHandler",null),e=Ja([Object(i.Component)({selector:"app-contable-formulario",template:o("hgeU"),styles:[o("+q7i")]}),Ka("design:paramtypes",[h.a,p.a,u.b,T.b,K.a,S.HotkeysService,le.a,L.a,Wa.a,za.a])],e)}(),qa=o("8RnM"),Ha=o("TsNY"),Xa=o("UwNZ"),Za=o("5TEY"),$a=o("/lcP"),Qa=o("iVon"),ei=o("1GjU"),ti=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oi=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ai=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ii=function(){function e(e,t,o,a,r,n,s,l,d){this.consumoService=e,this.utilService=t,this.toastr=o,this.filasService=a,this.modalService=r,this.consumoFormularioService=n,this.archivoService=s,this.piscinaService=l,this.periodoService=d,this.constantes=c.a,this.accion=null,this.vistaFormulario=!1,this.vistaDistribucion=!1,this.listadoPiscinaTO=new Array,this.listadoPiscinaPorEmpresaTO=new Array,this.es={},this.listaBodega=[],this.filasTiempo=new D.a,this.enviarAccion=new i.EventEmitter,this.enviarActivar=new i.EventEmitter,this.listaInvConsumosDetalle=new Array,this.listaInvConsumosDetalleOriginal=new Array,this.listaInvConsumosDetalleDistribucion=new Array,this.listaConsumoMotivo=[],this.invConsumos=new $a.a,this.motivoSeleccionado=new Za.a,this.detalleSeleccionado=new Qa.a,this.invProducto=new Fe.a,this.isScreamMd=!0,this.cargando=!0,this.empresaExtranjera=!1,this.activar=!1,this.fechaActual=new Date,this.isFechaValido=!1,this.puedeEditar=!1,this.parametrosDistribucion={},this.titulo="",this.columnDefs=[],this.components={},Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999999999999999.99",minimumValue:"0"}}return e.prototype.ngOnInit=function(){this.cargando=!0,c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS),this.accion=this.parametros.accion,this.consumoFormularioService.definirAtajosDeTeclado(),this.invConsumos=new $a.a,this.obtenerDatosParaCrudConsumos()},e.prototype.inicializarMotivos=function(e,t){if(e&&t)return e.cmCodigo===t.cmCodigo},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmConsumoDatos?e.frmConsumoDatos.value:null)),e.detalleInicial=JSON.parse(JSON.stringify(e.listaInvConsumosDetalle?e.listaInvConsumosDetalle:null)),e.establecerFocus()},50)},e.prototype.establecerFocus=function(){this.motivoSeleccionado?this.bodegaSeleccionado?(this.accion,c.a.ACCION_MAYORIZAR):this.enfocarInput("selectBodega"):this.enfocarInput("selectMotivo")},e.prototype.obtenerDatosParaCrudConsumos=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivo:!1};this.consumoService.obtenerDatosParaCrudConsumos(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosParaCrudConsumos=function(e){this.listaConsumoMotivo=e?e.listaConsumoMotivo:[],this.listaBodega=e?e.listaBodega:[],this.listadoPiscinaPorEmpresaTO=e?e.piscinasPorEmpresa:[],this.invConsumos.consFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e.fechaActual),this.fechaActual=new Date(e.fechaActual),this.despuesDeGetPeriodoPorFecha(e.periodo),this.motivoSeleccionado=this.parametros.motivoSeleccionado?this.parametros.motivoSeleccionado:null,this.actuarSegunAccionDelPadre(this.accion)},e.prototype.actuarSegunAccionDelPadre=function(e){this.invConsumos.consCodigo=this.utilService.generarCodigoAleatorio(c.a.KEY_EMPRESA_SELECT,new Date);var t=this.parametros.seleccionado;switch(e){case c.a.ACCION_CONSULTAR:case c.a.ACCION_ANULAR:case c.a.ACCION_RESTAURAR:this.titulo=e+" "+c.a.TAG_CONSUMO.toLowerCase()+" N. "+t.consNumero,this.puedeEditar=!1,this.iniciarAgGrid(),this.consultarConsumo(t.consNumero);break;case c.a.ACCION_CREAR:this.titulo=c.a.TAG_REGISTRO+" "+c.a.TAG_CONSUMO.toLowerCase(),this.puedeEditar=!0;var o=new Qa.a({detCantidad:1});o.proCodigoPrincipal="",this.listaInvConsumosDetalle.push(o),this.seleccionarBodega(),this.cargando=!1,this.iniciarAgGrid(),this.extraerValoresIniciales();break;case c.a.ACCION_MAYORIZAR:this.titulo=e+" "+c.a.TAG_CONSUMO.toLowerCase()+" N. "+t.consNumero,this.puedeEditar=!0,this.iniciarAgGrid(),this.consultarConsumo(t.consNumero)}this.focusedProducto(0)},e.prototype.seleccionarBodega=function(){this.bodegaSeleccionado=this.motivoSeleccionado?this.consumoFormularioService.seleccionarBodega(this.listaBodega,this.motivoSeleccionado.cmBodega):null,this.bodegaSeleccionado?this.obtenerPiscinasParaConsumoDetalle():this.limpiarPiscinas()},e.prototype.consultarConsumo=function(e){this.cargando=!0;var t=e.split("|"),o=t[0].trim(),a=t[1].trim(),i=t[2].trim(),r={empresa:c.a.KEY_EMPRESA_SELECT,periodo:o,motivo:a,numero:i};this.consumoService.obtenerInvConsumo(r,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerConsumo=function(e){this.invConsumos=e,this.accion===c.a.ACCION_MAYORIZAR&&this.obtenerPeriodo(this.invConsumos.invConsumosPK.consPeriodo),this.invConsumos.consFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.invConsumos.consFecha),this.listaInvConsumosDetalle=this.invConsumos.invConsumosDetalleList,this.listaInvConsumosDetalleOriginal=this.invConsumos.invConsumosDetalleList?JSON.parse(JSON.stringify(this.invConsumos.invConsumosDetalleList)):[],this.llenarCombos(),this.cargando=!1,this.extraerValoresIniciales()},e.prototype.llenarCombos=function(){this.invConsumos.invBodega&&(this.bodegaSeleccionado=this.consumoFormularioService.seleccionarBodega(this.listaBodega,this.invConsumos.invBodega.invBodegaPK.bodCodigo)),this.motivoSeleccionado=this.consumoFormularioService.seleccionarMotivo(this.listaConsumoMotivo,this.invConsumos.invConsumosPK.consMotivo),this.accion==c.a.ACCION_MAYORIZAR&&(this.bodegaSeleccionado?this.obtenerPiscinasParaConsumoDetalle():this.limpiarPiscinas())},e.prototype.obtenerPiscinasParaConsumoDetalle=function(){this.limpiarPiscinas(),this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,sector:this.bodegaSeleccionado.codigoCP,fecha:Ut(this.invConsumos.consFecha).format("YYYY-MM-DD")};this.piscinaService.listarPiscinaTOBusqueda(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.limpiarPiscinas=function(){this.listadoPiscinaTO=[],this.gridApi&&(this.gridApi.forEachNode(function(e){e.data&&(e.data.pisNumero=null)}),this.refreshGrid())},e.prototype.despuesDeListarPiscinaTOBusqueda=function(e){this.listadoPiscinaTO=e,this.cargando=!1},e.prototype.cancelarDistribucion=function(){this.vistaDistribucion=!this.vistaDistribucion},e.prototype.aceptarDistribucion=function(){if(this.parametrosDistribucion.cantidad>0&&this.parametrosDistribucion.invProducto&&this.parametrosDistribucion.invProducto.invProductoPK.proCodigoPrincipal)this.parametrosDistribucion.listaInvConsumosDetalleDistribucion&&this.parametrosDistribucion.listaInvConsumosDetalleDistribucion.length>0&&(this.listaInvConsumosDetalle=this.listaInvConsumosDetalle.concat(this.parametrosDistribucion.listaInvConsumosDetalleDistribucion),this.gridApi&&this.gridApi.updateRowData({add:this.parametrosDistribucion.listaInvConsumosDetalleDistribucion}),this.refreshGrid(),this.actualizarFilas()),this.vistaDistribucion=!this.vistaDistribucion,this.invProducto=new Fe.a,this.listaInvConsumosDetalleDistribucion=new Array;else{if(this.parametrosDistribucion.cantidad<=0){var e=document.getElementById("cantidad");e&&e.focus(),e&&e.blur()}this.toastr.warning(c.a.MSJ_DATOS_INVALIDOS_PARA_DISTRIBUCION,c.a.TAG_AVISO)}},e.prototype.enfocarInput=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarActivar.emit(e)},e.prototype.verificarPermiso=function(e,t){return this.consumoService.verificarPermiso(e,this.empresaSeleccionada,t)},e.prototype.insertarConsumo=function(e,t){if(this.validarAntesDeEnviar(e)){this.invConsumos=this.consumoFormularioService.construirConsumo(t,this.invConsumos,this.bodegaSeleccionado,this.motivoSeleccionado),this.listaInvConsumosDetalle=this.consumoFormularioService.contruirDetalleConsumo(this.invConsumos,this.listaInvConsumosDetalle,this.bodegaSeleccionado),this.cargando=!0;var o={invConsumos:ti({},this.invConsumos),listaInvConsumosDetalle:this.listaInvConsumosDetalle};this.invConsumos.consFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.invConsumos.consFecha),this.consumoService.insertarModificarInvConsumos(o,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.validarDetalle=function(){var e=this,t=!0;return this.gridApi&&this.gridApi.forEachNode(function(o){!(e.consumoService.validarCantidad(o.data)&&e.consumoService.validarProducto(o.data))&&(t=!1),!o.data.pisNumero&&(t=!1)}),t},e.prototype.despuesDeInsertarModificarInvConsumos=function(e){var t=JSON.parse(JSON.stringify(this.invConsumos.consPendiente));this.invConsumos=e.extraInfo.consumo?e.extraInfo.consumo:this.invConsumos,this.invConsumos.consFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.invConsumos.consFecha),this.invConsumos.consPendiente=t;try{this.cargando=!1,this.mensajeOk(e.operacionMensaje),this.invConsumos.consPendiente?this.cerrarFormulario():this.preguntarImprimirConsumo(e.operacionMensaje)}catch(o){this.cargando=!1,this.mensajeOk(e.operacionMensaje)}},e.prototype.preguntarImprimirConsumo=function(e){var t=this,o={title:c.a.TOAST_CORRECTO,texto:e+"<br>"+c.a.MSJ_PREGUNTA_IMPRIMIR+"<br>",type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_IMPRIMIR+"'></i>  "+c.a.LABEL_IMPRIMIR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.imprimirConsumo():t.cerrarFormulario()})},e.prototype.cerrarFormulario=function(){var e={accion:c.a.ACCION_CREADO,consResultante:this.consumoFormularioService.construirObjetoParaPonerloEnLaLista(this.invConsumos),empresa:this.empresaSeleccionada};this.enviarAccion.emit(e)},e.prototype.imprimirConsumo=function(){var e=this;this.cargando=!0;var t=new Array;t.push(this.consumoFormularioService.construirObjetoParaPonerloEnLaLista(this.invConsumos));var o={invConsumosTOs:this.consumoFormularioService.formatearResporteConsumos(t,c.a.KEY_EMPRESA_SELECT),ordenado:!1};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteConsumoDetalle",o,this.empresaSeleccionada).then(function(t){t&&t._body&&t._body.byteLength>0?e.utilService.descargarArchivoPDF("consumos"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),(e.accion===c.a.ACCION_CREAR||e.accion===c.a.ACCION_MAYORIZAR)&&e.cerrarFormulario(),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.mensajeOk=function(e){this.utilService.generarSwal(this.accion+" "+c.a.ACCION_CONSUMO,c.a.SWAL_SUCCESS,e)},e.prototype.validarAntesDeEnviar=function(e){var t=!0,o=this.validarDetalle(),a=this.getRowData();return this.utilService.establecerFormularioTocado(e)&&e&&e.valid&&o?0===a.length&&(this.toastr.warning(c.a.MSJ_INGRESE_DATOS_DETALLE,c.a.MSJ_TITULO_INVALIDOS),t=!1):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),t=!1),this.cargando=t,t},e.prototype.distribuirConsumo=function(){this.bodegaSeleccionado&&this.invConsumos.consFecha?(this.vistaDistribucion=!0,this.parametrosDistribucion={sector:this.bodegaSeleccionado.codigoCP,bodega:this.bodegaSeleccionado.bodCodigo,fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.invConsumos.consFecha)}):this.toastr.warning(c.a.MSJ_DEBE_SELECCIONAR_BODEGA,c.a.TAG_AVISO)},e.prototype.mayorizarConsumo=function(e,t){if(this.validarAntesDeEnviar(e)){this.invConsumos=this.consumoFormularioService.construirConsumo(t,this.invConsumos,this.bodegaSeleccionado,this.motivoSeleccionado),this.invConsumos.consCodigo=null,this.listaInvConsumosDetalle=this.consumoFormularioService.contruirDetalleConsumo(this.invConsumos,this.listaInvConsumosDetalle,this.bodegaSeleccionado),this.invConsumos.invConsumosDetalleList=this.listaInvConsumosDetalleOriginal?JSON.parse(JSON.stringify(this.listaInvConsumosDetalleOriginal)):[],this.cargando=!0;var o={invConsumos:ti({},this.invConsumos),listaInvConsumosDetalle:this.listaInvConsumosDetalle};this.invConsumos.consFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.invConsumos.consFecha),this.consumoService.insertarModificarInvConsumos(o,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.anularConsumo=function(){var e=this,t={title:c.a.ACCION_ANULAR+" "+c.a.TAG_CONSUMO+" "+this.invConsumos.invConsumosPK.consNumero,texto:c.a.MSJ_PREGUNTA_ANULAR_CONSUMO,type:c.a.SWAL_QUESTION,confirmButtonText:"<i class='"+c.a.ICON_ANULAR+"'></i>  "+c.a.ACCION_ANULAR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0;var o={empresa:c.a.KEY_EMPRESA_SELECT,periodo:e.invConsumos.invConsumosPK.consPeriodo,motivo:e.invConsumos.invConsumosPK.consMotivo,numero:e.invConsumos.invConsumosPK.consNumero};e.consumoService.anularConsumo(o,e,c.a.KEY_EMPRESA_SELECT)}else e.cargando=!1})},e.prototype.despuesDeAnularConsumo=function(e){var t=this.parametros.seleccionado;t.consStatus="ANULADO",this.cargando=!1;var o={accion:c.a.ACCION_CREADO,consResultante:t,empresa:this.empresaSeleccionada};this.enviarAccion.emit(o),this.utilService.generarSwal(c.a.TAG_CONSUMO,c.a.SWAL_SUCCESS,e.operacionMensaje)},e.prototype.restaurarConsumo=function(){var e=this,t={title:c.a.ACCION_RESTAURAR+" "+c.a.TAG_CONSUMO+" "+this.invConsumos.invConsumosPK.consNumero,texto:c.a.MSJ_PREGUNTA_ANULAR_CONSUMO,type:c.a.SWAL_QUESTION,confirmButtonText:"<i class='"+c.a.ICON_RESTAURAR+"'></i>  "+c.a.ACCION_RESTAURAR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0;var o={empresa:c.a.KEY_EMPRESA_SELECT,periodo:e.invConsumos.invConsumosPK.consPeriodo,motivo:e.invConsumos.invConsumosPK.consMotivo,numero:e.invConsumos.invConsumosPK.consNumero};e.consumoService.restaurarConsumo(o,e,c.a.KEY_EMPRESA_SELECT)}else e.cargando=!1})},e.prototype.despuesDeRestaurarConsumo=function(e){var t=this.parametros.seleccionado;t.consStatus="",this.cargando=!1;var o={accion:c.a.ACCION_CREADO,consResultante:t,empresa:this.empresaSeleccionada};this.enviarAccion.emit(o),this.utilService.generarSwal(c.a.TAG_CONSUMO,c.a.SWAL_SUCCESS,e.operacionMensaje)},e.prototype.cancelar=function(){var e=this;switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CREAR:if(this.sePuedeCancelar())this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})}break;case c.a.ACCION_CONSULTAR:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});break;default:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})}},e.prototype.sePuedeCancelar=function(){return this.utilService.puedoCancelar(this.valoresIniciales,this.frmConsumoDatos)&&this.utilService.compararObjetos(this.detalleInicial,this.listaInvConsumosDetalle)},e.prototype.validarFechaPorPeriodo=function(){this.isFechaValido=!1;var e={fecha:Ut(this.invConsumos.consFecha).format("YYYY-MM-DD"),empresa:c.a.KEY_EMPRESA_SELECT};this.periodoService.getPeriodoPorFecha(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGetPeriodoPorFecha=function(e){e&&!e.perCerrado?this.isFechaValido=!0:this.isFechaValido=!1,this.accion!=c.a.ACCION_CREAR&&this.accion!=c.a.ACCION_MAYORIZAR&&(this.isFechaValido=!0)},e.prototype.obtenerPeriodo=function(e){this.cargando=!0;var t={periodo:e,empresa:c.a.KEY_EMPRESA_SELECT};this.periodoService.obtenerSisPeriodo(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerSisPeriodo=function(e){this.sisPeriodo=e,this.cargando=!1},e.prototype.cambioLaFecha=function(){if(this.accion===c.a.ACCION_CREAR)this.invConsumos.consFecha?this.validarFechaPorPeriodo():this.isFechaValido=!1,this.toastr.warning(c.a.MSJ_SE_ALETRARAN_CC,c.a.TAG_AVISO),this.bodegaSeleccionado&&this.invConsumos.consFecha&&this.obtenerPiscinasParaConsumoDetalle();else if(this.accion===c.a.ACCION_MAYORIZAR){if(this.sisPeriodo&&this.invConsumos.consFecha){var e=this.invConsumos.consFecha.getTime();e>=this.sisPeriodo.perDesde&&e<=this.sisPeriodo.perHasta?this.isFechaValido=!0:this.isFechaValido=!1}else this.isFechaValido=!1;this.toastr.warning(c.a.MSJ_SE_ALETRARAN_CC,c.a.TAG_AVISO),this.bodegaSeleccionado&&this.invConsumos.consFecha&&this.obtenerPiscinasParaConsumoDetalle()}else this.isFechaValido=!0},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.consumoService.generarColumnasConsumo(this),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={inputLabelCell:ft.a,botonAccion:$o.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimensionarColumnas(),this.seleccionarPrimerFila(),this.gridApi.sizeColumnsToFit()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.detalleSeleccionado=t?t.data:null,this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}))},e.prototype.mostrarOpciones=function(e,t){var o=this.gridApi?this.gridApi.getFocusedCell():null;o&&this.mostrarContextMenu(t,o.rowIndex,e)},e.prototype.mostrarContextMenu=function(e,t,o){this.detalleSeleccionado=e,this.puedeEditar&&(this.generarOpciones(t),this.menuOpciones.show(o),o.stopPropagation())},e.prototype.generarOpciones=function(e){var t=this,o=this.empresaSeleccionada.listaSisPermisoTO.gruCrear&&this.puedeEditar;this.opciones=[{label:c.a.ACCION_AGREGAR_FILA_ARRIBA,icon:c.a.ICON_FLECHA_ARRIBA,disabled:!o,command:function(){return o?t.agregarFila("up",e):null}},{label:c.a.ACCION_AGREGAR_FILA_ABAJO,icon:c.a.ICON_FLECHA_ABAJO,disabled:!o,command:function(){return o?t.agregarFila("down",e):null}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?t.eliminarFila(e):null}}]},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.alCambiarValorDeCelda=function(e){"proCodigoPrincipal"===e.colDef.field&&this.validarProducto(e.data)},e.prototype.getRowData=function(){var e=[];return this.gridApi&&this.gridApi.forEachNode(function(t){e.push(t.data)}),e},e.prototype.agregarFilaAlFinal=function(e){var t=e.event.keyCode,o=e.node.rowIndex;this.detalleSeleccionado=this.listaInvConsumosDetalle[o],this.detalleSeleccionado.invProducto.invProductoPK.proCodigoPrincipal&&this.utilService.validarKeyBuscar(t)&&(this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_MAYORIZAR)&&o>=0&&o===this.listaInvConsumosDetalle.length-1&&(t===c.a.KEYCODE_TAB&&(e.event.srcElement.blur(),e.event.preventDefault()),this.agregarFilaByIndex(o,"down",!1))},e.prototype.agregarFila=function(e,t,o){var a=t;a>=0&&this.agregarFilaByIndex(a,e,o)},e.prototype.agregarFilaByIndex=function(e,t,o){this.detalleSeleccionado=this.listaInvConsumosDetalle[e];var a="up"===t?e:e+1,i=new Qa.a({detCantidad:1});i.pisNumero=this.detalleSeleccionado.pisNumero,this.listaInvConsumosDetalle.splice(a,0,i),this.gridApi&&this.gridApi.updateRowData({add:[i],addIndex:a}),o?this.cantidadFocusAndEditingCell(e):this.focusedProducto(a),this.refreshGrid()},e.prototype.refrescarOrdenDetalle=function(e){var t=e.overIndex,o=e.node.data;this.gridApi&&(this.gridApi.updateRowData({remove:[o]}),this.gridApi.updateRowData({add:[o],addIndex:t}))},e.prototype.eliminarFila=function(e){var t=this;if(this.listaInvConsumosDetalle.length>1){var o=e;if(this.detalleSeleccionado&&this.detalleSeleccionado.detSecuencial>0){var a={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(a).then(function(e){e&&t.quitarElementoDeFila(o)})}else this.quitarElementoDeFila(o)}},e.prototype.quitarElementoDeFila=function(e){this.listaInvConsumosDetalle.splice(e,1),this.gridApi&&this.gridApi.updateRowData({remove:[this.detalleSeleccionado],addIndex:e}),this.refreshGrid()},e.prototype.buscarProducto=function(e){var t=e.event.keyCode,o=e.event.target.value,a=e.data.invProducto.invProductoPK.proCodigoPrincipal;if(this.utilService.validarKeyBuscar(t))if(this.bodegaSeleccionado&&this.bodegaSeleccionado.bodCodigo)if(e.data.proCodigoPrincipal=o,o===a&&o&&a)t===c.a.KEYCODE_TAB?this.cantidadFocusAndEditingCell(e.node.rowIndex):this.productoFocusAndEditingCell(e.node.rowIndex);else if(o=(o=""===o?null:o)?o.toUpperCase():null){var i={empresa:this.empresaSeleccionada.empCodigo,busqueda:o,categoria:null,bodega:this.bodegaSeleccionado?this.bodegaSeleccionado.bodCodigo:null,incluirInactivos:!1,limite:!1};this.abrirModalProducto(i,e)}else t===c.a.KEYCODE_TAB?this.cantidadFocusAndEditingCell(e.node.rowIndex):this.productoFocusAndEditingCell(e.node.rowIndex);else this.toastr.warning(c.a.MSJ_DEBE_SELECCIONAR_BODEGA,c.a.TOAST_ADVERTENCIA)},e.prototype.abrirModalProducto=function(e,t){var o=this,a=t.node.rowIndex,i=this.modalService.open(r.a,{size:"lg",windowClass:"miSize",backdrop:"static"});i.componentInstance.parametrosBusqueda=e,i.componentInstance.empresaSeleccionada=this.empresaSeleccionada,i.componentInstance.isModal=!0,i.componentInstance.isConsumos=!0,i.result.then(function(e){if(e){var i=new ke.a(e);t.event.target.value=i.proCodigoPrincipal,t.data.proCodigoPrincipal=i.proCodigoPrincipal,t.data.invProducto.invProductoPK.proCodigoPrincipal=i.proCodigoPrincipal,t.data.invProducto.invProductoPK.proEmpresa=o.empresaSeleccionada.empCodigo,t.data.invProducto.proNombre=i.proNombre,t.data.invProducto.invProductoMedida.medDetalle=i.detalleMedida,t.data.invProducto.invProductoTipo.tipTipo=i.tipTipo,o.refreshGrid(),a>=0&&a===o.listaInvConsumosDetalle.length-1?o.agregarFilaByIndex(a,"down",!0):o.cantidadFocusAndEditingCell(a)}else o.productoFocusAndEditingCell(a)},function(){t.data.proCodigoPrincipal="",o.validarProducto(t.data),o.gridApi.setFocusedCell(a,"proNombre"),o.productoFocusAndEditingCell(a)})},e.prototype.validarProducto=function(e){e.invProducto.invProductoPK.proCodigoPrincipal!==e.proCodigoPrincipal&&this.resetearProducto(e)},e.prototype.resetearProducto=function(e){e.proCodigoPrincipal=null,e.invProducto.invProductoPK.proCodigoPrincipal=null,e.invProducto.invProductoPK.proEmpresa=null,e.invProducto.proNombre=null,e.invProducto.invProductoMedida.medDetalle=null,this.refreshGrid()},e.prototype.focusedProducto=function(e){var t=this;setTimeout(function(){t.productoFocusAndEditingCell(e)},50)},e.prototype.productoFocusAndEditingCell=function(e){this.gridApi&&(this.gridApi.setFocusedCell(e,"proCodigoPrincipal"),this.gridApi.startEditingCell({rowIndex:e,colKey:"proCodigoPrincipal"}))},e.prototype.cantidadFocusAndEditingCell=function(e){this.gridApi&&(this.gridApi.setFocusedCell(e,"detCantidad"),this.gridApi.startEditingCell({rowIndex:e,colKey:"detCantidad"}),this.gridApi.ensureIndexVisible(e+1))},e.prototype.unloadHandler=function(e){if(this.sePuedeCancelar())return!0;e.returnValue=!1},oi([Object(i.Input)(),ai("design:type",Object)],e.prototype,"parametros",void 0),oi([Object(i.Input)(),ai("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),oi([Object(i.Output)(),ai("design:type",Object)],e.prototype,"enviarAccion",void 0),oi([Object(i.Output)(),ai("design:type",Object)],e.prototype,"enviarActivar",void 0),oi([Object(i.ViewChild)("menuOpciones"),ai("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),oi([Object(i.ViewChild)("frmConsumoDatos"),ai("design:type",I.NgForm)],e.prototype,"frmConsumoDatos",void 0),oi([Object(i.HostListener)("window:beforeunload",["$event"]),ai("design:type",Function),ai("design:paramtypes",[Event]),ai("design:returntype",void 0)],e.prototype,"unloadHandler",null),e=oi([Object(i.Component)({selector:"app-consumo-formulario",template:o("T5Qx")}),ai("design:paramtypes",[Wt.a,h.a,u.b,L.a,T.b,ei.a,le.a,it.a,qe.a])],e)}(),ri=o("Ip0R"),ni=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},si=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ci=function(){function e(e,t,o){this.utilService=e,this.modalService=t,this.piscinaService=o,this.constantes=c.a,this.listadoPiscinas=[],this.cargando=!0,this.cantidad=0,this.codigoPrincipal="",this.codigoPrincipalCopia="",this.columnDefs=[],this.components={},this.noData=c.a.MSJ_NO_HAY_DATOS,this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"9999999999999.99",minimumValue:"0"}}return e.prototype.ngOnInit=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,sector:this.parametros.sector,fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.parametros.fecha)};this.piscinaService.listarPiscinaTOBusqueda(e,this,c.a.KEY_EMPRESA_SELECT),this.iniciarAgGrid(),this.parametros.cantidad=this.cantidad,this.parametros.invProducto=this.invProducto,this.parametros.listaInvConsumosDetalleDistribucion=this.listaInvConsumosDetalleDistribucion},e.prototype.despuesDeListarPiscinaTOBusqueda=function(e){this.cargando=!1,this.listadoPiscinas=e||[],this.establecerFocus("producto")},e.prototype.abrirModalProducto=function(e){var t=this,o=e.keyCode;if(this.utilService.validarKeyBuscar(o)){e.srcElement.blur(),e.preventDefault();var a=this.modalService.open(r.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.parametrosBusqueda={busqueda:this.codigoPrincipal,empresa:c.a.KEY_EMPRESA_SELECT,bodega:this.parametros.bodega},a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){if(e){var o=new ke.a(e);t.codigoPrincipal=o.proCodigoPrincipal,t.codigoPrincipalCopia=o.proCodigoPrincipal,t.invProducto.invProductoPK.proCodigoPrincipal=o.proCodigoPrincipal,t.invProducto.invProductoPK.proEmpresa=t.empresaSeleccionada.empCodigo,t.invProducto.proNombre=o.proNombre,t.invProducto.invProductoMedida.medDetalle=o.detalleMedida,t.invProducto.invProductoTipo.tipTipo=o.tipTipo,t.cantidad=t.utilService.quitarComasNumero(t.cantidad),t.establecerFocus("cantidad")}else t.establecerFocus("producto")},function(){t.codigoPrincipal="",t.codigoPrincipalCopia="",t.establecerFocus("producto")})}},e.prototype.validarProducto=function(){return!(!this.codigoPrincipal||this.codigoPrincipal!==this.codigoPrincipalCopia)||(this.invProducto=new Fe.a,!1)},e.prototype.establecerFocus=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.generarColumnas(),this.rowSelection="multiple",this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.redimensionarColumnas(),this.seleccionarPrimerFila(),this.gridApi.sizeColumnsToFit()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.generarColumnas=function(){var e=[];return e.push({headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:30,minWidth:30},{headerName:c.a.TAG_NOMBRE,field:"pisNombre",width:200,minWidth:200},{headerName:c.a.TAG_HECTAREAJE,valueFormatter:this.formatearA2Decimales,field:"pisHectareaje",cellClass:"text-right",width:100,minWidth:100},{headerName:c.a.TAG_VALOR_ASIGNADO,valueFormatter:this.formatearA2Decimales,field:"cantidad",cellClass:"text-right",width:150,minWidth:150}),e},e.prototype.formatearA2Decimales=function(e){return new ri.DecimalPipe("en-US").transform(e.value,"1.2-2")},e.prototype.onSelectionChanged=function(){this.resetearCantidad();var e,t=this.utilService.getAGSelectedData(this.gridApi),o={cantidad:0},a=0,i=0,r=0,n=this.utilService.quitarComasNumero(this.cantidad);if(t&&t.length>0){a=this.sumarHectareaje(t,a);for(var s=0;s<t.length;s++){t[s].cantidad=Math.round(t[s].pisHectareaje*n/a*100)/100,i+=this.completarDetalleDistribucion(t[s],n,a).detCantidad,i=Math.round(100*i)/100,t[s].cantidad>o.cantidad&&(o=t[s],e=s),this.gridApi&&this.gridApi.updateRowData({update:t})}r=i-Math.round(100*n)/100,r=Math.round(100*r)/100,t[e]&&(t[e].cantidad=t[e].cantidad-r,t[e].cantidad=Math.round(100*t[e].cantidad)/100,this.listaInvConsumosDetalleDistribucion[e].detCantidad=t[e].cantidad,this.gridApi&&this.gridApi.updateRowData({update:t}))}this.parametros.cantidad=this.cantidad,this.parametros.invProducto=this.invProducto,this.parametros.listaInvConsumosDetalleDistribucion=this.listaInvConsumosDetalleDistribucion},e.prototype.sumarHectareaje=function(e,t){for(var o=0;o<e.length;o++)t+=e[o].pisHectareaje,t=Math.round(100*t)/100;return t},e.prototype.resetearCantidad=function(){this.listaInvConsumosDetalleDistribucion=new Array,this.gridApi&&this.gridApi.forEachNode(function(e){e.data.cantidad=0,e.setData(e.data)})},e.prototype.completarDetalleDistribucion=function(e,t,o){var a=new Qa.a;return a.detCantidad=e.cantidad,a.invProducto=this.invProducto,a.pisNumero=e.pisNumero,a.secCodigo=e.pisSector,this.listaInvConsumosDetalleDistribucion.push(a),a},ni([Object(i.Input)(),si("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),ni([Object(i.Input)(),si("design:type",Object)],e.prototype,"parametros",void 0),ni([Object(i.Input)(),si("design:type",Array)],e.prototype,"listaInvConsumosDetalleDistribucion",void 0),ni([Object(i.Input)(),si("design:type",Fe.a)],e.prototype,"invProducto",void 0),e=ni([Object(i.Component)({selector:"app-distribuciones",template:o("LOHe")}),si("design:paramtypes",[h.a,T.b,it.a])],e)}(),li=o("jKV4"),di=function(){function e(e){this.detSecuencial=0,this.detOrden=0,this.detCantidad=0,this.bodOrigenEmpresa="",this.bodOrigenCodigo="",this.bodDestinoEmpresa="",this.bodDestinoCodigo="",this.secOrigenEmpresa="",this.secOrigenCodigo="",this.secDestinoEmpresa="",this.secDestinoCodigo="",this.proEmpresa="",this.proCodigoPrincipal="",this.transEmpresa="",this.transPeriodo="",this.transMotivo="",this.transNumero="",this.proNombre="",this.medDetalle="",this.proCodigoPrincipalCopia="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencial=e.detSecuencial?e.detSecuencial:this.detSecuencial,this.detOrden=e.detOrden?e.detOrden:this.detOrden,this.detCantidad=e.detCantidad?e.detCantidad:this.detCantidad,this.bodOrigenEmpresa=e.bodOrigenEmpresa?e.bodOrigenEmpresa:this.bodOrigenEmpresa,this.bodOrigenCodigo=e.bodOrigenCodigo?e.bodOrigenCodigo:this.bodOrigenCodigo,this.bodDestinoEmpresa=e.bodDestinoEmpresa?e.bodDestinoEmpresa:this.bodDestinoEmpresa,this.bodDestinoCodigo=e.bodDestinoCodigo?e.bodDestinoCodigo:this.bodDestinoCodigo,this.secOrigenEmpresa=e.secOrigenEmpresa?e.secOrigenEmpresa:this.secOrigenEmpresa,this.secOrigenCodigo=e.secOrigenCodigo?e.secOrigenCodigo:this.secOrigenCodigo,this.secDestinoEmpresa=e.secDestinoEmpresa?e.secDestinoEmpresa:this.secDestinoEmpresa,this.secDestinoCodigo=e.secDestinoCodigo?e.secDestinoCodigo:this.secDestinoCodigo,this.proEmpresa=e.proEmpresa?e.proEmpresa:this.proEmpresa,this.proCodigoPrincipal=e.proCodigoPrincipal?e.proCodigoPrincipal:this.proCodigoPrincipal,this.transEmpresa=e.transEmpresa?e.transEmpresa:this.transEmpresa,this.transPeriodo=e.transPeriodo?e.transPeriodo:this.transPeriodo,this.transMotivo=e.transMotivo?e.transMotivo:this.transMotivo,this.transNumero=e.transNumero?e.transNumero:this.transNumero},e}(),pi=o("iHU/"),ui=function(){function e(e){this.invTransferenciasPK=new pi.a,this.transEmpresa=null,this.transPeriodo=null,this.transMotivo=null,this.transNumero=null,this.transFecha=null,this.transObservaciones=null,this.transPendiente=!1,this.transRevisado=!1,this.transAnulado=!1,this.conEmpresa=null,this.conPeriodo=null,this.conTipo=null,this.conNumero=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.transEmpresa=e.transEmpresa?e.transEmpresa:this.transEmpresa,this.transPeriodo=e.transPeriodo?e.transPeriodo:this.transPeriodo,this.transMotivo=e.transMotivo?e.transMotivo:this.transMotivo,this.transNumero=e.transNumero?e.transNumero:this.transNumero,this.transFecha=e.transFecha?e.transFecha:this.transFecha,this.transObservaciones=e.transObservaciones?e.transObservaciones:this.transObservaciones,this.transPendiente=e.transPendiente?e.transPendiente:this.transPendiente,this.transRevisado=e.transRevisado?e.transRevisado:this.transRevisado,this.transAnulado=e.transAnulado?e.transAnulado:this.transAnulado,this.conEmpresa=e.conEmpresa?e.conEmpresa:this.conEmpresa,this.conPeriodo=e.conPeriodo?e.conPeriodo:this.conPeriodo,this.conTipo=e.conTipo?e.conTipo:this.conTipo,this.conNumero=e.conNumero?e.conNumero:this.conNumero,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),hi=o("V4Aq"),mi=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ci=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},vi=function(){function e(e,t,o,a,r,n,s,l,d,p,u){this.toastr=e,this.atajoService=t,this.motivoTransferenciaService=o,this.transferenciaService=a,this.bodegaService=r,this.utilService=n,this.filasService=s,this.modalService=l,this.api=d,this.auth=p,this.periodoService=u,this.enviarCancelar=new i.EventEmitter,this.activarEstado=new i.EventEmitter,this.enviarAccion=new i.EventEmitter,this.constantes=c.a,this.cargando=!1,this.tituloForm="",this.listadoMotivos=new Array,this.motivoSeleccionado=new hi.a,this.transferencia=new ui,this.listaResultado=[],this.listadoBodegas=new Array,this.bodegaSeleccionadaOrigen=new vo.a,this.bodegaSeleccionadaDestino=new vo.a,this.es={},this.fechaValido=!0,this.fechaMax=null,this.objetoSeleccionado=new di,this.listaInvDetalleTran=new Array,this.listaInvDetalleEliminado=new Array,this.screamXS=!0,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.rowSelection="single",this.isCollapsed=!1,this.estilos={},this.filasTiempo=new D.a,this.activar=!0,this.configAutonumeric=this.transferenciaService.obtenerAutonumeric()}return e.prototype.ngOnInit=function(){var e=this;this.screamXS=window.innerWidth<c.a.WINDOW_WIDTH_XS,c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.definirAtajosDeTeclado(),Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.inicializarValores(),this.data&&(this.listadoMotivos=this.data.listaMotivosTransferencias,this.operaciones(),this.generarOpcionesDetalle()),setTimeout(function(){e.transferenciaService.enfocarInput("observaciones")},50),this.iniciarAgGrid()},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmTransferencia?e.frmTransferencia.value:null)),e.listaInvDetalleTranInicial=JSON.parse(JSON.stringify(e.transferencia?e.transferencia:null))},1e3)},e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnMayorizarTransferencia");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(e){var t=document.getElementById("btnCancelarTransferencia");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarTransferencia");return e&&e.click(),!1}))},e.prototype.inicializarValores=function(){this.periodoSeleccionado=this.data.periodoSeleccionado,this.activar=this.data.activar,this.transferencia.transFecha=this.utilService.obtenerFechaActual(),this.fechaMax=this.utilService.obtenerFechaActual(),this.extraerValoresIniciales()},e.prototype.cambiaFecha=function(){if(this.data.accion===c.a.ACCION_NUEVO)this.transferencia.transFecha?this.verificarFechaValida():this.fechaValido=!1;else if(this.data.accion===c.a.ACCION_MAYORIZAR)if(this.data.periodoSeleccionado&&this.transferencia.transFecha){var e=this.transferencia.transFecha.getTime();e>=this.periodoSeleccionado.perDesde&&e<=this.periodoSeleccionado.perHasta?this.fechaValido=!0:this.fechaValido=!1}else this.fechaValido=!1;else this.fechaValido=!0},e.prototype.verificarFechaValida=function(){this.fechaValido=!1;var e={fecha:Ut(this.transferencia.transFecha).format("YYYY-MM-DD"),empresa:c.a.KEY_EMPRESA_SELECT};this.periodoService.getPeriodoPorFecha(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGetPeriodoPorFecha=function(e){e&&!e.perCerrado?this.fechaValido=!0:this.fechaValido=!1,this.data.accion!=c.a.ACCION_NUEVO&&this.data.accion!=c.a.ACCION_MAYORIZAR&&(this.fechaValido=!0)},e.prototype.verificarBodegaValida=function(){this.bodegaSeleccionadaDestino===this.bodegaSeleccionadaOrigen&&this.toastr.error(c.a.MSJ_BODEGAS_IGUALES,c.a.TOAST_ADVERTENCIA)},e.prototype.listarInvTransferenciaMotivoComboTO=function(){var e={empresa:c.a.KEY_EMPRESA_SELECT,inactivos:!1};this.cargando=!0,this.motivoTransferenciaService.listarInvTransferenciaMotivoTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvTransferenciaMotivoTO=function(e){this.listadoMotivos=e||[],this.motivoSeleccionado=this.listadoMotivos[0],this.cargando=!1},e.prototype.listarInvBodegaComboTO=function(){var e={empresa:c.a.KEY_EMPRESA_SELECT};this.cargando=!0,this.bodegaService.listarInvComboBodegaTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvComboBodegaTO=function(e){this.listadoBodegas=e||[],this.bodegaSeleccionadaOrigen=this.listadoBodegas[0],this.bodegaSeleccionadaDestino=this.listadoBodegas[1]},e.prototype.buscarProducto=function(e){var t=e.event.keyCode,o=e.event.target.value,a=e.data.proCodigoPrincipal;if(this.utilService.validarKeyBuscar(t))if(e.data.proCodigoPrincipal=o,o===a&&o&&a)t===c.a.KEYCODE_TAB?this.cantidadFocusAndEditingCell(e.node.rowIndex):this.productoFocusAndEditingCell(e.node.rowIndex);else if(o=(o=""===o?null:o)?o.toUpperCase():null){var i={empresa:this.empresaSeleccionada.empCodigo,busqueda:o,categoria:null,bodega:this.bodegaSeleccionadaOrigen.bodCodigo,incluirInactivos:!1,limite:!1};this.abrirModalProducto(i,e)}else t===c.a.KEYCODE_TAB?this.cantidadFocusAndEditingCell(e.node.rowIndex):this.productoFocusAndEditingCell(e.node.rowIndex)},e.prototype.abrirModalProducto=function(e,t){var o=this,a=t.node.rowIndex,i=this.modalService.open(r.a,{size:"lg",backdrop:"static",windowClass:"miSize"});i.componentInstance.parametrosBusqueda=e,i.componentInstance.empresaSeleccionada=this.empresaSeleccionada,i.componentInstance.isModal=!0,i.componentInstance.isConsumos=!0,i.result.then(function(e){if(e){var i=new ke.a(e);t.event.target.value=i.proCodigoPrincipal,t.data.proCodigoPrincipal=i.proCodigoPrincipal,t.data.proEmpresa=o.empresaSeleccionada.empCodigo,t.data.proNombre=i.proNombre,t.data.medDetalle=i.detalleMedida,t.data.tipTipo=i.tipTipo,o.refreshGrid(),a>=0&&a===o.listaInvDetalleTran.length-1&&o.agregarFila("down",!1),o.cantidadFocusAndEditingCell(a)}else o.productoFocusAndEditingCell(a)},function(){t.data.proCodigoPrincipal="",o.validarProducto(t.data),o.gridApi.setFocusedCell(a,"proNombre"),o.productoFocusAndEditingCell(a)})},e.prototype.productoFocusAndEditingCell=function(e){this.gridApi&&(this.gridApi.setFocusedCell(e,"proCodigoPrincipal"),this.gridApi.startEditingCell({rowIndex:e,colKey:"proCodigoPrincipal"}))},e.prototype.cantidadFocusAndEditingCell=function(e){this.gridApi&&(this.gridApi.setFocusedCell(e,"detCantidad"),this.gridApi.startEditingCell({rowIndex:e,colKey:"detCantidad"}))},e.prototype.validarProducto=function(e){e.proCodigoPrincipal!==e.proCodigoPrincipalCopia&&this.resetearProducto(e)},e.prototype.resetearProducto=function(e){e.proCodigoPrincipalCopia=null,e.proCodigoPrincipal=null,e.proNombre=null,e.estadoProducto=!1,e.medDetalle=null,this.refreshGrid()},e.prototype.nuevaTransferencia=function(){this.listarInvBodegaComboTO(),this.listadoMotivos=this.data.listadoMotivos,this.motivoSeleccionado=this.data.motivoSeleccionado,this.transferencia=new ui;var e=new di({detCantidad:1});this.listaInvDetalleTran.push(e),this.inicializarValores(),this.verificarFechaValida(),this.extraerValoresIniciales()},e.prototype.obtenerObjetoItemListaTransferenciaTO=function(){var e=this.data.transferencia.split("|"),t={empresa:c.a.KEY_EMPRESA_SELECT,codigoPeriodo:e[0].trim(),motivo:e[1].trim(),numeroTransferencia:e[2].trim()};this.cargando=!0,this.transferenciaService.obtenerObjetoItemListaTransferenciaTO(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeConsultarTransferencia=function(e){var t=this;if(this.listaInvDetalleTran=e.detalle,this.listadoBodegas=e.listadoBodega,this.listadoMotivos=e.listadoMotivosTransferencia,this.listaInvDetalleTran&&this.listaInvDetalleTran.length>0)for(var o=0;o<this.listaInvDetalleTran.length;o++)this.listaInvDetalleTran[o].proCodigoPrincipalCopia=this.listaInvDetalleTran[o].proCodigoPrincipal,this.listaInvDetalleTran[o].proNombre=this.listaInvDetalleTran[o].proNombre,this.listaInvDetalleTran[o].detCantidad=this.listaInvDetalleTran[o].detCantidad,this.listaInvDetalleTran[o].medDetalle=this.listaInvDetalleTran[o].medDetalle;this.transferencia.transFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e.cabecera.transFecha),this.bodegaSeleccionadaDestino=this.listadoBodegas.find(function(e){return e.bodCodigo==t.listaInvDetalleTran[0].bodDestinoCodigo}),this.bodegaSeleccionadaOrigen=this.listadoBodegas.find(function(e){return e.bodCodigo==t.listaInvDetalleTran[0].bodOrigenCodigo}),this.motivoSeleccionado=this.listadoMotivos.find(function(t){return t.tmCodigo==e.cabecera.transMotivo}),this.transferencia.transObservaciones=e.cabecera.transObservaciones,this.transferencia.transPendiente=e.cabecera.transPendiente,this.cargando=!1},e.prototype.obtenerTransferenciaPorOperacion=function(){var e=this.data.transferencia.split("|"),t={empresa:c.a.KEY_EMPRESA_SELECT,codigoPeriodo:e[0].trim(),motivo:e[1].trim(),numeroTransferencia:e[2].trim()};this.cargando=!0,this.transferenciaService.obtenerObjetoItemListaTransferenciaTO(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.desmayorizarTransferencia=function(){var e=this.data.transferencia.split("|"),t={empresa:c.a.KEY_EMPRESA_SELECT,periodo:e[0].trim(),motivo:e[1].trim(),numero:e[2].trim()};this.cargando=!0,this.transferenciaService.desmayorizarTransferencias(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeDesmayorizarTransferencia=function(e){this.cargando=!1,this.toastr.success(c.a.MSJ_SE_DESMAYORIZO_TRANSFERENCIA+e.extraInfo.transNumero,c.a.TAG_AVISO),this.confirmacionMayorizar(e.extraInfo)},e.prototype.anularTransferencia=function(){var e=this,t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ANULAR_TRANSFERENCIA,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ANULAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0;var o=e.data.transferencia.split("|"),a={empresa:c.a.KEY_EMPRESA_SELECT,periodo:o[0].trim(),motivo:o[1].trim(),numero:o[2].trim()};e.cargando=!0,e.transferenciaService.anularTransferencias(a,e,c.a.KEY_EMPRESA_SELECT)}else{a={accion:c.a.ACCION_CANCELAR};e.cargando=!1,e.enviarAccion.emit(a)}})},e.prototype.despuesDeAnularTransferencia=function(e){this.cargando=!1,this.transferencia=this.setearValoresAnular(e);var t={accion:c.a.ACCION_MODIFICADO,consResultante:this.transferenciaService.construirObjetoParaPonerloEnLaListaAnularRestaurar(this.transferencia),empresa:this.empresaSeleccionada};this.enviarAccion.emit(t),this.toastr.success(c.a.MSJ_SE_ANULO_TRANSFERENCIA+e.extraInfo.transNumero,c.a.TAG_AVISO)},e.prototype.restaurarTransferencia=function(){this.cargando=!0;var e=this.data.transferencia.split("|"),t={empresa:c.a.KEY_EMPRESA_SELECT,periodo:e[0].trim(),motivo:e[1].trim(),numero:e[2].trim()};this.cargando=!0,this.transferenciaService.restaurarTransferencias(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeRestaurarTransferencia=function(e){this.cargando=!1,this.transferencia=this.setearValoresAnular(e);var t={accion:c.a.ACCION_MODIFICADO,consResultante:this.transferenciaService.construirObjetoParaPonerloEnLaListaAnularRestaurar(this.transferencia),empresa:this.empresaSeleccionada};this.enviarAccion.emit(t),this.toastr.success(c.a.MSJ_SE_RESTAURO_TRANSFERENCIA+e.extraInfo.transNumero,c.a.TAG_AVISO)},e.prototype.guardarTransferencia=function(e,t){var o=this.validarDetalle(),a=this.utilService.establecerFormularioTocado(e);if(this.data.accion===c.a.ACCION_NUEVO&&!0===this.fechaValido&&this.bodegaSeleccionadaDestino!=this.bodegaSeleccionadaOrigen&&o)if(a&&!e.invalid){var i={invTransferenciasTO:this.setearDatosTransferencia(t),listaInvTransferenciasDetalleTO:this.formatearDatosTransferenciaDetalle(this.listaInvDetalleTran)};this.transferenciaService.insertarInvTransferenciaTO(i,this,c.a.KEY_EMPRESA_SELECT,t)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TOAST_ADVERTENCIA);else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TOAST_ADVERTENCIA)},e.prototype.despuesDeInsertarTransferencia=function(e,t){this.transferencia=e.extraInfo.map.invTransferencias?e.extraInfo.map.invTransferencias:this.transferencia,this.transferencia.transFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.transferencia.transFecha),this.transferencia.transPendiente=t;try{this.cargando=!1,this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK),this.preguntarImprimirTransferencia(e.operacionMensaje)}catch(o){this.cargando=!1,this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK)}},e.prototype.modificarTransferencia=function(e,t){this.utilService.puedoCancelar(this.valoresIniciales,this.frmTransferencia)&&this.toastr.warning(c.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,c.a.TOAST_INFORMACION);var o=this.validarDetalle(),a=this.utilService.establecerFormularioTocado(e);if(this.data.accion===c.a.ACCION_MAYORIZAR&&!0===this.fechaValido&&this.bodegaSeleccionadaDestino!=this.bodegaSeleccionadaOrigen&&o)if(a&&!e.invalid){var i={invTransferenciasTO:this.setearDatosTransferencia(t),listaInvTransferenciasDetalleTO:this.formatearDatosTransferenciaDetalle(this.listaInvDetalleTran),listaInvTransferenciasEliminarDetalleTO:this.formatearDatosTransferenciaDetalle(this.listaInvDetalleEliminado),desmayorizar:!1};this.transferenciaService.modificarInvTransferenciasTO(i,this,c.a.KEY_EMPRESA_SELECT,t)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TOAST_ADVERTENCIA)},e.prototype.despuesDeModificarTransferencia=function(e,t){this.transferencia=e.extraInfo.map.invTransferencias?e.extraInfo.map.invTransferencias:this.transferencia,this.transferencia.transFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.transferencia.transFecha),this.transferencia.transPendiente=t;try{this.cargando=!1,this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK);var o={accion:c.a.ACCION_MODIFICADO,consResultante:this.transferenciaService.construirObjetoParaPonerloEnLaLista(this.transferencia),empresa:this.empresaSeleccionada};this.enviarAccion.emit(o)}catch(a){this.cargando=!1,this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK)}},e.prototype.validarDetalle=function(){var e=this,t=!0;return this.gridApi&&this.gridApi.forEachNode(function(o){!(e.transferenciaService.validarCantidad(o.data)&&e.transferenciaService.validarProducto(o.data))&&(t=!1)}),t},e.prototype.imprimirTransferenciaFormulario=function(){if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",numero:[this.data.transferencia]};this.transferenciaService.imprimirTransferencia(e,this,this.empresaSeleccionada)}},e.prototype.imprimirTransferencia=function(){if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e=this.utilService.getAGSelectedData(this.gridApi);if(e&&0===e.length&&!this.frmTransferencia)this.toastr.warning(c.a.MSJ_NO_ITEM_SELECCIONADO,c.a.TOAST_INFORMACION),this.cargando=!1;else{var t={empresa:this.empresaSeleccionada.empCodigo,usuarioEmpresaReporteTO:this.empresaSeleccionada?this.empresaSeleccionada.empCodigo:"",numero:[this.objetoSeleccionado.transNumero]};this.transferenciaService.imprimirTransferencia(t,this,c.a.KEY_EMPRESA_SELECT)}}},e.prototype.setearDatosTransferencia=function(e){var t=new ui;if(t.transMotivo=this.motivoSeleccionado.tmCodigo,t.transFecha=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.transferencia.transFecha),t.transObservaciones=this.transferencia.transObservaciones,t.transEmpresa=c.a.KEY_EMPRESA_SELECT,t.transPendiente=e,t.usrCodigo=this.auth.getCodigoUser(),delete t.invTransferenciasPK,this.data.accion===c.a.ACCION_MAYORIZAR){var o=this.data.transferencia.split("|");t.transNumero=o[2].trim(),t.transPeriodo=o[0].trim()}return t},e.prototype.formatearDatosTransferenciaDetalle=function(e){for(var t=0;t<e.length;t++)e[t].detCantidad=e[t].detCantidad?e[t].detCantidad:null,e[t].proCodigoPrincipal=e[t].proCodigoPrincipal?e[t].proCodigoPrincipal:null,e[t].bodOrigenCodigo=this.bodegaSeleccionadaOrigen.bodCodigo,e[t].bodDestinoCodigo=this.bodegaSeleccionadaDestino.bodCodigo,e[t].secDestinoCodigo=this.bodegaSeleccionadaDestino.secCodigo,e[t].secDestinoEmpresa=this.empresaSeleccionada.empCodigo,e[t].secOrigenCodigo=this.bodegaSeleccionadaDestino.secCodigo,e[t].secOrigenEmpresa=this.empresaSeleccionada.empCodigo,e[t].detOrden=t+1,e[t].transEmpresa=c.a.KEY_EMPRESA_SELECT;return e},e.prototype.setearValoresDesmayorizar=function(e){var t=e;return this.transferencia.transPeriodo=t.transPeriodo,this.transferencia.transMotivo=t.transMotivo,this.transferencia.transNumero=t.transNumero,this.transferencia.transFecha=t.transFecha,this.transferencia.transPendiente=t.transPendiente,this.transferencia},e.prototype.setearValoresAnular=function(e){var t=e.extraInfo;return this.transferencia.transPeriodo=t.transPeriodo,this.transferencia.transMotivo=t.transMotivo,this.transferencia.transNumero=t.transNumero,this.transferencia.transFecha=t.transFecha,this.transferencia.transPendiente=t.transPendiente,this.transferencia.transAnulado=t.transAnulado,this.transferencia},e.prototype.operaciones=function(){switch(this.filasTiempo.iniciarContador(),this.data.accion){case c.a.ACCION_NUEVO:this.tituloForm=c.a.TITULO_FORM_NUEVO_COMPROBANTE_TRANSFERENCIA,this.nuevaTransferencia(),this.filasTiempo.finalizarContador();break;case c.a.ACCION_CONSULTAR:this.tituloForm=c.a.TITULO_FORM_CONSULTA_TRANSFERENCIA,this.obtenerObjetoItemListaTransferenciaTO(),this.filasTiempo.finalizarContador();break;case c.a.ACCION_MAYORIZAR:this.tituloForm=c.a.TITULO_FORM_MAYORIZAR_TRANSFERENCIA,this.obtenerTransferenciaPorOperacion(),this.filasTiempo.finalizarContador();break;case c.a.ACCION_DESMAYORIZAR:this.desmayorizarTransferencia(),this.filasTiempo.finalizarContador();break;case c.a.ACCION_ANULAR:this.obtenerObjetoItemListaTransferenciaTO(),this.filasTiempo.finalizarContador();break;case c.a.ACCION_RESTAURAR:this.restaurarTransferencia()}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.transferenciaService.generarColumnasFormulario(this),this.columnDefsSelected=this.columnDefs.slice(),this.context={componentParent:this},this.frameworkComponents={numericCell:zo.a,toolTip:pe.a,pinnedCell:Ko.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null,i=a?a.getColDef():null;i&&i.editable&&this.gridApi&&a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}),this.objetoSeleccionado=t?t.data:null},e.prototype.focusedProducto=function(e){var t=this;setTimeout(function(){t.productoFocusAndEditingCell(e)},50)},e.prototype.collpase=function(){this.isCollapsed=!this.isCollapsed;var e=this.isCollapsed?"260px":"405px";this.estilos={width:"100%",height:"calc(100vh - "+e+")"}},e.prototype.onresize=function(){this.screamXS=window.innerWidth<c.a.WINDOW_WIDTH_XS},e.prototype.cambiarEstadoActivar=function(e){this.activar=!e,this.activarEstado.emit(e)},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpcionesDetalle(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.generarOpcionesDetalle=function(){var e=this,t=this.data.accion===c.a.ACCION_MAYORIZAR||this.data.accion===c.a.ACCION_NUEVO,o=this.data.accion===c.a.ACCION_MAYORIZAR||this.data.accion===c.a.ACCION_NUEVO;this.opcionesDetalle=[{label:c.a.ACCION_AGREGAR_FILA_ARRIBA,icon:c.a.ICON_FLECHA_ARRIBA,disabled:!t,command:function(){return t?e.agregarFila("up",!0):null}},{label:c.a.ACCION_AGREGAR_FILA_ABAJO,icon:c.a.ICON_FLECHA_ABAJO,disabled:!t,command:function(){return t?e.agregarFila("down",!0):null}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?e.eliminarFila():null}}]},e.prototype.agregarFila=function(e,t){var o=this.gridApi.getFocusedCell().rowIndex;if(o>=0){o="up"===e?o:o+1;var a=this.obtenerNuevoDetalle(this.objetoSeleccionado),i=this.listaInvDetalleTran.slice();i.splice(o,0,a),this.listaInvDetalleTran=i,t&&this.focusedProducto(o)}this.refreshGrid()},e.prototype.eliminarFila=function(){if(this.listaInvDetalleTran.length>1){var e=this.gridApi.getFocusedCell(),t=this.listaInvDetalleTran.slice();t.splice(e.rowIndex,1),this.listaInvDetalleTran=t,this.objetoSeleccionado.detSecuencial>0&&this.listaInvDetalleEliminado.push(this.objetoSeleccionado),this.refreshGrid()}},e.prototype.obtenerNuevoDetalle=function(e){var t=new di;return t.detCantidad=e.detCantidad,t},e.prototype.confirmacionCerrar=function(){var e=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmTransferencia))this.enviarCancelar.emit();else switch(this.data.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_NUEVO:var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarCancelar.emit()});break;default:this.enviarCancelar.emit()}},e.prototype.preguntarImprimirTransferencia=function(e){var t=this,o={title:c.a.TOAST_CORRECTO,texto:e+"<br>"+c.a.MSJ_PREGUNTA_IMPRIMIR+"<br>",type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_IMPRIMIR+"'></i>  "+c.a.LABEL_IMPRIMIR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){if(e)t.imprimirTransferencia();else{var o={accion:c.a.ACCION_CREADO,consResultante:t.transferenciaService.construirObjetoParaPonerloEnLaLista(t.transferencia),empresa:t.empresaSeleccionada};t.enviarAccion.emit(o)}})},e.prototype.confirmacionMayorizar=function(e){var t=this;Ca()(this.utilService.generarSwalConfirmationOption(c.a.MSJ_TITULO_MAYORIZAR,c.a.MSJ_PREGUNTA_MAYORIZAR,c.a.SWAL_QUESTION)).then(function(o){if(o.value&&(t.data.accion=c.a.ACCION_MAYORIZAR,t.obtenerObjetoItemListaTransferenciaTO()),o.dismiss){t.transferencia=t.setearValoresDesmayorizar(e);var a={accion:c.a.ACCION_DESMAYORIZAR,consResultante:t.transferenciaService.construirObjetoParaPonerloEnLaListaAnularRestaurar(t.transferencia),empresa:t.empresaSeleccionada};t.enviarAccion.emit(a)}})},mi([Object(i.Input)(),Ci("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),mi([Object(i.Input)(),Ci("design:type",Object)],e.prototype,"data",void 0),mi([Object(i.Output)(),Ci("design:type",i.EventEmitter)],e.prototype,"enviarCancelar",void 0),mi([Object(i.Output)(),Ci("design:type",Object)],e.prototype,"activarEstado",void 0),mi([Object(i.Output)(),Ci("design:type",Object)],e.prototype,"enviarAccion",void 0),mi([Object(i.ViewChild)("frmTransferencia"),Ci("design:type",I.NgForm)],e.prototype,"frmTransferencia",void 0),mi([Object(i.ViewChild)("menuOpciones"),Ci("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),mi([Object(i.HostListener)("window:resize",["$event"]),Ci("design:type",Function),Ci("design:paramtypes",[]),Ci("design:returntype",void 0)],e.prototype,"onresize",null),e=mi([Object(i.Component)({selector:"app-transferencias-formulario",template:o("D41Y"),styles:[o("8Xiy")]}),Ci("design:paramtypes",[u.b,S.HotkeysService,li.a,zt.a,Bt.a,h.a,L.a,T.b,p.a,K.a,qe.a])],e)}(),Ai=o("JmMb"),fi=o("A8Rz"),gi=o("IY89"),bi=function(){function e(e){this.id=0,this.utiId="",this.utiNombres="",this.utiApellidos="",this.utiGenero="",this.utiFechaIngreso="",this.utiFechaSalida="",this.utiCargo="",this.utiCargasFamiliares=0,this.utiDiasLaborados=0,this.utiValorPersonal=0,this.utiValorCargas=0,this.utiValorUtilidades=0,this.utiValorSueldos=0,this.utiValorBonos=0,this.utiValorXiii=0,this.utiValorXiv=0,this.utiValorFondoReserva=0,this.utiValorSalarioDigno=0,this.utiValorUtilidadAnterior=0,this.utiValorImpuesto=0,this.utiCategoria="",this.utiCuenta="",this.utiSector="",this.estado=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.utiId=e.utiId?e.utiId:this.utiId,this.utiNombres=e.utiNombres?e.utiNombres:this.utiNombres,this.utiApellidos=e.utiApellidos?e.utiApellidos:this.utiApellidos,this.utiGenero=e.utiGenero?e.utiGenero:this.utiGenero,this.utiFechaIngreso=e.utiFechaIngreso?e.utiFechaIngreso:this.utiFechaIngreso,this.utiFechaSalida=e.utiFechaSalida?e.utiFechaSalida:this.utiFechaSalida,this.utiCargo=e.utiCargo?e.utiCargo:this.utiCargo,this.utiCargasFamiliares=e.utiCargasFamiliares?e.utiCargasFamiliares:this.utiCargasFamiliares,this.utiDiasLaborados=e.utiDiasLaborados?e.utiDiasLaborados:this.utiDiasLaborados,this.utiValorPersonal=e.utiValorPersonal?e.utiValorPersonal:this.utiValorPersonal,this.utiValorCargas=e.utiValorCargas?e.utiValorCargas:this.utiValorCargas,this.utiValorUtilidades=e.utiValorUtilidades?e.utiValorUtilidades:this.utiValorUtilidades,this.utiValorSueldos=e.utiValorSueldos?e.utiValorSueldos:this.utiValorSueldos,this.utiValorBonos=e.utiValorBonos?e.utiValorBonos:this.utiValorBonos,this.utiValorXiii=e.utiValorXiii?e.utiValorXiii:this.utiValorXiii,this.utiValorXiv=e.utiValorXiv?e.utiValorXiv:this.utiValorXiv,this.utiValorFondoReserva=e.utiValorFondoReserva?e.utiValorFondoReserva:this.utiValorFondoReserva,this.utiValorSalarioDigno=e.utiValorSalarioDigno?e.utiValorSalarioDigno:this.utiValorSalarioDigno,this.utiValorUtilidadAnterior=e.utiValorUtilidadAnterior?e.utiValorUtilidadAnterior:this.utiValorUtilidadAnterior,this.utiValorImpuesto=e.utiValorImpuesto?e.utiValorImpuesto:this.utiValorImpuesto,this.utiCategoria=e.utiCategoria?e.utiCategoria:this.utiCategoria,this.utiCuenta=e.utiCuenta?e.utiCuenta:this.utiCuenta,this.utiSector=e.utiSector?e.utiSector:this.utiSector,this.estado=e.estado?e.estado:this.estado},e}(),Oi=function(){function e(e){this.id=null,this.prEmpresa=null,this.prCategoria=null,this.prSector=null,this.prId=null,this.prNombres=null,this.prCargo=null,this.prSueldo=0,this.prSaldoAnterior=0,this.prSaldoAnticipos=0,this.prSaldoBonos=0,this.prSaldoPrestamos=0,this.prSaldoCuotas=0,this.prValor=0,this.prAfiliado=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.prEmpresa=e.prEmpresa?e.prEmpresa:this.prEmpresa,this.prCategoria=e.prCategoria?e.prCategoria:this.prCategoria,this.prSector=e.prSector?e.prSector:this.prSector,this.prId=e.prId?e.prId:this.prId,this.prNombres=e.prNombres?e.prNombres:this.prNombres,this.prCargo=e.prCargo?e.prCargo:this.prCargo,this.prSueldo=e.prSueldo?e.prSueldo:this.prSueldo,this.prSaldoAnterior=e.prSaldoAnterior?e.prSaldoAnterior:this.prSaldoAnterior,this.prSaldoAnticipos=e.prSaldoAnticipos?e.prSaldoAnticipos:this.prSaldoAnticipos,this.prSaldoBonos=e.prSaldoBonos?e.prSaldoBonos:this.prSaldoBonos,this.prSaldoPrestamos=e.prSaldoPrestamos?e.prSaldoPrestamos:this.prSaldoPrestamos,this.prSaldoCuotas=e.prSaldoCuotas?e.prSaldoCuotas:this.prSaldoCuotas,this.prFechaIngreso=e.prFechaIngreso?e.prFechaIngreso:this.prFechaIngreso,this.prFechaUltimoSueldo=e.prFechaUltimoSueldo?e.prFechaUltimoSueldo:this.prFechaUltimoSueldo,this.prValor=e.prValor?e.prValor:this.prValor,this.prAfiliado=e.prAfiliado?e.prAfiliado:this.prAfiliado},e}(),Si=o("8G1n"),Ii=function(){function e(e){this.rhListaEmpleadoLoteTO=new Oi,this.concepto=new Si.a,this.piscina=new wa.a,this.listaPiscinas=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.rhListaEmpleadoLoteTO=e.rhListaEmpleadoLoteTO?e.rhListaEmpleadoLoteTO:this.rhListaEmpleadoLoteTO,this.concepto=e.concepto?e.concepto:this.concepto,this.observacion=e.observacion?e.observacion:this.observacion,this.deducible=e.deducible?e.deducible:this.deducible,this.isConceptoValido=e.isConceptoValido?e.isConceptoValido:this.isConceptoValido,this.isValorValido=e.isValorValido?e.isValorValido:this.isValorValido,this.piscina=e.piscina?e.piscina:this.piscina,this.bonoSecuencial=e.bonoSecuencial?e.bonoSecuencial:this.bonoSecuencial,this.bonoAuxiliar=e.bonoAuxiliar?e.bonoAuxiliar:this.bonoAuxiliar},e}(),Ei=o("3xZc"),Ri=o("R9tJ"),Ti=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},_i=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pi=function(){function e(e){this.utilService=e}return e.prototype.conversionDeUtilidad=function(e,t){for(var o=new Array,a=0;a<e.length;a++){var i=new bi;i.fpSeleccionada=this.seleccionarFormaPagoBS(e[a],t),i.utiApellidos=e[a].rhEmpleado.empApellidos,i.utiCargasFamiliares=e[a].empCargasFamiliares,i.utiCargo=e[a].empCargo,i.utiCategoria=e[a].rhEmpleado.rhCategoria?e[a].rhEmpleado.rhCategoria.rhCategoriaPK.catNombre:null,i.utiCuenta=e[a].rhEmpleado.empCuentaNumero,i.utiDiasLaborados=e[a].utiDiasLaborados,i.utiFechaIngreso=this.utilService.formatoStringSinZonaHorariaYYYMMDD(e[a].empFechaIngreso),i.utiGenero=e[a].rhEmpleado.empGenero,i.utiId=e[a].rhEmpleado.rhEmpleadoPK.empId,i.utiNombres=e[a].rhEmpleado.empNombres,i.utiSector=e[a].rhEmpleado.prdSector?e[a].rhEmpleado.prdSector.prdSectorPK.secCodigo:"",i.utiValorCargas=e[a].utiValorCargas,i.utiValorPersonal=e[a].utiValorPersonal,i.valor=e[a].utiValorTotal,i.documento=e[a].utiDocumento,i.observacion=e[a].utiObservaciones,i.errorEnDocumento=!1,i.documentoRepetido=!1,i.id=e[a].utiSecuencial,i.desde=e[a].utiDesde,i.hasta=e[a].utiHasta,o.push(i)}return o},e.prototype.conversionDeAnticipo=function(e,t){for(var o=new Array,a=0;a<e.length;a++){var i=new Oi;i.fpSeleccionada=this.seleccionarFormaPago(e[a],t),i.prAfiliado=null!=e[a].rhEmpleado.empFechaAfiliacionIess,i.prCargo=e[a].rhEmpleado.empCargo,i.prCategoria=e[a].rhEmpleado.rhCategoria.rhCategoriaPK.catNombre,i.prEmpresa=e[a].rhEmpleado.rhEmpleadoPK.empEmpresa,i.prFechaIngreso=e[a].rhEmpleado.empFechaAfiliacionIess,i.prFechaUltimoSueldo=e[a].rhEmpleado.empFechaUltimoSueldo,i.prId=e[a].rhEmpleado.rhEmpleadoPK.empId,i.prNombres=e[a].rhEmpleado.empApellidos+" "+e[a].rhEmpleado.empNombres,i.prSaldoAnterior=e[a].rhEmpleado.empSaldoAnterior,i.prSaldoAnticipos=e[a].rhEmpleado.empSaldoAnticipos,i.prSaldoBonos=e[a].rhEmpleado.empSaldoBonos,i.prSaldoCuotas=e[a].rhEmpleado.empSaldoCuotas,i.prSaldoPrestamos=e[a].rhEmpleado.empSaldoPrestamos,i.prSector=e[a].rhEmpleado.prdSector.prdSectorPK.secCodigo,i.prSueldo=e[a].rhEmpleado.empSueldoIess,i.prValor=e[a].antValor,i.prIngresos=e[a].rhEmpleado.empSaldoBonos+e[a].rhEmpleado.empSueldoIess+e[a].rhEmpleado.empBonoFijo,i.pmpBonoFijo=e[a].rhEmpleado.empBonoFijo,i.documento=e[a].antDocumento,i.observacion=e[a].antObservaciones,i.errorEnDocumento=!1,i.documentoRepetido=!1,i.id=e[a].antSecuencial,i.auxiliar=e[a].antAuxiliar,o.push(i)}return o},e.prototype.conversionDeRol=function(e,t){for(var o=new Array,a=0;a<e.length;a++){var i=this.construirEmpleadosPorLoteAPartirDeUnRol(e[a],t);o.push(i)}return o},e.prototype.construirEmpleadosPorLoteAPartirDeUnRol=function(e,t){var o=new Oi;return o.prAfiliado=null!=e.rhEmpleado.empFechaAfiliacionIess,o.prCargo=e.rhEmpleado.empCargo,o.prCategoria=e.rhEmpleado.rhCategoria?e.rhEmpleado.rhCategoria.rhCategoriaPK.catNombre:null,o.prEmpresa=e.rhEmpleado.rhEmpleadoPK.empEmpresa,o.prFechaIngreso=e.rhEmpleado.empFechaAfiliacionIess,o.hasta=e.rolHasta,o.desde=o.prFechaIngreso>e.rolDesde?o.prFechaIngreso:e.rolDesde,o.prFechaUltimoSueldo=e.rhEmpleado.empFechaUltimoSueldo,o.prId=e.rhEmpleado.rhEmpleadoPK.empId,o.prNombres=e.rhEmpleado.empApellidos+" "+e.rhEmpleado.empNombres,o.prSaldoAnterior=e.rhEmpleado.empSaldoAnterior,o.prSaldoAnticipos=e.rhEmpleado.empSaldoAnticipos,o.prSaldoBonos=e.rhEmpleado.empSaldoBonos,o.prSaldoCuotas=e.rhEmpleado.empSaldoCuotas,o.prSaldoPrestamos=e.rhEmpleado.empSaldoPrestamos,o.prestamosH=e.rolPrestamoHipotecario,o.prestamosQ=e.rolPrestamoQuirografario,o.prSueldo=e.rhEmpleado.empSueldoIess,o.fpSeleccionada=this.seleccionarFormaPago(e,t),o.rolDiasExtrasReales=e.rolDiasExtrasReales,o.documento=e.rolDocumento,o.observacion=e.rolObservaciones,o.horas50=e.rolHorasExtras,o.horas100=e.rolHorasExtras100,o.diasFalta=e.rolDiasFaltasReales,o.rolDescuentoPermisoMedico=e.rolDescuentoPermisoMedico,o.diasPermiso=e.rolDiasPermisoMedico,o.rolLiqFondoReserva=e.rolLiqFondoReserva,o.rolLiqXiii=e.rolLiqXiii,o.rolLiqXiv=e.rolLiqXiv,o.rolLiqVacaciones=e.rolLiqVacaciones,o.rolLiqSalarioDigno=e.rolLiqSalarioDigno,o.rolLiqBonificacion=e.rolLiqBonificacion,o.rolLiqDesahucio=e.rolLiqDesahucio,o.rolLiqDesahucioIntempestivo=e.rolLiqDesahucioIntempestivo,o.errorEnDocumento=!1,o.documentoRepetido=!1,o.id=e.rolSecuencial,o.rolAuxiliar=e.rolAuxiliar,o.prSector=e.rhEmpleado.prdSector?e.rhEmpleado.prdSector.prdSectorPK.secCodigo:null,o.prSaldoPrestamos=e.rhEmpleado.empSaldoPrestamos,o.prestamos=e.rolPrestamos,o.rolBono=e.rolBonos,o.rolAnticipo=e.rolAnticipos,o.prSaldoAnterior=e.rolSaldoAnterior,o.contableProvision=e.conContableProvision,o},e.prototype.conversionDeBono=function(e,t,o){for(var a=new Array,i=0;i<e.length;i++){var r=new Ii;r.rhListaEmpleadoLoteTO.prAfiliado=null!=e[i].rhEmpleado.empFechaAfiliacionIess,r.rhListaEmpleadoLoteTO.prCargo=e[i].rhEmpleado.empCargo,r.rhListaEmpleadoLoteTO.prCategoria=e[i].rhEmpleado.rhCategoria?e[i].rhEmpleado.rhCategoria.rhCategoriaPK.catNombre:null,r.rhListaEmpleadoLoteTO.prEmpresa=e[i].rhEmpleado.rhEmpleadoPK.empEmpresa,r.rhListaEmpleadoLoteTO.prFechaIngreso=e[i].rhEmpleado.empFechaAfiliacionIess,r.rhListaEmpleadoLoteTO.prFechaUltimoSueldo=e[i].rhEmpleado.empFechaUltimoSueldo,r.rhListaEmpleadoLoteTO.prId=e[i].rhEmpleado.rhEmpleadoPK.empId,r.rhListaEmpleadoLoteTO.prNombres=e[i].rhEmpleado.empApellidos+" "+e[i].rhEmpleado.empNombres,r.rhListaEmpleadoLoteTO.prSaldoAnterior=e[i].rhEmpleado.empSaldoAnterior,r.rhListaEmpleadoLoteTO.prSaldoAnticipos=e[i].rhEmpleado.empSaldoAnticipos,r.rhListaEmpleadoLoteTO.prSaldoBonos=e[i].rhEmpleado.empSaldoBonos,r.rhListaEmpleadoLoteTO.prSaldoCuotas=e[i].rhEmpleado.empSaldoCuotas,r.rhListaEmpleadoLoteTO.prSaldoPrestamos=e[i].rhEmpleado.empSaldoPrestamos,r.rhListaEmpleadoLoteTO.prSector=e[i].rhEmpleado.prdSector?e[i].rhEmpleado.prdSector.prdSectorPK.secCodigo:"",r.rhListaEmpleadoLoteTO.prSueldo=e[i].rhEmpleado.empSueldoIess,r.rhListaEmpleadoLoteTO.prValor=e[i].bonoValor,r.rhListaEmpleadoLoteTO.id=e[i].bonoSecuencial,r.concepto=this.seleccionarConcepto(e[i],t),r.piscina=this.seleccionarPisicna(e[i],o),r.listaPiscinas=o,r.observacion=e[i].bonoObservacion,r.deducible=e[i].bonoDeducible,r.isConceptoValido=!0,r.isValorValido=!0,r.bonoSecuencial=e[i].bonoSecuencial,r.bonoAuxiliar=e[i].bonoAuxiliar,a.push(r)}return a},e.prototype.conversionXivSueldo=function(e,t,o){for(var a=new Array,i=0;i<e.length;i++){var r=new Ei.a;r.rhXivSueldo=e[i],r.formaPago=this.seleccionarFormaPagoBS(e[i],t),r.isFormaPagoValido=!0,r.isValorValido=!0,r.documentoRepetido=!1,r.errorEnDocumento=!1,r.diasLaborados=360*e[i].xivValor/o,r.diasLaborados=Math.round(100*r.diasLaborados)/100,a.push(r)}return a},e.prototype.conversionXiiiSueldo=function(e,t){for(var o=new Array,a=0;a<e.length;a++){var i=new Ri.a;i.rhXiiiSueldo=e[a],i.ingresosCalculados=e[a].xiiiBaseImponible,i.formaPago=this.seleccionarFormaPagoBS(e[a],t),i.isFormaPagoValido=!0,i.isValorValido=!0,i.documentoRepetido=!1,i.errorEnDocumento=!1,o.push(i)}return o},e.prototype.seleccionarFormaPagoBS=function(e,t){if(t&&t.length>0&&e.conCuentas)for(var o=0;o<t.length;o++)if(t[o].ctaCodigo==e.conCuentas.conCuentasPK.ctaCodigo)return t[o]},e.prototype.seleccionarFormaPago=function(e,t){if(t&&t.length>0&&e.conCuentas)for(var o=0;o<t.length;o++)if(t[o].ctaCodigo==e.conCuentas.conCuentasPK.ctaCodigo)return t[o]},e.prototype.seleccionarConcepto=function(e,t){if(t&&t.length>0)for(var o=0;o<t.length;o++)if(t[o].bcDetalle.trim()==e.bonoConcepto.trim())return t[o]},e.prototype.seleccionarPisicna=function(e,t){if(t&&t.length>0&&e.prdPiscina)for(var o=0;o<t.length;o++)if(t[o].pisNumero==e.prdPiscina.prdPiscinaPK.pisNumero)return t[o]},e=Ti([Object(i.Injectable)({providedIn:"root"}),_i("design:paramtypes",[h.a])],e)}(),Ni=o("hqLJ"),yi=o("flmD"),Di=o("UBxT"),Li=function(){function e(e){this.preSecuencial=0,this.preValor=0,this.preNumeroPagos=0,this.preDocumento="",this.preObservaciones="",this.preAuxiliar=!1,this.prdSector=new yi.a,this.conCuentas=new Fa.a,this.conContable=new Ua.a,this.rhEmpleado=new Di.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.preSecuencial=e.preSecuencial?e.preSecuencial:this.preSecuencial,this.preValor=e.preValor?e.preValor:this.preValor,this.preNumeroPagos=e.preNumeroPagos?e.preNumeroPagos:this.preNumeroPagos,this.preDocumento=e.preDocumento?e.preDocumento:this.preDocumento,this.preObservaciones=e.preObservaciones?e.preObservaciones:this.preObservaciones,this.preAuxiliar=e.preAuxiliar?e.preAuxiliar:this.preAuxiliar,this.prdSector=e.prdSector?e.prdSector:this.prdSector,this.conCuentas=e.conCuentas?e.conCuentas:this.conCuentas,this.rhEmpleado=e.rhEmpleado?e.rhEmpleado:this.rhEmpleado},e}(),Mi=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},xi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Fi=function(){function e(e,t,o,a,r,n,s){this.utilService=e,this.api=t,this.toastr=o,this.auth=a,this.archivoService=r,this.contableService=n,this.contableFormularioService=s,this.cerrarContabilidadAcciones=new i.EventEmitter,this.activarEstado=new i.EventEmitter,this.mostrarFormulario=new i.EventEmitter,this.empresaSeleccionada=new l.a,this.listadoAnticipos=new Array,this.listadoRhAnticipo=new Array,this.listadoUtilidades=new Array,this.listadoRhUtilidades=new Array,this.listaResultadoBonos=new Array,this.listadoRhBono=new Array,this.listaResultadoXivSueldo=new Array,this.listadoXivSueldo=new Array,this.listaResultadoXiiiSueldo=new Array,this.listadoXiiiSueldo=new Array,this.listadoEmpleadosLote=new Array,this.listadoRhRol=new Array,this.rhRol=new Ni.a,this.listaEmpresas=new Array,this.listadoPrestamos=new Array,this.rhPrestamo=new Li,this.formasDePagoBS=new Array,this.formasDePago=new Array,this.listadoConceptos=new Array,this.listadoPiscinas=new Array,this.listaPrestamoMotivo=new Array,this.conContable=new Ua.a,this.periodoSeleccionado=new Ye.a,this.tituloForm="",this.salarioMinimo=0,this.vista="",this.constantes=c.a,this.es={},this.objetoAlDesmayorizar={},this.parametrosFormulario={},this.esContable=!0,this.cargando=!1,this.tipoSeleccionado=new Ba.a}return e.prototype.ngOnInit=function(){this.constantes=c.a,this.empresaSeleccionada=this.data.empresaSeleccionada,Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.data&&this.operaciones()},e.prototype.operaciones=function(){switch(this.data.accion){case c.a.ACCION_CONSULTAR:this.tituloForm=c.a.TITULO_FORM_CONSULTA_COMPROBANTE_CONTABLE,this.obtenerContableTO();break;case c.a.ACCION_MAYORIZAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_MAYORIZAR,this,!0)&&(this.tituloForm=c.a.TITULO_FORM_MAYORIZAR_COMPROBANTE_CONTABLE,this.obtenerContableTO());break;case c.a.ACCION_DESMAYORIZAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_DESMAYORIZAR,this,!0)&&this.desmayorizarContable();break;case c.a.ACCION_REVERSAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_REVERSAR,this,!0)&&(this.tituloForm=c.a.TITULO_FORM_REVERSAR_COMPROBANTE_CONTABLE,this.obtenerContableTO());break;case c.a.ACCION_ANULAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_ANULAR,this,!0)&&(this.tituloForm=c.a.TITULO_FORM_ANULAR_COMPROBANTE_CONTABLE,this.obtenerContableTO());break;case c.a.ACCION_ELIMINAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_ELIMINAR,this,!0)&&(this.tituloForm=c.a.TITULO_FORM_ELIMINAR_COMPROBANTE_CONTABLE,this.obtenerContableTO());break;case c.a.ACCION_RESTAURAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_RESTAURAR,this,!0)&&this.restaurarContable();break;case c.a.ACCION_DESBLOQUEAR:this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_DESBLOQUEAR,this,!0)&&this.desbloquerContable()}},e.prototype.desmayorizarContable=function(){this.cargando=!0,this.contableService.desmayorizarContable(this,this.obtenerconContablePK())},e.prototype.despuesDeDesmayorizarContable=function(e){this.cargando=!1,this.toastr.success(e.operacionMensaje,c.a.TAG_AVISO),this.objetoAlDesmayorizar=e.extraInfo,this.data.empresaSeleccionada.listaSisPermisoTO.gruMayorizarContables?this.confirmacionMayorizar(e.extraInfo):this.data.volverACargar?this.cerrarDefinitivo(!1):this.cerrarDefinitivo(e.extraInfo)},e.prototype.restaurarContable=function(){this.cargando=!0,this.contableService.restaurarContable(this,this.obtenerconContablePK())},e.prototype.despuesDeRestaurarContable=function(e){this.cargando=!1,this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje),this.data.volverACargar?this.cerrarDefinitivo(!1):this.cerrarDefinitivo(e.extraInfo)},e.prototype.desbloquerContable=function(){this.cargando=!0;var e={conContablePK:this.utilService.obtenerConContablePK(this.data.contable,c.a.KEY_EMPRESA_SELECT,"|"),usuario:this.auth.getCodigoUser()};this.contableService.desbloquerContable(this,e)},e.prototype.despuesDeDesbloquerContable=function(e){this.cargando=!1,this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje),this.data.volverACargar?this.cerrarDefinitivo(!1):this.cerrarDefinitivo(e.extraInfo)},e.prototype.mayorizarContable=function(e){this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_MAYORIZAR,this,!0)&&(this.cargando=!0,this.contableService.mayorizarContable(this,e))},e.prototype.despuesDeMayorizarContable=function(e){this.cargando=!1,this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK),this.data.volverACargar?this.cerrarDefinitivo(!0):this.cerrarDefinitivo(e.extraInfo)},e.prototype.eliminar=function(){var e=this;if(this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_ELIMINAR,this,!0)){var t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ELIMINAR,cancelButtonText:c.a.MSJ_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){var o={conContablePK:e.utilService.obtenerConContablePK(e.data.contable,c.a.KEY_EMPRESA_SELECT,"|")};e.cargando=!0,e.contableService.eliminarConContable(e,o)}})}},e.prototype.despuesDeEliminarConContable=function(e){this.cargando=!1,this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje),this.data.volverACargar?this.cerrarDefinitivo(!1):this.cerrarDefinitivo(this.conContable)},e.prototype.guardarAnularReversar=function(){if(this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_ANULAR,this,!0)){var e={conContablePK:this.utilService.obtenerConContablePK(this.data.contable,c.a.KEY_EMPRESA_SELECT,"|"),anularReversar:this.data.accion===c.a.ACCION_ANULAR};this.anularReversarContable(e)}},e.prototype.anularReversarContable=function(e){this.cargando=!0,this.contableService.anularReversarContable(this,e)},e.prototype.despuesDeAnularReversarContable=function(e){this.cargando=!1,this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje),this.data.volverACargar?this.cerrarDefinitivo(!1):this.cerrarDefinitivo(e.extraInfo)},e.prototype.insertarContable=function(e){this.contableService.insertarContable(this,e)},e.prototype.despuesDeInsertarContable=function(e){this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK),this.cerrarDefinitivo(e.extraInfo)},e.prototype.obtenerContableTO=function(){var e=this;this.cargando=!0,this.api.post("todocompuWS/rrhhWebController/obtenerDatosParaMayorizarContableRRHH",this.obtenerconContablePK(),c.a.KEY_EMPRESA_SELECT).then(function(t){t&&t.estadoOperacion===c.a.KEY_EXITO?(e.conContable=t.extraInfo.contable,e.conContable.conFecha=e.utilService.formatoDateSinZonaHorariaYYYMMDD(e.conContable.conFecha),e.periodoSeleccionado=new Ye.a(t.extraInfo.periodo),e.tipoSeleccionado=t.extraInfo.tipo,e.formatearDatosSegunVista(t.extraInfo,t.extraInfo.vista),e.vista=t.extraInfo.vista,e.cargando=!1):(e.toastr.warning(t.operacionMensaje,c.a.TAG_AVISO),e.cerrarDefinitivo(null))}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.fpPorPagar=function(){return{ctaCodigo:"000000000000",fpDetalle:"POR PAGAR",validar:!1}},e.prototype.formatearDatosSegunVista=function(e,t){switch(t){case"UTILIDAD":this.listadoRhUtilidades=e.utilidades,this.formasDePagoBS=e.formasDePagoBS,this.listadoUtilidades=this.contableFormularioService.conversionDeUtilidad(this.listadoRhUtilidades,this.formasDePagoBS),this.tituloForm=this.tituloForm+" "+this.tipoSeleccionado.tipDetalle+" No. "+this.conContable.conContablePK.conNumero,this.mostrarFormulario.emit(!0);break;case"ANTICIPO":this.listadoRhAnticipo=e.anticipos,this.formasDePago=e.formasDePago,this.listadoAnticipos=this.contableFormularioService.conversionDeAnticipo(this.listadoRhAnticipo,this.formasDePago),this.tituloForm=this.tituloForm+" "+this.tipoSeleccionado.tipDetalle+" No. "+this.conContable.conContablePK.conNumero,this.mostrarFormulario.emit(!0);break;case"ROL":this.listadoRhRol=e.roles,this.formasDePago=e.formasDePago,this.formasDePago.push(this.fpPorPagar()),this.listadoEmpleadosLote=this.contableFormularioService.conversionDeRol(this.listadoRhRol,this.formasDePago),this.tituloForm=this.tituloForm+" "+this.tipoSeleccionado.tipDetalle+" No. "+this.conContable.conContablePK.conNumero,this.mostrarFormulario.emit(!0);break;case"BONO":this.listadoRhBono=e.bonos,this.listadoConceptos=e.conceptos,this.listadoPiscinas=e.piscinas,this.listaResultadoBonos=this.contableFormularioService.conversionDeBono(this.listadoRhBono,this.listadoConceptos,this.listadoPiscinas),this.tituloForm=this.tituloForm+" "+this.tipoSeleccionado.tipDetalle+" No. "+this.conContable.conContablePK.conNumero,this.mostrarFormulario.emit(!0);break;case"XIV":this.listadoXivSueldo=e.xivSueldos,this.formasDePagoBS=e.formasDePagoBS,this.listaResultadoXivSueldo=this.contableFormularioService.conversionXivSueldo(this.listadoXivSueldo,this.formasDePagoBS,e.salarioMinimo),this.tituloForm=this.tituloForm+" "+this.tipoSeleccionado.tipDetalle+" No. "+this.conContable.conContablePK.conNumero,this.salarioMinimo=e.salarioMinimo,this.mostrarFormulario.emit(!0);break;case"XIII":this.listadoXiiiSueldo=e.xiiiSueldos,this.formasDePagoBS=e.formasDePagoBS,this.listaResultadoXiiiSueldo=this.contableFormularioService.conversionXiiiSueldo(this.listadoXiiiSueldo,this.formasDePagoBS),this.tituloForm=this.tituloForm+" "+this.tipoSeleccionado.tipDetalle+" No. "+this.conContable.conContablePK.conNumero,this.mostrarFormulario.emit(!0);break;case"LIQUIDACION":this.listadoRhRol=e.roles,this.rhRol=this.listadoRhRol[0],this.formasDePago=e.formasDePago,this.listaEmpresas.push(this.empresaSeleccionada),this.tituloForm=this.tituloForm+" "+this.tipoSeleccionado.tipDetalle+" No. "+this.conContable.conContablePK.conNumero,this.mostrarFormulario.emit(!0);break;case"PRESTAMO":this.listadoPrestamos=e.prestamos,this.rhPrestamo=this.listadoPrestamos[0],this.formasDePago=e.formasDePago,this.listaPrestamoMotivo=e.motivos,this.tituloForm=this.tituloForm+" "+this.tipoSeleccionado.tipDetalle+" No. "+this.conContable.conContablePK.conNumero,this.mostrarFormulario.emit(!0);break;default:this.cerrarDefinitivo(null)}},e.prototype.imprimirContable=function(){var e=this;if(this.contableService.verificarPermisoFORMULARIO(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t=new ka.a,o=[];t.empCodigo=this.data.empresaSeleccionada.empCodigo,t.perCodigo=this.conContable.conContablePK.conPeriodo,t.tipCodigo=this.conContable.conContablePK.conTipo,t.conNumero=this.conContable.conContablePK.conNumero,t.conFecha=this.utilService.convertirFechaStringDDMMYYYY(JSON.parse(JSON.stringify(this.conContable.conFecha))),t.conPendiente=this.conContable.conPendiente?c.a.ETIQUETA_PENDIENTE:" ",t.conAnulado=this.conContable.conAnulado?c.a.ETIQUETA_ANULADO:" ",t.conReversado=this.conContable.conReversado?c.a.ETIQUETA_REVERSADO:" ",t.conBloqueado=this.conContable.conBloqueado?c.a.ETIQUETA_BLOQUEADO:" ",t.conConcepto=this.conContable.conConcepto,t.conDetalle=this.conContable.conDetalle,t.conObservaciones=this.conContable.conObservaciones,t.conReferencia=this.conContable.conReferencia,delete t.seleccionado,o.push(t);var a={ListaConContableTO:o};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableDetalle",a,this.data.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("listadoContables.pdf",t):e.toastr.warning(c.a.MSJ_SE_PUEDE_IMPRIMIR_POR_ESTADO,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.confirmacionCerrarContable=function(){this.cerrarDefinitivo(null)},e.prototype.confirmacionMayorizar=function(e){var t=this;Ca()(this.utilService.generarSwalConfirmationOption(c.a.MSJ_TITULO_MAYORIZAR,c.a.MSJ_PREGUNTA_MAYORIZAR,c.a.SWAL_QUESTION)).then(function(o){o.value&&(t.cargando=!0,t.data.accion=c.a.ACCION_MAYORIZAR,t.obtenerContableTO()),o.dismiss&&(t.data.volverACargar?t.cerrarDefinitivo(!1):t.cerrarDefinitivo(e))})},e.prototype.cerrarDefinitivo=function(e){this.tituloForm=null,this.cargando=!1,this.cerrarContabilidadAcciones.emit({mostrarContilidadAcciones:!1,objetoEnviar:null,contable:e}),this.conContable=null,this.data=null},e.prototype.obtenerconContablePK=function(){return{conContablePK:this.utilService.obtenerConContablePK(this.data.contable,c.a.KEY_EMPRESA_SELECT,"|")}},e.prototype.obtenerMensajeError=function(e){var t="."+c.a.MSJ_ESTA;return this.data.accion===c.a.ACCION_MAYORIZAR?t=e.conPendiente?"":"."+c.a.MSJ_NO_ESTA+c.a.ETIQUETA_PENDIENTE:t+=e.conPendiente?c.a.ETIQUETA_PENDIENTE:e.conBloqueado?c.a.ETIQUETA_BLOQUEADO:e.conReversado?c.a.ETIQUETA_BLOQUEADO:c.a.ETIQUETA_REVERSADO,t},e.prototype.sePuedeVisualizarContable=function(e){return this.data.accion===c.a.ACCION_MAYORIZAR?e.conPendiente:!(e.conAnulado||e.conBloqueado||e.conPendiente||e.conReversado)},e.prototype.verificarGuardarComoPendiente=function(){return this.utilService.convertirDecimaleFloat(JSON.parse(JSON.stringify(0)))!==this.utilService.convertirDecimaleFloat(JSON.parse(JSON.stringify(0)))},e.prototype.ejecutarAccion=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.activarEstado.emit(e.estado);break;case c.a.ACCION_CANCELAR:case c.a.ACCION_LIMPIAR_RESULTADO:this.activarEstado.emit(!1),this.cerrarDefinitivo(this.conContable);break;case c.a.ACCION_IMPRIMIR:this.imprimirContable();break;case c.a.ACCION_ANULAR:this.guardarAnularReversar();break;case c.a.ACCION_ELIMINAR:this.eliminar();break;case c.a.ACCION_REVERSAR:this.guardarAnularReversar();break;case c.a.ACCION_CARGANDO:this.cargando=e.estado}},Mi([Object(i.ViewChild)("menuOpciones"),xi("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),Mi([Object(i.Input)(),xi("design:type",Object)],e.prototype,"data",void 0),Mi([Object(i.Output)(),xi("design:type",Object)],e.prototype,"cerrarContabilidadAcciones",void 0),Mi([Object(i.Output)(),xi("design:type",Object)],e.prototype,"activarEstado",void 0),Mi([Object(i.Output)(),xi("design:type",Object)],e.prototype,"mostrarFormulario",void 0),e=Mi([Object(i.Component)({selector:"app-contable-rrhh-formulario",template:o("Fi7T")}),xi("design:paramtypes",[h.a,p.a,u.b,K.a,le.a,Wa.a,Pi])],e)}(),wi=o("jeDP"),Gi=function(){function e(e){this.utiSecuencial=0,this.utiDesde=new Date,this.utiHasta=new Date,this.utiDiasLaborados=0,this.utiValorPersonal=0,this.utiValorCargas=0,this.utiValorTotal=0,this.utiCodigoMinisterial="",this.utiDocumento="",this.utiObservaciones="",this.utiAuxiliar=!1,this.empCargo="",this.empFechaIngreso=new Date,this.empCargasFamiliares=0,this.prdSector=new yi.a,this.conCuentas=new Fa.a,this.conContable=new Ua.a,this.rhEmpleado=new Di.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.utiSecuencial=e.utiSecuencial?e.utiSecuencial:this.utiSecuencial,this.utiDesde=e.utiDesde?e.utiDesde:this.utiDesde,this.utiHasta=e.utiHasta?e.utiHasta:this.utiHasta,this.utiDiasLaborados=e.utiDiasLaborados?e.utiDiasLaborados:this.utiDiasLaborados,this.utiValorPersonal=e.utiValorPersonal?e.utiValorPersonal:this.utiValorPersonal,this.utiValorCargas=e.utiValorCargas?e.utiValorCargas:this.utiValorCargas,this.utiValorTotal=e.utiValorTotal?e.utiValorTotal:this.utiValorTotal,this.utiCodigoMinisterial=e.utiCodigoMinisterial?e.utiCodigoMinisterial:this.utiCodigoMinisterial,this.utiDocumento=e.utiDocumento?e.utiDocumento:this.utiDocumento,this.utiObservaciones=e.utiObservaciones?e.utiObservaciones:this.utiObservaciones,this.utiAuxiliar=e.utiAuxiliar?e.utiAuxiliar:this.utiAuxiliar,this.empCargo=e.empCargo?e.empCargo:this.empCargo,this.empFechaIngreso=e.empFechaIngreso?e.empFechaIngreso:this.empFechaIngreso,this.empCargasFamiliares=e.empCargasFamiliares?e.empCargasFamiliares:this.empCargasFamiliares,this.prdSector=e.prdSector?e.prdSector:this.prdSector,this.conCuentas=e.conCuentas?e.conCuentas:this.conCuentas,this.conContable=e.conContable?e.conContable:this.conContable,this.rhEmpleado=e.rhEmpleado?e.rhEmpleado:this.rhEmpleado},e}(),ji=o("4aKD"),Ui=o("cagF"),Bi=o("9v1L"),Vi=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ki=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Wi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},zi=function(){function e(e,t,o,a,r,n,s,d,p){this.utilidadesPrecalculadasService=e,this.filasService=t,this.participacionUtilidadesService=o,this.utilService=a,this.archivoService=r,this.toastr=n,this.atajoService=s,this.modalService=d,this.contableService=p,this.empresaSeleccionada=new l.a,this.parametrosFormulario={},this.esContable=!1,this.formasDePago=new Array,this.listadoUtilidades=new Array,this.conContable=new Ua.a,this.tipoSeleccionado=new Ba.a,this.data={},this.titulo=c.a.TALENTO_HUMANO_PARTICIPACION_UTILIDADES,this.enviarAccion=new i.EventEmitter,this.fechaContableValido=!0,this.estilos={},this.constantes=c.a,this.cargando=!1,this.listadoRhUtilidades=new Array,this.objetoSeleccionado=new bi,this.filtroGlobal="",this.observacionesContable="",this.activar=!1,this.isScreamMd=!0,this.estadoContableAMayorizar=!1,this.puedeEditarTabla=!1,this.filasTiempo=new D.a,this.accion=c.a.ACCION_CREAR,this.columnDefs=[],this.columnDefsSelected=[],this.autonumeric92=this.participacionUtilidadesService.autonumeric92(),this.estilos={width:"100%",height:"calc(100vh - 210px)"}}return e.prototype.ngOnInit=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.isScreamMd=!(this.innerWidth<=576),this.fpSeleccionada=this.parametrosFormulario.fpSeleccionada,this.conContableCopia=this.esContable?Vi({},this.conContable):new Ua.a,this.esContable&&(this.activar=this.data.activar),this.esContable&&(this.estilos.height="calc(100vh - 355px)"),this.puedeEditarTabla=!this.esContable||this.data.accion===c.a.ACCION_MAYORIZAR,this.accion=this.esContable?this.data.accion:c.a.ACCION_CREAR,this.iniciarAgGrid()},e.prototype.ngOnChanges=function(e){!this.esContable&&(this.listadoUtilidades=new Array),this.listadoRhUtilidades=new Array,this.definirAtajosDeTeclado(),e.parametrosFormulario&&e.parametrosFormulario.currentValue&&e.parametrosFormulario.currentValue.listar&&this.getListaUtilidades()},e.prototype.accionesBotones=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.activar=e.estado;break;case c.a.ACCION_CANCELAR:this.activar=!1,this.cancelar();break;case c.a.ACCION_MAYORIZAR:this.fechaContableValido?(this.estadoContableAMayorizar=e.estado,this.mayorizar()):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1);break;case c.a.ACCION_IMPRIMIR:this.enviarAccion.emit({accion:c.a.ACCION_IMPRIMIR});break;case c.a.ACCION_ANULAR:this.enviarAccion.emit({accion:c.a.ACCION_ANULAR});break;case c.a.ACCION_ELIMINAR:this.enviarAccion.emit({accion:c.a.ACCION_ELIMINAR});break;case c.a.ACCION_REVERSAR:this.enviarAccion.emit({accion:c.a.ACCION_REVERSAR})}},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardar");return e.gridApi&&e.gridApi.stopEditing(),t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelar");return e.gridApi&&e.gridApi.stopEditing(),t&&t.click(),!1}))},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=e.accion===c.a.ACCION_CREAR?JSON.parse(JSON.stringify(e.observacionesContable)):JSON.parse(JSON.stringify(e.conContable?e.conContable:null)),e.detalleInicial=JSON.parse(JSON.stringify(e.listadoUtilidades?e.listadoUtilidades:null))},50)},e.prototype.cancelar=function(){var e=this;switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CREAR:if(this.sePuedeCancelar())this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})}break;case c.a.ACCION_CONSULTAR:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});break;default:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})}},e.prototype.sePuedeCancelar=function(){var e=!1;e=this.accion===c.a.ACCION_CREAR?this.valoresIniciales===this.observacionesContable:this.utilService.compararObjetos(this.valoresIniciales,this.conContableCopia);var t=this.utilService.compararObjetos(this.listadoUtilidades,this.detalleInicial);return e&&t},e.prototype.getListaUtilidades=function(){this.filasTiempo.iniciarContador(),this.cargando=!0,this.utilidadesPrecalculadasService.listautilidadesPrecalculadas(this.parametrosFormulario,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarutilidadesPrecalculadas=function(e){this.filasTiempo.finalizarContador(),e&&e.length>0?(this.cargando=!1,this.listadoUtilidades=e):this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:!e})},e.prototype.exportar=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)&&this.validarAntesDeEnviar()){this.cargando=!0;var t={listaRhUtilidades:this.listadoRhUtilidades};this.archivoService.postExcel("todocompuWS/rrhhWebController/exportarRhUtilidades",t,this.empresaSeleccionada).then(function(t){t&&t._body&&t._body.byteLength>0?e.utilService.descargarArchivoExcel(t._body,"RhUtilidades_"):e.toastr.warning(c.a.MSJ_ERROR_EXPORTAR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.guardar=function(){if(this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&this.validarAntesDeEnviar()){this.cargando=!0;var e={observacionesContable:this.observacionesContable,listaRhUtilidades:this.listadoRhUtilidades,fechaMaximaPago:this.parametrosFormulario.fechaMaximaPago};this.participacionUtilidadesService.insertarRhUtilidades(e,this,c.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.mayorizar=function(){if(this.utilService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0)&&this.validarAntesDeEnviar()){this.cargando=!0;var e=Vi({},this.conContableCopia);e.conPendiente=this.estadoContableAMayorizar;var t={listaRhUtilidades:this.listadoRhUtilidades,conContable:e};this.participacionUtilidadesService.modificarRhUtilidades(t,this,c.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeInsertarRhUtilidades=function(e){this.conContable=e.extraInfo.conContable,this.conContable.conPendiente=this.estadoContableAMayorizar,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}),this.preguntarImprimir(e.operacionMensaje)},e.prototype.despuesDeModificarRhUtilidades=function(e){this.conContable.conFecha=this.conContableCopia.conFecha,this.conContable.conObservaciones=this.conContableCopia.conObservaciones,this.conContable.conPendiente=this.estadoContableAMayorizar,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}),this.estadoContableAMayorizar?this.mensajeOk(e.operacionMensaje):this.preguntarImprimir(e.operacionMensaje)},e.prototype.mensajeOk=function(e){this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e),this.cargando=!1,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})},e.prototype.ejecutarAccion=function(e,t){this.eliminarItem(e)},e.prototype.eliminarItem=function(e){if(this.listadoUtilidades&&this.listadoUtilidades.length>1){var t=this.listadoUtilidades.findIndex(function(t){return t.utiId===e.utiId});this.listadoUtilidades.splice(t,1),this.gridApi&&this.gridApi.updateRowData({remove:[e]}),this.actualizarPinned()}},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this);this.opciones=[{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!t,command:function(o){return t?e.eliminarItem(e.objetoSeleccionado):null}}]},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.preguntarImprimir=function(e){var t=this,o=this.modalService.open(Bi.a,{backdrop:"static"});o.componentInstance.empresaSeleccionada=this.empresaSeleccionada;var a=[],i=new wi.a;i=this.conContable.conContablePK,a.push(i),o.componentInstance.parametrosImprimir={listadoPK:a},o.componentInstance.nombreRutaImprimir="todocompuWS/contabilidadWebController/generarReporteContableIndividual",o.componentInstance.nombreArchivoPDFImprimir="ContableUtilidades",o.componentInstance.parametrosImprimirCombo={listaRhUtilidades:this.listadoRhUtilidades,contable:this.conContable},o.componentInstance.nombrerutaImprimirCombo="todocompuWS/rrhhWebController/generarReporteComprobanteUtilidades",o.componentInstance.nombreArchivoPDFImprimirCombo="ReporteComprobanteUtilidades",o.componentInstance.textoImprimirCombo=c.a.LABEL_IMPRIMIR_COMPROBANTE_UTILIDAD,o.componentInstance.mensaje=e,o.componentInstance.mostrarCombo=!0,o.result.then(function(e){},function(){t.cargando=!1,t.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.participacionUtilidadesService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.pinnedBottomRowData=this.participacionUtilidadesService.generarPinnedBottonRowData(),this.rowSelection="single",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas(),this.esContable&&this.actualizarPinned(),this.extraerValoresIniciales()},e.prototype.validarAntesDeEnviar=function(){for(var e=0,t=new Array,o=0;o<this.listadoUtilidades.length;o++)if(this.matRound2(this.listadoUtilidades[o].valor)>0){if(!this.validarRegistro(this.listadoUtilidades[o]))return this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TAG_AVISO),!1;var a=this.construirUtilidad(this.listadoUtilidades[o]);t.push(a),e++}return e>0?(this.listadoRhUtilidades=t,!0):(this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TAG_AVISO),!1)},e.prototype.construirUtilidad=function(e){var t=new Gi;t.utiDocumento=e.documento,t.utiObservaciones=e.observacion,this.esContable?(t.utiDesde=e.desde,t.utiSecuencial=e.id,t.utiAuxiliar=!0,t.utiHasta=e.hasta,t.empFechaIngreso=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e.utiFechaIngreso).getTime()):(t.utiDesde=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.parametrosFormulario.desde).getTime(),t.utiHasta=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.parametrosFormulario.hasta).getTime(),t.empFechaIngreso=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e.utiFechaIngreso).getTime()),t.utiDiasLaborados=e.utiDiasLaborados,t.utiValorPersonal=e.utiValorPersonal,t.utiValorCargas=e.utiValorCargas,t.utiValorTotal=e.valor,t.utiCodigoMinisterial=e.fpSeleccionada.fpCodigoMinisterial,t.empCargo=e.utiCargo,t.empCargasFamiliares=e.utiCargasFamiliares,t.conContable=null;var o=new Di.a;if(o.rhEmpleadoPK.empEmpresa=c.a.KEY_EMPRESA_SELECT,o.rhEmpleadoPK.empId=e.utiId,o.empNombres=e.utiNombres,o.empApellidos=e.utiApellidos,o.empFormaPago=e.fpSeleccionada.fpDetalle,t.rhEmpleado=o,e.utiSector){var a=new yi.a;a.prdSectorPK.secCodigo=e.utiSector,a.prdSectorPK.secEmpresa=c.a.KEY_EMPRESA_SELECT,t.prdSector=a}else t.prdSector=null;var i=new Fa.a;return i.conCuentasPK.ctaCodigo=e.fpSeleccionada.ctaCodigo,i.conCuentasPK.ctaEmpresa=c.a.KEY_EMPRESA_SELECT,t.conCuentas=i,t},e.prototype.validarRegistro=function(e){return!(!e.fpSeleccionada||!e.fpSeleccionada.fpDetalle||e.documentoRepetido||e.errorEnDocumento)},e.prototype.actualizarPinned=function(){for(var e=0,t=0,o=0;o<this.listadoUtilidades.length;o++)this.matRound2(this.listadoUtilidades[o].valor)>0&&this.validarRegistro(this.listadoUtilidades[o])&&(e=this.matRound2(e+this.matRound2(this.listadoUtilidades[o].valor)),t++);this.pinnedBottomRowData[0].valor=e,this.pinnedBottomRowData[0].documento=t,this.gridApi.setPinnedBottomRowData(this.pinnedBottomRowData)},e.prototype.matRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.terminadoEditar=function(e){var t=e.column.getId();"documento"!==t&&"valor"!==t&&"fpSeleccionada"!==t||this.verificarDocumentoBanco(e.data)},e.prototype.verificarDocumentoBanco=function(e){if(e.errorEnDocumento=!0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),e.valor>0&&e.documento&&e.fpSeleccionada&&e.fpSeleccionada.validar){var t={empresa:c.a.KEY_EMPRESA_SELECT,documento:e.documento,cuenta:e.fpSeleccionada.ctaCodigo,data:e};this.contableService.verificarDocumentoBanco(t,this,c.a.KEY_EMPRESA_SELECT)}else e.errorEnDocumento=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.validarDocumentosRepetido()},e.prototype.despuesDeVerificarDocumento=function(e,t){t.errorEnDocumento=!e,this.gridApi&&this.gridApi.updateRowData({update:[t]}),this.validarDocumentosRepetido()},e.prototype.validarDocumentosRepetido=function(){var e=this;this.listadoUtilidades.forEach(function(t){var o=t.documento&&t.valor>0&&t.fpSeleccionada&&t.fpSeleccionada.validar,a=e.listadoUtilidades.filter(function(e){return o&&e.valor>0&&e.fpSeleccionada&&e.fpSeleccionada.validar&&e.documento&&e!==t&&e.documento.trim()===t.documento.trim()});t.documentoRepetido=a.length>0}),this.actualizarPinned(),this.refreshGrid()},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_NUEVO:case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS)},ki([Object(i.ViewChild)("menuOpciones"),Wi("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),ki([Object(i.Input)(),Wi("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),ki([Object(i.Input)(),Wi("design:type",Object)],e.prototype,"parametrosFormulario",void 0),ki([Object(i.Input)(),Wi("design:type",Boolean)],e.prototype,"esContable",void 0),ki([Object(i.Input)(),Wi("design:type",Array)],e.prototype,"formasDePago",void 0),ki([Object(i.Input)(),Wi("design:type",Array)],e.prototype,"listadoUtilidades",void 0),ki([Object(i.Input)(),Wi("design:type",Ua.a)],e.prototype,"conContable",void 0),ki([Object(i.Input)(),Wi("design:type",Ba.a)],e.prototype,"tipoSeleccionado",void 0),ki([Object(i.Input)(),Wi("design:type",Object)],e.prototype,"data",void 0),ki([Object(i.Input)(),Wi("design:type",String)],e.prototype,"titulo",void 0),ki([Object(i.Output)(),Wi("design:type",Object)],e.prototype,"enviarAccion",void 0),ki([Object(i.ViewChild)("frmDatos"),Wi("design:type",I.NgForm)],e.prototype,"frmDatos",void 0),ki([Object(i.HostListener)("window:beforeunload",["$event"]),Wi("design:type",Function),Wi("design:paramtypes",[Event]),Wi("design:returntype",void 0)],e.prototype,"unloadHandler",null),ki([Object(i.HostListener)("window:resize",["$event"]),Wi("design:type",Function),Wi("design:paramtypes",[]),Wi("design:returntype",void 0)],e.prototype,"onResize",null),e=ki([Object(i.Component)({selector:"app-participacion-utilidades-formulario",template:o("siXs")}),Wi("design:paramtypes",[ji.a,L.a,Ui.a,h.a,le.a,u.b,S.HotkeysService,T.b,Wa.a])],e)}(),Ji=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ki=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Yi=function(){function e(e){this.utilService=e,this.conContable=new Ua.a,this.empresaSeleccionada=new l.a,this.tipoSeleccionado=new Ba.a,this.accionFechaValido=new i.EventEmitter,this.listaPeriodos=[],this.periodoSeleccionado=new Ye.a,this.tipoConcepto="",this.fechaMin=null,this.fechaMax=null,this.constantes=c.a,this.es={},this.formularioCorrecto=!1,this.fechaValido=!0,this.listaTipos=[],this.isCollapsed=!1,this.estilos={}}return e.prototype.ngOnInit=function(){if(this.constantes=c.a,this.empresaSeleccionada=this.data.empresaSeleccionada,Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.estilos={width:"100%",height:"calc(100vh - 365px)"},this.conContable&&this.conContable.conContablePK){var e=Ut(this.conContable.conContablePK.conPeriodo.trim()+"-01");this.fechaMin=e.startOf("month").toDate(),this.fechaMax=e.endOf("month").toDate()}},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmContableDetalle?e.frmContableDetalle.value:null))},50)},e.prototype.collpase=function(){this.isCollapsed=!this.isCollapsed;var e=this.isCollapsed?"260px":"405px";this.estilos={width:"100%",height:"calc(100vh - "+e+")"}},e.prototype.sePuedeVisualizarContable=function(e){return this.data.accion===c.a.ACCION_MAYORIZAR?e.conPendiente:!(e.conAnulado||e.conBloqueado||e.conPendiente||e.conReversado)},e.prototype.verificarFechaValida=function(){var e=this.utilService.establecerFormularioTocado(this.frmContableDetalle)&&this.frmContableDetalle.valid;if(this.fechaValido=!1,this.accionFechaValido.emit(this.fechaValido&&e),this.conContable.conFecha){var t=this.conContable.conFecha.getTime();this.utilService.validarPeriodo({fecha:t},this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeValidarPeriodo=function(e){var t=this.utilService.establecerFormularioTocado(this.frmContableDetalle)&&this.frmContableDetalle.valid;this.fechaValido=null!=e&&!e.perCerrado,this.accionFechaValido.emit(this.fechaValido&&t)},Ji([Object(i.Input)(),Ki("design:type",Object)],e.prototype,"data",void 0),Ji([Object(i.Input)(),Ki("design:type",Ua.a)],e.prototype,"conContable",void 0),Ji([Object(i.Input)(),Ki("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),Ji([Object(i.Input)(),Ki("design:type",Ba.a)],e.prototype,"tipoSeleccionado",void 0),Ji([Object(i.Output)(),Ki("design:type",Object)],e.prototype,"accionFechaValido",void 0),Ji([Object(i.ViewChild)("frmContableDetalle"),Ki("design:type",I.NgForm)],e.prototype,"frmContableDetalle",void 0),e=Ji([Object(i.Component)({selector:"app-contable-cabecera",template:o("es8l")}),Ki("design:paramtypes",[h.a])],e)}(),qi=o("M9xU"),Hi=o("udyK"),Xi=function(){function e(e){this.antSecuencial=0,this.antValor=0,this.antDocumento="",this.antObservaciones="",this.antAuxiliar=!1,this.prdSector=new yi.a,this.conCuentas=new Fa.a,this.conContable=new Ua.a,this.rhEmpleado=new Di.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.antSecuencial=e.antSecuencial?e.antSecuencial:this.antSecuencial,this.antValor=e.antValor?e.antValor:this.antValor,this.antDocumento=e.antDocumento?e.antDocumento:this.antDocumento,this.antObservaciones=e.antObservaciones?e.antObservaciones:this.antObservaciones,this.antAuxiliar=e.antAuxiliar?e.antAuxiliar:this.antAuxiliar,this.prdSector=e.prdSector?e.prdSector:this.prdSector,this.conCuentas=e.conCuentas?e.conCuentas:this.conCuentas,this.conContable=e.conContable?e.conContable:this.conContable,this.rhEmpleado=e.rhEmpleado?e.rhEmpleado:this.rhEmpleado},e}(),Zi=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},$i=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Qi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},er=function(){function e(e,t,o,a,r,n,s,d){this.empleadoService=e,this.filasService=t,this.anticipoService=o,this.utilService=a,this.toastr=r,this.atajoService=n,this.modalService=s,this.contableService=d,this.empresaSeleccionada=new l.a,this.parametrosFormulario={},this.enviarAccion=new i.EventEmitter,this.formasDePago=new Array,this.esContable=!1,this.listadoAnticipos=new Array,this.conContable=new Ua.a,this.tipoSeleccionado=new Ba.a,this.data={},this.titulo=c.a.TALENTO_HUMANO_ANTICIPOS_EMPLEADOS,this.fechaContableValido=!0,this.estilos={},this.accion=c.a.ACCION_CREAR,this.constantes=c.a,this.cargando=!1,this.listadoRhAnticipo=new Array,this.objetoSeleccionado=new Oi,this.filtroGlobal="",this.observacionesContable="",this.activar=!1,this.isScreamMd=!0,this.estadoContableAMayorizar=!1,this.puedeEditarTabla=!1,this.filasTiempo=new D.a,this.columnDefs=[],this.columnDefsSelected=[],this.autonumeric92=this.anticipoService.autonumeric92(),this.estilos={width:"100%",height:"calc(100vh - 220px)"}}return e.prototype.ngOnInit=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.isScreamMd=!(window.innerWidth<=576),this.fpSeleccionada=this.parametrosFormulario.fpSeleccionada,this.esContable&&(this.activar=this.data.activar),this.esContable&&(this.estilos.height="calc(100vh - 360px)"),this.conContableCopia=this.esContable?Zi({},this.conContable):new Ua.a,this.puedeEditarTabla=!this.esContable||this.data.accion===c.a.ACCION_MAYORIZAR,this.accion=this.esContable?this.data.accion:c.a.ACCION_CREAR,this.iniciarAgGrid()},e.prototype.ngOnChanges=function(e){!this.esContable&&(this.listadoAnticipos=new Array),this.listadoRhAnticipo=new Array,this.definirAtajosDeTeclado(),e.parametrosFormulario&&e.parametrosFormulario.currentValue&&e.parametrosFormulario.currentValue.listar&&this.getListaEmpleadoLote()},e.prototype.accionesBotones=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.activar=e.estado;break;case c.a.ACCION_CANCELAR:this.activar=!1,this.cancelar();break;case c.a.ACCION_MAYORIZAR:this.fechaContableValido?(this.estadoContableAMayorizar=e.estado,this.mayorizar()):this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS);break;case c.a.ACCION_IMPRIMIR:this.enviarAccion.emit({accion:c.a.ACCION_IMPRIMIR});break;case c.a.ACCION_ANULAR:this.enviarAccion.emit({accion:c.a.ACCION_ANULAR});break;case c.a.ACCION_ELIMINAR:this.enviarAccion.emit({accion:c.a.ACCION_ELIMINAR});break;case c.a.ACCION_REVERSAR:this.enviarAccion.emit({accion:c.a.ACCION_REVERSAR})}},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardar");return e.gridApi&&e.gridApi.stopEditing(),t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelar");return e.gridApi&&e.gridApi.stopEditing(),t&&t.click(),!1}))},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=e.accion===c.a.ACCION_CREAR?JSON.parse(JSON.stringify(e.observacionesContable)):JSON.parse(JSON.stringify(e.conContable?e.conContable:null)),e.detalleInicial=JSON.parse(JSON.stringify(e.listadoAnticipos?e.listadoAnticipos:null))},50)},e.prototype.cancelar=function(){var e=this;switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CREAR:if(this.sePuedeCancelar())this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})}break;case c.a.ACCION_CONSULTAR:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});break;default:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})}},e.prototype.sePuedeCancelar=function(){var e=!1;e=this.accion===c.a.ACCION_CREAR?this.valoresIniciales===this.observacionesContable:this.utilService.compararObjetos(this.valoresIniciales,this.conContableCopia);var t=this.utilService.compararObjetos(this.listadoAnticipos,this.detalleInicial);return e&&t},e.prototype.getListaEmpleadoLote=function(){this.filasTiempo.iniciarContador(),this.cargando=!0,this.empleadoService.getListaEmpleadoLote(this.parametrosFormulario,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGetListaEmpleadoLote=function(e){e&&e.length>0?(this.cargando=!1,this.listadoAnticipos=this.convetirLote(e)):this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}),this.filasTiempo.finalizarContador()},e.prototype.convetirLote=function(e){for(var t=0;t<e.length;t++)e[t].prIngresos=e[t].prSaldoBonos+e[t].prSueldo;return e},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:!e})},e.prototype.guardar=function(){if(this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&this.validarAntesDeEnviar()){this.cargando=!0;var e={observacionesContable:this.observacionesContable,listaRhAnticipo:this.listadoRhAnticipo,fechaHasta:this.parametrosFormulario.fecha};this.anticipoService.insertarRhAnticipo(e,this,c.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.mayorizar=function(){if(this.utilService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0)&&this.validarAntesDeEnviar()){this.cargando=!0;var e=Zi({},this.conContableCopia);e.conPendiente=this.estadoContableAMayorizar;var t={conContable:e,listaRhAnticipo:this.listadoRhAnticipo};this.anticipoService.modificarRhAnticipo(t,this,c.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeInsertarRhAnticipo=function(e){this.conContable=e.extraInfo.conContable,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}),this.preguntarImprimir(e.operacionMensaje),this.cargando=!1},e.prototype.despuesDeModificarRhAnticipo=function(e){this.conContable.conFecha=this.conContableCopia.conFecha,this.conContable.conObservaciones=this.conContableCopia.conObservaciones,this.conContable.conPendiente=this.estadoContableAMayorizar,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}),this.estadoContableAMayorizar?this.mensajeOk(e.operacionMensaje):this.preguntarImprimir(e.operacionMensaje)},e.prototype.mensajeOk=function(e){this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e),this.cargando=!1,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})},e.prototype.ejecutarAccion=function(e,t){this.eliminarItem(e)},e.prototype.eliminarItem=function(e){if(this.listadoAnticipos&&this.listadoAnticipos.length>1){var t=this.listadoAnticipos.findIndex(function(t){return t.prId===e.prId});this.listadoAnticipos.splice(t,1),this.gridApi&&this.gridApi.updateRowData({remove:[e]}),this.actualizarPinned()}},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this);this.opciones=[{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!t,command:function(o){return t?e.eliminarItem(e.objetoSeleccionado):null}}]},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.preguntarImprimir=function(e){var t=this,o=this.modalService.open(Bi.a,{backdrop:"static"});o.componentInstance.empresaSeleccionada=this.empresaSeleccionada;var a=[],i=new wi.a;i=this.conContable.conContablePK,a.push(i),o.componentInstance.parametrosImprimir={listadoPK:a},o.componentInstance.nombreRutaImprimir="todocompuWS/contabilidadWebController/generarReporteContableIndividual",o.componentInstance.nombreArchivoPDFImprimir="ContableAnticipo",o.componentInstance.parametrosImprimirCombo={listaRhAnticipo:this.listadoRhAnticipo,contable:this.conContable},o.componentInstance.nombrerutaImprimirCombo="todocompuWS/rrhhWebController/generarReporteComprobanteAnticipo",o.componentInstance.nombreArchivoPDFImprimirCombo="ReporteComprobanteAnticipo",o.componentInstance.textoImprimirCombo=c.a.LABEL_IMPRIMIR_COMPROBANTE_ANTICIPO,o.componentInstance.mensaje=e,o.componentInstance.mostrarCombo=!0,o.result.then(function(e){},function(){t.cargando=!1,t.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.anticipoService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.pinnedBottomRowData=this.anticipoService.generarPinnedBottonRowData(),this.rowSelection="single",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas(),this.esContable&&this.actualizarPinned(),this.extraerValoresIniciales()},e.prototype.validarAntesDeEnviar=function(){for(var e=0,t=new Array,o=0;o<this.listadoAnticipos.length;o++)if(this.matRound2(this.listadoAnticipos[o].prValor)>0){if(!this.validarRegistro(this.listadoAnticipos[o]))return this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TAG_AVISO),!1;var a=this.construirAnticipo(this.listadoAnticipos[o]);t.push(a),e++}return e>0?(this.listadoRhAnticipo=t,!0):(this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TAG_AVISO),!1)},e.prototype.construirAnticipo=function(e){var t=new Xi;t.antDocumento=e.documento,t.antObservaciones=e.observacion,t.antValor=e.prValor,t.conContable=null,this.esContable&&(t.antSecuencial=e.id,t.antAuxiliar=!0);var o=new Di.a;if(o.rhEmpleadoPK.empEmpresa=c.a.KEY_EMPRESA_SELECT,o.rhEmpleadoPK.empId=e.prId,o.empNombres=e.prNombres,t.rhEmpleado=o,e.prSector){var a=new yi.a;a.prdSectorPK.secCodigo=e.prSector,a.prdSectorPK.secEmpresa=c.a.KEY_EMPRESA_SELECT,t.prdSector=a}else t.prdSector=null;var i=new Fa.a;return i.conCuentasPK.ctaCodigo=e.fpSeleccionada.ctaCodigo,i.conCuentasPK.ctaEmpresa=c.a.KEY_EMPRESA_SELECT,t.conCuentas=i,t},e.prototype.validarRegistro=function(e){if(e.fpSeleccionada&&e.fpSeleccionada.fpDetalle&&!e.documentoRepetido&&!e.errorEnDocumento){var t=this.matRound2(e.prIngresos),o=this.matRound2(e.prSaldoAnticipos),a=this.matRound2(t-o);return!(this.matRound2(e.prValor)>a)}return!1},e.prototype.actualizarPinned=function(){for(var e=0,t=0,o=0;o<this.listadoAnticipos.length;o++)this.matRound2(this.listadoAnticipos[o].prValor)>0&&this.validarRegistro(this.listadoAnticipos[o])&&(e=this.matRound2(e+this.matRound2(this.listadoAnticipos[o].prValor)),t++);this.pinnedBottomRowData[0].prValor=e,this.pinnedBottomRowData[0].documento=t,this.gridApi.setPinnedBottomRowData(this.pinnedBottomRowData)},e.prototype.matRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.terminadoEditar=function(e){var t=e.column.getId();"documento"!==t&&"prValor"!==t&&"fpSeleccionada"!==t||this.verificarDocumentoBanco(e.data)},e.prototype.verificarDocumentoBanco=function(e){if(e.errorEnDocumento=!0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),e.prValor>0&&e.documento&&e.fpSeleccionada&&e.fpSeleccionada.validar){var t={empresa:c.a.KEY_EMPRESA_SELECT,documento:e.documento,cuenta:e.fpSeleccionada.ctaCodigo,data:e};this.contableService.verificarDocumentoBanco(t,this,c.a.KEY_EMPRESA_SELECT)}else e.errorEnDocumento=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.validarDocumentosRepetido()},e.prototype.despuesDeVerificarDocumento=function(e,t){t.errorEnDocumento=!e,this.gridApi&&this.gridApi.updateRowData({update:[t]}),this.validarDocumentosRepetido()},e.prototype.validarDocumentosRepetido=function(){var e=this;this.listadoAnticipos.forEach(function(t){var o=t.documento&&t.prValor>0&&t.fpSeleccionada&&t.fpSeleccionada.validar,a=e.listadoAnticipos.filter(function(e){return o&&e.prValor>0&&e.fpSeleccionada&&e.fpSeleccionada.validar&&e.documento&&e!==t&&e.documento.trim()===t.documento.trim()});t.documentoRepetido=a.length>0}),this.actualizarPinned(),this.refreshGrid()},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_NUEVO:case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS)},$i([Object(i.ViewChild)("menuOpciones"),Qi("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),$i([Object(i.Input)(),Qi("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),$i([Object(i.Input)(),Qi("design:type",Object)],e.prototype,"parametrosFormulario",void 0),$i([Object(i.Output)(),Qi("design:type",Object)],e.prototype,"enviarAccion",void 0),$i([Object(i.Input)(),Qi("design:type",Array)],e.prototype,"formasDePago",void 0),$i([Object(i.Input)(),Qi("design:type",Boolean)],e.prototype,"esContable",void 0),$i([Object(i.Input)(),Qi("design:type",Array)],e.prototype,"listadoAnticipos",void 0),$i([Object(i.Input)(),Qi("design:type",Ua.a)],e.prototype,"conContable",void 0),$i([Object(i.Input)(),Qi("design:type",Ba.a)],e.prototype,"tipoSeleccionado",void 0),$i([Object(i.Input)(),Qi("design:type",Object)],e.prototype,"data",void 0),$i([Object(i.Input)(),Qi("design:type",String)],e.prototype,"titulo",void 0),$i([Object(i.ViewChild)("frmDatos"),Qi("design:type",I.NgForm)],e.prototype,"frmDatos",void 0),$i([Object(i.HostListener)("window:beforeunload",["$event"]),Qi("design:type",Function),Qi("design:paramtypes",[Event]),Qi("design:returntype",void 0)],e.prototype,"unloadHandler",null),$i([Object(i.HostListener)("window:resize",["$event"]),Qi("design:type",Function),Qi("design:paramtypes",[]),Qi("design:returntype",void 0)],e.prototype,"onResize",null),e=$i([Object(i.Component)({selector:"app-anticipos-formulario",template:o("QtFP")}),Qi("design:paramtypes",[qi.a,L.a,Hi.a,h.a,u.b,S.HotkeysService,T.b,Wa.a])],e)}(),tr=o("chRk"),or=o("ctD9"),ar=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ir=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},rr=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarBonos=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getListaRhBonos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarBonos(e.extraInfo):(t.despuesDeListarBonos([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarBonos=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarRhBono",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarBonos(e):(a.utilService.generarSwalHTML(c.a.SWAL_INCORRECTO,c.a.SWAL_ERROR,e.operacionMensaje,c.a.ICON_ERROR_SWAL,c.a.SWAL_ERROR),t.enviarAccion?t.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}):t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarRhBono=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/modificarRhBono",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarBonos(e):(a.utilService.generarSwalHTML(c.a.SWAL_INCORRECTO,c.a.SWAL_ERROR,e.operacionMensaje,c.a.ICON_ERROR_SWAL,c.a.SWAL_ERROR),t.enviarAccion?t.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}):t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=this,o=[];return o.push({headerName:c.a.TAG_N_IDENTIFICACION,field:"rhListaEmpleadoLoteTO.prId",width:125,minWidth:50,headerComponentFramework:pe.a,headerComponentParams:{class:"",tooltip:c.a.TAG_NUMERO_IDENTIFICACION,text:c.a.TAG_N_IDENTIFICACION}},{headerName:c.a.TAG_APELLIDOS_Y_NOMBRES,field:"rhListaEmpleadoLoteTO.prNombres",width:250,minWidth:250},{headerName:c.a.TAG_CONCEPTO,field:"concepto",width:180,minWidth:180,headerComponent:"toolTip",headerComponentParams:{class:"",text:c.a.TAG_CONCEPTO},cellClass:function(e){return e.node.rowPinned?"tr-negrita":""},cellEditorFramework:tr.a,valueFormatter:function(t){return t.data.concepto=e.conceptoSeleccionado&&!t.node.rowPinned?e.conceptoSeleccionado:t.data.concepto,t.data.concepto?t.node.rowPinned?c.a.TAG_TOTAL_PUNTOS:t.data.concepto.bcDetalle:""},cellEditorParams:function(t){return{value:t.data.concepto?t.data.concepto:null,name:"concepto",obligatorio:!0,ejecutarMetodoChange:!1,listValues:e.listadoConceptos,fieldsShow:["bcDetalle"]}},editable:e.puedeEditarTabla,cellClassRules:{"cell-with-errors":function(t){return!!e.puedeEditarTabla&&(!t.node.rowPinned&&!t.data.isConceptoValido)}}},{headerName:c.a.TAG_VALOR,field:"rhListaEmpleadoLoteTO.prValor",width:120,minWidth:80,valueFormatter:nr,cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},valueGetter:function(t){return t.node.rowPinned?e.total?e.total:0:t.data.rhListaEmpleadoLoteTO.prValor},cellEditorFramework:zo.a,cellEditorParams:{name:"rhListaEmpleadoLoteTO.prValor",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaResultado)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:e.puedeEditarTabla,cellClassRules:{"cell-with-errors":function(t){return!!e.puedeEditarTabla&&(!t.node.rowPinned&&!t.data.isValorValido)}}},{headerName:c.a.TAG_CENTRO_COSTO,field:"piscina",width:180,minWidth:180,headerComponent:"toolTip",headerComponentParams:{class:"",text:c.a.TAG_CENTRO_COSTO},cellEditorFramework:tr.a,cellClass:function(e){return e.node.rowPinned?"tr-negrita":""},valueFormatter:function(t){return t.data.piscina=e.piscinaSeleccionada&&!t.node.rowPinned&&e.inicializandoPiscinas?e.piscinaSeleccionada:t.data.piscina,t.data.piscina?t.node.rowPinned?c.a.TAG_N_BONOS:t.data.piscina.pisNombre:""},cellEditorParams:function(t){return{value:t.data.piscina?t.data.piscina:null,name:"piscina",obligatorio:!1,ejecutarMetodoChange:!1,listValues:e.piscinaSeleccionada?e.listadoPiscinas:t.data.listaPiscinas,fieldsShow:["pisNombre","pisNumero"]}},editable:e.puedeEditarTabla},{headerName:c.a.TAG_OBSERVACION,field:"observacion",width:300,minWidth:300,cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-uppercase"},suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaResultado)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:e.puedeEditarTabla,cellEditorFramework:Jo.a,cellEditorParams:{name:"observacion",maxlength:1e3,inputClass:"text-uppercase",placeholder:""}}),e.puedeEditarTabla?o.push({headerName:c.a.TAG_DEDUCIBLE,cellClass:"text-center",field:"deducible",width:140,minWidth:80,cellRendererFramework:or.a,cellRendererParams:function(e){return e.node.rowPinned?null:e.data.deducible}}):o.push({headerName:c.a.TAG_DEDUCIBLE,cellClass:"text-center",field:"deducible",width:140,minWidth:80,cellRendererFramework:y.a,cellRendererParams:function(e){return e.node.rowPinned?"":e.data.deducible},pinnedRowCellRendererFramework:Ko.a,pinnedRowCellRendererParams:{value:""}}),e.esContable&&e.puedeEditarTabla&&o.push(this.utilService.getColumnaEliminar()),o},e=ar([Object(i.Injectable)({providedIn:"root"}),ir("design:paramtypes",[p.a,u.b,h.a])],e)}();function nr(e){return new ri.DecimalPipe("en-US").transform(e.value,"1.2-2")}var sr=o("HnUa"),cr=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},lr=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},dr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},pr=function(){function e(e,t,o,a,r,n){this.toastr=e,this.atajoService=t,this.filasService=o,this.utilService=a,this.bonosService=r,this.archivoService=n,this.esContable=!1,this.conContable=new Ua.a,this.tipoSeleccionado=new Ba.a,this.data={},this.titulo=c.a.RRHH_BONOS_LISTADO,this.enviarAccion=new i.EventEmitter,this.fechaContableValido=!0,this.constantes=c.a,this.activarBonos=!1,this.filasTiempo=new D.a,this.estilos={},this.total=0,this.accion=c.a.ACCION_CREAR,this.inicializandoPiscinas=!0,this.listaResultadoBonos=[],this.listaResultadoEnviarBonos=[],this.listadoConceptos=[],this.listadoPiscinas=[],this.empresaSeleccionada=new l.a,this.objetoSeleccionado=new Ii,this.conceptoSeleccionado=new Si.a,this.piscinaSeleccionada=new wa.a,this.observacionAdicional="",this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.estadoContableAMayorizar=!1,this.puedeEditarTabla=!1,this.screamXS=window.innerWidth<=c.a.WINDOW_WIDTH_XS,this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"99999.99",minimumValue:"0"},this.estilos={width:"100%",height:"calc(100vh - 220px)"}}return e.prototype.ngOnChanges=function(e){(e.parametrosBusqueda||e.parametrosFormulario)&&this.inicializar()},e.prototype.ngOnInit=function(){this.parametrosBusqueda||this.parametrosFormulario||this.inicializar(),this.accion=this.esContable?this.data.accion:c.a.ACCION_CREAR,this.conContableCopia=this.esContable?cr({},this.conContable):new Ua.a,this.esContable&&(this.activarBonos=this.data.activar),this.esContable&&(this.estilos.height="calc(100vh - 360px)"),this.esContable&&(this.piscinaSeleccionada=null),this.esContable&&(this.conceptoSeleccionado=null),this.puedeEditarTabla=!this.esContable||this.data.accion===c.a.ACCION_MAYORIZAR,this.esContable&&this.iniciarAgGrid(),this.generarAtajosTeclado()},e.prototype.inicializar=function(){this.parametrosBusqueda&&this.parametrosFormulario&&(this.empresaSeleccionada=this.parametrosFormulario.empresaSeleccionada,this.listadoConceptos=this.parametrosFormulario.listadoConceptos,this.listadoPiscinas=this.parametrosFormulario.listadoPiscinas,this.conceptoSeleccionado=this.parametrosFormulario.conceptoSeleccionado,this.piscinaSeleccionada=this.parametrosFormulario.piscinaSeleccionada,this.fechaFin=this.parametrosFormulario.fechaFin,this.activarBonos=this.parametrosBusqueda.activarBonos,c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.buscarBonos())},e.prototype.inicializarFormulario=function(){var e=this;setTimeout(function(){e.valoresIniciales=e.accion===c.a.ACCION_CREAR?JSON.parse(JSON.stringify(e.observacionAdicional)):JSON.parse(JSON.stringify(e.conContable?e.conContable:null)),e.listaInicial=JSON.parse(JSON.stringify(e.listaResultadoBonos?e.listaResultadoBonos:null))},50)},e.prototype.accionesBotones=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.cambiarActivar();break;case c.a.ACCION_CANCELAR:this.cancelar();break;case c.a.ACCION_MAYORIZAR:this.fechaContableValido?(this.estadoContableAMayorizar=e.estado,this.mayorizar()):this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS);break;case c.a.ACCION_IMPRIMIR:this.enviarAccion.emit({accion:c.a.ACCION_IMPRIMIR});break;case c.a.ACCION_ANULAR:this.enviarAccion.emit({accion:c.a.ACCION_ANULAR});break;case c.a.ACCION_ELIMINAR:this.enviarAccion.emit({accion:c.a.ACCION_ELIMINAR});break;case c.a.ACCION_REVERSAR:this.enviarAccion.emit({accion:c.a.ACCION_REVERSAR})}},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarBonos");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardarBonos");return e.gridApi&&e.gridApi.stopEditing(),t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelar");return e&&e.click(),!1}))},e.prototype.cambiarActivar=function(){this.activarBonos=!this.activarBonos,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:this.activarBonos})},e.prototype.buscarBonos=function(){this.listadoConceptos.length>0?(this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.filasTiempo.iniciarContador(),this.bonosService.listarBonos(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)):(this.toastr.warning(c.a.MSJ_POR_LO_MENOS_1_CONCEPTO,c.a.TAG_AVISO),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}))},e.prototype.despuesDeListarBonos=function(e){this.listaResultadoBonos=e,this.filasTiempo.finalizarContador(),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),this.iniciarAgGrid(),0===this.listaResultadoBonos.length&&this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})},e.prototype.guardarBonos=function(){if(this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0))if(this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.verificarSiSePuedeEnviar()){var e={observaciones:this.observacionAdicional,empresa:this.empresaSeleccionada.empCodigo,fechaHasta:this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.fechaFin).getTime(),listaRhListaBonosLoteTO:this.listaResultadoEnviarBonos};this.bonosService.insertarBonos(e,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1})},e.prototype.mayorizar=function(){if(this.utilService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0)){this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0});var e=cr({},this.conContableCopia);if(e.conPendiente=this.estadoContableAMayorizar,this.verificarSiSePuedeEnviar()){var t={conContable:e,listaRhListaBonosLoteTO:this.listaResultadoEnviarBonos};this.bonosService.modificarRhBono(t,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1})}},e.prototype.despuesDeInsertarBonos=function(e){this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),e&&this.preguntarImprimir(e)},e.prototype.despuesDeModificarBonos=function(e){this.conContable.conFecha=this.conContableCopia.conFecha,this.conContable.conObservaciones=this.conContableCopia.conObservaciones,this.conContable.conPendiente=this.estadoContableAMayorizar,this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),this.data&&(this.estadoContableAMayorizar?(this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK),this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})):this.preguntarImprimir(e))},e.prototype.preguntarImprimir=function(e){var t=this,o={title:c.a.TOAST_CORRECTO,texto:e.operacionMensaje+"<br>"+c.a.MSJ_PREGUNTA_IMPRIMIR,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_IMPRIMIR+"'></i>  "+c.a.LABEL_IMPRIMIR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o&&t.imprimirContable(e.extraInfo)}),this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})},e.prototype.ejecutarAccion=function(e,t){this.eliminarItem(e)},e.prototype.eliminarItem=function(e){if(this.listaResultadoBonos&&this.listaResultadoBonos.length>1){var t=this.listaResultadoBonos.findIndex(function(t){return t.rhListaEmpleadoLoteTO.prId===e.rhListaEmpleadoLoteTO.prId});this.listaResultadoBonos.splice(t,1),this.gridApi&&this.gridApi.updateRowData({remove:[e]}),this.calcularTotal()}},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this);this.opciones=[{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!t,command:function(o){return t?e.eliminarItem(e.objetoSeleccionado):null}}]},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.imprimirContable=function(e){var t=this;if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0});var o=[],a=new wi.a;a=e.conContable.conContablePK,o.push(a);var i={listadoPK:o};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableIndividual",i,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("Contable.pdf",e):t.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),t.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1})}).catch(function(e){return t.utilService.handleError(e,t)})}},e.prototype.verificarSiSePuedeEnviar=function(){var e=this,t=!1,o=0;if(this.listaResultadoEnviarBonos=[],this.gridApi.forEachNode(function(t){var a=t.data;a.isConceptoValido&&a.isValorValido||o++,a.isConceptoValido&&a.isValorValido&&a.rhListaEmpleadoLoteTO.prValor>0&&(a.piscina=""===a.piscina?null:a.piscina,e.listaResultadoEnviarBonos.push(a))}),0===o&&this.listaResultadoEnviarBonos.length>0&&(t=!0),0===this.listaResultadoEnviarBonos.length){var a=this.gridApi.getRowNode("0").data;a.isConceptoValido=!1,a.isValorValido=!1,this.refreshGrid()}return t},e.prototype.cancelar=function(){var e=this;switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CREAR:if(this.sePuedeCancelar())this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})})}break;case c.a.ACCION_CONSULTAR:default:this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})}},e.prototype.sePuedeCancelar=function(){var e=!1;e=this.accion===c.a.ACCION_CREAR?this.valoresIniciales===this.observacionAdicional:this.utilService.compararObjetos(this.valoresIniciales,this.conContableCopia);var t=this.utilService.compararObjetos(this.listaResultadoBonos,this.listaInicial);return e&&t},e.prototype.calcularTotal=function(){var e=this;this.total=0;var t=0;this.gridApi.forEachNode(function(o){var a=o.data;void 0!==a.rhListaEmpleadoLoteTO.prValor&&null!==a.rhListaEmpleadoLoteTO.prValor||(a.rhListaEmpleadoLoteTO.prValor=0),a.rhListaEmpleadoLoteTO.prValor>0?a.concepto?(e.total+=a.rhListaEmpleadoLoteTO.prValor,t++,a.isConceptoValido=!0,a.isValorValido=!0):(a.isConceptoValido=!1,a.isValorValido=!0):(a.isConceptoValido=!0,a.isValorValido=!0)}),this.pinnedBottomRowData[0].observacion=t,this.refreshGrid()},e.prototype.alCambiarValorDeCelda=function(e){"rhListaEmpleadoLoteTO.prValor"!==e.colDef.field&&"concepto"!==e.colDef.field||this.calcularTotal()},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.bonosService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a,inputEstado:y.a,numericCell:zo.a,checkHeader:sr.a},this.pinnedBottomRowData=[{prId:"",prNombres:"",concepto:c.a.TAG_TOTAL_PUNTOS,prValor:"",piscina:c.a.TAG_N_BONOS,observacion:0,deducible:null}],this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimensionarColumnas(),this.seleccionarFila(0),this.inicializandoPiscinas=!1,this.gridApi&&this.calcularTotal(),this.inicializarFormulario()},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_NUEVO:case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.screamXS=window.innerWidth<=c.a.WINDOW_WIDTH_XS},lr([Object(i.ViewChild)("menuOpciones"),dr("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),lr([Object(i.Input)(),dr("design:type",Object)],e.prototype,"parametrosFormulario",void 0),lr([Object(i.Input)(),dr("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),lr([Object(i.Input)(),dr("design:type",Boolean)],e.prototype,"esContable",void 0),lr([Object(i.Input)(),dr("design:type",Ua.a)],e.prototype,"conContable",void 0),lr([Object(i.Input)(),dr("design:type",Ba.a)],e.prototype,"tipoSeleccionado",void 0),lr([Object(i.Input)(),dr("design:type",Object)],e.prototype,"data",void 0),lr([Object(i.Input)(),dr("design:type",String)],e.prototype,"titulo",void 0),lr([Object(i.Output)(),dr("design:type",Object)],e.prototype,"enviarAccion",void 0),lr([Object(i.Input)(),dr("design:type",Array)],e.prototype,"listaResultadoBonos",void 0),lr([Object(i.Input)(),dr("design:type",Array)],e.prototype,"listadoConceptos",void 0),lr([Object(i.Input)(),dr("design:type",Array)],e.prototype,"listadoPiscinas",void 0),lr([Object(i.Input)(),dr("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),lr([Object(i.HostListener)("window:beforeunload",["$event"]),dr("design:type",Function),dr("design:paramtypes",[Event]),dr("design:returntype",void 0)],e.prototype,"unloadHandler",null),lr([Object(i.HostListener)("window:resize",["$event"]),dr("design:type",Function),dr("design:paramtypes",[]),dr("design:returntype",void 0)],e.prototype,"onResize",null),e=lr([Object(i.Component)({selector:"app-bonos-formulario",template:o("p8K/"),styles:[o("E/BC")]}),dr("design:paramtypes",[u.b,S.HotkeysService,L.a,h.a,rr,le.a])],e)}(),ur=o("aZGd"),hr=o("OTvs"),mr=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Cr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},vr=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarRhxivSueldoxivSueldoCalcular=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getListaRhXivSueldoXivSueldoCalcular",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarRhxivSueldoxivSueldoCalcular(e.extraInfo):(t.despuesDeListarRhxivSueldoxivSueldoCalcular([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarRhXivSueldoXivSueldoCalcular=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarRhXivSueldoXivSueldoCalcular",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarRhXivSueldoXivSueldoCalcular(e):(a.utilService.generarSwalHTML(c.a.SWAL_INCORRECTO,c.a.SWAL_ERROR,e.operacionMensaje,c.a.ICON_ERROR_SWAL,c.a.SWAL_ERROR),t.enviarAccion?t.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}):t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarRhXivSueldo=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/modificarRhXivSueldo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarRhXivSueldoXivSueldoCalcular(e):(a.utilService.generarSwalHTML(c.a.SWAL_INCORRECTO,c.a.SWAL_ERROR,e.operacionMensaje,c.a.ICON_ERROR_SWAL,c.a.SWAL_ERROR),t.enviarAccion?t.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}):t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.autonumeric=function(){return{decimalPlaces:0,decimalPlacesRawValue:0,decimalPlacesShownOnBlur:0,decimalPlacesShownOnFocus:0,maximumValue:"360",minimumValue:"0"}},e.prototype.generarColumnas=function(e){var t=this,o=[],a=e.puedeEditarTabla;return o.push({headerName:c.a.TAG_NUMERO_IDENTIFICACION,field:"rhXivSueldo.rhEmpleado.rhEmpleadoPK.empId",width:180,minWidth:180},{headerName:c.a.TAG_APELLIDOS_Y_NOMBRES,field:"rhXivSueldo.rhEmpleado.empNombres",width:250,minWidth:250,valueGetter:function(e){return e.node.rowPinned?"":e.data.rhXivSueldo.rhEmpleado.empApellidos+" "+e.data.rhXivSueldo.rhEmpleado.empNombres}},{headerName:c.a.TAG_DIAS_CALCULADOS,field:"rhXivSueldo.xivDiasLaboradosEmpleado",width:180,minWidth:180,valueFormatter:fr,cellClass:"text-right",valueGetter:function(e){return e.node.rowPinned?"":e.data.rhXivSueldo.xivDiasLaboradosEmpleado}},{headerComponentFramework:ft.a,headerClass:"pr-0",headerComponentParams:{name:c.a.TAG_DIAS_REALES,value:e.apruebaTodos,tooltipText:c.a.TAG_TODOS,noVisible:!a},headerName:c.a.TAG_DIAS_REALES,field:"diasLaborados",width:180,minWidth:180,valueFormatter:fr,cellClass:function(e){return e.node.rowPinned?"tr-negrita":"text-right"},cellEditorFramework:zo.a,cellEditorParams:{name:"diasLaborados",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaResultadoXivSueldo)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:a,cellClassRules:{"cell-with-errors":function(t){return!!e.puedeEditarTabla&&(!t.node.rowPinned&&!t.data.isValorValido)}},pinnedRowCellRendererFramework:Ko.a,pinnedRowCellRendererParams:{value:c.a.TAG_TOTAL_PUNTOS}},{headerName:c.a.TAG_VALOR,field:"rhXivSueldo.xivValor",width:180,minWidth:180,valueFormatter:Ar,cellClass:function(e){return e.node.rowPinned?"tr-negrita text-right":"text-right"},valueGetter:function(t){return t.node.rowPinned?e.total:t.data.rhXivSueldo.xivValor}},{headerName:c.a.TAG_FORMA_PAGO,field:"formaPago",width:180,minWidth:180,headerComponent:"toolTip",headerComponentParams:{class:"",text:c.a.TAG_FORMA_PAGO},cellEditorFramework:tr.a,cellClass:function(e){return e.node.rowPinned?"tr-negrita":""},valueFormatter:function(t){return t.data.formaPago=t.data.formaPago?t.data.formaPago:e.formaPagoSeleccionado,t.data.formaPago?t.node.rowPinned?c.a.TAG_N_XIV_SUELDO:t.data.formaPago.fpDetalle:e.formaPagoSeleccionado&&!t.node.rowPinned?e.formaPagoSeleccionado.fpDetalle:""},cellEditorParams:function(t){return{value:t.data.formaPago,name:"formaPago",obligatorio:!0,ejecutarMetodoChange:!1,listValues:e.listaFormasPagoBeneficio,fieldsShow:["fpDetalle","ctaCodigo"]}},editable:a,cellClassRules:{"cell-with-errors":function(t){return!!e.puedeEditarTabla&&(!t.node.rowPinned&&!t.data.isFormaPagoValido)}}},{headerName:c.a.TAG_NUMERO_DOCUMENTO,field:"rhXivSueldo.xivDocumento",width:200,minWidth:100,suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaResultadoXivSueldo)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:Jo.a,cellEditorParams:{name:"rhXivSueldo.xivDocumento",maxlength:1e3,inputClass:"text-uppercase",placeholder:""},cellClassRules:{"cell-with-errors":function(t){return!(t.node.rowPinned||!e.puedeEditarTabla)&&(t.data.errorEnDocumento||t.data.documentoRepetido)}},editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"mousetrap"},valueGetter:function(t){return t.node.rowPinned?e.cantidadXivSueldo:t.data.rhXivSueldo.xivDocumento}},{headerName:c.a.TAG_OBSERVACION,field:"rhXivSueldo.xivObservaciones",width:350,minWidth:350,cellClass:"text-uppercase",suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaResultadoXivSueldo)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:a,cellEditorFramework:Jo.a,cellEditorParams:{name:"rhXivSueldo.xivObservaciones",maxlength:1e3,inputClass:"text-uppercase",placeholder:""}}),e.esContable&&e.puedeEditarTabla&&o.push(this.utilService.getColumnaEliminar()),o},e=mr([Object(i.Injectable)({providedIn:"root"}),Cr("design:paramtypes",[p.a,u.b,h.a])],e)}();function Ar(e){return new ri.DecimalPipe("en-US").transform(e.value,"1.2-2")}function fr(e){return new ri.DecimalPipe("en-US").transform(e.value,"1.0-0")}var gr=o("eRWn"),br=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Or=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Sr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ir=function(){function e(e,t,o,a,r,n,s,d,p){this.atajoService=e,this.filasService=t,this.utilService=o,this.xivSueldoService=a,this.toastr=r,this.formaPagoBeneficiosService=n,this.archivoService=s,this.modalService=d,this.contableService=p,this.esContable=!1,this.conContable=new Ua.a,this.tipoSeleccionado=new Ba.a,this.data={},this.titulo=c.a.RRHH_XIV_SUELDO_LISTADO,this.enviarAccion=new i.EventEmitter,this.fechaContableValido=!0,this.listaResultadoXivSueldo=[],this.listaResultadoXivSueldoEnviar=[],this.listaFormasPagoBeneficio=[],this.empresaSeleccionada=new l.a,this.objetoSeleccionado=new Ei.a,this.formaPagoSeleccionado=new hr.a,this.periodoSeleccionado=new ur.a,this.apruebaTodos=!0,this.observacionAdicional="",this.accion=c.a.ACCION_CREAR,this.constantes=c.a,this.activarXivSueldo=!1,this.filasTiempo=new D.a,this.total=0,this.cantidadXivSueldo=0,this.xivSalarioMinimoVital=0,this.estilos={},this.estadoContableAMayorizar=!1,this.puedeEditarTabla=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.screamXS=window.innerWidth<=c.a.WINDOW_WIDTH_XS,this.configAutonumeric=this.xivSueldoService.autonumeric(),this.estilos={width:"100%",height:"calc(100vh - 220px)"}}return e.prototype.ngOnChanges=function(e){(e.parametrosBusqueda||e.parametrosFormulario)&&this.inicializar()},e.prototype.ngOnInit=function(){this.parametrosBusqueda||this.parametrosFormulario||this.inicializar(),this.generarAtajosTeclado()},e.prototype.inicializar=function(){this.parametrosBusqueda&&this.parametrosFormulario&&(this.empresaSeleccionada=this.parametrosFormulario.empresaSeleccionada,this.periodoSeleccionado=this.parametrosFormulario.periodoSeleccionado,this.listaFormasPagoBeneficio=this.parametrosFormulario.listaFormasPagoBeneficio,this.formaPagoSeleccionado=this.parametrosFormulario.formaPagoSeleccionado,c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.activarXivSueldo=this.parametrosBusqueda.activarXivSueldo,this.xivSalarioMinimoVital=this.utilService.convertirDecimaleFloat(this.parametrosFormulario.periodoSeleccionado.xivSalarioMinimoVital),this.buscarXivSueldo()),this.conContableCopia=this.esContable?br({},this.conContable):new Ua.a,this.esContable&&(this.activarXivSueldo=this.data.activar),this.esContable&&(this.estilos.height="calc(100vh - 360px)"),this.puedeEditarTabla=!this.esContable||this.data.accion===c.a.ACCION_MAYORIZAR,this.accion=this.esContable?this.data.accion:c.a.ACCION_CREAR,this.esContable&&this.iniciarAgGrid()},e.prototype.accionesBotones=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.cambiarActivar();break;case c.a.ACCION_CANCELAR:this.cancelar();break;case c.a.ACCION_MAYORIZAR:this.fechaContableValido?(this.estadoContableAMayorizar=e.estado,this.modificarXivSueldo()):this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS);break;case c.a.ACCION_IMPRIMIR:this.enviarAccion.emit({accion:c.a.ACCION_IMPRIMIR});break;case c.a.ACCION_ANULAR:this.enviarAccion.emit({accion:c.a.ACCION_ANULAR});break;case c.a.ACCION_ELIMINAR:this.enviarAccion.emit({accion:c.a.ACCION_ELIMINAR});break;case c.a.ACCION_REVERSAR:this.enviarAccion.emit({accion:c.a.ACCION_REVERSAR})}},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarXivSueldo");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardarXivSueldo");return e.gridApi&&e.gridApi.stopEditing(),t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarXivSueldo");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarXivSueldo");return e&&e.click(),!1}))},e.prototype.cambiarActivar=function(){this.activarXivSueldo=!this.activarXivSueldo,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:this.activarXivSueldo})},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=e.accion===c.a.ACCION_CREAR?JSON.parse(JSON.stringify(e.observacionAdicional)):JSON.parse(JSON.stringify(e.conContable?e.conContable:null)),e.listaInicial=JSON.parse(JSON.stringify(e.listaResultadoXivSueldo?e.listaResultadoXivSueldo:null))},50)},e.prototype.buscarXivSueldo=function(){this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.filasTiempo.iniciarContador(),this.xivSueldoService.listarRhxivSueldoxivSueldoCalcular(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarRhxivSueldoxivSueldoCalcular=function(e){this.total=0,this.cantidadXivSueldo=0,this.listaResultadoXivSueldo=e,this.filasTiempo.finalizarContador(),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),this.iniciarAgGrid(),0===this.listaResultadoXivSueldo.length&&this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})},e.prototype.guardarXivSueldo=function(){this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&(this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.verificarSiSePuedeEnviar()?this.insertar(!0):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1})))},e.prototype.insertar=function(e){var t={observaciones:this.observacionAdicional,empresa:this.empresaSeleccionada.empCodigo,aceptado:e,fechaMaximo:this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.periodoSeleccionado.xivFechaMaximaPago).getTime(),listaRhXivSueldoXivSueldoCalcular:this.listaResultadoXivSueldoEnviar,RhXivSueldoPeriodoTO:this.periodoSeleccionado};this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.xivSueldoService.insertarRhXivSueldoXivSueldoCalcular(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeInsertarRhXivSueldoXivSueldoCalcular=function(e){this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),e&&(this.conContable=e.extraInfo.conContable,this.conContable.conPendiente=!1,this.preguntarImprimir(e.operacionMensaje),this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0}))},e.prototype.modificarXivSueldo=function(){this.utilService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0)&&(this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.verificarSiSePuedeEnviar()?this.modificar(!0):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1})))},e.prototype.modificar=function(e){var t=br({},this.conContableCopia);t.conPendiente=this.estadoContableAMayorizar;var o={empresa:this.empresaSeleccionada.empCodigo,aceptado:e,listaRhXivSueldoXivSueldoCalcular:this.listaResultadoXivSueldoEnviar,conContable:t};this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.xivSueldoService.modificarRhXivSueldo(o,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeModificarRhXivSueldoXivSueldoCalcular=function(e){this.conContable.conFecha=this.conContableCopia.conFecha,this.conContable.conObservaciones=this.conContableCopia.conObservaciones,this.conContable.conPendiente=this.estadoContableAMayorizar,this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),this.data&&(this.estadoContableAMayorizar?(this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK),this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})):(this.preguntarImprimir(e.operacionMensaje),this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})))},e.prototype.preguntarImprimir=function(e){var t=this,o=this.modalService.open(Bi.a,{backdrop:"static"});o.componentInstance.empresaSeleccionada=this.empresaSeleccionada;var a=[],i=new wi.a;i=this.conContable.conContablePK,a.push(i),o.componentInstance.parametrosImprimir={listadoPK:a},o.componentInstance.nombreRutaImprimir="todocompuWS/contabilidadWebController/generarReporteContableIndividual",o.componentInstance.nombreArchivoPDFImprimir="ContableXivSueldo",o.componentInstance.parametrosImprimirCombo={listaRhXivSueldoXivSueldoCalcular:this.listaResultadoXivSueldoEnviar,conContable:this.conContable},o.componentInstance.nombrerutaImprimirCombo="todocompuWS/rrhhWebController/generarReporteRhXivSueldoXivSueldoCalcular",o.componentInstance.nombreArchivoPDFImprimirCombo="ReporteComprobanteXivSueldo",o.componentInstance.textoImprimirCombo=c.a.LABEL_IMPRIMIR_COMPROBANTE,o.componentInstance.mensaje=e,o.componentInstance.mostrarCombo=!0,o.result.then(function(){},function(){t.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})})},e.prototype.ejecutarAccion=function(e,t){this.eliminarItem(e)},e.prototype.eliminarItem=function(e){if(this.listaResultadoXivSueldo&&this.listaResultadoXivSueldo.length>1){var t=this.listaResultadoXivSueldo.findIndex(function(t){return t.rhXivSueldo.rhEmpleado.rhEmpleadoPK.empId===e.rhXivSueldo.rhEmpleado.rhEmpleadoPK.empId});this.listaResultadoXivSueldo.splice(t,1),this.gridApi&&this.gridApi.updateRowData({remove:[e]}),this.calcularTotal()}},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this);this.opciones=[{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!t,command:function(o){return t?e.eliminarItem(e.objetoSeleccionado):null}}]},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.exportarXivSueldo=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0});var t={listaRhXivSueldoXivSueldoCalcular:this.listaResultadoXivSueldo};this.archivoService.postExcel("todocompuWS/rrhhWebController/exportarReporteRhXivSueldoXivSueldoCalcular",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoXivSueldo_"):e.toastr.warning(c.a.MSJ_ERROR_EXPORTAR,c.a.TAG_AVISO),e.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1})}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.verificarSiSePuedeEnviar=function(){var e=this,t=!1,o=0;if(this.listaResultadoXivSueldoEnviar=[],this.gridApi.forEachNode(function(t){var a=t.data;if(a.isFormaPagoValido&&a.isValorValido&&!a.documentoRepetido&&!a.errorEnDocumento||o++,a.isFormaPagoValido&&a.isValorValido&&a.rhXivSueldo.xivValor>0){a.rhXivSueldo.conContable=null;var i=new Fa.a;i.conCuentasPK.ctaEmpresa=e.empresaSeleccionada.empCodigo,i.conCuentasPK.ctaCodigo=a.formaPago.ctaCodigo,a.rhXivSueldo.conCuentas=i,e.listaResultadoXivSueldoEnviar.push(a)}}),0===o&&this.listaResultadoXivSueldoEnviar.length>0&&(t=!0),0===this.listaResultadoXivSueldoEnviar.length){var a=this.gridApi.getRowNode("0").data;a.formaPago||(a.isFormaPagoValido=!1),a.isValorValido=!1,this.refreshGrid()}return t},e.prototype.cancelar=function(){var e=this;switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CREAR:if(this.sePuedeCancelar())this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})})}break;case c.a.ACCION_CONSULTAR:default:this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})}},e.prototype.sePuedeCancelar=function(){var e=!1;e=this.accion===c.a.ACCION_CREAR?this.valoresIniciales===this.observacionAdicional:this.utilService.compararObjetos(this.valoresIniciales,this.conContableCopia);var t=this.utilService.compararObjetos(this.listaResultadoXivSueldo,this.listaInicial);return e&&t},e.prototype.alCambiarValorDeCelda=function(e){"diasLaborados"!==e.colDef.field&&"formaPago"!==e.colDef.field&&"rhXivSueldo.xivDocumento"!==e.colDef.field||!e.data.rhXivSueldo||("diasLaborados"===e.colDef.field&&(e.data.diasLaborados||(e.data.diasLaborados=0),e.data.rhXivSueldo.xivValor=e.data.diasLaborados*this.xivSalarioMinimoVital/360,e.data.rhXivSueldo.xivValor=Math.round(100*e.data.rhXivSueldo.xivValor)/100),this.verificarDocumentoBanco(e.data))},e.prototype.verificarDocumentoBanco=function(e){if(e.errorEnDocumento=!0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),e.rhXivSueldo&&e.rhXivSueldo.xivValor>0&&e.rhXivSueldo.xivDocumento&&e.formaPago&&e.formaPago.validar){var t={empresa:c.a.KEY_EMPRESA_SELECT,documento:e.rhXivSueldo.xivDocumento,cuenta:e.formaPago.ctaCodigo,data:e};this.contableService.verificarDocumentoBanco(t,this,c.a.KEY_EMPRESA_SELECT)}else e.errorEnDocumento=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.validarDocumentosRepetido()},e.prototype.despuesDeVerificarDocumento=function(e,t){t.errorEnDocumento=!e,this.gridApi&&this.gridApi.updateRowData({update:[t]}),this.validarDocumentosRepetido()},e.prototype.validarDocumentosRepetido=function(){var e=this;this.total=0,this.cantidadXivSueldo=0,this.gridApi.forEachNode(function(t){var o=t.data,a=!!(o.rhXivSueldo.xivDocumento&&o.rhXivSueldo.xivValor>0&&o.formaPago&&o.formaPago.validar),i=e.listaResultadoXivSueldo.filter(function(e){return a&&e.rhXivSueldo.xivValor>0&&e.formaPago&&e.formaPago.validar&&e.rhXivSueldo.xivDocumento&&e!==o&&e.rhXivSueldo.xivDocumento.trim()===o.rhXivSueldo.xivDocumento.trim()});o.documentoRepetido=i.length>0,o.rhXivSueldo.xivValor>0?o.formaPago?(o.isFormaPagoValido=!0,o.isValorValido=!0,o.documentoRepetido||o.errorEnDocumento||(e.total+=o.rhXivSueldo.xivValor,e.cantidadXivSueldo++,e.refreshGrid())):(o.isFormaPagoValido=!1,o.isValorValido=!0):(o.isFormaPagoValido=!0,o.isValorValido=!0)}),this.refreshGrid()},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.xivSueldoService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a,numericCell:zo.a},this.pinnedBottomRowData=[{empId:"",empNombres:"",xivDiasLaboradosEmpleado:"",diasLaborados:"",xivValor:"",formaPago:c.a.TAG_N_XIV_SUELDO,xivDocumento:""}],this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimensionarColumnas(),this.seleccionarFila(0),this.gridApi&&this.calcularTotal(),this.extraerValoresIniciales()},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.cambiarEstadoCheckCabecera=function(e){var t=this;this.apruebaTodos=e,this.apruebaTodos?this.gridApi.forEachNode(function(e){e.data.diasLaborados=e.data.rhXivSueldo.xivDiasLaboradosEmpleado,e.data.diasLaborados>0?(e.data.rhXivSueldo.xivValor=e.data.diasLaborados*t.xivSalarioMinimoVital/360,e.data.rhXivSueldo.xivValor=Math.round(100*e.data.rhXivSueldo.xivValor)/100,e.data.isFormaPagoValido=!1,e.data.errorEnDocumento=!0,t.verificarDocumentoBanco(e.data)):(e.data.isValorValido=!0,e.data.isFormaPagoValido=!0,e.data.documentoRepetido=!1,e.data.errorEnDocumento=!1)}):(this.gridApi.forEachNode(function(e){e.data.diasLaborados=0,e.data.rhXivSueldo.xivValor=0,e.data.isValorValido=!0,e.data.isFormaPagoValido=!0,e.data.documentoRepetido=!1,e.data.errorEnDocumento=!1}),this.total=0,this.cantidadXivSueldo=0,this.refreshGrid())},e.prototype.calcularTotal=function(){var e=this;this.total=0,this.cantidadXivSueldo=0,this.gridApi.forEachNode(function(t){t.data.diasLaborados>0&&(e.cantidadXivSueldo++,e.total+=t.data.rhXivSueldo.xivValor)}),this.refreshGrid()},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_NUEVO:case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.screamXS=window.innerWidth<=c.a.WINDOW_WIDTH_XS},Or([Object(i.ViewChild)("menuOpciones"),Sr("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),Or([Object(i.Input)(),Sr("design:type",Object)],e.prototype,"parametrosFormulario",void 0),Or([Object(i.Input)(),Sr("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),Or([Object(i.Input)(),Sr("design:type",Boolean)],e.prototype,"esContable",void 0),Or([Object(i.Input)(),Sr("design:type",Ua.a)],e.prototype,"conContable",void 0),Or([Object(i.Input)(),Sr("design:type",Ba.a)],e.prototype,"tipoSeleccionado",void 0),Or([Object(i.Input)(),Sr("design:type",Object)],e.prototype,"data",void 0),Or([Object(i.Input)(),Sr("design:type",String)],e.prototype,"titulo",void 0),Or([Object(i.Output)(),Sr("design:type",Object)],e.prototype,"enviarAccion",void 0),Or([Object(i.Input)(),Sr("design:type",Array)],e.prototype,"listaResultadoXivSueldo",void 0),Or([Object(i.Input)(),Sr("design:type",Array)],e.prototype,"listaFormasPagoBeneficio",void 0),Or([Object(i.Input)(),Sr("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),Or([Object(i.Input)(),Sr("design:type",Number)],e.prototype,"xivSalarioMinimoVital",void 0),Or([Object(i.HostListener)("window:beforeunload",["$event"]),Sr("design:type",Function),Sr("design:paramtypes",[Event]),Sr("design:returntype",void 0)],e.prototype,"unloadHandler",null),Or([Object(i.HostListener)("window:resize",["$event"]),Sr("design:type",Function),Sr("design:paramtypes",[]),Sr("design:returntype",void 0)],e.prototype,"onResize",null),e=Or([Object(i.Component)({selector:"app-xiv-sueldo-formulario",template:o("xlRT"),styles:[o("Ils2")]}),Sr("design:paramtypes",[S.HotkeysService,L.a,h.a,vr,u.b,gr.a,le.a,T.b,Wa.a])],e)}(),Er=o("7uDO"),Rr=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Tr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_r=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarRhXiiiSueldoXiiiSueldoCalcular=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getListaRhXiiiSueldoXiiiSueldoCalcular",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarRhXiiiSueldoXiiiSueldoCalcular(e.extraInfo):(t.despuesDeListarRhXiiiSueldoXiiiSueldoCalcular([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.xiiiSueldoVerificarMayor=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/xiiiSueldoVerificarMayor",e,o).then(function(e){e&&e.extraInfo?t.despuesDeXiiiSueldoVerificarMayor(e.extraInfo):(t.despuesDeXiiiSueldoVerificarMayor(null),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarRhXiiiSueldoXiiiSueldoCalcula=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarRhXiiiSueldoXiiiSueldoCalcular",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarRhXiiiSueldoXiiiSueldoCalcular(e):(a.utilService.generarSwalHTML(c.a.SWAL_INCORRECTO,c.a.SWAL_ERROR,e.operacionMensaje,c.a.ICON_ERROR_SWAL,c.a.SWAL_ERROR),t.enviarAccion?t.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}):t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarRhXiiiSueldo=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/modificarRhXiiiSueldo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarRhXiiiSueldoXiiiSueldoCalcular(e):(a.utilService.generarSwalHTML(c.a.SWAL_INCORRECTO,c.a.SWAL_ERROR,e.operacionMensaje,c.a.ICON_ERROR_SWAL,c.a.SWAL_ERROR),t.enviarAccion?t.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}):t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=this,o=e.puedeEditarTabla,a=[{headerName:c.a.TAG_NUMERO_IDENTIFICACION,field:"rhXiiiSueldo.rhEmpleado.rhEmpleadoPK.empId",width:180,minWidth:150},{headerName:c.a.TAG_APELLIDOS_Y_NOMBRES,field:"rhXiiiSueldo.rhEmpleado.empNombres",width:250,minWidth:250,valueGetter:function(e){return e.node.rowPinned?"":e.data.rhXiiiSueldo.rhEmpleado.empApellidos+" "+e.data.rhXiiiSueldo.rhEmpleado.empNombres}},{headerName:c.a.TAG_INGRESOS_CALCULADOS,field:"ingresosCalculados",width:180,minWidth:180,valueFormatter:Pr,cellClass:"text-right",valueGetter:function(e){return e.node.rowPinned?"":e.data.ingresosCalculados}},{headerComponentFramework:ft.a,headerClass:"pr-0",headerComponentParams:{name:c.a.TAG_INGRESOS_REALES,value:e.apruebaTodos,tooltipText:c.a.TAG_TODOS,noVisible:!o},headerName:c.a.TAG_INGRESOS_REALES,field:"rhXiiiSueldo.xiiiBaseImponible",width:180,minWidth:180,valueFormatter:Pr,cellClass:function(e){return e.node.rowPinned?"tr-negrita":"text-right"},cellEditorFramework:zo.a,cellEditorParams:{name:"rhXiiiSueldo.xiiiBaseImponible",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaResultadoXiiiSueldo)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClassRules:{"cell-with-errors":function(e){return!e.node.rowPinned&&!e.data.isValorValido}},editable:o,pinnedRowCellRendererFramework:Ko.a,pinnedRowCellRendererParams:{value:c.a.TAG_TOTAL_PUNTOS}},{headerName:c.a.TAG_VALOR,field:"rhXiiiSueldo.xiiiValor",width:180,minWidth:180,valueFormatter:Pr,cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},valueGetter:function(t){return t.node.rowPinned?e.total:t.data.rhXiiiSueldo.xiiiValor}},{headerName:c.a.TAG_FORMA_PAGO,field:"formaPago",width:180,minWidth:180,headerComponent:"toolTip",headerComponentParams:{class:"",text:c.a.TAG_FORMA_PAGO},cellEditorFramework:tr.a,cellClass:function(e){return e.node.rowPinned?"tr-negrita":""},valueFormatter:function(t){return t.data.formaPago=t.data.formaPago?t.data.formaPago:e.formaPagoSeleccionado,t.data.formaPago?t.node.rowPinned?c.a.TAG_N_XIII_SUELDO:t.data.formaPago.fpDetalle:e.formaPagoSeleccionado&&!t.node.rowPinned?e.formaPagoSeleccionado.fpDetalle:""},cellEditorParams:function(t){return{value:t.data.formaPago,name:"formaPago",obligatorio:!0,ejecutarMetodoChange:!1,listValues:e.listaFormasPagoBeneficio,fieldsShow:["fpDetalle","ctaCodigo"]}},editable:o,cellClassRules:{"cell-with-errors":function(e){return!e.node.rowPinned&&!e.data.isFormaPagoValido}}},{headerName:c.a.TAG_NUMERO_DOCUMENTO,field:"rhXiiiSueldo.xiiiDocumento",width:200,minWidth:200,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaResultadoXiiiSueldo)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:Jo.a,cellEditorParams:{name:"rhXiiiSueldo.xiiiDocumento",maxlength:1e3,inputClass:"text-uppercase",placeholder:""},cellClassRules:{"cell-with-errors":function(e){return!e.node.rowPinned&&(e.data.errorEnDocumento||e.data.documentoRepetido)}},editable:function(e){return!e.node.rowPinned&&o},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"mousetrap"},valueGetter:function(t){return t.node.rowPinned?e.cantidadXiiiSueldo:t.data.rhXiiiSueldo.xiiiDocumento}},{headerName:c.a.TAG_OBSERVACION,field:"rhXiiiSueldo.xiiiObservaciones",width:350,minWidth:350,cellClass:"text-uppercase",suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaResultadoXiiiSueldo)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:o,cellEditorFramework:Jo.a,cellEditorParams:{name:"rhXiiiSueldo.xiiiObservaciones",maxlength:1e3,inputClass:"text-uppercase",placeholder:""}}];return e.esContable&&e.puedeEditarTabla&&a.push(this.utilService.getColumnaEliminar()),a},e=Rr([Object(i.Injectable)({providedIn:"root"}),Tr("design:paramtypes",[p.a,u.b,h.a,le.a])],e)}();function Pr(e){return new ri.DecimalPipe("en-US").transform(e.value,"1.2-2")}var Nr=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yr=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Dr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Lr=function(){function e(e,t,o,a,r,n,s,d,p){this.atajoService=e,this.filasService=t,this.utilService=o,this.xiiiSueldoService=a,this.toastr=r,this.formaPagoBeneficiosService=n,this.archivoService=s,this.modalService=d,this.contableService=p,this.esContable=!1,this.conContable=new Ua.a,this.tipoSeleccionado=new Ba.a,this.data={},this.titulo=c.a.RRHH_XIV_SUELDO_LISTADO,this.enviarAccion=new i.EventEmitter,this.fechaContableValido=!0,this.listaResultadoXiiiSueldo=[],this.listaResultadoXiiiSueldoEnviar=[],this.listaFormasPagoBeneficio=[],this.empresaSeleccionada=new l.a,this.objetoSeleccionado=new Ri.a,this.formaPagoSeleccionado=new hr.a,this.periodoSeleccionado=new Er.a,this.apruebaTodos=!0,this.observacionAdicional="",this.accion=c.a.ACCION_CREAR,this.constantes=c.a,this.activarXiiiSueldo=!1,this.filasTiempo=new D.a,this.total=0,this.cantidadXiiiSueldo=0,this.estilos={},this.estadoContableAMayorizar=!1,this.puedeEditarTabla=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.screamXS=!0,this.filtroGlobal="",this.screamXS=window.innerWidth<=c.a.WINDOW_WIDTH_XS,this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"99999.99",minimumValue:"0"},this.estilos={width:"100%",height:"calc(100vh - 220px)"}}return e.prototype.ngOnChanges=function(e){(e.parametrosBusqueda||e.parametrosFormulario)&&this.inicializar()},e.prototype.ngOnInit=function(){this.parametrosBusqueda||this.parametrosFormulario||this.inicializar(),this.generarAtajosTeclado()},e.prototype.inicializar=function(){this.parametrosBusqueda&&this.parametrosFormulario&&(this.empresaSeleccionada=this.parametrosFormulario.empresaSeleccionada,this.periodoSeleccionado=this.parametrosFormulario.periodoSeleccionado,this.listaFormasPagoBeneficio=this.parametrosFormulario.listaFormasPagoBeneficio,this.formaPagoSeleccionado=this.parametrosFormulario.formaPagoSeleccionado,this.activarXiiiSueldo=this.parametrosBusqueda.activarXiiiSueldo,c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.buscarXiiiSueldo()),this.conContableCopia=this.esContable?Nr({},this.conContable):new Ua.a,this.esContable&&(this.activarXiiiSueldo=this.data.activar),this.puedeEditarTabla=!this.esContable||this.data.accion===c.a.ACCION_MAYORIZAR,this.esContable&&(this.estilos.height="calc(100vh - 360px)"),this.esContable&&this.iniciarAgGrid(),this.accion=this.esContable?this.data.accion:c.a.ACCION_CREAR},e.prototype.accionesBotones=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.cambiarActivar();break;case c.a.ACCION_CANCELAR:this.cancelar();break;case c.a.ACCION_MAYORIZAR:this.fechaContableValido?(this.estadoContableAMayorizar=e.estado,this.modificarXiiiSueldo()):this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS);break;case c.a.ACCION_IMPRIMIR:this.enviarAccion.emit({accion:c.a.ACCION_IMPRIMIR});break;case c.a.ACCION_ANULAR:this.enviarAccion.emit({accion:c.a.ACCION_ANULAR});break;case c.a.ACCION_ELIMINAR:this.enviarAccion.emit({accion:c.a.ACCION_ELIMINAR});break;case c.a.ACCION_REVERSAR:this.enviarAccion.emit({accion:c.a.ACCION_REVERSAR})}},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarXiiiSueldo");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardarXiiiSueldo");return e.gridApi&&e.gridApi.stopEditing(),t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarXiiiSueldo");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarXiiiSueldo");return e&&e.click(),!1}))},e.prototype.cambiarActivar=function(){this.activarXiiiSueldo=!this.activarXiiiSueldo,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:this.activarXiiiSueldo})},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=e.accion===c.a.ACCION_CREAR?JSON.parse(JSON.stringify(e.observacionAdicional)):JSON.parse(JSON.stringify(e.conContable?e.conContable:null)),e.detalleInicial=JSON.parse(JSON.stringify(e.listaResultadoXiiiSueldo?e.listaResultadoXiiiSueldo:null))},50)},e.prototype.buscarXiiiSueldo=function(){this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.filasTiempo.iniciarContador(),this.xiiiSueldoService.listarRhXiiiSueldoXiiiSueldoCalcular(this.parametrosBusqueda,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarRhXiiiSueldoXiiiSueldoCalcular=function(e){this.total=0,this.cantidadXiiiSueldo=0,this.listaResultadoXiiiSueldo=e,this.filasTiempo.finalizarContador(),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),this.iniciarAgGrid(),0===this.listaResultadoXiiiSueldo.length&&this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})},e.prototype.guardarXiiiSueldo=function(){if(this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0))if(this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.verificarSiSePuedeEnviar()){var e={listaRhXiiiSueldoXiiiSueldoCalcular:this.listaResultadoXiiiSueldoEnviar};this.xiiiSueldoService.xiiiSueldoVerificarMayor(e,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1})},e.prototype.despuesDeXiiiSueldoVerificarMayor=function(e){var t=this;if(this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),e){var o={title:c.a.TOAST_ADVERTENCIA,texto:e,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e&&(t.accion===c.a.ACCION_CREAR?t.insertar(!0):t.modificar(!0))})}else this.accion===c.a.ACCION_CREAR?this.insertar(!1):this.modificar(!1)},e.prototype.insertar=function(e){var t={observaciones:this.observacionAdicional,empresa:this.empresaSeleccionada.empCodigo,aceptado:e,fechaMaximo:this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.periodoSeleccionado.xiiiFechaMaximaPago).getTime(),listaRhXiiiSueldoXiiiSueldoCalcular:this.listaResultadoXiiiSueldoEnviar,RhXiiiSueldoPeriodoTO:this.periodoSeleccionado};this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.xiiiSueldoService.insertarRhXiiiSueldoXiiiSueldoCalcula(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeInsertarRhXiiiSueldoXiiiSueldoCalcular=function(e){this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),e&&(this.conContable=e.extraInfo.conContable,this.conContable.conPendiente=!1,this.preguntarImprimir(e.operacionMensaje),this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0}))},e.prototype.modificarXiiiSueldo=function(){if(this.utilService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0))if(this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.verificarSiSePuedeEnviar()){var e={listaRhXiiiSueldoXiiiSueldoCalcular:this.listaResultadoXiiiSueldoEnviar};this.xiiiSueldoService.xiiiSueldoVerificarMayor(e,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1})},e.prototype.modificar=function(e){var t=Nr({},this.conContableCopia);t.conPendiente=this.estadoContableAMayorizar;var o={observaciones:this.observacionAdicional,empresa:this.empresaSeleccionada.empCodigo,aceptado:e,listaRhXiiiSueldoXiiiSueldoCalcular:this.listaResultadoXiiiSueldoEnviar,conContable:t};this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0}),this.xiiiSueldoService.modificarRhXiiiSueldo(o,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeModificarRhXiiiSueldoXiiiSueldoCalcular=function(e){this.conContable.conFecha=this.conContableCopia.conFecha,this.conContable.conObservaciones=this.conContableCopia.conObservaciones,this.conContable.conPendiente=this.estadoContableAMayorizar,this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1}),this.data&&(this.estadoContableAMayorizar?(this.utilService.generarSwalHTML(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje,c.a.ICON_OK_SWAL,c.a.SWAL_OK),this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})):(this.preguntarImprimir(e.operacionMensaje),this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})))},e.prototype.preguntarImprimir=function(e){var t=this,o=this.modalService.open(Bi.a,{backdrop:"static"});o.componentInstance.empresaSeleccionada=this.empresaSeleccionada;var a=[],i=new wi.a;i=this.conContable.conContablePK,a.push(i),o.componentInstance.parametrosImprimir={listadoPK:a},o.componentInstance.nombreRutaImprimir="todocompuWS/contabilidadWebController/generarReporteContableIndividual",o.componentInstance.nombreArchivoPDFImprimir="ContableXiiiSueldo",o.componentInstance.parametrosImprimirCombo={listaRhXiiiSueldoXiiiSueldoCalcular:this.listaResultadoXiiiSueldoEnviar,conContable:this.conContable},o.componentInstance.nombrerutaImprimirCombo="todocompuWS/rrhhWebController/generarReporteRhXiiiSueldoXiiiSueldoCalcular",o.componentInstance.nombreArchivoPDFImprimirCombo="ReporteComprobanteXiiiSueldo",o.componentInstance.textoImprimirCombo=c.a.LABEL_IMPRIMIR_COMPROBANTE,o.componentInstance.mensaje=e,o.componentInstance.mostrarCombo=!0,o.result.then(function(){t.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})},function(){t.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})})},e.prototype.ejecutarAccion=function(e,t){this.eliminarItem(e)},e.prototype.eliminarItem=function(e){if(this.listaResultadoXiiiSueldo&&this.listaResultadoXiiiSueldo.length>1){var t=this.listaResultadoXiiiSueldo.findIndex(function(t){return t.rhXiiiSueldo.rhEmpleado.rhEmpleadoPK.empId===e.rhXiiiSueldo.rhEmpleado.rhEmpleadoPK.empId});this.listaResultadoXiiiSueldo.splice(t,1),this.gridApi&&this.gridApi.updateRowData({remove:[e]}),this.calcularTotal()}},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this);this.opciones=[{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!t,command:function(o){return t?e.eliminarItem(e.objetoSeleccionado):null}}]},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.exportarXiiiSueldo=function(){var e=this;if(this.utilService.verificarPermiso(c.a.ACCION_EXPORTAR,this,!0)){this.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!0});var t={listaRhXiiiSueldoXiiiSueldoCalcular:this.listaResultadoXiiiSueldo};this.archivoService.postExcel("todocompuWS/rrhhWebController/exportarReporteRhXiiiSueldoXiiiSueldoCalcular",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoXiiiSueldo_"):e.toastr.warning(c.a.MSJ_ERROR_EXPORTAR,c.a.TAG_AVISO),e.enviarAccion.emit({accion:c.a.ACCION_CARGANDO,estado:!1})}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.verificarSiSePuedeEnviar=function(){var e=this,t=!1,o=0;if(this.listaResultadoXiiiSueldoEnviar=[],this.gridApi.forEachNode(function(t){var a=t.data;if(a.isFormaPagoValido&&a.isValorValido&&!a.documentoRepetido&&!a.errorEnDocumento||o++,a.isFormaPagoValido&&a.isValorValido&&a.rhXiiiSueldo.xiiiBaseImponible>0){a.rhXiiiSueldo.conContable=null;var i=new Fa.a;i.conCuentasPK.ctaEmpresa=e.empresaSeleccionada.empCodigo,i.conCuentasPK.ctaCodigo=a.formaPago.ctaCodigo,a.rhXiiiSueldo.conCuentas=i,e.listaResultadoXiiiSueldoEnviar.push(a)}}),0===o&&this.listaResultadoXiiiSueldoEnviar.length>0&&(t=!0),0===this.listaResultadoXiiiSueldoEnviar.length){var a=this.gridApi.getRowNode("0").data;a.formaPago||(a.isFormaPagoValido=!1),a.isValorValido=!1,this.refreshGrid()}return t},e.prototype.cancelar=function(){var e=this;switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CREAR:if(this.sePuedeCancelar())this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})})}break;case c.a.ACCION_CONSULTAR:default:this.enviarAccion.emit({accion:c.a.ACCION_LIMPIAR_RESULTADO,estado:!0})}},e.prototype.sePuedeCancelar=function(){var e=!1;e=this.accion===c.a.ACCION_CREAR?this.valoresIniciales===this.observacionAdicional:this.utilService.compararObjetos(this.valoresIniciales,this.conContableCopia);var t=this.utilService.compararObjetos(this.listaResultadoXiiiSueldo,this.detalleInicial);return e&&t},e.prototype.alCambiarValorDeCelda=function(e){"rhXiiiSueldo.xiiiBaseImponible"!==e.colDef.field&&"formaPago"!==e.colDef.field&&"rhXiiiSueldo.xiiiDocumento"!==e.colDef.field||!e.data.rhXiiiSueldo||("rhXiiiSueldo.xiiiBaseImponible"===e.colDef.field&&(e.data.rhXiiiSueldo.xiiiBaseImponible||(e.data.rhXiiiSueldo.xiiiBaseImponible=0),e.data.rhXiiiSueldo.xiiiValor=this.utilService.convertirDecimaleFloat(e.data.rhXiiiSueldo.xiiiBaseImponible)/12,e.data.rhXiiiSueldo.xiiiValor=Math.round(100*e.data.rhXiiiSueldo.xiiiValor)/100),this.verificarDocumentoBanco(e.data))},e.prototype.verificarDocumentoBanco=function(e){if(e.errorEnDocumento=!0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),e.rhXiiiSueldo.xiiiValor>0&&e.rhXiiiSueldo.xiiiDocumento&&e.formaPago&&e.formaPago.validar){var t={empresa:c.a.KEY_EMPRESA_SELECT,documento:e.rhXiiiSueldo.xiiiDocumento,cuenta:e.formaPago.ctaCodigo,data:e};this.contableService.verificarDocumentoBanco(t,this,c.a.KEY_EMPRESA_SELECT)}else e.errorEnDocumento=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.validarDocumentosRepetido()},e.prototype.despuesDeVerificarDocumento=function(e,t){t.errorEnDocumento=!e,this.gridApi&&this.gridApi.updateRowData({update:[t]}),this.validarDocumentosRepetido()},e.prototype.validarDocumentosRepetido=function(){var e=this;this.total=0,this.cantidadXiiiSueldo=0,this.listaResultadoXiiiSueldo.forEach(function(t){var o=!!(t.rhXiiiSueldo.xiiiDocumento&&t.rhXiiiSueldo.xiiiValor>0&&t.formaPago&&t.formaPago.validar),a=e.listaResultadoXiiiSueldo.filter(function(e){return o&&e.rhXiiiSueldo.xiiiValor>0&&e.formaPago&&e.formaPago.validar&&e.rhXiiiSueldo.xiiiDocumento&&e!==t&&e.rhXiiiSueldo.xiiiDocumento.trim()===t.rhXiiiSueldo.xiiiDocumento.trim()});t.documentoRepetido=a.length>0,t.rhXiiiSueldo.xiiiBaseImponible>0?t.formaPago?(t.isFormaPagoValido=!0,t.isValorValido=!0,t.documentoRepetido||t.errorEnDocumento||(e.total+=t.rhXiiiSueldo.xiiiValor,e.cantidadXiiiSueldo++)):(t.isFormaPagoValido=!1,t.isValorValido=!0):(t.isFormaPagoValido=!0,t.isValorValido=!0)}),this.refreshGrid()},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.xiiiSueldoService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:de.a,toolTip:pe.a,numericCell:zo.a},this.pinnedBottomRowData=[{empId:"",empNombres:"",ingresosCalculados:"",xiiiBaseImponible:c.a.TAG_TOTAL_PUNTOS,xiiiValor:"",formaPago:c.a.TAG_N_XIII_SUELDO,"rhXiiiSueldo.xiiiDocumento":0}],this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimensionarColumnas(),this.seleccionarFila(0),this.gridApi&&this.calcularTotal(),this.extraerValoresIniciales()},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.cambiarEstadoCheckCabecera=function(e){var t=this;this.apruebaTodos=e,this.apruebaTodos?this.gridApi.forEachNode(function(e){e.data.rhXiiiSueldo.xiiiBaseImponible=e.data.ingresosCalculados,e.data.rhXiiiSueldo.xiiiBaseImponible>0?(e.data.rhXiiiSueldo.xiiiValor=t.utilService.convertirDecimaleFloat(e.data.rhXiiiSueldo.xiiiBaseImponible)/12,e.data.rhXiiiSueldo.xiiiValor=Math.round(100*e.data.rhXiiiSueldo.xiiiValor)/100,e.data.isFormaPagoValido=!1,e.data.errorEnDocumento=!0,t.verificarDocumentoBanco(e.data)):(e.data.isValorValido=!0,e.data.isFormaPagoValido=!0,e.data.documentoRepetido=!1,e.data.errorEnDocumento=!1)}):(this.gridApi.forEachNode(function(e){e.data.rhXiiiSueldo.xiiiBaseImponible=0,e.data.rhXiiiSueldo.xiiiValor=0,e.data.isValorValido=!0,e.data.isFormaPagoValido=!0,e.data.documentoRepetido=!1,e.data.errorEnDocumento=!1}),this.total=0,this.cantidadXiiiSueldo=0,this.refreshGrid())},e.prototype.calcularTotal=function(){var e=this;this.total=0,this.cantidadXiiiSueldo=0,this.gridApi.forEachNode(function(t){t.data.rhXiiiSueldo.xiiiBaseImponible>0&&(e.cantidadXiiiSueldo++,e.total+=t.data.rhXiiiSueldo.xiiiValor)}),this.refreshGrid()},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_NUEVO:case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.screamXS=window.innerWidth<=c.a.WINDOW_WIDTH_XS},yr([Object(i.ViewChild)("menuOpciones"),Dr("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),yr([Object(i.Input)(),Dr("design:type",Object)],e.prototype,"parametrosFormulario",void 0),yr([Object(i.Input)(),Dr("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),yr([Object(i.Input)(),Dr("design:type",Boolean)],e.prototype,"esContable",void 0),yr([Object(i.Input)(),Dr("design:type",Ua.a)],e.prototype,"conContable",void 0),yr([Object(i.Input)(),Dr("design:type",Ba.a)],e.prototype,"tipoSeleccionado",void 0),yr([Object(i.Input)(),Dr("design:type",Object)],e.prototype,"data",void 0),yr([Object(i.Input)(),Dr("design:type",String)],e.prototype,"titulo",void 0),yr([Object(i.Output)(),Dr("design:type",Object)],e.prototype,"enviarAccion",void 0),yr([Object(i.Input)(),Dr("design:type",Array)],e.prototype,"listaResultadoXiiiSueldo",void 0),yr([Object(i.Input)(),Dr("design:type",Array)],e.prototype,"listaFormasPagoBeneficio",void 0),yr([Object(i.Input)(),Dr("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),yr([Object(i.HostListener)("window:beforeunload",["$event"]),Dr("design:type",Function),Dr("design:paramtypes",[Event]),Dr("design:returntype",void 0)],e.prototype,"unloadHandler",null),yr([Object(i.HostListener)("window:resize",["$event"]),Dr("design:type",Function),Dr("design:paramtypes",[]),Dr("design:returntype",void 0)],e.prototype,"onResize",null),e=yr([Object(i.Component)({selector:"app-xiii-sueldo-formulario",template:o("GiCt"),styles:[o("BflF")]}),Dr("design:paramtypes",[S.HotkeysService,L.a,h.a,_r,u.b,gr.a,le.a,T.b,Wa.a])],e)}(),Mr=o("SMKp"),xr=o("1rW1"),Fr=o("FYXy"),wr=o("Akc3"),Gr=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jr=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ur=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Br=function(){function e(e,t,o,a,r,n,s,d,p){this.empleadoService=e,this.filasService=t,this.rolPagoService=o,this.utilService=a,this.toastr=r,this.atajoService=n,this.modalService=s,this.contableService=d,this.contableRRHHService=p,this.empresaSeleccionada=new l.a,this.parametrosFormulario={},this.formasDePago=new Array,this.listadoEmpleadosLote=new Array,this.esContable=!1,this.conContable=new Ua.a,this.tipoSeleccionado=new Ba.a,this.data={},this.titulo=c.a.TALENTO_HUMANO_ROL_DE_PAGOS,this.enviarAccion=new i.EventEmitter,this.fechaContableValido=!0,this.estilos={},this.estadoContableAMayorizar=!1,this.puedeEditarTabla=!1,this.constantes=c.a,this.cargando=!1,this.listadoRhRol=new Array,this.objetoSeleccionado=new Oi,this.filtroGlobal="",this.observacionesContable="",this.activar=!0,this.isScreamMd=!0,this.filasTiempo=new D.a,this.periodoSeleccionado=new Ye.a,this.accion=c.a.ACCION_CREAR,this.columnDefs=[],this.columnDefsSelected=[],this.autonumeric92=this.rolPagoService.autonumeric92(),this.autonumeric30=this.rolPagoService.autonumeric30(),this.estilos={width:"100%",height:"calc(100vh - 220px)"}}return e.prototype.ngOnInit=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.isScreamMd=!(this.innerWidth<=576),this.fpSeleccionada=this.parametrosFormulario.fpSeleccionada,this.periodoSeleccionado=this.parametrosFormulario.periodoSeleccionado,this.esContable&&(this.activar=this.data.activar),this.esContable&&(this.estilos.height="calc(100vh - 355px)"),this.conContableCopia=this.esContable?Gr({},this.conContable):new Ua.a,this.puedeEditarTabla=!this.esContable||this.data.accion===c.a.ACCION_MAYORIZAR,this.accion=this.esContable?this.data.accion:c.a.ACCION_CREAR,this.iniciarAgGrid()},e.prototype.ngOnChanges=function(e){!this.esContable&&(this.listadoEmpleadosLote=new Array),this.listadoRhRol=new Array,this.definirAtajosDeTeclado(),e.parametrosFormulario&&e.parametrosFormulario.currentValue&&e.parametrosFormulario.currentValue.listar&&this.getListaEmpleadoLote()},e.prototype.accionesBotones=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.activar=e.estado;break;case c.a.ACCION_CANCELAR:this.activar=!1,this.cancelar();break;case c.a.ACCION_MAYORIZAR:this.fechaContableValido?(this.estadoContableAMayorizar=e.estado,this.mayorizar()):(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1);break;case c.a.ACCION_IMPRIMIR:this.enviarAccion.emit({accion:c.a.ACCION_IMPRIMIR});break;case c.a.ACCION_ANULAR:this.enviarAccion.emit({accion:c.a.ACCION_ANULAR});break;case c.a.ACCION_ELIMINAR:this.enviarAccion.emit({accion:c.a.ACCION_ELIMINAR});break;case c.a.ACCION_REVERSAR:this.enviarAccion.emit({accion:c.a.ACCION_REVERSAR})}},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var t=document.getElementById("btnGuardar");return e.gridApi&&e.gridApi.stopEditing(),t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivar");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var t=document.getElementById("btnCancelar");return e.gridApi&&e.gridApi.stopEditing(),t&&t.click(),!1}))},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=e.accion===c.a.ACCION_CREAR?JSON.parse(JSON.stringify(e.observacionesContable)):JSON.parse(JSON.stringify(e.conContable?e.conContable:null)),e.detalleInicial=JSON.parse(JSON.stringify(e.listadoEmpleadosLote?e.listadoEmpleadosLote:null))},50)},e.prototype.cancelar=function(){var e=this;switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CREAR:if(this.sePuedeCancelar())this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})}break;case c.a.ACCION_CONSULTAR:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});break;default:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})}},e.prototype.sePuedeCancelar=function(){var e=!1;e=this.accion===c.a.ACCION_CREAR?this.valoresIniciales===this.observacionesContable:this.utilService.compararObjetos(this.valoresIniciales,this.conContableCopia);var t=this.utilService.compararObjetos(this.listadoEmpleadosLote,this.detalleInicial);return e&&t},e.prototype.getListaEmpleadoLote=function(){this.filasTiempo.iniciarContador(),this.cargando=!0,this.empleadoService.getListaEmpleadoLote(this.parametrosFormulario,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGetListaEmpleadoLote=function(e){e&&e.length>0?(this.cargando=!1,this.listadoEmpleadosLote=this.rolPagoService.establecerPrestamos(e),this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:!0})):this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}),this.filasTiempo.finalizarContador()},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:!e})},e.prototype.guardar=function(){if(this.utilService.verificarPermiso(c.a.ACCION_CREAR,this,!0)&&this.validarAntesDeEnviar()){this.cargando=!0;var e={observacionesContable:this.observacionesContable,listaRhRol:this.listadoRhRol,perHasta:this.parametrosFormulario.perHasta};this.rolPagoService.insertarRhRol(e,this,c.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.mayorizar=function(){if(this.utilService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0)&&this.validarAntesDeEnviar()){this.cargando=!0;var e=Gr({},this.conContableCopia);e.conPendiente=this.estadoContableAMayorizar;var t={conContable:e,listaRhRol:this.listadoRhRol};this.rolPagoService.modificarRhRol(t,this,c.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeInsertarRhRol=function(e){this.conContable=e.extraInfo.conContable,this.preguntarImprimir(e.operacionMensaje)},e.prototype.despuesDeModificarRhRol=function(e){this.conContable.conFecha=this.conContableCopia.conFecha,this.conContable.conObservaciones=this.conContableCopia.conObservaciones,this.conContable.conPendiente=this.estadoContableAMayorizar,this.estadoContableAMayorizar?this.mensajeOk(e.operacionMensaje):this.preguntarImprimir(e.operacionMensaje)},e.prototype.mensajeOk=function(e){this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e),this.cargando=!1,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})},e.prototype.eliminarItem=function(){var e=this;if(this.listadoEmpleadosLote&&this.listadoEmpleadosLote.length>1&&this.utilService.verificarPermiso(c.a.ACCION_ELIMINAR,this,!0)){var t=this.listadoEmpleadosLote.findIndex(function(t){return t.prId===e.objetoSeleccionado.prId});this.listadoEmpleadosLote.splice(t,1),this.gridApi&&this.gridApi.updateRowData({remove:[this.objetoSeleccionado]}),this.actualizarPinned()}},e.prototype.ejecutarAccion=function(){this.consultarComprobante()},e.prototype.preguntarImprimir=function(e){var t=this,o=this.modalService.open(Bi.a,{backdrop:"static"});o.componentInstance.empresaSeleccionada=this.empresaSeleccionada;var a=[],i=new wi.a;i=this.conContable.conContablePK,a.push(i),o.componentInstance.parametrosImprimir={listadoPK:a},o.componentInstance.nombreRutaImprimir="todocompuWS/contabilidadWebController/generarReporteContableIndividual",o.componentInstance.nombreArchivoPDFImprimir="ContableRol",o.componentInstance.parametrosImprimirCombo={contablePK:this.conContable.conContablePK},o.componentInstance.nombrerutaImprimirCombo="todocompuWS/rrhhWebController/generarReporteComprobanteRol",o.componentInstance.nombreArchivoPDFImprimirCombo="ReporteComprobanteRol",o.componentInstance.textoImprimirCombo=c.a.LABEL_IMPRIMIR_COMPROBANTE_ROL,o.componentInstance.mensaje=e,o.componentInstance.mostrarCombo=!0,o.result.then(function(e){},function(){t.cargando=!1,t.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.rolPagoService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.pinnedBottomRowData=this.rolPagoService.generarPinnedBottonRowData(),this.rowSelection="single",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas(),this.actualizarPinned(),this.extraerValoresIniciales()},e.prototype.validarAntesDeEnviar=function(){for(var e=0,t=new Array,o=0;o<this.listadoEmpleadosLote.length;o++){if(this.esContable&&(!this.listadoEmpleadosLote[o].fpSeleccionada||!this.listadoEmpleadosLote[o].fpSeleccionada.fpDetalle))return this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TAG_AVISO),!1;if(this.validarRegistro(this.listadoEmpleadosLote[o])){var a=this.construirRol(this.listadoEmpleadosLote[o]);t.push(a),e++}else if(this.esContable)return this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TAG_AVISO),!1}return e>0?(this.listadoRhRol=t,!0):(this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TAG_AVISO),!1)},e.prototype.construirRol=function(e){var t=new Ni.a;t.rolFechaUltimoSueldo=e.prFechaUltimoSueldo,t.rolAnticipos=e.prSaldoAnticipos,t.rolHorasExtras=e.horas50?this.utilService.quitarComasNumero(e.horas50):0,t.rolHorasExtras100=e.horas100?this.utilService.quitarComasNumero(e.horas100):0,t.rolDiasFaltasReales=e.diasFalta?this.utilService.quitarComasNumero(e.diasFalta):0,t.rolDescuentoPermisoMedico=e.rolDescuentoPermisoMedico?this.utilService.quitarComasNumero(e.rolDescuentoPermisoMedico):0,t.rolPrestamos=e.prestamos?this.utilService.quitarComasNumero(e.prestamos):0,t.rolPrestamoQuirografario=e.prestamosQ?this.utilService.quitarComasNumero(e.prestamosQ):0,t.rolPrestamoHipotecario=e.prestamosH?this.utilService.quitarComasNumero(e.prestamosH):0,t.rolFormaPago=e.fpSeleccionada.fpDetalle,t.rolDocumento=e.documento?e.documento:null,t.rolObservaciones=e.observacion?e.observacion:null,t.empCargo=e.prCargo,t.empSueldo=e.prSueldo,t.conContable=null,this.esContable?(t.rolDesde=e.desde,t.rolHasta=e.hasta,t.rolAuxiliar=!0,t.rolSecuencial=e.id,t.rolDiasPermisoMedico=e.diasPermiso,t.rolDiasExtrasReales=e.rolDiasExtrasReales,t.rolLiqFondoReserva=e.rolLiqFondoReserva,t.rolLiqXiii=e.rolLiqXiii,t.rolLiqXiv=e.rolLiqXiv,t.rolLiqVacaciones=e.rolLiqVacaciones,t.rolLiqSalarioDigno=e.rolLiqSalarioDigno,t.rolLiqBonificacion=e.rolLiqBonificacion,t.rolLiqDesahucio=e.rolLiqDesahucio,t.rolLiqDesahucioIntempestivo=e.rolLiqDesahucioIntempestivo,t.rolBonos=e.rolBono,t.rolAnticipos=e.rolAnticipo,t.rolSaldoAnterior=e.prSaldoAnterior,t.conContableProvision=e.contableProvision):(t.conContableProvision=null,t.rolDesde=e.prFechaIngreso&&e.prFechaIngreso>this.periodoSeleccionado.perDesde?e.prFechaIngreso:this.periodoSeleccionado.perDesde,t.rolHasta=e.hasta?this.utilService.formatoDateSinZonaHorariaYYYMMDD(e.hasta).getTime():this.periodoSeleccionado.perHasta);var o=new Di.a;if(o.rhEmpleadoPK.empEmpresa=c.a.KEY_EMPRESA_SELECT,o.rhEmpleadoPK.empId=e.prId,o.empNombres=e.prNombres,t.rhEmpleado=o,e.prSector){var a=new yi.a;a.prdSectorPK.secCodigo=e.prSector,a.prdSectorPK.secEmpresa=c.a.KEY_EMPRESA_SELECT,t.prdSector=a}else t.prdSector=null;var i=new Fa.a;return i.conCuentasPK.ctaCodigo=e.fpSeleccionada.ctaCodigo,i.conCuentasPK.ctaEmpresa=c.a.KEY_EMPRESA_SELECT,t.conCuentas=i,t},e.prototype.validarRegistro=function(e){return!!(e.fpSeleccionada&&e.fpSeleccionada.fpDetalle&&!e.documentoRepetido&&!e.errorEnDocumento&&this.rolPagoService.validarDias(e)&&this.rolPagoService.validarPermiso(e)&&e.prestamos<=e.prSaldoPrestamos)},e.prototype.actualizarPinned=function(){for(var e=0,t=0;t<this.listadoEmpleadosLote.length;t++)this.validarRegistro(this.listadoEmpleadosLote[t])&&e++;this.pinnedBottomRowData[0].documento=e,this.gridApi.setPinnedBottomRowData(this.pinnedBottomRowData)},e.prototype.matRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.generarOpciones=function(){var e=this,t=this.esContable&&this.puedeEditarTabla;this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.consultarComprobante()}}],t&&this.opciones.push({label:c.a.ACCION_ELIMINAR,icon:c.a.ICON_ELIMINAR,disabled:!t,command:function(){return t?e.eliminarItem():null}})},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()})),this.objetoSeleccionado=t?t.data:null},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.terminadoEditar=function(e){var t=e.column.getId();"prestamos"!==t&&"rolDescuentoPermisoMedico"!==t&&"diasFalta"!==t||this.actualizarPinned(),"documento"!==t&&"fpSeleccionada"!==t||("fpSeleccionada"===t&&(this.fpSeleccionada=null),this.verificarDocumentoBanco(e.data))},e.prototype.verificarDocumentoBanco=function(e){if(e.errorEnDocumento=!0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),e.documento&&e.fpSeleccionada&&e.fpSeleccionada.validar){var t={empresa:c.a.KEY_EMPRESA_SELECT,documento:e.documento,cuenta:e.fpSeleccionada.ctaCodigo,data:e};this.contableService.verificarDocumentoBanco(t,this,c.a.KEY_EMPRESA_SELECT)}else e.errorEnDocumento=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.validarDocumentosRepetido()},e.prototype.despuesDeVerificarDocumento=function(e,t){t.errorEnDocumento=!e,this.gridApi&&this.gridApi.updateRowData({update:[t]}),this.validarDocumentosRepetido()},e.prototype.validarDocumentosRepetido=function(){var e=this;this.listadoEmpleadosLote.forEach(function(t){var o=t.documento&&t.fpSeleccionada&&t.fpSeleccionada.validar,a=e.listadoEmpleadosLote.filter(function(e){return o&&e.fpSeleccionada&&e.fpSeleccionada.validar&&e.documento&&e!==t&&e.documento.trim()===t.documento.trim()});t.documentoRepetido=a.length>0}),this.actualizarPinned(),this.refreshGrid()},e.prototype.consultarComprobante=function(){var e=this;if(this.validarRegistro(this.objetoSeleccionado)){var t={empresa:this.empresaSeleccionada.empCodigo,idEmpleado:this.objetoSeleccionado.prId,rol:this.construirRol(this.objetoSeleccionado)},o=this.modalService.open(Fr.a,{size:"lg",backdrop:"static"});o.componentInstance.parametros=t,o.componentInstance.empresaSeleccionada=this.empresaSeleccionada,o.componentInstance.accion=c.a.ACCION_CONSULTAR,o.componentInstance.titulo=c.a.TAG_VISTA_PRELIMINAR_ROL,o.componentInstance.vistaPreliminar=!0,o.componentInstance.puedeEditar=this.puedeEditarTabla,o.componentInstance.rutaImprimir="todocompuWS/rrhhWebController/imprimirComprobanteRolListado",o.result.then(function(t){if(t&&t.isFechaValido){e.objetoSeleccionado.hasta=e.utilService.formatoDateSinZonaHorariaYYYMMDD(t.rolHastaTexto).getTime();var o=e.construirRol(e.objetoSeleccionado);e.cargando=!0;var a={rol:o};e.rolPagoService.completarDatosDelRolDePago(a,e,c.a.KEY_EMPRESA_SELECT)}},function(){})}else this.toastr.warning(c.a.MSJ_INGRESE_DATOS_VALIDOS,c.a.TAG_AVISO)},e.prototype.despuesDeCompletarDatosDelRolDePago=function(e){var t=this.contableRRHHService.construirEmpleadosPorLoteAPartirDeUnRol(e,this.formasDePago);if(this.listadoEmpleadosLote&&this.listadoEmpleadosLote.length>1){var o=this.listadoEmpleadosLote.findIndex(function(e){return e.prId===t.prId});if(this.listadoEmpleadosLote[o]=t,this.gridApi)this.gridApi.getRowNode(""+o).setData(t);this.actualizarPinned()}this.cargando=!1},e.prototype.calcularValores=function(){if(this.validarAntesDeEnviar()){this.cargando=!0;var e={listado:this.listadoRhRol,empresa:this.empresaSeleccionada.empCodigo};this.rolPagoService.calcularValoresRolesPago(e,this,c.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeCalcularValoresRolesPago=function(e){this.cargando=!1;var t=this.modalService.open(wr.a,{size:"lg",backdrop:"static"});t.componentInstance.parametros=e,t.componentInstance.empresaSeleccionada=this.empresaSeleccionada,t.componentInstance.titulo=c.a.TAG_VALORES_CALCULADOS,t.result.then(function(e){},function(){})},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS)},jr([Object(i.Input)(),Ur("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),jr([Object(i.Input)(),Ur("design:type",Object)],e.prototype,"parametrosFormulario",void 0),jr([Object(i.Input)(),Ur("design:type",Array)],e.prototype,"formasDePago",void 0),jr([Object(i.Input)(),Ur("design:type",Array)],e.prototype,"listadoEmpleadosLote",void 0),jr([Object(i.Input)(),Ur("design:type",Boolean)],e.prototype,"esContable",void 0),jr([Object(i.Input)(),Ur("design:type",Ua.a)],e.prototype,"conContable",void 0),jr([Object(i.Input)(),Ur("design:type",Ba.a)],e.prototype,"tipoSeleccionado",void 0),jr([Object(i.Input)(),Ur("design:type",Object)],e.prototype,"data",void 0),jr([Object(i.Input)(),Ur("design:type",String)],e.prototype,"titulo",void 0),jr([Object(i.Output)(),Ur("design:type",Object)],e.prototype,"enviarAccion",void 0),jr([Object(i.ViewChild)("menuOpciones"),Ur("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),jr([Object(i.ViewChild)("frmDatos"),Ur("design:type",I.NgForm)],e.prototype,"frmDatos",void 0),jr([Object(i.HostListener)("window:resize",["$event"]),Ur("design:type",Function),Ur("design:paramtypes",[]),Ur("design:returntype",void 0)],e.prototype,"onResize",null),e=jr([Object(i.Component)({selector:"app-rol-pago-formulario",template:o("NVz6")}),Ur("design:paramtypes",[qi.a,L.a,xr.a,h.a,u.b,S.HotkeysService,T.b,Wa.a,Pi])],e)}(),Vr=o("6IoA"),kr=o("ecmD"),Wr=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},zr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Jr=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.extraerDatosPaPrestamos=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/extraerDatosPaPrestamos",e,o).then(function(e){e&&e.extraInfo?t.despuesExtraerDatosPaPrestamos(e.extraInfo):(t.despuesExtraerDatosPaPrestamos([]),a.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarPrestamo=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarModificarRhPrestamo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarPrestamo(e):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarRhPrestamo=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/modificarRhPrestamo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarPrestamo(e):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e=Wr([Object(i.Injectable)({providedIn:"root"}),zr("design:paramtypes",[p.a,u.b,h.a])],e)}(),Kr=o("m/aa"),Yr=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qr=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Hr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Xr=function(){function e(e,t,o,a,r,n,s){this.toastr=e,this.atajoService=t,this.modalService=o,this.prestamoService=a,this.utilService=r,this.sistemaService=n,this.contableService=s,this.empresaSeleccionada=new l.a,this.parametrosFormulario={},this.enviarAccion=new i.EventEmitter,this.formasDePago=new Array,this.esContable=!1,this.conContable=new Ua.a,this.tipoSeleccionado=new Ba.a,this.data={},this.titulo=c.a.RRHH_NUEVO_PRESTAMO,this.constantes=c.a,this.accion=null,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.vistaFormulario=!1,this.es={},this.fechaContableValido=!0,this.listaPrestamoMotivo=[],this.prestamoMotivoSeleccionado=new Vr.a,this.listaFormaPago=new Array,this.rhComboFormaPagoTO=new kr.a,this.rhPrestamo=new Li,this.fechaActual=new Date,this.fechaHasta=new Date,this.codigoEmpleado=null,this.documentoValido=!0,this.reversar=!1,this.estadoContableAMayorizar=!1,this.puedeEditarTabla=!1}return e.prototype.ngOnInit=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.isScreamMd=!(this.innerWidth<=576),Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.obtenerFechaInicioActualMes(),this.configAutonumericReales={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999",minimumValue:"0.1"},this.configAutonumericEnteros={decimalPlaces:0,decimalPlacesRawValue:0,decimalPlacesShownOnBlur:0,decimalPlacesShownOnFocus:0,maximumValue:"999999999",minimumValue:"0"},this.conContableCopia=this.esContable?Yr({},this.conContable):new Ua.a,this.puedeEditarTabla=!this.esContable||this.data.accion===c.a.ACCION_MAYORIZAR,this.esContable&&this.seleccionarCombos(),this.accion=this.esContable?this.data.accion:this.accion},e.prototype.ngOnChanges=function(e){this.generarAtajos(),e.parametrosFormulario&&e.parametrosFormulario.currentValue&&(this.empresaSeleccionada=this.parametrosFormulario.empresaSeleccionada,this.cambiarEmpresaSeleccionada())},e.prototype.accionesBotones=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.activar=e.estado;break;case c.a.ACCION_CANCELAR:this.activar=!1,this.cancelar();break;case c.a.ACCION_MAYORIZAR:this.fechaContableValido?(this.estadoContableAMayorizar=e.estado,this.mayorizar(this.frmDatos)):this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS);break;case c.a.ACCION_IMPRIMIR:this.enviarAccion.emit({accion:c.a.ACCION_IMPRIMIR});break;case c.a.ACCION_ANULAR:this.enviarAccion.emit({accion:c.a.ACCION_ANULAR});break;case c.a.ACCION_ELIMINAR:this.enviarAccion.emit({accion:c.a.ACCION_ELIMINAR});break;case c.a.ACCION_REVERSAR:this.enviarAccion.emit({accion:c.a.ACCION_REVERSAR})}},e.prototype.seleccionarCombos=function(){if(this.reversar=this.rhPrestamo.preValor<0,this.rhPrestamo.preValor=Math.abs(this.rhPrestamo.preValor),this.prestamoMotivoSeleccionado=this.listaPrestamoMotivo[0],this.codigoEmpleado=this.rhPrestamo&&this.rhPrestamo.rhEmpleado?this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId:null,this.listaFormaPago&&this.listaFormaPago.length>0&&this.rhPrestamo.conCuentas)for(var e=0;e<this.listaFormaPago.length;e++)if(this.listaFormaPago[e].ctaCodigo==this.rhPrestamo.conCuentas.conCuentasPK.ctaCodigo)return void(this.rhComboFormaPagoTO=this.listaFormaPago[e])},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,c.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.validarDocumento=function(){if(this.cargando=!0,this.documentoValido=!1,this.rhPrestamo.preDocumento&&this.rhComboFormaPagoTO.validar){var e={empresa:c.a.KEY_EMPRESA_SELECT,documento:this.rhPrestamo.preDocumento.trim(),cuenta:this.rhComboFormaPagoTO.ctaCodigo};this.contableService.verificarDocumentoBanco(e,this,c.a.KEY_EMPRESA_SELECT)}else this.cargando=!1,this.documentoValido=!0},e.prototype.despuesDeVerificarDocumento=function(e){this.documentoValido=e,this.cargando=!1},e.prototype.cambiarEmpresaSeleccionada=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=c.a.ACCION_CREAR,this.extraerDatosPaPrestamos(),this.rhPrestamo.preValor=0,this.rhPrestamo.preNumeroPagos=0,this.rhPrestamo.preDocumento="",this.rhPrestamo.preObservaciones="",this.rhPrestamo.preAuxiliar=!1,this.fechaHasta=this.fechaActual},e.prototype.extraerDatosPaPrestamos=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,inactivoMotivo:!0};this.prestamoService.extraerDatosPaPrestamos(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesExtraerDatosPaPrestamos=function(e){e?(this.listaFormaPago=e.map.listaFormaPago,this.listaPrestamoMotivo=e.map.listaPrestamo,this.prestamoMotivoSeleccionado=this.listaPrestamoMotivo?this.listaPrestamoMotivo[0]:null,this.rhComboFormaPagoTO=this.listaFormaPago?this.listaFormaPago[0]:null):(this.listaFormaPago=[],this.listaPrestamoMotivo=[],this.prestamoMotivoSeleccionado=null,this.rhComboFormaPagoTO=null),this.cargando=!1,this.extraerValoresIniciales()},e.prototype.validarEmpleado=function(){this.codigoEmpleado!==this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId&&(this.codigoEmpleado=null,this.rhPrestamo.rhEmpleado.empNombres="",this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId="")},e.prototype.abrirModalTrabajadores=function(e){var t=this;if(this.utilService.validarTeclasAgregarFila(e.keyCode)&&(!(this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId===this.codigoEmpleado&&this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId&&this.codigoEmpleado)&&(this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId=""===this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId?null:this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId,this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId=this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId?this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId.toUpperCase():null,this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId))){var o={empresa:this.empresaSeleccionada.empCodigo,buscar:this.rhPrestamo.rhEmpleado.rhEmpleadoPK.empId,estado:!0};e.srcElement.blur(),e.preventDefault();var a=this.modalService.open(Kr.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.parametrosBusqueda=o,a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){if(e){t.rhPrestamo.rhEmpleado=e,t.rhPrestamo.rhEmpleado.empNombres=e?e.empApellidos+" "+e.empNombres:"",t.codigoEmpleado=e?e.rhEmpleadoPK.empId:null;var o=document.getElementById("trabajador");o&&o.focus()}t.documentoValido=!0},function(){var e=document.getElementById("trabajador");e&&e.focus()})}},e.prototype.nuevoPrestamo=function(){this.accion=c.a.ACCION_CREAR},e.prototype.guardarPrestamo=function(e){if(this.utilService.verificarPermiso(this.accion,this,!0)){var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t&&this.documentoValido){this.cargando=!0,this.antesDeGuardarPrestamo(this.rhPrestamo);var o={rhPrestamo:this.rhPrestamo,rhComboFormaPagoTO:this.rhComboFormaPagoTO,fechaHasta:this.fechaHasta};this.prestamoService.insertarPrestamo(o,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.mayorizar=function(e){if(this.utilService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0)){var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t&&this.documentoValido){this.cargando=!0,this.antesDeGuardarPrestamo(this.rhPrestamo);var o=Yr({},this.conContableCopia);o.conPendiente=this.estadoContableAMayorizar;var a={rhPrestamo:this.rhPrestamo,conContable:o};this.prestamoService.modificarRhPrestamo(a,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.antesDeGuardarPrestamo=function(e){e.conCuentas.conCuentasPK.ctaEmpresa=c.a.KEY_EMPRESA_SELECT,e.conCuentas.conCuentasPK.ctaCodigo=this.rhComboFormaPagoTO.ctaCodigo,e.prdSector.prdSectorPK.secEmpresa=c.a.KEY_EMPRESA_SELECT,e.prdSector.prdSectorPK.secCodigo=this.rhPrestamo.rhEmpleado.prdSector.prdSectorPK.secCodigo,this.esContable&&(e.preAuxiliar=!0),this.reversar&&(e.preValor=-1*this.utilService.quitarComasNumero(e.preValor)),e.preValor=this.utilService.quitarComasNumero(e.preValor)},e.prototype.despuesDeInsertarPrestamo=function(e){e&&(this.conContable=e.extraInfo.conContable,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}),this.estadoContableAMayorizar?this.mensajeOk(e.operacionMensaje):this.preguntarImprimir(e.operacionMensaje)),this.cargando=!1},e.prototype.despuesDeModificarPrestamo=function(e){this.conContable.conFecha=this.conContableCopia.conFecha,this.conContable.conObservaciones=this.conContableCopia.conObservaciones,this.conContable.conPendiente=this.estadoContableAMayorizar,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}),this.estadoContableAMayorizar?this.mensajeOk(e.operacionMensaje):this.preguntarImprimir(e.operacionMensaje)},e.prototype.mensajeOk=function(e){this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e),this.cargando=!1,this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})},e.prototype.limpiarResultado=function(){this.prestamoMotivoSeleccionado=this.listaPrestamoMotivo?this.listaPrestamoMotivo[0]:null,this.rhPrestamo=new Li,this.fechaHasta=this.fechaActual,this.conContable=null,this.vistaFormulario=!1,this.accion=null},e.prototype.preguntarImprimir=function(e){var t=this,o=this.modalService.open(Bi.a,{backdrop:"static"});o.componentInstance.empresaSeleccionada=this.empresaSeleccionada;var a=[],i=new wi.a;i=this.conContable.conContablePK,a.push(i),o.componentInstance.parametrosImprimir={listadoPK:a},o.componentInstance.nombreRutaImprimir="todocompuWS/contabilidadWebController/generarReporteContableIndividual",o.componentInstance.nombreArchivoPDFImprimir="reportComprobanteContable",o.componentInstance.parametrosImprimirCombo={contable:this.conContable,rhPrestamo:this.rhPrestamo,rhComboFormaPagoTO:this.rhComboFormaPagoTO,fechaHasta:this.fechaHasta},o.componentInstance.nombrerutaImprimirCombo="todocompuWS/rrhhWebController/generarReporteComprobantePrestamo",o.componentInstance.nombreArchivoPDFImprimirCombo="reportComprobantePrestamo",o.componentInstance.textoImprimirCombo=c.a.LABEL_IMPRIMIR_COMPROBANTE_PRESTAMO,o.componentInstance.mensaje=e,o.componentInstance.mostrarCombo=!0,o.result.then(function(e){},function(){t.cargando=!1,t.limpiarResultado(),t.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmDatos?e.frmDatos.value:null))},50)},e.prototype.cancelar=function(){var e=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmDatos))this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})}},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:!e})},e.prototype.generarAtajos=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardar");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelar");return e&&e.click(),!1}))},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_NUEVO:case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS)},qr([Object(i.Input)(),Hr("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),qr([Object(i.Input)(),Hr("design:type",Object)],e.prototype,"parametrosFormulario",void 0),qr([Object(i.Output)(),Hr("design:type",Object)],e.prototype,"enviarAccion",void 0),qr([Object(i.Input)(),Hr("design:type",Array)],e.prototype,"formasDePago",void 0),qr([Object(i.Input)(),Hr("design:type",Boolean)],e.prototype,"esContable",void 0),qr([Object(i.Input)(),Hr("design:type",Ua.a)],e.prototype,"conContable",void 0),qr([Object(i.Input)(),Hr("design:type",Ba.a)],e.prototype,"tipoSeleccionado",void 0),qr([Object(i.Input)(),Hr("design:type",Object)],e.prototype,"data",void 0),qr([Object(i.Input)(),Hr("design:type",String)],e.prototype,"titulo",void 0),qr([Object(i.Input)(),Hr("design:type",Array)],e.prototype,"listaPrestamoMotivo",void 0),qr([Object(i.Input)(),Hr("design:type",Array)],e.prototype,"listaFormaPago",void 0),qr([Object(i.Input)(),Hr("design:type",Li)],e.prototype,"rhPrestamo",void 0),qr([Object(i.ViewChild)("frmDatos"),Hr("design:type",I.NgForm)],e.prototype,"frmDatos",void 0),qr([Object(i.HostListener)("window:beforeunload",["$event"]),Hr("design:type",Function),Hr("design:paramtypes",[Event]),Hr("design:returntype",void 0)],e.prototype,"unloadHandler",null),qr([Object(i.HostListener)("window:resize",["$event"]),Hr("design:type",Function),Hr("design:paramtypes",[]),Hr("design:returntype",void 0)],e.prototype,"onResize",null),e=qr([Object(i.Component)({selector:"app-prestamo-formulario",template:o("g/5y")}),Hr("design:paramtypes",[u.b,S.HotkeysService,T.b,Jr,h.a,qt.a,Wa.a])],e)}(),Zr=o("WTQC"),$r=o("xcWn"),Qr=o("PNp2"),en=o("hyxj"),tn=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},on=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},an=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},rn=function(){function e(e,t,o,a,r,n,s){this.formaPagoService=e,this.utilService=t,this.toastr=o,this.auth=a,this.atajoService=r,this.modalService=n,this.sectorService=s,this.enviarAccion=new i.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activarFormulario=!1,this.tituloForm="",this.constantes=c.a,this.codigoCuenta=null,this.tamanioEstructura=0,this.listaSectores=[],this.sectorSeleccionado=new Ga.a,this.formaPago=new $r.a,this.listaResultado=[]}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.tamanioEstructura=this.parametros.tamanioEstructura,this.listaSectores=this.parametros.listaSectores,this.listaResultado=this.parametros.listaResultado,this.activarFormulario=this.parametros.activar,this.operaciones(),this.extraerValoresIniciales(),this.generarAtajos()},e.prototype.generarAtajos=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFormulario");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardar");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarFormaPago");return e&&e.click(),!1}))},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmFormaPagoDatos?e.frmFormaPagoDatos.value:null))},60)},e.prototype.operaciones=function(){switch(this.accion){case c.a.ACCION_CREAR:this.tituloForm=c.a.TITULO_FORM_NUEVO_FORMA_PAGO,this.obtenerDatosFormaPagoNuevo();break;case c.a.ACCION_CONSULTAR:this.obtenerDatoFormaPagoConsulta(),this.tituloForm=c.a.TITULO_FORM_CONSULTAR_FORMA_PAGO;break;case c.a.ACCION_EDITAR:this.obtenerDatoFormaPago(),this.tituloForm=c.a.TITULO_FORM_EDITAR_FORMA_PAGO}},e.prototype.obtenerDatosFormaPagoNuevo=function(){this.cargando=!0,this.formaPago=new $r.a,this.sectorSeleccionado=this.listaSectores[0],this.tamanioEstructura=this.parametros.tamanioEstructura,this.cargando=!1},e.prototype.obtenerDatoFormaPagoConsulta=function(){this.cargando=!0,this.formaPago=tn({},this.parametros.formaPago),this.codigoCuenta=this.formaPago.ctaCodigo,this.llenarCombo(),this.cargando=!1},e.prototype.obtenerDatoFormaPago=function(){this.cargando=!0,this.formaPago=tn({},this.parametros.formaPago),this.codigoCuenta=this.formaPago.ctaCodigo,this.llenarCombo(),this.cargando=!1},e.prototype.llenarCombo=function(){this.sectorSeleccionado=this.formaPagoService.seleccionarSector(this.listaSectores,this.formaPago.secCodigo)},e.prototype.insertarFormaPago=function(e){if(this.formaPagoService.verificarPermiso(c.a.ACCION_CREAR,this,!0)){this.cargando=!0;var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t){var o=JSON.parse(JSON.stringify(this.formaPago));this.setearValoresInvComprasFormaPago(o);var a={accion:"I",carPagosCobrosFormaTO:o};this.formaPagoService.accionCarPagosForma(a,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.modificarFormaPago=function(e){if(this.formaPagoService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t){var o=JSON.parse(JSON.stringify(this.formaPago));this.setearValoresInvComprasFormaPago(o);var a={accion:"U",carPagosCobrosFormaTO:o};this.formaPagoService.accionCarPagosForma(a,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.despuesDeAccionCarPagosForma=function(e){this.cargando=!1,e&&(this.accion===c.a.ACCION_CREAR?(e.formaPago.fpSecuencial=e.extraInfo.fpSecuencial,this.enviarAccion.emit({accion:c.a.ACCION_CREADO,formaPago:e.formaPago,tipo:"I"})):this.enviarAccion.emit({accion:c.a.ACCION_CREADO,formaPago:e.formaPago,tipo:"M"}))},e.prototype.setearValoresInvComprasFormaPago=function(e){e.usrEmpresa=c.a.KEY_EMPRESA_SELECT.trim(),e.usrCodigo=this.auth.getCodigoUser(),e.secCodigo=this.sectorSeleccionado.secCodigo},e.prototype.listarSectores=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.buscarConCuentas=function(e){var t=this;if(this.utilService.validarTeclasAgregarFila(e.keyCode)&&(!(this.formaPago.ctaCodigo===this.codigoCuenta&&this.formaPago.ctaCodigo&&this.codigoCuenta)&&(this.formaPago.ctaCodigo=""===this.formaPago.ctaCodigo?null:this.formaPago.ctaCodigo,this.formaPago.ctaCodigo=this.formaPago.ctaCodigo?this.formaPago.ctaCodigo.toUpperCase():null,this.formaPago.ctaCodigo))){var o={empresa:this.empresaSeleccionada.empCodigo,buscar:this.formaPago.ctaCodigo,ctaGrupo:null};e.srcElement.blur(),e.preventDefault();var a=this.modalService.open(ie.a,{size:"lg",backdrop:"static"});a.componentInstance.filtrosBusquedaPlanCuenta=o,a.componentInstance.tamanioEstructura=this.tamanioEstructura,a.result.then(function(e){t.codigoCuenta=e?e.cuentaCodigo:null,t.formaPago.ctaCodigo=e?e.cuentaCodigo:null,t.formaPago.fpDetalle=e?e.cuentaDetalle.trim().toUpperCase():null,t.focusSector()},function(e){t.focusCuenta()})}},e.prototype.focusCuenta=function(){var e=document.getElementById("cuenta");e&&e.focus()},e.prototype.focusSector=function(){var e=document.getElementById("sector");e&&e.focus()},e.prototype.validarCuenta=function(){this.codigoCuenta!==this.formaPago.ctaCodigo&&(this.codigoCuenta=null,this.formaPago.ctaCodigo=null)},e.prototype.cancelar=function(){var e=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmFormaPagoDatos))this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});else switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_CREAR:var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})});break;default:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})}},e.prototype.cambiarActivar=function(){this.activarFormulario=!this.activarFormulario,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:this.activarFormulario})},on([Object(i.Input)(),an("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),on([Object(i.Output)(),an("design:type",Object)],e.prototype,"enviarAccion",void 0),on([Object(i.Input)(),an("design:type",Object)],e.prototype,"parametros",void 0),on([Object(i.ViewChild)("frmFormaPagoDatos"),an("design:type",I.NgForm)],e.prototype,"frmFormaPagoDatos",void 0),e=on([Object(i.Component)({selector:"app-forma-pago-formulario-cartera",template:o("Cw8L"),styles:[o("i9k+")]}),an("design:paramtypes",[Qr.a,h.a,u.b,K.a,S.HotkeysService,T.b,en.a])],e)}(),nn=o("zOF7"),sn=o("r6CG"),cn=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ln=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},dn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},pn=function(){function e(e,t,o,a,r,n,s){this.utilService=e,this.toastr=t,this.auth=o,this.atajoService=a,this.modalService=r,this.sectorService=n,this.formaCobroService=s,this.enviarAccion=new i.EventEmitter,this.accion=null,this.isScreamMd=!0,this.cargando=!1,this.activarFormulario=!1,this.tituloForm="",this.constantes=c.a,this.codigoCuenta=null,this.tamanioEstructura=0,this.listaSectores=[],this.sectorSeleccionado=new Ga.a,this.formaCobro=new $r.a,this.listaResultado=[]}return e.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion=this.parametros.accion,this.tamanioEstructura=this.parametros.tamanioEstructura,this.listaSectores=this.parametros.listaSectores,this.listaResultado=this.parametros.listaResultado,this.activarFormulario=this.parametros.activar,this.operaciones(),this.extraerValoresIniciales(),this.generarAtajos()},e.prototype.generarAtajos=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarFormulario");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardar");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarFormaCobro");return e&&e.click(),!1}))},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmFormaCobroDatos?e.frmFormaCobroDatos.value:null))},60)},e.prototype.operaciones=function(){switch(this.accion){case c.a.ACCION_CREAR:this.tituloForm=c.a.TITULO_FORM_NUEVO_FORMA_COBRO,this.obtenerDatosFormaCobroNuevo();break;case c.a.ACCION_CONSULTAR:this.obtenerDatoFormaCobroConsulta(),this.tituloForm=c.a.TITULO_FORM_CONSULTAR_FORMA_COBRO;break;case c.a.ACCION_EDITAR:this.obtenerDatoFormaCobro(),this.tituloForm=c.a.TITULO_FORM_EDITAR_FORMA_COBRO}},e.prototype.obtenerDatosFormaCobroNuevo=function(){this.cargando=!0,this.formaCobro=new $r.a,this.sectorSeleccionado=this.listaSectores[0],this.tamanioEstructura=this.parametros.tamanioEstructura,this.cargando=!1},e.prototype.obtenerDatoFormaCobroConsulta=function(){this.cargando=!0,this.formaCobro=cn({},this.parametros.formaCobro),this.codigoCuenta=this.formaCobro.ctaCodigo,this.llenarCombo(),this.cargando=!1},e.prototype.obtenerDatoFormaCobro=function(){this.cargando=!0,this.formaCobro=cn({},this.parametros.formaCobro),this.codigoCuenta=this.formaCobro.ctaCodigo,this.llenarCombo(),this.cargando=!1},e.prototype.llenarCombo=function(){this.sectorSeleccionado=this.formaCobroService.seleccionarSector(this.listaSectores,this.formaCobro.secCodigo)},e.prototype.insertarFormaCobro=function(e){if(this.formaCobroService.verificarPermiso(c.a.ACCION_CREAR,this,!0)){this.cargando=!0;var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t){var o=JSON.parse(JSON.stringify(this.formaCobro));this.setearValoresInvComprasFormaCobro(o);var a={accion:"I",carPagosCobrosFormaTO:o};this.formaCobroService.accionCarCobrosForma(a,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.modificarFormaCobro=function(e){if(this.formaCobroService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t){var o=JSON.parse(JSON.stringify(this.formaCobro));this.setearValoresInvComprasFormaCobro(o);var a={accion:"M",carPagosCobrosFormaTO:o};this.formaCobroService.accionCarCobrosForma(a,this,c.a.KEY_EMPRESA_SELECT)}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.despuesDeAccionCarCobroForma=function(e){this.cargando=!1,e&&(this.accion===c.a.ACCION_CREAR?(e.formaCobro.fpSecuencial=e.extraInfo.fpSecuencial,this.enviarAccion.emit({accion:c.a.ACCION_CREADO,formaCobro:e.formaCobro,tipo:"I"})):this.enviarAccion.emit({accion:c.a.ACCION_CREADO,formaCobro:e.formaCobro,tipo:"M"}))},e.prototype.setearValoresInvComprasFormaCobro=function(e){e.usrEmpresa=c.a.KEY_EMPRESA_SELECT.trim(),e.usrCodigo=this.auth.getCodigoUser(),e.secCodigo=this.sectorSeleccionado.secCodigo},e.prototype.listarSectores=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e,this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.buscarConCuentas=function(e){var t=this;if(this.utilService.validarTeclasAgregarFila(e.keyCode)&&(!(this.formaCobro.ctaCodigo===this.codigoCuenta&&this.formaCobro.ctaCodigo&&this.codigoCuenta)&&(this.formaCobro.ctaCodigo=""===this.formaCobro.ctaCodigo?null:this.formaCobro.ctaCodigo,this.formaCobro.ctaCodigo=this.formaCobro.ctaCodigo?this.formaCobro.ctaCodigo.toUpperCase():null,this.formaCobro.ctaCodigo))){var o={empresa:this.empresaSeleccionada.empCodigo,buscar:this.formaCobro.ctaCodigo,ctaGrupo:null};e.srcElement.blur(),e.preventDefault();var a=this.modalService.open(ie.a,{size:"lg",backdrop:"static"});a.componentInstance.filtrosBusquedaPlanCuenta=o,a.componentInstance.tamanioEstructura=this.tamanioEstructura,a.result.then(function(e){t.codigoCuenta=e?e.cuentaCodigo:null,t.formaCobro.ctaCodigo=e?e.cuentaCodigo:null,t.formaCobro.fpDetalle=e?e.cuentaDetalle.trim().toUpperCase():null,t.focusSector()},function(e){t.focusCuenta()})}},e.prototype.focusCuenta=function(){var e=document.getElementById("cuenta");e&&e.focus()},e.prototype.focusSector=function(){var e=document.getElementById("sector");e&&e.focus()},e.prototype.validarCuenta=function(){this.codigoCuenta!==this.formaCobro.ctaCodigo&&(this.codigoCuenta=null,this.formaCobro.ctaCodigo=null)},e.prototype.cancelar=function(){var e=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmFormaCobroDatos))this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});else switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_CREAR:var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})});break;default:this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})}},e.prototype.cambiarActivar=function(){this.activarFormulario=!this.activarFormulario,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:this.activarFormulario})},ln([Object(i.Input)(),dn("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),ln([Object(i.Output)(),dn("design:type",Object)],e.prototype,"enviarAccion",void 0),ln([Object(i.Input)(),dn("design:type",Object)],e.prototype,"parametros",void 0),ln([Object(i.ViewChild)("frmFormaCobroDatos"),dn("design:type",I.NgForm)],e.prototype,"frmFormaCobroDatos",void 0),e=ln([Object(i.Component)({selector:"app-forma-cobro-formulario-cartera",template:o("AD5E"),styles:[o("hQId")]}),dn("design:paramtypes",[h.a,u.b,K.a,S.HotkeysService,T.b,en.a,sn.a])],e)}(),un=o("2sJq"),hn=o("Pdok"),mn=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Cn=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},vn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},An=function(){function e(e,t,o,a,i){this.activeModal=e,this.utilService=t,this.piscinaService=o,this.toastr=a,this.api=i,this.constantes=c.a,this.cargando=!1,this.conversion=0,this.bultos=1,this.mostrarModal=!1}return e.prototype.ngOnInit=function(){this.autonumericCambios=mn({},this.configAutonumeric),this.autonumericCambios.maximumValue="9999999999.99",this.isScreamMd=!(window.innerWidth<=576),this.itemCopia=JSON.parse(JSON.stringify(this.item)),"detCantidad"===this.tipo?this.buscarConversion():this.listarPiscinas()},e.prototype.buscarConversion=function(){var e=this;this.cargando=!0;var t={empresa:c.a.KEY_EMPRESA_SELECT,codigoProducto:this.item.proCodigoPrincipal};this.api.post("todocompuWS/inventarioWebController/buscarInvProductoDAOTO",t,c.a.KEY_EMPRESA_SELECT).then(function(t){if(t&&t.extraInfo){var o=new st(t.extraInfo);e.conversion=e.utilService.convertirNDecimale(o.proFactorCajaSacoBulto,6),e.mostrarModal=!0}else e.toastr.warning(t.operacionMensaje,c.a.TOAST_ADVERTENCIA),e.activeModal.dismiss();e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.aceptarDetalle=function(){this.activeModal.close(this.itemCopia)},e.prototype.aceptarCantidadBultos=function(){var e=this.conversion*this.bultos;this.itemCopia.detCantidad=e,this.activeModal.close(this.itemCopia)},e.prototype.listarPiscinas=function(){if(this.accion===c.a.ACCION_MAYORIZAR||this.accion===c.a.ACCION_CREAR)if(this.item.secCodigo)if(0===this.listadoPiscinaTO.length){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.item.secCodigo,mostrarInactivo:!1};this.piscinaService.listarPrdListaPiscinaTO(e,this,c.a.KEY_EMPRESA_SELECT)}else this.mostrarModal=!0;else this.mostrarModal=!0;else this.mostrarModal=!0},e.prototype.despuesDeListarPiscina=function(e){this.cargando=!1,this.itemCopia.listadoPiscinaTO=e,this.listadoPiscinaTO=e,this.mostrarModal=!0},Cn([Object(i.Input)(),vn("design:type",un.a)],e.prototype,"item",void 0),Cn([Object(i.Input)(),vn("design:type",hn.a)],e.prototype,"compra",void 0),Cn([Object(i.Input)(),vn("design:type",String)],e.prototype,"tipo",void 0),Cn([Object(i.Input)(),vn("design:type",Object)],e.prototype,"accion",void 0),Cn([Object(i.Input)(),vn("design:type",Object)],e.prototype,"configAutonumeric",void 0),Cn([Object(i.Input)(),vn("design:type",Array)],e.prototype,"listadoPiscinaTO",void 0),Cn([Object(i.Input)(),vn("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),e=Cn([Object(i.Component)({selector:"app-modal-compra-detalle",template:o("5F8H"),styles:[o("bctH")]}),vn("design:paramtypes",[T.a,h.a,it.a,u.b,p.a])],e)}(),fn=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},gn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},bn=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarSectorConHectareaje=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/getListaSectorConHectareaje",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarSectorConHectareaje(e.extraInfo):(t.despuesDeListarSectorConHectareaje([]),a.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.generarColumnas=function(){var e=[];return e.push({headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:30,minWidth:30},{headerName:c.a.TAG_NUMERO,field:"pisNumero",width:200,minWidth:200},{headerName:c.a.TAG_NOMBRE,field:"pisNombre",width:200,minWidth:200}),e},e.prototype.generarColumnasHectaraje=function(){var e=[];return e.push({headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:30,minWidth:30},{headerName:c.a.TAG_CODIGO,field:"bodCodigo",width:100,minWidth:100},{headerName:c.a.TAG_SECTOR,field:"secNombre",width:100,minWidth:100},{headerName:c.a.TAG_NOMBRE,field:"bodNombre",width:100,minWidth:100}),e},e.prototype.formatearA2Decimales=function(e){return new ri.DecimalPipe("en-US").transform(e.value,"1.2-2")},e=fn([Object(i.Injectable)({providedIn:"root"}),gn("design:paramtypes",[p.a,u.b,h.a])],e)}(),On=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Sn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},In=function(){function e(e,t,o,a,r,n){this.prorrateoComprasService=e,this.utilService=t,this.toastr=o,this.modalService=a,this.atajoService=r,this.piscinaService=n,this.accionProrrateo=new i.EventEmitter,this.constantes=c.a,this.listadoPiscinas=[],this.listaHectarajes=[],this.listaDetalle=[],this.cargando=!0,this.cantidad=0,this.codigoPrincipal="",this.codigoPrincipalCopia="",this.invProducto=new ke.a,this.prorrateoTipo="CP",this.screamXS=!0,this.columnDefsCC=[],this.columnDefsCP=[],this.components={},this.noData=c.a.MSJ_NO_HAY_DATOS,this.screamXS=window.innerWidth<c.a.WINDOW_WIDTH_XS,this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"9999999999999.99",minimumValue:"0"}}return e.prototype.ngOnInit=function(){this.empresaSeleccionada&&(this.inicializarAtajos(),this.listarHectarajes())},e.prototype.inicializarAtajos=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarProrrateo");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardarProrrateo");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarProrrateo");return e&&e.click(),!1}))},e.prototype.listarHectarajes=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fecha)};this.listaHectarajes=[],this.prorrateoComprasService.listarSectorConHectareaje(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectorConHectareaje=function(e){this.listaHectarajes=e,this.cargando=!1,this.iniciarAgGridHectaraje()},e.prototype.abrirModalProducto=function(e){var t=this,o=e.keyCode;if(this.utilService.validarKeyBuscar(o)){e.srcElement.blur(),e.preventDefault();var a=this.modalService.open(r.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.parametrosBusqueda={busqueda:this.codigoPrincipal,empresa:c.a.KEY_EMPRESA_SELECT,bodega:null},a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){e?(t.invProducto=new ke.a(e),t.codigoPrincipal=t.invProducto.proCodigoPrincipal,t.codigoPrincipalCopia=t.invProducto.proCodigoPrincipal,t.cantidad=t.utilService.quitarComasNumero(t.cantidad),t.establecerFocus("cantidad")):t.establecerFocus("producto")},function(){t.codigoPrincipal="",t.codigoPrincipalCopia="",t.establecerFocus("producto")})}},e.prototype.validarProducto=function(){return!(!this.codigoPrincipal||this.codigoPrincipal!==this.codigoPrincipalCopia)||(this.invProducto=new ke.a,!1)},e.prototype.establecerFocus=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.cancelar=function(){this.accionProrrateo.emit({accion:c.a.ACCION_CANCELAR})},e.prototype.cambiarEstadoActivar=function(){this.activar=!this.activar,this.accionProrrateo.emit({accion:c.a.ACCION_ACTIVAR,activar:this.activar})},e.prototype.iniciarAgGridHectaraje=function(){this.columnDefsCP=this.prorrateoComprasService.generarColumnasHectaraje(),this.rowSelection="multiple",this.context={componentParent:this},this.components={}},e.prototype.onGridReadyCP=function(e){this.gridApiCP=e.api,this.gridColumnApiCP=e.columnApi,this.redimensionarColumnas(),this.gridApiCP.sizeColumnsToFit(),this.establecerFocus("producto")},e.prototype.iniciarAgGrid=function(){this.columnDefsCC=this.prorrateoComprasService.generarColumnas(),this.rowSelection="multiple",this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApiCC=e.api,this.gridColumnApiCC=e.columnApi,this.redimensionarColumnas(),this.seleccionarPrimerFila(),this.gridApiCC.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApiCC){var e=this.gridColumnApiCC.getAllDisplayedColumns()[0];this.gridApiCC.setFocusedCell(0,e)}},e.prototype.redimensionarColumnas=function(){this.gridApiCC&&this.gridApiCC.sizeColumnsToFit(),this.gridApiCP&&this.gridApiCP.sizeColumnsToFit()},e.prototype.guardar=function(e){if(this.cargando=!0,this.utilService.establecerFormularioTocado(e)&&e&&e.valid)if(this.cantidad>0){var t=this.utilService.getAGSelectedData(this.gridApiCP);if("CP"===this.prorrateoTipo)t.length>1?(this.calculoCP(t),this.accionProrrateo.emit({accion:c.a.ACCION_CREADO,lista:this.listaDetalle})):(this.toastr.warning("Debe escoger m\xe1s de 1 elemento de la tabla de centro de producci\xf3n",c.a.TAG_AVISO),this.cargando=!1);else if(1===t.length){var o=this.utilService.getAGSelectedData(this.gridApiCC);o.length>1?(this.calculoCPCC(t[0],o),this.accionProrrateo.emit({accion:c.a.ACCION_CREADO,lista:this.listaDetalle})):(this.toastr.warning("Debe escoger m\xe1s de 1 elemento de la tabla de centro de costos",c.a.TAG_AVISO),this.cargando=!1)}else this.toastr.warning("Debe escoger 1 elemento de la tabla de centro de producci\xf3n",c.a.TAG_AVISO),this.cargando=!1}else this.toastr.warning("La cantidad debe ser mayor de 0",c.a.TAG_AVISO),this.cargando=!1;else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.onSelectionChanged=function(){var e=this.utilService.getAGSelectedData(this.gridApiCP);"CP"===this.prorrateoTipo?this.listadoPiscinas=[]:e&&1===e.length?this.listarPiscinas(e[0].secCodigo):(this.listadoPiscinas=[],this.toastr.warning("Debe seleccionar solo un CP",c.a.TAG_AVISO))},e.prototype.listarPiscinas=function(e){this.listadoPiscinas=[],this.cargando=!0;var t={empresa:c.a.KEY_EMPRESA_SELECT,sector:e,fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fecha)};this.piscinaService.listarPiscinaTOBusqueda(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPiscinaTOBusqueda=function(e){this.listadoPiscinas=e,this.cargando=!1,this.iniciarAgGrid()},e.prototype.calculoCP=function(e){var t=this;this.listaDetalle=[];var o=this.cantidad/e.length,a=o*e.length,i=this.cantidad-a,r=!1;e.forEach(function(e){var a=o;r||(a+=i,r=!0);var n=new un.a;(n=t.nuevoItem(e)).detCantidad=a/t.cantidad,n.detPrecio=t.cantidad,n.parcialProducto=a,t.listaDetalle.push(n)}),this.cargando=!1},e.prototype.calculoCPCC=function(e,t){var o=this;this.listaDetalle=[];var a,i=0,r=0,n=!1;t.forEach(function(e){i+=e.pisHectareaje}),t.forEach(function(e){var t=e.pisHectareaje/i*o.cantidad;r+=t}),a=this.cantidad+-1*r,t.forEach(function(t){var s=t.pisHectareaje/i,c=s*o.cantidad;r+=c,""!==t.pisNumero||n||(c+=a,n=!0);var l=o.nuevoItem(e);l.pisNumero=t.pisNumero,l.detCantidad=s,l.detPrecio=o.cantidad,l.parcialProducto=c,o.listaDetalle.push(l)}),this.cargando=!1},e.prototype.nuevoItem=function(e){var t=new un.a;return t.nombreProducto=this.invProducto.proNombre,t.bodCodigo=e.bodCodigo,t.bodCodigoCopia=e.bodCodigo,t.proCodigoPrincipal=this.invProducto.proCodigoPrincipal,t.proCodigoPrincipalCopia=this.invProducto.proCodigoPrincipal,t.medidaDetalle=this.invProducto.detalleMedida,t.proEstadoIva=this.invProducto.proGravaIva,t.secCodigo=e.secCodigo,t},On([Object(i.Input)(),Sn("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),On([Object(i.Input)(),Sn("design:type",Object)],e.prototype,"fecha",void 0),On([Object(i.Input)(),Sn("design:type",Object)],e.prototype,"activar",void 0),On([Object(i.Output)(),Sn("design:type",Object)],e.prototype,"accionProrrateo",void 0),e=On([Object(i.Component)({selector:"app-prorrateo-compras",template:o("CdWa"),styles:[o("RHL/")]}),Sn("design:paramtypes",[bn,h.a,u.b,T.b,S.HotkeysService,it.a])],e)}(),En=function(){function e(e){this.reembSecuencial=null,this.reembDocumentoTipo=null,this.reembDocumentoNumero=null,this.reembFechaemision=null,this.reembAutorizacion=null,this.reembBaseimponible=0,this.reembBaseimpgrav=0,this.reembBasenograiva=0,this.reembMontoice=0,this.reembMontoiva=0,this.provEmpresa=null,this.provCodigo=null,this.compEmpresa=null,this.compPeriodo=null,this.compMotivo=null,this.compNumero=null,this.auxDocTipo_Abreviatura=null,this.auxProvRazonSocial=null,this.auxProvRUC=null,this.provCodigoCopia=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.reembSecuencial=e.reembSecuencial?e.reembSecuencial:this.reembSecuencial,this.reembDocumentoTipo=e.reembDocumentoTipo?e.reembDocumentoTipo:this.reembDocumentoTipo,this.reembDocumentoNumero=e.reembDocumentoNumero?e.reembDocumentoNumero:this.reembDocumentoNumero,this.reembFechaemision=e.reembFechaemision?e.reembFechaemision:this.reembFechaemision,this.reembAutorizacion=e.reembAutorizacion?e.reembAutorizacion:this.reembAutorizacion,this.reembBaseimponible=e.reembBaseimponible?e.reembBaseimponible:this.reembBaseimponible,this.reembBaseimpgrav=e.reembBaseimpgrav?e.reembBaseimpgrav:this.reembBaseimpgrav,this.reembBasenograiva=e.reembBasenograiva?e.reembBasenograiva:this.reembBasenograiva,this.provEmpresa=e.provEmpresa?e.provEmpresa:this.provEmpresa,this.provCodigo=e.provCodigo?e.provCodigo:this.provCodigo,this.compEmpresa=e.compEmpresa?e.compEmpresa:this.compEmpresa,this.compEmpresa=e.compEmpresa?e.compEmpresa:this.compEmpresa,this.compPeriodo=e.compPeriodo?e.compPeriodo:this.compPeriodo,this.compMotivo=e.compMotivo?e.compMotivo:this.compMotivo,this.compNumero=e.compNumero?e.compNumero:this.compNumero,this.auxDocTipo_Abreviatura=e.auxDocTipo_Abreviatura?e.auxDocTipo_Abreviatura:this.auxDocTipo_Abreviatura,this.auxProvRazonSocial=e.auxProvRazonSocial?e.auxProvRazonSocial:this.auxProvRazonSocial,this.auxProvRUC=e.auxProvRUC?e.auxProvRUC:this.auxProvRUC},e}(),Rn=o("bioR"),Tn=o("gLxJ"),_n=o("BQ37"),Pn=o("jHBj"),Nn=o("t/E2"),yn=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Dn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ln=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarAnexoFormaPagoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getAnexoFormaPagoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarAnexoFormaPagoTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarAnxConcepto=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getListaAnxConceptoComboTO2",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarAnxConcepto(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.comprobarRetencionAutorizadaProcesamiento=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/comprobarRetencionAutorizadaProcesamiento",e,o).then(function(e){e&&e.extraInfo?t.despuesDeComprobarRetencionAutorizadaProcesamiento(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.validarSecuenciaPermitida=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/validarSecuenciaPermitida",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarSecuenciaPermitida(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerAutorizacionNCND=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/obtenerAutorizacionNCND",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerAutorizacionNCND(!1):(t.despuesDeObtenerAutorizacionNCND(!0),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerUltimaAutorizacionFactura=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getAnxUltimaAutorizacionTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerUltimaAutorizacionFactura(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)})},e.prototype.obtenerAutorizacionRetencion=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getNumeroAutorizacion",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerAutorizacionRetencion(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)})},e.prototype.obtenerDatosBasicosRetencionNueva=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerDatosBasicosRetencionNueva",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosBasicosRetencionNueva(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)})},e.prototype.obtenerDatosBasicosRetencionCreada=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerDatosBasicosRetencionCreada",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosBasicosRetencionCreada(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)})},e.prototype.consultarRetencionCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/consultarRetencionCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeConsultarRetencionCompra(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1,t.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}))})},e.prototype.validarFechaDiasHabiles=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/isFechaDentroDeDiasHabiles",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarFechaDiasHabiles(e.extraInfo):(t.despuesDeValidarFechaDiasHabiles(!1),a.toastr.warning("Fecha incorrecta","Aviso"),t.cargando=!1)})},e.prototype.validarFechasDeRetencionYComprasMismoMes=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/validarFechasDeRetencionYComprasMismoMes",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarFechasDeRetencionYComprasMismoMes(e.extraInfo):(t.despuesDeValidarFechasDeRetencionYComprasMismoMes(!1),a.toastr.warning("La fecha de la COMPRA y la fecha de RETENCI\xd3N tienen que estar en el mismo mes Calendario, por favor, corrija...","Aviso"),t.cargando=!1)})},e.prototype.validarRetencionCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/validarRetencionCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarRetencionCompra():(a.utilService.generarSwal(c.a.TAG_RETENCION,c.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)})},e.prototype.validarRetencionDesdeCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/validarRetencionDesdeCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarRetencionDesdeCompra():(a.utilService.generarSwal(c.a.TAG_RETENCION,c.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)})},e.prototype.enviarSRIRetencionEnProcesamiento=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/enviarSRIRetencionEnProcesamiento",e,o).then(function(e){e&&e.extraInfo?t.despuesDeEnviarSRIRetencionEnProcesamiento(e.operacionMensaje):(a.utilService.generarSwal(c.a.TAG_RETENCION,c.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)})},e.prototype.validarFechaRetencion=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/validarFechaRetencion",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarFechaRetencion(e.operacionMensaje):(a.utilService.generarSwal(c.a.TAG_COMPRA,c.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)})},e.prototype.obtenerAutonumeric=function(){return{decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"99999999999.99",minimumValue:"0"}},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case c.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case c.a.ACCION_CONSULTAR:a=!0;break;case c.a.ACCION_MAYORIZAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruMayorizarCompras;break;case c.a.ACCION_DESMAYORIZAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruDesmayorizarCompras;break;case c.a.ACCION_ANULAR:case c.a.ACCION_RESTAURAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruAnularCompras}return o&&!a&&this.toastr.warning(c.a.ERROR_403_TEXTO,c.a.ERROR_403_TITULO),a},e.prototype.generarColumnasDetalle=function(e){var t=this,o=e.accion===c.a.ACCION_CREAR||e.accion===c.a.ACCION_CREADO||e.accion===c.a.ACCION_MAYORIZAR&&!e.comprobarRetencionAutorizadaProcesamiento,a=[];return a.push({headerName:c.a.TAG_CONCEPTO,field:"detConcepto",width:100,minWidth:100,editable:o,cellClassRules:{"cell-with-errors":function(e){return!t.validarConcepto(e.data)}},suppressKeyboardEvent:function(o){switch(o.event.keyCode){case c.a.KEYCODE_ENTER:case c.a.KEYCODE_TAB:if(e.buscarConcepto(o),o.editing)return!0;break;case c.a.KEYCODE_DOWN:case c.a.KEYCODE_UP:if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraDetalleTO);break;default:return!0}},valueGetter:function(e){return e.data.detConcepto},cellEditorFramework:Jo.a,cellEditorParams:{name:"detConcepto",maxlength:50,inputClass:"text-uppercase",placeholder:""}},{headerName:c.a.TAG_NOMBRE,field:"nombreConcepto",width:100,minWidth:100},{headerName:c.a.TAG_PORCENTAJE,field:"detPorcentaje",cellClass:"text-right",valueFormatter:Mn,width:100,minWidth:100},{headerName:c.a.TAG_BASE_0,field:"detBase0",cellClass:"text-right",width:100,minWidth:100,editable:o,valueFormatter:Mn,valueGetter:function(e){return e.node.rowPinned?"":e.data.detBase0},cellEditorFramework:zo.a,cellEditorParams:{name:"detBase0",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraDetalleTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}},{headerName:c.a.TAG_BASE_IMPONIBLE,field:"detBaseImponible",cellClass:"text-right",width:100,minWidth:100,editable:o,valueFormatter:Mn,valueGetter:function(e){return e.node.rowPinned?"":e.data.detBaseImponible},cellEditorFramework:zo.a,cellEditorParams:{name:"detBaseImponible",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraDetalleTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}},{headerName:c.a.TAG_BASE_NG,field:"detBaseNoObjetoIva",cellClass:"text-right",width:100,minWidth:100,editable:o,valueFormatter:Mn,valueGetter:function(e){return e.node.rowPinned?"":e.data.detBaseNoObjetoIva},cellEditorFramework:zo.a,cellEditorParams:{name:"detBaseNoObjetoIva",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraDetalleTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}},{headerName:c.a.TAG_VALOR,field:"detValorRetenido",cellClass:"text-right",valueFormatter:Mn,width:150,minWidth:150}),o&&a.push(this.utilService.getColumnaOpciones()),a},e.prototype.generarColumnasReembolsoDetalle=function(e){var t=this,o=e.accion===c.a.ACCION_CREAR||e.accion===c.a.ACCION_CREADO||e.accion===c.a.ACCION_MAYORIZAR,a=[];return a.push({headerName:c.a.TAG_PROVEEDOR,field:"provCodigo",width:100,minWidth:100,editable:o,cellClass:"",cellClassRules:{"cell-with-errors":function(e){return!t.validarProveedor(e.data)}},suppressKeyboardEvent:function(o){switch(o.event.keyCode){case c.a.KEYCODE_ENTER:case c.a.KEYCODE_TAB:if(e.buscarProveedor(o),o.editing)return!0;break;case c.a.KEYCODE_DOWN:case c.a.KEYCODE_UP:if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraReembolsoTO);break;default:return!0}},valueGetter:function(e){return e.data.provCodigo},cellEditorFramework:Jo.a,cellEditorParams:{name:"provCodigo",maxlength:50,inputClass:"text-uppercase",placeholder:""}},{headerName:c.a.TAG_NOMBRE,field:"auxProvRazonSocial",width:100,minWidth:200},{headerName:c.a.TAG_DOCUMENTO,field:"reembDocumentoTipo",width:140,minWidth:140,suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraReembolsoTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClass:"",cellClassRules:{"cell-with-errors":function(e){return!e.data.reembDocumentoTipo}},editable:o,cellEditorFramework:Tn.a,cellEditorParams:function(t){return{value:e.listaDocumentosReembolso?t.data.reembDocumentoTipo:null,name:"tcCodigo",atributo:"tcCodigo",obligatorio:!0,listValues:e.listaDocumentosReembolso?e.listaDocumentosReembolso:[],fieldsShow:["tcDescripcion"]}},valueFormatter:function(t){var o=e.listaDocumentosReembolso;if(o&&o.length>0){var a;return(a=o.find(function(e){return e.tcCodigo==t.data.reembDocumentoTipo}))?a.tcDescripcion:t.data.reembDocumentoTipo}}},{headerName:c.a.TAG_NUMERO,field:"reembDocumentoNumero",width:180,minWidth:120,cellClass:"",editable:o,cellEditorFramework:Nn.a,cellEditorParams:function(){return{name:"reembDocumentoNumero",obligatorio:!0}},cellClassRules:{"cell-with-errors":function(e){return!t.validarNumeroDocumento(e.data)}}},{headerName:c.a.TAG_FECHA,field:"reembFechaemision",suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraReembolsoTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClass:"",cellClassRules:{"cell-with-errors":function(o){return!o.data.reembFechaemision||!t.validarFecha(o.data,e.fechaActual)}},width:120,minWidth:120,editable:o,cellEditorFramework:_n.a,cellEditorParams:{name:"fecha",minDate:new Date,conGuiones:!0}},{headerName:c.a.TAG_AUTORIZACION,field:"reembAutorizacion",width:150,minWidth:150,cellClass:"",editable:o,cellClassRules:{"cell-with-errors":function(e){return!t.validarNumeroAutorizacion(e.data)}},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraReembolsoTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:Pn.a,cellEditorParams:{name:"reembAutorizacion",maxlength:49,inputClass:"text-uppercase",placeholder:""}},{headerName:c.a.TAG_BASE_0,field:"reembBaseimponible",cellClass:"text-right ",width:100,minWidth:100,editable:o,valueFormatter:Mn,valueGetter:function(e){return e.node.rowPinned?"":e.data.reembBaseimponible},cellEditorFramework:zo.a,cellEditorParams:{name:"reembBaseimponible",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraReembolsoTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}},{headerName:c.a.TAG_BASE_IMPONIBLE,field:"reembBaseimpgrav",cellClass:"text-right ",width:100,minWidth:100,editable:o,valueFormatter:Mn,valueGetter:function(e){return e.node.rowPinned?"":e.data.reembBaseimpgrav},cellEditorFramework:zo.a,cellEditorParams:{name:"reembBaseimpgrav",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraReembolsoTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}},{headerName:c.a.TAG_BASE_NG,field:"reembBasenograiva",cellClass:"text-right ",width:100,minWidth:100,editable:o,valueFormatter:Mn,valueGetter:function(e){return e.node.rowPinned?"":e.data.reembBasenograiva},cellEditorFramework:zo.a,cellEditorParams:{name:"reembBasenograiva",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraReembolsoTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}},{headerName:c.a.TAG_MONTO_ICE,field:"reembMontoice",cellClass:"text-right ",width:100,minWidth:100,editable:o,valueFormatter:Mn,valueGetter:function(e){return e.node.rowPinned?"":e.data.reembMontoice},cellEditorFramework:zo.a,cellEditorParams:{name:"reembMontoice",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraReembolsoTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}},{headerName:c.a.TAG_MONTO_IVA,field:"reembMontoiva",cellClass:"text-right ",width:100,minWidth:100,editable:o,valueFormatter:Mn,valueGetter:function(e){return e.node.rowPinned?"":e.data.reembMontoiva},cellEditorFramework:zo.a,cellEditorParams:{name:"reembMontoiva",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listAnxCompraReembolsoTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)}}),o&&a.push(this.utilService.getColumnaOpciones("reembolso")),a},e.prototype.validarFecha=function(e,t){if(e.reembFechaemision&&t){var o=Ut(e.reembFechaemision,"DD/MM/YYYY").toDate(),a=Ut(t,"DD/MM/YYYY").toDate();return!(o.getTime()<a.getTime())}return!1},e.prototype.validarNumeroDocumento=function(e){if(e.reembDocumentoNumero){var t=e.reembDocumentoNumero.substring(3,0),o=e.reembDocumentoNumero.substring(7,4),a=e.reembDocumentoNumero.substring(17,8);return"000"!==t&&"000"!==o&&"000000000"!==a}return!1},e.prototype.validarNumeroAutorizacion=function(e){return!(!e.reembAutorizacion||10!==e.reembAutorizacion.length&&37!==e.reembAutorizacion.length&&49!==e.reembAutorizacion.length)},e.prototype.validarConcepto=function(e){return!!e.detConcepto},e.prototype.validarProveedor=function(e){return!!e.provCodigo},e.prototype.focusedProveedor=function(e,t){t&&(t.setFocusedCell(e,"provCodigo"),t.startEditingCell({rowIndex:e,colKey:"provCodigo"}),t.ensureIndexVisible(e+1))},e.prototype.focusedConcepto=function(e,t){t&&(t.setFocusedCell(e,"detConcepto"),t.startEditingCell({rowIndex:e,colKey:"detConcepto"}),t.ensureIndexVisible(e+1))},e.prototype.base0FocusAndEditingCell=function(e,t){t&&(t.setFocusedCell(e,"detBase0"),t.startEditingCell({rowIndex:e,colKey:"detBase0"}),t.ensureIndexVisible(e+1))},e.prototype.base0ReembolsoFocusAndEditingCell=function(e,t){t&&(t.setFocusedCell(e,"reembBaseimponible"),t.startEditingCell({rowIndex:e,colKey:"reembBaseimponible"}),t.ensureIndexVisible(e+1))},e=yn([Object(i.Injectable)({providedIn:"root"}),Dn("design:paramtypes",[p.a,u.b,h.a])],e)}();function Mn(e){return new ri.DecimalPipe("en-US").transform(e.value,"1.2-2")}var xn=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Fn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},wn=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarAnxSustentoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getListaAnxSustentoComboTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarAnxSustentoTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e=xn([Object(i.Injectable)({providedIn:"root"}),Fn("design:paramtypes",[p.a,u.b,h.a])],e)}(),Gn=function(){function e(e){this.fpCodigo=null,this.fpDetalle=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.fpCodigo=e.fpCodigo?e.fpCodigo:this.fpCodigo,this.fpDetalle=e.fpDetalle?e.fpDetalle:this.fpDetalle},e}(),jn=o("MHMZ"),Un=function(){function e(e){this.conCodigo="",this.conConcepto="",this.conPorcentaje=0,this.conIngresaPorcentaje="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.conCodigo=e.conCodigo?e.conCodigo:this.conCodigo,this.conConcepto=e.conConcepto?e.conConcepto:this.conConcepto,this.conPorcentaje=e.conPorcentaje?e.conPorcentaje:this.conPorcentaje,this.conIngresaPorcentaje=e.conIngresaPorcentaje?e.conIngresaPorcentaje:this.conIngresaPorcentaje,this.fechaInicio=e.fechaInicio?e.fechaInicio:this.fechaInicio,this.fechaFin=e.fechaFin?e.fechaFin:this.fechaFin},e}(),Bn=function(){function e(e){this.detSecuencial=null,this.detConcepto=null,this.detBase0=0,this.detBaseImponible=0,this.detBaseNoObjetoIva=0,this.detPorcentaje=0,this.detValorRetenido=0,this.detOrden=0,this.compEmpresa=null,this.compPeriodo=null,this.compMotivo=null,this.compNumero=null,this.divSecuencial=0,this.divFechaPago=null,this.divIrAsociado=0,this.divAnioUtilidades=null,this.nombreConcepto=null,this.conCodigoCopia=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencial=e.detSecuencial?e.detSecuencial:this.detSecuencial,this.detConcepto=e.detConcepto?e.detConcepto:this.detConcepto,this.detBase0=e.detBase0?e.detBase0:this.detBase0,this.detBaseImponible=e.detBaseImponible?e.detBaseImponible:this.detBaseImponible,this.detBaseNoObjetoIva=e.detBaseNoObjetoIva?e.detBaseNoObjetoIva:this.detBaseNoObjetoIva,this.detPorcentaje=e.detPorcentaje?e.detPorcentaje:this.detPorcentaje,this.detValorRetenido=e.detValorRetenido?e.detValorRetenido:this.detValorRetenido,this.detOrden=e.detOrden?e.detOrden:this.detOrden,this.compEmpresa=e.compEmpresa?e.compEmpresa:this.compEmpresa,this.compPeriodo=e.compPeriodo?e.compPeriodo:this.compPeriodo,this.compMotivo=e.compMotivo?e.compMotivo:this.compMotivo,this.compNumero=e.compNumero?e.compNumero:this.compNumero,this.divSecuencial=e.divSecuencial?e.divSecuencial:this.divSecuencial,this.divFechaPago=e.divFechaPago?e.divFechaPago:this.divFechaPago,this.divIrAsociado=e.divIrAsociado?e.divIrAsociado:this.divIrAsociado,this.divAnioUtilidades=e.divAnioUtilidades?e.divAnioUtilidades:this.divAnioUtilidades,this.nombreConcepto=e.nombreConcepto?e.nombreConcepto:this.nombreConcepto,this.conCodigoCopia=e.conCodigoCopia?e.conCodigoCopia:this.conCodigoCopia},e}(),Vn=function(){function e(e){this.detSecuencial=0,this.detConcepto=null,this.detBase0=0,this.detBaseImponible=0,this.detBaseNoObjetoIva=0,this.detPorcentaje=0,this.detValorRetenido=0,this.detOrden=0,this.compEmpresa=null,this.compPeriodo=null,this.compMotivo=null,this.compNumero=null,this.divSecuencial=0,this.divFechaPago=null,this.divIrAsociado=0,this.divAnioUtilidades=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencial=e.detSecuencial?e.detSecuencial:this.detSecuencial,this.detConcepto=e.detConcepto?e.detConcepto:this.detConcepto,this.detBase0=e.detBase0?e.detBase0:this.detBase0,this.detBaseImponible=e.detBaseImponible?e.detBaseImponible:this.detBaseImponible,this.detBaseNoObjetoIva=e.detBaseNoObjetoIva?e.detBaseNoObjetoIva:this.detBaseNoObjetoIva,this.detPorcentaje=e.detPorcentaje?e.detPorcentaje:this.detPorcentaje,this.detValorRetenido=e.detValorRetenido?e.detValorRetenido:this.detValorRetenido,this.detOrden=e.detOrden?e.detOrden:this.detOrden,this.compEmpresa=e.compEmpresa?e.compEmpresa:this.compEmpresa,this.compPeriodo=e.compPeriodo?e.compPeriodo:this.compPeriodo,this.compMotivo=e.compMotivo?e.compMotivo:this.compMotivo,this.compNumero=e.compNumero?e.compNumero:this.compNumero,this.divSecuencial=e.divSecuencial?e.divSecuencial:this.divSecuencial,this.divFechaPago=e.divFechaPago?e.divFechaPago:this.divFechaPago,this.divIrAsociado=e.divIrAsociado?e.divIrAsociado:this.divIrAsociado,this.divAnioUtilidades=e.divAnioUtilidades?e.divAnioUtilidades:this.divAnioUtilidades},e}(),kn=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Wn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},zn=function(){function e(e,t,o,a,r,n,s,l,d){this.filasService=e,this.modalService=t,this.authService=o,this.utilService=a,this.sustentoService=r,this.toastr=n,this.atajoService=s,this.appSistemaService=l,this.retencionComprasService=d,this.enviarAccion=new i.EventEmitter,this.mostrarRetencionCompras=new i.EventEmitter,this.comprobarRetencionAutorizadaProcesamiento=!1,this.fechaActual=null,this.invCompraTO=new hn.a,this.listInvComprasDetalleTO=[],this.listaDocumentosReembolso=[],this.listAnxCompraReembolsoTO=[],this.listAnxCompraReembolsoTOCopia=[],this.listAnxCompraReembolsoTOEliminar=[],this.anxCompraReembolsoTOSeleccionado=new En,this.listAnxCompraDetalleRetencionTO=[],this.listAnxCompraDetalleTO=[],this.listAnxCompraDetalleTOEliminar=[],this.listaFormaPago=[],this.formaPagoSeleccionadaInicial=null,this.formaPagoSeleccionada=null,this.formaPagoSeleccionadaEliminar=null,this.listadoSustentos=new Array,this.listadoBienes=c.a.LISTA_PORCENTAJE_IVA_BIENES,this.listadoServicios=c.a.LISTA_PORCENTAJE_IVA_SERVICIOS,this.listadoServicios100=c.a.LISTA_PORCENTAJE_IVA_SERVICIOS_100,this.anxCompraTO=new Rn.a,this.totalIva=0,this.constantes=null,this.accion=null,this.cargando=!1,this.isRequeridoNumeroAuto=!0,this.fechaRetencion=new Date,this.isFechaDentroDeDiasHabiles=!0,this.isFechaMismoMes=!0,this.numeroDocValido000=!0,this.listaDocumentos=[],this.numeroDocValidoComplemento000=!0,this.numeroAutorizacionValidaLongitud=!0,this.numeroRepetido=!1,this.screamXS=!0,this.columnDefs=[],this.columnDefsReembolso=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.rowSelection="single",this.isCollapsed=!1,this.estilos={},this.filasTiempo=new D.a,this.es={},Ut.locale("es"),this.constantes=c.a,this.configAutonumeric=this.retencionComprasService.obtenerAutonumeric(),this.screamXS=window.innerWidth<c.a.WINDOW_WIDTH_XS,this.configuracionAutoNumeric=this.retencionComprasService.obtenerAutonumeric(),this.es=this.utilService.setLocaleDate()}return e.prototype.ngOnInit=function(){this.parametrosRetencion&&(this.obtenerFechaActual(),this.operacionesRetencion(),this.inicializarAtajos())},e.prototype.obtenerFechaActual=function(){this.cargando=!0,this.appSistemaService.obtenerFechaActual(this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerFechaActual=function(e){this.cargando=!1,this.fechaActual=this.utilService.formatoStringSinZonaHorariaDDMMYYYY(e)},e.prototype.operacionesRetencion=function(){switch(this.accion=this.parametrosRetencion.accion,this.accion){case c.a.ACCION_CREADO:this.invCompraTO=this.parametrosRetencion.invCompraTO?this.parametrosRetencion.invCompraTO:new hn.a,this.anxCompraTO=this.parametrosRetencion.anxCompraTO?this.parametrosRetencion.anxCompraTO:new Rn.a,this.anxCompraTO.compMontoiva=this.invCompraTO.compMontoIva,this.fechaRetencion=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.anxCompraTO.compRetencionFechaEmision),this.totalIva=this.invCompraTO.compMontoIva,this.formaPagoSeleccionada=this.parametrosRetencion.anxFormaPagoTO?this.parametrosRetencion.anxFormaPagoTO:null,this.listAnxCompraDetalleRetencionTO=this.parametrosRetencion.listAnxCompraDetalleRetencionTO?this.parametrosRetencion.listAnxCompraDetalleRetencionTO:[],this.listAnxCompraReembolsoTO=this.parametrosRetencion.listAnxCompraReembolsoTO?this.parametrosRetencion.listAnxCompraReembolsoTO:[],this.obtenerDatosBasicosRetencionCreada();break;case c.a.ACCION_CREAR:this.fechaRetencion=this.fechaCompra,this.invCompraTO=this.parametrosRetencion.invCompraTO?this.parametrosRetencion.invCompraTO:new hn.a,this.anxCompraTO=this.parametrosRetencion.anxCompraTO?this.parametrosRetencion.anxCompraTO:new Rn.a,this.anxCompraTO.compMontoiva=this.invCompraTO.compMontoIva,this.listInvComprasDetalleTO=this.parametrosRetencion.listInvComprasDetalleTO?this.parametrosRetencion.listInvComprasDetalleTO:[],this.totalIva=this.invCompraTO.compMontoIva,this.obtenerDatosBasicosRetencionNueva();break;case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CONSULTAR:this.consultarRetencion()}},e.prototype.inicializarAtajos=function(){this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarRetencion");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarCompra");return e&&e.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnCancelarRetencion");return e&&e.click(),!1}))},e.prototype.nuevoItem=function(){return new Bn},e.prototype.nuevoItemReembolso=function(){return new En},e.prototype.listarSustentos=function(){this.cargando=!0;this.listadoSustentos=[],this.sustentoService.listarAnxSustentoTO({},this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarAnxSustentoTO=function(e){this.listadoSustentos=e,this.cargando=!1},e.prototype.listarFormaPago=function(){this.cargando=!0;this.listaFormaPago=[],this.retencionComprasService.listarAnexoFormaPagoTO({},this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarAnexoFormaPagoTO=function(e){this.listaFormaPago=e,this.cargando=!1},e.prototype.obtenerDatosBasicosRetencionCreada=function(){var e=JSON.parse(JSON.stringify(this.invCompraTO));e.compFecha=this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaCompra),this.cargando=!0;var t={invComprasTO:e,empresa:this.empresaSeleccionada.empCodigo};this.retencionComprasService.obtenerDatosBasicosRetencionCreada(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosBasicosRetencionCreada=function(e){this.listaDocumentos=e.listaDocumentos,this.listaFormaPago=e.listAnxFormaPagoTO,this.listadoSustentos=e.listAnxSustentoComboTO,this.listaDocumentosReembolso=e.listaDocumentosReembolso,this.cargando=!1,this.iniciarAgGrid(),this.invCompraTO.compDocumentoTipo&&this.invCompraTO.compDocumentoTipo===c.a.CODIGO_REEMBOLSO&&this.iniciarAgGridReembolso(),this.mostrarRetencionCompras.emit(!0)},e.prototype.obtenerDatosBasicosRetencionNueva=function(){this.cargando=!0;var e={compDocumentoNumero:this.invCompraTO.compDocumentoNumero,compDocumentoTipo:this.invCompraTO.compDocumentoTipo,compFecha:this.invCompraTO.compFecha,fechaRetencion:this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaRetencion))),provCodigo:this.invCompraTO.provCodigo,empresa:this.empresaSeleccionada.empCodigo,usuarioCodigo:this.authService.getCodigoUser(),listaInvComprasDetalleTO:this.listInvComprasDetalleTO};this.retencionComprasService.obtenerDatosBasicosRetencionNueva(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosBasicosRetencionNueva=function(e){if(e.anxNumeracionLineaTO){var t=e.secuenciaNumeroFactura;t+=1,t=this.utilService.completarCeros9(t);var o=e.parteEstatica+t;this.anxCompraTO.compRetencionAutorizacion=e.anxNumeracionLineaTO?e.anxNumeracionLineaTO.numeroAutorizacion:null,this.anxCompraTO.compRetencionNumero=o}else this.anxCompraTO.compRetencionAutorizacion=null,this.anxCompraTO.compRetencionNumero=null;this.listaDocumentos=e.listaDocumentos,this.listaFormaPago=e.listAnxFormaPagoTO,this.listadoSustentos=e.listAnxSustentoComboTO,this.cargando=!1,this.listAnxCompraDetalleRetencionTO=e.listAnxCompraDetalleRetencionTO,0===this.listAnxCompraDetalleRetencionTO.length&&(this.listAnxCompraDetalleRetencionTO=this.parametrosRetencion.listAnxCompraDetalleRetencionTO?this.parametrosRetencion.listAnxCompraDetalleRetencionTO:[],0===this.listAnxCompraDetalleRetencionTO.length&&this.listAnxCompraDetalleRetencionTO.push(this.nuevoItem())),this.iniciarAgGrid(),this.invCompraTO.compDocumentoTipo&&this.invCompraTO.compDocumentoTipo===c.a.CODIGO_REEMBOLSO&&(this.listaDocumentosReembolso=e.listaDocumentosReembolso,this.listAnxCompraReembolsoTO=this.parametrosRetencion.listAnxCompraReembolsoTO?this.parametrosRetencion.listAnxCompraReembolsoTO:[],0===this.listAnxCompraReembolsoTO.length&&this.listAnxCompraReembolsoTO.push(this.nuevoItemReembolso()),this.iniciarAgGridReembolso()),this.mostrarRetencionCompras.emit(!0)},e.prototype.consultarRetencion=function(){this.cargando=!0;var e=this.parametrosRetencion.parametrosBusqueda;this.retencionComprasService.consultarRetencionCompra(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeConsultarRetencionCompra=function(e){e.anxCompraTO?(this.formaPagoSeleccionada=e.formaPagoRetencion.length>0?new Gn({fpCodigo:e.formaPagoRetencion[0].fpCodigo}):null,this.formaPagoSeleccionadaInicial=JSON.parse(JSON.stringify(this.formaPagoSeleccionada)),this.anxCompraTO=e.anxCompraTO,this.totalIva=this.anxCompraTO.compMontoiva,this.invCompraTO=e.invComprasTO,this.fechaRetencion=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.anxCompraTO.compRetencionFechaEmision),this.listaFormaPago=e.listAnxFormaPagoTO,this.listadoSustentos=e.listAnxSustentoComboTO,this.listAnxCompraDetalleRetencionTO=e.listAnxCompraDetalleRetencionTO,this.listaDocumentos=e.listaDocumentos,this.cargando=!1,this.iniciarAgGrid(),this.invCompraTO.compDocumentoTipo&&this.invCompraTO.compDocumentoTipo===c.a.CODIGO_REEMBOLSO&&(this.listaDocumentosReembolso=e.listaDocumentosReembolso,this.listAnxCompraReembolsoTO=e.listAnxCompraReembolsoTO,this.iniciarAgGridReembolso()),this.mostrarRetencionCompras.emit(!0)):(this.cargando=!1,this.toastr.warning("No tiene retenci\xf3n","Aviso"),this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR}))},e.prototype.inicializarFormaPago=function(e,t){if(e&&t)return e.fpCodigo===t.fpCodigo},e.prototype.cancelar=function(){this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})},e.prototype.cambiarEstadoActivar=function(){this.activar=!this.activar,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,activar:this.activar})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.retencionComprasService.generarColumnasDetalle(this),this.columnDefsSelected=this.columnDefs.slice(),this.context={componentParent:this},this.frameworkComponents={toolTip:pe.a,numericCell:zo.a,pinnedCell:Ko.a},this.components={}},e.prototype.iniciarAgGridReembolso=function(){this.columnDefsReembolso=this.retencionComprasService.generarColumnasReembolsoDetalle(this),this.context={componentParent:this}},e.prototype.onGridReadyReembolso=function(e){this.gridApiReembolso=e.api,this.gridColumnApiReembolso=e.columnApi,this.actualizarFilas(),this.redimensionarColumnas(),this.seleccionarPrimerFilaReembolso(),this.inicializarListadoReembolso()},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimensionarColumnas(),this.seleccionarPrimerFila(),this.calcularTotal()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.seleccionarPrimerFilaReembolso=function(){if(this.gridApiReembolso){var e=this.gridColumnApiReembolso.getAllDisplayedColumns()[0];this.gridApiReembolso.setFocusedCell(0,e)}},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit(),this.gridApiReembolso&&this.gridApiReembolso.sizeColumnsToFit()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.refreshGridReembolso=function(){var e=this;this.gridApiReembolso&&this.gridApiReembolso.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.gridApi&&a&&a.getId()&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}),this.detalleSeleccionado=t?t.data:null},e.prototype.filaFocusedReembolso=function(e){var t=this.gridApiReembolso?this.gridApiReembolso.getRowNode(e.rowIndex):null,o=this.gridApiReembolso?this.gridApiReembolso.getFocusedCell():null,a=o?o.column:null;this.gridApiReembolso&&a&&a.getId()&&this.gridApiReembolso.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}),this.anxCompraReembolsoTOSeleccionado=t?t.data:null},e.prototype.onresize=function(){this.screamXS=window.innerWidth<c.a.WINDOW_WIDTH_XS},e.prototype.mostrarContextMenu=function(e,t,o){this.detalleSeleccionado=e,this.generarOpcionesDetalle(t),this.menuOpciones.show(o),o.stopPropagation()},e.prototype.mostrarContextMenuReembolso=function(e,t,o){this.anxCompraReembolsoTOSeleccionado=e,this.generarOpcionesDetalleReembolso(t),this.menuOpcionesReembolso.show(o),o.stopPropagation()},e.prototype.mostrarOpciones=function(e,t,o){var a;"reembolso"===o?(a=this.gridApi?this.gridApiReembolso.getFocusedCell():null)&&this.mostrarContextMenuReembolso(t,a.rowIndex,e):(a=this.gridApi?this.gridApi.getFocusedCell():null)&&this.mostrarContextMenu(t,a.rowIndex,e)},e.prototype.generarOpcionesDetalleReembolso=function(e){var t=this,o=this.accion===c.a.ACCION_MAYORIZAR||this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_CREADO,a=this.accion===c.a.ACCION_MAYORIZAR||this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_CREADO;this.opcionesReembolso=[{label:c.a.ACCION_AGREGAR_FILA_ARRIBA,icon:c.a.ICON_FLECHA_ARRIBA,disabled:!o,command:function(){return o?t.agregarFilaReembolso("up",e):null}},{label:c.a.ACCION_AGREGAR_FILA_ABAJO,icon:c.a.ICON_FLECHA_ABAJO,disabled:!o,command:function(){return o?t.agregarFilaReembolso("down",e):null}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!a,command:function(){return a?t.eliminarFilaReembolso(e):null}}]},e.prototype.generarOpcionesDetalle=function(e){var t=this,o=this.accion===c.a.ACCION_MAYORIZAR||this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_CREADO,a=this.accion===c.a.ACCION_MAYORIZAR||this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_CREADO;this.opciones=[{label:c.a.ACCION_AGREGAR_FILA_ARRIBA,icon:c.a.ICON_FLECHA_ARRIBA,disabled:!o,command:function(){return o?t.agregarFila("up",e):null}},{label:c.a.ACCION_AGREGAR_FILA_ABAJO,icon:c.a.ICON_FLECHA_ABAJO,disabled:!o,command:function(){return o?t.agregarFila("down",e):null}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!a,command:function(){return a?t.eliminarFila(e):null}}]},e.prototype.agregarFilaReembolso=function(e,t,o){var a=t;a>=0&&this.agregarFilaByIndexReembolso(a,e,o)},e.prototype.agregarFila=function(e,t,o){var a=t;a>=0&&this.agregarFilaByIndex(a,e,o)},e.prototype.agregarFilaByIndex=function(e,t,o){this.detalleSeleccionado=this.listAnxCompraDetalleRetencionTO[e];var a="up"===t?e:e+1,i=this.nuevoItem();this.listAnxCompraDetalleRetencionTO.splice(a,0,i),this.gridApi&&this.gridApi.updateRowData({add:[i],addIndex:a}),o?this.retencionComprasService.base0FocusAndEditingCell(e,this.gridApi):this.retencionComprasService.focusedConcepto(a,this.gridApi),this.refreshGridReembolso()},e.prototype.agregarFilaByIndexReembolso=function(e,t,o){this.anxCompraReembolsoTOSeleccionado=this.listAnxCompraReembolsoTO[e];var a="up"===t?e:e+1,i=this.nuevoItemReembolso();this.listAnxCompraReembolsoTO.splice(a,0,i),this.gridApiReembolso&&this.gridApiReembolso.updateRowData({add:[i],addIndex:a}),o?this.retencionComprasService.base0ReembolsoFocusAndEditingCell(e,this.gridApiReembolso):this.retencionComprasService.focusedProveedor(a,this.gridApiReembolso),this.refreshGridReembolso()},e.prototype.eliminarFila=function(e){if(this.listAnxCompraDetalleRetencionTO.length>1){if(this.detalleSeleccionado.detSecuencial&&0!=this.detalleSeleccionado.detSecuencial){var t=JSON.parse(JSON.stringify(this.detalleSeleccionado)),o=new Vn;o.divSecuencial=t.detSecuencial,o.detConcepto=t.detConcepto,o.compEmpresa=this.empresaSeleccionada.empCodigo,this.listAnxCompraDetalleTOEliminar.push(o)}this.listAnxCompraDetalleRetencionTO.splice(e,1),this.gridApi&&this.gridApi.updateRowData({remove:[this.detalleSeleccionado],addIndex:e}),this.calcularTotal(),this.refreshGrid()}},e.prototype.eliminarFilaReembolso=function(e){if(this.listAnxCompraReembolsoTO.length>1){if(this.anxCompraReembolsoTOSeleccionado.reembSecuencial&&0!=this.anxCompraReembolsoTOSeleccionado.reembSecuencial){var t=JSON.parse(JSON.stringify(this.anxCompraReembolsoTOSeleccionado));delete t.provCodigoCopia,this.listAnxCompraReembolsoTOEliminar.push(t)}this.listAnxCompraReembolsoTO.splice(e,1),this.gridApiReembolso&&this.gridApiReembolso.updateRowData({remove:[this.anxCompraReembolsoTOSeleccionado],addIndex:e}),this.refreshGridReembolso()}},e.prototype.buscarConcepto=function(e){var t=e.event.keyCode,o=e.event.target.value,a=e.data.conCodigo;if(this.utilService.validarKeyBuscar(t))if(e.data.conCodigo=o,o===a&&o&&a)c.a.KEYCODE_TAB,this.retencionComprasService.base0FocusAndEditingCell(e.node.rowIndex,this.gridApi);else if(o=o?o.toUpperCase():null){var i={empresa:this.empresaSeleccionada.empCodigo,busqueda:o,categoria:null,fechaRetencion:this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaRetencion)))};this.abrirModalConcepto(i,e)}else c.a.KEYCODE_TAB,this.retencionComprasService.base0FocusAndEditingCell(e.node.rowIndex,this.gridApi)},e.prototype.abrirModalConcepto=function(e,t){var o=this;if(this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_CREADO||this.accion===c.a.ACCION_MAYORIZAR){var a=this.modalService.open(jn.a,{size:"lg",backdrop:"static",windowClass:"miSize"});a.componentInstance.parametrosBusqueda=e,a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){if(e){var a=new Un(e);t.event.target.value=a.conCodigo,t.data.detConcepto=a.conCodigo,t.data.conCodigoCopia=a.conCodigo,t.data.nombreConcepto=a.conConcepto,t.data.detPorcentaje=a.conPorcentaje,o.refreshGrid(),o.calcularValorRetenido(t.data),o.retencionComprasService.base0FocusAndEditingCell(t.node.rowIndex,o.gridApi)}else o.retencionComprasService.focusedConcepto(t.node.rowIndex,o.gridApi)},function(){t.data.conCodigo="",o.validarConcepto(t.data),o.retencionComprasService.base0FocusAndEditingCell(t.node.rowIndex,o.gridApi)})}},e.prototype.validarConcepto=function(e){return e.detConcepto===e.conCodigoCopia||(this.resetearConcepto(e),!1)},e.prototype.resetearConcepto=function(e){e.conCodigoCopia=null,e.detConcepto=null,e.nombreConcepto=null,this.refreshGrid()},e.prototype.alCambiarValorDeCelda=function(e){this.accion!==c.a.ACCION_CREAR&&this.accion!==c.a.ACCION_CREADO&&this.accion!==c.a.ACCION_MAYORIZAR||("detConcepto"===e.colDef.field&&this.validarConcepto(e.data),"detBase0"!==e.colDef.field&&"detBaseImponible"!==e.colDef.field&&"detBaseNoObjetoIva"!==e.colDef.field||this.calcularValorRetenido(e.data))},e.prototype.validarFechasDeRetencionYComprasMismoMes=function(){if(this.fechaRetencion){this.isFechaMismoMes=!1,this.cargando=!0;var e={fechaCompra:this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaCompra))),fechaRetencion:this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaRetencion)))};this.retencionComprasService.validarFechasDeRetencionYComprasMismoMes(e,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeValidarFechasDeRetencionYComprasMismoMes=function(e){this.cargando=!1,this.isFechaMismoMes=e},e.prototype.validarFechaDiasHabiles=function(){if(this.fechaRetencion){this.isFechaDentroDeDiasHabiles=!1,this.cargando=!0;var e={fechaCompra:this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaCompra))),fechaRetencion:this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaRetencion)))};this.retencionComprasService.validarFechaDiasHabiles(e,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeValidarFechaDiasHabiles=function(e){this.cargando=!1,this.isFechaDentroDeDiasHabiles=e},e.prototype.validarNumeroDocumento=function(){if(this.anxCompraTO.compRetencionNumero&&this.utilService.buscar_EnString(this.anxCompraTO.compRetencionNumero)&&(this.anxCompraTO.compRetencionNumero=null),this.anxCompraTO.compRetencionNumero=""===this.anxCompraTO.compRetencionNumero?null:this.anxCompraTO.compRetencionNumero,this.anxCompraTO.compRetencionNumero){this.numeroDocValido000=!1;var e=this.anxCompraTO.compRetencionNumero.substring(3,0),t=this.anxCompraTO.compRetencionNumero.substring(7,4),o=this.anxCompraTO.compRetencionNumero.substring(17,8);if("000"!==e&&"000"!==t&&"000000000"!==o){this.numeroDocValido000=!0,this.cargando=!0;var a={empresa:this.empresaSeleccionada.empCodigo,numeroRetencion:this.anxCompraTO.compRetencionNumero,numeroComprobante:c.a.CODIGO_COMPROBANTE_RETENCION,fechaVencimiento:this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaRetencion)))};this.retencionComprasService.obtenerAutorizacionRetencion(a,this,c.a.KEY_EMPRESA_SELECT)}}else this.anxCompraTO.compRetencionAutorizacion=null},e.prototype.despuesDeObtenerAutorizacionRetencion=function(e){this.anxCompraTO.compRetencionAutorizacion=e.numeroAutorizacion,this.cargando=!1},e.prototype.calcularValorRetenido=function(e){var t=this.utilService.convertirDecimaleFloat(e.detBase0)+this.utilService.convertirDecimaleFloat(e.detBaseImponible)+this.utilService.convertirDecimaleFloat(e.detBaseNoObjetoIva);e.detValorRetenido=t*(this.utilService.convertirDecimaleFloat(e.detPorcentaje)/100),this.refreshGrid(),this.calcularTotal()},e.prototype.calcularTotal=function(){var e=this,t=0,o=0,a=0,i=0;this.gridApi.forEachNode(function(r){var n=r.data;t+=e.utilService.convertirDecimaleFloat(n.detValorRetenido),o+=e.utilService.convertirDecimaleFloat(n.detBase0),a+=e.utilService.convertirDecimaleFloat(n.detBaseImponible),i+=e.utilService.convertirDecimaleFloat(n.detBaseNoObjetoIva)}),this.isRequeridoNumeroAuto=0!==t,this.anxCompraTO.valorRetencion=t,this.anxCompraTO.compBase0=o,this.anxCompraTO.compBaseimponible=a,this.anxCompraTO.compBasenoobjetoiva=i},e.prototype.calcularPorcRetBienes=function(){this.anxCompraTO.compValorbienes=this.utilService.convertirDecimaleFloat(this.anxCompraTO.compBaseivabienes)*(this.utilService.convertirDecimaleFloat(this.anxCompraTO.compPorcentajebienes)/100)},e.prototype.calcularPorcRetServicios=function(){this.anxCompraTO.compValorservicios=this.utilService.convertirDecimaleFloat(this.anxCompraTO.compBaseivaservicios)*(this.utilService.convertirDecimaleFloat(this.anxCompraTO.compPorcentajeservicios)/100)},e.prototype.calcularPorcRetServiciosProfesional=function(){this.anxCompraTO.compValorserviciosprofesionales=this.utilService.convertirDecimaleFloat(this.anxCompraTO.compBaseivaserviciosprofesionales)*(this.utilService.convertirDecimaleFloat(this.anxCompraTO.compPorcentajeserviciosprofesionales)/100)},e.prototype.guardarRetencion=function(e){this.cargando=!0,this.utilService.establecerFormularioTocado(e)&&e&&e.valid?this.sePuedeGuardar()&&this.validarRetencionCompra():(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1)},e.prototype.validarRetencionCompra=function(){this.invCompraTO.empCodigo=this.empresaSeleccionada.empCodigo,this.invCompraTO.compValorRetenido=this.anxCompraTO.valorRetencion,this.anxCompraTO.empCodigo=this.empresaSeleccionada.empCodigo,this.anxCompraTO.compRetencionFechaEmision=this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaRetencion))),this.anxCompraTO.compRetencionNumero=""===this.anxCompraTO.compRetencionNumero?null:this.anxCompraTO.compRetencionNumero,this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,usuario:this.authService.getCodigoUser(),invComprasTO:this.invCompraTO,anxCompraTO:this.anxCompraTO};this.retencionComprasService.validarRetencionCompra(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeValidarRetencionCompra=function(){this.cargando=!1,this.validarFechasRetencionCompras()},e.prototype.validarFechasRetencionCompras=function(){this.cargando=!0;var e={fechaCompra:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaCompra),fechaRetencion:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaRetencion),fechaEmision:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaAutorizacion),fechaCaduca:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaCaduca),compAutorizacion:this.anxCompraTO.compAutorizacion,isCompRetencionAsumida:this.invCompraTO.compRetencionAsumida};this.retencionComprasService.validarFechaRetencion(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeValidarFechaRetencion=function(){this.cargando=!1,this.validarRetencionDesdeCompra()},e.prototype.validarRetencionDesdeCompra=function(){this.anxCompraTO.compRetencionFechaEmision=this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaRetencion))),this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,invComprasTO:this.invCompraTO,anxCompraTO:this.anxCompraTO};this.retencionComprasService.validarRetencionDesdeCompra(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeValidarRetencionDesdeCompra=function(){this.cargando=!1,this.formaPagoSeleccionadaInicial&&this.formaPagoSeleccionadaInicial.fpCodigo!==this.formaPagoSeleccionada.fpCodigo&&(this.formaPagoSeleccionadaEliminar=this.formaPagoSeleccionadaInicial);var e={listAnxCompraDetalleRetencionTO:this.listAnxCompraDetalleRetencionTO,listAnxCompraDetalleTO:this.listAnxCompraDetalleTO,listAnxCompraDetalleTOEliminar:this.listAnxCompraDetalleTOEliminar,listAnxCompraReembolsoTO:this.listAnxCompraReembolsoTOCopia,listAnxCompraReembolsoTOEliminar:this.listAnxCompraReembolsoTOEliminar,anxCompraTO:this.anxCompraTO,anxFormaPagoTO:this.formaPagoSeleccionada,anxFormaPagoTOEliminar:this.formaPagoSeleccionadaEliminar,compRetencionAsumida:this.invCompraTO.compRetencionAsumida};this.enviarAccion.emit({accion:c.a.ACCION_CREADO,parametros:e})},e.prototype.sePuedeGuardar=function(){var e=!0;return this.isFechaDentroDeDiasHabiles&&this.isFechaMismoMes&&this.numeroDocValido000&&this.numeroDocValidoComplemento000&&!this.numeroRepetido&&this.numeroAutorizacionValidaLongitud&&this.validarYFormatearDetalleAntesEnviar()||(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1,e=!1),e},e.prototype.validarYFormatearDetalleAntesEnviar=function(){this.listAnxCompraDetalleTO=[];var e,t=JSON.parse(JSON.stringify(this.listAnxCompraDetalleRetencionTO));e=JSON.parse(JSON.stringify(this.listAnxCompraReembolsoTO));for(var o=0;o<t.length;o++){var a=t[o],i=new Vn(a);if(!a.detConcepto)return!1;i.compEmpresa=this.empresaSeleccionada.empCodigo,i.detOrden=o,this.listAnxCompraDetalleTO.push(i)}for(o=0;o<e.length;o++){var r=e[o],n=new En(r);if(!(n.provCodigo&&n.reembDocumentoTipo&&n.reembDocumentoNumero&&n.reembFechaemision&&n.reembAutorizacion))return console.log(o),!1;if(n.reembDocumentoNumero){var s=n.reembDocumentoNumero.substring(3,0),c=n.reembDocumentoNumero.substring(7,4),l=n.reembDocumentoNumero.substring(17,8);if("000"===s||"000"==c&&"000000000"===l)return!1}if(n.reembAutorizacion&&10!==n.reembAutorizacion.length&&37!==n.reembAutorizacion.length&&49!==n.reembAutorizacion.length)return!1;n.auxDocTipo_Abreviatura=n.reembDocumentoTipo,n.provEmpresa=this.empresaSeleccionada.empCodigo,n.compEmpresa=this.empresaSeleccionada.empCodigo,delete n.provCodigoCopia,this.listAnxCompraReembolsoTOCopia.push(n)}return!0},e.prototype.validarDocumentoComplemento=function(){if(this.anxCompraTO.compModificadoDocumentoNumero&&this.utilService.buscar_EnString(this.anxCompraTO.compModificadoDocumentoNumero)&&(this.anxCompraTO.compModificadoDocumentoNumero=null),this.anxCompraTO.compModificadoDocumentoNumero){this.numeroDocValidoComplemento000=!1;var e=this.anxCompraTO.compModificadoDocumentoNumero.substring(3,0),t=this.anxCompraTO.compModificadoDocumentoNumero.substring(7,4),o=this.anxCompraTO.compModificadoDocumentoNumero.substring(17,8);if("000"!==e&&"000"!==t&&"000000000"!==o){this.numeroDocValidoComplemento000=!0,this.cargando=!0;var a={empCodigo:this.empresaSeleccionada.empCodigo,provCodigo:this.invCompraTO.provCodigo,codTipoComprobante:this.anxCompraTO.compModificadoDocumentoTipo,numComplemento:this.anxCompraTO.compModificadoDocumentoNumero};this.retencionComprasService.obtenerAutorizacionNCND(a,this,c.a.KEY_EMPRESA_SELECT)}}},e.prototype.despuesDeObtenerAutorizacionNCND=function(e){this.numeroRepetido=e,this.cargando=!1},e.prototype.validarNumeroAutorizacionComplemento=function(){this.anxCompraTO.compModificadoAutorizacion&&(this.numeroAutorizacionValidaLongitud=!1,10!==this.anxCompraTO.compModificadoAutorizacion.length&&37!==this.anxCompraTO.compModificadoAutorizacion.length&&49!==this.anxCompraTO.compModificadoAutorizacion.length||(this.numeroAutorizacionValidaLongitud=!0))},e.prototype.inicializarListadoReembolso=function(){this.gridApiReembolso.forEachNode(function(e){var t=e.data;t.provCodigoCopia=t.provCodigo})},e.prototype.buscarProveedor=function(e){var t=e.event.keyCode,o=e.event.target.value,a=e.data.provCodigo;if(this.utilService.validarKeyBuscar(t))if(e.data.provCodigo=o,o===a&&o&&a)c.a.KEYCODE_TAB,this.retencionComprasService.base0ReembolsoFocusAndEditingCell(e.node.rowIndex,this.gridApi);else if(o=o?o.toUpperCase():null){var i={empresa:c.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:o};this.abrirModalProveedor(i,e)}else c.a.KEYCODE_TAB,this.retencionComprasService.base0ReembolsoFocusAndEditingCell(e.node.rowIndex,this.gridApi)},e.prototype.abrirModalProveedor=function(e,t){var o=this,a=this.modalService.open(n.a,{size:"lg",backdrop:"static"});a.componentInstance.parametrosBusqueda=e,a.result.then(function(e){if(e){var a=new Uo.a(e);t.event.target.value=a.provCodigo,t.data.provCodigo=a.provCodigo,t.data.provCodigoCopia=a.provCodigo,t.data.auxProvRazonSocial=a.provRazonSocial,o.refreshGridReembolso(),o.retencionComprasService.base0ReembolsoFocusAndEditingCell(t.node.rowIndex,o.gridApi)}else o.retencionComprasService.focusedProveedor(t.node.rowIndex,o.gridApi)},function(){t.data.provCodigo="",o.validarProveedor(t.data),o.retencionComprasService.base0ReembolsoFocusAndEditingCell(t.node.rowIndex,o.gridApi)})},e.prototype.validarProveedor=function(e){return e.provCodigo===e.provCodigoCopia||(this.resetearProveedor(e),!1)},e.prototype.resetearProveedor=function(e){e.provCodigo=null,e.provCodigoCopia=null,e.auxProvRazonSocial=null,this.refreshGridReembolso()},e.prototype.alCambiarValorDeCeldaReembolso=function(e){this.accion!==c.a.ACCION_CREAR&&this.accion!==c.a.ACCION_CREADO&&this.accion!==c.a.ACCION_MAYORIZAR||"provCodigo"===e.colDef.field&&this.validarProveedor(e.data)},kn([Object(i.ViewChild)("menuOpciones"),Wn("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),kn([Object(i.ViewChild)("menuOpcionesReembolso"),Wn("design:type",N.ContextMenu)],e.prototype,"menuOpcionesReembolso",void 0),kn([Object(i.Input)(),Wn("design:type",Object)],e.prototype,"empresaSeleccionada",void 0),kn([Object(i.Input)(),Wn("design:type",Object)],e.prototype,"parametrosRetencion",void 0),kn([Object(i.Input)(),Wn("design:type",Object)],e.prototype,"activar",void 0),kn([Object(i.Input)(),Wn("design:type",Object)],e.prototype,"fechaCompra",void 0),kn([Object(i.Input)(),Wn("design:type",Object)],e.prototype,"fechaAutorizacion",void 0),kn([Object(i.Input)(),Wn("design:type",Object)],e.prototype,"fechaCaduca",void 0),kn([Object(i.Output)(),Wn("design:type",Object)],e.prototype,"enviarAccion",void 0),kn([Object(i.Output)(),Wn("design:type",Object)],e.prototype,"mostrarRetencionCompras",void 0),kn([Object(i.Input)(),Wn("design:type",Boolean)],e.prototype,"comprobarRetencionAutorizadaProcesamiento",void 0),kn([Object(i.ViewChild)("frmRetencion"),Wn("design:type",I.NgForm)],e.prototype,"frmRetencion",void 0),kn([Object(i.HostListener)("window:resize",["$event"]),Wn("design:type",Function),Wn("design:paramtypes",[]),Wn("design:returntype",void 0)],e.prototype,"onresize",null),e=kn([Object(i.Component)({selector:"app-retencion-compras",template:o("2NJ/"),styles:[o("MeKl")]}),Wn("design:paramtypes",[L.a,T.b,K.a,h.a,wn,u.b,S.HotkeysService,qt.a,Ln])],e)}(),Jn=o("Mwk2"),Kn=o("9s7+"),Yn=o("awBf"),qn=o("GGLN"),Hn=o("kPjv"),Xn=o("2ngb"),Zn=o("cyv6"),$n=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Qn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},es=function(){function e(e,t,o,a,r,n,s,l,d,p,u,h,m,C,v,A){this.utilService=e,this.archivoService=t,this.authService=o,this.toastr=a,this.modalService=r,this.atajoService=n,this.filasService=s,this.comprasService=l,this.piscinaService=d,this.appSistemaService=p,this.sistemaService=u,this.contableService=h,this.formaPagoService=m,this.comprasFormularioService=C,this.motivoComprasService=v,this.retencionComprasService=A,this.enviarAccion=new i.EventEmitter,this.listInvComprasDetalleTO=[],this.listInvComprasDetalleTOEliminar=[],this.listInvComprasDetalleTOCopia=[],this.invCompraTO=new hn.a,this.listadoPeriodos=[],this.constantes=null,this.es={},this.filasTiempo=new D.a,this.tituloForm="",this.accion=null,this.activar=!1,this.cargando=!1,this.tipoEmpresa="",this.mostrarFormularioCompras=!1,this.importarXmlEstado=!1,this.minimoCompra=0,this.maximoCompra=99999999999999,this.comprobarRetencionAutorizadaProcesamiento=!1,this.fechaEmision=new Date,this.fechaAutorizacion=new Date,this.fechaCaduca=new Date,this.fechaVencimiento=new Date,this.fechaAutorizacionValida=!0,this.fechaCaducaValida=!0,this.periodoAbierto=!0,this.fechaInicioMesGuardado=null,this.fechaFinMesGuardado=null,this.listadoMotivos=[],this.formaPagoSeleccionada=null,this.listaFormaPago=[],this.chequeRepetido=!1,this.proveedor=new Uo.a,this.parametrosFormulario=null,this.mostrarAccionesProveedor=!1,this.listaDocumentos=[],this.mostrarAccionesContabilidad=!1,this.parametrosContabilidad={},this.mostrarBtnContabilizar=!0,this.mostrarProrrateoCompras=!1,this.mostrarRetencionCompras=!1,this.parametrosRetencion=null,this.listAnxCompraDetalleRetencionTO=[],this.listAnxCompraDetalleTO=[],this.listAnxCompraDetalleTOCopia=[],this.listAnxCompraDetalleTOEliminar=[],this.listAnxCompraReembolsoTO=[],this.listAnxCompraReembolsoTOEliminar=[],this.formaPagoRetencion=null,this.formaPagoRetencionEliminar=null,this.numeroCreado=null,this.numeroRepetido=!1,this.numeroDocValido000=!0,this.numeroAutorizacionValidaLongitud=!0,this.retencionFueAceptada=!1,this.estamosEnVistaImagenes=!1,this.listaInvListadoPagosTO=[],this.mostrarFormularioPagos=!1,this.parametrosFormularioPagos=null,this.ordenCompra={},this.screamXS=!0,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.rowSelection="single",this.isCollapsed=!1,this.estilos={},this.validarNumeroAutorizacionRetencion=function(){this.anxCompraTO.compAutorizacion&&(this.numeroAutorizacionValidaLongitud=!1,10!==this.anxCompraTO.compAutorizacion.length&&37!==this.anxCompraTO.compAutorizacion.length&&49!==this.anxCompraTO.compAutorizacion.length||(this.numeroAutorizacionValidaLongitud=!0))},Ut.locale("es"),this.constantes=c.a,this.screamXS=window.innerWidth<c.a.WINDOW_WIDTH_XS,this.es=this.utilService.setLocaleDate(),this.configAutonumeric=this.comprasService.obtenerAutonumeric()}return e.prototype.ngOnInit=function(){this.data&&(this.inicializarAtajos(),this.tipoEmpresa=this.empresaSeleccionada.parametros[0]?this.empresaSeleccionada.parametros[0].parActividad:"",this.operaciones())},e.prototype.inicializarTipos=function(e,t){if(e&&t)return e.ctaCodigo===t.ctaCodigo},e.prototype.inicializarMotivos=function(e,t){if(e&&t)return e.cmCodigo===t.cmCodigo},e.prototype.inicializarFormaPago=function(){var e=this;this.formaPagoSeleccionada=this.invCompraTO.compFormaPago?this.listaFormaPago.find(function(t){return t.fpDetalle&&(t.fpDetalle.split("|")[1]?t.fpDetalle.split("|")[1].trim():t.fpDetalle)===e.invCompraTO.compFormaPago}):null},e.prototype.inicializarMotivoSeleccionado=function(){var e=this;this.motivoSeleccionado=this.listadoMotivos.find(function(t){return t.cmCodigo===e.motivoSeleccionado.cmCodigo})},e.prototype.obtenerFechaActual=function(){this.cargando=!0,this.appSistemaService.obtenerFechaActual(this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerFechaActual=function(e){this.cargando=!1,this.fechaFinMesGuardado=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.fechaEmision=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.fechaVencimiento=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.fechaCaduca=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.fechaAutorizacion=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.accion===c.a.ACCION_CREAR?this.data.fechaEmision&&this.data.fechaAutorizacion&&this.data.fechaCaduca?(this.fechaEmision=this.data.fechaEmision,this.fechaAutorizacion=this.data.fechaAutorizacion,this.fechaCaduca=this.data.fechaCaduca,this.periodoAbierto=!0):this.validarPeriodoAbierto():this.setearFechasDespuesConsultar(),this.getIVA()},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(){if(e.data){var t=document.getElementById("btnImprimirCompra");t&&t.click()}return!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){if(e.data){var t=document.getElementById("btnActivarCompra");t&&t.click()}return!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){if(e.data){var t=document.getElementById("btnCancelarCompra");t&&t.click()}return!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){if(e.data){var t=document.getElementById("btnGuardarCompra");t&&t.click()}return!1}))},e.prototype.cerrarFormulario=function(e){this.enviarAccion.emit({accion:c.a.ACCION_CREADO,invCompraTO:e,proveedor:this.proveedor})},e.prototype.cancelar=function(){var e=this,t={accion:c.a.ACCION_CANCELAR};switch(this.accion){case c.a.ACCION_MAYORIZAR:case c.a.ACCION_CREAR:var o={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o&&e.enviarAccion.emit(t)});break;default:this.enviarAccion.emit(t)}},e.prototype.cambiarEstadoActivar=function(){this.activar=!this.activar,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,activar:this.activar})},e.prototype.operaciones=function(){switch(this.filasTiempo.iniciarContador(),this.accion=this.data.accion,this.ordenCompra=this.data.ordenCompra,this.data.accion){case c.a.ACCION_CREAR:this.comprasService.verificarPermiso(c.a.ACCION_CREAR,this,!0)?(this.cargando=!0,this.tituloForm=c.a.TITULO_FORM_NUEVA_COMPRA,this.nuevaCompra()):this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});break;case c.a.ACCION_CONSULTAR:this.tituloForm=c.a.TITULO_FORM_CONSULTAR_COMPRA,this.consultarCompra();break;case c.a.ACCION_MAYORIZAR:this.comprasService.verificarPermiso(c.a.ACCION_MAYORIZAR,this,!0)?(this.tituloForm=c.a.TITULO_FORM_MAYORIZAR_COMPRA,this.consultarCompra()):this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});break;case c.a.ACCION_ANULAR:this.comprasService.verificarPermiso(c.a.ACCION_ANULAR,this,!0)?(this.tituloForm=c.a.TITULO_FORM_ANULAR_COMPRA,this.consultarCompra()):this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});break;case c.a.ACCION_RESTAURAR:this.comprasService.verificarPermiso(c.a.ACCION_RESTAURAR,this,!0)?this.consultarCompra():this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})}},e.prototype.nuevaCompra=function(){this.cargando=!0,this.invCompraTO=this.data.invCompraTO?this.data.invCompraTO:new hn.a,this.anxCompraTO=this.data.anxCompraTO?this.data.anxCompraTO:new Rn.a,this.proveedor=this.data.proveedor?this.data.proveedor:new Uo.a,this.invCompraTO.provCodigo=this.proveedor.provCodigo,this.importarXmlEstado=this.invCompraTO.compElectronica,this.minimoCompra=this.data.minimoCompra?this.data.minimoCompra:0,this.maximoCompra=this.data.maximoCompra?this.data.maximoCompra:0,this.obtenerFechaActual();var e={empresa:this.empresaSeleccionada.empCodigo,fecha:this.utilService.convertirFechaStringYYYYMMDD(this.fechaEmision),provTipoId:this.proveedor.provTipoId};this.comprasService.obtenerDatosBasicosCompraNueva(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosBasicosCompraNueva=function(e){if(e){if(this.listaFormaPago=e.listaFormaPago,this.listadoMotivos=e.listaInvComprasMotivoTO,this.listaDocumentos=e.listaDocumentos,this.motivoSeleccionado=this.data&&this.data.motivoSeleccionado?this.data.motivoSeleccionado:null,this.data.listInvComprasDetalleTO&&this.data.listInvComprasDetalleTO.length>0)this.listInvComprasDetalleTO=this.data.listInvComprasDetalleTO;else{var t=new un.a;this.listInvComprasDetalleTO.push(t)}this.iniciarAgGrid(),this.enviarAccion.emit({accion:c.a.ACCION_MOSTRAR_FORMULARIO,vistaFormulario:!0}),this.mostrarFormularioCompras=!0}else this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});this.cargando=!1},e.prototype.consultarCompra=function(){this.data&&this.data.parametroBusqueda&&(this.cargando=!0,this.comprasService.consultarCompra(this.data.parametroBusqueda,this,c.a.KEY_EMPRESA_SELECT))},e.prototype.despuesDeConsultarCompra=function(e){this.cargando=!1,e?(this.invCompraTO=new hn.a(e.invComprasTO),this.invCompraCopia=this.invCompraTO,this.anxCompraTO=new Rn.a(e.anxCompraTO),this.proveedor=new Uo.a(e.proveedor),this.importarXmlEstado=this.invCompraTO.compElectronica,this.numeroCreado=this.invCompraTO.compDocumentoNumero,this.motivoSeleccionado=new Kn.a({cmCodigo:this.invCompraTO.compMotivo,tipCodigo:this.invCompraTO.contTipo}),this.setearListasDespuesConsultar(e),this.obtenerFechaActual(),this.inicializarMotivoSeleccionado(),this.inicializarFormaPago(),this.setearOrdenCompra(),this.setearMinimoMaximo(e),this.seterNumero99999(),this.setearValorcomprobarRetencionAutorizadaProcesamiento(e),this.iniciarAgGrid(),this.enviarAccion.emit({accion:c.a.ACCION_MOSTRAR_FORMULARIO,vistaFormulario:!0}),this.mostrarFormularioCompras=!0):this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})},e.prototype.setearValorcomprobarRetencionAutorizadaProcesamiento=function(e){this.accion===c.a.ACCION_MAYORIZAR&&e.comprobarRetencionAutorizadaProcesamiento&&(this.comprobarRetencionAutorizadaProcesamiento=e.comprobarRetencionAutorizadaProcesamiento)},e.prototype.seterNumero99999=function(){(this.invCompraTO.compDocumentoTipo===c.a.CODIGO_COMPROBANTE_PAGOS||this.invCompraTO.compDocumentoTipo===c.a.CODIGO_NOTA_CREDITO&&!this.invCompraTO.compDocumentoNumero)&&(this.invCompraTO.compDocumentoNumero="999-999-999999999")},e.prototype.setearMinimoMaximo=function(e){if(this.importarXmlEstado&&e.itemResultadoBusquedaElectronico){var t=this.utilService.convertirDecimaleFloat(e.itemResultadoBusquedaElectronico.totalComprobante);this.minimoCompra=t-.1*t,this.maximoCompra=t+.1*t}},e.prototype.setearFechasDespuesConsultar=function(){this.fechaEmision=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.invCompraTO.compFecha),this.fechaVencimiento=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.invCompraTO.compFechaVencimiento),this.anxCompraTO.compCaduca&&this.anxCompraTO.compEmision&&(this.fechaAutorizacion=this.utilService.formatoDateSinZonaHorariaDDMMYYYY(this.anxCompraTO.compEmision)),this.anxCompraTO.compCaduca&&this.anxCompraTO.compEmision&&(this.fechaCaduca=this.utilService.formatoDateSinZonaHorariaDDMMYYYY(this.anxCompraTO.compCaduca)),this.accion===c.a.ACCION_MAYORIZAR&&(this.fechaInicioMesGuardado=Ut(this.invCompraTO.compFecha).startOf("month").toDate(),this.fechaFinMesGuardado=Ut(this.invCompraTO.compFecha).endOf("month").toDate(),this.anxCompraTO&&this.anxCompraTO.compNumero&&this.obtenerRetencion())},e.prototype.setearListasDespuesConsultar=function(e){this.listaFormaPago=e.listaFormaPago,this.listaDocumentos=e.listaDocumentos,this.listaInvListadoPagosTO=e.listaInvListadoPagosTO,this.listadoMotivos=e.listaInvComprasMotivoTO,this.listInvComprasDetalleTO=this.comprasFormularioService.convertirInvListaDetalleComprasTOAInvComprasDetalleTO(e.listaInvCompraDetalleTO)},e.prototype.setearOrdenCompra=function(){this.ordenCompra={},this.ordenCompra.empresa=this.invCompraCopia.ocEmpresa,this.ordenCompra.sector=this.invCompraCopia.ocSector,this.ordenCompra.motivo=this.invCompraCopia.ocMotivo,this.ordenCompra.numero=this.invCompraCopia.ocNumero},e.prototype.obtenerRetencion=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,motivo:this.invCompraTO.compMotivo,numero:this.anxCompraTO.compNumero,periodo:this.invCompraTO.compPeriodo,usuarioCodigo:this.authService.getCodigoUser()};this.retencionComprasService.consultarRetencionCompra(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeConsultarRetencionCompra=function(e){this.cargando=!1,e.anxCompraTO&&(this.formaPagoRetencion=e.formaPagoRetencion.length>0?new Gn({fpCodigo:e.formaPagoRetencion[0].fpCodigo}):null,this.anxCompraTO=e.anxCompraTO,this.listAnxCompraDetalleTO=e.listaAnxCompra,this.listAnxCompraDetalleRetencionTO=e.listAnxCompraDetalleRetencionTO)},e.prototype.anularCompra=function(){if(this.invCompraTO.compNumero&&this.invCompraTO.compPeriodo&&this.invCompraTO.compMotivo){var e=new Kt.a({compEmpresa:this.empresaSeleccionada.empCodigo,compPeriodo:this.invCompraTO.compPeriodo,compMotivo:this.invCompraTO.compMotivo,compNumero:this.invCompraTO.compNumero});this.cargando=!0,this.comprasService.anularCompra({invComprasPK:e},this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeAnularCompra=function(e){this.cargando=!1,this.invCompraTO.compAnulado=!0,this.invCompraTO.compPendiente=!1,this.utilService.generarSwal(c.a.TAG_COMPRA,c.a.SWAL_SUCCESS,e.operacionMensaje),"999-999-999999999"===this.invCompraTO.compDocumentoNumero&&(this.invCompraTO.compDocumentoNumero=null),this.cerrarFormulario(this.invCompraTO)},e.prototype.restaurarCompra=function(){if(this.invCompraTO.compNumero&&this.invCompraTO.compPeriodo&&this.invCompraTO.compMotivo){var e=new Kt.a({compEmpresa:this.empresaSeleccionada.empCodigo,compPeriodo:this.invCompraTO.compPeriodo,compMotivo:this.invCompraTO.compMotivo,compNumero:this.invCompraTO.compNumero});this.cargando=!0,this.comprasService.restaurarCompra({invComprasPK:e},this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeRestaurarCompra=function(e){this.cargando=!1,this.invCompraTO.compAnulado=!1,this.invCompraTO.compPendiente=!1,this.utilService.generarSwal(c.a.TAG_COMPRA,c.a.SWAL_SUCCESS,e.operacionMensaje),"999-999-999999999"===this.invCompraTO.compDocumentoNumero&&(this.invCompraTO.compDocumentoNumero=null),this.cerrarFormulario(this.invCompraTO)},e.prototype.modificarCompra=function(e,t){if(this.cargando=!0,this.utilService.establecerFormularioTocado(e)&&e&&e.valid){var o=!1;this.importarXmlEstado?this.invCompraTO.compTotal>=this.minimoCompra&&this.invCompraTO.compTotal<=this.maximoCompra?o=!0:(this.cargando=!1,this.toastr.warning("El total de la compra debe encontrarse en el siguiente rango: "+this.minimoCompra+" y "+this.maximoCompra,c.a.MSJ_TITULO_INVALIDOS)):o=!0,o&&this.validarSiPuedeGuardar(t)&&(this.invCompraCopia.compDocumentoTipo===c.a.CODIGO_NOTA_ENTREGA?this.actualizarCompra():this.validarFechasRetencionCompras())}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.despuesDeModificarCompra=function(e){this.cargando=!1,this.invCompraCopia=e.extraInfo,this.invCompraCopia.compPendiente?(this.utilService.generarSwal(c.a.TAG_COMPRA,c.a.SWAL_SUCCESS,e.operacionMensaje),this.cerrarFormulario(this.invCompraCopia)):null!==this.invCompraCopia.contNumero?this.recontabilizarCompra():this.preguntarImprimir(e)},e.prototype.actualizarCompra=function(){"999-999-999999999"===this.invCompraCopia.compDocumentoNumero&&(this.invCompraCopia.compDocumentoNumero=null);var e={desmayorizar:!1,empresa:this.empresaSeleccionada.empCodigo,invComprasTO:this.invCompraCopia,formaPagoCompra:this.formaPagoSeleccionada,anxFormaPagoTO:this.formaPagoRetencion,anxFormaPagoTOEliminar:this.formaPagoRetencionEliminar,listInvComprasDetalleTO:this.listInvComprasDetalleTOCopia,listInvComprasDetalleTOEliminar:this.listInvComprasDetalleTOEliminar,anxCompraTO:this.anxCompraTOCopia,listAnxCompraDetalleTO:this.listAnxCompraDetalleTOCopia,listAnxCompraDetalleTOEliminar:this.listAnxCompraDetalleTOEliminar,listAnxCompraReembolsoTO:this.listAnxCompraReembolsoTO,listAnxCompraReembolsoTOEliminar:this.listAnxCompraReembolsoTOEliminar,listImagen:[]};this.cargando=!0,this.comprasService.modificarCompra(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.insertarCompra=function(e,t){if(this.cargando=!0,this.utilService.establecerFormularioTocado(e)&&e&&e.valid){var o=!1;this.importarXmlEstado?this.invCompraTO.compTotal>=this.minimoCompra&&this.invCompraTO.compTotal<=this.maximoCompra?o=!0:(this.cargando=!1,this.toastr.warning("El total de la compra debe encontrarse en el siguiente rango: "+this.minimoCompra+" y "+this.maximoCompra,c.a.MSJ_TITULO_INVALIDOS)):o=!0,o&&this.validarSiPuedeGuardar(t)&&(this.invCompraCopia.compDocumentoTipo===c.a.CODIGO_NOTA_ENTREGA?this.guardarCompra():this.invCompraCopia.compDocumentoTipo===c.a.CODIGO_NOTA_CREDITO&&"999-999-999999999"===this.invCompraCopia.compDocumentoNumero?this.guardarCompra():this.validarFechasRetencionCompras())}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.guardarCompra=function(){"999-999-999999999"===this.invCompraCopia.compDocumentoNumero&&(this.invCompraCopia.compDocumentoNumero=null);var e={empresa:this.empresaSeleccionada.empCodigo,usuario:this.authService.getCodigoUser(),invComprasTO:this.invCompraCopia,listInvComprasDetalleTO:this.listInvComprasDetalleTOCopia,proveedor:this.proveedor,formaPagoCompra:this.formaPagoSeleccionada,anxCompraTO:this.anxCompraTOCopia,anxFormaPagoTO:this.formaPagoRetencion,listAnxCompraDetalleTO:this.listAnxCompraDetalleTOCopia,listAnxCompraReembolsoTO:this.listAnxCompraReembolsoTO,listImagen:[]};this.cargando=!0,this.comprasService.guardarCompra(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGuardarCompra=function(e){this.cargando=!1,this.invCompraCopia=e.extraInfo,this.invCompraCopia.compPendiente?(this.utilService.generarSwal(c.a.TAG_COMPRA,c.a.SWAL_SUCCESS,e.operacionMensaje),this.cerrarFormulario(this.invCompraCopia)):this.preguntarImprimir(e)},e.prototype.validarSiPuedeGuardar=function(e){var t=!0;return!this.chequeRepetido&&this.numeroAutorizacionValidaLongitud&&this.numeroDocValido000&&this.periodoAbierto&&this.fechaCaducaValida&&this.fechaAutorizacionValida&&this.validarYFormatearAntesEnviar(e)||(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1,t=!1),t},e.prototype.validarYFormatearAntesEnviar=function(e){if(this.invCompraCopia=JSON.parse(JSON.stringify(this.invCompraTO)),this.anxCompraTOCopia=JSON.parse(JSON.stringify(this.anxCompraTO)),this.listAnxCompraDetalleTOCopia=JSON.parse(JSON.stringify(this.listAnxCompraDetalleTO)),this.formatearInvCompraTOCopia(e),this.ordenCompra&&(this.invCompraCopia.ocEmpresa=this.ordenCompra.empresa,this.invCompraCopia.ocMotivo=this.ordenCompra.motivo,this.invCompraCopia.ocSector=this.ordenCompra.sector,this.invCompraCopia.ocNumero=this.ordenCompra.numero),this.invCompraCopia.compDocumentoTipo===c.a.CODIGO_NOTA_ENTREGA)this.resetearNotaEntrega();else if(this.invCompraCopia.compDocumentoTipo!==c.a.CODIGO_REEMBOLSO&&this.resetearReembolso(),this.invCompraCopia.compDocumentoTipo!==c.a.CODIGO_NOTA_CREDITO&&this.invCompraCopia.compDocumentoTipo!==c.a.CODIGO_NOTA_DEBITO&&this.resetearNotaCD(),this.invCompraCopia.compDocumentoTipo===c.a.CODIGO_NOTA_CREDITO&&"999-999-999999999"===this.invCompraCopia.compDocumentoNumero&&(this.invCompraCopia.compRetencionAsumida=!1,this.anxCompraTOCopia=null,this.listAnxCompraDetalleTOCopia=[]),this.anxCompraTOCopia){this.anxCompraTOCopia.compEmision=this.utilService.formatoStringSinZonaHorariaDDMMYYYY(this.fechaAutorizacion),this.anxCompraTOCopia.compCaduca=this.utilService.formatoStringSinZonaHorariaDDMMYYYY(this.fechaCaduca);var t=0,o=0;if(0===this.listAnxCompraDetalleTOCopia.length)return this.toastr.warning("No ha hecho ninguna retenci\xf3n, por favor ingr\xe9sela..",c.a.TAG_AVISO),!1;if(this.listAnxCompraDetalleTOCopia.forEach(function(e){t+=e.detBase0,o+=e.detBaseImponible}),this.utilService.matRound2(t)!==this.utilService.matRound2(this.invCompraCopia.compBase0)||this.utilService.matRound2(o)!==this.utilService.matRound2(this.invCompraCopia.compBaseImponible))return this.retencionFueAceptada=!1,this.toastr.warning("Debe volver a realizar la retenci\xf3n",c.a.TAG_AVISO),!1}this.listInvComprasDetalleTOCopia=JSON.parse(JSON.stringify(this.listInvComprasDetalleTO));for(var a=0;a<this.listInvComprasDetalleTOCopia.length;a++){var i=this.listInvComprasDetalleTOCopia[a];if(i.detOrden=a,!i.bodCodigo||!i.proCodigoPrincipal||i.parcialProducto<=0)return!1;i.detPendiente=!0,i.pisEmpresa=this.empresaSeleccionada.empCodigo,i.secEmpresa=this.empresaSeleccionada.empCodigo,i.bodEmpresa=this.empresaSeleccionada.empCodigo,i.comEmpresa=this.empresaSeleccionada.empCodigo,i.pisSector=i.secCodigo,delete i.listadoPiscinaTO,delete i.medidaDetalle,delete i.parcialProducto,delete i.nombreProducto,delete i.proCodigoPrincipalCopia,delete i.bodCodigoCopia}for(a=0;a<this.listAnxCompraReembolsoTO.length;a++)delete this.listAnxCompraReembolsoTO[a].provCodigoCopia;return!0},e.prototype.formatearInvCompraTOCopia=function(e){this.invCompraCopia.compObservaciones=this.invCompraCopia.compObservaciones?this.invCompraCopia.compObservaciones:"",this.invCompraCopia.compPendiente=e,this.invCompraCopia.compMotivo=this.motivoSeleccionado.cmCodigo,this.invCompraCopia.empCodigo=this.empresaSeleccionada.empCodigo,this.invCompraCopia.provEmpresa=this.empresaSeleccionada.empCodigo,this.invCompraCopia.secEmpresa=this.empresaSeleccionada.empCodigo,this.invCompraCopia.secCodigo=this.listInvComprasDetalleTO[0].secCodigo,this.invCompraCopia.usrInsertaCompra=this.authService.getCodigoUser();var t=this.formaPagoSeleccionada&&"POR PAGAR"!==this.formaPagoSeleccionada.fpDetalle?this.formaPagoSeleccionada.fpDetalle.split("|")[1].trim():this.formaPagoSeleccionada.fpDetalle;this.invCompraCopia.compFormaPago=t,this.invCompraCopia.compDocumentoFormaPago=this.invCompraCopia.compDocumentoFormaPago?this.invCompraCopia.compDocumentoFormaPago:"",this.invCompraCopia.compFecha=this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaEmision),this.invCompraCopia.compFechaVencimiento=this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaVencimiento)},e.prototype.resetearNotaEntrega=function(){this.invCompraTO.compDocumentoNumero=null,this.formaPagoRetencion=null,this.anxCompraTOCopia=null,this.listAnxCompraDetalleTOCopia=[]},e.prototype.resetearReembolso=function(){this.listAnxCompraReembolsoTO=[],this.listAnxCompraReembolsoTOEliminar=[]},e.prototype.resetearNotaCD=function(){this.anxCompraTO.compModificadoDocumentoTipo=null,this.anxCompraTO.compModificadoDocumentoNumero=null,this.anxCompraTO.compModificadoAutorizacion=null},e.prototype.buscarBodega=function(e){var t=e.event.keyCode,o=e.event.target.value,a=e.data.bodCodigo;if(this.utilService.validarKeyBuscar(t))if(e.data.bodCodigo=o,o===a&&o&&a)c.a.KEYCODE_TAB,this.comprasFormularioService.productoFocusAndEditingCell(e.node.rowIndex,this.gridApi);else if(o=o?o.toUpperCase():null){var i={empresa:this.empresaSeleccionada.empCodigo,busqueda:o,inactivo:!1};this.abrirModalBodega(i,e)}else c.a.KEYCODE_TAB,this.comprasFormularioService.productoFocusAndEditingCell(e.node.rowIndex,this.gridApi)},e.prototype.abrirModalBodega=function(e,t){var o=this;if(this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_EDITAR||this.accion===c.a.ACCION_MAYORIZAR){var a=this.modalService.open(Yn.a,{size:"lg",backdrop:"static",windowClass:"miSize"});a.componentInstance.parametrosBusqueda=e,a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){if(e){var a=new rt.a(e);t.event.target.value=a.bodCodigo,t.data.bodCodigo=a.bodCodigo,t.data.bodCodigoCopia=a.bodCodigo,t.data.secCodigo=a.codigoCP,o.refreshGrid(),o.listarPiscinas(),o.comprasFormularioService.productoFocusAndEditingCell(t.node.rowIndex,o.gridApi)}else o.comprasFormularioService.bodegaFocusAndEditingCell(t.node.rowIndex,o.gridApi)},function(){t.data.proCodigoPrincipal="",o.validarBodega(t.data),o.comprasFormularioService.bodegaFocusAndEditingCell(t.node.rowIndex,o.gridApi)})}},e.prototype.validarBodega=function(e){return e.bodCodigo===e.bodCodigoCopia||(this.resetearBodega(e),!1)},e.prototype.resetearBodega=function(e){e.bodCodigo=null,e.bodCodigoCopia=null,e.listadoPiscinaTO=[],this.refreshGrid()},e.prototype.buscarProducto=function(e){var t=e.event.keyCode,o=e.event.target.value,a=e.data.proCodigoPrincipal;if(this.utilService.validarKeyBuscar(t))if(e.data.proCodigoPrincipal=o,o===a&&o&&a)c.a.KEYCODE_TAB,this.comprasFormularioService.productoFocusAndEditingCell(e.node.rowIndex,this.gridApi);else if(o=o?o.toUpperCase():null){var i={empresa:this.empresaSeleccionada.empCodigo,busqueda:o,categoria:null,bodega:e.data.bodCodigo,incluirInactivos:!1,limite:!1};this.abrirModalProducto(i,e)}else c.a.KEYCODE_TAB,this.comprasFormularioService.productoFocusAndEditingCell(e.node.rowIndex,this.gridApi)},e.prototype.abrirModalProducto=function(e,t){var o=this;if(this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_EDITAR||this.accion===c.a.ACCION_MAYORIZAR){var a=this.modalService.open(r.a,{size:"lg",backdrop:"static",windowClass:"miSize"});a.componentInstance.parametrosBusqueda=e,a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){if(e){var a=new ke.a(e);t.event.target.value=a.proCodigoPrincipal,t.data.proCodigoPrincipal=a.proCodigoPrincipal,t.data.proCodigoPrincipalCopia=a.proCodigoPrincipal,t.data.proEmpresa=o.empresaSeleccionada.empCodigo,t.data.nombreProducto=a.proNombre,t.data.medidaDetalle=a.detalleMedida,t.data.proEstadoIva=a.proGravaIva,o.refreshGrid(),o.calcularSubTotal(),o.comprasFormularioService.cantidadFocusAndEditingCell(t.node.rowIndex,o.gridApi)}else o.comprasFormularioService.productoFocusAndEditingCell(t.node.rowIndex,o.gridApi)},function(){t.data.proCodigoPrincipal="",o.validarProducto(t.data),o.comprasFormularioService.productoFocusAndEditingCell(t.node.rowIndex,o.gridApi)})}},e.prototype.validarProducto=function(e){return e.proCodigoPrincipal===e.proCodigoPrincipalCopia||(this.resetearProducto(e),!1)},e.prototype.resetearProducto=function(e){e.proCodigoPrincipalCopia=null,e.proCodigoPrincipal=null,e.nombreProducto=null,e.medidaDetalle=null,this.refreshGrid()},e.prototype.getIVA=function(){if(this.fechaEmision){this.cargando=!0;var e={fechaFactura:this.fechaEmision};this.comprasService.obtenerIva(e,this,c.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeObtenerIva=function(e){this.cargando=!1,this.invCompraTO.compIvaVigente=e,this.calcularIvaTotal()},e.prototype.validarFechaVencimiento=function(){this.fechaEmision&&(this.validacionFechas(),this.getIVA(),this.validarPeriodoAbierto())},e.prototype.validarPeriodoAbierto=function(){if(this.cargando=!0,this.periodoAbierto=!1,this.fechaEmision){var e={empresa:this.empresaSeleccionada.empCodigo,fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(JSON.parse(JSON.stringify(this.fechaEmision)))};this.sistemaService.getIsPeriodoAbierto(e,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeObtenerIsPeriodoAbierto=function(e){this.cargando=!1,this.periodoAbierto=e},e.prototype.validacionFechas=function(){if(this.fechaAutorizacionValida=!1,this.fechaCaducaValida=!1,this.invCompraTO.compDocumentoTipo!==c.a.CODIGO_NOTA_ENTREGA){if(this.anxCompraTO.compAutorizacion&&this.fechaEmision&&this.fechaAutorizacion&&this.fechaCaduca){var e=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaEmision)).getTime(),t=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaAutorizacion)).getTime(),o=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaCaduca)).getTime();if(37===this.anxCompraTO.compAutorizacion.length||49===this.anxCompraTO.compAutorizacion.length)this.fechaAutorizacionValida=e<=t,this.fechaCaducaValida=o===t;else if(10===this.anxCompraTO.compAutorizacion.length){var a=Math.abs(Ut(this.fechaAutorizacion).diff(Ut(this.fechaCaduca),"days")),i=0<=a&&a<=366;this.fechaAutorizacionValida=t<=e,this.fechaCaducaValida=e<=o&&i}}}else this.fechaAutorizacionValida=!0,this.fechaCaducaValida=!0},e.prototype.calcularPrecio=function(e){e.detCantidad>0?e.detPrecio=e.parcialProducto/e.detCantidad:(e.detPrecio=0,e.parcialProducto=0),this.refreshGrid()},e.prototype.calcularIceOtrosImp=function(){var e=this;this.invCompraTO.compIce=0,this.invCompraTO.compOtrosImpuestos=0,this.gridApi.forEachNode(function(t){var o=t.data;e.invCompraTO.compIce+=e.utilService.convertirDecimaleFloat(o.detIce),e.invCompraTO.compOtrosImpuestos+=e.utilService.convertirDecimaleFloat(o.detOtrosImpuestos)}),this.calcularTotal()},e.prototype.calcularTotal=function(){this.invCompraTO.compTotal=this.utilService.convertirDecimaleFloat(this.invCompraTO.compBase0)+this.utilService.convertirDecimaleFloat(this.invCompraTO.compBaseImponible)+this.utilService.convertirDecimaleFloat(this.invCompraTO.compIce)+this.utilService.convertirDecimaleFloat(this.invCompraTO.compMontoIva)+this.utilService.convertirDecimaleFloat(this.invCompraTO.compOtrosImpuestos)},e.prototype.calcularIvaTotal=function(){var e;e=this.utilService.convertirDecimaleFloat(this.invCompraTO.compBaseImponible)+this.utilService.convertirDecimaleFloat(this.invCompraTO.compIce),this.invCompraTO.compMontoIva=e*(this.utilService.convertirDecimaleFloat(this.invCompraTO.compIvaVigente)/100),this.calcularTotal()},e.prototype.calcularSubTotal=function(){var e=this,t=0,o=0;this.invCompraTO.compBase0=0,this.invCompraTO.compBaseImponible=0,this.gridApi.forEachNode(function(a){var i=a.data;i.parcialProducto>0&&("GRAVA"===i.proEstadoIva?o+=e.utilService.convertirDecimaleFloat(i.parcialProducto):t+=e.utilService.convertirDecimaleFloat(i.parcialProducto)),e.invCompraTO.compBase0=t,e.invCompraTO.compBaseImponible=o,e.calcularTotal(),e.calcularIvaTotal()})},e.prototype.validarNumeroDoc=function(){var e={empresa:c.a.KEY_EMPRESA_SELECT,tipoDocumento:this.invCompraTO.compDocumentoTipo,numeroDocumento:this.invCompraTO.compDocumentoNumero};this.comprasService.validarNumero(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.buscarProveedor=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esValidoProveedor())if(this.proveedor&&this.invCompraTO.provCodigo.length>0){var o=this.invCompraTO.provCodigo.toUpperCase(),a={empresa:c.a.KEY_EMPRESA_SELECT,categoria:null,inactivos:!1,busqueda:o};e.srcElement.blur(),e.preventDefault();var i=this.modalService.open(n.a,{size:"lg",backdrop:"static"});i.componentInstance.parametrosBusqueda=a,i.result.then(function(e){e?(t.proveedor=new Uo.a(e),t.invCompraTO.provCodigo=t.proveedor.provCodigo,t.obtenerDocumentos()):t.deseaAgregarProveedor()},function(e){e||t.deseaAgregarProveedor()})}else this.toastr.info(c.a.MSJ_ENTERTOMODAL,c.a.TAG_AVISO)},e.prototype.deseaAgregarProveedor=function(){var e=this,t={title:c.a.INVENTARIO_COMPRAS,texto:c.a.MSJ_PREGUNTA_INSERTAR_PROVEEDOR,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t?e.mostrarFormularioProveedor():e.comprasFormularioService.focus("provCodigo")})},e.prototype.mostrarFormularioProveedor=function(){this.parametrosFormulario={empresa:this.empresaSeleccionada,accion:c.a.ACCION_CREAR,invProveedorTO:new Uo.a,tituloFormulario:c.a.TITULO_FORM_NUEVO_PROVEEDOR,activar:this.activar},this.mostrarAccionesProveedor=!0},e.prototype.cerrarFormularioProveedor=function(e){if(e.invProveedorTO){var t=e.invProveedorTO;this.proveedor=new Uo.a(t),this.invCompraTO.provCodigo=this.proveedor.provCodigo,this.obtenerDocumentos()}this.mostrarAccionesProveedor=!1,this.parametrosFormulario=null},e.prototype.esValidoProveedor=function(){return""!=this.invCompraTO.provCodigo&&this.proveedor.provCodigo===this.invCompraTO.provCodigo},e.prototype.validarProveedor=function(){this.proveedor.provCodigo===this.invCompraTO.provCodigo||this.accion!==c.a.ACCION_CREAR&&this.accion!==c.a.ACCION_MAYORIZAR||(this.proveedor=new Uo.a,this.invCompraTO.provCodigo=null)},e.prototype.obtenerDocumentos=function(){if(this.proveedor.provTipoId){this.invCompraTO.compDocumentoTipo=null,this.listaDocumentos=[],this.cargando=!0;var e={tipoIdentificacion:this.proveedor.provTipoId,tipoTransaccion:"COMPRA"};this.comprasService.obtenerDocumentos(e,this,c.a.KEY_EMPRESA_SELECT)}else this.invCompraTO.compDocumentoTipo=null,this.listaDocumentos=[]},e.prototype.despuesDeObtenerDocumentos=function(e){this.cargando=!1,this.listaDocumentos=e,this.comprasFormularioService.focus("documento")},e.prototype.validarSiEsNotaEntrega=function(){this.invCompraTO.compDocumentoTipo&&this.invCompraTO.compDocumentoTipo!==c.a.CODIGO_NOTA_ENTREGA?(this.invCompraTO.compDocumentoNumero=null,this.anxCompraTO=new Rn.a,this.anxCompraTO.compAutorizacion=null,this.retencionFueAceptada=!1,this.numeroRepetido=!1,this.numeroDocValido000=!1,this.formaPagoRetencion=null,this.numeroAutorizacionValidaLongitud=!1,this.invCompraTO.compRetencionAsumida=!1,this.listAnxCompraDetalleTO=[],this.listAnxCompraDetalleRetencionTO=[],this.invCompraTO.compDocumentoTipo===c.a.CODIGO_COMPROBANTE_PAGOS&&(this.invCompraTO.compDocumentoNumero="999-999-999999999",this.anxCompraTO=new Rn.a,this.numeroDocValido000=!0)):(this.numeroRepetido=!1,this.numeroDocValido000=!0,this.numeroAutorizacionValidaLongitud=!0)},e.prototype.validarNumeroDocumento=function(){var e=!1;if(this.accion===c.a.ACCION_MAYORIZAR?this.invCompraTO.compDocumentoNumero!==this.numeroCreado?e=!0:(this.numeroRepetido=!1,this.numeroDocValido000=!0):e=!0,this.invCompraTO.compDocumentoTipo===c.a.CODIGO_NOTA_CREDITO&&"999-999-999999999"===this.invCompraTO.compDocumentoNumero&&(e=!1,this.numeroRepetido=!1,this.numeroDocValido000=!0,this.numeroAutorizacionValidaLongitud=!0),e&&(this.invCompraTO.compDocumentoNumero&&this.utilService.buscar_EnString(this.invCompraTO.compDocumentoNumero)&&(this.invCompraTO.compDocumentoNumero=null),this.invCompraTO.compDocumentoNumero)){this.numeroDocValido000=!1;var t=this.invCompraTO.compDocumentoNumero.substring(3,0),o=this.invCompraTO.compDocumentoNumero.substring(7,4),a=this.invCompraTO.compDocumentoNumero.substring(17,8);if("000"!==t&&"000"!==o&&"000000000"!==a){this.numeroDocValido000=!0,this.cargando=!0;var i={empresa:this.empresaSeleccionada.empCodigo,provCodigo:this.proveedor.provCodigo,compDocumentoTipo:this.invCompraTO.compDocumentoTipo,compDocumentoNumero:this.invCompraTO.compDocumentoNumero};this.numeroRepetido=!0,this.comprasFormularioService.validarDocumentoRepetido(i,this,c.a.KEY_EMPRESA_SELECT)}}},e.prototype.despuesDeValidarDocumentoRepetido=function(e){this.cargando=!1,this.numeroRepetido=e},e.prototype.validarChequeRepetido=function(){if(this.formaPagoSeleccionada.validar&&this.invCompraTO.compDocumentoFormaPago){this.cargando=!0,this.chequeRepetido=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,documento:this.invCompraTO.compDocumentoFormaPago,cuenta:this.formaPagoSeleccionada.ctaCodigo};this.contableService.verificarDocumentoBanco(e,this,c.a.KEY_EMPRESA_SELECT)}else this.chequeRepetido=!1},e.prototype.despuesDeVerificarDocumento=function(e){this.cargando=!1,this.chequeRepetido=!e},e.prototype.distrubuirCosto=function(){this.mostrarProrrateoCompras=!0},e.prototype.accionProrrateo=function(e){switch(e.accion){case c.a.ACCION_CREADO:this.cargando=!0,this.agregarDistrubucion(e.lista),this.mostrarProrrateoCompras=!1;break;case c.a.ACCION_CANCELAR:this.mostrarProrrateoCompras=!1;break;case c.a.ACCION_ACTIVAR:this.activar=e.activar,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,activar:this.activar});break;default:this.mostrarProrrateoCompras=!1}},e.prototype.agregarDistrubucion=function(e){var t=this,o=this.listInvComprasDetalleTO.length-1;e.forEach(function(e){o+=1,t.listInvComprasDetalleTO.splice(o,0,e),t.gridApi&&t.gridApi.updateRowData({add:[e],addIndex:o})}),this.calcularSubTotal(),this.cargando=!1,this.inicializarAtajos()},e.prototype.distribuirDescuento=function(){},e.prototype.consultarRetencion=function(){this.parametrosRetencion={parametrosBusqueda:{empresa:this.empresaSeleccionada.empCodigo,periodo:this.invCompraTO.compPeriodo,motivo:this.invCompraTO.compMotivo,numero:this.invCompraTO.compNumero,usuarioCodigo:this.authService.getCodigoUser()},accion:c.a.ACCION_CONSULTAR}},e.prototype.sePuedeHacerRetencion=function(){return this.cargando=!0,!!(this.periodoAbierto&&!this.chequeRepetido&&this.numeroAutorizacionValidaLongitud&&this.numeroDocValido000&&!this.numeroRepetido&&this.fechaCaducaValida&&this.fechaAutorizacionValida&&this.comprasFormularioService.validarDetalle(JSON.parse(JSON.stringify(this.listInvComprasDetalleTO))))||(this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1,!1)},e.prototype.retencionCompras=function(e){if(this.cargando=!0,this.utilService.establecerFormularioTocado(e)&&e&&e.valid){if(this.sePuedeHacerRetencion())if(this.retencionFueAceptada){this.cargando=!1;var t=JSON.parse(JSON.stringify(this.invCompraTO));this.parametrosRetencion={accion:c.a.ACCION_CREADO,invCompraTO:t,anxCompraTO:this.anxCompraTO,anxFormaPagoTO:this.formaPagoRetencion,listAnxCompraDetalleRetencionTO:this.listAnxCompraDetalleRetencionTO,listAnxCompraReembolsoTO:this.listAnxCompraReembolsoTO}}else this.accion===c.a.ACCION_MAYORIZAR&&this.anxCompraTO&&this.anxCompraTO.compNumero?(this.cargando=!1,this.parametrosRetencion={parametrosBusqueda:{empresa:this.empresaSeleccionada.empCodigo,periodo:this.invCompraTO.compPeriodo,motivo:this.invCompraTO.compMotivo,numero:this.invCompraTO.compNumero,usuarioCodigo:this.authService.getCodigoUser()},accion:c.a.ACCION_MAYORIZAR}):this.nuevaRetencion()}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.nuevaRetencion=function(){this.cargando=!1;var e=JSON.parse(JSON.stringify(this.invCompraTO)),t=JSON.parse(JSON.stringify(this.listInvComprasDetalleTO));e.compFecha=this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaEmision),this.parametrosRetencion={accion:c.a.ACCION_CREAR,invCompraTO:e,anxCompraTO:this.anxCompraTO,listInvComprasDetalleTO:this.comprasFormularioService.formatearListaQuitarTemporales(t)}},e.prototype.accionRetencion=function(e){switch(e.accion){case c.a.ACCION_CREADO:this.anxCompraTO=e.parametros.anxCompraTO,this.listAnxCompraDetalleRetencionTO=e.parametros.listAnxCompraDetalleRetencionTO,this.listAnxCompraDetalleTO=e.parametros.listAnxCompraDetalleTO,this.listAnxCompraDetalleTOEliminar=e.parametros.listAnxCompraDetalleTOEliminar,this.listAnxCompraReembolsoTO=e.parametros.listAnxCompraReembolsoTO,this.listAnxCompraReembolsoTOEliminar=e.parametros.listAnxCompraReembolsoTOEliminar,this.formaPagoRetencion=e.parametros.anxFormaPagoTO,this.formaPagoRetencionEliminar=e.parametros.anxFormaPagoTOEliminar,this.cargando=!1,this.retencionFueAceptada=!0,this.mostrarRetencionCompras=!1,this.parametrosRetencion=null,this.invCompraTO.compRetencionAsumida=e.parametros.compRetencionAsumida,this.inicializarAtajos();break;case c.a.ACCION_CANCELAR:this.mostrarRetencionCompras=!1,this.parametrosRetencion=null,this.inicializarAtajos();break;case c.a.ACCION_ACTIVAR:this.activar=e.activar,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,activar:this.activar});break;default:this.mostrarRetencionCompras=!1}},e.prototype.validarFechasRetencionCompras=function(){this.cargando=!0;var e={fechaCompra:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaEmision),fechaRetencion:this.anxCompraTO.compRetencionFechaEmision,fechaEmision:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaAutorizacion),fechaCaduca:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaCaduca),compAutorizacion:this.anxCompraTO.compAutorizacion,isCompRetencionAsumida:this.invCompraTO.compRetencionAsumida};this.retencionComprasService.validarFechaRetencion(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeValidarFechaRetencion=function(){this.cargando=!1,this.accion===c.a.ACCION_CREAR?this.guardarCompra():this.accion===c.a.ACCION_MAYORIZAR&&this.actualizarCompra()},e.prototype.mostrarContextMenu=function(e,t,o){this.detalleSeleccionado=e,this.generarOpcionesDetalle(t),this.menuOpciones.show(o),o.stopPropagation()},e.prototype.mostrarOpciones=function(e,t){var o=this.gridApi?this.gridApi.getFocusedCell():null;o&&this.mostrarContextMenu(t,o.rowIndex,e)},e.prototype.generarOpcionesDetalle=function(e){var t=this,o=this.data.accion===c.a.ACCION_MAYORIZAR||this.data.accion===c.a.ACCION_CREAR,a=this.data.accion===c.a.ACCION_MAYORIZAR||this.data.accion===c.a.ACCION_CREAR,i=this.detalleSeleccionado&&this.detalleSeleccionado.proCodigoPrincipal;this.opciones=[{label:c.a.MSJ_VER_DATOS,icon:c.a.ICON_INFO_CIRCULO,disabled:!i,command:function(){return i?t.accionAdicional(t.detalleSeleccionado):null}},{label:c.a.ACCION_AGREGAR_FILA_ARRIBA,icon:c.a.ICON_FLECHA_ARRIBA,disabled:!o,command:function(){return o?t.agregarFila("up",e):null}},{label:c.a.ACCION_AGREGAR_FILA_ABAJO,icon:c.a.ICON_FLECHA_ABAJO,disabled:!o,command:function(){return o?t.agregarFila("down",e):null}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!a,command:function(){return a?t.eliminarFila(e):null}}]},e.prototype.agregarFilaAlFinal=function(e){var t=e.event.keyCode,o=e.node.rowIndex;this.detalleSeleccionado=this.listInvComprasDetalleTO[o],this.detalleSeleccionado.proCodigoPrincipal&&this.utilService.validarKeyBuscar(t)&&(this.accion===c.a.ACCION_CREAR||this.accion===c.a.ACCION_MAYORIZAR)&&o>=0&&o===this.listInvComprasDetalleTO.length-1&&(t===c.a.KEYCODE_TAB&&(e.event.srcElement.blur(),e.event.preventDefault()),this.agregarFilaByIndex(o,"down",!1))},e.prototype.agregarFila=function(e,t,o){var a=t;a>=0&&this.agregarFilaByIndex(a,e,o)},e.prototype.agregarFilaByIndex=function(e,t,o){this.detalleSeleccionado=this.listInvComprasDetalleTO[e];var a="up"===t?e:e+1,i=this.obtenerNuevoDetalle(this.detalleSeleccionado);this.listInvComprasDetalleTO.splice(a,0,i),this.gridApi&&this.gridApi.updateRowData({add:[i],addIndex:a}),o?this.comprasFormularioService.cantidadFocusAndEditingCell(e,this.gridApi):i.bodCodigo?this.comprasFormularioService.focusedProducto(a,this.gridApi):this.comprasFormularioService.focusedBodega(a,this.gridApi),this.refreshGrid()},e.prototype.eliminarFila=function(e){if(this.listInvComprasDetalleTO.length>1){if(this.detalleSeleccionado.detSecuencia&&0!=this.detalleSeleccionado.detSecuencia){var t=JSON.parse(JSON.stringify(this.detalleSeleccionado));delete t.parcialProducto,delete t.medidaDetalle,delete t.nombreProducto,delete t.proCodigoPrincipalCopia,delete t.bodCodigoCopia,delete t.listadoPiscinaTO,t.comEmpresa=this.empresaSeleccionada.empCodigo,this.listInvComprasDetalleTOEliminar.push(t)}this.listInvComprasDetalleTO.splice(e,1),this.gridApi&&this.gridApi.updateRowData({remove:[this.detalleSeleccionado],addIndex:e}),this.calcularSubTotal(),this.refreshGrid()}},e.prototype.obtenerNuevoDetalle=function(e){var t=new un.a;return t.bodCodigo=e.bodCodigo,t.bodCodigoCopia=e.bodCodigoCopia,t.secCodigo=e.secCodigo,t.listadoPiscinaTO=e.listadoPiscinaTO,t},e.prototype.alCambiarValorDeCelda=function(e){this.accion!==c.a.ACCION_CREAR&&this.accion!==c.a.ACCION_MAYORIZAR||("bodCodigo"===e.colDef.field&&this.validarBodega(e.data),"proCodigoPrincipal"===e.colDef.field&&this.validarProducto(e.data),"detCantidad"!==e.colDef.field&&"parcialProducto"!==e.colDef.field||(this.calcularPrecio(e.data),this.calcularSubTotal()))},e.prototype.accionAdicional=function(e,t){var o=this,a=!1;switch(t=t||"detalle"){case"detCantidad":a=e&&e.proCodigoPrincipal;break;default:a=!0}if(a){var i=this.modalService.open(An,{size:"lg",windowClass:"miSize",backdrop:"static"});i.componentInstance.item=e,i.componentInstance.invCompraTO=this.invCompraTO,i.componentInstance.tipo=t,i.componentInstance.accion=this.accion,i.componentInstance.configAutonumeric=this.configAutonumeric,i.componentInstance.listadoPiscinaTO=e.listadoPiscinaTO?e.listadoPiscinaTO:[],i.componentInstance.empresaSeleccionada=this.empresaSeleccionada,i.result.then(function(e){e&&("detCantidad"===t?(o.detalleSeleccionado.detCantidad=e.detCantidad,o.refreshGrid()):(o.detalleSeleccionado.pisNumero=e.pisNumero,o.detalleSeleccionado.detIce=e.detIce,o.detalleSeleccionado.detOtrosImpuestos=e.detOtrosImpuestos,o.calcularIceOtrosImp()))},function(){})}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.comprasService.generarColumnasDetalle(this),this.columnDefsSelected=this.columnDefs.slice(),this.context={componentParent:this},this.frameworkComponents={toolTip:pe.a,numericCell:zo.a,pinnedCell:Ko.a,inputNumeric:bt.a,labelNumeric:Ot.a,inputLabelCell:ft.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimensionarColumnas(),this.accion===c.a.ACCION_CREAR?this.comprasFormularioService.focus("provCodigo"):this.seleccionarPrimerFila(),this.calcularSubTotal()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.filaFocused=function(e){var t=this,o=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,a=this.gridApi?this.gridApi.getFocusedCell():null,i=a?a.column:null;this.gridApi&&i&&i.getId()&&("parcialProducto"===i.getId()?setTimeout(function(){t.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:i.getId()})}):this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:i.getId()})),this.detalleSeleccionado=o?o.data:null},e.prototype.onresize=function(){this.screamXS=window.innerWidth<c.a.WINDOW_WIDTH_XS},e.prototype.unloadHandler=function(e){if(this.data.accion===c.a.ACCION_CONSULTAR||this.data.accion===c.a.ACCION_ANULAR||this.data.accion===c.a.ACCION_RESTAURAR)return!0;e.returnValue=!1},e.prototype.listarFormaPago=function(){this.cargando=!0,this.listaFormaPago=[];var e={empresa:this.empresaSeleccionada.empCodigo};this.formaPagoService.listarComboFormaPagoTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarComboFormaPagoTO=function(e){this.cargando=!1,this.listaFormaPago=e,this.listaFormaPago.push(this.comprasFormularioService.fpPorPagar())},e.prototype.listarMotivos=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,activos:!0};this.motivoComprasService.listarInvComprasMotivoTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvComprasMotivoTO=function(e){this.listadoMotivos=e,this.cargando=!1},e.prototype.listarPiscinas=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,sector:this.detalleSeleccionado.secCodigo,mostrarInactivo:!1};this.piscinaService.listarPrdListaPiscinaTO(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPiscina=function(e){this.cargando=!1,this.detalleSeleccionado.listadoPiscinaTO=e},e.prototype.preguntarContabilizar=function(e){var t=this;switch(this.motivoSeleccionado&&this.motivoSeleccionado.cmFormaContabilizar?this.motivoSeleccionado.cmFormaContabilizar:""){case"PREGUNTAR":var o={title:c.a.MSJ_TITULO_CONTABILIZAR,texto:e.operacionMensaje+"<br> \xbfDesea contabilizar la compra?",type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI,cancelButtonText:c.a.MSJ_NO};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.contabilizarCompra():t.cerrarFormulario(t.invCompraCopia)});break;case"AUTOMATICAMENTE":this.contabilizarCompra();break;case"NO CONTABILIZAR":default:this.utilService.generarSwal(c.a.TAG_COMPRA,c.a.SWAL_SUCCESS,e.operacionMensaje),this.cerrarFormulario(this.invCompraCopia)}},e.prototype.preguntarImprimir=function(e){var t=this;switch(this.motivoSeleccionado&&this.motivoSeleccionado.cmFormaImprimir?this.motivoSeleccionado.cmFormaImprimir:""){case"AUTOMATICAMENTE":this.imprimirCompra(),this.preguntarContabilizar(e);break;case"PREGUNTAR":var o={title:c.a.TOAST_CORRECTO,texto:e.operacionMensaje+"<br>"+c.a.MSJ_PREGUNTA_IMPRIMIR+"<br>",type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_IMPRIMIR+"'></i>  "+c.a.LABEL_IMPRIMIR,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o&&t.imprimirCompra(),t.preguntarContabilizar(e)});break;default:this.utilService.generarSwal(c.a.TAG_COMPRA,c.a.SWAL_SUCCESS,e.operacionMensaje),this.cerrarFormulario(this.invCompraCopia)}},e.prototype.recontabilizarCompra=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,invComprasTO:this.invCompraCopia};this.comprasFormularioService.recontabilizarCompra(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeRecontabilizarCompra=function(e){var t=this;if(e){var o={title:c.a.TOAST_CORRECTO,texto:e.operacionMensaje+"<br>"+c.a.MSJ_PREGUNTA_VER_CONTABLE,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_VER+"'></i>  "+c.a.ACCION_VER_CONTABLE,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.verContable():(t.cargando=!1,t.cerrarFormulario(t.invCompraCopia))})}this.cargando=!1,this.cerrarFormulario(this.invCompraCopia)},e.prototype.contabilizarCompra=function(){this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,invComprasTO:this.invCompraCopia};this.comprasFormularioService.contabilizarCompra(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeContabilizarCompra=function(e){var t=this;if(e){this.mostrarBtnContabilizar=!1;var o={title:c.a.TOAST_CORRECTO,texto:e.operacionMensaje+"<br>"+c.a.MSJ_PREGUNTA_VER_CONTABLE,type:c.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+c.a.ICON_VER+"'></i>  "+c.a.ACCION_VER_CONTABLE,cancelButtonText:c.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e?t.verContable():(t.cargando=!1,t.cerrarFormulario(t.invCompraCopia))})}else this.cargando=!1,this.cerrarFormulario(this.invCompraCopia)},e.prototype.imprimirCompra=function(){var e=this;this.cargando=!0;var t=new Kt.a({compEmpresa:this.empresaSeleccionada.empCodigo,compPeriodo:this.invCompraTO.compPeriodo,compMotivo:this.invCompraTO.compMotivo,compNumero:this.invCompraTO.compNumero}),o=[];o.push(t),this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteCompra",{listaPk:o},this.empresaSeleccionada).then(function(t){t&&t._body&&t._body.byteLength>0?e.utilService.descargarArchivoPDF("Compra"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.verContable=function(){this.invCompraCopia.compPeriodo&&this.motivoSeleccionado&&this.motivoSeleccionado.tipCodigo&&this.invCompraCopia.compNumero?(this.cargando=!0,this.parametrosContabilidad={accion:c.a.ACCION_CONSULTAR,contable:this.invCompraCopia.compPeriodo+" | "+(this.motivoSeleccionado.tipCodigo?this.motivoSeleccionado.tipCodigo:"C-COM")+" | "+this.invCompraCopia.compNumero,empresaSeleccionada:this.empresaSeleccionada,activar:this.activar,volverACargar:!1,listadoSectores:[],tamanioEstructura:null,tipoContable:this.motivoSeleccionado.tipCodigo?this.motivoSeleccionado.tipCodigo:"C-COM",listaPeriodos:[]},this.mostrarAccionesContabilidad=!0):(this.toastr.warning(c.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,c.a.TAG_AVISO),this.accion!==c.a.ACCION_CREAR&&this.accion!==c.a.ACCION_MAYORIZAR||this.cerrarFormulario(this.invCompraCopia))},e.prototype.cerrarContabilidadAcciones=function(e){e.noIniciarAtajoPadre||(this.activar=e.objetoEnviar?e.objetoEnviar.activar:this.activar,this.parametrosContabilidad=null,this.mostrarAccionesContabilidad=!1,this.inicializarAtajos(),this.accion!==c.a.ACCION_CREAR&&this.accion!==c.a.ACCION_MAYORIZAR||this.cerrarFormulario(this.invCompraCopia))},e.prototype.cambiarEstadoActivarContabilidad=function(e){this.activar=e,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,activar:this.activar})},e.prototype.consultarPagos=function(e){var t=new Xn.a;t.pagFecha=e.pagFecha,t.pagValor=e.pagValor,t.pagNumeroSistema=e.pagPeriodo+"|"+e.pagTipo+"|"+e.pagNumero,this.parametrosFormularioPagos={accion:c.a.ACCION_CONSULTAR,seleccionado:t},this.mostrarFormularioPagos=!0},e.prototype.ejecutarAccion=function(e){switch(this.inicializarAtajos(),e.accion){case c.a.ACCION_ACTIVAR:this.activar=e.estado,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,activar:this.activar});break;case c.a.ACCION_CANCELAR:this.mostrarFormularioPagos=!1,this.parametrosFormularioPagos=null}},e.prototype.imagenesCompra=function(){this.estamosEnVistaImagenes=!0},$n([Object(i.ViewChild)("menuOpciones"),Qn("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),$n([Object(i.Input)(),Qn("design:type",Object)],e.prototype,"data",void 0),$n([Object(i.Input)(),Qn("design:type",Object)],e.prototype,"empresaSeleccionada",void 0),$n([Object(i.Output)(),Qn("design:type",Object)],e.prototype,"enviarAccion",void 0),$n([Object(i.ViewChild)("frmCompras"),Qn("design:type",I.NgForm)],e.prototype,"frmCompras",void 0),$n([Object(i.HostListener)("window:resize",["$event"]),Qn("design:type",Function),Qn("design:paramtypes",[]),Qn("design:returntype",void 0)],e.prototype,"onresize",null),$n([Object(i.HostListener)("window:beforeunload",["$event"]),Qn("design:type",Function),Qn("design:paramtypes",[Event]),Qn("design:returntype",void 0)],e.prototype,"unloadHandler",null),e=$n([Object(i.Component)({selector:"app-compras-formulario",template:o("OClv"),styles:[o("tHHr")]}),Qn("design:paramtypes",[h.a,le.a,K.a,u.b,T.b,S.HotkeysService,L.a,Jt.a,it.a,qt.a,qn.a,Wa.a,Hn.a,Jn.a,Zn.a,Ln])],e)}(),ts=o("G059"),os=o("QcxW"),as=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},is=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},rs=function(){function e(e,t,o,a,r,n,s,l,d,p){this.identificacionService=e,this.cantonService=t,this.proveedorCategoriaService=o,this.proveedorService=a,this.atajoService=r,this.utilService=n,this.modalService=s,this.toastr=l,this.cdRef=d,this.auth=p,this.listadoTipoIdentificacion=new Array,this.listadoProvincias=new Array,this.listadoCiudades=new Array,this.provinciaSeleccionada=new A,this.invProveedorTO=new Uo.a,this.digitosCedulaMax=30,this.digitosCedulaMin=1,this.codigoAnterior="",this.constantes=c.a,this.accion=null,this.rptaCedula=null,this.rptaRepetido=null,this.isScreamMd=!0,this.cargando=!1,this.empresaExtranjera=!1,this.activar=!0,this.tituloFormulario="",this.correos=[],this.correosCompra=[],this.cerrarFormularioProveedor=new i.EventEmitter,this.activarEstado=new i.EventEmitter}return e.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),this.activar=this.parametros.activar,this.accion=this.parametros.accion,this.empresaSeleccionada=this.parametros.empresa,this.listadoCategorias=this.parametros.listadoCategorias,this.invProveedorTO=this.parametros.invProveedorTO,this.tituloFormulario=this.parametros.tituloFormulario,this.codigoAnterior=this.invProveedorTO.provCodigo,c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion===c.a.ACCION_ELIMINAR?this.eliminarProveedor():this.accion===c.a.ACCION_EDITAR_ESTADO?this.modificarEstadoProveedor():(this.empresaExtranjera=this.empresaSeleccionada&&"ECUADOR"!=this.empresaSeleccionada.empPais,this.cargando=!0,!this.listadoCategorias||this.listadoCategorias.length<=0?this.listarInvProveedorCategoriaTO():this.invProveedorTO.provCategoria=this.accion===c.a.ACCION_NUEVO||this.accion===c.a.ACCION_CREAR?this.listadoCategorias[0].pcCodigo:this.invProveedorTO.provCategoria,this.listarCantones(),this.listarIdentificaciones(),this.definirAtajosDeTeclado(),this.digitosCedulaMax=13,this.digitosCedulaMin=13),null!=this.invProveedorTO.provEmail&&""!=this.invProveedorTO.provEmail&&(this.correos=this.invProveedorTO.provEmail.split(";")),null!=this.invProveedorTO.provEmailOrdenCompra&&""!=this.invProveedorTO.provEmailOrdenCompra&&(this.correosCompra=this.invProveedorTO.provEmailOrdenCompra.split(";")),this.extraerValoresIniciales()},e.prototype.clickear=function(e){var t,o=new RegExp(c.a.EXP_REGULAR_EMAIL);"E"===e?(t=(t=this.correos[this.correos.length-1]).toLowerCase(),o.test(t)?this.correos[this.correos.length-1]=t:(this.toastr.warning(c.a.MSJ_CORREO_NO_VALIDO),this.correos.splice(this.correos.length-1))):(t=(t=this.correosCompra[this.correosCompra.length-1]).toLowerCase(),o.test(t)?this.correosCompra[this.correosCompra.length-1]=t:(this.toastr.warning(c.a.MSJ_CORREO_NO_VALIDO),this.correosCompra.splice(this.correosCompra.length-1)))},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmProveedorDatos?e.frmProveedorDatos.value:null))},50)},e.prototype.listarInvProveedorCategoriaTO=function(){this.proveedorCategoriaService.listarInvProveedorCategoria({empresa:this.empresaSeleccionada.empCodigo},this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvProveedorCategoriaTO=function(e){this.listadoCategorias=e||[]},e.prototype.listarIdentificaciones=function(){this.identificacionService.listarTipoIdentificacionTO(this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarAnxTipoIdentificacionTO=function(e){this.listadoTipoIdentificacion=e,this.invProveedorTO.provTipoId=this.invProveedorTO.provTipoId?this.invProveedorTO.provTipoId:this.listadoTipoIdentificacion.length>0?this.listadoTipoIdentificacion[0].tiCodigo:null,this.establecerLongitudIdentificacion(),this.cargando=!1,this.extraerValoresIniciales()},e.prototype.listarCantones=function(){this.cantonService.listarAnxDpaProvinciaTO(this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarAnxDpaProvinciaTO=function(e){var t=this;this.listadoProvincias=e,this.empresaExtranjera?this.invProveedorTO.provProvincia=this.invProveedorTO.provProvincia?this.invProveedorTO.provProvincia:null:(this.provinciaSeleccionada=this.listadoProvincias.find(function(e){return e.nombre==t.invProveedorTO.provProvincia}),this.provinciaSeleccionada=this.provinciaSeleccionada?this.provinciaSeleccionada:this.listadoProvincias.length>0?this.listadoProvincias[0]:null),this.provinciaSeleccionada&&this.provinciaSeleccionada.codigo&&this.listarCiudades(),this.extraerValoresIniciales()},e.prototype.listarCiudades=function(){this.cantonService.listarCiudadesAnxDpaProvinciaTO(this,{codigoProvincia:this.provinciaSeleccionada.codigo},this.empresaSeleccionada.empCodigo)},e.prototype.despuesDeListarCiudadesAnxDpaProvinciaTO=function(e){this.listadoCiudades=e,this.empresaExtranjera?this.invProveedorTO.provCiudad=this.invProveedorTO.provCiudad?this.invProveedorTO.provCiudad:null:this.invProveedorTO.provCiudad=this.invProveedorTO.provCiudad?this.invProveedorTO.provCiudad:this.listadoCiudades.length>0?this.listadoCiudades[0].nombre:null,this.extraerValoresIniciales()},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardarProveedor");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(e){var t=document.getElementById("btnCancelarProveedor");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){return e.cambiarEstadoActivar(),!1}))},e.prototype.espacios=function(){for(var e=this.invProveedorTO.provRazonSocial,t=0;t<e.length;t++)e=(e=(e=e.split("   ").join(" ")).split("  ").join(" ")).split("'").join("");this.invProveedorTO.provRazonSocial=e},e.prototype.verificarPermiso=function(e,t){return this.proveedorService.verificarPermiso(e,this,t)},e.prototype.establecerLongitudIdentificacion=function(){var e=this.invProveedorTO.provTipoId;if(!this.empresaExtranjera)switch(e){case"R":this.digitosCedulaMax=13,this.digitosCedulaMin=13,this.invProveedorTO.provId=this.invProveedorTO.provId&&this.invProveedorTO.provId.length<=13?this.invProveedorTO.provId:"";break;case"C":this.digitosCedulaMax=10,this.digitosCedulaMin=10,this.invProveedorTO.provId=this.invProveedorTO.provId&&this.invProveedorTO.provId.length<=10?this.invProveedorTO.provId:"";break;default:this.rptaCedula=null,this.digitosCedulaMax=130,this.digitosCedulaMin=1}},e.prototype.soloNumeros=function(e){return e.charCode>=48&&e.charCode<=57},e.prototype.validarIdentificacion=function(){if(this.invProveedorTO.provId){var e={empresa:c.a.KEY_EMPRESA_SELECT,id:this.invProveedorTO.provId,codigo:this.invProveedorTO.provCodigo?this.invProveedorTO.provCodigo:null,razonSocial:this.invProveedorTO.provRazonSocial?this.invProveedorTO.provRazonSocial:null,nombre:this.invProveedorTO.provNombreComercial?this.invProveedorTO.provNombreComercial:null};if(this.rptaRepetido=null,this.proveedorService.obtenerSiEsProveedorRepetido(e,this,c.a.KEY_EMPRESA_SELECT),!this.empresaExtranjera)switch(this.invProveedorTO.provTipoId){case"R":case"C":this.validarCedula()}}},e.prototype.despuesDeObtenerSiEsProveedorRepetido=function(e){e?(this.rptaRepetido=this.constantes.MSJ_PROVEEDOR_EXISTENTE,this.toastr.warning(this.rptaRepetido,this.constantes.TAG_REPETIDO)):this.rptaRepetido=null,this.cargando=!1},e.prototype.validarCedula=function(){this.invProveedorTO.provId.length>9?this.proveedorService.validarCedula({cedula:this.invProveedorTO.provId},this,c.a.KEY_EMPRESA_SELECT):this.rptaCedula=c.a.MSJ_CEDULA_NO_VALIDA},e.prototype.despuesDeValidarCedula=function(e){"T"!=e?(this.rptaCedula=e,this.toastr.warning(e,c.a.TAG_CEDULA)):this.rptaCedula=null,this.cargando=!1},e.prototype.agregarEmail=function(){this.invProveedorTO.provEmail="";for(var e=0;e<this.correos.length;e++)e<this.correos.length-1?this.invProveedorTO.provEmail+=this.correos[e]+";":e==this.correos.length-1&&(this.invProveedorTO.provEmail+=this.correos[e])},e.prototype.agregarEmailCompra=function(){this.invProveedorTO.provEmailOrdenCompra="";for(var e=0;e<this.correosCompra.length;e++)e<this.correosCompra.length-1?this.invProveedorTO.provEmailOrdenCompra+=this.correosCompra[e]+";":e==this.correosCompra.length-1&&(this.invProveedorTO.provEmailOrdenCompra+=this.correosCompra[e])},e.prototype.validarAntesDeEnviar=function(e){var t=this;if(this.rptaCedula)return this.toastr.error(this.rptaCedula,c.a.TAG_CEDULA),this.cargando=!1,!1;if(this.rptaRepetido)return this.toastr.error(this.rptaRepetido,c.a.MSJ_CEDULO_REPETIDA),this.cargando=!1,!1;if(!e.valid)return this.utilService.establecerFormularioTocado(e),this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.TAG_CAMPOS_INVALIDOS),this.cargando=!1,!1;if(this.agregarEmail(),this.agregarEmailCompra(),this.invProveedorTO.provEmail)return!0;this.cargando=!1;var o={title:c.a.MSJ_TITULO_GUARDAR,texto:c.a.MSJ_PREGUNTA_GUARDAR_SIN_EMAIL,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e&&(t.accion==c.a.ACCION_CREAR?t.continuarInsersion():t.continuarEdicion())})},e.prototype.continuarInsersion=function(){this.llenarDatos(),this.cargando=!0,this.proveedorService.insertarProveedor({invProveedorTO:this.invProveedorTO},this,c.a.KEY_EMPRESA_SELECT)},e.prototype.continuarEdicion=function(){this.llenarDatos(),this.cargando=!0,this.proveedorService.modificarProveedor({invProveedorTO:this.invProveedorTO,codigoAnterior:this.codigoAnterior},this,c.a.KEY_EMPRESA_SELECT)},e.prototype.llenarDatos=function(){this.invProveedorTO.empCodigo=this.empresaSeleccionada.empCodigo,this.invProveedorTO.provNombreComercial=this.invProveedorTO.provNombreComercial?this.invProveedorTO.provNombreComercial:null,this.invProveedorTO.usrInsertaProveedor=this.auth.getCodigoUser(),this.empresaExtranjera||(this.invProveedorTO.provProvincia=this.provinciaSeleccionada?this.provinciaSeleccionada.nombre:"")},e.prototype.insertarProveedor=function(e){this.cargando=!0,this.validarAntesDeEnviar(e)&&this.continuarInsersion()},e.prototype.actualizarProveedor=function(e){this.utilService.puedoCancelar(this.valoresIniciales,this.frmProveedorDatos)?(this.cerrarFormularioProveedor.emit({invProveedorTO:null,mostrarFormulario:!1,accion:null}),this.toastr.warning(c.a.MSJ_NO_SE_REALIZO_NINGUN_CAMBIO,c.a.TOAST_INFORMACION)):(this.cargando=!0,this.validarAntesDeEnviar(e)&&this.continuarEdicion())},e.prototype.eliminarProveedor=function(){var e=this;if(this.proveedorService.verificarPermiso(c.a.ACCION_ELIMINAR,this,!0)){var t={title:c.a.MSJ_TITULO_ELIMINAR,texto:c.a.MSJ_PREGUNTA_ELIMINAR+"<br/>"+c.a.TAG_PROVEEDOR+": "+this.invProveedorTO.provRazonSocial,type:c.a.SWAL_WARNING,confirmButtonText:c.a.MSJ_SI_ELIMINAR,cancelButtonText:c.a.MSJ_NO_CANCELAR,confirmButtonColor:c.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t?(e.cargando=!0,e.proveedorService.eliminarProveedor({invProveedorTO:e.invProveedorTO},e,c.a.KEY_EMPRESA_SELECT)):e.cerrarFormulario()})}else this.cerrarFormulario()},e.prototype.modificarEstadoProveedor=function(){var e=this;if(this.proveedorService.verificarPermiso(c.a.ACCION_EDITAR,this,!0)){var t={title:this.invProveedorTO.provInactivo?c.a.MSJ_TITULO_ACTIVAR:c.a.MSJ_TITULO_INACTIVAR,texto:(this.invProveedorTO.provInactivo?c.a.MSJ_PREGUNTA_ACTIVAR:c.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Proveedor: "+this.invProveedorTO.provRazonSocial,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0,e.invProveedorTO.provInactivo=!e.invProveedorTO.provInactivo;var o={provEmpresa:e.invProveedorTO.provEmpresa,provCodigo:e.invProveedorTO.provCodigo};e.proveedorService.cambiarEstadoProveedor({invProveedorPK:o,estado:e.invProveedorTO.provInactivo},e,c.a.KEY_EMPRESA_SELECT)}else e.cerrarFormulario()})}else this.cerrarFormulario()},e.prototype.despuesDeInsertarProveedor=function(e){this.cargando=!1,this.cerrarFormularioProveedor.emit({invProveedorTO:e,mostrarFormulario:!1,accion:this.accion})},e.prototype.despuesDeModificarProveedor=function(e){this.cargando=!1,this.cerrarFormularioProveedor.emit({invProveedorTO:e,mostrarFormulario:!1,accion:this.accion})},e.prototype.despuesDeEliminarProveedor=function(){this.cargando=!1,this.cerrarFormularioProveedor.emit({invProveedorTO:this.invProveedorTO,mostrarFormulario:!1,accion:this.accion})},e.prototype.despuesDecambiarEstadoProveedor=function(){this.cargando=!1,this.cerrarFormularioProveedor.emit({invProveedorTO:this.invProveedorTO,mostrarFormulario:!1,accion:this.accion})},e.prototype.mostrarTipoContribuyente=function(){var e=this,t=this.modalService.open(os.a,{size:"lg",windowClass:"miSize",backdrop:"static"});t.componentInstance.empresaModal=this.empresaSeleccionada,t.componentInstance.razonSocial=this.invProveedorTO.provRazonSocial?"- "+this.invProveedorTO.provRazonSocial:this.invProveedorTO.provRazonSocial,t.result.then(function(t){e.listarInvProveedorCategoriaTO(),t.tipoContribuyenteSeleccionado&&(e.invProveedorTO.provCategoria=t.tipoContribuyenteSeleccionado?t.tipoContribuyenteSeleccionado.pcCodigo:""),e.definirAtajosDeTeclado()},function(){e.listarInvProveedorCategoriaTO(),e.definirAtajosDeTeclado()}),this.cdRef.detectChanges()},e.prototype.cerrarFormulario=function(){var e=this;switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_CREAR:if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmProveedorDatos))this.cerrarFormularioProveedor.emit({invProveedorTO:null,mostrarFormulario:!1,accion:null});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.cerrarFormularioProveedor.emit({invProveedorTO:null,mostrarFormulario:!1,accion:null})})}break;default:this.cerrarFormularioProveedor.emit({invProveedorTO:null,mostrarFormulario:!1,accion:null})}},e.prototype.cambiarEstadoActivar=function(){this.activar=!this.activar,this.activarEstado.emit(this.activar)},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.tamanioChico=function(e){1==e?document.querySelector("#correosolo .ui-chips-input-token input").className="chico form-control form-control-sm":2==e&&(document.querySelector("#correocompra .ui-chips-input-token input").className="chico form-control form-control-sm")},e.prototype.tamanioGrande=function(e){1==e&&0==this.correos.length?document.querySelector("#correosolo .ui-chips-input-token input").className="grande form-control form-control-sm":2==e&&0==this.correosCompra.length&&(document.querySelector("#correocompra .ui-chips-input-token input").className="grande form-control form-control-sm")},as([Object(i.Input)(),is("design:type",Object)],e.prototype,"parametros",void 0),as([Object(i.Output)(),is("design:type",Object)],e.prototype,"cerrarFormularioProveedor",void 0),as([Object(i.Output)(),is("design:type",Object)],e.prototype,"activarEstado",void 0),as([Object(i.ViewChild)("frmProveedorDatos"),is("design:type",I.NgForm)],e.prototype,"frmProveedorDatos",void 0),as([Object(i.HostListener)("window:beforeunload",["$event"]),is("design:type",Function),is("design:paramtypes",[Event]),is("design:returntype",void 0)],e.prototype,"unloadHandler",null),e=as([Object(i.Component)({selector:"app-proveedor-formulario",template:o("8Jgg"),styles:[o("dKhm")]}),is("design:paramtypes",[v,f.a,ts.a,oa.a,S.HotkeysService,h.a,T.b,u.b,i.ChangeDetectorRef,K.a])],e)}(),ns=function(){function e(e){this.invComprasPK=new Kt.a,this.compNumeroAlterno=null,this.compDocumentoEmpresa=null,this.compDocumentoProveedor=null,this.compDocumentoTipo=null,this.compDocumentoNumero=null,this.compFecha=null,this.compFechaVencimiento=null,this.compIvaVigente=0,this.compObservaciones=null,this.compElectronica=!1,this.compActivoFijo=!1,this.compImportacion=!1,this.compPendiente=!1,this.compRevisado=!1,this.compAnulado=!1,this.compFormaPago=null,this.compDocumentoFormaPago=null,this.compBase0=0,this.compBaseImponible=0,this.compBaseNoObjeto=0,this.compBaseExenta=0,this.compIce=0,this.compMontoIva=0,this.compOtrosImpuestos=0,this.compPropina=0,this.compTotal=0,this.compValorRetenido=0,this.compRetencionAsumida=!1,this.compSaldo=0,this.secEmpresa=null,this.secCodigo=null,this.ctaEmpresa=null,this.ctaCodigo=null,this.conEmpresa=null,this.conPeriodo=null,this.conTipo=null,this.conNumero=null,this.empCodigo=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invComprasRecepcionList=[],this.invComprasMotivoAnulacionList=[],this.invProveedor=new Zo.a,this.invBodega=new Et.a,this.invComprasDetalleList=[],this.invAdjuntoCompras=[],this.ocEmpresa=null,this.ocSector=null,this.ocMotivo=null,this.ocNumero=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invComprasPK=e.invComprasPK?e.invComprasPK:this.invComprasPK,this.compNumeroAlterno=e.compNumeroAlterno?e.compNumeroAlterno:this.compNumeroAlterno,this.compDocumentoEmpresa=e.compDocumentoEmpresa?e.compDocumentoEmpresa:this.compDocumentoEmpresa,this.compDocumentoProveedor=e.compDocumentoProveedor?e.compDocumentoProveedor:this.compDocumentoProveedor,this.compDocumentoTipo=e.compDocumentoTipo?e.compDocumentoTipo:this.compDocumentoTipo,this.compDocumentoNumero=e.compDocumentoNumero?e.compDocumentoNumero:this.compDocumentoNumero,this.compFecha=e.compFecha?e.compFecha:this.compFecha,this.compFechaVencimiento=e.compFechaVencimiento?e.compFechaVencimiento:this.compFechaVencimiento,this.compIvaVigente=e.compIvaVigente?e.compIvaVigente:this.compIvaVigente,this.compObservaciones=e.compObservaciones?e.compObservaciones:this.compObservaciones,this.compElectronica=e.compElectronica?e.compElectronica:this.compElectronica,this.compActivoFijo=e.compActivoFijo?e.compActivoFijo:this.compActivoFijo,this.compImportacion=e.compImportacion?e.compImportacion:this.compImportacion,this.compPendiente=e.compPendiente?e.compPendiente:this.compPendiente,this.compRevisado=e.compRevisado?e.compRevisado:this.compRevisado,this.compAnulado=e.compAnulado?e.compAnulado:this.compAnulado,this.compFormaPago=e.compFormaPago?e.compFormaPago:this.compFormaPago,this.compDocumentoFormaPago=e.compDocumentoFormaPago?e.compDocumentoFormaPago:this.compDocumentoFormaPago,this.compBase0=e.compBase0?e.compBase0:this.compBase0,this.compBaseImponible=e.compBaseImponible?e.compBaseImponible:this.compBaseImponible,this.compBaseNoObjeto=e.compBaseNoObjeto?e.compBaseNoObjeto:this.compBaseNoObjeto,this.compBaseExenta=e.compBaseExenta?e.compBaseExenta:this.compBaseExenta,this.compIce=e.compIce?e.compIce:this.compIce,this.compMontoIva=e.compMontoIva?e.compMontoIva:this.compMontoIva,this.compOtrosImpuestos=e.compOtrosImpuestos?e.compOtrosImpuestos:this.compOtrosImpuestos,this.compPropina=e.compPropina?e.compPropina:this.compPropina,this.compTotal=e.compTotal?e.compTotal:this.compTotal,this.compValorRetenido=e.compValorRetenido?e.compValorRetenido:this.compValorRetenido,this.compRetencionAsumida=e.compRetencionAsumida?e.compRetencionAsumida:this.compRetencionAsumida,this.compSaldo=e.compSaldo?e.compSaldo:this.compSaldo,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.ctaEmpresa=e.ctaEmpresa?e.ctaEmpresa:this.ctaEmpresa,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.conEmpresa=e.conEmpresa?e.conEmpresa:this.conEmpresa,this.conPeriodo=e.conPeriodo?e.conPeriodo:this.conPeriodo,this.conTipo=e.conTipo?e.conTipo:this.conTipo,this.conNumero=e.conNumero?e.conNumero:this.conNumero,this.empCodigo=e.empCodigo?e.empCodigo:this.empCodigo,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invComprasRecepcionList=e.invComprasRecepcionList?e.invComprasRecepcionList:this.invComprasRecepcionList,this.invComprasMotivoAnulacionList=e.invComprasMotivoAnulacionList?e.invComprasMotivoAnulacionList:this.invComprasMotivoAnulacionList,this.invProveedor=e.invProveedor?e.invProveedor:this.invProveedor,this.invBodega=e.invBodega?e.invBodega:this.invBodega,this.invComprasDetalleList=e.invComprasDetalleList?e.invComprasDetalleList:this.invComprasDetalleList,this.invAdjuntoCompras=e.invAdjuntoCompras?e.invAdjuntoCompras:this.invAdjuntoCompras,this.ocEmpresa=e.ocEmpresa?e.ocEmpresa:this.ocEmpresa,this.ocSector=e.ocSector?e.ocSector:this.ocSector,this.ocMotivo=e.ocMotivo?e.ocMotivo:this.ocMotivo,this.ocNumero=e.ocNumero?e.ocNumero:this.ocNumero},e}(),ss=function(){function e(e){this.adjSecuencial=null,this.adjTipo=null,this.adjArchivo=null,this.invCompras=new ns,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.adjSecuencial=e.adjSecuencial?e.adjSecuencial:this.adjSecuencial,this.adjTipo=e.adjTipo?e.adjTipo:this.adjTipo,this.adjArchivo=e.adjArchivo?e.adjArchivo:this.adjArchivo,this.invCompras=e.invCompras?e.invCompras:this.invCompras},e}(),cs=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},ls=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ds=function(){function e(){this.archivoPerfilByte=null,this.constantes=c.a,this.listadoImagenes=new Array,this.listadoImagenesEliminados=new Array,this.mostrarFileUploadNuevo=!0,this.visualizarImagen=!1,this.imagen=!1}return e.prototype.ngOnInit=function(){},e.prototype.crearInvAdjuntosCompras=function(e){var t=new ss,o=e;return t.adjArchivo=o,t},e.prototype.seleccionarImagenes=function(e){if(e&&e.files)for(var t=0;t<e.files.length;t++)this.convertirFiles(e.files[t])},e.prototype.convertirFiles=function(e){var t=this;if(e.size<=1e6){var o=new FileReader;o.readAsDataURL(e),o.onload=function(){if(o.result){var e=t.crearInvAdjuntosCompras(o.result);if(0===t.listadoImagenes.length)t.listadoImagenes.push(e);else!t.listadoImagenes.find(function(t){return t.adjArchivo===e.adjArchivo})&&t.listadoImagenes.push(e)}}}},e.prototype.eliminarItem=function(e){var t=this;if(e.adjArchivo){var o=new FileReader;o.readAsDataURL(e.adjArchivo),o.onload=function(){if(o.result){var e=t.crearInvAdjuntosCompras(o.result);t.eliminar(e)}}}},e.prototype.eliminar=function(e){if(e.adjSecuencial)var t=this.listadoImagenes.findIndex(function(t){return t.adjSecuencial===e.adjSecuencial});else t=this.listadoImagenes.findIndex(function(t){return t.adjArchivo===e.adjArchivo});var o=this.listadoImagenes.slice();o.splice(t,1),this.listadoImagenes=o,e.adjSecuencial&&this.listadoImagenesEliminados.push(e)},e.prototype.visualizar=function(e){this.imagen=e,this.visualizarImagen=!0},e=cs([Object(i.Component)({selector:"app-subir-imagenes",template:o("c+4B")}),ls("design:paramtypes",[])],e)}(),ps=o("1Rfj"),us=function(){function e(e){this.id=0,this.cxppPeriodo="",this.cxppMotivo="",this.cxppNumero="",this.cxppAlterno="",this.cxppDocumentoNumero="",this.cxppSector="",this.cxppFechaEmision="",this.cxppFechaVencimiento="",this.cxppTotal=0,this.cxppAbonos=0,this.cxppSaldo=0,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.cxppPeriodo=e.cxppPeriodo?e.cxppPeriodo:this.cxppPeriodo,this.cxppMotivo=e.cxppMotivo?e.cxppMotivo:this.cxppMotivo,this.cxppNumero=e.cxppNumero?e.cxppNumero:this.cxppNumero,this.cxppAlterno=e.cxppAlterno?e.cxppAlterno:this.cxppAlterno,this.cxppDocumentoNumero=e.cxppDocumentoNumero?e.cxppDocumentoNumero:this.cxppDocumentoNumero,this.cxppSector=e.cxppSector?e.cxppSector:this.cxppSector,this.cxppFechaEmision=e.cxppFechaEmision?e.cxppFechaEmision:this.cxppFechaEmision,this.cxppFechaVencimiento=e.cxppFechaVencimiento?e.cxppFechaVencimiento:this.cxppFechaVencimiento,this.cxppTotal=e.cxppTotal?e.cxppTotal:this.cxppTotal,this.cxppAbonos=e.cxppAbonos?e.cxppAbonos:this.cxppAbonos,this.cxppSaldo=e.cxppSaldo?e.cxppSaldo:this.cxppSaldo,this.id=e.id?e.id:this.id},e}(),hs=o("dqpl"),ms=function(){function e(e){this.conApellidosNombres="",this.pagPeriodo="",this.pagTipo="",this.pagNumero="",this.pagReversado=!1,this.pagSaldoAnterior=0,this.pagValor=0,this.pagSaldoActual=0,this.pagFecha="",this.pagObservaciones="",this.provCodigo="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.conApellidosNombres=e.conApellidosNombres?e.conApellidosNombres:this.conApellidosNombres,this.pagPeriodo=e.pagPeriodo?e.pagPeriodo:this.pagPeriodo,this.pagTipo=e.pagTipo?e.pagTipo:this.pagTipo,this.pagNumero=e.pagNumero?e.pagNumero:this.pagNumero,this.pagReversado=e.pagReversado?e.pagReversado:this.pagReversado,this.pagSaldoAnterior=e.pagSaldoAnterior?e.pagSaldoAnterior:this.pagSaldoAnterior,this.pagValor=e.pagValor?e.pagValor:this.pagValor,this.pagSaldoActual=e.pagSaldoActual?e.pagSaldoActual:this.pagSaldoActual,this.pagFecha=e.pagFecha?e.pagFecha:this.pagFecha,this.pagObservaciones=e.pagObservaciones?e.pagObservaciones:this.pagObservaciones,this.provCodigo=e.provCodigo?e.provCodigo:this.provCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),Cs=function(){function e(e){this.id=null,this.compStatus=null,this.compDocumentoNumero=null,this.compFecha=null,this.provCodigo=null,this.provRazonSocial=null,this.compBase0=null,this.compBaseImponible=null,this.compMontoIva=null,this.compTotal=null,this.compFormaPago=null,this.compObservaciones=null,this.compNumero=null,this.conContable=null,this.compDatosAdjuntos=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.compStatus=e.compStatus?e.compStatus:this.compStatus,this.compDocumentoNumero=e.compDocumentoNumero?e.compDocumentoNumero:this.compDocumentoNumero,this.compFecha=e.compFecha?e.compFecha:this.compFecha,this.provCodigo=e.provCodigo?e.provCodigo:this.provCodigo,this.provRazonSocial=e.provRazonSocial?e.provRazonSocial:this.provRazonSocial,this.compBase0=e.compBase0?e.compBase0:this.compBase0,this.compBaseImponible=e.compBaseImponible?e.compBaseImponible:this.compBaseImponible,this.compMontoIva=e.compMontoIva?e.compMontoIva:this.compMontoIva,this.compTotal=e.compTotal?e.compTotal:this.compTotal,this.compFormaPago=e.compFormaPago?e.compFormaPago:this.compFormaPago,this.compObservaciones=e.compObservaciones?e.compObservaciones:this.compObservaciones,this.compNumero=e.compNumero?e.compNumero:this.compNumero,this.conContable=e.conContable?e.conContable:this.conContable,this.compDatosAdjuntos=e.compDatosAdjuntos?e.compDatosAdjuntos:this.compDatosAdjuntos},e}(),vs=o("n1xb"),As=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},fs=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},gs=function(){function e(e,t,o,a,r,n,s,d,p){this.toastr=e,this.atajoService=t,this.modalService=o,this.utilService=a,this.auth=r,this.pagoAnticipoService=n,this.pagoService=s,this.periodoService=d,this.listadoPagosService=p,this.empresaSeleccionada=new l.a,this.parametrosFormulario={},this.enviarAccion=new i.EventEmitter,this.titulo=c.a.CARTERA_PAGOS,this.constantes=c.a,this.accion=null,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.vistaFormulario=!1,this.cobrarTodosCheck=!1,this.seEncontraronResultados=!1,this.es={},this.conContable=new Ua.a,this.listaFormaPago=new Array,this.listadoPagos=new Array,this.listadoPagosAnticipos=new Array,this.pago=new ms,this.listadoDeFormasDePago=new Array,this.listadoDePagoCompraAGuardar=new Array,this.mostrarAccionesContabilidad=!0,this.tipoDocumento="",this.objetoSeleccionado=new Xn.a,this.compraSeleccionada=new us,this.fechaActual=new Date,this.codigoProveedor=null,this.observaciones="",this.direccion="",this.ruc="",this.isFechaValido=!0,this.totales={},this.columnDefs=[],this.columnDefsSelected=[],this.noData=c.a.MSJ_NO_HAY_DATOS,Ut.locale("es"),this.es=this.utilService.setLocaleDate(),this.configAutonumericReales=s.obtenerAutonumericReales()}return e.prototype.ngOnInit=function(){c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.isScreamMd=!(this.innerWidth<=c.a.WINDOW_WIDTH_XS),this.accion=this.parametrosFormulario.accion,this.objetoSeleccionado=this.parametrosFormulario.seleccionado,this.generarAtajos(),this.parametrosFormulario.proveedor&&this.completarDatosProveedor(this.parametrosFormulario.proveedor),this.accion!=c.a.ACCION_CREAR&&(this.titulo=this.titulo+" ("+this.objetoSeleccionado.pagNumeroSistema+")",this.obtenerInformacionParaMostrarPago()),this.iniciarAgGrid()},e.prototype.completarDatosProveedor=function(e){var t=this;this.codigoProveedor=e.provCodigo,this.pago.provCodigo=e.provCodigo,this.pago.conApellidosNombres=e.provRazonSocial,this.direccion=e.provDireccion,this.ruc=e.provIdNumero,this.obtenerDatosParaCrudPagos(),setTimeout(function(){t.focusInput("fecha")},50)},e.prototype.obtenerDatosParaCrudPagos=function(){this.totales=this.pagoService.inicializarTotales(),this.seEncontraronResultados=!1,this.cargando=!0;var e={empresa:c.a.KEY_EMPRESA_SELECT,proveedor:this.codigoProveedor,accion:"P"};this.pagoService.obtenerDatosParaPagos(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosParaPagos=function(e){this.fechaActual=new Date(e.fechaActual),this.listaFormaPago=e.listaForma,this.listadoPagos=e.listaPagos,this.completarTablaPagos(),this.listadoPagosAnticipos=e.listaAnticipo,this.cargando=!1,this.validarFechaPorPeriodo(),this.extraerValoresIniciales(),this.seEncontraronResultados=!0},e.prototype.obtenerInformacionParaMostrarPago=function(){this.seEncontraronResultados=!1,this.cargando=!0;var e=this.utilService.obtenerConContablePK(this.objetoSeleccionado.pagNumeroSistema,c.a.KEY_EMPRESA_SELECT,"|"),t={empresa:c.a.KEY_EMPRESA_SELECT,periodo:e.conPeriodo,tipo:e.conTipo,numero:e.conNumero};this.pagoService.obtenerPago(t,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerPago=function(e){this.formatearPago(e.pago),this.listadoPagos=e.listaPagos,this.completarTablaPagos(),this.listadoDeFormasDePago=e.listadoDeFormasDePago,this.conContable=e.contable?e.contable:new Ua.a,this.fechaActual=new Date(this.conContable.conFecha),this.cargando=!1,this.extraerValoresIniciales(),this.seEncontraronResultados=!0},e.prototype.formatearPago=function(e){this.codigoProveedor=this.pago.provCodigo=e.provCodigo,this.pago.conApellidosNombres=e.provRazonSocial,this.direccion=e.provDireccion,this.observaciones=e.provObservaciones,this.ruc=e.provRuc,this.pago.pagValor=e.pagValor},e.prototype.validarFechaPorPeriodo=function(){if(this.isFechaValido=!1,this.fechaActual){var e={fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaActual),empresa:c.a.KEY_EMPRESA_SELECT};this.periodoService.getPeriodoPorFecha(e,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesDeGetPeriodoPorFecha=function(e){e&&!e.perCerrado?this.isFechaValido=!0:this.isFechaValido=!1},e.prototype.buscarProveedor=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)&&this.pago.provCodigo&&!(this.pago.provCodigo&&this.codigoProveedor&&this.pago.provCodigo===this.codigoProveedor)){var t={empresa:c.a.KEY_EMPRESA_SELECT,inactivos:!1,busqueda:this.pago.provCodigo};e.srcElement.blur(),e.preventDefault(),this.abrirModalProveedor(t)}},e.prototype.abrirModalProveedor=function(e){var t=this,o=this.modalService.open(n.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametrosBusqueda=e,o.componentInstance.isModal=!0,o.result.then(function(e){e?(t.codigoProveedor=e.provCodigo,t.pago.provCodigo=e.provCodigo,t.pago.conApellidosNombres=e.provRazonSocial,t.direccion=e.provDireccion,t.ruc=e.provId,t.obtenerDatosParaCrudPagos(),t.focusInput("fecha")):t.focusInput("proveedor")},function(){t.focusInput("proveedor")})},e.prototype.validarProveedor=function(){this.codigoProveedor!==this.pago.provCodigo&&(this.codigoProveedor=null,this.pago.conApellidosNombres="",this.pago.provCodigo="",this.direccion="",this.ruc="",this.listadoDeFormasDePago=new Array,this.listadoDePagoCompraAGuardar=new Array)},e.prototype.focusInput=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.pararEdicionDeTablas=function(){this.gridApi&&this.gridApi.stopEditing(),this.gridApiAnticipo&&this.gridApiAnticipo.stopEditing(),this.gridApiForma&&this.gridApiForma.stopEditing()},e.prototype.guardar=function(e){if(this.pararEdicionDeTablas(),this.utilService.verificarPermiso(this.accion,this,!0)&&this.validarAntesDeEnviar(e)){this.cargando=!0,this.antesDeGuardar();var t={carPagosTO:this.pago,carPagosDetalleComprasTOs:this.listadoDePagoCompraAGuardar,carPagosDetalleAnticiposTOs:0!=this.totales.anticipo?this.pagoService.armarAnticipos(this.listadoPagosAnticipos):new Array,carPagosDetalleFormaTOs:0!=this.totales.forma?this.pagoService.armarFormasDePago(this.listadoDeFormasDePago):new Array};this.pagoService.insertarCarPagos(t,this,c.a.KEY_EMPRESA_SELECT)}},e.prototype.validarAntesDeEnviar=function(e){var t=this.utilService.establecerFormularioTocado(e);if(!(e&&e.valid&&t&&this.isFechaValido))return this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),!1;if(!this.listadoPagos||this.listadoPagos.length<=0)return this.toastr.warning(c.a.MSJ_NO_EXISTEN_DOCUMENTOS_POR_PAGAR,c.a.MSJ_TITULO_INVALIDOS),!1;for(var o=0;o<this.listadoPagos.length;o++){if((a=this.listadoPagos[o])&&a.valor&&0!=a.valor){if(a.valor<0&&this.utilService.quitarComasNumero(a.valor)<a.cxppSaldo)return this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),!1;if(this.pagoService.validarFechaFactura(a.cxppFechaEmision,this.fechaActual))return this.toastr.warning(c.a.MSJ_COBRANDO_FACTURA_CON_FECHA_ANTERIOR,c.a.MSJ_TITULO_INVALIDOS),!1}}if(0!=this.totales.forma)for(o=0;o<this.listadoDeFormasDePago.length;o++){var a;if(!((a=this.listadoDeFormasDePago[o])&&a.fpSeleccionada&&(a.fpSeleccionada.fpDetalle||a.detValor&&0==a.detValor)))return this.toastr.warning(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),!1}return 0==this.utilService.quitarComasNumero(this.totales.diferencia)||(this.toastr.warning(c.a.MSJ_LOS_VALORES_TOTALES_NO_COINCIDEN,c.a.MSJ_TITULO_INVALIDOS),!1)},e.prototype.antesDeGuardar=function(){this.listadoDePagoCompraAGuardar=new Array,this.pago.pagTipo="C-PAG",this.pago.usrEmpresa=c.a.KEY_EMPRESA_SELECT,this.pago.usrCodigo=this.auth.getCodigoUser(),this.pago.pagSaldoAnterior=0,this.pago.pagValor=0,this.pago.pagSaldoActual=0,this.pago.pagFecha=this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaActual),this.pago.pagObservaciones=this.observaciones;for(var e=0;e<this.listadoPagos.length;e++){var t=this.listadoPagos[e];if(t.valor&&0!=t.valor){var o=this.pagoService.armarPagoParaGuardar(t,this.codigoProveedor);this.listadoDePagoCompraAGuardar.push(o),this.pago.pagSaldoAnterior=this.mathRound2(this.pago.pagSaldoAnterior)+this.mathRound2(t.cxppSaldo),this.pago.pagValor=this.mathRound2(this.pago.pagValor)+this.mathRound2(t.valor),this.pago.pagSaldoActual=this.mathRound2(this.pago.pagSaldoAnterior)-this.mathRound2(this.pago.pagValor)}}},e.prototype.despuesDeInsertarCarPagos=function(e){if(e)try{this.conContable=e.extraInfo,this.preguntarImprimir(e.operacionMensaje)}catch(t){this.cargando=!1,this.cerrarFormulario()}else this.cargando=!1},e.prototype.cerrarFormulario=function(){var e={accion:c.a.ACCION_CREADO,resultante:this.pagoService.construirObjetoParaPonerloEnLaLista(this.pago,this.conContable),empresa:this.empresaSeleccionada};this.cargando=!1,this.enviarAccion.emit(e)},e.prototype.ejecutarMetodoChecbox=function(e){e.cobrar?e.valor=e.cxppSaldo:e.valor=0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.calcularTotal()},e.prototype.cambiarEstadoCheckCabecera=function(e){e?this.gridApi.forEachNode(function(e){var t=e.data;t.valor=t.cxppSaldo,t.cobrar=!0}):this.gridApi.forEachNode(function(e){var t=e.data;t.valor=0,t.cobrar=!1}),this.refreshGrid(),this.calcularTotal()},e.prototype.cambioValor=function(e){e.valor===e.cxppSaldo?e.cobrar=!0:e.cobrar=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.calcularTotal()},e.prototype.calcularTotal=function(){var e=this;this.cobrarTodosCheck=!0,this.totales.pago=0,this.gridApi.forEachNode(function(t){var o=t.data;e.totales.pago=e.mathRound2(e.totales.pago)+e.mathRound2(o.valor),e.totales.diferencia=e.mathRound2(e.totales.pago)-(e.mathRound2(e.totales.forma)+e.mathRound2(e.totales.anticipo)),o.valor!=o.cxppSaldo&&(e.cobrarTodosCheck=!1)})},e.prototype.completarTablaPagos=function(){if(this.cobrarTodosCheck=!0,this.totales.pago=0,this.listadoPagos)for(var e=0;e<this.listadoPagos.length;e++){var t=this.listadoPagos[e];this.listadoPagos[e].valor=t.valor?t.valor:0,t.valor===t.cxppSaldo?this.listadoPagos[e].cobrar=!0:this.listadoPagos[e].cobrar=!1,t.valor!=t.cxppSaldo&&(this.cobrarTodosCheck=!1),t.valor=this.accion==c.a.ACCION_CREAR?t.valor:t.cxppAbonos,this.totales.pago=this.mathRound2(this.totales.pago)+this.mathRound2(t.valor),this.totales.diferencia=this.mathRound2(this.totales.pago)-(this.mathRound2(this.totales.forma)+this.mathRound2(this.totales.anticipo))}},e.prototype.mathRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.imprimirListaPagosIndividual=function(){if(this.utilService.verificarPermiso(c.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,numeroSistema:[this.objetoSeleccionado.pagNumeroSistema],nombre:"reportPagos.jrxml"};this.listadoPagosService.imprimirPagosPorLote(e,this,this.empresaSeleccionada)}},e.prototype.preguntarImprimir=function(e){var t=this,o=[this.conContable.conContablePK],a=[this.conContable.conContablePK.conPeriodo+" | "+this.conContable.conContablePK.conTipo+" | "+this.conContable.conContablePK.conNumero],i=this.modalService.open(Bi.a,{backdrop:"static"});i.componentInstance.mensaje=e,i.componentInstance.mostrarCombo=!0,i.componentInstance.empresaSeleccionada=this.empresaSeleccionada,i.componentInstance.textoImprimirCombo=c.a.LABEL_IMPRIMIR_COMPROBANTE_COBRO,i.componentInstance.parametrosImprimir={listadoPK:o},i.componentInstance.nombreRutaImprimir="todocompuWS/contabilidadWebController/generarReporteContableIndividual",i.componentInstance.nombreArchivoPDFImprimir="ContablePago",i.componentInstance.parametrosImprimirCombo={empresa:c.a.KEY_EMPRESA_SELECT,numeroSistema:a,nombre:"reportPagos.jrxml"},i.componentInstance.nombrerutaImprimirCombo="todocompuWS/carteraWebController/generarReportePorLotePagos",i.componentInstance.nombreArchivoPDFImprimirCombo="ReporteComprobantePago",i.result.then(function(e){t.cerrarFormulario()},function(){t.cerrarFormulario()})},e.prototype.anular=function(){var e={conContablePK:this.conContable.conContablePK,anularReversar:!0,accionUsuario:"ANULAR",bandera:""};this.cargando=!0,this.pagoAnticipoService.anularReversarContable(this,e)},e.prototype.reversar=function(){var e={conContablePK:this.conContable.conContablePK,anularReversar:!1,accionUsuario:"REVERSAR",bandera:""};this.cargando=!0,this.pagoAnticipoService.anularReversarContable(this,e)},e.prototype.despuesDeAnularReversarContable=function(e){this.cargando=!1,this.utilService.generarSwal(c.a.SWAL_CORRECTO,c.a.SWAL_SUCCESS,e.operacionMensaje);var t={accion:c.a.ACCION_ELIMINADO};this.cargando=!1,this.enviarAccion.emit(t)},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmDatos?e.frmDatos.value:null))},50)},e.prototype.cancelar=function(){var e=this;if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmDatos))this.enviarAccion.emit({accion:c.a.ACCION_CANCELAR});else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&e.enviarAccion.emit({accion:c.a.ACCION_CANCELAR})})}},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarAccion.emit({accion:c.a.ACCION_ACTIVAR,estado:!e})},e.prototype.generarAtajos=function(){var e=this;this.atajoService.add(new S.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_GUARDAR,function(){e.focusInput("proveedor"),e.pararEdicionDeTablas();var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_CANCELAR,function(){e.focusInput("proveedor"),e.pararEdicionDeTablas();var t=document.getElementById("btnCancelar");return t&&t.click(),!1})),this.atajoService.add(new S.Hotkey(c.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirContable");return e&&e.click(),!1}))},e.prototype.generarOpciones=function(){var e=this;this.opciones=[{label:c.a.LABEL_CONSULTAR_COMPRA,icon:c.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.consultarCompra()}}]},e.prototype.consultarCompra=function(){(new Cs).compNumero=this.compraSeleccionada.cxppPeriodo+"|"+this.compraSeleccionada.cxppMotivo+"|"+this.compraSeleccionada.cxppNumero,this.parametrosCompra={accion:c.a.ACCION_CONSULTAR,parametroBusqueda:{empresa:c.a.KEY_EMPRESA_SELECT,periodo:this.compraSeleccionada.cxppPeriodo,motivo:this.compraSeleccionada.cxppMotivo,numero:this.compraSeleccionada.cxppNumero}}},e.prototype.ejecutarAccion=function(e){switch(e.accion){case c.a.ACCION_ACTIVAR:this.cambiarActivar(e.estado);break;case c.a.ACCION_CANCELAR:this.generarAtajos(),this.parametrosCompra=null,this.objetoContableEnviar=null;break;case c.a.ACCION_CONSULTAR_CONTABLE:this.parametrosCompra=null,this.verContable(e.objetoSeleccionado)}},e.prototype.verContable=function(e){e?(this.mostrarAccionesContabilidad=!0,this.cargando=!0,this.objetoContableEnviar={accion:c.a.ACCION_CONSULTAR,contable:e.antPeriodo+" | "+e.antTipo+" | "+e.antNumero,empresaSeleccionada:this.empresaSeleccionada,activar:!0,volverACargar:!0},this.activar=!0):this.toastr.warning(c.a.MSJ_NO_HAY_PARAMETROS_DE_BUSQUEDA,c.a.TAG_AVISO)},e.prototype.cerrarContabilidadAcciones=function(e){e.noIniciarAtajoPadre||(this.generarAtajos(),this.activar=!1,this.objetoContableEnviar=e.objetoEnviar,this.mostrarAccionesContabilidad=e.mostrarContilidadAcciones)},e.prototype.cambiarEstadoCargando=function(e){this.cargando=e},e.prototype.cambiarEstadoActivar=function(e){this.cambiarActivar(e)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.pagoService.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.compraSeleccionada=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.compraSeleccionada=t?t.data:null,this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}))},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.alCambiarValorDeCelda=function(e){"valor"===e.colDef.field&&this.cambioValor(e.data)},e.prototype.unloadHandler=function(e){switch(this.accion){case c.a.ACCION_CREAR:e.returnValue=!1;break;default:return!0}},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=c.a.WINDOW_WIDTH_XS)},As([Object(i.Input)(),fs("design:type",l.a)],e.prototype,"empresaSeleccionada",void 0),As([Object(i.Input)(),fs("design:type",Object)],e.prototype,"parametrosFormulario",void 0),As([Object(i.Output)(),fs("design:type",Object)],e.prototype,"enviarAccion",void 0),As([Object(i.Input)(),fs("design:type",String)],e.prototype,"titulo",void 0),As([Object(i.ViewChild)("frmDatos"),fs("design:type",I.NgForm)],e.prototype,"frmDatos",void 0),As([Object(i.ViewChild)("menuOpciones"),fs("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),As([Object(i.HostListener)("window:beforeunload",["$event"]),fs("design:type",Function),fs("design:paramtypes",[Event]),fs("design:returntype",void 0)],e.prototype,"unloadHandler",null),As([Object(i.HostListener)("window:resize",["$event"]),fs("design:type",Function),fs("design:paramtypes",[]),fs("design:returntype",void 0)],e.prototype,"onResize",null),e=As([Object(i.Component)({selector:"app-pago-formulario",template:o("HfXy")}),fs("design:paramtypes",[u.b,S.HotkeysService,T.b,h.a,K.a,ps.a,hs.a,qe.a,vs.a])],e)}(),bs=o("faRU"),Os=o("y2/l"),Ss=o("Uu9l"),Is=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Es=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Rs=function(){function e(e){this.utilService=e,this.listaFormaPago=new Array,this.listadoDeFormasDePago=new Array,this.totales={},this.accion=null,this.constantes=c.a,this.objetoSeleccionado=new Ss.a,this.fpSeleccionada=new bs.a,this.columnDefs=[],this.columnDefsSelected=[],this.noData=c.a.MSJ_NO_HAY_DATOS}return e.prototype.ngOnInit=function(){this.fpSeleccionada=this.listaFormaPago[0],this.iniciarAgGrid(),this.accion==c.a.ACCION_CREAR?this.nuevoItem():this.formatearFormasDePago()},e.prototype.nuevoItem=function(){var e=new Ss.a;this.listadoDeFormasDePago.push(e)},e.prototype.formatearFormasDePago=function(){this.totales.forma=0;for(var e=0;e<this.listadoDeFormasDePago.length;e++){var t=this.listadoDeFormasDePago[e];this.listadoDeFormasDePago[e].detValor=t.fpValor,this.listadoDeFormasDePago[e].detReferencia=t.fpReferencia,this.listadoDeFormasDePago[e].detObservaciones=t.fpObservacion,this.totales.forma=this.mathRound2(this.totales.forma)+this.mathRound2(this.listadoDeFormasDePago[e].detValor),this.totales.diferencia=this.mathRound2(this.totales.pago)-(this.mathRound2(this.totales.forma)+this.mathRound2(this.totales.anticipo))}},e.prototype.calcularTotal=function(){var e=this;this.totales.forma=0,this.gridApi.forEachNode(function(t){var o=t.data;e.totales.forma=e.mathRound2(e.totales.forma)+e.mathRound2(o.detValor),e.totales.diferencia=e.mathRound2(e.totales.pago)-(e.mathRound2(e.totales.forma)+e.mathRound2(e.totales.anticipo))})},e.prototype.mathRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.generarOpciones=function(e){var t=this;this.opciones=[{label:c.a.ACCION_AGREGAR_FILA_ARRIBA,icon:c.a.ICON_FLECHA_ARRIBA,disabled:!1,command:function(){return t.agregarFila("up",e)}},{label:c.a.ACCION_AGREGAR_FILA_ABAJO,icon:c.a.ICON_FLECHA_ABAJO,disabled:!1,command:function(){return t.agregarFila("down",e)}},{label:c.a.ACCION_ELIMINAR_FILA,icon:c.a.ICON_ELIMINAR,disabled:!1,command:function(){return t.eliminarFila(e)}}]},e.prototype.agregarFila=function(e,t,o){var a=t;a>=0&&this.agregarFilaByIndex(a,e,o)},e.prototype.agregarFilaByIndex=function(e,t,o){var a="up"===t?e:e+1,i=new Ss.a;this.listadoDeFormasDePago.splice(a,0,i),this.gridApi&&this.gridApi.updateRowData({add:[i],addIndex:a}),o?this.cantidadFocusAndEditingCell(e):this.focusedFP(a),this.refreshGrid()},e.prototype.focusedFP=function(e){var t=this;setTimeout(function(){t.FPFocusAndEditingCell(e)},50)},e.prototype.FPFocusAndEditingCell=function(e){this.gridApi&&(this.gridApi.setFocusedCell(e,"fpSeleccionada"),this.gridApi.startEditingCell({rowIndex:e,colKey:"fpSeleccionada"}))},e.prototype.cantidadFocusAndEditingCell=function(e){this.gridApi&&(this.gridApi.setFocusedCell(e,"detValor"),this.gridApi.startEditingCell({rowIndex:e,colKey:"detValor"}),this.gridApi.ensureIndexVisible(e+1))},e.prototype.eliminarFila=function(e){if(this.listadoDeFormasDePago.length>1){var t=e;this.quitarElementoDeFila(t)}},e.prototype.quitarElementoDeFila=function(e){this.listadoDeFormasDePago.splice(e,1),this.gridApi&&this.gridApi.updateRowData({remove:[this.objetoSeleccionado],addIndex:e}),this.refreshGrid()},e.prototype.agregarFilaAlFinal=function(e){var t=e.event.keyCode,o=e.node.rowIndex;this.objetoSeleccionado=this.listadoDeFormasDePago[o],this.utilService.validarKeyBuscar(t)&&this.accion===c.a.ACCION_CREAR&&o>=0&&o===this.listadoDeFormasDePago.length-1&&(e.event.srcElement.blur(),e.event.preventDefault(),this.agregarFilaByIndex(o,"down",!1))},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){var o=this.gridApi?this.gridApi.getFocusedCell():null;o&&this.mostrarContextMenu(t,o.rowIndex,e)},e.prototype.mostrarContextMenu=function(e,t,o){this.objetoSeleccionado=e,this.accion===c.a.ACCION_CREAR&&(this.generarOpciones(t),this.menuOpciones.show(o),o.stopPropagation())},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.objetoSeleccionado=t?t.data:null,this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}))},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.alCambiarValorDeCelda=function(e){"detValor"===e.colDef.field&&this.calcularTotal()},e.prototype.generarColumnas=function(e){var t=this,o=[];return o.push({headerName:c.a.TAG_FORMA_PAGO,field:"fpForma",width:100,minWidth:100,maxWitdh:100,hide:e.accion===c.a.ACCION_CREAR},{headerName:c.a.TAG_FORMA_PAGO,field:"fpSeleccionada",width:160,minWidth:160,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDePago)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClass:"text-center",cellClassRules:{"cell-with-errors":function(t){return!t.data.fpSeleccionada&&e.accion===c.a.ACCION_CREAR}},editable:e.accion===c.a.ACCION_CREAR,cellEditorFramework:tr.a,cellEditorParams:function(t){return{value:t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,name:"fpSeleccionada",obligatorio:!0,listValues:e.listaFormaPago?e.listaFormaPago:[],fieldsShow:["fpDetalle"]}},valueFormatter:function(t){return t.data.fpSeleccionada=t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,t.data.fpSeleccionada?t.node.rowPinned?t.data.fpSeleccionada:t.data.fpSeleccionada.fpDetalle:e.fpSeleccionada?e.fpSeleccionada.fpDetalle:""},hide:e.accion!=c.a.ACCION_CREAR},{headerName:c.a.TAG_REFERENCIA,field:"detReferencia",width:110,minWidth:110,cellClass:"mousetrap",editable:e.accion===c.a.ACCION_CREAR,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDePago)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:Jo.a,cellEditorParams:{name:"detReferencia",inputClass:"text-uppercase"}},{headerName:c.a.TAG_VALOR,field:"detValor",valueFormatter:Ts,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDePago)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:110,minWidth:110,editable:e.accion===c.a.ACCION_CREAR,cellClass:"text-right",cellClassRules:{"cell-with-errors":function(t){return!t.data.detValor&&e.accion===c.a.ACCION_CREAR}},cellEditorFramework:zo.a,cellEditorParams:{name:"detValor",maxlength:12,placeholder:"0.00",configAutonumeric:e.configAutonumericReales}},{headerName:c.a.TAG_OBSERVACION,field:"detObservaciones",width:200,minWidth:200,cellClass:"mousetrap",editable:e.accion===c.a.ACCION_CREAR,suppressKeyboardEvent:function(o){if(e.agregarFilaAlFinal(o),o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoDeFormasDePago)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:Jo.a,cellEditorParams:{name:"detObservaciones",inputClass:"text-uppercase"}}),this.accion===c.a.ACCION_CREAR&&o.push(this.utilService.getColumnaOpciones()),o},Is([Object(i.Input)(),Es("design:type",Array)],e.prototype,"listaFormaPago",void 0),Is([Object(i.Input)(),Es("design:type",Array)],e.prototype,"listadoDeFormasDePago",void 0),Is([Object(i.Input)(),Es("design:type",Object)],e.prototype,"totales",void 0),Is([Object(i.Input)(),Es("design:type",String)],e.prototype,"accion",void 0),Is([Object(i.Input)(),Es("design:type",Object)],e.prototype,"configAutonumericReales",void 0),Is([Object(i.Input)(),Es("design:type",Os.GridApi)],e.prototype,"gridApi",void 0),Is([Object(i.ViewChild)("menuOpciones"),Es("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),e=Is([Object(i.Component)({selector:"app-pago-forma-detalle",template:o("avzI")}),Es("design:paramtypes",[h.a])],e)}();function Ts(e){return e.value||(e.value=0),new ri.DecimalPipe("en-US").transform(e.value,"1.2-2")}var _s=function(){function e(e){this.id=0,this.antPeriodo="",this.antTipo="",this.antNumero="",this.antSector="",this.antFecha="",this.antValor=0,this.antProveedorCodigo="",this.antProveedorNombre="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.antPeriodo=e.antPeriodo?e.antPeriodo:this.antPeriodo,this.antTipo=e.antTipo?e.antTipo:this.antTipo,this.antNumero=e.antNumero?e.antNumero:this.antNumero,this.antSector=e.antSector?e.antSector:this.antSector,this.antFecha=e.antFecha?e.antFecha:this.antFecha,this.antValor=e.antValor?e.antValor:this.antValor,this.antProveedorCodigo=e.antProveedorCodigo?e.antProveedorCodigo:this.antProveedorCodigo,this.antProveedorNombre=e.antProveedorNombre?e.antProveedorNombre:this.antProveedorNombre},e}(),Ps=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ns=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ys=function(){function e(e){this.utilService=e,this.totales={},this.listadoPagosAnticipos=new Array,this.accion=null,this.enviarAccion=new i.EventEmitter,this.objetoSeleccionado=new _s,this.cobrarTodosCheck=!1,this.constantes=c.a,this.columnDefs=[],this.columnDefsSelected=[],this.noData=c.a.MSJ_NO_HAY_DATOS}return e.prototype.ngOnInit=function(){this.completarTablaPagos(),this.iniciarAgGrid()},e.prototype.generarOpciones=function(){var e=this;this.opciones=[{label:c.a.ACCION_CONSULTAR_CONTABLE,icon:c.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.verContable()}}]},e.prototype.verContable=function(){this.enviarAccion.emit({accion:c.a.ACCION_CONSULTAR_CONTABLE,objetoSeleccionado:this.objetoSeleccionado})},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.generarColumnas(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null,o=this.gridApi?this.gridApi.getFocusedCell():null,a=o?o.column:null;this.objetoSeleccionado=t?t.data:null,this.gridApi&&(a&&this.gridApi.startEditingCell({rowIndex:e.rowIndex,colKey:a.getId()}))},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.alCambiarValorDeCelda=function(e){"antValor"===e.colDef.field&&this.cambioValor(e.data)},e.prototype.ejecutarMetodoChecbox=function(e){e.cobrar?e.antValor=e.saldo:e.antValor=0,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.calcularTotal()},e.prototype.cambiarEstadoCheckCabecera=function(e){e?this.gridApi.forEachNode(function(e){var t=e.data;t.antValor=t.saldo,t.cobrar=!0}):this.gridApi.forEachNode(function(e){var t=e.data;t.antValor=0,t.cobrar=!1}),this.refreshGrid(),this.calcularTotal()},e.prototype.cambioValor=function(e){e.antValor===e.saldo?e.cobrar=!0:e.cobrar=!1,this.gridApi&&this.gridApi.updateRowData({update:[e]}),this.calcularTotal()},e.prototype.calcularTotal=function(){var e=this;this.cobrarTodosCheck=!0,this.totales.anticipo=0,this.gridApi.forEachNode(function(t){var o=t.data;e.totales.anticipo=e.mathRound2(e.totales.anticipo)+e.mathRound2(o.antValor),e.totales.diferencia=e.mathRound2(e.totales.pago)-(e.mathRound2(e.totales.forma)+e.mathRound2(e.totales.anticipo)),o.antValor!=o.saldo&&(e.cobrarTodosCheck=!1)})},e.prototype.completarTablaPagos=function(){if(this.cobrarTodosCheck=!0,this.totales.anticipo=0,this.listadoPagosAnticipos)for(var e=0;e<this.listadoPagosAnticipos.length;e++){var t=this.listadoPagosAnticipos[e];this.listadoPagosAnticipos[e].saldo=this.listadoPagosAnticipos[e].antValor,this.listadoPagosAnticipos[e].antValor=t.antValor?t.antValor:0,t.antValor===t.saldo?this.listadoPagosAnticipos[e].cobrar=!0:this.listadoPagosAnticipos[e].cobrar=!1,this.totales.anticipo=this.mathRound2(this.totales.anticipo)+this.mathRound2(t.antValor),this.totales.diferencia=this.mathRound2(this.totales.pago)-(this.mathRound2(this.totales.forma)+this.mathRound2(this.totales.anticipo))}},e.prototype.mathRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.generarColumnas=function(e){var t=this,o=[];return o.push({headerName:c.a.TAG_PERIODO,field:"antPeriodo",width:100,minWidth:100,maxWitdh:100},{headerName:c.a.TAG_TIPO,field:"antTipo",width:100,minWidth:100,maxWitdh:100},{headerName:c.a.TAG_NUMERO,field:"antNumero",width:100,minWidth:100,maxWitdh:100},{headerName:c.a.TAG_FECHA,field:"antFecha",width:100,minWidth:100,maxWitdh:100},{headerComponentFramework:ft.a,headerClass:"pr-0",headerComponentParams:{name:c.a.TAG_COBRAR,value:e.cobrarTodosCheck,tooltipText:c.a.TAG_COBRAR_TODO},cellClass:"text-center",field:"cobrar",width:150,minWidth:100,cellRendererFramework:or.a,cellRendererParams:function(e){return{params:e.data.cobrar,ejecutarMetodo:!0}}},{headerName:c.a.TAG_VALOR,field:"antValor",width:120,minWidth:80,valueFormatter:Ds,cellClass:"text-right",cellEditorFramework:zo.a,cellEditorParams:{name:"antValor",maxlength:12,placeholder:"0.00",configAutonumeric:e.configAutonumericReales},suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoPagosAnticipos)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:!0,cellClassRules:{"cell-with-errors":function(e){return t.utilService.quitarComasNumero(e.data.antValor)>e.data.saldo}}},this.utilService.getColumnaOpciones()),o},Ps([Object(i.Input)(),Ns("design:type",Object)],e.prototype,"totales",void 0),Ps([Object(i.Input)(),Ns("design:type",Object)],e.prototype,"configAutonumericReales",void 0),Ps([Object(i.Input)(),Ns("design:type",Array)],e.prototype,"listadoPagosAnticipos",void 0),Ps([Object(i.Input)(),Ns("design:type",String)],e.prototype,"accion",void 0),Ps([Object(i.Output)(),Ns("design:type",Object)],e.prototype,"enviarAccion",void 0),Ps([Object(i.Input)(),Ns("design:type",Os.GridApi)],e.prototype,"gridApi",void 0),Ps([Object(i.ViewChild)("menuOpciones"),Ns("design:type",N.ContextMenu)],e.prototype,"menuOpciones",void 0),e=Ps([Object(i.Component)({selector:"app-pago-anticipo-detalle",template:o("zm0g")}),Ns("design:paramtypes",[h.a])],e)}();function Ds(e){return e.value||(e.value=0),new ri.DecimalPipe("en-US").transform(e.value,"1.2-2")}o.d(t,"a",function(){return Ms});var Ls=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},Ms=function(){function e(){}return e=Ls([Object(i.NgModule)({imports:[nn.a],declarations:[gi.a,r.a,n.a,U,s.a,Ke,ie.a,Qe,Lt,wt,Ne,eo,to.a,Ai.a,Me.a,Le.a,oo.a,At,Ra,Ee.a,Ie,me,ge,ao.a,no,mo,Io,_o,yo,Do.a,Oa,Pa,Da,wo,F,ra,xa,da,Ve,Ya,qa.a,Ha.a,Xa.a,ii,ci,vi,fi.a,Zr.a,Yi,rn,pn,An,In,zn,es,rs,gs,Rs,ys,er,pr,Ir,Lr,Mr.a,Br,Xr,Fi,zi,jn.a,ds,Zt],exports:[nn.a,gi.a,r.a,n.a,U,s.a,Ke,ie.a,Qe,Lt,wt,Ne,eo,to.a,Ai.a,Me.a,Le.a,oo.a,At,Ra,Ee.a,Ie,me,ge,ao.a,no,mo,Io,_o,yo,Oa,Pa,Da,ra,xa,da,Ve,Ya,qa.a,Ha.a,Xa.a,ii,ci,vi,fi.a,Zr.a,Yi,rn,pn,An,In,zn,es,rs,gs,Rs,ys,er,pr,Ir,Lr,Mr.a,Br,Xr,Fi,zi,jn.a,Zt],entryComponents:[r.a,n.a,s.a,Ke,ie.a,Ne,eo,Me.a,Le.a,At,Ra,Ee.a,Ie,me,ge,ao.a,no,mo,Io,_o,yo,Oa,Pa,Da,F,Ve,Ya,An,zn,es,rs,In,jn.a,Zt],providers:[]})],e)}()},QL9M:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.index=0,this.ocEmpresa="",this.ocSector="",this.ocMotivo="",this.ocNumero="",this.ocFecha=null,this.ocAnulado=!1,this.ocAprobada=!1,this.ocMontoTotal=0,this.provRazonSocial="",this.provCodigo="",this.ocmDetalle="",this.usrAprueba="",this.provEmailOrdenCompra="",this.ocmNotificarProveedor=!1,this.ocPuedeAprobar=!1,this.ocValorRetencion=1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.index=e.index?e.index:this.index,this.ocEmpresa=e.ocEmpresa?e.ocEmpresa:this.ocEmpresa,this.ocSector=e.ocSector?e.ocSector:this.ocSector,this.ocMotivo=e.ocMotivo?e.ocMotivo:this.ocMotivo,this.ocNumero=e.ocNumero?e.ocNumero:this.ocNumero,this.ocFecha=e.ocFecha?e.ocFecha:this.ocFecha,this.ocAnulado=e.ocAnulado?e.ocAnulado:this.ocAnulado,this.ocAprobada=e.ocAprobada?e.ocAprobada:this.ocAprobada,this.ocMontoTotal=e.ocMontoTotal?e.ocMontoTotal:this.ocMontoTotal,this.ocValorRetencion=e.ocValorRetencion?e.ocValorRetencion:this.ocValorRetencion,this.provRazonSocial=e.provRazonSocial?e.provRazonSocial:this.provRazonSocial,this.provCodigo=e.provCodigo?e.provCodigo:this.provCodigo,this.usrAprueba=e.usrAprueba?e.usrAprueba:this.usrAprueba,this.ocmDetalle=e.ocmDetalle?e.ocmDetalle:this.ocmDetalle,this.provEmailOrdenCompra=e.provEmailOrdenCompra?e.provEmailOrdenCompra:this.provEmailOrdenCompra,this.ocmNotificarProveedor=e.ocmNotificarProveedor?e.ocmNotificarProveedor:this.ocmNotificarProveedor,this.ocPuedeAprobar=e.ocPuedeAprobar?e.ocPuedeAprobar:this.ocPuedeAprobar},e}()},QcxW:function(e,t,o){"use strict";o.d(t,"a",function(){return E});var a=o("CcnG"),i=o("mwBN"),r=o("yccp"),n=o("nR5P"),s=o("EF/R"),c=o("CEfs"),l=o("SZbH"),d=o("z5Y/"),p=o("ZYCi"),u=o("S3MV"),h=o("G059"),m=o("8fiX"),C=o("EnEm"),v=o("Ungd"),A=o("zkCp"),f=o("madF"),g=o("gLZI"),b=o("+JJ7"),O=o("eUd/"),S=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},I=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(){function e(e,t,o,a,r,n,s,c,l,d){this.proveedorCategoriaService=e,this.route=t,this.api=o,this.toastr=a,this.filasService=r,this.atajoService=n,this.auth=s,this.archivoService=c,this.utilService=l,this.activeModal=d,this.listaResultado=[],this.objetoSeleccionado=new u.a,this.objetoNuevoSeleccionado=new u.a,this.invProveedorCategoriaTO=new u.a,this.listaEmpresas=[],this.constantes=i.a,this.accion=null,this.tituloForm=i.a.TITULO_FILTROS,this.classIcon=i.a.ICON_FILTRAR,this.esModal=!1,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new C.a,this.filtroGlobal="",this.vistaFormulario=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return e.prototype.ngOnInit=function(){this.constantes=i.a,this.listaEmpresas=this.route.snapshot.data.categoriaProveedorInv,this.empresaModal?(this.esModal=!0,this.empresaSeleccionada=this.empresaModal):this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.isScreamMd=!(window.innerWidth<=576),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.listarInvProveedorCategoriaTO(),this.generarAtajosTeclado(),this.iniciarAgGrid()},e.prototype.listarInvProveedorCategoriaTO=function(){this.cargando=!0,this.filasTiempo.iniciarContador(),this.proveedorCategoriaService.listarInvProveedorCategoria({empresa:this.empresaSeleccionada.empCodigo},this,i.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvProveedorCategoriaTO=function(e){this.filasTiempo.finalizarContador(),this.listaResultado=e,this.cargando=!1},e.prototype.operacionesCategoria=function(e){switch(e){case i.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(i.a.ACCION_ELIMINAR,this,!0)&&(this.invProveedorCategoriaTO=new u.a(this.objetoSeleccionado),this.accion=i.a.ACCION_ELIMINAR,this.activar=!1,this.tituloForm=i.a.TITULO_FILTROS,this.classIcon=i.a.ICON_FILTRAR,this.eliminarCategoria());break;case i.a.ACCION_CREAR:this.utilService.verificarPermiso(i.a.ACCION_CREAR,this,!0)&&(this.invProveedorCategoriaTO=new u.a,this.accion=i.a.ACCION_CREAR,this.activar=!1,this.tituloForm=i.a.TITULO_FORM_NUEVO_CATEGORIA_PROVEEDOR,this.classIcon=i.a.ICON_FILTRO_NUEVO,this.vistaFormulario=!0);break;case i.a.ACCION_EDITAR:this.utilService.verificarPermiso(i.a.ACCION_EDITAR,this,!0)&&(this.invProveedorCategoriaTO=new u.a(this.objetoSeleccionado),this.accion=i.a.ACCION_EDITAR,this.activar=!1,this.tituloForm=i.a.TITULO_FORM_EDITAR_CATEGORIA_PROVEEDOR,this.classIcon=i.a.ICON_FILTRO_EDITAR,this.vistaFormulario=!0)}},e.prototype.accionesCategoria=function(e,t){var o=this;this.api.post("todocompuWS/inventarioWebController/accionInvProveedorCategoria",{invProveedorCategoriaTO:e,accion:t},i.a.KEY_EMPRESA_SELECT).then(function(t){if(o.cargando=!1,t&&t.extraInfo){switch(o.accion){case i.a.ACCION_CREAR:o.refrescarTabla(e,"I");break;case i.a.ACCION_EDITAR:o.refrescarTabla(e,"U");break;case i.a.ACCION_ELIMINAR:o.refrescarTabla(e,"D")}o.toastr.success(t.operacionMensaje,"Aviso"),o.resetear()}else o.accion===i.a.ACCION_ELIMINAR&&o.resetear(),o.toastr.warning(t.operacionMensaje,"Aviso")}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.insertarCategoria=function(e){if(this.utilService.verificarPermiso(i.a.ACCION_CREAR,this,!0)){this.cargando=!0;var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t){var o=JSON.parse(JSON.stringify(this.invProveedorCategoriaTO));this.objetoNuevoSeleccionado=o,this.setearValoresCategoria(o),this.accionesCategoria(o,"I")}else this.toastr.error(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.actualizarCategoria=function(e){if(this.utilService.verificarPermiso(i.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t){var o=JSON.parse(JSON.stringify(this.invProveedorCategoriaTO));this.objetoNuevoSeleccionado=o,this.setearValoresCategoria(o),this.accionesCategoria(o,"M"),this.vistaFormulario=!1}else this.toastr.error(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarCategoria=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_ELIMINAR,this,!0)){var t=JSON.parse(JSON.stringify(this.invProveedorCategoriaTO));t.usrEmpresa=i.a.KEY_EMPRESA_SELECT.trim();var o={title:i.a.MSJ_TITULO_ELIMINAR,texto:i.a.MSJ_PREGUNTA_ELIMINAR,type:i.a.SWAL_WARNING,confirmButtonText:i.a.MSJ_SI_ELIMINAR,cancelButtonText:i.a.MSJ_NO_CANCELAR,confirmButtonColor:i.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(e.cargando=!0,e.accionesCategoria(t,"E")):e.resetear()})}},e.prototype.imprimirCategoriaProveedor=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={ListadoCategorias:this.listaResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteCategoriaProveedor",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoCategoriasProveedor.pdf",t):e.toastr.warning(i.a.MSJ_ERROR_IMPRIMIR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarCategoriaProveedor=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={ListadoCategorias:this.listaResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteCategoriaProveedor",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoCategoriasProveedor_"):e.toastr.warning(i.a.MSJ_ERROR_EXPORTAR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.cerrarTipoContribuyente=function(){this.objetoNuevoSeleccionado=this.objetoNuevoSeleccionado&&""==this.objetoNuevoSeleccionado.pcCodigo?null:this.objetoNuevoSeleccionado;var e={tipoContribuyenteSeleccionado:this.objetoNuevoSeleccionado};this.activeModal.close(e)},e.prototype.setearValoresCategoria=function(e){e.pcEmpresa=i.a.KEY_EMPRESA_SELECT.trim(),e.usrEmpresa=i.a.KEY_EMPRESA_SELECT.trim(),e.usrCodigo=this.auth.getCodigoUser()},e.prototype.cambiarEmpresaSeleccionada=function(){i.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listaResultado=[],this.vistaFormulario=!1,this.filasService.actualizarFilas("0","0")},e.prototype.resetear=function(){this.accion=null,this.activar=!1,this.tituloForm=i.a.TITULO_FILTROS,this.classIcon=i.a.ICON_FILTRAR,this.vistaFormulario=!1,this.filasService.actualizarFilas(this.listaResultado.length,this.filasTiempo.getTiempo())},e.prototype.generarOpciones=function(){var e=this,t=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&!this.vistaFormulario,o=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar&&!this.vistaFormulario;this.opciones=[{label:i.a.ACCION_EDITAR,icon:i.a.ICON_EDITAR,disabled:!t,command:function(){return t?e.operacionesCategoria(i.a.ACCION_EDITAR):null}},{label:i.a.ACCION_ELIMINAR,icon:i.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?e.operacionesCategoria(i.a.ACCION_ELIMINAR):null}}]},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new r.Hotkey(i.a.ATAJO_ESC,function(){return e.cerrarTipoContribuyente(),!1})),this.atajoService.add(new r.Hotkey(i.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscar");return e&&e.click(),!1})),this.atajoService.add(new r.Hotkey(i.a.ATAJO_NUEVO,function(){var e=document.getElementById("btnNuevo");return e&&e.click(),!1})),this.atajoService.add(new r.Hotkey(i.a.ATAJO_EDITAR,function(){return!e.vistaFormulario&&e.listaResultado.length>0&&e.operacionesCategoria(i.a.ACCION_EDITAR),!1})),this.atajoService.add(new r.Hotkey(i.a.ATAJO_ELIMINAR,function(){return!e.vistaFormulario&&e.listaResultado.length>0&&e.operacionesCategoria(i.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new r.Hotkey(i.a.ATAJO_GUARDAR,function(){if(e.vistaFormulario)return document.getElementById("btnGuardar").click(),!1})),this.atajoService.add(new r.Hotkey(i.a.ATAJO_IMPRIMIR,function(t){e.listaResultado.length>0&&document.getElementById("btnImprimirCategoriaProveedor").click();return!1})),this.atajoService.add(new r.Hotkey(i.a.ATAJO_EXPORTAR,function(t){e.listaResultado.length>0&&document.getElementById("btnExportarCategoriaProveedor").click();return!1})),this.atajoService.add(new r.Hotkey(i.a.ATAJO_CANCELAR,function(){return e.vistaFormulario&&e.resetear(),!1}))},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listaResultado.length>0)(a=this.listaResultado.slice()).unshift(e),this.listaResultado=a,this.seleccionarFila(0);this.vistaFormulario=!1;break;case"U":var o=this.listaResultado.findIndex(function(t){return t.pcCodigo===e.pcCodigo});(a=this.listaResultado.slice())[o]=e,this.listaResultado=a,this.seleccionarFila(o),this.vistaFormulario=!1;break;case"D":var a;o=this.listaResultado.findIndex(function(t){return t.pcCodigo===e.pcCodigo});(a=this.listaResultado.slice()).splice(o,1),this.listaResultado=a,this.listaResultado.length>0&&this.seleccionarFila(0===o?0:o-1)}},e.prototype.filtrarGlobalmente=function(e){e.filterGlobal(this.filtroGlobal.toUpperCase(),"contains")},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.proveedorCategoriaService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:f.a,toolTip:g.a,inputEstado:b.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},S([Object(a.Input)(),I("design:type",m.a)],e.prototype,"empresaModal",void 0),S([Object(a.Input)(),I("design:type",String)],e.prototype,"razonSocial",void 0),S([Object(a.ViewChild)("menuOpciones"),I("design:type",A.ContextMenu)],e.prototype,"menuOpciones",void 0),S([Object(a.HostListener)("window:resize",["$event"]),I("design:type",Function),I("design:paramtypes",[]),I("design:returntype",void 0)],e.prototype,"onResize",null),e=S([Object(a.Component)({selector:"app-proveedor-categoria",template:o("P8XS"),styles:[o("5q06")]}),I("design:paramtypes",[h.a,p.ActivatedRoute,d.a,l.b,c.a,r.HotkeysService,s.a,v.a,n.a,O.a])],e)}()},QtFP:function(e,t){e.exports='<div *ngIf="listadoAnticipos?.length>0">\r\n  <form #frmDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n    <div class="card-header p-1">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n        title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b> {{titulo}} - {{empresaSeleccionada.empNombre}}</b>\r\n      <div class="card-header-actions" *ngIf="!esContable">\r\n        \x3c!--Sin etiquetas--\x3e\r\n        <div class="btn-group d-lg-none">\r\n          \x3c!--Guardar--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnGuardar" type="button" title="{{constantes.ATAJO_GUARDAR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}" (click)="guardar()">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"></span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Cancelar y/o regresar--\x3e\r\n          <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n            (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n            <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n              aria-hidden="true"></i>\r\n          </button>\r\n        </div>\r\n        \x3c!-- Con etiquetas--\x3e\r\n        <div class="btn-group d-none d-lg-block">\r\n          \x3c!--Guardar--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnGuardar" type="button" title="{{constantes.ATAJO_GUARDAR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}" (click)="guardar()">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}}</span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Cancelar y/o regresar--\x3e\r\n          <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n            (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n            <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n              aria-hidden="true"></i>\r\n            {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class="card-header-actions" *ngIf="esContable">\r\n        <app-botones-accion [conContable]="conContableCopia" [data]="data" (enviarAccion)="accionesBotones($event)"></app-botones-accion>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="card-body p-0">\r\n      <div class="p-1" *ngIf="esContable">\r\n        <app-contable-cabecera [data]="data" [conContable]="conContableCopia" [tipoSeleccionado]="tipoSeleccionado"\r\n          [empresaSeleccionada]="empresaSeleccionada" (accionFechaValido)="fechaContableValido = $event"></app-contable-cabecera>\r\n      </div>\r\n      <div class="row" *ngIf="!esContable">\r\n        <div class="col-sm-4 col-md-4 pr-0">\r\n          <div class="input-group p-1">\r\n            <input type="text" [(ngModel)]="filtroGlobal" name="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n              style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n            <div class="input-group-append">\r\n              <span class="input-group-text">\r\n                <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-sm-6 col-md-6">\r\n          <div class="input-group p-1">\r\n            <input type="text" [(ngModel)]="observacionesContable" appUppercase name="observacionesContable" class="form-control form-control-sm text-uppercase input-filter mousetrap"\r\n              style="font-family: Arial, FontAwesome;" placeholder="&#xf007; {{constantes.TAG_OBSERVACION_GENERAL}}..."\r\n              size="100">\r\n            <div class="input-group-append">\r\n              <span class="input-group-text">\r\n                <i class="{{constantes.ICON_EDITAR}}"></i>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-sm-2 col-md-2 pl-0">\r\n          <div class="float-right pr-1">\r\n            <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" class="ocultar-en-tabla" name="columnDefsSelected"\r\n              optionLabel="headerName" maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n              defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="p-1">\r\n        <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listadoAnticipos"\r\n          [columnDefs]="columnDefsSelected" [enableSorting]="true" (gridSizeChanged)="redimensionarColumnas()"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [context]="context" (cellEditingStopped)="terminadoEditar($event)"\r\n          [pinnedBottomRowData]="pinnedBottomRowData" [suppressDragLeaveHidesColumns]="true" [suppressClickEdit]=true\r\n          (gridReady)="onGridReady($event)" [stopEditingWhenGridLosesFocus]="true" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (filterChanged)="actualizarFilas()" (cellFocused)="filaFocused($event)" (contextmenu)="data && data.accion === constantes.ACCION_MAYORIZAR?$event.preventDefault():null"\r\n          (cellContextMenu)="data && data.accion === constantes.ACCION_MAYORIZAR?mostrarContextMenu($event.data, $event.event):null">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n    <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n  </form>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},R9tJ:function(e,t,o){"use strict";var a=o("0uIf"),i=o("1t1C"),r=o("flmD"),n=o("UBxT"),s=function(){function e(e){this.xiiiSecuencial=null,this.xiiiDesde=null,this.xiiiHasta=null,this.xiiiDiasLaborados=null,this.xiiiBaseImponible=null,this.xiiiValor=null,this.xiiiDocumento=null,this.xiiiObservaciones=null,this.xiiiCodigoMinisterial=null,this.xiiiAuxiliar=null,this.empCargo=null,this.empFechaIngreso=null,this.prdSector=new r.a,this.conCuentas=new i.a,this.conContable=new a.a,this.rhEmpleado=new n.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.xiiiSecuencial=e.xiiiSecuencial?e.xiiiSecuencial:this.xiiiSecuencial,this.xiiiDesde=e.xiiiDesde?e.xiiiDesde:this.xiiiDesde,this.xiiiHasta=e.xiiiHasta?e.xiiiHasta:this.xiiiHasta,this.xiiiDiasLaborados=e.xiiiDiasLaborados?e.xiiiDiasLaborados:this.xiiiDiasLaborados,this.xiiiBaseImponible=e.xiiiBaseImponible?e.xiiiBaseImponible:this.xiiiBaseImponible,this.xiiiValor=e.xiiiValor?e.xiiiValor:this.xiiiValor,this.xiiiDocumento=e.xiiiDocumento?e.xiiiDocumento:this.xiiiDocumento,this.xiiiObservaciones=e.xiiiObservaciones?e.xiiiObservaciones:this.xiiiObservaciones,this.xiiiCodigoMinisterial=e.xiiiCodigoMinisterial?e.xiiiCodigoMinisterial:this.xiiiCodigoMinisterial,this.xiiiAuxiliar=e.xiiiAuxiliar?e.xiiiAuxiliar:this.xiiiAuxiliar,this.empCargo=e.empCargo?e.empCargo:this.empCargo,this.empFechaIngreso=e.empFechaIngreso?e.empFechaIngreso:this.empFechaIngreso,this.prdSector=e.prdSector?e.prdSector:this.prdSector,this.conCuentas=e.conCuentas?e.conCuentas:this.conCuentas,this.conContable=e.conContable?e.conContable:this.conContable,this.rhEmpleado=e.rhEmpleado?e.rhEmpleado:this.rhEmpleado},e}(),c=o("OTvs");o.d(t,"a",function(){return l});var l=function(){function e(e){this.rhXiiiSueldo=new s,this.formaPago=new c.a,this.ingresosCalculados=0,this.isFormaPagoValido=!1,this.isValorValido=!1,this.documentoRepetido=!1,this.errorEnDocumento=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.rhXiiiSueldo=e.rhXiiiSueldo?e.rhXiiiSueldo:this.rhXiiiSueldo,this.formaPago=e.formaPago?e.formaPago:this.formaPago,this.ingresosCalculados=e.ingresosCalculados?e.ingresosCalculados:this.ingresosCalculados,this.isFormaPagoValido=e.isFormaPagoValido?e.isFormaPagoValido:this.isFormaPagoValido,this.isValorValido=e.isValorValido?e.isValorValido:this.isValorValido,this.documentoRepetido=e.documentoRepetido?e.documentoRepetido:this.documentoRepetido,this.errorEnDocumento=e.errorEnDocumento?e.errorEnDocumento:this.errorEnDocumento},e}()},RC2U:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.clave=null,this.valor=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.clave=e.clave?e.clave:this.clave,this.valor=e.valor?e.valor:this.valor},e}()},RDZc:function(e,t,o){"use strict";o.d(t,"a",function(){return p});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("gLZI"),l=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvListaBodegasTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaBodegasTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvListaBodegasTO(e.extraInfo):(t.isModal&&!t.esKardex&&t.activeModal.dismiss(),t.despuesDeListarInvListaBodegasTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarInvListaBodegasPorSector=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaBodegasPorSector",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvListaBodegasPorSector(e.extraInfo):(t.isModal&&!t.esKardex&&t.activeModal.dismiss(),t.despuesDeListarInvListaBodegasPorSector([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getBodegaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getBodegaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetBodegaTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarInvComboBodegaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvComboBodegaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvComboBodegaTO(e.extraInfo):(t.despuesDeListarInvComboBodegaTO([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO))}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarBodegaTO=function(e,t,o,a){var i=this;this.api.post("todocompuWS/inventarioWebController/insertarBodegaTO",e,a).then(function(e){e&&e.extraInfo?t.despuesDeInsertarBodega(e.operacionMensaje,o):(i.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,t)})},e.prototype.modificarBodegaTO=function(e,t,o,a){var i=this;this.api.post("todocompuWS/inventarioWebController/modificarBodegaTO",e,a).then(function(e){e&&e.extraInfo?t.despuesDeModificarBodega(e.operacionMensaje,o):(i.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,t)})},e.prototype.seleccionarSector=function(e,t){return e.find(function(e){return e.secCodigo==t})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case s.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar;break;case s.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar}return o&&!a&&this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.ERROR_403_TITULO),a},e.prototype.generarColumnas=function(e){var t=[];return t=[{headerName:s.a.TAG_CODIGO,field:"bodCodigo",width:100,minWidth:100},{headerName:s.a.TAG_DETALLE,field:"bodNombre",width:500,minWidth:500},{headerName:s.a.TAG_CP,field:"codigoCP",width:150,minWidth:150,headerComponentFramework:c.a,headerComponentParams:{class:"",tooltip:s.a.TAG_CENTRO_PRODUCCION,text:s.a.TAG_CP,enableSorting:!0}}],e||(t.push({headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"bodInactiva",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"}),t.push(this.utilService.getColumnaOpciones())),t},e=l([Object(a.Injectable)({providedIn:"root"}),d("design:paramtypes",[i.a,r.b,n.a])],e)}()},"RHL/":function(e,t){e.exports=""},S3MV:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.pcEmpresa="",this.pcCodigo="",this.pcDetalle="",this.pcAplicaRetencionIva=!1,this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.pcEmpresa=e.pcEmpresa?e.pcEmpresa:this.pcEmpresa,this.pcCodigo=e.pcCodigo?e.pcCodigo:this.pcCodigo,this.pcDetalle=e.pcDetalle?e.pcDetalle:this.pcDetalle,this.pcAplicaRetencionIva=e.pcAplicaRetencionIva?e.pcAplicaRetencionIva:this.pcAplicaRetencionIva,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},SMKp:function(e,t,o){"use strict";var a=o("CcnG"),i=o("wd/R"),r=o("mwBN"),n=o("ZYCi"),s=o("SZbH"),c=o("yccp"),l=o("CEfs"),d=o("nR5P"),p=o("Ungd"),u=o("8fiX"),h=o("UBxT"),m=o("eUd/"),C=o("m/aa"),v=o("hqLJ"),A=o("ecmD"),f=o("8VRP"),g=o("gIcY"),b=o("jeDP"),O=o("z5Y/"),S=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},I=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(){function e(e,t){this.api=e,this.utilService=t}return e.prototype.insertarLiquidacion=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarRhLiquidacion",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarLiquidacion(e):(a.utilService.generarSwalHTML(r.a.SWAL_INCORRECTO,r.a.SWAL_ERROR,e.operacionMensaje,r.a.ICON_ERROR_SWAL,r.a.SWAL_ERROR),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarRhLiquidacion=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/modificarRhLiquidacion",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarLiquidacion(e):(a.utilService.generarSwalHTML(r.a.SWAL_INCORRECTO,r.a.SWAL_ERROR,e.operacionMensaje,r.a.ICON_ERROR_SWAL,r.a.SWAL_ERROR),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e=S([Object(a.Injectable)({providedIn:"root"}),I("design:paramtypes",[O.a,d.a])],e)}(),R=o("LlOB"),T=o("FejU"),_=o("0uIf"),P=o("BPXi"),N=o("GGLN");o.d(t,"a",function(){return M});var y=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},D=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},L=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},M=function(){function e(e,t,o,n,s,c,l,d,p,h,m,C){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=n,this.utilService=s,this.archivoService=c,this.modalService=l,this.formaPagoService=d,this.appSistemService=p,this.sistemaService=h,this.liquidacionService=m,this.contableService=C,this.listaEmpresas=[],this.empresaSeleccionada=new u.a,this.accion=r.a.ACCION_CREAR,this.rhRol=new v.a,this.esContable=!1,this.conContable=new _.a,this.tipoSeleccionado=new P.a,this.data={},this.titulo=r.a.TALENTO_HUMANO_LIQUIDACION,this.enviarAccion=new a.EventEmitter,this.screamXS=!0,this.activarLiquidacion=!0,this.estadoContableAMayorizar=!1,this.puedeEditarTabla=!1,this.listaFormaPago=[],this.formaPagoSeleccionada=new A.a,this.listaMotivos=r.a.LISTA_MOTIVOS_LIQUIDACION,this.constantes=r.a,this.cargando=!1,this.activarNegativo=!1,this.totalLiquidacion=0,this.fechaContableValido=!0,this.codigoEmpleado=null,this.documentoValido=!0,this.fechaRegitro=new Date,this.fechaFinLabores=new Date,this.fechaActual=new Date,this.fechaUltimoSueldo=new Date,this.fechaValido=!0,this.periodoAbierto=!1,this.es={},this.screamXS=window.innerWidth<=r.a.WINDOW_WIDTH_XS,this.constantes=r.a,i.locale("es"),this.es=this.utilService.setLocaleDate(),this.configAutonumeric={decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"99999.99",minimumValue:"0"}}return e.prototype.ngOnInit=function(){this.obtenerFechaActualServidor(),this.generarAtajosTeclado(),this.inicializandoFormulario()},e.prototype.accionesBotones=function(e){switch(e.accion){case r.a.ACCION_ACTIVAR:this.cambiarActivar();break;case r.a.ACCION_CANCELAR:this.cancelar();break;case r.a.ACCION_MAYORIZAR:this.fechaContableValido?(this.estadoContableAMayorizar=e.estado,this.guardarLiquidacion(this.frmLiquidacion)):(this.toastr.error(r.a.MSJ_CAMPOS_INVALIDOS,r.a.MSJ_TITULO_INVALIDOS),this.cargando=!1);break;case r.a.ACCION_IMPRIMIR:this.enviarAccion.emit({accion:r.a.ACCION_IMPRIMIR});break;case r.a.ACCION_ANULAR:this.enviarAccion.emit({accion:r.a.ACCION_ANULAR});break;case r.a.ACCION_ELIMINAR:this.enviarAccion.emit({accion:r.a.ACCION_ELIMINAR});break;case r.a.ACCION_REVERSAR:this.enviarAccion.emit({accion:r.a.ACCION_REVERSAR})}},e.prototype.obtenerFechaActualServidor=function(){this.cargando=!0,this.appSistemService.obtenerFechaServidor(this,this.empresaSeleccionada)},e.prototype.despuesDeObtenerFechaServidor=function(e){this.cargando=!1,this.esContable||(this.fechaUltimoSueldo=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.fechaRegitro=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.fechaFinLabores=this.utilService.formatoDateSinZonaHorariaYYYMMDD(e),this.validarPeriodoAbierto()),this.fechaActual=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.utilService.formatoStringSinZonaHorariaYYYMMDD(e))},e.prototype.cambiarEmpresaSeleccionada=function(){r.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.formaPagoSeleccionada=null,this.resetearFormulario(),this.listarFormasDePago(),this.valoresInicialesformulario()},e.prototype.generarAtajosTeclado=function(){this.atajoService.add(new c.Hotkey(r.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarLiquidacion");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirLiquidacion");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardarLiquidacion");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(r.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarLiquidacion");return e&&e.click(),!1}))},e.prototype.inicializandoFormulario=function(){switch(this.esContable&&(this.accion=this.data.accion),this.esContable&&(this.activarLiquidacion=this.data.activar),this.esContable&&(this.codigoEmpleado=this.rhRol.rhEmpleado.rhEmpleadoPK.empId),this.conContableCopia=this.esContable?y({},this.conContable):new _.a,this.accion){case r.a.ACCION_CREAR:this.listaEmpresas=this.route.snapshot.data.liquidacion,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.rhRol.rhEmpleado.empMotivoSalida=this.listaMotivos[0];break;case r.a.ACCION_MAYORIZAR:this.rhRol.conCuentas&&this.rhRol.conCuentas.conCuentasPK&&this.rhRol.conCuentas.conCuentasPK.ctaCodigo?(this.formaPagoSeleccionada.ctaCodigo=this.rhRol.conCuentas.conCuentasPK.ctaCodigo,this.formaPagoSeleccionada.fpDetalle=this.rhRol.conCuentas.ctaDetalle):this.formaPagoSeleccionada=null,this.fechaRegitro=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.rhRol.rolDesde),this.fechaFinLabores=this.rhRol.rhEmpleado.empFechaUltimaSalida||this.rhRol.rhEmpleado.empFechaPrimeraSalida?this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.rhRol.rhEmpleado.empFechaUltimaSalida?this.rhRol.rhEmpleado.empFechaUltimaSalida:this.rhRol.rhEmpleado.empFechaPrimeraSalida):this.fechaRegitro,this.fechaUltimoSueldo=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.rhRol.rolFechaUltimoSueldo),this.validarFechas(),this.validarPeriodoAbierto(),this.calcularTotal(),this.despuesDeListarComboFormasPago(this.listaFormaPago),this.valoresInicialesformulario();break;case r.a.ACCION_CONSULTAR:case r.a.ACCION_ANULAR:case r.a.ACCION_RESTAURAR:this.rhRol.conCuentas&&this.rhRol.conCuentas.conCuentasPK&&this.rhRol.conCuentas.conCuentasPK.ctaCodigo?(this.formaPagoSeleccionada.ctaCodigo=this.rhRol.conCuentas.conCuentasPK.ctaCodigo,this.formaPagoSeleccionada.fpDetalle=this.rhRol.conCuentas.ctaDetalle):this.formaPagoSeleccionada=null,this.fechaRegitro=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.rhRol.rolDesde),this.fechaFinLabores=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.rhRol.rhEmpleado.empFechaUltimaSalida?this.rhRol.rhEmpleado.empFechaUltimaSalida:this.rhRol.rhEmpleado.empFechaPrimeraSalida),this.fechaValido=!0,this.periodoAbierto=!0,this.calcularTotal(),this.despuesDeListarComboFormasPago(this.listaFormaPago)}this.puedeEditarTabla=!this.esContable||this.data.accion===r.a.ACCION_MAYORIZAR},e.prototype.valoresInicialesformulario=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmLiquidacion?e.frmLiquidacion.value:null))},50)},e.prototype.resetearFormulario=function(){this.totalLiquidacion=0,this.rhRol=new v.a,this.fechaRegitro=this.fechaActual,this.fechaFinLabores=this.fechaActual,this.filasService.actualizarFilas(0,0),this.validarFechas(),this.focusEmpleado(),this.frmLiquidacion.form.markAsUntouched()},e.prototype.validarFechas=function(){this.fechaValido=!0,this.fechaRegitro&&this.fechaFinLabores?(this.fechaFinLabores=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.fechaFinLabores),this.fechaRegitro=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.fechaRegitro),this.fechaFinLabores.getTime()>this.fechaRegitro.getTime()&&(this.fechaValido=!1)):this.fechaValido=!1},e.prototype.validarDocumento=function(){if(this.cargando=!0,this.documentoValido=!1,this.rhRol.rolDocumento&&this.formaPagoSeleccionada.validar){var e={empresa:r.a.KEY_EMPRESA_SELECT,documento:this.rhRol.rolDocumento.trim(),cuenta:this.formaPagoSeleccionada.ctaCodigo};this.contableService.verificarDocumentoBanco(e,this,r.a.KEY_EMPRESA_SELECT)}else this.cargando=!1,this.documentoValido=!0},e.prototype.despuesDeVerificarDocumento=function(e){this.documentoValido=e,this.cargando=!1},e.prototype.listarFormasDePago=function(){this.listaFormaPago=[],this.cargando=!0,this.formaPagoService.listarComboFormasPago({empresa:r.a.KEY_EMPRESA_SELECT},this,r.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarComboFormasPago=function(e){var t=this;this.listaFormaPago=e,this.listaFormaPago.length>0?this.formaPagoSeleccionada=this.formaPagoSeleccionada&&this.formaPagoSeleccionada.ctaCodigo?this.listaFormaPago.find(function(e){return e.ctaCodigo===t.formaPagoSeleccionada.ctaCodigo}):this.listaFormaPago[0]:this.formaPagoSeleccionada=null,this.cargando=!1},e.prototype.calcularTotal=function(){this.rhRol.rolLiqXiii=this.rhRol.rolLiqXiii?this.rhRol.rolLiqXiii:0,this.rhRol.rolLiqXiv=this.rhRol.rolLiqXiv?this.rhRol.rolLiqXiv:0,this.rhRol.rolLiqVacaciones=this.rhRol.rolLiqVacaciones?this.rhRol.rolLiqVacaciones:0,this.rhRol.rolLiqDesahucio=this.rhRol.rolLiqDesahucio?this.rhRol.rolLiqDesahucio:0,this.rhRol.rolLiqDesahucioIntempestivo=this.rhRol.rolLiqDesahucioIntempestivo?this.rhRol.rolLiqDesahucioIntempestivo:0,this.rhRol.rolLiqBonificacion=this.rhRol.rolLiqBonificacion?this.rhRol.rolLiqBonificacion:0;var e=this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqXiii)+this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqXiv)+this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqVacaciones),t=this.rhRol.rhEmpleado.empSaldoAnticipos+this.rhRol.rhEmpleado.empSaldoPrestamos,o=this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqDesahucio)+this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqDesahucioIntempestivo)+this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqBonificacion),a=this.activarNegativo?-1*this.rhRol.rhEmpleado.empSaldoAnterior:this.rhRol.rhEmpleado.empSaldoAnterior;this.totalLiquidacion=e+o-t+a},e.prototype.validarPeriodoAbierto=function(){if(this.cargando=!0,this.periodoAbierto=!1,this.fechaRegitro){var e={empresa:this.empresaSeleccionada.empCodigo,fecha:this.utilService.formatoStringSinZonaHorariaYYYMMDD(y({},this.fechaRegitro))};this.sistemaService.getIsPeriodoAbierto(e,this,r.a.KEY_EMPRESA_SELECT)}else this.cargando=!1},e.prototype.despuesDeObtenerIsPeriodoAbierto=function(e){this.periodoAbierto=e,this.cargando=!1},e.prototype.buscarEmpleado=function(e){if(this.utilService.validarTeclasAgregarFila(e.keyCode)&&(!(this.rhRol.rhEmpleado.rhEmpleadoPK.empId===this.codigoEmpleado&&this.rhRol.rhEmpleado.rhEmpleadoPK.empId&&this.codigoEmpleado)&&(this.rhRol.rhEmpleado.rhEmpleadoPK.empId=""===this.rhRol.rhEmpleado.rhEmpleadoPK.empId?null:this.rhRol.rhEmpleado.rhEmpleadoPK.empId,this.rhRol.rhEmpleado.rhEmpleadoPK.empId=this.rhRol.rhEmpleado.rhEmpleadoPK.empId?this.rhRol.rhEmpleado.rhEmpleadoPK.empId.toUpperCase():null,this.rhRol.rhEmpleado.rhEmpleadoPK.empId))){var t={empresa:this.empresaSeleccionada.empCodigo,buscar:this.rhRol.rhEmpleado.rhEmpleadoPK.empId,estado:!0};e.srcElement.blur(),e.preventDefault(),this.abrirModalEmpleado(t)}},e.prototype.abrirModalEmpleado=function(e){var t=this,o=this.modalService.open(C.a,{size:"lg",windowClass:"miSize",backdrop:"static"});o.componentInstance.parametrosBusqueda=e,o.componentInstance.empresaSeleccionada=this.empresaSeleccionada,o.componentInstance.isModal=!0,o.result.then(function(e){if(t.codigoEmpleado=e?e.rhEmpleadoPK.empId:null,t.rhRol.rhEmpleado.rhEmpleadoPK.empId=e?e.rhEmpleadoPK.empId:null,t.rhRol.rhEmpleado=e||new h.a,t.rhRol.rhEmpleado.empNombres=e?e.empApellidos+" "+e.empNombres:null,t.rhRol.rhEmpleado.empSaldoAnterior<0&&(t.rhRol.rhEmpleado.empSaldoAnterior=-1*e.empSaldoAnterior,t.activarNegativo=!0),t.rhRol.rhEmpleado.empFechaUltimoSueldo){var o=t.utilService.formatoDateSinZonaHorariaYYYMMDD(t.rhRol.rhEmpleado.empFechaUltimoSueldo),a=o.setDate(o.getDate()+1);t.fechaUltimoSueldo=new Date(a),t.fechaRegitro=new Date(a)}else t.fechaRegitro=t.fechaActual,t.fechaUltimoSueldo=t.fechaActual;t.documentoValido=!0,t.validarPeriodoAbierto(),t.validarFechas(),t.calcularTotal(),t.focusMotivo()},function(){t.focusEmpleado()})},e.prototype.validarEmpleado=function(){this.codigoEmpleado!==this.rhRol.rhEmpleado.rhEmpleadoPK.empId&&(this.codigoEmpleado=null,this.totalLiquidacion=0,this.rhRol=new v.a,this.rhRol.rhEmpleado.empMotivoSalida=this.listaMotivos[0])},e.prototype.focusEmpleado=function(){var e=document.getElementById("empleado");e&&e.focus()},e.prototype.focusMotivo=function(){var e=document.getElementById("motivoSalida");e&&e.focus()},e.prototype.guardarLiquidacion=function(e){this.cargando=!0;var t=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&t&&this.totalLiquidacion>=0&&this.documentoValido&&this.fechaValido&&this.periodoAbierto&&this.isLiquidacion()){var o=JSON.parse(JSON.stringify(this.rhRol));o.rhEmpleado.empSaldoAnterior=this.activarNegativo?-1*o.rhEmpleado.empSaldoAnterior:o.rhEmpleado.empSaldoAnterior,o.rolFechaUltimoSueldo=o.rhEmpleado.empFechaUltimoSueldo?this.utilService.formatoDateSinZonaHorariaYYYMMDD(o.rhEmpleado.empFechaUltimoSueldo).getTime():this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.fechaActual).getTime(),this.formaPagoSeleccionada.ctaCodigo&&(o.conCuentas.conCuentasPK.ctaEmpresa=this.empresaSeleccionada.empCodigo,o.conCuentas.conCuentasPK.ctaCodigo=this.formaPagoSeleccionada.ctaCodigo,o.rolFormaPago=this.formaPagoSeleccionada.ctaCodigo),o.rolDocumento=""!==o.rolDocumento&&o.rolDocumento?o.rolDocumento.trim():null,o.rhEmpleado.empFechaPrimeraSalida?o.rhEmpleado.empFechaUltimaSalida=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.fechaFinLabores).getTime():o.rhEmpleado.empFechaPrimeraSalida=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.fechaFinLabores).getTime(),o.rhEmpleado.empInactivo=!0,o.rolDiasFaltasReales=1,o.empCargo=o.rhEmpleado.empCargo,o.rolDesde=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.fechaRegitro).getTime(),o.rolHasta=this.utilService.formatoDateSinZonaHorariaYYYMMDD(this.fechaRegitro).getTime(),o.conContableProvision=null,o.conContable=null,o.prdSector=o.rhEmpleado.prdSector;var a={rhRol:o};if(this.esContable){var i=y({},this.conContableCopia);i.conPendiente=this.estadoContableAMayorizar,o.rolAuxiliar=!0;var n={rhRol:o,conContable:i};this.liquidacionService.modificarRhLiquidacion(n,this,r.a.KEY_EMPRESA_SELECT)}else this.liquidacionService.insertarLiquidacion(a,this,r.a.KEY_EMPRESA_SELECT)}else this.toastr.error(r.a.MSJ_CAMPOS_INVALIDOS,r.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.isLiquidacion=function(){return 0!==this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqBonificacion)||0!==this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqDesahucio)||0!==this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqBonificacion)||0!==this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqBonificacion)||0!==this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqDesahucioIntempestivo)||0!==this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqSalarioDigno)||0!==this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqVacaciones)||0!==this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqXiii)||0!==this.utilService.convertirDecimaleFloat(this.rhRol.rolLiqXiv)},e.prototype.despuesDeInsertarLiquidacion=function(e){this.cargando=!1,e&&(this.esContable?(this.conContable.conFecha=this.conContableCopia.conFecha,this.conContable.conObservaciones=this.conContableCopia.conObservaciones,this.conContable.conPendiente=this.estadoContableAMayorizar,this.estadoContableAMayorizar?(this.utilService.generarSwalHTML(r.a.SWAL_CORRECTO,r.a.SWAL_SUCCESS,e.operacionMensaje,r.a.ICON_OK_SWAL,r.a.SWAL_OK),this.cancelarSiEsContable()):this.preguntarImprimir(e)):this.preguntarImprimir(e))},e.prototype.preguntarImprimir=function(e){var t=this,o={title:r.a.TOAST_CORRECTO,texto:e.operacionMensaje+"<br>"+r.a.MSJ_PREGUNTA_IMPRIMIR,type:r.a.SWAL_SUCCESS,confirmButtonText:"<i class='"+r.a.ICON_IMPRIMIR+"'></i>  "+r.a.LABEL_IMPRIMIR,cancelButtonText:r.a.LABEL_SALIR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o&&t.imprimirContable(e.extraInfo)}),this.esContable?this.cancelarSiEsContable():this.resetearFormulario()},e.prototype.imprimirContable=function(e){var t=this;if(this.utilService.verificarPermiso(r.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var o=[],a=new b.a;a=e.conContable.conContablePK,o.push(a);var i={listadoPK:o};this.archivoService.postPDF("todocompuWS/contabilidadWebController/generarReporteContableIndividual",i,this.empresaSeleccionada).then(function(e){e._body.byteLength>0?t.utilService.descargarArchivoPDF("Contable.pdf",e):t.toastr.warning(r.a.MSJ_ERROR_IMPRIMIR,r.a.TAG_AVISO),t.cargando=!1,t.esContable?t.cancelarSiEsContable():t.resetearFormulario()}).catch(function(e){return t.utilService.handleError(e,t)})}},e.prototype.cancelar=function(){var e=this;if(this.sePuedeCancelar())this.esContable?this.cancelarSiEsContable():this.resetearFormulario();else{var t={title:r.a.MSJ_TITULO_CANCELAR,texto:r.a.MSJ_PREGUNTA_CANCELAR,type:r.a.SWAL_QUESTION,confirmButtonText:r.a.MSJ_SI_ACEPTAR,cancelButtonText:r.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&(e.esContable?e.cancelarSiEsContable():e.resetearFormulario())})}},e.prototype.sePuedeCancelar=function(){return this.utilService.puedoCancelar(this.valoresIniciales,this.frmLiquidacion)},e.prototype.cambiarActivar=function(){this.activarLiquidacion=!this.activarLiquidacion,this.enviarAccion.emit({accion:r.a.ACCION_ACTIVAR,estado:this.activarLiquidacion})},e.prototype.cancelarSiEsContable=function(){this.enviarAccion.emit({accion:r.a.ACCION_CANCELAR})},D([Object(a.Input)(),L("design:type",Array)],e.prototype,"listaEmpresas",void 0),D([Object(a.Input)(),L("design:type",u.a)],e.prototype,"empresaSeleccionada",void 0),D([Object(a.Input)(),L("design:type",String)],e.prototype,"accion",void 0),D([Object(a.Input)(),L("design:type",v.a)],e.prototype,"rhRol",void 0),D([Object(a.Input)(),L("design:type",Boolean)],e.prototype,"esContable",void 0),D([Object(a.Input)(),L("design:type",_.a)],e.prototype,"conContable",void 0),D([Object(a.Input)(),L("design:type",P.a)],e.prototype,"tipoSeleccionado",void 0),D([Object(a.Input)(),L("design:type",Object)],e.prototype,"data",void 0),D([Object(a.Input)(),L("design:type",String)],e.prototype,"titulo",void 0),D([Object(a.Output)(),L("design:type",Object)],e.prototype,"enviarAccion",void 0),D([Object(a.Input)(),L("design:type",Array)],e.prototype,"listaFormaPago",void 0),D([Object(a.ViewChild)("frmLiquidacion"),L("design:type",g.NgForm)],e.prototype,"frmLiquidacion",void 0),e=D([Object(a.Component)({selector:"app-liquidacion",template:o("EWe9"),styles:[o("8j59")]}),L("design:paramtypes",[n.ActivatedRoute,s.b,c.HotkeysService,l.a,d.a,p.a,m.b,f.a,R.a,N.a,E,T.a])],e)}()},SxCF:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var a=o("uPUy"),i=function(){function e(e){this.invBodegaPK=new a.a,this.bodNombre="",this.bodInactiva=!1,this.secEmpresa="",this.secCodigo="",this.detEmpresa="",this.detUsuario="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=new Date,this.bodProductoPermitido="",this.bodProductoNoPermitido="",this.invConsumosList=[],this.invVentasDetalleList=[],this.invConsumosDetalleList=[],this.invTransferenciasList=[],this.invTransferenciasList1=[],this.invTransferenciasDetalleList=[],this.invTransferenciasDetalleList1=[],this.invProductoSaldosList=[],this.invComprasList=[],this.invComprasDetalleList=[],this.invVentasList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invBodegaPK=e.invBodegaPK?e.invBodegaPK:this.invBodegaPK,this.bodNombre=e.bodNombre?e.bodNombre:this.bodNombre,this.bodInactiva=e.bodInactiva?e.bodInactiva:this.bodInactiva,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.detEmpresa=e.detEmpresa?e.detEmpresa:this.detEmpresa,this.detUsuario=e.detUsuario?e.detUsuario:this.detUsuario,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.bodProductoPermitido=e.bodProductoPermitido?e.bodProductoPermitido:this.bodProductoPermitido,this.bodProductoNoPermitido=e.bodProductoNoPermitido?e.bodProductoNoPermitido:this.bodProductoNoPermitido,this.invConsumosList=e.invConsumosList?e.invConsumosList:this.invConsumosList,this.invVentasDetalleList=e.invVentasDetalleList?e.invVentasDetalleList:this.invVentasDetalleList,this.invConsumosDetalleList=e.invConsumosDetalleList?e.invConsumosDetalleList:this.invConsumosDetalleList,this.invTransferenciasList=e.invTransferenciasList?e.invTransferenciasList:this.invTransferenciasList,this.invTransferenciasList1=e.invTransferenciasList?e.invTransferenciasList:this.invTransferenciasList,this.invTransferenciasDetalleList=e.invTransferenciasDetalleList?e.invTransferenciasDetalleList:this.invTransferenciasDetalleList,this.invTransferenciasDetalleList1=e.invTransferenciasDetalleList1?e.invTransferenciasDetalleList1:this.invTransferenciasDetalleList1,this.invProductoSaldosList=e.invProductoSaldosList?e.invProductoSaldosList:this.invProductoSaldosList,this.invComprasList=e.invComprasList?e.invComprasList:this.invComprasList,this.invComprasDetalleList=e.invComprasDetalleList?e.invComprasDetalleList:this.invComprasDetalleList,this.invVentasList=e.invVentasList?e.invVentasList:this.invVentasList},e}()},SxrA:function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_GRUPO_EMPRESARIAL}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}</strong>\r\n    </span>\r\n    <button type="button" class="close" style="color: white;" aria-label="close" (click)="cerrarModal()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div [ngClass]="{\'modal-body\': esModal}">\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card m-0 mb-2">\r\n          <div class="card-header p-1">\r\n            <b>\r\n              <span *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_EDITAR">\r\n                <i class="{{constantes.ICON_FILTRAR}}"></i> {{constantes.TITULO_FILTROS}}</span>\r\n              <span *ngIf="accion === constantes.ACCION_CREAR">\r\n                <i class="{{constantes.ICON_FILTRO_NUEVO}}"></i> {{tituloForm}}</span>\r\n              <span *ngIf="accion === constantes.ACCION_EDITAR">\r\n                <i class="{{constantes.ICON_FILTRO_EDITAR}}"></i> {{tituloForm}}</span>\r\n            </b>\r\n            <div class="card-header-actions" *ngIf="accion && accion !== constantes.ACCION_ELIMINAR">\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarGrupoEmp" (click)="insertarGrupoEmpresarial(frmGrupoEmpresarialDatos)"\r\n                *ngIf="accion === constantes.ACCION_CREAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarGrupoEmp" (click)="actualizarGrupoEmpresarial(frmGrupoEmpresarialDatos)"\r\n                *ngIf="accion === constantes.ACCION_EDITAR" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button class="btn btn-sm btn-default mr-1" type="button" (click)="resetear();" *ngIf="listaResultado.length!=0"\r\n                title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            \x3c!--FORMULARIO OPERACIONES--\x3e\r\n            <form #frmGrupoEmpresarialDatos=\'ngForm\' autocomplete="off">\r\n              <div *ngIf="accion && accion !== constantes.ACCION_ELIMINAR" class="row">\r\n                <div class="form-group form-group-sm col-sm-12 col-md-5 col-lg-4">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_CODIGO}}</b>\r\n                  </label>\r\n                  <input [appFocus]="accion === constantes.ACCION_CREAR" name="codigo" #codigo="ngModel" [(ngModel)]="invGrupoEmpresarial.invClienteGrupoEmpresarialPK.geCodigo"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" [disabled]="accion !== constantes.ACCION_CREAR" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    class="form-control form-control-sm mousetrap text-uppercase" required maxlength="20">\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-info-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" container="body" triggers="mouseenter:mouseleave"></span>\r\n                </div>\r\n                <div class="form-group form-group-sm col-sm-12 col-md-7 col-lg-8">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_NOMBRE}}</b>\r\n                  </label>\r\n                  <input [appFocus]="accion === constantes.ACCION_EDITAR" class="form-control form-control-sm mousetrap text-uppercase"\r\n                    name="detalle" maxlength="150" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="invGrupoEmpresarial.geNombre"\r\n                    id="detalle" required>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div [ngClass]="{\'col-lg-8 col-md-8 col-sm-8\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n        <div class="card" *ngIf="listaResultado?.length>0 && !accion">\r\n          <div class="card-header p-1">\r\n            <strong>{{constantes.INVENTARIO_GRUPO_EMPRESARIAL}}</strong>\r\n            <div class="card-header-actions">\r\n              <div class="btn-group pr-1">\r\n                <button *ngIf="false" type="button" class="btn btn-sm btn-primary mr-1" id="btnBuscarGrupoEmp" (click)="listarGruposEmpresariales()">\r\n                  <i class="{{constantes.ICON_CONSULTAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n                <button type="button" class="btn btn-sm btn-primary" id="btnNuevoGrupoEmp" (click)="operacionesGrupoEmpresarial(constantes.ACCION_CREAR)"\r\n                  ngbTooltip="{{constantes.LABEL_NUEVO}}" title="{{constantes.ATAJO_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true" container="body"></i>\r\n                  <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="card-body" style="padding: 0 0 0 0">\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group p-1">\r\n                  <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                    size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                    size="100">\r\n                  <div class="input-group-append">\r\n                    <span class="input-group-text">\r\n                      <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div class="float-right pr-1">\r\n                  <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                    maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--listado de cliente listado--\x3e\r\n            <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 240px);" class="ag-theme-balham"\r\n              [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n              [rowSelection]="rowSelection" [enableColResize]="true" [context]="context" (gridSizeChanged)="redimensionarColumnas()"\r\n              (gridReady)="onGridReady($event)" (rowSelected)="grupoEmpresarialSeleccionado = $event.node.data"\r\n              (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()"\r\n              (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimensionarColumnas()" (cellFocused)="filaFocused($event)">\r\n            </ag-grid-angular>\r\n            <p-contextMenu #menuOpciones [model]="opciones" appendTo="body" [baseZIndex]="1100"></p-contextMenu>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},T0hF:function(e,t){e.exports=""},T5Qx:function(e,t){e.exports='<form #frmConsumoDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n      title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{titulo}} - {{empresaSeleccionada.empNombre}}</b>\r\n    <div class="card-header-actions" *ngIf="!vistaDistribucion">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirConsumo" *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}"\r\n          (click)="imprimirConsumo()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Distribuir--\x3e\r\n        <button type="button" *ngIf="accion === constantes.ACCION_MAYORIZAR || accion === constantes.ACCION_CREAR"\r\n          class="btn btn-sm btn-primary mr-1" title="{{constantes.ATAJO_DISTRIBUIR}}" id="btnDistribuirConsumo"\r\n          ngbTooltip="{{constantes.TAG_DISTRIBUIR}}" (click)="distribuirConsumo()">\r\n          <i class="{{constantes.ICON_DISTRIBUIR}}" aria-hidden="true"></i>\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <div *ngIf="accion === constantes.ACCION_CREAR" class="btn-group mr-1">\r\n          <button id="btnGuardarConsumo" type="button" class="btn btn-sm btn-primary" (click)="consumoService.verificarPermiso(accion, empresaSeleccionada, true) ? insertarConsumo(frmConsumoDatos, false) : null"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}">\r\n            <i class="{{constantes.ICON_MAYORIZAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> </span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="consumoService.verificarPermiso(accion, empresaSeleccionada, true) ? insertarConsumo(frmConsumoDatos, true) : null">{{constantes.TAG_INCLUIR_PENDIENTES}}</a>\r\n          </div>\r\n        </div>\r\n        \x3c!--Mayorizar--\x3e\r\n        <div *ngIf="accion === constantes.ACCION_MAYORIZAR" class="btn-group mr-1">\r\n          <button id="btnGuardarConsumo" type="button" class="btn btn-sm btn-primary" (click)="consumoService.verificarPermiso(accion, empresaSeleccionada, true) ? mayorizarConsumo(frmConsumoDatos, false) : null"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}">\r\n            <i class="{{constantes.ICON_MAYORIZAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> </span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="consumoService.verificarPermiso(accion, empresaSeleccionada, true) ? mayorizarConsumo(frmConsumoDatos, true) : null">{{constantes.TAG_INCLUIR_PENDIENTES}}</a>\r\n          </div>\r\n        </div>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnAnularConsumo" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anularConsumo()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Restaurar--\x3e\r\n        <button id="btnRestaurarConsumo" *ngIf="accion === constantes.ACCION_RESTAURAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_RESTAURAR}}" (click)="restaurarConsumo()">\r\n          <i class="{{constantes.ICON_OK_SWAL}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarConsumo"\r\n          ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}"\r\n          (click)="cancelar()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Imprimir--\x3e\r\n        <button id="btnImprimirConsumo" *ngIf="accion !== constantes.ACCION_CREAR && accion !== constantes.ACCION_MAYORIZAR"\r\n          type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.ACCION_IMPRIMIR}}"\r\n          (click)="imprimirConsumo()" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_IMPRIMIR}}</span>\r\n        </button>\r\n        \x3c!--Distribuir--\x3e\r\n        <button type="button" *ngIf="accion === constantes.ACCION_MAYORIZAR || accion === constantes.ACCION_CREAR"\r\n          class="btn btn-sm btn-primary mr-1" title="{{constantes.ATAJO_DISTRIBUIR}}" id="btnDistribuirConsumo"\r\n          ngbTooltip="{{constantes.TAG_DISTRIBUIR}}" (click)="distribuirConsumo()">\r\n          <i class="{{constantes.ICON_DISTRIBUIR}}" aria-hidden="true"> </i> {{constantes.TAG_DISTRIBUIR}}\r\n        </button>\r\n        \x3c!--Guardar--\x3e\r\n        <div *ngIf="accion === constantes.ACCION_CREAR" class="btn-group mr-1">\r\n          <button id="btnGuardarConsumo" type="button" class="btn btn-sm btn-primary" (click)="consumoService.verificarPermiso(accion, empresaSeleccionada, true) ? insertarConsumo(frmConsumoDatos, false) : null"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}">\r\n            <i class="{{constantes.ICON_MAYORIZAR}}" aria-hidden="true"> </i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}} </span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="consumoService.verificarPermiso(accion, empresaSeleccionada, true) ? insertarConsumo(frmConsumoDatos, true) : null">{{constantes.TAG_INCLUIR_PENDIENTES}}</a>\r\n          </div>\r\n        </div>\r\n        \x3c!--Mayorizar--\x3e\r\n        <div *ngIf="accion === constantes.ACCION_MAYORIZAR" class="btn-group mr-1">\r\n          <button id="btnGuardarConsumo" type="button" class="btn btn-sm btn-primary" (click)="consumoService.verificarPermiso(accion, empresaSeleccionada, true) ? mayorizarConsumo(frmConsumoDatos, false) : null"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}">\r\n            <i class="{{constantes.ICON_MAYORIZAR}}" aria-hidden="true"> </i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}} </span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="consumoService.verificarPermiso(accion, empresaSeleccionada, true) ? mayorizarConsumo(frmConsumoDatos, true) : null">{{constantes.TAG_INCLUIR_PENDIENTES}}</a>\r\n          </div>\r\n        </div>\r\n        \x3c!--Anular--\x3e\r\n        <button id="btnAnularConsumo" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anularConsumo()">\r\n          <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n        </button>\r\n        \x3c!--Restaurar--\x3e\r\n        <button id="btnRestaurarConsumo" *ngIf="accion === constantes.ACCION_RESTAURAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.ACCION_RESTAURAR}}" (click)="restaurarConsumo()">\r\n          <i class="{{constantes.ICON_OK_SWAL}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.ACCION_RESTAURAR}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarConsumo"\r\n          (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class="card-header-actions" *ngIf="vistaDistribucion">\r\n      \x3c!--Sin etiquetas--\x3e\r\n      <div class="btn-group d-lg-none">\r\n        \x3c!--Aceptar--\x3e\r\n        <button id="btnAceptar" type="button" title="{{constantes.ATAJO_ACEPTAR}}" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_ACEPTAR}}" (click)="aceptarDistribucion()">\r\n          <i class="{{constantes.ICON_OK_SWAL}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"></span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarConsumo"\r\n          ngbTooltip="{{constantes.LABEL_CANCELAR}}" (click)="cancelarDistribucion()">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- Con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        \x3c!--Aceptar--\x3e\r\n        <button id="btnAceptar" type="button" title="{{constantes.ATAJO_ACEPTAR}}" class="btn btn-sm btn-primary mr-1"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_ACEPTAR}}" (click)="aceptarDistribucion()">\r\n          <i class="{{constantes.ICON_OK_SWAL}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_ACEPTAR}}</span>\r\n        </button>\r\n        \x3c!--Cancelar y/o regresar--\x3e\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarConsumo"\r\n          (click)="cancelarDistribucion()" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body p-1">\r\n    <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n      <div class="card mb-1" [ngClass]="{\'card-accent-danger\': invConsumos.consPendiente}">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <span class="mr-2 badge badge-pill" *ngIf="invConsumos.consPendiente" [ngClass]="{\'badge-danger\': invConsumos.consPendiente}">PENDIENTE</span>\r\n            <span class="mr-2 badge badge-pill" *ngIf="invConsumos.consAnulado" [ngClass]="{\'badge-default\': invConsumos.consAnulado}">ANULADO</span>\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseProductoCodigo"\r\n              aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseProductoCodigo">\r\n          <div class="row">\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_EMPRESA}}</strong>\r\n              </label>\r\n              <label class="form-control form-control-sm text-uppercase mousetrap input-label">\r\n                {{empresaSeleccionada.empNombre}} ({{empresaSeleccionada.empCodigo}})\r\n              </label>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n              </label>\r\n              <label class="form-control form-control-sm text-uppercase mousetrap input-label" *ngIf="accion===constantes.ACCION_MAYORIZAR">\r\n                {{motivoSeleccionado?.cmDetalle}} ({{motivoSeleccionado?.cmCodigo}})\r\n              </label>\r\n              <select id="selectMotivo" class="form-control form-control-sm  mousetrap" name="motivo" [(ngModel)]="motivoSeleccionado"\r\n                required *ngIf="accion!==constantes.ACCION_MAYORIZAR" (change)="seleccionarBodega()" [compareWith]="inicializarMotivos">\r\n                <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="motivo" *ngFor="let motivo of listaConsumoMotivo"> {{motivo?.cmDetalle}}\r\n                  ({{motivo?.cmCodigo}})</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              </label>\r\n              <select id="selectBodega" class="form-control form-control-sm  mousetrap" name="bodega" [(ngModel)]="bodegaSeleccionado"\r\n                required (change)="obtenerPiscinasParaConsumoDetalle()" [disabled]="motivoSeleccionado?.cmBodega && bodegaSeleccionado">\r\n                <option ngValue="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                <option [ngValue]="bodega" *ngFor="let bodega of listaBodega"> {{bodega?.bodNombre}}\r\n                  ({{bodega?.bodCodigo}})</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_FECHA}}</strong>\r\n              </label>\r\n              <p-calendar class="mousetrap calendar" name="fechaConsumo" [inputStyleClass]="isFechaValido == false ? \'has-error \' : \'\' "\r\n                [(ngModel)]="invConsumos.consFecha" [showIcon]="true" [maxDate]="fechaActual" [appMaxDate]="fechaActual"\r\n                [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true" (ngModelChange)="cambioLaFecha()"\r\n                placeholder="DD/MM/YYYY"></p-calendar>\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_REFERENCIA}}</strong>\r\n              </label>\r\n              <input type="text" appUppercase class="form-control text-uppercase form-control-sm mousetrap" id="referencia"\r\n                name="referencia" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="invConsumos.consReferencia">\r\n            </div>\r\n            <div class="form-group form-group-sm col-sm-4 has-feedback pr-2">\r\n              <label>\r\n                <strong>{{constantes.TAG_OBSERVACIONES}}</strong>\r\n              </label>\r\n              <input type="text" appUppercase class="form-control text-uppercase form-control-sm mousetrap" name="observacion"\r\n                placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="invConsumos.consObservaciones">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n    <div class="card mb-1" [hidden]="vistaDistribucion" *ngIf="bodegaSeleccionado?.bodCodigo && motivoSeleccionado?.cmCodigo">\r\n      <div class="card-header">\r\n        <strong>{{constantes.CONSUMO_DETALLE}}</strong>\r\n      </div>\r\n      <div class="card-body m-0 p-0" *ngIf="listaInvConsumosDetalle?.length>0">\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 395px); min-height: 300px;" class="ag-theme-balham"\r\n          [rowData]="listaInvConsumosDetalle" [columnDefs]="columnDefs" [enableSorting]="true" [rowSelection]="rowSelection"\r\n          [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n          [rowDragManaged]="true" (rowDragEnd)="refrescarOrdenDetalle($event)" [animateRows]="true" [suppressClickEdit]=true\r\n          (gridReady)="onGridReady($event)" (rowSelected)="detalleSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n          (filterChanged)="actualizarFilas()" (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenu($event.data,$event.rowIndex, $event.event)"\r\n          (cellEditingStopped)="alCambiarValorDeCelda($event)" [stopEditingWhenGridLosesFocus]="true"\r\n          [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</form>\r\n<div *ngIf="vistaDistribucion">\r\n  <app-distribuciones [empresaSeleccionada]="empresaSeleccionada" [listaInvConsumosDetalleDistribucion]="listaInvConsumosDetalleDistribucion"\r\n    [parametros]="parametrosDistribucion" [invProducto]="invProducto"></app-distribuciones>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},TjW0:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.medEmpresa="",this.medCodigo="",this.medDetalle="",this.medConvLibras=0,this.medConvKilos=0,this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.medEmpresa=e.medEmpresa?e.medEmpresa:this.medEmpresa,this.medCodigo=e.medCodigo?e.medCodigo:this.medCodigo,this.medDetalle=e.medDetalle?e.medDetalle:this.medDetalle,this.medConvLibras=e.medConvLibras?e.medConvLibras:this.medConvLibras,this.medConvKilos=e.medConvKilos?e.medConvKilos:this.medConvKilos,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},TsNY:function(e,t,o){"use strict";var a=o("CcnG"),i=o("mwBN"),r=o("EnEm"),n=o("ZYCi"),s=o("SZbH"),c=o("yccp"),l=o("CEfs"),d=o("nR5P"),p=o("Ungd"),u=o("EF/R"),h=o("z5Y/"),m=o("Ip0R"),C=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},v=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(){function e(e,t,o){this.api=e,this.utilService=t,this.toastr=o}return e.prototype.listarInvFunListaProductosSaldosGeneralTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunListaProductosSaldosGeneralTO",e,o).then(function(e){if(e&&e.extraInfo){var o=a.utilService.convertirMatrizEnLista(e.extraInfo.datos),i={columnas:e.extraInfo.columnas,listado:o,datos:e.extraInfo.datos,columnasFaltantes:e.extraInfo.columnasFaltantes};t.despuesDeListarInvFunListaProductosSaldosGeneralTO(i)}else a.toastr.warning(e.operacionMensaje,"Aviso"),t.despuesDeListarInvFunListaProductosSaldosGeneralTO(null),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.convertirCabeceraObjetoConEstilo=function(e){var t=[],o=0;return e.forEach(function(e){var a={headerName:null,width:null,field:null,cellClass:null,valueFormatter:null,pinned:null};a.headerName=e,a.field=o+"",a.width="Producto"===e?30:10,a.cellClass="Producto"===e||"C\xf3digo"===e?"text-sm-left ":"text-sm-right ",a.valueFormatter="Producto"===e||"C\xf3digo"===e?null:f,t.push(a),o+=1}),t},e=C([Object(a.Injectable)({providedIn:"root"}),v("design:paramtypes",[h.a,d.a,s.b])],e)}();function f(e){return new m.DecimalPipe("en-US").transform(e.value,"1.2-2")}var g=o("sXuD"),b=o("eUd/"),O=o("PYZn");o.d(t,"a",function(){return E});var S=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},I=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(){function e(e,t,o,a,n,s,c,l,d){this.route=e,this.toastr=t,this.atajoService=o,this.filasService=a,this.utilService=n,this.archivoService=s,this.auth=c,this.modalService=l,this.saldoBodegaGeneralService=d,this.listaEmpresas=[],this.productoSeleccionado=new g.a,this.productoCodigoCopia=null,this.constantes=i.a,this.es={},this.cargando=!1,this.activar=!1,this.screamXS=!0,this.filasTiempo=new r.a,this.listaResultado=[],this.columnas=[],this.columnasFaltantes=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return e.prototype.ngOnInit=function(){this.constantes=i.a,this.listaEmpresas=this.route.snapshot.data.saldoBodegaGeneral,this.screamXS=window.innerWidth<i.a.WINDOW_WIDTH_XS,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.focusProducto()},e.prototype.generarAtajosTeclado=function(){this.atajoService.add(new c.Hotkey(i.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarSaldoBodegaGeneral");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(i.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarSaldoBodegaGeneral");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(i.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarSaldoBodegaGeneral");return e&&e.click(),!1}))},e.prototype.listarSaldoBodegaGeneral=function(e){if(this.utilService.establecerFormularioTocado(e)&&e&&e.valid){this.limpiarResultado();var t={empresa:this.empresaSeleccionada.empCodigo,producto:this.productoCodigoCopia,fecha:null,estado:!1,usuario:this.auth.getCodigoUser()};this.cargando=!0,this.filasTiempo.iniciarContador(),this.saldoBodegaGeneralService.listarInvFunListaProductosSaldosGeneralTO(t,this,i.a.KEY_EMPRESA_SELECT)}else this.toastr.error(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.despuesDeListarInvFunListaProductosSaldosGeneralTO=function(e){this.filasTiempo.finalizarContador(),this.datos=e?e.datos:[],this.columnasFaltantes=e?e.columnasFaltantes:[],e&&(this.columnas=e.columnas?e.columnas:[],this.columnDefs=this.saldoBodegaGeneralService.convertirCabeceraObjetoConEstilo(e.columnas?e.columnas:[]),this.listaResultado=e?e.listado:[],this.iniciarAgGrid()),this.cargando=!1,this.generarAtajosTeclado()},e.prototype.exportarSaldoBodegaGeneral=function(){var e=this;this.utilService.verificarPermiso(i.a.ACCION_EXPORTAR,this,!0)&&(this.cargando=!0,this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteInvFunListaProductosSaldosGeneral",{datos:this.datos,columnas:this.columnas,columnasFaltantes:this.columnasFaltantes},this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"saldoBodegaGeneral_"):e.toastr.warning(i.a.MSJ_NO_DATA,i.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)}))},e.prototype.buscarProducto=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esCuentaCodigoValido())if(this.productoSeleccionado.proCodigoPrincipal&&this.productoSeleccionado.proCodigoPrincipal.length>0){var o={empresa:this.empresaSeleccionada.empCodigo,busqueda:this.productoSeleccionado.proCodigoPrincipal,categoria:null,incluirInactivos:!1,limite:!1};e.srcElement.blur(),e.preventDefault();var a=this.modalService.open(O.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.parametrosBusqueda=o,a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){t.productoCodigoCopia=e.proCodigoPrincipal,t.productoSeleccionado=e,setTimeout(function(){t.focusBuscarSaldoGeneral()},50)},function(e){t.focusProducto(),t.generarAtajosTeclado()})}else this.toastr.info(i.a.MSJ_ENTER_NO_DATA,i.a.TOAST_INFORMACION)},e.prototype.focusProducto=function(){var e=document.getElementById("idProducto");e&&e.focus()},e.prototype.focusBuscarSaldoGeneral=function(){var e=document.getElementById("btnBuscarSaldoBodegaGeneral");e&&e.focus()},e.prototype.validarProducto=function(){this.productoCodigoCopia!==this.productoSeleccionado.proCodigoPrincipal&&(this.productoCodigoCopia=null,this.productoSeleccionado=new g.a)},e.prototype.esCuentaCodigoValido=function(){return this.productoCodigoCopia&&this.productoCodigoCopia===this.productoSeleccionado.proCodigoPrincipal},e.prototype.cambiarEmpresaSeleccionada=function(){i.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.limpiarResultado()},e.prototype.limpiarResultado=function(){this.datos=[],this.gridApi=null,this.gridColumnApi=null,this.listaResultado=[],this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.iniciarAgGrid=function(){this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.onResize=function(){this.screamXS=window.innerWidth<i.a.WINDOW_WIDTH_XS},S([Object(a.HostListener)("window:resize",["$event"]),I("design:type",Function),I("design:paramtypes",[]),I("design:returntype",void 0)],e.prototype,"onResize",null),e=S([Object(a.Component)({selector:"app-saldo-bodega-general",template:o("LhHt"),styles:[o("KgXW")]}),I("design:paramtypes",[n.ActivatedRoute,s.b,c.HotkeysService,l.a,d.a,p.a,u.a,b.b,A])],e)}()},U2oW:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.tipEmpresa=null,this.tipCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.tipEmpresa=e.tipEmpresa?e.tipEmpresa:this.tipEmpresa,this.tipCodigo=e.tipCodigo?e.tipCodigo:this.tipCodigo},e}()},UBxT:function(e,t,o){"use strict";var a=function(){function e(e){this.empEmpresa=null,this.empId=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.empEmpresa=e.empEmpresa?e.empEmpresa:this.empEmpresa,this.empId=e.empId?e.empId:this.empId},e}(),i=o("flmD"),r=o("3hy1");o.d(t,"a",function(){return n});var n=function(){function e(e){this.rhEmpleadoPK=new a,this.empTipoId="",this.empResidenciaTipo="",this.empResidenciaPais="",this.empConvenio="",this.empApellidos="",this.empNombres="",this.empGenero="",this.empFechaNacimiento=null,this.empEstadoCivil="",this.empCargasFamiliares=0,this.empProvincia="",this.empCanton="",this.empLugarNacimiento="",this.empDomicilio="",this.empNumero="",this.empTelefono="",this.empCorreoElectronico="",this.empFechaPrimerIngreso=null,this.empFechaUltimoIngreso=null,this.empMotivoSalida=null,this.empFechaAfiliacionIess=null,this.empCodigoAfiliacionIess="",this.empCodigoCargo="",this.empCargo="",this.empSueldoIess=0,this.empFormaPago="",this.empDiasTrabajados=0,this.empDiasDescanso=0,this.empBonoFijo=0,this.empBonoFijoNd=0,this.empOtrosIngresos=0,this.empOtrosIngresosNd=0,this.empExtensionCoberturaIess=!1,this.empCancelarXiiiSueldoMensualmente=!1,this.empCancelarXivSueldoMensualmente=!1,this.empCancelarFondoReservaMensualmente=!1,this.empRetencion=!1,this.empEducacion=0,this.empAlimentacion=0,this.empSalud=0,this.empVivienda=0,this.empVestuario=0,this.empRebajaDiscapacidad=0,this.empRebajaTerceraEdad=0,this.empSueldoOtraCompania=0,this.empOtrasDeducciones=0,this.empOtrasRebajas=0,this.empUtilidades=0,this.empObservaciones="",this.empDiscapacidadTipo="",this.empDiscapacidadPorcentaje=0,this.empDiscapacidadIdTipo="",this.empDiscapacidadIdNumero="",this.empBanco="",this.empCuentaTipo="",this.empCuentaNumero="",this.empSalarioNeto=!1,this.empInactivo=!1,this.empSaldoAnterior=0,this.empSaldoAnticipos=0,this.empSaldoBonos=0,this.empSaldoBonosNd=0,this.empSaldoPrestamos=0,this.empSaldoCuotas=0,this.empFechaUltimoSueldo=null,this.prdSector=new i.a,this.rhCategoria=new r.a,this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=null,this.rhRolList=null,this.rhEmpleadoDescuentosFijosList=[],this.rhXiiiSueldoList=null,this.rhPrestamoList=null,this.rhVacacionesList=null,this.rhBonoList=null,this.rhXivSueldoList=null,this.rhAnticipoList=null,this.rhUtilidadesList=null,this.rhSalarioDignoList=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.rhEmpleadoPK=e.rhEmpleadoPK?e.rhEmpleadoPK:this.rhEmpleadoPK,this.empTipoId=e.empTipoId?e.empTipoId:this.empTipoId,this.empResidenciaTipo=e.empResidenciaTipo?e.empResidenciaTipo:this.empResidenciaTipo,this.empResidenciaPais=e.empResidenciaPais?e.empResidenciaPais:this.empResidenciaPais,this.empConvenio=e.empConvenio?e.empConvenio:this.empConvenio,this.empApellidos=e.empApellidos?e.empApellidos:this.empApellidos,this.empNombres=e.empNombres?e.empNombres:this.empNombres,this.empGenero=e.empGenero?e.empGenero:this.empGenero,this.empFechaNacimiento=e.empFechaNacimiento?e.empFechaNacimiento:this.empFechaNacimiento,this.empEstadoCivil=e.empEstadoCivil?e.empEstadoCivil:this.empEstadoCivil,this.empCargasFamiliares=e.empCargasFamiliares?e.empCargasFamiliares:this.empCargasFamiliares,this.empProvincia=e.empProvincia?e.empProvincia:this.empProvincia,this.empCanton=e.empCanton?e.empCanton:this.empCanton,this.empLugarNacimiento=e.empLugarNacimiento?e.empLugarNacimiento:this.empLugarNacimiento,this.empDomicilio=e.empDomicilio?e.empDomicilio:this.empDomicilio,this.empNumero=e.empNumero?e.empNumero:this.empNumero,this.empTelefono=e.empTelefono?e.empTelefono:this.empTelefono,this.empCorreoElectronico=e.empCorreoElectronico?e.empCorreoElectronico:this.empCorreoElectronico,this.empFechaPrimerIngreso=e.empFechaPrimerIngreso?e.empFechaPrimerIngreso:this.empFechaPrimerIngreso,this.empFechaPrimeraSalida=e.empFechaPrimeraSalida?e.empFechaPrimeraSalida:this.empFechaPrimeraSalida,this.empFechaUltimoIngreso=e.empFechaUltimoIngreso?e.empFechaUltimoIngreso:this.empFechaUltimoIngreso,this.empFechaUltimaSalida=e.empFechaUltimaSalida?e.empFechaUltimaSalida:this.empFechaUltimaSalida,this.empMotivoSalida=e.empMotivoSalida?e.empMotivoSalida:this.empMotivoSalida,this.empFechaAfiliacionIess=e.empFechaAfiliacionIess?e.empFechaAfiliacionIess:this.empFechaAfiliacionIess,this.empCodigoAfiliacionIess=e.empCodigoAfiliacionIess?e.empCodigoAfiliacionIess:this.empCodigoAfiliacionIess,this.empCodigoCargo=e.empCodigoCargo?e.empCodigoCargo:this.empCodigoCargo,this.empCargo=e.empCargo?e.empCargo:this.empCargo,this.empSueldoIess=e.empSueldoIess?e.empSueldoIess:this.empSueldoIess,this.empFormaPago=e.empFormaPago?e.empFormaPago:this.empFormaPago,this.empDiasTrabajados=e.empDiasTrabajados?e.empDiasTrabajados:this.empDiasTrabajados,this.empDiasDescanso=e.empDiasDescanso?e.empDiasDescanso:this.empDiasDescanso,this.empBonoFijo=e.empBonoFijo?e.empBonoFijo:this.empBonoFijo,this.empBonoFijoNd=e.empBonoFijoNd?e.empBonoFijoNd:this.empBonoFijoNd,this.empOtrosIngresos=e.empOtrosIngresos?e.empOtrosIngresos:this.empOtrosIngresos,this.empOtrosIngresosNd=e.empOtrosIngresosNd?e.empOtrosIngresosNd:this.empOtrosIngresosNd,this.empExtensionCoberturaIess=e.empExtensionCoberturaIess?e.empExtensionCoberturaIess:this.empExtensionCoberturaIess,this.empCancelarXiiiSueldoMensualmente=e.empCancelarXiiiSueldoMensualmente?e.empCancelarXiiiSueldoMensualmente:this.empCancelarXiiiSueldoMensualmente,this.empCancelarXivSueldoMensualmente=e.empCancelarXivSueldoMensualmente?e.empCancelarXivSueldoMensualmente:this.empCancelarXivSueldoMensualmente,this.empCancelarFondoReservaMensualmente=e.empCancelarFondoReservaMensualmente?e.empCancelarFondoReservaMensualmente:this.empCancelarFondoReservaMensualmente,this.empRetencion=e.empRetencion?e.empRetencion:this.empRetencion,this.empEducacion=e.empEducacion?e.empEducacion:this.empEducacion,this.empAlimentacion=e.empAlimentacion?e.empAlimentacion:this.empAlimentacion,this.empSalud=e.empSalud?e.empSalud:this.empSalud,this.empVivienda=e.empVivienda?e.empVivienda:this.empVivienda,this.empVestuario=e.empVestuario?e.empVestuario:this.empVestuario,this.empRebajaDiscapacidad=e.empRebajaDiscapacidad?e.empRebajaDiscapacidad:this.empRebajaDiscapacidad,this.empRebajaTerceraEdad=e.empRebajaTerceraEdad?e.empRebajaTerceraEdad:this.empRebajaTerceraEdad,this.empSueldoOtraCompania=e.empSueldoOtraCompania?e.empSueldoOtraCompania:this.empSueldoOtraCompania,this.empOtrasDeducciones=e.empOtrasDeducciones?e.empOtrasDeducciones:this.empOtrasDeducciones,this.empOtrasRebajas=e.empOtrasRebajas?e.empOtrasRebajas:this.empOtrasRebajas,this.empUtilidades=e.empUtilidades?e.empUtilidades:this.empUtilidades,this.empObservaciones=e.empObservaciones?e.empObservaciones:this.empObservaciones,this.empDiscapacidadTipo=e.empDiscapacidadTipo?e.empDiscapacidadTipo:this.empDiscapacidadTipo,this.empDiscapacidadPorcentaje=e.empDiscapacidadPorcentaje?e.empDiscapacidadPorcentaje:this.empDiscapacidadPorcentaje,this.empDiscapacidadIdTipo=e.empDiscapacidadIdTipo?e.empDiscapacidadIdTipo:this.empDiscapacidadIdTipo,this.empDiscapacidadIdNumero=e.empDiscapacidadIdNumero?e.empDiscapacidadIdNumero:this.empDiscapacidadIdNumero,this.empBanco=e.empBanco?e.empBanco:this.empBanco,this.empCuentaTipo=e.empCuentaTipo?e.empCuentaTipo:this.empCuentaTipo,this.empCuentaNumero=e.empCuentaNumero?e.empCuentaNumero:this.empCuentaNumero,this.empSalarioNeto=e.empSalarioNeto?e.empSalarioNeto:this.empSalarioNeto,this.empInactivo=e.empInactivo?e.empInactivo:this.empInactivo,this.empSaldoAnterior=e.empSaldoAnterior?e.empSaldoAnterior:this.empSaldoAnterior,this.empSaldoAnticipos=e.empSaldoAnticipos?e.empSaldoAnticipos:this.empSaldoAnticipos,this.empSaldoBonos=e.empSaldoBonos?e.empSaldoBonos:this.empSaldoBonos,this.empSaldoBonosNd=e.empSaldoBonosNd?e.empSaldoBonosNd:this.empSaldoBonosNd,this.empSaldoPrestamos=e.empSaldoPrestamos?e.empSaldoPrestamos:this.empSaldoPrestamos,this.empSaldoCuotas=e.empSaldoCuotas?e.empSaldoCuotas:this.empSaldoCuotas,this.empFechaUltimoSueldo=e.empFechaUltimoSueldo?e.empFechaUltimoSueldo:this.empFechaUltimoSueldo,this.prdSector=e.prdSector?e.prdSector:this.prdSector,this.rhCategoria=e.rhCategoria?e.rhCategoria:this.rhCategoria,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.rhRolList=e.rhRolList?e.rhRolList:this.rhRolList,this.rhEmpleadoDescuentosFijosList=e.rhEmpleadoDescuentosFijosList?e.rhEmpleadoDescuentosFijosList:this.rhEmpleadoDescuentosFijosList,this.rhXiiiSueldoList=e.rhXiiiSueldoList?e.rhXiiiSueldoList:this.rhXiiiSueldoList,this.rhPrestamoList=e.rhPrestamoList?e.rhPrestamoList:this.rhPrestamoList,this.rhVacacionesList=e.rhVacacionesList?e.rhVacacionesList:this.rhVacacionesList,this.rhBonoList=e.rhBonoList?e.rhBonoList:this.rhBonoList,this.rhXivSueldoList=e.rhXivSueldoList?e.rhXivSueldoList:this.rhXivSueldoList,this.rhAnticipoList=e.rhAnticipoList?e.rhAnticipoList:this.rhAnticipoList,this.rhUtilidadesList=e.rhUtilidadesList?e.rhUtilidadesList:this.rhUtilidadesList,this.rhSalarioDignoList=e.rhSalarioDignoList?e.rhSalarioDignoList:this.rhSalarioDignoList},e}()},UbKW:function(e,t,o){"use strict";o.d(t,"a",function(){return I});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("3IAp"),l=o("EBa0"),d=o("n/Mz"),p=o("EF/R"),u=o("XYH7"),h=o("Ip0R"),m=o("OeYz"),C=o("mozY"),v=o("gLZI"),A=o("/TJv"),f=o("tIKS"),g=o("madF"),b=o("tc6t"),O=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listarOrdenesPedido=function(e,t,o){var a=this;t.filasTiempo&&!t.isCombo&&t.filasTiempo.iniciarContador(),this.api.post("todocompuWS/pedidosWebController/getInvPedidos",e,o).then(function(e){t.filasTiempo&&!t.isCombo&&t.filasTiempo.finalizarContador(),e&&e.extraInfo?t.despuesDeListarOrdenPedido(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.actualizarFilas(),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listaInvPedidosOrdenTO=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/getListaInvPedidosOrdenTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarOrdenPedido(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.actualizarFilas(),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerOrdenPedido=function(e,t,o){var a=this;t.filasTiempo&&t.filasTiempo.iniciarContador(),this.api.post("todocompuWS/pedidosWebController/obtenerInvPedidos",e,o).then(function(e){t.filasTiempo&&t.filasTiempo.finalizarContador(),e&&e.extraInfo?t.despuesDeObtenerOrdenPedido(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosParaGenerarOP=function(e,t,o){var a=this;return this.api.post("todocompuWS/pedidosWebController/obtenerDatosParaGenerarOP",e,o).then(function(e){var o=null;return e&&e.estadoOperacion===s.a.KEY_EXITO&&e.extraInfo?e.extraInfo.fechaActual&&e.extraInfo.invPedidosMotivo&&e.extraInfo.invPedidosConfiguracionTO?o=e.extraInfo:a.toastr.warning(s.a.MSJ_NO_DATA_ACCION,s.a.TAG_AVISO):a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1,o}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.establecerFuncionesUsuario=function(e){var t=[];return t=this.establecerFuncionesConfiguracionUsuario(e.listRegistradores,"Registrador",t),t=this.establecerFuncionesConfiguracionUsuario(e.listAprobadores,"Aprobador",t),t=this.establecerFuncionesConfiguracionUsuario(e.listEjecutores,"Ejecutor",t)},e.prototype.establecerFuncionesConfiguracionUsuario=function(e,t,o){for(var a=this.auth.getCodigoUser(),i=0,r=e;i<r.length;i++){var n=r[i];n.usuario.usrCodigo&&n.usuario.usrCodigo===a&&("Registrador"===t?o.push("Registrador"):"Aprobador"===t?o.push("Aprobador"):"Ejecutor"===t&&o.push("Ejecutor"))}return o},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear&&t.funcionesUsuario.indexOf("Registrador")>-1;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_MAYORIZAR:case s.a.ACCION_DESMAYORIZAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar&&t.funcionesUsuario.indexOf("Registrador")>-1;break;case s.a.ACCION_ANULAR:case s.a.ACCION_RESTAURAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar&&t.funcionesUsuario.indexOf("Registrador")>-1;break;case s.a.ACCION_APROBAR:case s.a.ACCION_DESAPROBAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar&&t.funcionesUsuario.indexOf("Aprobador")>-1;break;case s.a.ACCION_EJECUTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar&&t.funcionesUsuario.indexOf("Ejecutor")>-1;break;case s.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar&&t.funcionesUsuario.indexOf("Registrador")>-1;break;case s.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.ERROR_403_TITULO),a},e.prototype.getEstadoInvPedidos=function(e){return!e.pedPendiente||e.pedAprobado||e.pedAnulado||e.pedEjecutado?e.pedPendiente||e.pedAprobado||e.pedAnulado||e.pedEjecutado?e.pedPendiente||!e.pedAprobado||e.pedAnulado||e.pedEjecutado?e.pedPendiente||e.pedAprobado||!e.pedAnulado||e.pedEjecutado?!e.pedPendiente&&e.pedAprobado&&!e.pedAnulado&&e.pedEjecutado?s.a.ETIQUETA_EJECUTADO:"":s.a.ETIQUETA_ANULADO:s.a.ETIQUETA_PEDIDO_APROBADO:s.a.ETIQUETA_POR_APROBAR_PEDIDO:s.a.ETIQUETA_PENDIENTE},e.prototype.getEstadoInvPedidoTO=function(e){return!e.pedpendiente||e.pedaprobado||e.pedanulado||e.pedejecutado?e.pedpendiente||e.pedaprobado||e.pedanulado||e.pedejecutado?e.pedpendiente||!e.pedaprobado||e.pedanulado||e.pedejecutado?e.pedpendiente||e.pedaprobado||!e.pedanulado||e.pedejecutado?!e.pedpendiente&&e.pedaprobado&&!e.pedanulado&&e.pedejecutado?s.a.ETIQUETA_EJECUTADO:"":s.a.ETIQUETA_ANULADO:s.a.ETIQUETA_PEDIDO_APROBADO:s.a.ETIQUETA_POR_APROBAR_PEDIDO:s.a.ETIQUETA_PENDIENTE},e.prototype.establecerFormatoVistaIvPedidos=function(e){e.pedFechaEmision="string"==typeof e.pedFechaEmision?this.utilService.fomatearFechaString(e.pedFechaEmision,"YYYY-MM-DD"):new Date(e.pedFechaEmision),e.pedFechaHoraEntrega="string"==typeof e.pedFechaHoraEntrega?this.utilService.fomatearFechaString(e.pedFechaHoraEntrega,"YYYY-MM-DD"):new Date(e.pedFechaHoraEntrega),e.pedFechaVencimiento="string"==typeof e.pedFechaVencimiento?this.utilService.fomatearFechaString(e.pedFechaVencimiento,"YYYY-MM-DD"):new Date(e.pedFechaVencimiento);var t=e;return t.invPedidosDetalleList=this.obtenerFormatoVistaIvPedidosDetalle(t.invPedidosDetalleList),t.pedObservacionesRegistra=" "===t.pedObservacionesRegistra?"":t.pedObservacionesRegistra,t.pedObservacionesAprueba=" "===t.pedObservacionesAprueba?"":t.pedObservacionesAprueba,t.pedObservacionesEjecuta=" "===t.pedObservacionesEjecuta?"":t.pedObservacionesEjecuta,t.pedOrdenCompra=" "===t.pedOrdenCompra?" ":t.pedOrdenCompra,t},e.prototype.obtenerFormatoVistaIvPedidosDetalle=function(e){var t=[];return e.forEach(function(e){var o=new d.a(e);o.parcial=Number(o.detCantidadAdquirida)*Number(o.detPrecioReal),o.proCodigoPrincipal=e.invProducto.invProductoPK.proCodigoPrincipal,t.push(o)}),t},e.prototype.establecerFormatoEnvioIvPedidos=function(e,t){var o=new c.a(e),a=[];return o.invPedidosDetalleList.forEach(function(e){var o=new d.a(e);delete o.parcial,delete o.proCodigoPrincipal,delete o.categoriaProductoValido,t!==s.a.ETIQUETA_PENDIENTE&&t!==s.a.ETIQUETA_POR_APROBAR_PEDIDO||a.push(o),t===s.a.ETIQUETA_PEDIDO_APROBADO&&o.detCantidadAprobada>0&&a.push(o),t===s.a.ETIQUETA_EJECUTADO&&o.detCantidadAdquirida>0&&a.push(o)}),o.invPedidosDetalleList=a,o},e.prototype.formatearListadoIvPedidosTO=function(e){var t=Array();return e.forEach(function(e){e.seleccionado&&t.push(new l.a(e))}),t},e.prototype.formatearImprimirPedidosIndividual=function(e){var t=Array();return e.forEach(function(e){var o=new u.a;o.pedEmpresa=e.codigoempresa,o.pedSector=e.codigosector,o.pedMotivo=e.codigomotivo,o.pedNumero=e.pedidonumero,t.push(o)}),t},e.prototype.crearInvPedidoTODeInvPedidos=function(e,t,o){var a=new l.a;return a.pedidonumero=e.invPedidosPK.pedNumero,a.codigoempresa=e.invPedidosPK.pedEmpresa,a.codigomotivo=e.invPedidosPK.pedMotivo,a.codigosector=e.invPedidosPK.pedSector,a.detallemotivo=o.pmDetalle,a.pedfecha=e.pedFechaEmision?e.pedFechaEmision:null,a.pedpendiente=e.pedPendiente,a.pedaprobado=e.pedAprobado,a.pedejecutado=e.pedEjecutado,a.pedanulado=e.pedAnulado,a.pedmontototal=e.pedMontoTotal,a.usrfechainserta=e.usrFechaInserta,a.obsregistra=e.pedObservacionesRegistra,a.obsaprueba=e.pedObservacionesAprueba,a.obsejecuta=e.pedObservacionesEjecuta,a.pedaprobado&&(a.aprobador=this.obtenerUsuarioFuncion(e.usrAprueba,"Aprobador",t)),a.pedejecutado&&(a.ejecutor=this.obtenerUsuarioFuncion(e.usrEjecuta,"Ejecutor",t)),a.registrador=this.obtenerUsuarioFuncion(e.usrRegistra,"Registrador",t),a.estado=this.getEstadoInvPedidoTO(a),a},e.prototype.obtenerUsuarioFuncion=function(e,t,o){var a="";switch(t){case"Aprobador":var i=o.listAprobadores.filter(function(t){return t.usuario.usrCodigo===e});a=i.length>0?i[0].usuario.usrNombre+" "+i[0].usuario.usrApellido:"S/D";break;case"Ejecutor":var r=o.listEjecutores.filter(function(t){return t.usuario.usrCodigo===e});a=r.length>0?r[0].usuario.usrNombre+" "+r[0].usuario.usrApellido:"S/D";break;case"Registrador":var n=o.listRegistradores.filter(function(t){return t.usuario.usrCodigo===e});a=n.length>0?n[0].usuario.usrNombre+" "+n[0].usuario.usrApellido:"S/D"}return a},e.prototype.obtenerAccionInvPedidos=function(e){switch(e){case s.a.ACCION_MAYORIZAR:return"EDITAR";case s.a.ACCION_APROBAR:return"APROBAR";case s.a.ACCION_DESAPROBAR:return"DESAPROBAR";case s.a.ACCION_EJECUTAR:return"EJECUTAR"}return null},e.prototype.obtenerUsuariosEmail=function(e,t){var o="";switch(e){case"Aprobador":t.listAprobadores.forEach(function(e){e.usuario.usrEmailUsuario&&""!=e.usuario.usrEmailUsuario&&(o=""===o?e.usuario.usrEmailUsuario:o+";"+e.usuario.usrEmailUsuario)});break;case"Ejecutor":t.listEjecutores.forEach(function(e){e.usuario.usrEmailUsuario&&""!=e.usuario.usrEmailUsuario&&(o=""===o?e.usuario.usrEmailUsuario:o+";"+e.usuario.usrEmailUsuario)});break;case"Registrador":t.listRegistradores.forEach(function(e){e.usuario.usrEmailUsuario&&""!=e.usuario.usrEmailUsuario&&(o=""===o?e.usuario.usrEmailUsuario:o+";"+e.usuario.usrEmailUsuario)})}return o},e.prototype.formatearOrdenPedido=function(e,t,o,a){var i=new c.a(e),r=this.auth.getCodigoUser();switch(i.invPedidosDetalleList=this.formatearInvPedidosDetalle(i.invPedidosDetalleList,a,o.accion),o.accion){case s.a.ACCION_CREAR:i.invPedidosPK=new u.a,i.invPedidosPK.pedEmpresa=o.motivoSeleccionado.invPedidosMotivoPK.pmEmpresa,i.invPedidosPK.pedSector=o.motivoSeleccionado.invPedidosMotivoPK.pmSector,i.invPedidosPK.pedMotivo=o.motivoSeleccionado.invPedidosMotivoPK.pmCodigo,i.invPedidosPK.pedNumero=null,i.invPedidosMotivo=o.motivoSeleccionado,i.pedPendiente=!!t,i.usrRegistra=r,i.usrAprueba=o.configuracion.listAprobadores[0].usuario.usrCodigo,i.usrEjecuta=o.configuracion.listEjecutores[0].usuario.usrCodigo,"registrar_aprobar"===a&&(i.usrAprueba=r,i.pedAprobado=!0,i.pedPendiente=!1,i.pedObservacionesAprueba=i.pedObservacionesRegistra,i.pedOrdenCompra=i.pedOrdenCompra);break;case s.a.ACCION_MAYORIZAR:i.pedPendiente=!!t,"registrar_aprobar"===a&&(i.usrAprueba=r,i.pedAprobado=!0,i.pedPendiente=!1,i.pedObservacionesAprueba=i.pedObservacionesRegistra,i.pedOrdenCompra=i.pedOrdenCompra);break;case s.a.ACCION_APROBAR:i.usrAprueba=r,i.pedAnulado=this.esAnuladoInvPedidos(i.invPedidosDetalleList),i.pedAprobado=!i.pedAnulado,i.pedPendiente=!1;break;case s.a.ACCION_DESAPROBAR:i.pedAnulado=!1,i.pedAprobado=!1,i.pedPendiente=!1;break;case s.a.ACCION_EJECUTAR:i.usrEjecuta=r,i.pedEjecutado=!0}return i.pedObservacionesRegistra=i.pedObservacionesRegistra&&i.pedObservacionesRegistra.length>0?i.pedObservacionesRegistra:" ",i.pedObservacionesAprueba=i.pedObservacionesAprueba&&i.pedObservacionesAprueba.length>0?i.pedObservacionesAprueba:" ",i.pedObservacionesEjecuta=i.pedObservacionesEjecuta&&i.pedObservacionesEjecuta.length>0?i.pedObservacionesEjecuta:" ",i.pedFechaEmision=i.pedFechaEmision?new Date(i.pedFechaEmision).getTime():null,i.pedFechaHoraEntrega=i.pedFechaHoraEntrega?new Date(i.pedFechaHoraEntrega).getTime():null,i.pedFechaVencimiento=i.pedFechaVencimiento?new Date(i.pedFechaVencimiento).getTime():null,i.pedOrdenCompra=i.pedOrdenCompra?i.pedOrdenCompra:"",i},e.prototype.formatearInvPedidosDetalle=function(e,t,o){for(var a=[],i=0,r=0,n=e;r<n.length;r++){var c=n[r],l=new d.a(c);l.detOrden=i,delete l.proCodigoPrincipal,delete l.parcial,delete l.categoriaProductoValido,l.detCantidadSolicitada=this.utilService.convertirStringNumber(l.detCantidadSolicitada),l.detCantidadAprobada=this.utilService.convertirStringNumber(l.detCantidadAprobada),l.detCantidadAdquirida=this.utilService.convertirStringNumber(l.detCantidadAdquirida),l.detObservacionesRegistra=l.detObservacionesRegistra&&l.detObservacionesRegistra.length>0?l.detObservacionesRegistra:" ",l.detObservacionesAprueba=l.detObservacionesAprueba&&l.detObservacionesAprueba.length>0?l.detObservacionesAprueba:" ",l.detObservacionesEjecuta=l.detObservacionesEjecuta&&l.detObservacionesEjecuta.length>0?l.detObservacionesEjecuta:" ",o===s.a.ACCION_CREAR&&(l.detSecuencial=null),o!==s.a.ACCION_MAYORIZAR&&o!==s.a.ACCION_CREAR||(l.detCantidadAprobada=l.detCantidadSolicitada,"registrar_aprobar"===t&&(l.detObservacionesAprueba=l.detObservacionesRegistra)),o===s.a.ACCION_EJECUTAR&&0===l.detCantidadAdquirida&&(l.detPrecioReal=0),a.push(l),i++}return a},e.prototype.esAnuladoInvPedidos=function(e){for(var t=0,o=e;t<o.length;t++){if(o[t].detCantidadAprobada>0)return!1}return!0},e.prototype.puedeImprimirInvPedidos=function(e){for(var t=0,o=e;t<o.length;t++){if(o[t].detCantidadAdquirida>0)return!0}return!1},e.prototype.formatearA2Decimales=function(e){return new h.DecimalPipe("en-US").transform(e.value,"1.2-2")},e.prototype.estaAprobadoTodo=function(e){for(var t=0,o=e.invPedidosDetalleList;t<o.length;t++){if(0===o[t].detCantidadAprobada)return!1}return!0},e.prototype.obtenerReceptoresInvPedidos=function(e,t){var o="";switch(e){case"PENDIENTE":for(var a=0,i=t.configuracion.listAprobadores;a<i.length;a++){var r=i[a];o=""===o?o+r.usuario.usrNombre+" "+r.usuario.usrApellido:o+", "+r.usuario.usrNombre+" "+r.usuario.usrApellido}break;case"PEDIDO APROBADO":for(var n=0,s=t.configuracion.listEjecutores;n<s.length;n++){var c=s[n];o=""===o?o+c.usuario.usrNombre+" "+c.usuario.usrApellido:o+", "+c.usuario.usrNombre+" "+c.usuario.usrApellido}}return o},e.prototype.obtenerNombreReporte=function(e){switch(e){case"PENDIENTE":return"reportOrdenPedidoPendiente.jrxml";case"PEDIDO APROBADO":return"reportOrdenPedidoAprobado.jrxml";case"EJECUTADO":return"reportOrdenPedidoEjecutado.jrxml";case"HISTORIAL":return"reportOrdenPedidoHistorial.jrxml"}return""},e.prototype.obtenerCampoDesdeReferencia=function(e){switch(e){case"ecosto01":return"proCostoReferencial1";case"ecosto02":return"proCostoReferencial2";case"ecosto03":return"proCostoReferencial3"}return null},e.prototype.obtenerListaDetalleOrdenCompra=function(e,t){var o=[];return t===s.a.ACCION_EJECUTAR?e.forEach(function(e){e.detCantidadAdquirida>0&&e.detPrecioReal>0&&o.push(e)}):o=e.slice(),o},e.prototype.puedoCancelarFormularioDetalle=function(e,t){if(e&&t&&JSON.stringify(e)!==JSON.stringify(t))return!1;return!0},e.prototype.validarCantidadSolicitada=function(e){var t=e.detCantidadSolicitada;return t&&t>=.01},e.prototype.validarCantidadAprobar=function(e){var t=e.detCantidadSolicitada;return e.detCantidadAprobada<=t},e.prototype.validarProducto=function(e){return!(!e.invProducto||!e.invProducto.invProductoPK.proCodigoPrincipal)},e.prototype.validarCategoriaProducto=function(e,t){return!t.invProductoCategoria.catDetalle||0==t.invProductoCategoria.catDetalle.trim().length||!(!e.invProducto.invProductoCategoria||e.invProducto.invProductoCategoria.catDetalle!==t.invProductoCategoria.catDetalle)},e.prototype.crearInvPedidoDetalle=function(){return new d.a({detOrden:0,detCantidadSolicitada:1})},e.prototype.generarColumnasOrdenPedidoDetalleAprobar=function(e){var t=this,o=e.accion!==s.a.ACCION_CONSULTAR&&e.accion!==s.a.ACCION_ANULAR&&e.accion!==s.a.ACCION_DESAPROBAR,a=e.motivoSeleccionado.pmAprobacionAutomatica&&e.usrRegistradorNombre.trim()===e.usrAprobadorNombre.trim()&&e.invPedidos.pedObservacionesRegistra===e.invPedidos.pedObservacionesAprueba,i=[];return i.push({headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:200,minWidth:200,cellClass:"cell-block",valueGetter:function(e){return e.data.invProducto.invProductoPK.proCodigoPrincipal}},{headerName:s.a.TAG_DESCRIPCION,field:"proNombre",width:200,minWidth:200,cellClass:"cell-block",valueGetter:function(e){return e.data.invProducto.proNombre}},{headerName:s.a.TAG_KARDEX,headerClass:"cell-header-center",width:50,minWidth:50,cellClass:"text-center cell-block",headerComponentFramework:v.a,headerComponentParams:{class:s.a.ICON_KARDEX,tooltip:s.a.TAG_KARDEX,text:"",enableSorting:!1},cellRendererFramework:A.a,cellRendererParams:{icono:s.a.ICON_KARDEX,tooltip:s.a.TAG_KARDEX,accion:"verKardex",class:""}},{headerName:s.a.TAG_UNIDAD_MEDIDA,field:"medDetalle",cellClass:"cell-block",width:150,minWidth:150,valueGetter:function(e){return e.data.invProducto.invProductoMedida.medDetalle},headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_UNIDAD_MEDIDA,text:s.a.TAG_UN_MEDIDA,enableSorting:!0}},{headerName:s.a.TAG_CANT_SOLICITADA,field:"detCantidadSolicitada",valueFormatter:this.formatearA2Decimales,width:150,minWidth:150,cellClass:"text-right cell-block",cellEditorFramework:C.a,headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_CANTIDAD_SOLICITADA,text:s.a.TAG_CANT_SOLICITADA,enableSorting:!0}}),o?i.push({headerComponent:"inputLabelCell",headerClass:"pr-0",headerComponentParams:{name:s.a.TAG_CANT_APROBADA,tooltipName:s.a.TAG_CANTIDAD_APROBADA,value:e.cantidadAprobadaCheck,tooltipText:"Aprobar todos"},field:"detCantidadAprobada",valueFormatter:this.formatearA2Decimales,width:150,minWidth:150,suppressKeyboardEvent:function(e){if((e.event.keyCode===s.a.KEYCODE_RIGHT||e.event.keyCode===s.a.KEYCODE_LEFT)&&e.editing)return!0},editable:!0,cellClass:"text-right",cellClassRules:{"cell-with-errors":function(e){return!t.validarCantidadAprobar(e.data)}},cellEditorFramework:C.a,cellEditorParams:{name:"detCantidadAprobada",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric}}):i.push({headerName:s.a.TAG_CANT_APROBADA,field:"detCantidadAprobada",valueFormatter:this.formatearA2Decimales,width:150,minWidth:150,cellClass:"text-right cell-block",cellEditorFramework:C.a,valueGetter:function(t){return e.invPedidos.pedAprobado?t.data.detCantidadAprobada:0},headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_CANTIDAD_APROBADA,text:s.a.TAG_CANT_APROBADA,enableSorting:!0}}),o?i.push({headerName:s.a.TAG_OBSERVACIONES,field:"detObservacionesAprueba",width:300,minWidth:120,suppressKeyboardEvent:function(e){if((e.event.keyCode===s.a.KEYCODE_RIGHT||e.event.keyCode===s.a.KEYCODE_LEFT)&&e.editing)return!0},editable:o,cellEditorFramework:m.a,cellEditorParams:{name:"detObservacionesAprueba",maxlength:1e3,inputClass:"text-uppercase",placeholder:""}}):i.push({headerName:s.a.TAG_OBSERVACIONES,field:"detObservacionesAprueba",width:300,minWidth:120}),i.push({headerName:s.a.TAG_OBS_REGISTRADOR,field:"",width:120,minWidth:120,cellRendererFramework:f.a,cellRendererParams:function(e){return{titulo:s.a.TAG_OBS_REGISTRADOR,informacion:e.data.detObservacionesRegistra}},headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_OBSERVACION_REGISTRADOR,text:s.a.TAG_OBS_REGISTRADOR,enableSorting:!0},hide:a}),i},e.prototype.generarColumnasOrdenPedidoAprobar=function(e){var t={headerName:s.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:"text-center",cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}},width:s.a.WIDTH_OPCIONES,minWidth:s.a.WIDTH_OPCIONES,cellRendererFramework:g.a,headerComponentFramework:v.a,headerComponentParams:{class:s.a.ICON_OPCIONES,tooltip:s.a.TAG_OPCIONES,text:"",enableSorting:!1}},o=[{headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:40,minWidth:40,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_ESTADO,headerClass:"text-center",field:"estado",width:90,minWidth:90,cellClass:"text-center",cellRenderer:"iconoEstado",cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_NUMERO,field:"pedidonumero",width:90,minWidth:90,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_FECHA,field:"pedfecha",width:100,minWidth:100,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_REGISTRADOR,field:"registrador",width:200,minWidth:200,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}}];return e||o.push({headerName:s.a.TAG_APROBADOR,field:"aprobador",width:200,minWidth:200,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}}),o.push(t),o},e.prototype.generarColumnasOrdenPedidoDetalle=function(e,t){var o=this,a=t===s.a.ACCION_CREAR||t===s.a.ACCION_MAYORIZAR,i=t===s.a.ACCION_CONSULTAR||t===s.a.ACCION_ELIMINAR||t===s.a.ACCION_ANULAR,r=[];return a&&r.push({headerName:s.a.TAG_MOVER_FILA,field:"",headerClass:"cell-header-center",cellClass:"text-center cell-block",width:40,minWidth:40,rowDrag:a,headerComponentFramework:v.a,headerComponentParams:{class:s.a.ICON_MOVER_FILA,tooltip:s.a.TAG_MOVER_FILA,text:"",enableSorting:!1},valueGetter:""},{headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:120,minWidth:120,cellClassRules:{"cell-with-errors":function(e){return!o.validarProducto(e.data)||!e.data.categoriaProductoValido}},suppressKeyboardEvent:function(t){if(t.event.keyCode!==s.a.KEYCODE_UP&&t.event.keyCode!==s.a.KEYCODE_DOWN){if(e.buscarProducto(t),t.editing)return!0}else if(t.editing)return o.utilService.desplazarTablaArribaAbajo(t.event.keyCode,t.node.rowIndex,e.listadoResultado)},editable:!0,valueGetter:function(e){return e.data.invProducto.invProductoPK.proCodigoPrincipal},cellEditorFramework:m.a,cellEditorParams:{name:"proCodigoPrincipal",maxlength:50,inputClass:"text-uppercase",placeholder:""}},{headerName:s.a.TAG_DESCRIPCION,field:"proNombre",width:200,minWidth:200,cellClass:"cell-block",valueGetter:function(e){return e.data.invProducto.proNombre}},{headerName:s.a.TAG_KARDEX,headerClass:"cell-header-center",cellClass:"text-center cell-block",width:50,minWidth:50,headerComponentFramework:v.a,headerComponentParams:{class:s.a.ICON_KARDEX,tooltip:s.a.TAG_KARDEX,text:"",enableSorting:!1},cellRendererFramework:A.a,cellRendererParams:{icono:s.a.ICON_KARDEX,tooltip:s.a.TAG_KARDEX,accion:"verKardex",class:""}},{headerName:s.a.TAG_UNIDAD_MEDIDA,field:"medDetalle",width:150,minWidth:150,cellClass:"cell-block",valueGetter:function(e){return e.data.invProducto.invProductoMedida.medDetalle},headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_UNIDAD_MEDIDA,text:s.a.TAG_UN_MEDIDA,enableSorting:!0}},{headerName:s.a.TAG_CANTIDAD,field:"detCantidadSolicitada",valueFormatter:this.formatearA2Decimales,width:120,minWidth:120,suppressKeyboardEvent:function(t){if(t.editing)return o.utilService.desplazarTablaArribaAbajo(t.event.keyCode,t.node.rowIndex,e.listadoResultado)||o.utilService.desplazarseInputIzquierdaDerecha(t.event.keyCode)},editable:!0,cellClass:"text-right",cellClassRules:{"cell-with-errors":function(e){return!o.validarCantidadSolicitada(e.data)}},cellEditorFramework:C.a,cellEditorParams:{name:"detCantidadSolicitada",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric}},{headerName:s.a.TAG_OBSERVACIONES,field:"detObservacionesRegistra",width:300,minWidth:120,cellClass:"text-uppercase",suppressKeyboardEvent:function(t){if(e.agregarFilaAlFinal(t),t.editing)return o.utilService.desplazarTablaArribaAbajo(t.event.keyCode,t.node.rowIndex,e.listadoResultado)||o.utilService.desplazarseInputIzquierdaDerecha(t.event.keyCode)},editable:!0,cellEditorFramework:m.a,cellEditorParams:{name:"detObservacionesRegistra",maxlength:1e3,inputClass:"text-uppercase",placeholder:""}},{headerName:s.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:"text-center cell-block",width:s.a.WIDTH_OPCIONES,minWidth:s.a.WIDTH_OPCIONES,cellRendererFramework:g.a,headerComponentFramework:v.a,headerComponentParams:{class:s.a.ICON_OPCIONES,tooltip:s.a.TAG_OPCIONES,text:"",enableSorting:!1}}),i&&(r.push({headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:200,minWidth:200,valueGetter:function(e){return e.data.invProducto.invProductoPK.proCodigoPrincipal}},{headerName:s.a.TAG_KARDEX,headerClass:"cell-header-center",cellClass:"text-center cell-block",width:70,minWidth:70,headerComponentFramework:v.a,headerComponentParams:{class:s.a.ICON_KARDEX,tooltip:s.a.TAG_KARDEX,text:"",enableSorting:!1},cellRendererFramework:A.a,cellRendererParams:{icono:s.a.ICON_KARDEX,tooltip:s.a.TAG_KARDEX,accion:"verKardex",class:""}},{headerName:s.a.TAG_DESCRIPCION,field:"proNombre",width:200,minWidth:200,valueGetter:function(e){return e.data.invProducto.proNombre}},{headerName:s.a.TAG_UNIDAD_MEDIDA,field:"medDetalle",width:150,minWidth:150,valueGetter:function(e){return e.data.invProducto.invProductoMedida.medDetalle},headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_UNIDAD_MEDIDA,text:s.a.TAG_UN_MEDIDA,enableSorting:!0}},{headerName:s.a.TAG_CANT_SOLICITADA,field:"detCantidadSolicitada",valueFormatter:this.formatearA2Decimales,width:120,minWidth:120,cellClass:"text-right",headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_CANTIDAD_SOLICITADA,text:s.a.TAG_CANT_SOLICITADA,enableSorting:!0}}),e.paraOrdenCompra?(r.push({headerName:s.a.TAG_CANT_APROBADA,field:"detCantidadAprobada",valueFormatter:this.formatearA2Decimales,width:120,minWidth:120,cellClass:"text-right",headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_CANTIDAD_APROBADA,text:s.a.TAG_CANT_APROBADA,enableSorting:!0}},{headerName:s.a.TAG_VER_ORDEN_COMPRA,headerClass:"cell-header-center",cellClass:"text-center",width:70,minWidth:70,pinnedRowCellRenderer:b.a,headerComponentFramework:v.a,headerComponentParams:{class:s.a.ICON_ORDENCOMPRA,tooltip:s.a.TAG_VER_ORDEN_COMPRA,text:"",enableSorting:!1},cellRendererFramework:A.a,cellRendererParams:function(e){return{icono:s.a.ICON_ORDENCOMPRA,tooltip:s.a.TAG_VER_ORDEN_COMPRA,accion:"consultarOrdenesCompra",class:""}}},{headerName:s.a.TAG_OBS_REGISTRADOR,field:"",width:120,minWidth:120,cellRendererFramework:f.a,cellRendererParams:function(e){return{titulo:s.a.TAG_OBS_REGISTRADOR,informacion:e.data.detObservacionesRegistra}},headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_OBSERVACION_REGISTRADOR,text:s.a.TAG_OBS_REGISTRADOR,enableSorting:!0}}),1!=e.motivoSeleccionado.pmAprobacionAutomatica&&r.push({headerName:s.a.TAG_OBS_APROBADOR,field:"",width:120,minWidth:120,cellRendererFramework:f.a,cellRendererParams:function(e){return{titulo:s.a.TAG_OBS_APROBADOR,informacion:e.data.detObservacionesAprueba}},headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_OBSERVACION_APROBADOR,text:s.a.TAG_OBS_APROBADOR,enableSorting:!0}})):r.push({headerName:s.a.TAG_OBS_REGISTRADOR,field:"",width:120,minWidth:120,cellRendererFramework:f.a,cellRendererParams:function(e){return{titulo:s.a.TAG_OBS_REGISTRADOR,informacion:e.data.detObservacionesRegistra}},headerComponentFramework:v.a,headerComponentParams:{class:"",tooltip:s.a.TAG_OBSERVACION_REGISTRADOR,text:s.a.TAG_OBS_REGISTRADOR,enableSorting:!0}})),r},e.prototype.generarColumnasOrdenPedido=function(e){var t=[];return t.push({headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:e.parametrosBusqueda.visualizarConsultaOrdenPedido?80:20,minWidth:e.parametrosBusqueda.visualizarConsultaOrdenPedido?80:20,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_ESTADO,headerClass:"text-center",field:"estado",width:e.parametrosBusqueda.visualizarConsultaOrdenPedido?100:40,minWidth:e.parametrosBusqueda.visualizarConsultaOrdenPedido?100:40,cellClass:"text-center",cellRenderer:"iconoEstado",cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_NUMERO,field:"pedidonumero",width:e.parametrosBusqueda.visualizarConsultaOrdenPedido?100:50,minWidth:e.parametrosBusqueda.visualizarConsultaOrdenPedido?100:50,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_FECHA,field:"pedfecha",width:e.parametrosBusqueda.visualizarConsultaOrdenPedido?100:50,minWidth:e.parametrosBusqueda.visualizarConsultaOrdenPedido?100:50,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_REGISTRADOR,field:"registrador",width:120,minWidth:120,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}}),e.parametrosBusqueda.visualizarConsultaOrdenPedido&&t.push({headerName:s.a.TAG_APROBADOR,field:"aprobador",width:200,minWidth:200,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_EJECUTOR,field:"ejecutor",width:200,minWidth:200,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}}),t.push({headerName:e.parametrosBusqueda.visualizarConsultaOrdenPedido?s.a.TAG_OBS_REGISTRADOR:s.a.TAG_OBSERVACIONES,field:"obsregistra",width:200,minWidth:200,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}}),e.parametrosBusqueda.visualizarConsultaOrdenPedido&&t.push({headerName:s.a.TAG_OBS_APROBADOR,field:"obsaprueba",width:200,minWidth:200,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}},{headerName:s.a.TAG_OBS_EJECUTOR,field:"obsejecuta",width:200,minWidth:200,cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}}}),t.push({headerName:s.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:"text-center",cellClassRules:{"fila-pendiente":function(e){return e.data.estado===s.a.ETIQUETA_PENDIENTE}},width:s.a.WIDTH_OPCIONES,minWidth:s.a.WIDTH_OPCIONES,cellRendererFramework:g.a,headerComponentFramework:v.a,headerComponentParams:{class:s.a.ICON_OPCIONES,tooltip:s.a.TAG_OPCIONES,text:"",enableSorting:!1}}),t},e.prototype.insertarOrdenPedido=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/insertarInvPedidos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarOrdenPedido(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.actualizarOrdenPedido=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/modificarInvPedidos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeActualizarOrdenPedido(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.anularOrdenPedido=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/anularInvPedidos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeAnularOrdenPedido(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.eliminarOrdenPedido=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/eliminarInvPedidos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeEliminarOrdenPedido(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.desaprobarOrdenPedido=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/desaprobarInvPedidos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeDesaprobarOrdenPedido(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e=O([Object(a.Injectable)({providedIn:"root"}),S("design:paramtypes",[i.a,r.b,n.a,p.a])],e)}()},Uu9l:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.detValor=0,this.detReferencia="",this.detObservaciones="",this.pagEmpresa="",this.pagPeriodo="",this.pagMotivo="",this.pagNumero="",this.fpSecuencial=0,this.secCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detValor=e.detValor?e.detValor:this.detValor,this.detReferencia=e.detReferencia?e.detReferencia:this.detReferencia,this.detObservaciones=e.detObservaciones?e.detObservaciones:this.detObservaciones,this.pagEmpresa=e.pagEmpresa?e.pagEmpresa:this.pagEmpresa,this.pagPeriodo=e.pagPeriodo?e.pagPeriodo:this.pagPeriodo,this.pagMotivo=e.pagMotivo?e.pagMotivo:this.pagMotivo,this.pagNumero=e.pagNumero?e.pagNumero:this.pagNumero,this.fpSecuencial=e.fpSecuencial?e.fpSecuencial:this.fpSecuencial,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo},e}()},UwNZ:function(e,t,o){"use strict";var a=o("CcnG"),i=o("8fiX"),r=o("VO10"),n=o("EnEm"),s=o("nR5P"),c=o("yccp"),l=o("CEfs"),d=o("SZbH"),p=o("ZYCi"),u=o("RDZc"),h=o("z5Y/"),m=o("mwBN"),C=o("Ip0R"),v=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},A=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvFunSaldoBodegaComprobacionCantidadesTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunSaldoBodegaComprobacionCantidadesTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvFunSaldoBodegaComprobacionCantidadesTO(e.extraInfo):(t.despuesDeListarInvFunSaldoBodegaComprobacionCantidadesTO([]),a.toastr.warning(e.operacionMensaje,m.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.generarColumnas=function(){return[{headerName:m.a.TAG_PRODUCTO,field:"sbcProductoNombre",width:250,minWidth:250,cellClass:function(e){return e.data.sbcProductoCodigo?"":"tr-negrita"}},{headerName:m.a.TAG_CODIGO,field:"sbcProductoCodigo",width:150,minWidth:150},{headerName:m.a.TAG_MEDIDA,field:"sbcMedida",width:180,minWidth:150},{headerName:m.a.TAG_INICIAL,field:"sbcInicial",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"}},{headerName:m.a.TAG_COMPRA,field:"sbcCompra",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"}},{headerName:m.a.TAG_VENTA,field:"sbcVenta",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"}},{headerName:m.a.TAG_CONSUMO,field:"sbcConsumo",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"}},{headerName:m.a.TAG_TRANSFERENCIA_I,field:"sbcTransferenciaI",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"},headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:m.a.TAG_TRANSFERENCIA_INTERNA,text:m.a.TAG_TRANSFERENCIA_I}},{headerName:m.a.TAG_TRANSFERENCIA_E,field:"sbcTransferenciaE",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"},headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:m.a.TAG_TRANSFERENCIA_EXTERNA,text:m.a.TAG_TRANSFERENCIA_E}},{headerName:m.a.TAG_DEVOLUCION_C,field:"sbcDevolucionC",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"},headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:m.a.TAG_DEVOLUCION_COMPRAS,text:m.a.TAG_DEVOLUCION_C}},{headerName:m.a.TAG_DEVOLUCION_V,field:"sbcDevolucionV",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"},headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:m.a.TAG_DEVOLUCION_VENTAS,text:m.a.TAG_DEVOLUCION_V}},{headerName:m.a.TAG_FINAL,field:"sbcFinal",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"}},{headerName:m.a.TAG_DIFERENCIA,field:"sbcDiferencia",width:180,minWidth:150,valueFormatter:g,cellClass:function(e){return e.data.sbcProductoCodigo?" text-right ":"tr-negrita text-right"}},{headerName:m.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:m.a.WIDTH_OPCIONES,minWidth:m.a.WIDTH_OPCIONES,cellRenderer:"botonOpciones",cellClass:"text-md-center",cellRendererParams:function(e){return e.data.sbcProductoCodigo?{icono:m.a.ICON_CONSULTAR,tooltip:m.a.MSJ_CONSULTAR_KARDEX,accion:m.a.ACCION_CONSULTAR}:{icono:null,tooltip:null,accion:null}},headerComponent:"toolTip",headerComponentParams:{class:m.a.ICON_OPCIONES,tooltip:m.a.TAG_OPCIONES,text:""}}]},e=v([Object(a.Injectable)({providedIn:"root"}),A("design:paramtypes",[h.a,d.b,s.a])],e)}();function g(e){return new C.DecimalPipe("en-US").transform(e.value,"1.2-2")}var b=o("gLZI"),O=o("LlOB"),S=o("wd/R"),I=o("/TJv"),E=o("Ungd"),R=o("yqOf"),T=o("sXuD");o.d(t,"a",function(){return N});var _=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},P=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},N=function(){function e(e,t,o,a,s,c,l,d,p,u){this.saldoBodegaComprobacionService=e,this.route=t,this.toastr=o,this.filasService=a,this.atajoService=s,this.utilService=c,this.bodegaService=l,this.sistemaService=d,this.productoService=p,this.archivoService=u,this.activar=!1,this.cargando=!1,this.listaEmpresas=[],this.listaBodegas=new Array,this.listadoResultadoSaldo=[],this.empresaSeleccionada=new i.a,this.bodegaSeleccionada=new r.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.filasTiempo=new n.a,this.isScreamMd=!0,this.es={},this.mostrarKardex=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={}}return e.prototype.ngOnInit=function(){S.locale("es"),this.constantes=m.a,this.es=this.utilService.setLocaleDate(),this.constantes=m.a,this.listaEmpresas=this.route.snapshot.data.saldoBodegaComprobacionMontos,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&(m.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.isScreamMd=!(window.innerWidth<=576),this.inicializarAtajos(),this.iniciarAgGrid(),this.obtenerFechaInicioActualMes()},e.prototype.cambiarEmpresaSeleccionada=function(){m.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.bodegaSeleccionada=null,this.limpiarResultado(),this.listarBodegas()},e.prototype.inicializarAtajos=function(){this.atajoService.add(new c.Hotkey(m.a.ATAJO_AYUDA,function(){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new c.Hotkey(m.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarSaldoBodegaComprobMonto");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(m.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarSaldoBodegaComprobMonto");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(m.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirSaldoBodegaComprobMonto");return e&&e.click(),!1})),this.atajoService.add(new c.Hotkey(m.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarSaldoBodegaComprobMonto");return e&&e.click(),!1}))},e.prototype.listarBodegas=function(){this.cargando=!0,this.listaBodegas=[],this.limpiarResultado(),this.bodegaService.listarInvListaBodegasTO({empresa:this.empresaSeleccionada.empCodigo,inactivo:!1},this,m.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvListaBodegasTO=function(e){var t=this;this.listaBodegas=e,this.listaBodegas.length>0?this.bodegaSeleccionada=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.listaBodegas.find(function(e){return e.bodCodigo===t.bodegaSeleccionada.bodCodigo}):null:this.bodegaSeleccionada=null,this.cargando=!1},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,m.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.limpiarResultado=function(){this.gridApi=null,this.gridColumnApi=null,this.listadoResultadoSaldo=[],this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.consultarKardex=function(){this.objetoSeleccionado.sbcProductoCodigo&&(this.objetoDesdeFuera={empresa:this.empresaSeleccionada,bodega:this.bodegaSeleccionada,fechaDesde:this.fechaDesde,fechaHasta:this.fechaHasta,productoSeleccionado:null},this.obtenerInvProductoTO())},e.prototype.obtenerInvProductoTO=function(){this.cargando=!0;var e={empresa:m.a.KEY_EMPRESA_SELECT,codigo:this.objetoSeleccionado.sbcProductoCodigo?this.objetoSeleccionado.sbcProductoCodigo:""};this.productoService.obtenerProducto(e,this,m.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerProducto=function(e){this.objetoDesdeFuera.productoSeleccionado=e?new T.a:null,this.objetoDesdeFuera.productoSeleccionado.proCodigoPrincipal=e?e.proCodigoPrincipal:null,this.objetoDesdeFuera.productoSeleccionado.proCategoria=e?e.catCodigo:null,this.objetoDesdeFuera.productoSeleccionado.proNombre=e?e.proNombre:null,this.objetoDesdeFuera.productoSeleccionado.detalleMedida=e?e.medCodigo:null,this.cargando=!1,this.objetoDesdeFuera=e?this.objetoDesdeFuera:null,this.mostrarKardex=!!e},e.prototype.cerrarKardex=function(e){this.mostrarKardex=e,this.objetoDesdeFuera=null,this.inicializarAtajos()},e.prototype.buscarSaldoBodegaComprobacion=function(e){if(this.cargando=!0,this.limpiarResultado(),e&&e.valid){this.filasTiempo.iniciarContador();var t={empresa:m.a.KEY_EMPRESA_SELECT,bodega:this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.bodegaSeleccionada.bodCodigo:null,desde:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaDesde),hasta:this.utilService.formatoStringSinZonaHorariaYYYMMDD(this.fechaHasta)};this.saldoBodegaComprobacionService.listarInvFunSaldoBodegaComprobacionCantidadesTO(t,this,m.a.KEY_EMPRESA_SELECT)}else this.toastr.error(m.a.MSJ_CAMPOS_INVALIDOS,m.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.despuesDeListarInvFunSaldoBodegaComprobacionCantidadesTO=function(e){this.listadoResultadoSaldo=e,this.cargando=!1,this.filasTiempo.finalizarContador()},e.prototype.imprimirSaldoBodegaComprobMonto=function(){var e=this;if(this.utilService.verificarPermiso(m.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={bodega:this.bodegaSeleccionada.bodCodigo,fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),lista:this.listadoResultadoSaldo};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteSaldoBodegaComprobacion",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoSaldoBodegaComprobacionMontos.pdf",t):e.toastr.warning(m.a.MSJ_ERROR_IMPRIMIR,m.a.MSJ_TITULO_REPORTE),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarSaldoBodegaComprobMonto=function(){var e=this;if(this.utilService.verificarPermiso(m.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={bodega:this.bodegaSeleccionada.bodCodigo,fechaDesde:this.utilService.convertirFechaStringDDMMYYYY(this.fechaDesde),fechaHasta:this.utilService.convertirFechaStringDDMMYYYY(this.fechaHasta),lista:this.listadoResultadoSaldo};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteSaldoBodegaComprobacion",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoSaldoBodegaComprobacionMontos_"):e.toastr.warning(m.a.MSJ_NO_DATA,m.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.saldoBodegaComprobacionService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:I.a,toolTip:b.a},this.components={}},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.ejecutarAccion=function(e){this.objetoSeleccionado=e,this.consultarKardex()},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e=_([Object(a.Component)({selector:"app-saldo-bodega-comprobacion-montos",template:o("LO3C"),styles:[o("kYpn")]}),P("design:paramtypes",[f,p.ActivatedRoute,d.b,l.a,c.HotkeysService,s.a,u.a,O.a,R.a,E.a])],e)}()},V4Aq:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.tmEmpresa=null,this.tmCodigo=null,this.tmDetalle=null,this.tmInactivo=!1,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.tmEmpresa=e.tmEmpresa?e.tmEmpresa:this.tmEmpresa,this.tmCodigo=e.tmCodigo?e.tmCodigo:this.tmCodigo,this.tmDetalle=e.tmDetalle?e.tmDetalle:this.tmDetalle,this.tmInactivo=e.tmInactivo?e.tmInactivo:this.tmInactivo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},VCY8:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.ocEmpresa="",this.ocSector="",this.ocMotivo="",this.ocNumero="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.ocEmpresa=e.ocEmpresa?e.ocEmpresa:this.ocEmpresa,this.ocSector=e.ocSector?e.ocSector:this.ocSector,this.ocMotivo=e.ocMotivo?e.ocMotivo:this.ocMotivo,this.ocNumero=e.ocNumero?e.ocNumero:this.ocNumero},e.prototype.toString=function(){return this.ocEmpresa+"|"+this.ocSector+"|"+this.ocMotivo+"|"+this.ocNumero},e}()},VO10:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.bodCodigo=null,this.bodNombre=null,this.bodResponsable=null,this.bodInactiva=!1,this.codigoCP=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.bodCodigo=e.bodCodigo?e.bodCodigo:this.bodCodigo,this.bodNombre=e.bodNombre?e.bodNombre:this.bodNombre,this.bodResponsable=e.bodResponsable?e.bodResponsable:this.bodResponsable,this.bodInactiva=e.bodInactiva?e.bodInactiva:this.bodInactiva,this.codigoCP=e.codigoCP?e.codigoCP:this.codigoCP},e}()},VYM3:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.tcCodigo="",this.tcDescripcion="",this.tcRutaReporte="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.tcCodigo=e.tcCodigo?e.tcCodigo:this.tcCodigo,this.tcDescripcion=e.tcDescripcion?e.tcDescripcion:this.tcDescripcion,this.tcRutaReporte=e.tcRutaReporte?e.tcRutaReporte:this.tcRutaReporte},e}()},Vlg3:function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("WCC+"),l=o("EF/R"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listarInvProductoCategoriaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvProductoCategoriaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvProductoCategoriaTO(e.extraInfo):(t.despuesDeListarInvProductoCategoriaTO([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarInvProductoSubCategoria=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/listarSubcategoriasProducto",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarSubCategoriaTO(e.extraInfo):(t.despuesDeListarSubCategoriaTO([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.guardarInvProductoSubCategoria=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/insertarInvSubCategoriaProducto",e,o).then(function(e){e&&e.extraInfo?(t.despuesDeGuardarSubCategoria(e.extraInfo),a.toastr.success(e.operacionMensaje,s.a.TAG_AVISO)):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.modificarInvProductoSubCategoria=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarInvSubCategoriaProducto",e,o).then(function(e){e&&e.extraInfo?(t.despuesDeModificarSubCategoria(e.extraInfo),a.toastr.success(e.operacionMensaje,s.a.TAG_AVISO)):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.eliminarInvProductoSubCategoria=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/eliminarInvSubCategoriaProducto",e,o).then(function(e){e&&e.extraInfo?(t.despuesDeEliminarSubCategoria(e.extraInfo),a.toastr.success(e.operacionMensaje,s.a.TAG_AVISO)):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.formatearInvProductoTipoTO=function(e,t){var o=new c.a(e);return o.catEmpresa=t.empresaSeleccionada.empCodigo,o.catActiva=!0,o.usrEmpresa=t.empresaSeleccionada.empCodigo,""===o.ctaCodigo&&(o.ctaCodigo=null,o.ctaEmpresa=null),t.accion===s.a.ACCION_CREAR&&(o.usrCodigo=this.auth.getCodigoUser(),o.usrFechaInserta=null),o},e.prototype.generarColumnasProductoCategoria=function(e){var t=[];return t.push({headerName:s.a.TAG_CODIGO,field:"catCodigo",width:100},{headerName:s.a.TAG_DETALLE,field:"catDetalle",width:250}),e||t.push({headerName:s.a.TAG_PRECIO_FIJO,field:"catPrecioFijo",width:100,cellRenderer:"inputEstado",cellClass:"text-sm-center"}),t.push(this.utilService.getColumnaOpciones()),t},e.prototype.generarColumnasProductoSubCategoria=function(){var e=[];return e.push({headerName:s.a.TAG_CODIGO,field:"invProductoSubcategoriaPK.scatCodigo",width:100},{headerName:s.a.TAG_DETALLE,field:"scatDetalle",width:250}),e.push(this.utilService.getColumnaOpciones()),e},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[i.a,r.b,n.a,l.a])],e)}()},VpYo:function(e,t,o){"use strict";o.d(t,"a",function(){return A});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("gLZI"),l=o("OeYz"),d=o("madF"),p=o("Ip0R"),u=o("mozY"),h=o("iVon"),m=o("gLxJ"),C=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},v=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_CREAR:a=t.listaSisPermisoTO.gruCrear;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:case s.a.ACCION_RESTAURAR:a=t.listaSisPermisoTO.gruAnularConsumos;break;case s.a.ACCION_ELIMINAR:a=t.listaSisPermisoTO.gruEliminarConsumos;break;case s.a.ACCION_MAYORIZAR:a=t.listaSisPermisoTO.gruMayorizarConsumos;break;case s.a.ACCION_DESMAYORIZAR:a=t.listaSisPermisoTO.gruDesmayorizarConsumos;break;case s.a.ACCION_ANULAR:a=t.listaSisPermisoTO.gruAnularConsumos;break;case s.a.ACCION_IMPRIMIR:a=t.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.listaSisPermisoTO.gruExportar}return o&&!a&&this.mostrarSwalNoPermiso(),a},e.prototype.mostrarSwalNoPermiso=function(){var e={title:s.a.TOAST_INFORMACION,texto:s.a.ERROR_403_TEXTO,type:s.a.SWAL_INFO,confirmButtonText:"<i class='"+s.a.ICON_AGREGAR+"'></i>  "+s.a.LABEL_MAS_INFORMACION,cancelButtonText:s.a.MSJ_ACEPTAR};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&window.open(s.a.ENLACE_MANUAL_USUARIO,"_blank")})},e.prototype.generarColumnasConsumo=function(e){var t=this,o=e.puedeEditar,a=[];return o?a.push({headerName:s.a.TAG_MOVER_FILA,headerClass:"cell-header-center",cellClass:"text-center cell-block",width:40,minWidth:40,rowDrag:o,headerComponentFramework:c.a,headerComponentParams:{class:s.a.ICON_MOVER_FILA,tooltip:s.a.TAG_MOVER_FILA,text:"",enableSorting:!1},valueGetter:function(){return null}},{headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:120,minWidth:120,cellClass:"cell-editing",cellClassRules:{"cell-with-errors":function(e){return!!o&&!t.validarProducto(e.data)}},suppressKeyboardEvent:function(o){if(o.event.keyCode!==s.a.KEYCODE_UP&&o.event.keyCode!==s.a.KEYCODE_DOWN){if(e.buscarProducto(o),o.editing)return!0}else if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvConsumosDetalle)},editable:!0,valueGetter:function(e){return e.data.invProducto.invProductoPK.proCodigoPrincipal},cellEditorFramework:l.a,cellEditorParams:{name:"proCodigoPrincipal",maxlength:50,inputClass:"text-uppercase",placeholder:""}},{headerName:s.a.TAG_NOMBRE,field:"proNombre",width:200,minWidth:200,cellClass:"cell-block",valueGetter:function(e){return e.data.invProducto.proNombre}},{headerName:s.a.TAG_CANTIDAD,field:"detCantidad",valueFormatter:this.formatearA2Decimales,width:120,minWidth:120,suppressKeyboardEvent:function(o){o.editing&&(t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvConsumosDetalle)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode))},editable:!0,cellClass:"text-right cell-editing",cellClassRules:{"cell-with-errors":function(e){return!t.validarCantidad(e.data)}},cellEditorFramework:u.a,cellEditorParams:{name:"detCantidad",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric}},{headerName:s.a.TAG_UNIDAD_MEDIDA,field:"medDetalle",width:150,minWidth:150,cellClass:"cell-block",valueGetter:function(e){return e.data.invProducto.invProductoMedida.medDetalle},headerComponentFramework:c.a,headerComponentParams:{class:"",tooltip:s.a.TAG_UNIDAD_MEDIDA,text:s.a.TAG_UN_MEDIDA,enableSorting:!0}},{headerName:s.a.TAG_CC,field:"pisNumero",width:140,minWidth:140,suppressKeyboardEvent:function(o){if(e.agregarFilaAlFinal(o),o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvConsumosDetalle)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClass:"cell-editing text-center",cellClassRules:{"cell-with-errors":function(e){return!!o&&!t.validarCC(e.data)}},headerComponentFramework:c.a,headerComponentParams:{class:"",tooltip:s.a.TAG_CENTRO_COSTO,text:s.a.TAG_CC,enableSorting:!0},editable:!0,cellEditorFramework:m.a,cellEditorParams:function(t){return{value:e.listadoPiscinaTO?t.data.pisNumero:null,name:"pisNumero",atributo:"pisNumero",obligatorio:!1,listValues:e.listadoPiscinaTO?e.listadoPiscinaTO:[],fieldsShow:["pisNumero","pisNombre"]}},valueFormatter:function(t){var o=e.bodegaSeleccionado,a=e.listadoPiscinaPorEmpresaTO;if(a&&a.length>0){var i;return(i=a.find(function(e){return o&&e.pisNumero==t.data.pisNumero&&e.pisSector==o.codigoCP}))?i.pisNumero+" - "+i.pisNombre:t.data.pisNumero}}},{headerName:s.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:"text-center cell-block",width:s.a.WIDTH_OPCIONES,minWidth:s.a.WIDTH_OPCIONES,cellRendererFramework:d.a,headerComponentFramework:c.a,headerComponentParams:{class:s.a.ICON_OPCIONES,tooltip:s.a.TAG_OPCIONES,text:"",enableSorting:!1}}):a.push({headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:120,minWidth:120,valueGetter:function(e){return e.data.invProducto.invProductoPK.proCodigoPrincipal}},{headerName:s.a.TAG_NOMBRE,field:"proNombre",width:200,minWidth:200,valueGetter:function(e){return e.data.invProducto.proNombre}},{headerName:s.a.TAG_CANTIDAD,field:"detCantidad",valueFormatter:this.formatearA2Decimales,width:120,minWidth:120,cellClass:"text-right"},{headerName:s.a.TAG_UNIDAD_MEDIDA,field:"medDetalle",width:150,minWidth:150,valueGetter:function(e){return e.data.invProducto.invProductoMedida.medDetalle},headerComponentFramework:c.a,headerComponentParams:{class:"",tooltip:s.a.TAG_UNIDAD_MEDIDA,text:s.a.TAG_UN_MEDIDA,enableSorting:!0}},{headerName:s.a.TAG_CC,field:"pisNumero",width:140,minWidth:140,cellClass:"text-center",headerComponentFramework:c.a,headerComponentParams:{class:"",tooltip:s.a.TAG_CENTRO_COSTO,text:s.a.TAG_CC,enableSorting:!0},valueFormatter:function(t){if(e.listadoPiscinaPorEmpresaTO&&e.listadoPiscinaPorEmpresaTO.length>0){var o;return(o=e.listadoPiscinaPorEmpresaTO.find(function(e){return e.pisNumero==t.data.pisNumero}))?o.pisNumero+" - "+o.pisNombre:t.data.pisNumero}return t.data.pisNumero}}),a},e.prototype.validarCantidad=function(e){var t=e.detCantidad;return t&&t>=.01},e.prototype.validarProducto=function(e){return!(!e.invProducto||!e.invProducto.invProductoPK.proCodigoPrincipal)},e.prototype.validarCC=function(e){return!!e.pisNumero},e.prototype.formatearA2Decimales=function(e){return new p.DecimalPipe("en-US").transform(e.value,"1.2-2")},e.prototype.crearInvConsumoDetalle=function(){return new h.a({detOrden:0,detCantidad:1})},e.prototype.getListaPiscinaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/getListaPiscinaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetListaPiscinaTO(e.extraInfo):(t.listadoPiscinaTO=null,a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION)),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarConsumos=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvConsultaConsumos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarConsumos(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerInvConsumo=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvConsumos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerConsumo(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarModificarInvConsumos=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/insertarModificarInvConsumos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarModificarInvConsumos(e):(a.utilService.generarSwal(t.accion+" "+s.a.TAG_CONSUMO,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosParaCrudConsumos=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerDatosParaCrudConsumos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaCrudConsumos(e.extraInfo):(a.utilService.generarSwal(t.accion+" "+s.a.TAG_CONSUMO,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.anularConsumo=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/anularConsumo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeAnularConsumo(e):(a.utilService.generarSwal(t.accion+" "+s.a.TAG_CONSUMO,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.restaurarConsumo=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/restaurarConsumo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeRestaurarConsumo(e):(a.utilService.generarSwal(t.accion+" "+s.a.TAG_CONSUMO,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.desmayorizarConsumo=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/desmayorizarConsumo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeDesmayorizarConsumo(e):(a.utilService.generarSwal(s.a.ACCION_DESMAYORIZAR+" "+s.a.TAG_CONSUMO,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.desmayorizarConsumosPorLote=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/desmayorizarConsumosPorLote",e,o).then(function(e){e&&e.extraInfo?t.despuesDeDesmayorizarConsumosPorLote(e):(a.utilService.generarSwal(s.a.ACCION_DESMAYORIZAR+" "+s.a.TAG_CONSUMO,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e=C([Object(a.Injectable)({providedIn:"root"}),v("design:paramtypes",[i.a,r.b,n.a])],e)}()},VxUY:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.cajaEmpresa=null,this.cajaUsuarioResponsable=null,this.cajaUsuarioNombre=null,this.cajaCertificadoFirmaDigitalNombre=null,this.cajaCertificadoFirmaDigitalClave=null,this.permisoSecuencialFacturas=null,this.permisoSecuencialNotasCredito=null,this.permisoSecuencialNotasDebito=null,this.permisoSecuencialRetenciones=null,this.permisoMotivoPermitido=null,this.permisoBodegaPermitida=null,this.permisoDocumentoPermitido=null,this.permisoFormaPagoPermitida=null,this.permisoCambiarFechaVenta=!1,this.permisoCambiarFechaRetencion=!1,this.permisoCambiarPrecio=!1,this.permisoAplicarDescuentos=!1,this.permisoEliminarFilas=!1,this.permisoClienteCrear=!1,this.permisoClienteCredito=!1,this.permisoClientePrecioPermitido=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.cajaEmpresa=e.cajaEmpresa?e.cajaEmpresa:this.cajaEmpresa,this.cajaUsuarioResponsable=e.cajaUsuarioResponsable?e.cajaUsuarioResponsable:this.cajaUsuarioResponsable,this.cajaUsuarioNombre=e.cajaUsuarioNombre?e.cajaUsuarioNombre:this.cajaUsuarioNombre,this.cajaCertificadoFirmaDigitalNombre=e.cajaCertificadoFirmaDigitalNombre?e.cajaCertificadoFirmaDigitalNombre:this.cajaCertificadoFirmaDigitalNombre,this.cajaCertificadoFirmaDigitalClave=e.cajaCertificadoFirmaDigitalClave?e.cajaCertificadoFirmaDigitalClave:this.cajaCertificadoFirmaDigitalClave,this.permisoSecuencialFacturas=e.permisoSecuencialFacturas?e.permisoSecuencialFacturas:this.permisoSecuencialFacturas,this.permisoSecuencialNotasCredito=e.permisoSecuencialNotasCredito?e.permisoSecuencialNotasCredito:this.permisoSecuencialNotasCredito,this.permisoSecuencialNotasDebito=e.permisoSecuencialNotasDebito?e.permisoSecuencialNotasDebito:this.permisoSecuencialNotasDebito,this.permisoSecuencialRetenciones=e.permisoSecuencialRetenciones?e.permisoSecuencialRetenciones:this.permisoSecuencialRetenciones,this.permisoMotivoPermitido=e.permisoMotivoPermitido?e.permisoMotivoPermitido:this.permisoMotivoPermitido,this.permisoBodegaPermitida=e.permisoBodegaPermitida?e.permisoBodegaPermitida:this.permisoBodegaPermitida,this.permisoDocumentoPermitido=e.permisoDocumentoPermitido?e.permisoDocumentoPermitido:this.permisoDocumentoPermitido,this.permisoFormaPagoPermitida=e.permisoFormaPagoPermitida?e.permisoFormaPagoPermitida:this.permisoFormaPagoPermitida,this.permisoCambiarFechaVenta=e.permisoCambiarFechaVenta?e.permisoCambiarFechaVenta:this.permisoCambiarFechaVenta,this.permisoCambiarFechaRetencion=e.permisoCambiarFechaRetencion?e.permisoCambiarFechaRetencion:this.permisoCambiarFechaRetencion,this.permisoCambiarPrecio=e.permisoCambiarPrecio?e.permisoCambiarPrecio:this.permisoCambiarPrecio,this.permisoAplicarDescuentos=e.permisoAplicarDescuentos?e.permisoAplicarDescuentos:this.permisoAplicarDescuentos,this.permisoEliminarFilas=e.permisoEliminarFilas?e.permisoEliminarFilas:this.permisoEliminarFilas,this.permisoClienteCrear=e.permisoClienteCrear?e.permisoClienteCrear:this.permisoClienteCrear,this.permisoClienteCredito=e.permisoClienteCredito?e.permisoClienteCredito:this.permisoClienteCredito,this.permisoClientePrecioPermitido=e.permisoClientePrecioPermitido?e.permisoClientePrecioPermitido:this.permisoClientePrecioPermitido,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},"WCC+":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.catEmpresa="",this.catCodigo="",this.catDetalle="",this.catPrecioFijo=!1,this.catActiva=!1,this.ctaEmpresa="",this.ctaCodigo="",this.scatEmpresa="",this.scatCodigo="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.catEmpresa=e.catEmpresa?e.catEmpresa:this.catEmpresa,this.catCodigo=e.catCodigo?e.catCodigo:this.catCodigo,this.catDetalle=e.catDetalle?e.catDetalle:this.catDetalle,this.catPrecioFijo=e.catPrecioFijo?e.catPrecioFijo:this.catPrecioFijo,this.catActiva=e.catActiva?e.catActiva:this.catActiva,this.ctaEmpresa=e.ctaEmpresa?e.ctaEmpresa:this.ctaEmpresa,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.scatEmpresa=e.scatEmpresa?e.scatEmpresa:this.scatEmpresa,this.scatCodigo=e.scatCodigo?e.scatCodigo:this.scatCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},WCSX:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.id=0,this.vtaStatus="",this.vtaDocumentoNumero="",this.vtaDocumentoTipo="",this.vtaFecha="",this.cliCodigo="",this.cliId="",this.cliNombre="",this.vtaBase0=0,this.vtaBaseImponible=0,this.vtaMontoIva=0,this.vtaTotal=0,this.vtaFormaPago="",this.vtaObservaciones="",this.vtaNumero="",this.conNumero="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.vtaStatus=e.vtaStatus?e.vtaStatus:this.vtaStatus,this.vtaDocumentoNumero=e.vtaDocumentoNumero?e.vtaDocumentoNumero:this.vtaDocumentoNumero,this.vtaDocumentoTipo=e.vtaDocumentoTipo?e.vtaDocumentoTipo:this.vtaDocumentoTipo,this.vtaFecha=e.vtaFecha?e.vtaFecha:this.vtaFecha,this.cliCodigo=e.cliCodigo?e.cliCodigo:this.cliCodigo,this.cliId=e.cliId?e.cliId:this.cliId,this.cliNombre=e.cliNombre?e.cliNombre:this.cliNombre,this.vtaBase0=e.vtaBase0?e.vtaBase0:this.vtaBase0,this.vtaBaseImponible=e.vtaBaseImponible?e.vtaBaseImponible:this.vtaBaseImponible,this.vtaMontoIva=e.vtaMontoIva?e.vtaMontoIva:this.vtaMontoIva,this.vtaTotal=e.vtaTotal?e.vtaTotal:this.vtaTotal,this.vtaFormaPago=e.vtaFormaPago?e.vtaFormaPago:this.vtaFormaPago,this.vtaObservaciones=e.vtaObservaciones?e.vtaObservaciones:this.vtaObservaciones,this.vtaNumero=e.vtaNumero?e.vtaNumero:this.vtaNumero,this.conNumero=e.conNumero?e.conNumero:this.conNumero},e}()},WTQC:function(e,t,o){"use strict";var a,i=o("CcnG"),r=o("mwBN"),n=o("L0eQ"),s=o("eUd/"),c=o("8fiX"),l=o("3vq3"),d=o("z5Y/"),p=o("SZbH"),u=o("nR5P"),h=o("Ungd"),m=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},C=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.visualizarChequeNoImpreso=function(e,t,o){var a=this;this.api.post("todocompuWS/bancoWebController/visualizarChequeNoImpreso",e,o).then(function(e){e&&e.extraInfo?t.despuesDeVisualizarChequeNoImpreso(e.extraInfo):(t.despuesDeVisualizarChequeNoImpreso(null),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCheque=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/bancoWebController/generarReporteCheque",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("ListadoCheques_"+a.utilService.obtenerHorayFechaActual()+".pdf",e):a.toastr.warning(r.a.MSJ_ERROR_IMPRIMIR,r.a.TAG_AVISO),t.cargando=!1}).catch(function(e){a.utilService.handleError(e,a),t.cargando=!1})},e.prototype.imprimirNoCheque=function(e,t,o){var a=this;this.api.post("todocompuWS/bancoWebController/generarNoChequeChequesNoImpresos",e,o).then(function(e){e&&e.extraInfo?(t.despuesGenerarNoChequeChequesNoImpresos(e.extraInfo),a.toastr.info(e.operacionMensaje,"Aviso")):(t.despuesGenerarNoChequeChequesNoImpresos(null),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e=m([Object(i.Injectable)({providedIn:"root"}),C("design:paramtypes",[d.a,p.b,u.a,h.a])],e)}(),A=o("wd/R"),f=function(){function e(e){this.ctaNumero="",this.ctaTitular="",this.banNombre="",this.rutaBanco="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.ctaNumero=e.ctaNumero?e.ctaNumero:this.ctaNumero,this.ctaTitular=e.ctaTitular?e.ctaTitular:this.ctaTitular,this.banNombre=e.banNombre?e.banNombre:this.banNombre,this.rutaBanco=e.rutaBanco?e.rutaBanco:this.rutaBanco},e}(),g=(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),b=function(e){function t(t){var o=e.call(this)||this;return o.valorChequeLetras="",o.datosBancoCuentaTO=new f,o.isChequeCruzado=!1,o.isChequeValido=!1,o.isChequeDiferente=!1,t&&o.hydrate(t),o}return g(t,e),t.prototype.hydrate=function(e){this.valorChequeLetras=e.valorChequeLetras?e.valorChequeLetras:this.valorChequeLetras,this.datosBancoCuentaTO=e.datosBancoCuentaTO?e.datosBancoCuentaTO:this.datosBancoCuentaTO,this.isChequeCruzado=e.isChequeCruzado?e.isChequeCruzado:this.isChequeCruzado,this.isChequeValido=e.isChequeValido?e.isChequeValido:this.isChequeValido,this.isChequeDiferente=e.isChequeDiferente?e.isChequeDiferente:this.isChequeDiferente},t}(n.a),O=function(){function e(e){this.chqSecuencia=0,this.chqBeneficiario="",this.chqCantidad="",this.chqCiudad="",this.chqFecha="",this.chqCruzado=!1,this.chqImpreso=!1,this.chqImpresoFecha="",this.chqRevisado=!1,this.chqRevisadoFecha="",this.chqRevisadoObservacion="",this.chqEntregado=!1,this.chqEntregadoFecha="",this.chqEntregadoObservacion="",this.chqReversado=!1,this.chqReversadoFecha="",this.chqReversadoObservacion="",this.chqAnulado=!1,this.chqAnuladooFecha="",this.chqAnuladoObservacion="",this.chqNoCheque=!1,this.concEmpresa="",this.concCuentaContable="",this.concCodigo="",this.concCategoria="",this.detSecuencia=0,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.chqSecuencia=e.chqSecuencia?e.chqSecuencia:this.chqSecuencia,this.chqBeneficiario=e.chqBeneficiario?e.chqBeneficiario:this.chqBeneficiario,this.chqCantidad=e.chqCantidad?e.chqCantidad:this.chqCantidad,this.chqCiudad=e.chqCiudad?e.chqCiudad:this.chqCiudad,this.chqFecha=e.chqFecha?e.chqFecha:this.chqFecha,this.chqCruzado=e.chqCruzado?e.chqCruzado:this.chqCruzado,this.chqImpreso=e.chqImpreso?e.chqImpreso:this.chqImpreso,this.chqImpresoFecha=e.chqImpresoFecha?e.chqImpresoFecha:this.chqImpresoFecha,this.chqRevisado=e.chqRevisado?e.chqRevisado:this.chqRevisado,this.chqRevisadoFecha=e.chqRevisadoFecha?e.chqRevisadoFecha:this.chqRevisadoFecha,this.chqRevisadoObservacion=e.chqRevisadoObservacion?e.chqRevisadoObservacion:this.chqRevisadoObservacion,this.chqEntregado=e.chqEntregado?e.chqEntregado:this.chqEntregado,this.chqEntregadoFecha=e.chqEntregadoFecha?e.chqEntregadoFecha:this.chqEntregadoFecha,this.chqEntregadoObservacion=e.chqEntregadoObservacion?e.chqEntregadoObservacion:this.chqEntregadoObservacion,this.chqReversado=e.chqReversado?e.chqReversado:this.chqReversado,this.chqReversadoFecha=e.chqReversadoFecha?e.chqReversadoFecha:this.chqReversadoFecha,this.chqReversadoObservacion=e.chqReversadoObservacion?e.chqReversadoObservacion:this.chqReversadoObservacion,this.chqAnulado=e.chqAnulado?e.chqAnulado:this.chqAnulado,this.chqAnuladooFecha=e.chqAnuladooFecha?e.chqAnuladooFecha:this.chqAnuladooFecha,this.chqAnuladoObservacion=e.chqAnuladoObservacion?e.chqAnuladoObservacion:this.chqAnuladoObservacion,this.chqNoCheque=e.chqNoCheque?e.chqNoCheque:this.chqNoCheque,this.concEmpresa=e.concEmpresa?e.concEmpresa:this.concEmpresa,this.concCuentaContable=e.concCuentaContable?e.concCuentaContable:this.concCuentaContable,this.concCodigo=e.concCodigo?e.concCodigo:this.concCodigo,this.concCategoria=e.concCategoria?e.concCategoria:this.concCategoria,this.detSecuencia=e.detSecuencia?e.detSecuencia:this.detSecuencia},e}();o.d(t,"a",function(){return E});var S=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},I=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(){function e(e,t,o){this.activeModal=e,this.utilService=t,this.chequeImpresionService=o,this.constantes=r.a,this.cargando=!1,this.fechaActual=new Date,this.es={}}return e.prototype.ngOnInit=function(){A.locale("es"),this.es=this.utilService.setLocaleDate(),this.chequeNoImpresion=new b,this.banChequeTO=new O,this.visualizarCheque()},e.prototype.visualizarCheque=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,banListaChequesNoImpresosTO:this.chequeSeleccionado};this.chequeImpresionService.visualizarChequeNoImpreso(e,this,this.empresaSeleccionada.empCodigo)},e.prototype.despuesDeVisualizarChequeNoImpreso=function(e){this.chequeNoImpresion=e,this.cargando=!1},e.prototype.compararFechas=function(e){var t=!1;switch(e){case">=":t=new Date(this.chequeSeleccionado.chqFechaEmision)>=this.fechaActual;break;case"<":t=new Date(this.chequeSeleccionado.chqFechaEmision)<this.fechaActual}return t},e.prototype.imprimirChequeCruzado=function(){this.banChequeTO.chqCruzado=!0,this.imprimirCheque()},e.prototype.imprimirCheque=function(){if(this.utilService.verificarPermiso(r.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0,this.setearValoresABanChequeTO();var e={banChequeTO:this.banChequeTO,valorLetra1:this.chequeNoImpresion.valorChequeLetras+" *  *  *  *  *  *  *  *  *  *  *",valorLetra2:"----------------------------------------------------------------------",cheqDiferente:this.chequeNoImpresion.isChequeDiferente?"S":"N",nombreReporteCheque:"reportChequeInternacionalAngarshrimp",secuencia:String(this.chequeNoImpresion.chqSecuencia),cuentaCodigo:this.chequeNoImpresion.chqCuentaCodigo,fechaActual:(new Date).toDateString()};this.chequeImpresionService.imprimirCheque(e,this,this.empresaSeleccionada)}},e.prototype.imprimirNoCheque=function(){if(this.utilService.verificarPermiso(r.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0,this.setearValoresABanChequeTO();var e={banChequeTO:this.banChequeTO,cheqDiferente:this.chequeNoImpresion.isChequeDiferente?"S":"N",secuencia:String(this.chequeNoImpresion.chqSecuencia),fechaActual:(new Date).toDateString(),empresa:this.empresaSeleccionada.empCodigo,numeroCheque:this.chequeNoImpresion.chqNumero};this.chequeImpresionService.imprimirNoCheque(e,this,r.a.KEY_EMPRESA_SELECT)}},e.prototype.despuesGenerarNoChequeChequesNoImpresos=function(e){e&&this.activeModal.close(e)},e.prototype.setearValoresABanChequeTO=function(){this.banChequeTO.chqBeneficiario=this.chequeNoImpresion.chqBeneficiario,this.banChequeTO.chqCantidad=this.chequeNoImpresion.chqValor+"",this.banChequeTO.chqCiudad=this.empresaSeleccionada.empCiudad,this.banChequeTO.chqFecha=this.fechaActual.toDateString(),this.banChequeTO.detSecuencia=this.chequeNoImpresion.chqSecuencia,this.banChequeTO.chqSecuencia=this.chequeNoImpresion.chqSecuencia,this.banChequeTO.chqCruzado=this.chequeNoImpresion.isChequeCruzado,this.banChequeTO.chqNoCheque=!1,this.chequeNoImpresion.isChequeDiferente?(this.banChequeTO.chqImpreso=!0,this.banChequeTO.chqRevisado=!1,this.banChequeTO.chqRevisadoObservacion=null,this.banChequeTO.chqEntregado=!1,this.banChequeTO.chqEntregadoObservacion=null,this.banChequeTO.concEmpresa="",this.banChequeTO.concCuentaContable="",this.banChequeTO.concCodigo=""):(this.banChequeTO.chqImpreso=!0,this.banChequeTO.chqEntregado=!1,this.banChequeTO.concEmpresa="",this.banChequeTO.concCuentaContable="",this.banChequeTO.concCodigo="")},S([Object(i.Input)(),I("design:type",n.a)],e.prototype,"chequeSeleccionado",void 0),S([Object(i.Input)(),I("design:type",c.a)],e.prototype,"empresaSeleccionada",void 0),S([Object(i.Input)(),I("design:type",l.a)],e.prototype,"cuentaComboSeleccionado",void 0),e=S([Object(i.Component)({selector:"app-cheque-impresion",template:o("v7uh"),styles:[o("id9q")]}),I("design:paramtypes",[s.a,u.a,v])],e)}()},WtL1:function(e,t,o){"use strict";o.d(t,"a",function(){return h});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("Ungd"),l=o("Ip0R"),d=o("+JJ7"),p=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_NUEVO:case s.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear&&t.empresaSeleccionada.listaSisPermisoTO.gruCrearClientes;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar&&t.empresaSeleccionada.listaSisPermisoTO.gruModificarClientes;break;case s.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar;break;case s.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.ERROR_403_TITULO),a},e.prototype.getListaConEstructuraTO=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/getListaConEstructuraTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetListaConEstructuraTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarPrdListaPiscinaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/getListaPiscinaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarPiscina(e.extraInfo):(t.despuesDeListarPiscina([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarPiscinaTOBusqueda=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/getListaPiscinaTOBusqueda",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarPiscinaTOBusqueda(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarPiscina=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/insertarPrdPiscina",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeInsertarPiscina(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarPiscina=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/modificarPrdPiscina",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeModificarPiscina(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.eliminarPiscina=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/eliminarPrdPiscina",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO),t.despuesDeEliminarPiscina(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.cambiarEstadoPiscina=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/modificarEstadoPrdPiscina",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO),t.despuesDeCambiarEstadoPiscina(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirPiscinas=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/produccionWebController/generarReportePiscina",e,o).then(function(e){e?a.utilService.descargarArchivoPDF("ListaPiscinas"+a.utilService.obtenerHorayFechaActual()+".pdf",e):a.toastr.warning(s.a.MSJ_ERROR_IMPRIMIR,s.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.exportarPiscinas=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/produccionWebController/exportarReportePiscinas",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"ListaPiscinas_"):a.toastr.warning(s.a.MSJ_ERROR_EXPORTAR,s.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.generarColumnas=function(e){var t=[];return t=[{headerName:s.a.TAG_NUMERO,field:"pisNumero",width:110,minWidth:110},{headerName:s.a.TAG_NOMBRE,field:"pisNombre",width:500,minWidth:500},{headerName:s.a.TAG_HECTARAJE,field:"pisHectareaje",width:150,minWidth:150,valueFormatter:this.numberFormatter,cellClass:" text-right"}],e&&t.push(this.utilService.getSpanSelect()),e||t.push({headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",width:115,minWidth:115,cellRendererFramework:d.a,cellClass:"text-md-center",valueGetter:function(e){return!e.data.pisActiva}},this.utilService.getColumnaOpciones()),t},e.prototype.numberFormatter=function(e){return new l.DecimalPipe("en-US").transform(e.value,"1.2-2")},e=p([Object(a.Injectable)({providedIn:"root"}),u("design:paramtypes",[i.a,r.b,n.a,c.a])],e)}()},X2CA:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarProveedores=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaProveedoresTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarProveedores(e.extraInfo):t.despuesDeListarProveedores([])}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.listarInvProveedorTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListInvProveedorTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvProveedorTO(e.extraInfo):(t.despuesDeListarInvProveedorTO([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.listarInvFunListadoProveedorTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunListadoProveedoresTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvFunListadoProveedorTO(e.extraInfo):(t.despuesDeListarInvFunListadoProveedorTO([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.insertarProveedor=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/insertarProveedorTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,"Correcto",{enableHtml:!0}),t.despuesDeInsertarProveedor(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarProveedor=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarProveedorTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.info(e.operacionMensaje,"Correcto",{enableHtml:!0}),t.despuesDeModificarProveedor(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.eliminarProveedor=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/eliminarInvProveedorTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,"Correcto"),t.despuesDeEliminarProveedor()):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.cambiarEstadoProveedor=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarEstadoInvProveedor",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,"Correcto"),t.despuesDecambiarEstadoProveedor()):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerSiEsProveedorRepetido=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getProveedorRepetido",e,o).then(function(e){e?t.despuesDeObtenerSiEsProveedorRepetido(e.extraInfo):t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.validarCedula=function(e,t,o){var a=this;this.api.post("todocompuWS/appWebController/validarCedula",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarCedula(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.buscaCedulaProveedorTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getBuscaCedulaProveedorTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeBuscaCedulaProveedorTO(e.extraInfo):(t.despuesDeBuscaCedulaProveedorTO(null),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.buscarConteoProveedor=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/buscarConteoProveedor",e,o).then(function(e){e&&e.extraInfo?t.despuesDeBuscarConteoProveedor(e.extraInfo):(t.despuesDeBuscarConteoProveedor(null),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear&&t.empresaSeleccionada.listaSisPermisoTO.gruCrearProveedores;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar&&t.empresaSeleccionada.listaSisPermisoTO.gruModificarProveedores;break;case s.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar;break;case s.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.ERROR_403_TITULO),a},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_NUMERO,field:"provId",width:100,minWidth:100},{headerName:s.a.TAG_RAZON_SOCIAL,field:"provRazonSocial",width:250,minWidth:250},{headerName:s.a.TAG_NOMBRE_COMERCIAL,field:"provNombreComercial",width:400,minWidth:400},{headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"provInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e.prototype.generarColumnasGenerales=function(){return[{headerName:s.a.TAG_NUMERO,field:"provId",width:100,minWidth:100},{headerName:s.a.TAG_RAZON_SOCIAL,field:"provRazonSocial",width:250,minWidth:250},{headerName:s.a.TAG_NOMBRE_COMERCIAL,field:"provNombreComercial",width:400,minWidth:400},{headerName:s.a.TAG_RELACIONADO,headerClass:"text-md-center",field:"provRelacionado",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},{headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"provInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e.prototype.generarColumnasTodo=function(){return[{headerName:s.a.TAG_NUMERO_IDENTIFICACION,field:"provCodigo",check:!0},{headerName:s.a.TAG_TIPO_ID,field:"provTipoId",check:!0},{headerName:s.a.TAG_NOMBRE,field:"provNombreComercial",check:!0},{headerName:s.a.TAG_RAZON_SOCIAL,field:"provRazonSocial",check:!0},{headerName:s.a.TAG_CATEGORIA,field:"provCategoria",check:!0},{headerName:s.a.TAG_PROVINCIA,field:"provProvincia",check:!0},{headerName:s.a.TAG_CIUDAD,field:"provCiudad",check:!0},{headerName:s.a.TAG_ZONA,field:"provZona",check:!0},{headerName:s.a.TAG_DIRECCION,field:"provDireccion",check:!0},{headerName:s.a.TAG_TELEFONO,field:"provTelefono",check:!0},{headerName:s.a.TAG_TELEFONO_CELULAR,field:"provCelular",check:!0},{headerName:s.a.TAG_EMAIL,field:"provEmail",check:!0},{headerName:s.a.TAG_OBSERVACIONES,field:"provObservaciones",check:!0},{headerName:s.a.TAG_INACTIVO,field:"provInactivo",check:!0}]},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[i.a,r.b,n.a])],e)}()},X9qb:function(e,t){e.exports=""},XHlA:function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_PRODUCTO_MARCA}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}\r\n      </strong>\r\n    </span>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrarProductoMarca()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div [ngClass]="{\'modal-body\': esModal}">\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card m-0">\r\n          <div class="card-header p-1">\r\n            <i class="{{classTitulo}}"></i>\r\n            <b>{{frmTitulo}}</b>\r\n            <div class="card-header-actions" *ngIf="vistaFormulario">\r\n              <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardarMarcaProducto" type="button" (click)="guardarProductoMarca(frmProductoMarca)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardarMarcaProducto" type="button" (click)="actualizarProductoMarca(frmProductoMarca)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button (click)="resetearFormulario()" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n                title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            <form #frmProductoMarca="ngForm" autocomplete="off">\r\n              <div *ngIf="vistaFormulario">\r\n                <div class="form-group form-group-sm has-feedback">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                  </label>\r\n                  <p *ngIf="!(accion===constantes.ACCION_CREAR)" class="form-control input-sm">{{invProductoMarcaTO.marCodigo}}</p>\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" type="text" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                    name="marCodigo" [(ngModel)]="invProductoMarcaTO.marCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="30" appUppercase>\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" triggers="mouseenter:mouseleave"\r\n                    container="body"></span>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                  </label>\r\n                  <input [appFocus]="accion===constantes.ACCION_EDITAR" name="marDetalle" [(ngModel)]="invProductoMarcaTO.marDetalle"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" pattern="{{constantes.PATTERN_SOLO_LETRAS}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="500" appUppercase>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_ABREVIADO}}</strong>\r\n                  </label>\r\n                  <input name="marAbreviado" [(ngModel)]="invProductoMarcaTO.marAbreviado" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_SOLO_LETRAS}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="500" appUppercase>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div class="card-footer" *ngIf="!vistaFormulario">\r\n            <div class="text-right">\r\n              <button id="btnBuscarMarcaProducto" type="button" class="btn btn-sm btn-primary mr-1" (click)="buscarProductoMarcas()"\r\n                [disabled]="cargando" title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> &nbsp; {{constantes.LABEL_BUSCAR}}</button>\r\n              <button id="btnNuevoMarcaProducto" class="btn btn-sm btn-primary" type="button" (click)="nuevoProductoMarca()"\r\n                [disabled]="!frmProductoMarca.form.valid || !empresaSeleccionada.listaSisPermisoTO.gruCrear" title="{{constantes.ATAJO_NUEVO}}">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> &nbsp; {{constantes.LABEL_NUEVO}}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div [ngClass]="{\'col-lg-8 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n        <div class="card m-0" *ngIf="listadoInvProductoMarcaComboListadoTO?.length > 0 && !vistaFormulario">\r\n          <div class="card-header p-1">\r\n            <strong>{{constantes.INVENTARIO_PRODUCTO_MARCA_LISTADO}}</strong>\r\n            <div class="card-header-actions">\r\n              <div class="btn-group d-lg-none">\r\n                <button id="btnNuevoMarcaProducto" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoProductoMarca()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_NUEVO}}" container="body" title="{{constantes.ATAJO_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMarcaProducto" (click)="imprimirMarcaProducto()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                  <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMarcaProducto" (click)="exportarMarcaProducto()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                  <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n                </button>\r\n              </div>\r\n              <div class="btn-group d-none d-lg-block">\r\n                <button id="btnNuevoMarcaProducto" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoProductoMarca()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_NUEVO}}" title="{{constantes.ATAJO_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirMarcaProducto" (click)="imprimirMarcaProducto()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                  <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarMarcaProducto" (click)="exportarMarcaProducto()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                  <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="card-body p-0">\r\n            \x3c!--La primera linea es para la seleccion--\x3e\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group p-1">\r\n                  <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                    size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                    size="100">\r\n                  <div class="input-group-append">\r\n                    <span class="input-group-text">\r\n                      <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div class="float-right pr-1">\r\n                  <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                    maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--listado de producto-marca--\x3e\r\n            <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 220px);" class="ag-theme-balham"\r\n              [rowData]="listadoInvProductoMarcaComboListadoTO" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n              [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n              [context]="context" [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()"\r\n              (gridReady)="onGridReady($event)" (rowSelected)="marcaSeleccionada = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n              (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()"\r\n              (cellFocused)="filaFocused($event)">\r\n            </ag-grid-angular>\r\n            \x3c!--end listado de producto-marca--\x3e\r\n            <p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},XYH7:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.pedEmpresa="",this.pedMotivo="",this.pedNumero=null,this.pedSector="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.pedEmpresa=e.pedEmpresa?e.pedEmpresa:this.pedEmpresa,this.pedMotivo=e.pedMotivo?e.pedMotivo:this.pedMotivo,this.pedNumero=e.pedNumero?e.pedNumero:this.pedNumero,this.pedSector=e.pedSector?e.pedSector:this.pedSector},e}()},XwtN:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.proEmpresa="",this.proCodigoPrincipal="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.proEmpresa=e?e.proEmpresa:this.proEmpresa,this.proCodigoPrincipal=e?e.proCodigoPrincipal:this.proCodigoPrincipal},e}()},YEjl:function(e,t,o){"use strict";var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("CEfs"),s=o("yccp"),c=o("nR5P"),l=o("8fiX"),d=o("mwBN"),p=o("CDHH"),u=o("eUd/"),h=function(){function e(e){this.geEmpresa="",this.geCodigo="",this.geNombre="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.geEmpresa=e.geEmpresa?e.geEmpresa:this.geEmpresa,this.geCodigo=e.geCodigo?e.geCodigo:this.geCodigo,this.geNombre=e.geNombre?e.geNombre:this.geNombre,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}(),m=o("zvBE"),C=o("EF/R"),v=o("EnEm"),A=o("zkCp");o.d(t,"a",function(){return b});var f=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,o,a,i,r,n,s,c){this.api=e,this.toastr=t,this.auth=o,this.filasService=a,this.atajoService=i,this.utilService=r,this.activeModal=n,this.cdRef=s,this.clienteService=c,this.listaResultado=[],this.listaEmpresas=[],this.accion=null,this.tituloForm=d.a.TITULO_FILTROS,this.constantes=d.a,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filtroGlobal="",this.filasTiempo=new v.a,this.esModal=!1,this.columnDefs=[],this.columnDefsSelected=[]}return e.prototype.ngOnInit=function(){this.constantes=d.a,this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),this.generarAtajosTeclado(),this.empresaModal&&(this.esModal=!0,this.listaEmpresas.push(this.empresaModal),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),d.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSeleccionada(),this.listaResultado=this.listadoGrupos,0==this.listaResultado.length&&this.operacionesGrupoEmpresarial(this.constantes.ACCION_CREAR)),this.iniciarAgGrid(),this.cdRef.detectChanges()},e.prototype.cambiarEmpresaSeleccionada=function(){d.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.grupoEmpresarialSeleccionado=new h,this.limpiarListado(),this.activar=!0,this.accion=null},e.prototype.limpiarListado=function(){this.listaResultado=[]},e.prototype.resetear=function(){this.activar=!0,this.accion=null,this.tituloForm=d.a.TITULO_FILTROS,this.filasService.actualizarFilas(this.listaResultado.length,this.filasTiempo.getTiempo())},e.prototype.generarOpciones=function(){var e=this,t=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&!this.accion,o=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar&&!this.accion;this.opciones=[{label:d.a.ACCION_EDITAR,icon:d.a.ICON_EDITAR,disabled:!t,command:function(){return t?e.operacionesGrupoEmpresarial(d.a.ACCION_EDITAR):null}},{label:d.a.ACCION_ELIMINAR,icon:d.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?e.operacionesGrupoEmpresarial(d.a.ACCION_ELIMINAR):null}}]},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listaResultado.length>0)(o=this.listaResultado.slice()).unshift(e),this.listaResultado=o,this.seleccionarFila(0);break;case"U":var o,a=this.listaResultado.findIndex(function(t){return t.geCodigo===e.geCodigo});(o=this.listaResultado.slice())[a]=e,this.listaResultado=o,this.grupoEmpresarialSeleccionado=this.listaResultado[a],this.seleccionarFila(a);break;case"D":a=this.listaResultado.findIndex(function(t){return t.geCodigo===e.geCodigo});this.listaResultado=this.listaResultado.filter(function(e,t){return t!=a}),this.listaResultado.length>0&&this.seleccionarFila(0===a?0:a-1)}},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new s.Hotkey(d.a.ATAJO_ESC,function(){return e.cerrarModal(),!1})),this.atajoService.add(new s.Hotkey(d.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarGrupoEmp");return e&&e.click(),!1})),this.atajoService.add(new s.Hotkey(d.a.ATAJO_NUEVO,function(){var e=document.getElementById("btnNuevoGrupoEmp");return e&&e.click(),!1})),this.atajoService.add(new s.Hotkey(d.a.ATAJO_EDITAR,function(){return e.listaResultado.length>0&&e.operacionesGrupoEmpresarial(d.a.ACCION_EDITAR),!1})),this.atajoService.add(new s.Hotkey(d.a.ATAJO_ELIMINAR,function(){return e.listaResultado.length>0&&e.operacionesGrupoEmpresarial(d.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new s.Hotkey(d.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardarGrupoEmp");return t&&t.click(),!1})),this.atajoService.add(new s.Hotkey(d.a.ATAJO_CANCELAR,function(t){return e.resetear(),!1}))},e.prototype.setearValores=function(e){e.invClienteGrupoEmpresarialPK.geEmpresa=d.a.KEY_EMPRESA_SELECT,e.invClienteGrupoEmpresarialPK.geCodigo=e.invClienteGrupoEmpresarialPK.geCodigo.toUpperCase(),e.geNombre=e.geNombre.toUpperCase(),e.usrCodigo=this.auth.getCodigoUser()},e.prototype.convertirGrupoEmpresarialTOAEntidad=function(e){var t=new m.a;return t.invClienteGrupoEmpresarialPK.geCodigo=e.geCodigo,t.invClienteGrupoEmpresarialPK.geEmpresa=e.geEmpresa,t.geNombre=e.geNombre,t},e.prototype.convertirEntidadEnEnGrupoEmpresarialTO=function(e){var t=new h;return t.geCodigo=e.invClienteGrupoEmpresarialPK.geCodigo,t.geEmpresa=e.invClienteGrupoEmpresarialPK.geEmpresa,t.geNombre=e.geNombre,t},e.prototype.listarGruposEmpresariales=function(){this.cargando=!0,this.accion=null,this.limpiarListado();var e={empresa:this.empresaSeleccionada.empCodigo};this.clienteService.listarGrupoEmpresarial(e,this,d.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvClienteGrupoEmpresarial=function(e){this.listaResultado=e||[],this.cargando=!1},e.prototype.operacionesGrupoEmpresarial=function(e){switch(e){case d.a.ACCION_ELIMINAR:this.utilService.verificarPermiso(d.a.ACCION_ELIMINAR,this,!0)&&(this.invGrupoEmpresarial=this.convertirGrupoEmpresarialTOAEntidad(this.grupoEmpresarialSeleccionado),this.eliminarGrupoEmpresarial());break;case d.a.ACCION_CREAR:this.utilService.verificarPermiso(d.a.ACCION_CREAR,this,!0)&&(this.invGrupoEmpresarial=new m.a,this.accion=d.a.ACCION_CREAR,this.tituloForm=d.a.TITULO_FORM_NUEVO_GRUPO_EMPRESARIAL,this.activar=!1);break;case d.a.ACCION_EDITAR:this.utilService.verificarPermiso(d.a.ACCION_EDITAR,this,!0)&&(this.invGrupoEmpresarial=this.convertirGrupoEmpresarialTOAEntidad(this.grupoEmpresarialSeleccionado),this.accion=d.a.ACCION_EDITAR,this.tituloForm=d.a.TITULO_FORM_EDITAR_GRUPO_EMPRESARIAL,this.activar=!1)}},e.prototype.insertarGrupoEmpresarial=function(e){var t=this;if(this.utilService.verificarPermiso(d.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=JSON.parse(JSON.stringify(this.invGrupoEmpresarial));this.setearValores(a),this.api.post("todocompuWS/inventarioWebController/insertarInvClienteGrupoEmpresarial",{invClienteGrupoEmpresarial:a},d.a.KEY_EMPRESA_SELECT).then(function(e){if(t.cargando=!1,e&&e.extraInfo){var o=t.convertirEntidadEnEnGrupoEmpresarialTO(e.extraInfo);t.grupoEmpresarialNuevoSeleccionado=o,t.refrescarTabla(o,"I"),t.toastr.success(e.operacionMensaje,d.a.TAG_AVISO),t.resetear()}else t.toastr.warning(e.operacionMensaje,d.a.TAG_AVISO)}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(d.a.MSJ_CAMPOS_INVALIDOS,d.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.actualizarGrupoEmpresarial=function(e){var t=this;if(this.utilService.verificarPermiso(d.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=JSON.parse(JSON.stringify(this.invGrupoEmpresarial));this.setearValores(a),this.api.post("todocompuWS/inventarioWebController/modificarInvClienteGrupoEmpresarial",{invClienteGrupoEmpresarial:a},d.a.KEY_EMPRESA_SELECT).then(function(e){if(t.cargando=!1,e&&e.extraInfo){var o=t.convertirEntidadEnEnGrupoEmpresarialTO(e.extraInfo);t.grupoEmpresarialNuevoSeleccionado=o,t.refrescarTabla(o,"U"),t.toastr.success(e.operacionMensaje,d.a.TAG_AVISO),t.resetear()}else t.toastr.warning(e.operacionMensaje,d.a.TAG_AVISO)}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(d.a.MSJ_CAMPOS_INVALIDOS,d.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarGrupoEmpresarial=function(){var e=this;if(this.utilService.verificarPermiso(d.a.ACCION_ELIMINAR,this,!0)){var t=JSON.parse(JSON.stringify(this.invGrupoEmpresarial)),o={title:d.a.MSJ_TITULO_ELIMINAR,texto:d.a.MSJ_PREGUNTA_ELIMINAR,type:d.a.SWAL_WARNING,confirmButtonText:d.a.MSJ_SI_ELIMINAR,cancelButtonText:d.a.MSJ_NO_CANCELAR,confirmButtonColor:d.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(e.cargando=!0,e.api.post("todocompuWS/inventarioWebController/eliminarInvClienteGrupoEmpresarial",{pk:t.invClienteGrupoEmpresarialPK},d.a.KEY_EMPRESA_SELECT).then(function(o){if(e.cargando=!1,o&&o.extraInfo){var a=e.convertirEntidadEnEnGrupoEmpresarialTO(t);e.refrescarTabla(a,"D"),e.toastr.success(o.operacionMensaje,d.a.TAG_AVISO),e.resetear(),0==e.listaResultado.length&&e.operacionesGrupoEmpresarial(e.constantes.ACCION_CREAR)}else e.resetear(),e.toastr.warning(o.operacionMensaje,d.a.TAG_AVISO)}).catch(function(t){return e.utilService.handleError(t,e)})):e.resetear()})}},e.prototype.cerrarModal=function(){this.grupoEmpresarialNuevoSeleccionado=this.grupoEmpresarialNuevoSeleccionado&&""==this.grupoEmpresarialNuevoSeleccionado.geCodigo?null:this.grupoEmpresarialNuevoSeleccionado;var e={listaResultado:this.listaResultado,grupoEmpresarialNuevoSeleccionado:this.grupoEmpresarialNuevoSeleccionado};this.activeModal.close(e)},e.prototype.iniciarAgGrid=function(){this.columnDefs=[{headerName:d.a.TAG_CODIGO,field:"geCodigo",width:100,minWidth:100},{headerName:d.a.TAG_DESCRIPCION,field:"geNombre",width:200,minWidth:200},this.utilService.getColumnaOpciones()],this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.noDatos=d.a.MSJ_NO_HAY_DATOS},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.gridApi.sizeColumnsToFit(),this.seleccionarFila(0)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.grupoEmpresarialSeleccionado=t?t.data:null},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.grupoEmpresarialSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.onResize=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576)},f([Object(a.Input)(),g("design:type",l.a)],e.prototype,"empresaModal",void 0),f([Object(a.Input)(),g("design:type",Array)],e.prototype,"listadoGrupos",void 0),f([Object(a.Input)(),g("design:type",String)],e.prototype,"razonSocial",void 0),f([Object(a.ViewChild)("menuOpciones"),g("design:type",A.ContextMenu)],e.prototype,"menuOpciones",void 0),f([Object(a.HostListener)("window:resize",["$event"]),g("design:type",Function),g("design:paramtypes",[]),g("design:returntype",void 0)],e.prototype,"onResize",null),e=f([Object(a.Component)({selector:"app-grupo-empresarial",template:o("SxrA"),styles:[o("NrYH")]}),g("design:paramtypes",[i.a,r.b,C.a,n.a,s.HotkeysService,c.a,u.a,a.ChangeDetectorRef,p.a])],e)}()},Z57A:function(e,t){e.exports=""},ZFRI:function(e,t){e.exports='<div *ngIf="vistaFormulario">\r\n  \x3c!-- FORMULARIO DE ORDEN DE PEDIDO --\x3e\r\n  <div class="card m-0">\r\n    <div class="card-header p-1">\r\n      <button id="btnActivarPerfilFacturacion" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="cambiarActivar()"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <strong>{{ frmTitulo }}:\r\n        <span class="text-primary">{{ empresaSeleccionada.empNombre }}</span>\r\n      </strong>\r\n      <div class="card-header-actions">\r\n        \x3c!--  BOTONES   --\x3e\r\n        <div class="btn-group">\r\n          \x3c!-- Registrador --\x3e\r\n          <button id="btnGuardarPerfilFacturacion" *ngIf="accion===constantes.ACCION_CREAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" (click)="guardarPerfilFacturacion(frmPerfilFacturacion)">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n          </button>\r\n          <button id="btnGuardarPerfilFacturacion" *ngIf="accion===constantes.ACCION_EDITAR" type="button" class="btn btn-sm btn-primary mr-1"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" (click)="actualizarPerfilFacturacion(frmPerfilFacturacion)">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n          </button>\r\n          \x3c!--Cancelar--\x3e\r\n          <button *ngIf="!(accion===constantes.ACCION_CONSULTAR)" type="button" class="btn btn-sm btn-default mr-1" (click)="cancelarAccion()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_CANCELAR}}" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n          </button>\r\n          <button *ngIf="accion===constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-default mr-1" (click)="cancelarAccion()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_REGRESAR}}" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="card-body p-1">\r\n      \x3c!-- Si la accion de consulta --\x3e\r\n      <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n        <form #frmPerfilFacturacion="ngForm" autocomplete="off">\r\n          \x3c!--Usuario Responsable--\x3e\r\n          <div class="card mb-1 card-accent-primary">\r\n            <div class="card-header h6">\r\n              <strong>{{ constantes.TAG_USUARIO_RESPONSABLE }}</strong>\r\n              <div class="card-header-actions">\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseUsuarioResponsable" aria-expanded="true"\r\n                  placement="top" ngbTooltip="Ocultar/Mostrar">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseUsuarioResponsable">\r\n              <div class="row">\r\n                <div class="col-12">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_USUARIO_RESPONSABLE}}</strong>\r\n                      &nbsp;\r\n                      <a (click)="listarUsuariosResponsables()" *ngIf="accion===constantes.ACCION_CREAR">\r\n                        <span class="fa fa-refresh" placement="top" ngbTooltip="{{constantes.TAG_RECARGAR}}" container="body"></span>\r\n                      </a>\r\n                    </label>\r\n                    <select *ngIf="accion === constantes.ACCION_CREAR" [(ngModel)]="usuarioSeleccionado" class="form-control input-sm" name="usuarioSeleccionado"\r\n                      required>\r\n                      <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                      <option [ngValue]="usuario" *ngFor="let usuario of listaUsuarios">{{usuario.usrNombre}} {{usuario.usrApellido}} ({{usuario.usrCodigo}})</option>\r\n                    </select>\r\n                    <input *ngIf="accion !== constantes.ACCION_CREAR" type="text" value="{{cajCajaTO.cajaUsuarioNombre}} ({{cajCajaTO.cajaUsuarioResponsable}})"\r\n                      name="cajaUsuarioNombre" class="form-control form-group-sm" readonly disabled>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          \x3c!--Permisos--\x3e\r\n          <div class="card mb-1 card-accent-primary">\r\n            <div class="card-header h6">\r\n              <strong>{{ constantes.TAG_PERMISOS }}</strong>\r\n              <div class="card-header-actions">\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapsePermisos" aria-expanded="true"\r\n                  placement="top" ngbTooltip="Ocultar/Mostrar">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapsePermisos">\r\n              <div class="row">\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <label>\r\n                    <input name="permisoEliminarFilas" [(ngModel)]="cajCajaTO.permisoEliminarFilas" type="checkbox" class="mousetrap"> {{constantes.TAG_ELIMINAR_FILAS}}\r\n                  </label>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <label>\r\n                    <input name="permisoCambiarFechaRetencion" [(ngModel)]="cajCajaTO.permisoCambiarFechaRetencion" type="checkbox" class="mousetrap"> {{constantes.TAG_CAMBIAR_FECHA_RETENCION}}\r\n                  </label>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <label>\r\n                    <input name="permisoCambiarFechaVenta" [(ngModel)]="cajCajaTO.permisoCambiarFechaVenta" type="checkbox" class="mousetrap"> {{constantes.TAG_CAMBIAR_FECHA_VENTA}}\r\n                  </label>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <label>\r\n                    <input name="permisoAplicarDescuentos" [(ngModel)]="cajCajaTO.permisoAplicarDescuentos" type="checkbox" class="mousetrap"> {{constantes.TAG_APLICAR_DESCUENTOS}}\r\n                  </label>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <label>\r\n                    <input name="permisoClienteCredito" [(ngModel)]="cajCajaTO.permisoClienteCredito" type="checkbox" class="mousetrap"> {{constantes.TAG_CLIENTE_CREDITO}}\r\n                  </label>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <label>\r\n                    <input name="permisoCambiarPrecio" [(ngModel)]="cajCajaTO.permisoCambiarPrecio" type="checkbox" class="mousetrap"> {{constantes.TAG_CAMBIAR_PRECIO}}\r\n                  </label>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <label>\r\n                    <input name="permisoClienteCrear" [(ngModel)]="cajCajaTO.permisoClienteCrear" type="checkbox" class="mousetrap"> {{constantes.TAG_CREAR_CLIENTE}}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              <br>\r\n              <div class="row">\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_MOTIVO_PERMITIDO}}</strong>\r\n                      &nbsp;\r\n                      <a (click)="listarMotivoVenta()" *ngIf="!(accion===constantes.ACCION_CONSULTAR)">\r\n                        <span class="fa fa-refresh" placement="top" ngbTooltip="{{constantes.TAG_RECARGAR}}" container="body"></span>\r\n                      </a>\r\n                    </label>\r\n                    <p-dropdown [options]="listaMotivoVenta" name="motivoVentaSeleccionado" [showClear]="true" [(ngModel)]="motivoVentaSeleccionado"\r\n                      placeholder="{{constantes.TAG_SELECCIONE}}" optionLabel="vmDetalle" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n                      <ng-template let-item pTemplate="selectedItem">\r\n                        {{motivoVentaSeleccionado?.vmDetalle}} ({{motivoVentaSeleccionado?.vmCodigo}})\r\n                      </ng-template>\r\n                      <ng-template let-elemento pTemplate="item">\r\n                        <div class=""> {{elemento.value.vmDetalle}} ({{elemento.value.vmCodigo}})</div>\r\n                      </ng-template>\r\n                    </p-dropdown>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_DOCUMENTO_PERMITIDO}}</strong>\r\n                      &nbsp;\r\n                      <a (click)="listarDocumentos()" *ngIf="!(accion===constantes.ACCION_CONSULTAR)">\r\n                        <span class="fa fa-refresh" placement="top" ngbTooltip="{{constantes.TAG_RECARGAR}}" container="body"></span>\r\n                      </a>\r\n                    </label>\r\n                    <p-dropdown [options]="listaTipoComprobante" name="tipoComprobanteSeleccionado" [showClear]="true" [(ngModel)]="tipoComprobanteSeleccionado"\r\n                      placeholder="{{constantes.TAG_SELECCIONE}}" optionLabel="tcDescripcion" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n                      <ng-template let-item pTemplate="selectedItem">\r\n                        {{tipoComprobanteSeleccionado?.tcDescripcion}} ({{tipoComprobanteSeleccionado?.tcCodigo}})\r\n                      </ng-template>\r\n                      <ng-template let-elemento pTemplate="item">\r\n                        <div class=""> {{elemento.value.tcDescripcion}} ({{elemento.value.tcCodigo}})</div>\r\n                      </ng-template>\r\n                    </p-dropdown>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_BODEGA_PERMITIDA}}</strong>\r\n                      &nbsp;\r\n                      <a (click)="listarBodegas()" *ngIf="!(accion===constantes.ACCION_CONSULTAR)">\r\n                        <span class="fa fa-refresh" placement="top" ngbTooltip="{{constantes.TAG_RECARGAR}}" container="body"></span>\r\n                      </a>\r\n                    </label>\r\n                    <p-dropdown [options]="listaBodega" name="bodegaSeleccionada" [showClear]="true" [(ngModel)]="bodegaSeleccionada" placeholder="{{constantes.TAG_SELECCIONE}}"\r\n                      optionLabel="bodNombre" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n                      <ng-template let-item pTemplate="selectedItem">\r\n                        {{bodegaSeleccionada?.bodNombre}} ({{bodegaSeleccionada?.bodCodigo}})\r\n                      </ng-template>\r\n                      <ng-template let-elemento pTemplate="item">\r\n                        <div class=""> {{elemento.value.bodNombre}} ({{elemento.value.bodCodigo}})</div>\r\n                      </ng-template>\r\n                    </p-dropdown>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_PRECIO_DE_VENTA}}</strong>\r\n                      &nbsp;\r\n                      <a (click)="obtenerEtiquetas()" *ngIf="!(accion===constantes.ACCION_CONSULTAR)">\r\n                        <span class="fa fa-refresh" placement="top" ngbTooltip="{{constantes.TAG_RECARGAR}}" container="body"></span>\r\n                      </a>\r\n                    </label>\r\n                    <p-dropdown [options]="listaPrecioventa" name="precioVentaSeleccionada" [showClear]="true" [(ngModel)]="precioVentaSeleccionada"\r\n                      placeholder="{{constantes.TAG_SELECCIONE}}" optionLabel="label" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n                      <ng-template let-item pTemplate="selectedItem">\r\n                        {{precioVentaSeleccionada?.label}}\r\n                      </ng-template>\r\n                      <ng-template let-elemento pTemplate="item">\r\n                        <div class=""> {{elemento.value.label}} {{elemento.value.value}}</div>\r\n                      </ng-template>\r\n                    </p-dropdown>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_FORMA_COBRO}}</strong>\r\n                      &nbsp;\r\n                      <a (click)="listarFormasCobro()" *ngIf="!(accion===constantes.ACCION_CONSULTAR)">\r\n                        <span class="fa fa-refresh" placement="top" ngbTooltip="{{constantes.TAG_RECARGAR}}" container="body"></span>\r\n                      </a>\r\n                    </label>\r\n                    <p-dropdown [options]="listaFormaCobro" name="formaCobroSeleccionado" [showClear]="true" [(ngModel)]="formaCobroSeleccionado"\r\n                      placeholder="{{constantes.TAG_SELECCIONE}}" optionLabel="fcDetalle" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n                      <ng-template let-item pTemplate="selectedItem">\r\n                        {{formaCobroSeleccionado?.fcDetalle}} ({{formaCobroSeleccionado?.ctaCodigo}})\r\n                      </ng-template>\r\n                      <ng-template let-elemento pTemplate="item">\r\n                        <div class=""> {{elemento.value.fcDetalle}} ({{elemento.value.ctaCodigo}})</div>\r\n                      </ng-template>\r\n                    </p-dropdown>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_SECUENCIAL_FACTURAS}}</strong>\r\n                    </label>\r\n                    <p-inputMask [(ngModel)]="cajCajaTO.permisoSecuencialFacturas" name="permisoSecuencialFacturas" mask="999-999" placeholder="999-999"\r\n                      [required]="true" [pattern]="constantes.PATTERN_SECUENCIAL"></p-inputMask>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_SECUENCIAL_NOTAS_CREDITO}}</strong>\r\n                    </label>\r\n                    <p-inputMask [(ngModel)]="cajCajaTO.permisoSecuencialNotasCredito" name="permisoSecuencialNotasCredito" mask="999-999" placeholder="999-999"\r\n                      [required]="true" [pattern]="constantes.PATTERN_SECUENCIAL"></p-inputMask>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_SECUENCIAL_NOTAS_DEBITO}}</strong>\r\n                    </label>\r\n                    <p-inputMask [(ngModel)]="cajCajaTO.permisoSecuencialNotasDebito" name="permisoSecuencialNotasDebito" mask="999-999" placeholder="999-999"\r\n                      [required]="true" [pattern]="constantes.PATTERN_SECUENCIAL"></p-inputMask>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6 col-lg-4">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label  ">\r\n                      <strong>{{constantes.TAG_SECUENCIAL_RETENCIONES}}</strong>\r\n                    </label>\r\n                    <p-inputMask [(ngModel)]="cajCajaTO.permisoSecuencialRetenciones" name="permisoSecuencialRetenciones" mask="999-999" placeholder="999-999"\r\n                      [required]="true" [pattern]="constantes.PATTERN_SECUENCIAL"></p-inputMask>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          \x3c!--Usuario Responsable--\x3e\r\n          <div class="card mb-1 card-accent-primary">\r\n            <div class="card-header h6">\r\n              <strong>{{ constantes.TAG_DATOS_DOCUMENTOS_ELECTRONICOS }}</strong>\r\n              <div class="card-header-actions">\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseDatosDocElectronicos" aria-expanded="true"\r\n                  placement="top" ngbTooltip="Ocultar/Mostrar">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseDatosDocElectronicos">\r\n              <div class="form-group form-group-sm">\r\n                <label class="control-label">\r\n                  <strong>{{constantes.TAG_ARCHIVO_FIRMA_ELECTRONICA}}</strong>\r\n                </label>\r\n                <p-fileUpload [name]="archivoPerfil" [showUploadButton]="false" accept=".p12" [maxFileSize]="1000000" chooseLabel="Escoger"\r\n                  cancelLabel="Cancelar" invalidFileTypeMessageSummary="{0}:  {{constantes.MSJ_ARCHIVO_NO_VALIDO}}, " invalidFileTypeMessageDetail="{{constantes.MSJ_ARCHIVO_PERMITIDO}}: {0}."\r\n                  (onSelect)="establecerArchivoElectronico($event)" (onClear)="limpiarArchivoElectronico()" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n                  <ng-template let-file pTemplate="file">\r\n                    <div *ngIf="archivoPerfilByte" class="ui-fileupload-row ng-star-inserted">\r\n                      <div>{{file.name}}</div>\r\n                      <div>{{file.size / 1000 | number:\'1.3-3\'}} KB</div>\r\n                    </div>\r\n                  </ng-template>\r\n                  <ng-template pTemplate="content">\r\n                    <div *ngIf="!archivoPerfilByte"> {{cajCajaTO.cajaCertificadoFirmaDigitalNombre}}\r\n                    </div>\r\n                  </ng-template>\r\n                </p-fileUpload>\r\n              </div>\r\n              <div class="form-group form-group-sm">\r\n                <label class="control-label">\r\n                  <strong>{{constantes.TAG_CLAVE_FIRMA_ELECTRONICA}}</strong>\r\n                </label>\r\n                <input type="password" autocomplete="nope" [(ngModel)]="cajCajaTO.cajaCertificadoFirmaDigitalClave" value="{{cajCajaTO.cajaCertificadoFirmaDigitalClave}}"\r\n                  name="cajaCertificadoFirmaDigitalClave" class="form-control form-group-sm" [required]="cajCajaTO.cajaCertificadoFirmaDigitalNombre?true:false"\r\n                  readonly onfocus="this.removeAttribute(\'readonly\');">\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </fieldset>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},ZJV5:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.ocmEmpresa="",this.ocmSector="",this.ocmCodigo="",this.ocmDetalle="",this.ocmNotificarProveedor=!1,this.ocmNotificarAprobador=!1,this.ocmCostoFijo=!1,this.ocmAprobacionAutomatica=!1,this.ocmInactivo=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.ocmEmpresa=e.ocmEmpresa?e.ocmEmpresa:this.ocmEmpresa,this.ocmSector=e.ocmSector?e.ocmSector:this.ocmSector,this.ocmCodigo=e.ocmCodigo?e.ocmCodigo:this.ocmCodigo,this.ocmDetalle=e.ocmDetalle?e.ocmDetalle:this.ocmDetalle,this.ocmNotificarProveedor=e.ocmNotificarProveedor?e.ocmNotificarProveedor:this.ocmNotificarProveedor,this.ocmNotificarAprobador=e.ocmNotificarAprobador?e.ocmNotificarAprobador:this.ocmNotificarAprobador,this.ocmCostoFijo=e.ocmCostoFijo?e.ocmCostoFijo:this.ocmCostoFijo,this.ocmAprobacionAutomatica=e.ocmAprobacionAutomatica?e.ocmAprobacionAutomatica:this.ocmAprobacionAutomatica,this.ocmInactivo=e.ocmInactivo?e.ocmInactivo:this.ocmInactivo},e}()},aZGd:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.xivDescripcion="",this.xivDesde=null,this.xivHasta=null,this.xivFechaMaximaPago=null,this.xivSalarioMinimoVital=null,this.periodoSecuencial=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.xivDescripcion=e.xivDescripcion?e.xivDescripcion:this.xivDescripcion,this.xivDesde=e.xivDesde?e.xivDesde:this.xivDesde,this.xivHasta=e.xivHasta?e.xivHasta:this.xivHasta,this.xivFechaMaximaPago=e.xivFechaMaximaPago?e.xivFechaMaximaPago:this.xivFechaMaximaPago,this.periodoSecuencial=e.periodoSecuencial?e.periodoSecuencial:this.periodoSecuencial},e}()},aoE9:function(e,t,o){"use strict";var a=o("CcnG"),i=o("SZbH"),r=o("nR5P"),n=o("z5Y/"),s=o("mwBN"),c=o("madF"),l=o("tc6t"),d=o("gLZI"),p=o("OeYz"),u=o("mozY"),h=o("L5HG"),m=function(){function e(e){this.id=0,this.transStatus=null,this.transFecha=null,this.transObservaciones=null,this.transNumero=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.transStatus=e.transStatus?e.transStatus:this.transStatus,this.transFecha=e.transFecha?e.transFecha:this.transFecha,this.transObservaciones=e.transObservaciones?e.transObservaciones:this.transObservaciones,this.transNumero=e.transNumero?e.transNumero:this.transNumero},e}(),C=o("Ip0R"),v=o("iHU/"),A=o("Ungd");o.d(t,"a",function(){return b});var f=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,o,a){this.api=e,this.utilService=t,this.toastr=o,this.archivoService=a}return e.prototype.listarTransferencias=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvConsultaTransferencias",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarTransferencia(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.despuesDeListarTransferencia(null))}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosParaTransferenciaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerDatosParaTransferencia",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarDatosTransferenciaTO(e.extraInfo):(t.despuesDeListarDatosTransferenciaTO([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarInvTransferenciaTO=function(e,t,o,a){var i=this;this.api.post("todocompuWS/inventarioWebController/insertarInvTransferenciaTO",e,o).then(function(e){t.cargando=!1,e&&e.estadoOperacion===s.a.KEY_EXITO?t.despuesDeInsertarTransferencia(e,a):(i.utilService.generarSwal(s.a.TAG_TRANSFERENCIA,s.a.SWAL_ERROR,e.operacionMensaje+" "+e.extraInfo.listaErrores1),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,i)})},e.prototype.obtenerObjetoItemListaTransferenciaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/consultaTransferencia",e,o).then(function(e){e&&e.extraInfo?t.despuesDeConsultarTransferencia(e.extraInfo):a.toastr.warning(e.operacionMensaje,"Aviso")}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.desmayorizarTransferencias=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/desmayorizarTransferencia",e,o).then(function(e){e&&e.estadoOperacion===s.a.KEY_EXITO?t.despuesDeDesmayorizarTransferencia(e):a.toastr.warning(e.operacionMensaje,"Aviso")}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.desmayorizarTransferenciaPorLote=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/desmayorizarTransferenciaPorLote",e,o).then(function(e){e&&e.extraInfo?t.despuesDeDesmayorizarPorLote(e):(a.utilService.generarSwal(s.a.ACCION_DESMAYORIZAR+" "+s.a.TAG_TRANSFERENCIA,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.anularTransferencias=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/anularTransferencia",e,o).then(function(e){e&&e.estadoOperacion===s.a.KEY_EXITO?t.despuesDeAnularTransferencia(e):a.toastr.warning(e.operacionMensaje,"Aviso")}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.restaurarTransferencias=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/restaurarTransferencia",e,o).then(function(e){e&&e.estadoOperacion===s.a.KEY_EXITO?(t.data.vistaFormulario=!1,t.despuesDeRestaurarTransferencia(e)):a.toastr.warning(e.operacionMensaje,"Aviso")}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.modificarInvTransferenciasTO=function(e,t,o,a){var i=this;this.api.post("todocompuWS/inventarioWebController/modificarInvTransferenciasTO",e,o).then(function(e){e&&e.estadoOperacion===s.a.KEY_EXITO?t.despuesDeModificarTransferencia(e,a):(i.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,i)})},e.prototype.imprimirTransferencia=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteTrasferencias",e,o).then(function(e){e&&e._body&&e._body.byteLength>0?a.utilService.descargarArchivoPDF("transferencia"+a.utilService.obtenerHorayFechaActual()+".pdf",e):a.toastr.warning(s.a.MSJ_ERROR_IMPRIMIR,s.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.imprimirTransferenciaPorLote=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReportePorLoteTrasferencias",e,o).then(function(e){e&&e._body&&e._body.byteLength>0?a.utilService.descargarArchivoPDF("transferencia"+a.utilService.obtenerHorayFechaActual()+".pdf",e):a.toastr.warning(s.a.MSJ_ERROR_IMPRIMIR,s.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.construirObjetoParaPonerloEnLaLista=function(e){var t=new m;return t.transNumero=e.invTransferenciasPK.transPeriodo+"|"+e.invTransferenciasPK.transMotivo+"|"+e.invTransferenciasPK.transNumero,e.transAnulado?t.transStatus="ANULADO":e.transPendiente?t.transStatus="PENDIENTE":t.transStatus="",t.transObservaciones=e.transObservaciones,t.transFecha=e.transFecha,t},e.prototype.construirObjetoParaPonerloEnLaListaAnularRestaurar=function(e){var t=new m;return t.transNumero=e.transPeriodo+"|"+e.transMotivo+"|"+e.transNumero,e.transAnulado?t.transStatus="ANULADO":e.transPendiente?t.transStatus="PENDIENTE":t.transStatus="",t.transObservaciones=e.transObservaciones,t.transFecha=e.transFecha,t},e.prototype.getTransferenciasPKDeListaConContableTO=function(e){for(var t=Array(),o=new v.a,a=0,i=e;a<i.length;a++){var r=i[a];o.transNumero=r.transNumero,t.push(o.transNumero)}return t},e.prototype.obtenerAutonumeric=function(){return{decimalPlaces:6,decimalPlacesRawValue:6,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:6,maximumValue:"9999999999.999999",minimumValue:"0"}},e.prototype.enfocarInput=function(e){var t=document.getElementById(e);t&&t.focus()},e.prototype.generarColumnas=function(){return[{headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:60,minWidth:60},{headerName:s.a.TAG_ESTADO,headerClass:"text-sm-center",field:"transStatus",width:80,minWidth:80,cellRendererFramework:h.a,cellClass:"text-center"},{headerName:s.a.TAG_FECHA,field:"transFecha",width:100,minWidth:100,valueFormatter:this.formatearFecha},{headerName:s.a.TAG_OBSERVACIONES,field:"transObservaciones",width:600,minWidth:100},{headerName:s.a.TAG_NUMERO,field:"transNumero",width:150,minWidth:150},this.utilService.getColumnaOpciones()]},e.prototype.generarColumnasFormulario=function(e){var t=this,o=e.data.accion===s.a.ACCION_NUEVO||e.data.accion===s.a.ACCION_MAYORIZAR||e.data.accion===s.a.ACCION_DESMAYORIZAR,a=[];return o?a.push({headerName:s.a.TAG_MOVER_FILA,headerClass:"cell-header-center pr-0",cellClass:"text-center cell-block",width:35,minWidth:35,rowDrag:o,headerComponentFramework:d.a,headerComponentParams:{class:s.a.ICON_MOVER_FILA,tooltip:s.a.TAG_MOVER_FILA,text:"",enableSorting:!1},valueGetter:function(){return null}},{headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:120,minWidth:120,cellClass:"cell-editing",cellClassRules:{"cell-with-errors":function(e){return!!o&&!t.validarProducto(e.data)}},suppressKeyboardEvent:function(o){if(o.event.keyCode!==s.a.KEYCODE_UP&&o.event.keyCode!==s.a.KEYCODE_DOWN){if(e.buscarProducto(o),o.editing)return!0}else if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvDetalleTran)},editable:!0,valueGetter:function(e){return e.data.proCodigoPrincipal},cellEditorFramework:p.a,cellEditorParams:{name:"proCodigoPrincipal",maxlength:50,inputClass:"text-uppercase",placeholder:""}},{headerName:s.a.TAG_DESCRIPCION,field:"proNombre",width:200,minWidth:200,cellClass:"cell-block mousetrap",valueGetter:function(e){return e.data.proNombre},suppressKeyboardEvent:function(o){switch(o.event.keyCode){case s.a.KEYCODE_TAB:e.cantidadFocusAndEditingCell(o.node.rowIndex);break;case s.a.KEYCODE_DOWN:case s.a.KEYCODE_UP:t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvDetalleTran);break;default:return!0}},cellEditorFramework:p.a,cellEditorParams:{name:"proNombre",inputClass:"text-uppercase mousetrap"}},{headerName:s.a.TAG_CANTIDAD,field:"detCantidad",width:120,minWidth:120,valueFormatter:this.formatearA2Decimales,cellFocused:function(t){e.gridApi&&e.startEditingCell({rowIndex:t.node.rowIndex,colKey:"detCantidad"})},suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvDetalleTran)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:function(e){return e.data.proCodigoPrincipal},cellClass:"text-right cell-editing p-0",cellClassRules:{"cell-with-errors":function(e){return!t.validarCantidad(e.data)}},cellEditorFramework:u.a,cellEditorParams:{name:"cantidad",maxlength:13,placeholder:"0.00",configAutonumeric:e.configAutonumeric}},{headerName:s.a.TAG_MEDIDA,field:"medDetalle",width:150,minWidth:150,cellClass:"cell-block",valueGetter:function(e){return e.data.medDetalle}}):a.push({headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:120,minWidth:120},{headerName:s.a.TAG_DESCRIPCION,field:"proNombre",width:200,minWidth:200},{headerName:s.a.TAG_CANTIDAD,field:"detCantidad",width:120,minWidth:120,valueFormatter:this.formatearA2Decimales,cellClass:"text-right"},{headerName:s.a.TAG_MEDIDA,field:"medDetalle",width:150,minWidth:150}),o&&a.push({headerName:s.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:"text-center",width:s.a.WIDTH_OPCIONES,minWidth:s.a.WIDTH_OPCIONES,cellRendererFramework:c.a,headerComponentFramework:d.a,cellClassRules:{"cell-block":function(t){return!t.node.rowPinned&&e.accion!==s.a.ACCION_CONSULTAR}},headerComponentParams:{class:s.a.ICON_OPCIONES,tooltip:s.a.TAG_OPCIONES,text:"",enableSorting:!1},pinnedRowCellRenderer:l.a}),a},e.prototype.validarProducto=function(e){return!!e.proCodigoPrincipal},e.prototype.validarCantidad=function(e){var t=e.detCantidad;return t&&t>=.01},e.prototype.formatearFecha=function(e){return new C.DatePipe("en-US").transform(e.value,"yyyy-MM-dd")},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_CREAR:a=t.listaSisPermisoTO.gruCrear;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:case s.a.ACCION_RESTAURAR:a=t.listaSisPermisoTO.gruAnularTransferencias;break;case s.a.ACCION_ELIMINAR:a=t.listaSisPermisoTO.gruEliminarTransferencias;break;case s.a.ACCION_MAYORIZAR:a=t.listaSisPermisoTO.gruMayorizarTransferencias;break;case s.a.ACCION_DESMAYORIZAR:a=t.listaSisPermisoTO.gruDesmayorizarTransferencias;break;case s.a.ACCION_ANULAR:a=t.listaSisPermisoTO.gruAnularTransferencias;break;case s.a.ACCION_IMPRIMIR:a=t.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.listaSisPermisoTO.gruExportar}return o&&!a&&this.mostrarSwalNoPermiso(),a},e.prototype.mostrarSwalNoPermiso=function(){var e={title:s.a.TOAST_INFORMACION,texto:s.a.ERROR_403_TEXTO,type:s.a.SWAL_INFO,confirmButtonText:"<i class='"+s.a.ICON_AGREGAR+"'></i>  "+s.a.LABEL_MAS_INFORMACION,cancelButtonText:s.a.MSJ_ACEPTAR};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&window.open(s.a.ENLACE_MANUAL_USUARIO,"_blank")})},e.prototype.formatearA2Decimales=function(e){return new C.DecimalPipe("en-US").transform(e.value,"1.2-2")},e=f([Object(a.Injectable)({providedIn:"root"}),g("design:paramtypes",[n.a,r.a,i.b,A.a])],e)}()},auvS:function(e,t,o){"use strict";o.d(t,"a",function(){return m});var a=o("CcnG"),i=o("nR5P"),r=o("SZbH"),n=o("z5Y/"),s=o("mwBN"),c=o("gLZI"),l=o("OeYz"),d=o("Ip0R"),p=o("/TJv"),u=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarVentas=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvConsultaVenta",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarVenta(e.extraInfo):a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarVenta=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/insertarInvVentasTO",e,o).then(function(e){e&&e.estadoOperacion===s.a.KEY_EXITO?t.despuesDeInsertarVenta(e):(a.utilService.generarSwal(s.a.VENTA,s.a.SWAL_ERROR,e.operacionMensaje+e.extraInfo),t.cargando=!1,t.activeModal.close())}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarVenta=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarInvVentasTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarVenta(e):(a.utilService.generarSwal(s.a.VENTA,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1,t.activeModal.close(t.venta))}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.contabilizar=function(e,t){var o=this;this.api.post("todocompuWS/inventarioWebController/insertarInvContableVentasTO",e,s.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?t.despuesDeContabilizarVenta(e.operacionMensaje):(o.utilService.generarSwal(s.a.ACCION_CONTABILIZAR+" "+s.a.VENTA,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return o.utilService.handleError(e,o)})},e.prototype.obtenerDatosParaVentas=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerDatosParaVentas",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaVentas(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.asignarNumeroDocumento=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/asignarNumeroDocumento",e,o).then(function(e){e&&e.extraInfo?t.despuesDeAsignarNumeroDocumento(e.extraInfo):a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.validarNumero=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/validarNumero",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarNumero(e.extraInfo):(t.despuesDeValidarNumero(!1),a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION)),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerIva=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getValorAnxPorcentajeIvaTO",e,o).then(function(e){e&&e.extraInfo&&t.despuesDeObtenerIva(e.extraInfo),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.validarNumeroAutorizacion=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getNumeroAutorizacion",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarNumeroAutorizacion(e.extraInfo):(t.despuesDeValidarNumeroAutorizacion(null),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.consultarVenta=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/consultarVenta",e,o).then(function(e){e&&e.extraInfo?t.despuesDeConsultarVenta(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.desmayorizarVenta=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/desmayorizarVenta",e,o).then(function(e){e&&e.extraInfo?t.despuesDeDesmayorizarVenta(e):(a.utilService.generarSwal(s.a.ACCION_DESMAYORIZAR+" "+s.a.VENTA,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_CREAR:a=t.listaSisPermisoTO.gruCrear;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:case s.a.ACCION_RESTAURAR:a=t.listaSisPermisoTO.gruAnularVentas;break;case s.a.ACCION_ELIMINAR:a=t.listaSisPermisoTO.gruEliminarVentas;break;case s.a.ACCION_MAYORIZAR:a=t.listaSisPermisoTO.gruMayorizarVentas;break;case s.a.ACCION_DESMAYORIZAR:a=t.listaSisPermisoTO.gruDesmayorizarVentas;break;case s.a.ACCION_ANULAR:a=t.listaSisPermisoTO.gruAnularVentas;break;case s.a.ACCION_IMPRIMIR:a=t.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.listaSisPermisoTO.gruExportar}return o&&!a&&this.mostrarSwalNoPermiso(),a},e.prototype.mostrarSwalNoPermiso=function(){var e={title:s.a.TOAST_INFORMACION,texto:s.a.ERROR_403_TEXTO,type:s.a.SWAL_INFO,confirmButtonText:"<i class='"+s.a.ICON_AGREGAR+"'></i>  "+s.a.LABEL_MAS_INFORMACION,cancelButtonText:s.a.MSJ_ACEPTAR};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&window.open(s.a.ENLACE_MANUAL_USUARIO,"_blank")})},e.prototype.obtenerCampoDesdeReferencia=function(e){switch(e){case"eprecio01":return"proPrecio1";case"eprecio02":return"proPrecio2";case"eprecio03":return"proPrecio3";case"eprecio04":return"proPrecio4";case"eprecio05":return"proPrecio5";case"eprecio06":return"proPrecio6";case"eprecio07":return"proPrecio7";case"eprecio08":return"proPrecio8";case"eprecio09":return"proPrecio9";case"eprecio10":return"proPrecio10";case"eprecio11":return"proPrecio11";case"eprecio12":return"proPrecio12";case"eprecio13":return"proPrecio13";case"eprecio14":return"proPrecio14";case"eprecio15":return"proPrecio15";case"eprecio16":return"proPrecio16";case"ecosto01":return"proCostoReferencial1";case"ecosto02":return"proCostoReferencial2";case"ecosto03":return"proCostoReferencial3";case"ecosto04":return"proCostoReferencial4";case"ecosto05":return"proCostoReferencial5"}return null},e.prototype.obtenerTituloFormulario=function(e){switch(e){case"00":return s.a.INVENTARIO_VENTA_NOTA_ENTREGA;case"04":return s.a.INVENTARIO_VENTA_NOTA_CREDITO;case"05":return s.a.INVENTARIO_VENTA_NOTA_DEBITO;case"18":return s.a.VENTA}return null},e.prototype.generarColumnasDetalle=function(e){var t=this,o=[];return e.puedeEditar?(o.push({headerName:s.a.TAG_MOVER_FILA,field:"",headerClass:"cell-header-center pr-0",cellClass:"text-center cell-block",width:35,minWidth:35,rowDrag:!0,headerComponentFramework:c.a,headerComponentParams:{class:s.a.ICON_MOVER_FILA,tooltip:s.a.TAG_MOVER_FILA,enableSorting:!1},valueGetter:function(){return""}},{headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:120,minWidth:120,cellClass:"cell-editing",cellClassRules:{"cell-with-errors":function(e){return!e.data.estadoProducto||!t.validarProducto(e.data)}},suppressKeyboardEvent:function(o){switch(o.event.keyCode){case s.a.KEYCODE_ENTER:case s.a.KEYCODE_TAB:if(e.buscarProducto(o),o.editing)return!0;break;case s.a.KEYCODE_DOWN:case s.a.KEYCODE_UP:if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvVentasDetalleTO);break;default:return!0}},editable:!0,valueGetter:function(e){return e.data.proCodigoPrincipal},cellEditorFramework:l.a,cellEditorParams:{name:"proCodigoPrincipal",maxlength:50,inputClass:"text-uppercase",placeholder:""}},{headerName:s.a.TAG_DESCRIPCION,field:"proNombre",width:200,minWidth:200,cellClass:"cell-block mousetrap",valueGetter:function(e){return e.data.proNombre},editable:function(t){return t.data.proCodigoPrincipal&&e.caja.permisoCambiarPrecio&&!t.data.catPrecioFijo&&t.data.estadoProducto},suppressKeyboardEvent:function(o){switch(o.event.keyCode){case s.a.KEYCODE_TAB:e.cantidadFocusAndEditingCell(o.node.rowIndex);break;case s.a.KEYCODE_DOWN:case s.a.KEYCODE_UP:t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvVentasDetalleTO);break;default:return!0}},cellEditorFramework:l.a,cellEditorParams:{name:"proNombre",inputClass:"text-uppercase mousetrap"}},{headerName:s.a.TAG_UNIDAD_MEDIDA,width:150,minWidth:150,cellClass:"cell-block",valueGetter:function(e){return e.data.proMedida},headerComponentFramework:c.a,headerComponentParams:{tooltip:s.a.TAG_UNIDAD_MEDIDA,text:s.a.TAG_UN_MEDIDA,enableSorting:!0}},{headerName:s.a.TAG_CANTIDAD,field:"detCantidad",width:120,minWidth:120,suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvVentasDetalleTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:function(e){return e.data.proCodigoPrincipal},cellClass:"text-right cell-editing p-0",cellClassRules:{"cell-with-errors":function(e){return e.data.proCodigoPrincipal&&!t.validarCantidad(e.data)}},cellRenderer:"labelNumeric",cellRendererParams:function(e){return{title:s.a.MSJ_ACCION_CANTIDADES,clase:s.a.ICON_CALCULADORA,name:"cantidad",id:"cantidadRender",habilitarBtn:!!e.data.proCodigoPrincipal}},cellEditor:"inputNumeric",cellEditorParams:{name:"cantidad",idRender:"cantidadRender",id:"detCantidad",maxlength:13,placeholder:"0.00",configAutonumeric:e.configAutonumeric,title:s.a.MSJ_ACCION_CANTIDADES,clase:s.a.ICON_CALCULADORA}},{headerName:s.a.TAG_PRECIO,field:"detPrecio",width:120,minWidth:120,suppressKeyboardEvent:function(o){if(e.agregarFilaAlFinal(o),o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listaInvVentasDetalleTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:function(t){return t.data.proCodigoPrincipal&&(e.caja.permisoCambiarPrecio||!t.data.catPrecioFijo||!t.data.estadoPrecio)&&t.data.estadoProducto},cellClass:"text-right cell-editing p-0",cellClassRules:{"cell-with-errors":function(e){return e.data.proCodigoPrincipal&&e.data.detCantidad&&!t.validarPrecio(e.data)}},cellRenderer:"labelNumeric",cellRendererParams:function(t){return{title:s.a.MSJ_ACCION_CANTIDADES,clase:s.a.ICON_CALCULADORA,name:"precio",id:"precioRender",habilitarBtn:!(!(t.data.proCodigoPrincipal&&e&&e.accion)||e.accion!==s.a.ACCION_CREAR&&e.accion!==s.a.ACCION_MAYORIZAR)}},cellEditor:"inputNumeric",cellEditorParams:{name:"precio",idRender:"precioRender",id:"detPrecio",maxlength:13,placeholder:"0.00",configAutonumeric:e.configAutonumeric,title:s.a.MSJ_ACCION_PRECIOS,clase:s.a.ICON_CALCULADORA}}),o.push({headerName:s.a.TAG_ESTADO,field:"proEstadoIva",width:120,minWidth:120,cellClass:"cell-block",valueGetter:function(t){return"GRAVA"===t.data.proEstadoIva?e.invVentasTO.vtaIvaVigente+"%":"0%"}},{headerName:s.a.TAG_TOTAL,cellClass:"text-sm-right cell-block",width:120,minWidth:120,valueFormatter:this.formatearA2Decimales,valueGetter:function(e){return e.data.total}},this.utilService.getColumnaOpciones())):(o.push({headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:120,minWidth:120},{headerName:s.a.TAG_DESCRIPCION,field:"proNombre",width:200,minWidth:200},{headerName:s.a.TAG_UNIDAD_MEDIDA,field:"proMedida",width:150,minWidth:150},{headerName:s.a.TAG_CANTIDAD,field:"detCantidad",width:120,minWidth:120,cellClass:"text-right p-0",cellRenderer:"labelNumeric",cellRendererParams:function(e){return{title:s.a.MSJ_ACCION_CANTIDADES,clase:s.a.ICON_CALCULADORA,name:"cantidad",id:"cantidadRender",habilitarBtn:!!e.data.proCodigoPrincipal}}},{headerName:s.a.TAG_PRECIO,field:"detPrecio",width:120,minWidth:120,cellClass:"text-right p-0",cellRenderer:"labelNumeric",cellRendererParams:function(e){return{title:s.a.MSJ_ACCION_CANTIDADES,clase:s.a.ICON_CALCULADORA,name:"precio",id:"precioRender",habilitarBtn:!!e.data.proCodigoPrincipal}}}),o.push({headerName:s.a.TAG_ESTADO,field:"proEstadoIva",width:120,minWidth:120,valueGetter:function(t){return"GRAVA"===t.data.proEstadoIva?e.invVentasTO.vtaIvaVigente+"%":"0%"}},{headerName:s.a.TAG_PARCIAL,cellClass:"text-right",width:120,minWidth:120,valueFormatter:this.formatearA2Decimales,valueGetter:function(e){return e.data.total}},{headerName:s.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:s.a.WIDTH_OPCIONES,minWidth:s.a.WIDTH_OPCIONES,cellRendererFramework:p.a,cellClass:"text-center",cellRendererParams:function(e){return e.data.proCodigoPrincipal?{icono:s.a.ICON_INFO_CIRCULO,tooltip:s.a.MSJ_VER_DATOS,accion:s.a.ACCION_VER_DETALLE_ITEM_VENTA}:{icono:null,tooltip:null,accion:null}},headerComponentFramework:c.a,headerComponentParams:{class:s.a.ICON_OPCIONES,tooltip:s.a.TAG_OPCIONES,text:""}})),o},e.prototype.formatearA2Decimales=function(e){var t=e.value?e.value.toString().replace(/,/gi,""):0;return new d.DecimalPipe("en-US").transform(t,"1.2-2")},e.prototype.validarCantidad=function(e){var t=e.detCantidad?e.detCantidad.toString().replace(/,/gi,""):0;return t&&t>=.01},e.prototype.validarProducto=function(e){return!!e.proCodigoPrincipal},e.prototype.validarPrecio=function(e){var t=e.detPrecio?e.detPrecio.toString().replace(/,/gi,""):0;return t&&t>=.01},e.prototype.validarInformacionAdicional=function(e){for(var t=!0,o=0;o<e.length;o++){if(!!(!e[o].valor||!e[o].clave)){t=!1;break}}return t},e=u([Object(a.Injectable)({providedIn:"root"}),h("design:paramtypes",[n.a,r.b,i.a])],e)}()},avzI:function(e,t){e.exports='<div class="card mb-1">\r\n  <div class="card-header">\r\n    <b> {{constantes.INVENTARIO_FORMA_PAGO}}</b>\r\n    <div class="card-header-actions">\r\n      <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseFP"\r\n        aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n        <i class="fa fa-minus"></i>\r\n      </a>\r\n    </div>\r\n  </div>\r\n  <div class="collapse show" id="collapseFP">\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%;" [gridAutoHeight]="true" class="ag-theme-balham" [rowData]="listadoDeFormasDePago"\r\n      [columnDefs]="columnDefsSelected" [enableSorting]="true" [rowSelection]="rowSelection" [enableColResize]="true"\r\n      [components]="components" [context]="context" [frameworkComponents]="frameworkComponents" [animateRows]="true"\r\n      [suppressClickEdit]=true (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n      (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()" (contextmenu)="$event.preventDefault()"\r\n      (cellContextMenu)="mostrarContextMenu($event.data,$event.rowIndex, $event.event)" (cellEditingStopped)="alCambiarValorDeCelda($event)"\r\n      [stopEditingWhenGridLosesFocus]="true" [overlayNoRowsTemplate]="noData" [suppressDragLeaveHidesColumns]="true"\r\n      (gridSizeChanged)="redimensionarColumnas()">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <div class="card-footer">\r\n    <div class="card-header-actions mr-3">\r\n      <h2>{{constantes.TAG_TOTAL}} : {{totales.forma | number:\'1.2-2\'}}</h2>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>'},awBf:function(e,t,o){"use strict";o.d(t,"a",function(){return _});var a=o("CcnG"),i=o("VO10"),r=o("ZYCi"),n=o("z5Y/"),s=o("SZbH"),c=o("EF/R"),l=o("CEfs"),d=o("nR5P"),p=o("mwBN"),u=o("RDZc"),h=o("hyxj"),m=o("nxr/"),C=o("K/pM"),v=o("yccp"),A=o("8fiX"),f=o("eUd/"),g=o("EnEm"),b=o("Ungd"),O=o("zkCp"),S=o("madF"),I=o("gLZI"),E=o("+JJ7"),R=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},T=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,o,a,r,n,s,c,l,d,u){this.auth=e,this.activeModal=t,this.route=o,this.api=a,this.toastr=r,this.filasService=n,this.sectorService=s,this.bodegaService=c,this.atajoService=l,this.archivoService=d,this.utilService=u,this.listaResultado=[],this.listaSectores=[],this.objetoSeleccionado=new i.a,this.invBodegaTO=new C.a,this.sectorSeleccionado=new m.a,this.listaEmpresas=[],this.constantes={},this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.classIcon=p.a.ICON_FILTRAR,this.cargando=!1,this.activar=!1,this.isScreamMd=!0,this.filasTiempo=new g.a,this.filtroGlobal="",this.mostrarNuevo=!0,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.vistaFormulario=!1,this.parametrosFormulario={}}return e.prototype.ngOnInit=function(){this.constantes=p.a,this.listaEmpresas=this.route.snapshot.data.bodegaInv,this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSeleccionada(),this.generarAtajosTeclado(),this.isModal&&this.listaBodegasModalTO(),this.iniciarAgGrid()},e.prototype.listaBodegasTO=function(e){this.cargando=!0,this.filtroGlobal="",this.filasTiempo.iniciarContador();var t={empresa:this.empresaSeleccionada.empCodigo,inactivo:e};this.bodegaService.listarInvListaBodegasTO(t,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.listaBodegasModalTO=function(){this.filtroGlobal="",this.cargando=!0,this.bodegaService.listarInvListaBodegasTO(this.parametrosBusqueda,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvListaBodegasTO=function(e){this.filasTiempo.finalizarContador(),this.listaResultado=e,this.cargando=!1,this.filtrarRapido(),this.isModal&&1==e.length&&this.activeModal.close(e[0])},e.prototype.listarSectores=function(){this.cargando=!0;var e={empresa:p.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(e,this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSectores=function(e){var t=this;this.listaSectores=e||[],this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado?this.listaSectores.find(function(e){return e.secCodigo===t.sectorSeleccionado.secCodigo}):this.listarSectores[0]:this.sectorSeleccionado=null,this.cargando=!1},e.prototype.operacionesBodega=function(e){switch(e){case p.a.ACCION_ELIMINAR:this.bodegaService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)&&(this.obtenerInvBodegaTO(this.objetoSeleccionado),this.accion=p.a.ACCION_ELIMINAR,this.tituloForm=p.a.TITULO_FILTROS,this.classIcon=p.a.ICON_FILTRAR,this.mostrarNuevo=!0);break;case p.a.ACCION_CREAR:this.bodegaService.verificarPermiso(p.a.ACCION_CREAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CREAR,invBodegaTO:new C.a,listaSectores:this.listaSectores});break;case p.a.ACCION_CONSULTAR:this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_CONSULTAR,invBodegaTO:this.objetoSeleccionado,listaSectores:this.listaSectores};break;case p.a.ACCION_EDITAR:this.bodegaService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.vistaFormulario=!0,this.parametrosFormulario={accion:p.a.ACCION_EDITAR,invBodegaTO:this.objetoSeleccionado,listaSectores:this.listaSectores});break;case p.a.ACCION_EDITAR_ESTADO:this.bodegaService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)&&(this.obtenerInvBodegaTO(this.objetoSeleccionado),this.accion=p.a.ACCION_EDITAR_ESTADO,this.tituloForm=p.a.TITULO_FILTROS,this.classIcon=p.a.ICON_FILTRAR,this.mostrarNuevo=!0)}},e.prototype.setearValoresAObjetoInvBodegaTO=function(e){e.empCodigo=p.a.KEY_EMPRESA_SELECT,e.secEmpresa=p.a.KEY_EMPRESA_SELECT,e.detEmpresa=p.a.KEY_EMPRESA_SELECT,e.usrEmpresa=p.a.KEY_EMPRESA_SELECT,e.detUsuario=this.auth.getCodigoUser(),e.usrInsertaBodega=this.auth.getCodigoUser(),e.secCodigo=this.sectorSeleccionado.secCodigo},e.prototype.obtenerInvBodegaTO=function(e){this.cargando=!0,this.bodegaService.getBodegaTO({empresa:p.a.KEY_EMPRESA_SELECT,codigo:e.bodCodigo},this,p.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeGetBodegaTO=function(e){this.invBodegaTO=e,this.cargando=!1;var t=this.listaSectores.filter(function(t){return t.secCodigo===e.secCodigo});this.sectorSeleccionado=t.length>0?t[0]:null,this.accion===p.a.ACCION_ELIMINAR&&this.eliminarBodega(),this.accion===p.a.ACCION_EDITAR_ESTADO&&this.actualizarEstadoBodega()},e.prototype.convertirInvBodegaToAInvListaBodegasTO=function(e){var t=new i.a(e);return t.codigoCP=e.secCodigo,t},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.insertarBodega=function(e){var t=this;if(this.bodegaService.verificarPermiso(p.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=JSON.parse(JSON.stringify(this.invBodegaTO));this.setearValoresAObjetoInvBodegaTO(a),this.api.post("todocompuWS/inventarioWebController/insertarBodegaTO",{invBodegaTO:a},p.a.KEY_EMPRESA_SELECT).then(function(e){t.cargando=!1,e&&e.extraInfo?(t.refrescarTabla(t.convertirInvBodegaToAInvListaBodegasTO(a),"I"),t.toastr.success(e.operacionMensaje,p.a.TAG_AVISO),t.resetear()):t.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO)}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.actualizarBodega=function(e){var t=this;if(this.bodegaService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=JSON.parse(JSON.stringify(this.invBodegaTO));this.setearValoresAObjetoInvBodegaTO(a),this.api.post("todocompuWS/inventarioWebController/modificarBodegaTO",{invBodegaTO:a},p.a.KEY_EMPRESA_SELECT).then(function(e){t.cargando=!1,e&&e.extraInfo?(t.refrescarTabla(t.convertirInvBodegaToAInvListaBodegasTO(a),"U"),t.toastr.success(e.operacionMensaje,p.a.TAG_AVISO),t.resetear()):t.toastr.warning(e.operacionMensaje,p.a.TAG_AVISO)}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(p.a.MSJ_CAMPOS_INVALIDOS,p.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.actualizarEstadoBodega=function(){var e=this;if(this.bodegaService.verificarPermiso(p.a.ACCION_EDITAR,this,!0)){var t=JSON.parse(JSON.stringify(this.invBodegaTO));this.setearValoresAObjetoInvBodegaTO(t);var o={title:t.bodInactiva?p.a.MSJ_TITULO_ACTIVAR:p.a.MSJ_TITULO_INACTIVAR,texto:(t.bodInactiva?p.a.MSJ_PREGUNTA_ACTIVAR:p.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Bodega: "+t.bodNombre,type:p.a.SWAL_QUESTION,confirmButtonText:p.a.MSJ_SI_ACEPTAR,cancelButtonText:p.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(e.cargando=!0,t.bodInactiva=!t.bodInactiva,e.api.post("todocompuWS/inventarioWebController/modificarEstadoBodegaTO",{invBodegaTO:t,estado:t.bodInactiva},p.a.KEY_EMPRESA_SELECT).then(function(o){e.cargando=!1,o&&o.extraInfo?(e.refrescarTabla(e.convertirInvBodegaToAInvListaBodegasTO(t),"U"),e.toastr.success(o.operacionMensaje,p.a.TAG_AVISO),e.resetear()):e.toastr.warning(o.operacionMensaje,p.a.TAG_AVISO)}).catch(function(t){return e.utilService.handleError(t,e)})):e.resetear()})}else this.resetear()},e.prototype.eliminarBodega=function(){var e=this;if(this.bodegaService.verificarPermiso(p.a.ACCION_ELIMINAR,this,!0)){var t=JSON.parse(JSON.stringify(this.invBodegaTO)),o={title:p.a.MSJ_TITULO_ELIMINAR,texto:p.a.MSJ_PREGUNTA_ELIMINAR+"<br/>"+p.a.TAG_BODEGA+": "+this.invBodegaTO.bodNombre,type:p.a.SWAL_WARNING,confirmButtonText:p.a.MSJ_SI_ELIMINAR,cancelButtonText:p.a.MSJ_NO_CANCELAR,confirmButtonColor:p.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){o?(e.cargando=!0,e.api.post("todocompuWS/inventarioWebController/eliminarBodegaTO",{invBodegaTO:t},p.a.KEY_EMPRESA_SELECT).then(function(t){e.cargando=!1,t&&t.extraInfo?(e.refrescarTabla(e.objetoSeleccionado,"D"),e.toastr.success(t.operacionMensaje,p.a.TAG_AVISO)):e.toastr.warning(t.operacionMensaje,p.a.TAG_AVISO),e.resetear()}).catch(function(t){return e.utilService.handleError(t,e)})):e.resetear()})}else this.resetear()},e.prototype.imprimirBodegas=function(){var e=this;if(this.utilService.verificarPermiso(p.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={ListadoBodegas:this.listaResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/imprimirReporteBodegas",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoBodegas_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(p.a.MSJ_ERROR_IMPRIMIR,p.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarBodegas=function(){var e=this;if(this.utilService.verificarPermiso(p.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={ListadoBodegas:this.listaResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteBodegas",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoBodegas_"):e.toastr.warning(p.a.MSJ_ERROR_EXPORTAR,p.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.cambiarEmpresaSeleccionada=function(){p.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listaResultado=[],this.sectorSeleccionado=null,this.listarSectores(),this.filasService.actualizarFilas("0","0")},e.prototype.resetear=function(){this.accion=null,this.tituloForm=p.a.TITULO_FILTROS,this.classIcon=p.a.ICON_FILTRAR,this.actualizarFilas(),this.mostrarNuevo=!0},e.prototype.generarOpciones=function(){var e=this,t=this.empresaSeleccionada.listaSisPermisoTO.gruModificar,o=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&!this.objetoSeleccionado.bodInactiva,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.objetoSeleccionado.bodInactiva,i=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opciones=[{label:p.a.ACCION_CONSULTAR,icon:p.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.operacionesBodega(p.a.ACCION_CONSULTAR)}},{label:p.a.ACCION_EDITAR,icon:p.a.ICON_EDITAR,disabled:!t,command:function(){return t?e.operacionesBodega(p.a.ACCION_EDITAR):null}},{label:p.a.ACCION_ELIMINAR,icon:p.a.ICON_ELIMINAR,disabled:!i,command:function(){return i?e.operacionesBodega(p.a.ACCION_ELIMINAR):null}},{label:p.a.ACCION_ACTIVAR,icon:p.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?e.operacionesBodega(p.a.ACCION_EDITAR_ESTADO):null}},{label:p.a.ACCION_INACTIVAR,icon:p.a.ICON_INACTIVAR,disabled:!o,command:function(){return o?e.operacionesBodega(p.a.ACCION_EDITAR_ESTADO):null}}]},e.prototype.generarAtajosTeclado=function(){var e=this;this.atajoService.add(new v.Hotkey(p.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarBodega");return e&&e.click(),!1})),this.atajoService.add(new v.Hotkey(p.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new v.Hotkey(p.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new v.Hotkey(p.a.ATAJO_CONSULTAR,function(t){return e.listaResultado.length>0&&e.operacionesBodega(p.a.ACCION_CONSULTAR),!1})),this.atajoService.add(new v.Hotkey(p.a.ATAJO_EDITAR,function(t){return e.listaResultado.length>0&&e.operacionesBodega(p.a.ACCION_EDITAR),!1})),this.atajoService.add(new v.Hotkey(p.a.ATAJO_ELIMINAR,function(t){return e.listaResultado.length>0&&e.operacionesBodega(p.a.ACCION_ELIMINAR),!1})),this.atajoService.add(new v.Hotkey(p.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new v.Hotkey(p.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirBodega");return t&&t.click(),!1})),this.atajoService.add(new v.Hotkey(p.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarBodega");return t&&t.click(),!1})),this.atajoService.add(new v.Hotkey(p.a.ATAJO_CANCELAR,function(e){var t=document.getElementById("btnCancelarBodega");return t&&t.click(),!1}))},e.prototype.ejecutarAccion=function(e){switch(e.accion){case p.a.ACCION_CREAR:this.refrescarTabla(this.convertirInvBodegaToAInvListaBodegasTO(e.bodegaCopia),"I");break;case p.a.ACCION_EDITAR:this.refrescarTabla(this.convertirInvBodegaToAInvListaBodegasTO(e.bodegaCopia),"U")}},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listaResultado.length>0)(o=this.listaResultado.slice()).unshift(e),this.listaResultado=o,this.seleccionarFila(0);break;case"U":var o,a=this.listaResultado.findIndex(function(t){return t.bodCodigo===e.bodCodigo});(o=this.listaResultado.slice())[a]=e,this.listaResultado=o,this.objetoSeleccionado=this.listaResultado[a],this.seleccionarFila(a);break;case"D":a=this.listaResultado.findIndex(function(t){return t.bodCodigo===e.bodCodigo});this.listaResultado=this.listaResultado.filter(function(e,t){return t!=a}),this.listaResultado.length>0&&this.seleccionarFila(0===a?0:a-1)}this.vistaFormulario=!1},e.prototype.onResize=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576)},e.prototype.cancelar=function(e){this.vistaFormulario=!1,this.activar=!1},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.bodegaService.generarColumnas(this.isModal),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:S.a,toolTip:I.a,inputEstado:E.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarFila(0)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.filaSeleccionar=function(){this.enviarItem(this.objetoSeleccionado)},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},R([Object(a.Input)(),T("design:type",Boolean)],e.prototype,"isModal",void 0),R([Object(a.Input)(),T("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),R([Object(a.ViewChild)("excelDownload"),T("design:type",Object)],e.prototype,"excelDownload",void 0),R([Object(a.Input)(),T("design:type",A.a)],e.prototype,"empresaSeleccionada",void 0),R([Object(a.ViewChild)("menuOpciones"),T("design:type",O.ContextMenu)],e.prototype,"menuOpciones",void 0),R([Object(a.HostListener)("window:resize",["$event"]),T("design:type",Function),T("design:paramtypes",[]),T("design:returntype",void 0)],e.prototype,"onResize",null),e=R([Object(a.Component)({selector:"app-bodega",template:o("xTDQ"),styles:[o("cufs")]}),T("design:paramtypes",[c.a,f.a,r.ActivatedRoute,n.a,s.b,l.a,h.a,u.a,v.HotkeysService,b.a,d.a])],e)}()},ax4V:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.listRegistradores=[],this.listAprobadores=[],this.listEjecutores=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.listRegistradores=e.listRegistradores?e.listRegistradores:this.listRegistradores,this.listAprobadores=e.listAprobadores?e.listAprobadores:this.listRegistradores,this.listEjecutores=e.listEjecutores?e.listEjecutores:this.listEjecutores},e}()},bPTo:function(e,t,o){"use strict";o.d(t,"a",function(){return C});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("EF/R"),c=o("mwBN"),l=o("fkj5"),d=o("ZJV5"),p=o("yccp"),u=o("Ungd"),h=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(){function e(e,t,o,a,i,r){this.api=e,this.toastr=t,this.utilService=o,this.authService=a,this.atajoService=i,this.archivoService=r}return e.prototype.listarInvPedidosOrdenCompraMotivoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/getListaInvPedidosOrdenCompraMotivoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvPedidosOrdenCompraMotivoTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerInvPedidosOrdenCompraMotivo=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/getInvPedidosOrdenCompraMotivo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerInvPedidosOrdenCompraMotivo(e.extraInfo):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.eliminarInvPedidosOrdenCompraMotivo=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/eliminarInvPedidosOrdenCompraMotivo",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),t.refrescarTabla(t.objetoSeleccionado,"D")):a.toastr.warning(e.operacionMensaje),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.guardarInvPedidosOrdenCompraMotivo=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/insertarConfiguracionOrdenCompra",e,o).then(function(e){if(e&&e.extraInfo){t.resetearFormulario();var o=a.convertirInvPedidosOrdenCompraMotivoTO(e.extraInfo);t.refrescarTabla(o,"I"),a.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO)}else a.toastr.warning(e.operacionMensaje);t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.actualizarInvPedidosOrdenCompraMotivo=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/modificarConfiguracionOrdenCompra",e,o).then(function(e){if(e&&e.extraInfo){t.resetearFormulario();var o=a.convertirInvPedidosOrdenCompraMotivoTO(e.extraInfo);t.refrescarTabla(o,"U"),a.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO)}else a.toastr.warning(e.operacionMensaje);t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.actualizarEstadoInvPedidosOrdenCompraMotivo=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/modificarEstadoInvPedidosOrdenCompraMotivo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeActualizarEstadoInvPedidosOrdenCompraMotivo(e):(a.toastr.warning(e.operacionMensaje,c.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.imprimirInvPedidosOrdenCompraMotivo=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosOrdenCompraMotivo",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listaMotivoOrdenCompra"+a.utilService.obtenerHorayFechaActual()+".pdf",e):a.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarInvPedidosOrdenCompraMotivo=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidosOrdenCompraMotivo",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listaMotivoOrdenCompra_"):a.toastr.warning(c.a.MSJ_NO_DATA),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.formatearInvPedidosOrdenCompraMotivo=function(e,t){var o=new l.a(e);return t.accion===c.a.ACCION_CREAR&&(o.invPedidosOrdenCompraMotivoPK.ocmEmpresa=t.empresaSeleccionada.empCodigo,o.invPedidosOrdenCompraMotivoPK.ocmSector=t.sectorSeleccionado.secCodigo,o.usrCodigo=this.authService.getCodigoUser()),o},e.prototype.convertirInvPedidosOrdenCompraMotivoTO=function(e){var t=new d.a;return t.ocmCodigo=e.invPedidosOrdenCompraMotivoPK.ocmCodigo,t.ocmDetalle=e.ocmDetalle,t.ocmEmpresa=e.invPedidosOrdenCompraMotivoPK.ocmEmpresa,t.ocmSector=e.invPedidosOrdenCompraMotivoPK.ocmSector,t.ocmNotificarProveedor=e.ocmNotificarProveedor,t.ocmCostoFijo=e.ocmCostoFijo,t},e.prototype.generarColumnasMotivoPedidoOrdenCompra=function(){return[{headerName:c.a.TAG_CODIGO,field:"ocmCodigo",width:250,minWidth:100},{headerName:c.a.TAG_DETALLE,field:"ocmDetalle",width:400,minWidth:200},{headerName:c.a.TAG_NOTIFICAR_PROVEEDOR,field:"ocmNotificarProveedor",width:200,minWidth:150,cellRenderer:"inputEstado",cellClass:"text-center"},{headerName:c.a.TAG_COSTO_FIJO,field:"ocmCostoFijo",width:100,minWidth:100,cellRenderer:"inputEstado",cellClass:"text-center"},{headerName:c.a.TAG_INACTIVO,field:"ocmInactivo",width:100,minWidth:100,cellRenderer:"inputEstado",cellClass:"text-center"},this.utilService.getColumnaOpciones()]},e.prototype.generarColumnasAprobador=function(e){var t=[{headerName:c.a.TAG_CODIGO,width:110,minWidth:110,valueGetter:function(e){return e.data.usuario.usrCodigo}},{headerName:c.a.TAG_NOMBRE,width:200,minWidth:200,valueGetter:function(e){return e.data.usuario.usrNombre+" "+e.data.usuario.usrApellido}}];return e.accion!==c.a.ACCION_CONSULTAR&&t.push(this.utilService.getColumnaEliminar(null,e)),t},e.prototype.inicializarAtajos=function(e){this.atajoService.add(new p.Hotkey(c.a.ATAJO_AYUDA,function(e){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new p.Hotkey(c.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivarMotivoOC");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(c.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscarMotivoOC");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(c.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirMotivoOC");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(c.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarMotivoOC");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(c.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevoMotivoOC");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(c.a.ATAJO_EDITAR,function(t){return!e.vistaFormulario&&e.objetoSeleccionado&&e.editarOrdenCompraMotivo(e.objetoSeleccionado),!1})),this.atajoService.add(new p.Hotkey(c.a.ATAJO_ELIMINAR,function(t){return!e.vistaFormulario&&e.objetoSeleccionado&&e.eliminarOrdenCompraMotivo(e.objetoSeleccionado),!1})),this.atajoService.add(new p.Hotkey(c.a.ATAJO_GUARDAR,function(t){if(e.vistaFormulario){var o=document.getElementById("btnGuardarMotivoOC");return o&&o.click(),!1}})),this.atajoService.add(new p.Hotkey(c.a.ATAJO_CANCELAR,function(t){if(e.vistaFormulario){var o=document.getElementById("btnCancelarMotivoOC");return o&&o.click(),!1}}))},e=h([Object(a.Injectable)({providedIn:"root"}),m("design:paramtypes",[i.a,r.b,n.a,s.a,p.HotkeysService,u.a])],e)}()},bctH:function(e,t){e.exports=""},bi7P:function(e,t){e.exports=""},bioR:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.empCodigo=null,this.perCodigo=null,this.motCodigo=null,this.compNumero=null,this.compSustentotributario=null,this.compAutorizacion=null,this.compEmision=null,this.compCaduca=null,this.compBase0=0,this.compBaseimponible=0,this.compBasenoobjetoiva=0,this.compMontoice=0,this.compMontoiva=0,this.compBaseivabienes=0,this.compBaseivaservicios=0,this.compBaseivaserviciosprofesionales=0,this.compPorcentajebienes=0,this.compPorcentajeservicios=0,this.compPorcentajeserviciosprofesionales=0,this.compValorbienes=0,this.compValorservicios=0,this.compValorserviciosprofesionales=0,this.compRetencionNumero=null,this.compRetencionClaveAcceso=null,this.compRetencionAutorizacion=null,this.compRetencionFechaEmision=null,this.compModificadoDocumentoTipo=null,this.compModificadoDocumentoNumero=null,this.compModificadoAutorizacion=null,this.valorRetencion=0,this.retImpreso=!1,this.retEntregado=!1,this.retElectronica=!1,this.retAmbienteProduccion=!1,this.retMostrarDialogoImpresion=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.empCodigo=e.empCodigo?e.empCodigo:this.empCodigo,this.perCodigo=e.perCodigo?e.perCodigo:this.perCodigo,this.motCodigo=e.motCodigo?e.motCodigo:this.motCodigo,this.compNumero=e.compNumero?e.compNumero:this.compNumero,this.compSustentotributario=e.compSustentotributario?e.compSustentotributario:this.compSustentotributario,this.compAutorizacion=e.compAutorizacion?e.compAutorizacion:this.compAutorizacion,this.compEmision=e.compEmision?e.compEmision:this.compEmision,this.compCaduca=e.compCaduca?e.compCaduca:this.compCaduca,this.compBase0=e.compBase0?e.compBase0:this.compBase0,this.compBaseimponible=e.compBaseimponible?e.compBaseimponible:this.compBaseimponible,this.compBasenoobjetoiva=e.compBasenoobjetoiva?e.compBasenoobjetoiva:this.compBasenoobjetoiva,this.compMontoice=e.compMontoice?e.compMontoice:this.compMontoice,this.compMontoiva=e.compMontoiva?e.compMontoiva:this.compMontoiva,this.compBaseivabienes=e.compBaseivabienes?e.compBaseivabienes:this.compBaseivabienes,this.compBaseivaservicios=e.compBaseivaservicios?e.compBaseivaservicios:this.compBaseivaservicios,this.compBaseivaserviciosprofesionales=e.compBaseivaserviciosprofesionales?e.compBaseivaserviciosprofesionales:this.compBaseivaserviciosprofesionales,this.compPorcentajebienes=e.compPorcentajebienes?e.compPorcentajebienes:this.compPorcentajebienes,this.compPorcentajeservicios=e.compPorcentajeservicios?e.compPorcentajeservicios:this.compPorcentajeservicios,this.compPorcentajeserviciosprofesionales=e.compPorcentajeserviciosprofesionales?e.compPorcentajeserviciosprofesionales:this.compPorcentajeserviciosprofesionales,this.compValorbienes=e.compValorbienes?e.compValorbienes:this.compValorbienes,this.compValorservicios=e.compValorservicios?e.compValorservicios:this.compValorservicios,this.compValorserviciosprofesionales=e.compValorserviciosprofesionales?e.compValorserviciosprofesionales:this.compValorserviciosprofesionales,this.compRetencionNumero=e.compRetencionNumero?e.compRetencionNumero:this.compRetencionNumero,this.compRetencionClaveAcceso=e.compRetencionClaveAcceso?e.compRetencionClaveAcceso:this.compRetencionClaveAcceso,this.compRetencionAutorizacion=e.compRetencionAutorizacion?e.compRetencionAutorizacion:this.compRetencionAutorizacion,this.compModificadoDocumentoTipo=e.compModificadoDocumentoTipo?e.compModificadoDocumentoTipo:this.compModificadoDocumentoTipo,this.compModificadoDocumentoNumero=e.compModificadoDocumentoNumero?e.compModificadoDocumentoNumero:this.compModificadoDocumentoNumero,this.compModificadoAutorizacion=e.compModificadoAutorizacion?e.compModificadoAutorizacion:this.compModificadoAutorizacion,this.valorRetencion=e.valorRetencion?e.valorRetencion:this.valorRetencion,this.retImpreso=e.retImpreso?e.retImpreso:this.retImpreso,this.retEntregado=e.retEntregado?e.retEntregado:this.retEntregado,this.retElectronica=e.retElectronica?e.retElectronica:this.retElectronica,this.retAmbienteProduccion=e.retAmbienteProduccion?e.retAmbienteProduccion:this.retAmbienteProduccion,this.retMostrarDialogoImpresion=e.retMostrarDialogoImpresion?e.retMostrarDialogoImpresion:this.retMostrarDialogoImpresion},e}()},bodW:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarTipoContable=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/getConTipo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarTipoContable(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.despuesDeListarTipoContable([]),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getListaConTipoReferencia=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/getListaConTipoReferencia",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetListaConTipoReferencia(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarTipoSegunCodigo=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/getListaConTipoCodigo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarTipoSegunCodigo(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.despuesDeListarTipoSegunCodigo([]),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarConTipo=function(e,t,o){var a=this;this.api.post("todocompuWS/contabilidadWebController/getListaConTipo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarConTipo(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarTipoContable=function(e,t,o,a){var i=this;this.api.post("todocompuWS/contabilidadWebController/insertarConTipo",e,a).then(function(e){e&&e.extraInfo?t.despuesDeInsertarTipoContable(e.operacionMensaje,o):(i.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,t)})},e.prototype.actualizarTipoContable=function(e,t,o,a){var i=this;this.api.post("todocompuWS/contabilidadWebController/modificarConTipo",e,a).then(function(e){e&&e.extraInfo?t.despuesDeModificarTipoContable(e.operacionMensaje,o):(i.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_CODIGO,field:"tipCodigo",width:200,minWidth:200},{headerName:s.a.TAG_DETALLE,field:"tipDetalle",width:400,minWidth:400},{headerName:s.a.TAG_TIPO,field:"tipTipoPrincipal",width:200,minWidth:200},{headerName:s.a.TAG_MODULO,field:"tipModulo",width:200,minWidth:200},{headerName:s.a.TAG_INACTIVO,headerClass:"cell-header-center",field:"tipInactivo",width:100,minWidth:100,cellRenderer:"inputEstado",cellClass:"text-center"},{headerName:s.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"cuentaCodigo",width:100,minWidth:100,cellRenderer:"botonOpciones",cellClass:"text-center",headerComponent:"toolTip",headerComponentParams:{class:s.a.ICON_OPCIONES,tooltip:s.a.TAG_OPCIONES,text:""}}]},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[i.a,r.b,n.a])],e)}()},"c+4B":function(e,t){e.exports='<div class="card-body usuario" style="text-align: center;">\r\n  <p-fileUpload name="listadoImagenes[]" [showCancelButton]="false" [showUploadButton]="true"\r\n    invalidFileTypeMessageSummary="{0}:  {{constantes.MSJ_ARCHIVO_NO_VALIDO}}, " multiple="multiple"\r\n    invalidFileSizeMessageSummary="{0}:  {{constantes.MSJ_TAMANIO_ARCHIVO_NO_VALIDO}}" invalidFileTypeMessageDetail="{{constantes.MSJ_ARCHIVO_PERMITIDO}}: {0}."\r\n    chooseLabel="{{constantes.TAG_SELECCIONE}}" cancelLabel="{{constantes.LABEL_CANCELAR}}" accept="image/*"\r\n    maxFileSize="1000000" (onSelect)="seleccionarImagenes($event)" (onRemove)="eliminarItem($event)"\r\n    invalidFileSizeMessageDetail="El tama\xf1o m\xe1ximo de carga es 1 MB.">\r\n\r\n  </p-fileUpload>\r\n\r\n  <div class="card">\r\n    <div class="row">\r\n      <div class="col-sm-4" *ngFor="let imagen of listadoImagenes">\r\n        <img #img class="foto-perfil card-img-top img-responsive" src="{{imagen.adjArchivo}}" alt="Card image cap"\r\n          width="50">\r\n        <div class="card-footer text-muted text-center">\r\n          <button class="btn btn-sm btn-danger mr-1" (click)="eliminarItem(imagen)"> <i class="{{constantes.ICON_ELIMINAR}}"\r\n              aria-hidden="true"></i></button>\r\n          <button class="btn btn-sm btn-primary" (click)="visualizar(imagen)"> <i class="{{constantes.ICON_CONSULTAR}}"\r\n              aria-hidden="true"></i></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <p-dialog header="Visualizaci\xf3n de im\xe1gen" [(visible)]="visualizarImagen" [modal]="true" [responsive]="true" [style]="{width: \'350px\', minWidth: \'200px\'}"\r\n    [minY]="70" maximizable="true" [baseZIndex]="10000">\r\n    <img #img class="card-img-top img-responsive" src="{{imagen.adjArchivo}}" alt="Card image cap">\r\n  </p-dialog>\r\n</div>'},c3nV:function(e,t,o){"use strict";o.d(t,"a",function(){return I});var a=o("CcnG"),i=o("ZYCi"),r=o("nR5P"),n=o("CEfs"),s=o("yccp"),c=o("8fiX"),l=o("mwBN"),d=o("RDZc"),p=o("VO10"),u=o("LlOB"),h=o("SZbH"),m=o("PYZn"),C=o("eUd/"),v=o("wd/R"),A=o("sXuD"),f=o("0cNW"),g=o("dXti"),b=o("G/9+"),O=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function(){function e(e,t,o,i,r,n,s,d,u,h,m){this.route=e,this.atajoService=t,this.toastr=o,this.bodegaService=i,this.modalService=r,this.utilService=n,this.filasService=s,this.periodoService=d,this.motivoConsumoService=u,this.sistemaService=h,this.kardexService=m,this.activar=!1,this.cargando=!1,this.listaEmpresas=[],this.empresaSeleccionada=new c.a,this.listaBodegas=new Array,this.bodegaSeleccionada=new p.a,this.fechaDesde=new Date,this.fechaHasta=new Date,this.fechaActual=new Date,this.productoSeleccionado=new A.a,this.productoCodigoCopia=null,this.formatoLista="",this.busquedaListado=null,this.dataListado={},this.vistaFormulario=null,this.vistaListado=!1,this.deshabilitarOpciones=!1,this.mostrandoFormulario=!1,this.mostrarKardexComponente=!1,this.es={},this.objetoConsultaEnviar={},this.objetoFormularioEnviar={},this.operacionListado={},this.cerrarKardex=new a.EventEmitter,this.mostrarBtnRegresarFomulario=!1,this.listadoPeriodos=new Array,this.listaConsumoMotivo=[],this.listaMotivosTransferencias=new Array,v.locale("es"),this.constantes=l.a,this.es=this.utilService.setLocaleDate()}return e.prototype.ngOnInit=function(){this.objetoDesdeFuera?this.setearValoresDesdeFuera():(this.listaEmpresas=this.route.snapshot.data.kardex,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.formatoLista=this.route.snapshot.data.tipoKardex,this.cambiarempresaSeleccionada(),this.obtenerFechaInicioActualMes()),this.iniciarAtajos(),this.focusProducto()},e.prototype.setearValoresDesdeFuera=function(){this.listaEmpresas.push(this.objetoDesdeFuera.empresa),this.empresaSeleccionada=this.listaEmpresas[0],l.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.objetoDesdeFuera.bodega&&("string"==typeof this.objetoDesdeFuera.bodega?this.listarBodegas():this.listaBodegas.push(this.objetoDesdeFuera.bodega)),this.bodegaSeleccionada=this.listaBodegas[0],this.productoSeleccionado=this.objetoDesdeFuera.productoSeleccionado,this.productoCodigoCopia=this.productoSeleccionado.proCodigoPrincipal,this.fechaDesde=this.objetoDesdeFuera.fechaDesde,this.fechaHasta=this.objetoDesdeFuera.fechaHasta,this.mostrarBtnRegresarFomulario=!0,this.obtenerDatosParaKardex()},e.prototype.obtenerDatosParaKardex=function(){this.cargando=!0,this.kardexService.obtenerDatosParaKardex({empresa:l.a.KEY_EMPRESA_SELECT},this,l.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerDatosParaKardex=function(e){this.cargando=!1,e&&(this.listaBodegas=e.listadoBodegas,this.listadoPeriodos=e.listadoPeriodos,this.listaConsumoMotivo=e.listadoMotivos,this.busquedaKardex(this.objetoDesdeFuera.incluirTodos))},e.prototype.cerrarKardexComponente=function(){this.cerrarKardex.emit(!1)},e.prototype.iniciarAtajos=function(){this.atajoService.add(new s.Hotkey(l.a.ATAJO_BUSCAR,function(){return document.getElementById("btnBuscar").click(),!1}))},e.prototype.cambiarempresaSeleccionada=function(){l.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cargando=!0,this.productoSeleccionado=new A.a,this.bodegaSeleccionada=null,this.listarBodegas(),this.listarPeriodos(),this.listarMotivosConsumo()},e.prototype.listarPeriodos=function(){var e={empresa:l.a.KEY_EMPRESA_SELECT};this.cargando=!0,this.periodoService.listarPeriodos(e,this,l.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarPeriodos=function(e){this.listadoPeriodos=e||[]},e.prototype.listarMotivosConsumo=function(){this.cargando=!0;var e={empresa:this.empresaSeleccionada.empCodigo,inactivos:!1};this.motivoConsumoService.listarInvConsumosMotivoTO(e,this,l.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvConsumosMotivoTO=function(e){this.listaConsumoMotivo=e,this.cargando=!1},e.prototype.listarBodegas=function(){this.cargando=!0,this.listaBodegas=[],this.limpiarResultado();var e={empresa:this.empresaSeleccionada.empCodigo,inactivo:!1};this.bodegaService.listarInvListaBodegasTO(e,this,l.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvListaBodegasTO=function(e){var t=this;this.listaBodegas=e,this.objetoDesdeFuera&&this.objetoDesdeFuera.bodega&&(this.bodegaSeleccionada="string"==typeof this.objetoDesdeFuera.bodega?new p.a({bodCodigo:this.objetoDesdeFuera.bodega}):this.bodegaSeleccionada),this.listaBodegas.length>0?this.bodegaSeleccionada=this.bodegaSeleccionada&&this.bodegaSeleccionada.bodCodigo?this.listaBodegas.find(function(e){return e.bodCodigo===t.bodegaSeleccionada.bodCodigo}):null:this.bodegaSeleccionada=null,this.cargando=!1},e.prototype.obtenerFechaInicioActualMes=function(){var e=this;this.sistemaService.getFechaInicioActualMes(this,l.a.KEY_EMPRESA_SELECT).then(function(t){e.fechaDesde=t[0],e.fechaDesde.setMonth(e.fechaDesde.getMonth()-1),e.fechaHasta=t[1],e.fechaActual=t[1]}).catch(function(t){return e.utilService.handleError(t,e)})},e.prototype.limpiarResultado=function(){this.busquedaListado=null,this.vistaListado=!1,this.filasService.actualizarFilas(0)},e.prototype.buscarKardex=function(e,t){var o=this.utilService.establecerFormularioTocado(e);this.cargando=!0,e&&e.valid&&o?this.busquedaKardex(t):(this.toastr.error(l.a.MSJ_CAMPOS_INVALIDOS,l.a.MSJ_TITULO_INVALIDOS),this.cargando=!1)},e.prototype.busquedaKardex=function(e){this.filasService.actualizarFilas(0),this.dataListado={vista:this.formatoLista,nombreProducto:this.productoSeleccionado.proNombre},this.busquedaListado=this.generarObjetoListado(e),this.vistaListado=!0,this.cargando=!1},e.prototype.generarObjetoListado=function(e){return{empresa:l.a.KEY_EMPRESA_SELECT,bodega:this.bodegaSeleccionada?this.bodegaSeleccionada.bodCodigo:null,producto:this.productoSeleccionado.proCodigoPrincipal,desde:this.utilService.formatearDateToStringYYYYMMDD(this.fechaDesde),hasta:this.utilService.formatearDateToStringYYYYMMDD(this.fechaHasta),promedio:l.a.KEY_KARDEX_PROMEDIO,mostrarBtnRegresar:!!this.objetoDesdeFuera,incluirTodos:e,vista:"kardex",listaPeriodos:this.listadoPeriodos,listaConsumoMotivo:this.listaConsumoMotivo,listaMotivosTransferencias:this.listaMotivosTransferencias}},e.prototype.mostrarFormulario=function(e){this.activar=e,this.deshabilitarOpciones=!0,this.vistaListado=!1},e.prototype.cancelar=function(){this.cerrarKardexComponente(),this.activar=!1,this.deshabilitarOpciones=!1,this.vistaListado=!0},e.prototype.accionLista=function(e){this.operacionListado=e,this.cancelar()},e.prototype.cambiarActivar=function(e){this.activar=e,this.deshabilitarOpciones=!0},e.prototype.buscarProducto=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esCuentaCodigoValido())if(this.productoSeleccionado.proCodigoPrincipal&&this.productoSeleccionado.proCodigoPrincipal.length>0){var o={empresa:this.empresaSeleccionada.empCodigo,busqueda:this.productoSeleccionado.proCodigoPrincipal?this.productoSeleccionado.proCodigoPrincipal:null,categoria:null,bodega:this.bodegaSeleccionada?this.bodegaSeleccionada.bodCodigo:null,incluirInactivos:!1,limite:!1,fecha:this.utilService.convertirFechaStringYYYYMMDD(this.fechaDesde)};e.srcElement.blur(),e.preventDefault();var a=this.modalService.open(m.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.parametrosBusqueda=o,a.componentInstance.empresaSeleccionada=this.empresaSeleccionada,a.componentInstance.isModal=!0,a.result.then(function(e){t.productoCodigoCopia=e.proCodigoPrincipal,t.productoSeleccionado=e},function(){t.focusProducto()})}else this.toastr.info(l.a.MSJ_ENTER_NO_DATA,l.a.TOAST_INFORMACION)},e.prototype.focusProducto=function(){var e=document.getElementById("idProducto");e&&e.focus()},e.prototype.esCuentaCodigoValido=function(){return this.productoCodigoCopia&&this.productoCodigoCopia===this.productoSeleccionado.proCodigoPrincipal},e.prototype.validarProducto=function(){this.productoCodigoCopia!==this.productoSeleccionado.proCodigoPrincipal&&(this.productoCodigoCopia=null,this.productoSeleccionado=new A.a)},O([Object(a.Input)(),S("design:type",Object)],e.prototype,"objetoDesdeFuera",void 0),O([Object(a.Output)(),S("design:type",Object)],e.prototype,"cerrarKardex",void 0),e=O([Object(a.Component)({selector:"app-kardex",template:o("CAGP"),styles:[o("Eyeg")]}),S("design:paramtypes",[i.ActivatedRoute,s.HotkeysService,h.b,d.a,C.b,r.a,n.a,f.a,g.a,u.a,b.a])],e)}()},"cPX/":function(e,t){e.exports=""},cagF:function(e,t,o){"use strict";o.d(t,"a",function(){return C});var a=o("CcnG"),i=o("z5Y/"),r=o("nR5P"),n=o("SZbH"),s=o("mwBN"),c=o("Ip0R"),l=o("mozY"),d=o("chRk"),p=o("OeYz"),u=o("gLZI"),h=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.autonumeric92=function(){return{decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999.99",minimumValue:"0"}},e.prototype.obtenerDatosParaCrudUtilidades=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/obtenerDatosParaCrudUtilidades",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaCrudUtilidades(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarRhUtilidades=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarRhUtilidades",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarRhUtilidades(e):(a.utilService.generarSwal(s.a.TALENTO_HUMANO_PARTICIPACION_UTILIDADES,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarRhUtilidades=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/modificarRhUtilidades",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarRhUtilidades(e):(a.utilService.generarSwal(s.a.TALENTO_HUMANO_PARTICIPACION_UTILIDADES,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=this,o=[];return o.push({headerName:s.a.TAG_IDENTIFICACION,width:120,minWidth:120,valueGetter:function(e){return e.data.utiId}},{headerName:s.a.TAG_APELLIDOS_Y_NOMBRES,field:"prNombres",width:300,minWidth:300,cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":""},valueGetter:function(e){return e.node.rowPinned?s.a.TAG_TOTAL_PUNTOS:e.data.utiApellidos+" "+e.data.utiNombres}},{headerName:s.a.TAG_VALOR,field:"valor",valueFormatter:this.formatearA2Decimales,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoUtilidades)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:110,minWidth:110,editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},cellEditorFramework:l.a,cellEditorParams:{name:"valor",maxlength:12,placeholder:"0.00",configAutonumeric:e.autonumeric92}},{headerName:s.a.TAG_FORMA_PAGO,field:"fpSeleccionada",width:160,minWidth:160,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoUtilidades)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-center"},cellClassRules:{"cell-with-errors":function(t){return!(t.node.rowPinned||!e.puedeEditarTabla)&&(t.data.valor>0&&!(t.data.fpSeleccionada&&t.data.fpSeleccionada.fpDetalle))}},editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellEditorFramework:d.a,cellEditorParams:function(t){return{value:t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,name:"fpSeleccionada",obligatorio:!0,listValues:e.formasDePago?e.formasDePago:[],fieldsShow:["fpDetalle"]}},valueFormatter:function(t){return t.data.fpSeleccionada=t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,t.data.fpSeleccionada?t.node.rowPinned?t.data.fpSeleccionada:t.data.fpSeleccionada.fpDetalle:e.fpSeleccionada?e.fpSeleccionada.fpDetalle:""}},{headerName:s.a.TAG_NUMERO_DOCUMENTO,field:"documento",width:140,minWidth:140,cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"mousetrap"},cellClassRules:{"cell-with-errors":function(t){return!(t.node.rowPinned||!e.puedeEditarTabla)&&(t.data.errorEnDocumento||t.data.documentoRepetido)}},editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoUtilidades)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:p.a,cellEditorParams:{name:"documento",inputClass:"text-uppercase"},headerComponentFramework:u.a,headerComponentParams:{tooltip:s.a.TAG_NUMERO_DOCUMENTO,text:s.a.TAG_N_DOCUMENTO,enableSorting:!0}},{headerName:s.a.TAG_OBSERVACION,field:"observacion",width:200,minWidth:200,cellClass:"mousetrap",editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoUtilidades)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:p.a,cellEditorParams:{name:"observacion",inputClass:"text-uppercase"}}),e.esContable&&e.puedeEditarTabla&&o.push(this.utilService.getColumnaEliminar()),o},e.prototype.generarPinnedBottonRowData=function(){return[{utiId:"",prNombres:s.a.TAG_TOTAL_PUNTOS,valor:0,fpSeleccionada:s.a.TAG_N_UTILIDADES,documento:0,observacion:""}]},e.prototype.formatearA2Decimales=function(e){var t=e.value?e.value.toString().replace(/,/gi,""):0;return new c.DecimalPipe("en-US").transform(t,"1.2-2")},e=h([Object(a.Injectable)({providedIn:"root"}),m("design:paramtypes",[i.a,n.b,r.a])],e)}()},cotW:function(e,t){e.exports=".collection {\r\n    margin: 0;\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 2px;\r\n    overflow: hidden;\r\n    position: relative;\r\n}\r\n\r\ndiv.list-items {\r\n    width: 100%;\r\n    height: calc(100vh - 200px);\r\n    overflow: auto;\r\n}\r\n\r\n.collection .collection-item {\r\n    background-color: #fff;\r\n    line-height: 1.5rem;\r\n    padding: 0;\r\n    margin: 0;\r\n    border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.collection .collection-item.detail {\r\n    min-height: 28px;\r\n    padding-left: 10px;\r\n    position: relative;\r\n}\r\n\r\ntable {\r\n    border-collapse: collapse;\r\n}\r\n\r\n.column-data {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.column-data .row {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.collection .collection-item.col-hover:hover {\r\n    background-color: rgba(0, 0, 0, 0.075);\r\n}\r\n\r\n.collection .collection-item.col-hover:hover, \r\n.collection .collection-item.col-hover:hover {\r\n    background-color: rgba(0, 0, 0, 0.075);\r\n}"},ctgr:function(e,t){e.exports=""},cufs:function(e,t){e.exports=""},cyv6:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvComprasMotivoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvComprasMotivoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvComprasMotivoTO(e.extraInfo):(t.despuesDeListarInvComprasMotivoTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarInvComprasMotivoTO=function(e,t,o,a){var i=this;this.api.post("todocompuWS/inventarioWebController/insertarInvComprasMotivoTO",e,a).then(function(e){e&&e.extraInfo?t.despuesDeInsertarInvComprasMotivoTO(e.operacionMensaje,o):(i.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,t)})},e.prototype.actualizarInvComprasMotivoTO=function(e,t,o,a){var i=this;this.api.post("todocompuWS/inventarioWebController/modificarInvComprasMotivoTO",e,a).then(function(e){e&&e.extraInfo?t.despuesDeActualizarInvComprasMotivoTO(e.operacionMensaje,o):(i.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return i.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_CODIGO,field:"cmCodigo",width:100,minWidth:100},{headerName:s.a.TAG_DETALLE,field:"cmDetalle",width:400,minWidth:400},{headerName:s.a.TAG_TIPO_CONTABLE,field:"tipCodigo",width:120,minWidth:120},{headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"cmInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[i.a,r.b,n.a])],e)}()},"d+pv":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.provCodigo=null,this.empCodigo=null,this.provTipoId=null,this.provId=null,this.provNombreComercial=null,this.provRazonSocial=null,this.provProvincia=null,this.provCiudad=null,this.provParroquia=null,this.provZona=null,this.provDireccion=null,this.provTelefono=null,this.provCelular=null,this.provEmail=null,this.provEmailOrdenCompra=null,this.provObservaciones=null,this.provRelacionado=!1,this.provInactivo=!1,this.provEmpresa=null,this.provCategoria=null,this.usrInsertaProveedor=null,this.usrFechaInsertaProveedor=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.provCodigo=e.provCodigo?e.provCodigo:this.provCodigo,this.empCodigo=e.empCodigo?e.empCodigo:this.empCodigo,this.provTipoId=e.provTipoId?e.provTipoId:this.provTipoId,this.provId=e.provId?e.provId:this.provId,this.provNombreComercial=e.provNombreComercial?e.provNombreComercial:this.provNombreComercial,this.provRazonSocial=e.provRazonSocial?e.provRazonSocial:this.provRazonSocial,this.provProvincia=e.provProvincia?e.provProvincia:this.provProvincia,this.provCiudad=e.provCiudad?e.provCiudad:this.provCiudad,this.provParroquia=e.provParroquia?e.provParroquia:this.provParroquia,this.provZona=e.provZona?e.provZona:this.provZona,this.provDireccion=e.provDireccion?e.provDireccion:this.provDireccion,this.provTelefono=e.provTelefono?e.provTelefono:this.provTelefono,this.provCelular=e.provCelular?e.provCelular:this.provCelular,this.provEmail=e.provEmail?e.provEmail:this.provEmail,this.provEmailOrdenCompra=e.provEmailOrdenCompra?e.provEmailOrdenCompra:this.provEmailOrdenCompra,this.provObservaciones=e.provObservaciones?e.provObservaciones:this.provObservaciones,this.provRelacionado=e.provRelacionado?e.provRelacionado:this.provRelacionado,this.provInactivo=e.provInactivo?e.provInactivo:this.provInactivo,this.provEmpresa=e.provEmpresa?e.provEmpresa:this.provEmpresa,this.provCategoria=e.provCategoria?e.provCategoria:this.provCategoria,this.usrInsertaProveedor=e.usrInsertaProveedor?e.usrInsertaProveedor:this.usrInsertaProveedor,this.usrFechaInsertaProveedor=e.usrFechaInsertaProveedor?e.usrFechaInsertaProveedor:this.usrFechaInsertaProveedor},e}()},dGCu:function(e,t,o){"use strict";o.d(t,"a",function(){return h});var a=o("CcnG"),i=o("mwBN"),r=o("X2CA"),n=o("eUd/"),s=o("d+pv"),c=o("zkCp"),l=o("gLZI"),d=o("nR5P"),p=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,o){this.activeModal=e,this.proveedorService=t,this.utilService=o,this.parametrosBusqueda=null,this.cargando=!1,this.enterKey=0,this.columnDefs=[],this.components={},this.filtroGlobal="",this.listaResultado=[],this.objectSelect=new s.a,this.constantes=i.a}return e.prototype.ngOnInit=function(){this.iniciarAgGrid(),this.isScreamMd=!(window.innerWidth<=576),this.parametrosBusqueda&&this.buscarProveedor()},e.prototype.buscarProveedor=function(){this.limpiarResultado(),this.cargando=!0,this.proveedorService.listarInvProveedorTO(this.parametrosBusqueda,this,i.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvProveedorTO=function(e){this.listaResultado=e,this.cargando=!1,0===this.listaResultado.length?this.activeModal.close(null):1===this.listaResultado.length&&this.enviarItem(this.listaResultado[0])},e.prototype.limpiarResultado=function(){this.listaResultado=[],this.objectSelect=new s.a},e.prototype.ejecutarSpanAccion=function(e,t){this.enviarItem(t)},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},e.prototype.iniciarAgGrid=function(){this.columnDefs=[{headerName:i.a.TAG_CODIGO,field:"provCodigo",width:150},{headerName:i.a.TAG_RAZON_SOCIAL,field:"provRazonSocial",width:600},{headerName:i.a.TAG_NOMBRE,field:"provNombreComercial",width:600},this.utilService.getSpanSelect()],this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={toolTip:l.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.handleKeyboardEvent=function(e){13===e.keyCode&&(this.enterKey>0&&this.enviarItem(this.objectSelect),this.enterKey=this.enterKey+1)},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objectSelect=t?t.data:null},e.prototype.filaSeleccionar=function(){this.enviarItem(this.objectSelect)},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},p([Object(a.Input)(),u("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),p([Object(a.ViewChild)("menuOpciones"),u("design:type",c.ContextMenu)],e.prototype,"menuOpciones",void 0),p([Object(a.HostListener)("window:resize",["$event"]),u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],e.prototype,"onResize",null),p([Object(a.HostListener)("document:keydown",["$event"]),u("design:type",Function),u("design:paramtypes",[KeyboardEvent]),u("design:returntype",void 0)],e.prototype,"handleKeyboardEvent",null),e=p([Object(a.Component)({selector:"app-listado-proveedores",template:o("080d"),styles:[o("BVhi")]}),u("design:paramtypes",[n.a,r.a,d.a])],e)}()},dKhm:function(e,t){e.exports=""},dXti:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvConsumosMotivoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvConsumosMotivoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvConsumosMotivoTO(e.extraInfo):(t.despuesDeListarInvConsumosMotivoTO([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosParaMotivoConsumos=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerDatosParaMotivoConsumos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaMotivoConsumos(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.seleccionarBodega=function(e,t){return e.find(function(e){return e.bodCodigo==t})},e.prototype.seleccionarSector=function(e,t){return e.find(function(e){return e.secCodigo==t})},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_CODIGO,field:"cmCodigo",width:100,minWidth:100},{headerName:s.a.TAG_DETALLE,field:"cmDetalle",width:400,minWidth:400},{headerName:s.a.TAG_FORMA_CONTABILIZAR,field:"cmFormaContabilizar",width:120,minWidth:120},{headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"cmInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[i.a,r.b,n.a])],e)}()},dqpl:function(e,t,o){"use strict";var a=o("CcnG"),i=o("nR5P"),r=o("SZbH"),n=o("z5Y/"),s=o("mwBN"),c=o("Ip0R"),l=o("mozY"),d=o("G21y"),p=o("ctD9"),u=function(){function e(e){this.detValor=0,this.detObservaciones="",this.antEmpresa="",this.antPeriodo="",this.antTipo="",this.antNumero="",this.antSector="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detValor=e.detValor?e.detValor:this.detValor,this.detObservaciones=e.detObservaciones?e.detObservaciones:this.detObservaciones,this.antEmpresa=e.antEmpresa?e.antEmpresa:this.antEmpresa,this.antPeriodo=e.antPeriodo?e.antPeriodo:this.antPeriodo,this.antTipo=e.antTipo?e.antTipo:this.antTipo,this.antNumero=e.antNumero?e.antNumero:this.antNumero,this.antSector=e.antSector?e.antSector:this.antSector},e}(),h=o("Uu9l"),m=o("2ngb"),C=function(){function e(e){this.detSecuencial=0,this.detValor=0,this.pagEmpresa="",this.pagPeriodo="",this.pagTipo="",this.pagNumero="",this.compEmpresa="",this.compPeriodo="",this.compMotivo="",this.compNumero="",this.provCodigo="",this.compDocumento="",this.compSecCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencial=e.detSecuencial?e.detSecuencial:this.detSecuencial,this.detValor=e.detValor?e.detValor:this.detValor,this.pagEmpresa=e.pagEmpresa?e.pagEmpresa:this.pagEmpresa,this.pagPeriodo=e.pagPeriodo?e.pagPeriodo:this.pagPeriodo,this.pagTipo=e.pagTipo?e.pagTipo:this.pagTipo,this.pagNumero=e.pagNumero?e.pagNumero:this.pagNumero,this.compEmpresa=e.compEmpresa?e.compEmpresa:this.compEmpresa,this.compPeriodo=e.compPeriodo?e.compPeriodo:this.compPeriodo,this.compMotivo=e.compMotivo?e.compMotivo:this.compMotivo,this.compNumero=e.compNumero?e.compNumero:this.compNumero,this.provCodigo=e.provCodigo?e.provCodigo:this.provCodigo,this.compDocumento=e.compDocumento?e.compDocumento:this.compDocumento,this.compSecCodigo=e.compSecCodigo?e.compSecCodigo:this.compSecCodigo},e}(),v=o("wd/R");o.d(t,"a",function(){return g});var A=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.obtenerAutonumericReales=function(){return{decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999",minimumValue:"-999999999",negativeSignCharacter:"-"}},e.prototype.validarFecha=function(e,t){return!(!e.detFechaPst||!t)&&!(v(e.detFechaPst,"DD/MM/YYYY").toDate().getTime()<t.getTime())},e.prototype.inicializarTotales=function(){return{pago:0,forma:0,anticipo:0,diferencia:0}},e.prototype.armarAnticipos=function(e){for(var t=new Array,o=0;o<e.length;o++){var a=e[o];if(a.antValor>0){var i=new u;i.detValor=a.antValor,i.antEmpresa=s.a.KEY_EMPRESA_SELECT,i.antPeriodo=a.antPeriodo,i.antTipo=a.antTipo,i.antNumero=a.antNumero,i.antSector=a.antSector,i.detValor&&0!=i.detValor&&t.push(i)}}return t},e.prototype.extraerSector=function(e){if(e&&e.fpDetalle){var t=e.fpDetalle.split("|");if(t)return t[0].trim()}return""},e.prototype.armarFormasDePago=function(e){for(var t=new Array,o=0;o<e.length;o++){var a=new h.a;if(!e[o].fpSeleccionada)return this.toastr.warning(s.a.MSJ_DEBE_SELECCIONAR_FORMA_DE_PAGO),[];var i=e[o].fpSeleccionada;a.fpSecuencial=i.fpSecuencial,a.pagEmpresa=s.a.KEY_EMPRESA_SELECT,a.secCodigo=this.extraerSector(i),a.detObservaciones=e[o].detObservaciones,a.detReferencia=e[o].detReferencia,a.detValor=e[o].detValor,a.detValor&&0!=a.detValor&&t.push(a)}return t},e.prototype.armarPagoParaGuardar=function(e,t){var o=e,a=new C;return a.detSecuencial=o.id,a.detValor=o.valor,a.pagEmpresa=s.a.KEY_EMPRESA_SELECT,a.compEmpresa=s.a.KEY_EMPRESA_SELECT,a.compPeriodo=o.cxppPeriodo,a.compMotivo=o.cxppMotivo,a.compNumero=o.cxppNumero,a.provCodigo=t,a.compDocumento=o.cxppDocumentoNumero,a.compSecCodigo=o.cxppSector,a},e.prototype.construirObjetoParaPonerloEnLaLista=function(e,t){var o=new m.a;return o.pagFecha=e.pagFecha,o.pagNumeroSistema=t.conContablePK.conPeriodo+" | "+t.conContablePK.conTipo+" | "+t.conContablePK.conNumero,o.pagObservaciones=e.pagObservaciones,o.pagValor=e.pagValor,o.pagProveedor=e.provCodigo+" | "+e.conApellidosNombres,o},e.prototype.obtenerDatosParaPagos=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/obtenerDatosParaPagos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaPagos(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarCarPagos=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/insertarCarPagos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarCarPagos(e):(a.utilService.generarSwal(s.a.CARTERA_PAGOS,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerPago=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/obtenerPago",e,o).then(function(e){if(e&&e.extraInfo)t.despuesDeObtenerPago(e.extraInfo);else{a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1;var o={accion:s.a.ACCION_CANCELAR};t.enviarAccion.emit(o)}}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=this,o=[];return o.push({headerName:s.a.TAG_PERIODO,field:"cxppPeriodo",width:100,minWidth:100,maxWitdh:100},{headerName:s.a.TAG_MOTIVO,field:"cxppMotivo",width:100,minWidth:100,maxWitdh:100},{headerName:s.a.TAG_NUMERO,field:"cxppNumero",width:100,minWidth:100,maxWitdh:100},{headerName:s.a.TAG_DOCUMENTO,field:"cxppDocumentoNumero",width:150,minWidth:150},{headerName:s.a.TAG_SECTOR,field:"cxppSector",width:100,minWidth:100,maxWitdh:100,hide:e.accion!=s.a.ACCION_CREAR},{headerName:s.a.TAG_FECHA,field:"cxppFechaEmision",cellClassRules:{"cell-with-errors":function(o){return e.accion==s.a.ACCION_CREAR&&(o.data.valor&&0!=o.data.valor&&t.validarFechaFactura(o.data.cxppFechaEmision,e.fechaActual))}},width:100,minWidth:100,maxWitdh:100},{headerName:s.a.TAG_VENCIMIENTO,field:"cxppFechaVencimiento",width:100,minWidth:100,maxWitdh:100},{headerName:s.a.TAG_TOTAL,valueFormatter:b,cellClass:"text-right",field:"cxppTotal",width:100,minWidth:100},{headerName:s.a.TAG_ABONOS,valueFormatter:b,cellClass:"text-right",field:"cxppAbonos",width:100,minWidth:100},{headerName:s.a.TAG_SALDO,valueFormatter:b,cellClass:"text-right",field:"cxppSaldo",width:100,minWidth:100,hide:e.accion!=s.a.ACCION_CREAR},{headerComponentFramework:d.a,headerClass:"pr-0",headerComponentParams:{name:s.a.TAG_COBRAR,value:e.cobrarTodosCheck,tooltipText:s.a.TAG_COBRAR_TODO},cellClass:"text-center",field:"cobrar",width:150,minWidth:100,cellRendererFramework:p.a,cellRendererParams:function(e){return{params:e.data.cobrar,ejecutarMetodo:!0}},hide:e.accion!=s.a.ACCION_CREAR},{headerName:s.a.TAG_VALOR,field:"valor",width:120,minWidth:80,valueFormatter:b,cellClass:"text-right",cellEditorFramework:l.a,cellEditorParams:{name:"valor",maxlength:12,placeholder:"0.00",configAutonumeric:e.configAutonumericReales},suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoPagos)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:!0,cellClassRules:{"cell-with-errors":function(e){return t.utilService.quitarComasNumero(e.data.valor)<0?e.data.valor&&0!=e.data.valor&&t.utilService.quitarComasNumero(e.data.valor)<e.data.cxppSaldo:e.data.valor&&0!=e.data.valor&&t.utilService.quitarComasNumero(e.data.valor)>e.data.cxppSaldo}},hide:e.accion!=s.a.ACCION_CREAR},this.utilService.getColumnaOpciones()),o},e.prototype.validarFechaFactura=function(e,t){return!(!e||!t)&&!(v(e,"YYYY-MM-DD").toDate().getTime()<=t.getTime())},e=A([Object(a.Injectable)({providedIn:"root"}),f("design:paramtypes",[n.a,r.b,i.a])],e)}();function b(e){return e.value||(e.value=0),new c.DecimalPipe("en-US").transform(e.value,"1.2-2")}},dsX2:function(e,t){e.exports="div.ui-contextmenu.ui-widget.ui-widget-content{\r\n    z-index: 1100!important;\r\n} "},dtq1:function(e,t){e.exports='<div class="card m-0" [hidden]="!vistaListado" *ngIf="listadoResultado?.length > 0">\r\n  <div class="card-header p-1" *ngIf="!isModal">\r\n    <button id="btnActivar" class="btn btn-sm btn-primary mr-2 d-none d-md-inline" (click)="cambiarActivar()" type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{constantes.SISTEMA_CAJA_LISTADO}}</strong>\r\n    <div class="card-header-actions" *ngIf="!isModal">\r\n      <div class="btn-group">\r\n        <button id="btnImprimir" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n          container="body" (click)="imprimirKardex()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n        </button>\r\n        <button id="btnExportar" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n          container="body" (click)="exportarKardex()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n        </button>\r\n      </div> \r\n    </div>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName" maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n            defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \x3c!--195px--\x3e\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham" [rowData]="listadoResultado"\r\n      [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n      [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)"\r\n      (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n      (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()">\r\n    </ag-grid-angular>\r\n  </div>\r\n</div>\r\n<p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n<app-perfil-facturacion-formulario *ngIf="dataFormularioPerfil" [data]="dataFormularioPerfil" [empresaSeleccionada]="empresaSeleccionada"\r\n  (enviarCancelar)="cancelarFormulario()" (enviarActivar)="cambiarActivarFormulario($event)" (enviarLista)="operacionEnLista($event)"></app-perfil-facturacion-formulario>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},dwjf:function(e,t){e.exports=""},e2BI:function(e,t){e.exports=""},eRWn:function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("z5Y/"),r=o("nR5P"),n=o("SZbH"),s=o("mwBN"),c=o("+JJ7"),l=o("yccp"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o,a){this.api=e,this.utilService=t,this.toastr=o,this.atajoService=a}return e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new l.Hotkey(s.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarListado");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarFormaPagoBen");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_NUEVO,function(){var e=document.getElementById("btnNuevoFormaPagoBen");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnimprimirFormasPagoBeneficio");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnexportarFormasPagoBeneficio");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_GUARDAR,function(){var e=document.getElementById("btnGuardarFormaPagoBeneficio");return e&&e.click(),!1})),this.atajoService.add(new l.Hotkey(s.a.ATAJO_CANCELAR,function(){var e=document.getElementById("btnCancelarFormaPagoBeneficio");return e&&e.click(),!1}))},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_NUEVO:case s.a.ACCION_CREAR:a=t.listaSisPermisoTO.gruCrear;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:a=t.listaSisPermisoTO.gruModificar;break;case s.a.ACCION_ELIMINAR:a=t.listaSisPermisoTO.gruEliminar;break;case s.a.ACCION_IMPRIMIR:a=t.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.TAG_AVISO),a},e.prototype.listarFormasPagoBeneficios=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getListaFormaPagoBeneficioSocialTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarFormasPagoBeneficios(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarComboFormaPagoBeneficioSocial=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/getComboFormaPagoBeneficioSocial",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarComboFormaPagoBeneficioSocial(e.extraInfo):(t.despuesDeListarComboFormaPagoBeneficioSocial([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.accionFormasPagoBeneficios=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/accionRhFormaPagoBeneficioSocial",e,o).then(function(e){e&&e.extraInfo?t.despuesDeAccionFormasPagoBeneficios(e):(t.despuesDeAccionFormasPagoBeneficios(null),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.guardarFormasPagoBeneficios=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarRhFormaPagoBeneficioSocial",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGuardarFormasPagoBeneficios(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){var e=[];return e.push({headerName:s.a.TAG_CUENTA,field:"ctaCodigo",width:120,minWidth:120},{headerName:s.a.TAG_DETALLE,field:"fpDetalle",width:200,minWidth:200},{headerName:s.a.TAG_CODIGO_MAGISTERIAL,field:"fpCodigoMinisterial",width:100,minWidth:100},{headerName:s.a.TAG_SECTOR,field:"secCodigo",width:80,minWidth:80},{headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"fpInactivo",width:115,minWidth:115,cellRendererFramework:c.a,cellClass:"text-md-center"},this.utilService.getColumnaOpciones()),e},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[i.a,r.a,n.b,l.HotkeysService])],e)}()},ecmD:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.fpDetalle=null,this.ctaCodigo=null,this.validar=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.fpDetalle=e.fpDetalle?e.fpDetalle:this.fpDetalle,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.validar=e.validar?e.validar:this.validar},e}()},eeDj:function(e,t,o){"use strict";o.d(t,"a",function(){return g});var a=o("gLZI"),i=o("OeYz"),r=o("CcnG"),n=o("nR5P"),s=o("SZbH"),c=o("z5Y/"),l=o("mwBN"),d=o("Ip0R"),p=o("L5HG"),u=o("mozY"),h=o("madF"),m=o("BV+X"),C=o("+JJ7"),v=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},A=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvConsultaCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvConsultaCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvConsultaCompra(e.extraInfo):(t.despuesDeListarInvConsultaCompra([]),a.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.guardarCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/guardarCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGuardarCompra(e):(a.utilService.generarSwal(l.a.TAG_COMPRA,l.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.modificarCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarCompra(e):(a.utilService.generarSwal(l.a.TAG_COMPRA,l.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.consultarCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/consultarCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeConsultarCompra(e.extraInfo):(t.despuesDeConsultarCompra(null),a.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.anularCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/anularCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeAnularCompra(e):(a.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.restaurarCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/restaurarCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeRestaurarCompra(e):(a.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.desmayorizarCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/desmayorizarCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeDesmayorizarCompra(e):(a.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.obtenerIva=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getValorAnxPorcentajeIvaTO",e,o).then(function(e){e&&e.extraInfo&&t.despuesDeObtenerIva(e.extraInfo),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDocumentos=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/documentos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDocumentos(e.extraInfo):a.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosBasicosCompraNueva=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerDatosBasicosCompraNueva",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosBasicosCompraNueva(e.extraInfo):(t.despuesDeObtenerDatosBasicosCompraNueva(null),a.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO)),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=[];return t.push({headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:40,minWidth:40,cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_ESTADO,headerClass:"text-center",width:100,minWidth:90,cellClass:"text-center",cellRendererFramework:p.a,valueGetter:function(e){return e.data.compStatus===l.a.ETIQUETA_ANULADO?l.a.ETIQUETA_ANULADO:e.data.compStatus===l.a.ETIQUETA_PENDIENTE?l.a.ETIQUETA_PENDIENTE:""},cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_DOCUMENTO,field:"compDocumentoNumero",width:180,minWidth:150,cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_FECHA,field:"compFecha",width:120,minWidth:100,cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_NOMBRE,field:"provRazonSocial",width:250,minWidth:250,cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_TOTAL,field:"compTotal",width:150,minWidth:150,valueFormatter:b,cellClass:"text-right",cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_FORMA_PAGO,field:"compFormaPago",width:180,minWidth:150,cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_OBSERVACIONES,field:"compObservaciones",width:350,minWidth:300,cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_NUMERO,field:"compNumero",width:200,minWidth:200,cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_CONTABLE,field:"conContable",width:200,minWidth:200,cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}}},{headerName:l.a.TAG_OPCIONES,headerClass:"cell-header-center",cellClass:"text-center",cellClassRules:{"fila-pendiente":function(e){return e.data.compStatus===l.a.ETIQUETA_PENDIENTE}},width:l.a.WIDTH_OPCIONES,minWidth:l.a.WIDTH_OPCIONES,maxWidth:l.a.WIDTH_OPCIONES,cellRendererFramework:h.a,headerComponentFramework:a.a,headerComponentParams:{class:l.a.ICON_OPCIONES,tooltip:l.a.TAG_OPCIONES,text:"",enableSorting:!1}}),t},e.prototype.generarColumnasDetalle=function(e){var t=this,o=e.accion===l.a.ACCION_CREAR||e.accion===l.a.ACCION_MAYORIZAR,r=[];return r.push({headerName:l.a.TAG_BODEGA,field:"bodCodigo",width:100,minWidth:50,cellClass:"cell-editing",cellClassRules:{"cell-with-errors":function(e){return!t.validarBodega(e.data)}},suppressKeyboardEvent:function(o){switch(o.event.keyCode){case l.a.KEYCODE_ENTER:case l.a.KEYCODE_TAB:if(e.buscarBodega(o),o.editing)return!0;break;case l.a.KEYCODE_DOWN:case l.a.KEYCODE_UP:if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listInvComprasDetalleTO);break;default:return!0}},editable:function(t){return e.accion!==l.a.ACCION_MAYORIZAR?o:o&&t.data.detPendiente},valueGetter:function(e){return e.data.bodCodigo},cellEditorFramework:i.a,cellEditorParams:{name:"bodCodigo",maxlength:50,inputClass:"text-uppercase",placeholder:""}},{headerName:l.a.TAG_PRODUCTO,field:"proCodigoPrincipal",width:120,minWidth:100,cellClass:"cell-editing",cellClassRules:{"cell-with-errors":function(e){return!t.validarProducto(e.data)}},suppressKeyboardEvent:function(o){switch(o.event.keyCode){case l.a.KEYCODE_ENTER:case l.a.KEYCODE_TAB:if(e.buscarProducto(o),o.editing)return!0;break;case l.a.KEYCODE_DOWN:case l.a.KEYCODE_UP:if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listInvComprasDetalleTO);break;default:return!0}},editable:function(t){return e.accion!==l.a.ACCION_MAYORIZAR?o:o&&t.data.detPendiente},valueGetter:function(e){return e.data.proCodigoPrincipal},cellEditorFramework:i.a,cellEditorParams:{name:"proCodigoPrincipal",maxlength:50,inputClass:"text-uppercase",placeholder:""}},{headerName:l.a.TAG_NOMBRE,field:"nombreProducto",width:250,minWidth:250},{headerName:l.a.TAG_CANTIDAD,field:"detCantidad",width:100,minWidth:100,suppressKeyboardEvent:function(o){if(o.editing)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listInvComprasDetalleTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:function(t){return e.accion!==l.a.ACCION_MAYORIZAR?t.data.proCodigoPrincipal&&o:o&&t.data.detPendiente},cellClass:"text-right cell-editing p-0",cellClassRules:{"cell-with-errors":function(e){return e.data.proCodigoPrincipal&&!t.validarCantidad(e.data)}},cellRenderer:"labelNumeric",cellRendererParams:function(t){return{title:l.a.MSJ_ACCION_CANTIDADES,clase:l.a.ICON_CALCULADORA,name:"detCantidad",id:"detCantidadRender",habilitarBtn:e.accion!==l.a.ACCION_MAYORIZAR?t.data.proCodigoPrincipal&&o:o&&t.data.detPendiente}},cellEditor:"inputNumeric",cellEditorParams:{name:"detCantidad",idRender:"detCantidadRender",id:"detCantidad",maxlength:13,placeholder:"0.00",configAutonumeric:e.configAutonumeric,title:l.a.MSJ_ACCION_CANTIDADES,clase:l.a.ICON_CALCULADORA}},{headerName:l.a.TAG_UNIDAD_MEDIDA,field:"medidaDetalle",width:180,minWidth:150,headerComponentFramework:a.a,headerComponentParams:{tooltip:l.a.TAG_UNIDAD_MEDIDA,text:l.a.TAG_UN_MEDIDA,enableSorting:!0}},{headerName:l.a.TAG_PRECIO,field:"detPrecio",width:100,minWidth:100,cellClass:"text-right",valueFormatter:b},{headerName:l.a.TAG_ESTADO,field:"proEstadoIva",width:100,minWidth:100,cellClass:"text-right",valueGetter:function(t){return"GRAVA"===t.data.proEstadoIva?e.invCompraTO.compIvaVigente+"%":"0%"}},{headerName:l.a.TAG_PARCIAL,field:"parcialProducto",width:100,minWidth:100,cellClass:"cell-editing text-right",cellClassRules:{"cell-with-errors":function(e){return e.data.proCodigoPrincipal&&!t.validarParcial(e.data)}},valueFormatter:b,valueGetter:function(e){return e.node.rowPinned?"":e.data.parcialProducto},cellEditorFramework:u.a,cellEditorParams:{name:"parcialProducto",maxlength:25,placeholder:"0.00",configAutonumeric:e.configAutonumeric},suppressKeyboardEvent:function(o){if(o.event.keyCode===l.a.KEYCODE_TAB&&o.event.srcElement.blur(),e.agregarFilaAlFinal(o),o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listInvComprasDetalleTO)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},editable:function(t){return e.accion!==l.a.ACCION_MAYORIZAR?o:o&&t.data.detPendiente}}),e.accion!==l.a.ACCION_CREAR&&r.push({headerName:l.a.TAG_PENDIENTE,headerClass:"text-md-center",field:"detPendiente",width:115,minWidth:115,cellRendererFramework:C.a,cellClass:"text-md-center"}),r.push(this.utilService.getColumnaOpciones()),r},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case l.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case l.a.ACCION_CONSULTAR:a=!0;break;case l.a.ACCION_MAYORIZAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruMayorizarCompras;break;case l.a.ACCION_DESMAYORIZAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruDesmayorizarCompras;break;case l.a.ACCION_ANULAR:case l.a.ACCION_RESTAURAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruAnularCompras;break;case l.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case l.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(l.a.ERROR_403_TEXTO,l.a.ERROR_403_TITULO),a},e.prototype.obtenerAutonumeric=function(){return{decimalPlaces:6,decimalPlacesRawValue:6,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:6,maximumValue:"9999999999.999999",minimumValue:"0"}},e.prototype.validarNumero=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/validarNumero",e,o).then(function(e){e&&e.extraInfo?t.despuesDeValidarNumero(e.extraInfo):a.toastr.warning(e.operacionMensaje,l.a.TOAST_INFORMACION),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.convertirInvCompraEnInvListaConsultaCompraTO=function(e,t,o){var a=v({},t);return a.compTotal=e.compTotal,a.compStatus=e.compAnulado?l.a.ETIQUETA_ANULADO:e.compPendiente?l.a.ETIQUETA_PENDIENTE:" ",a.compObservaciones=e.compObservaciones,a.compFecha=e.compFecha,a.compDocumentoNumero=e.compDocumentoNumero,a.compFormaPago=e.compFormaPago,a.provCodigo=o.provCodigo,a.provRazonSocial=o.provRazonSocial,a},e.prototype.validarProducto=function(e){return!!e.proCodigoPrincipal},e.prototype.validarBodega=function(e){return!!e.bodCodigo},e.prototype.validarCantidad=function(e){var t=e.detCantidad?e.detCantidad.toString().replace(/,/gi,""):0;return t&&t>=.01},e.prototype.validarParcial=function(e){var t=e.parcialProducto?e.parcialProducto.toString().replace(/,/gi,""):0;return t&&t>=.01},e.prototype.mostrarSwalNoPermiso=function(){var e={title:l.a.TOAST_INFORMACION,texto:l.a.ERROR_403_TEXTO,type:l.a.SWAL_INFO,confirmButtonText:"<i class='"+l.a.ICON_AGREGAR+"'></i>  "+l.a.LABEL_MAS_INFORMACION,cancelButtonText:l.a.MSJ_ACEPTAR};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){e&&window.open(l.a.ENLACE_MANUAL_USUARIO,"_blank")})},e.prototype.algunaFilaPendienteOAnulada=function(e,t){for(var o={isPendienteAnulado:!1,listadoPk:[]},a=0,i=e;a<i.length;a++){var r=i[a];if(r.compStatus===l.a.ETIQUETA_PENDIENTE||r.compStatus===l.a.ETIQUETA_ANULADO){o.isPendienteAnulado=!0;break}if(r.compNumero){var n=new m.a({compEmpresa:t,compPeriodo:r.compNumero.split("|")[0],compMotivo:r.compNumero.split("|")[1],compNumero:r.compNumero.split("|")[2]});o.listadoPk.push(n)}}return o},e=A([Object(r.Injectable)({providedIn:"root"}),f("design:paramtypes",[c.a,s.b,n.a])],e)}();function b(e){return new d.DecimalPipe("en-US").transform(e.value,"1.2-2")}},egWh:function(e,t,o){"use strict";o.d(t,"a",function(){return P});var a=o("CcnG"),i=o("mwBN"),r=o("eUd/"),n=o("SZbH"),s=o("nR5P"),c=o("CEfs"),l=o("8fiX"),d=o("z5Y/"),p=o("yccp"),u=o("ZYCi"),h=o("Vlg3"),m=o("WCC+"),C=o("hBue"),v=o("tmev"),A=o("6E6y"),f=o("EnEm"),g=o("Ungd"),b=o("zkCp"),O=o("madF"),S=o("gLZI"),I=o("+JJ7"),E=o("nbXh"),R=o("7klv"),T=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},_=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=function(){function e(e,t,o,a,r,n,s,c,d,p,u,h){this.route=e,this.api=t,this.activeModal=o,this.toastr=a,this.utilService=r,this.planContableService=n,this.filasService=s,this.atajoService=c,this.modalService=d,this.categoriaService=p,this.router=u,this.archivoService=h,this.esModal=!1,this.empresaSeleccionada=new l.a,this.listaEmpresas=Array(),this.invProductoCategoriaTO=new m.a,this.vistaFormulario=!1,this.accion=null,this.accionSC=null,this.listadoResultado=Array(),this.objetoSeleccionado=new m.a,this.objetoNuevoSeleccionado=new m.a,this.listadoSubCategoria=new Array,this.subCategoriaSeleccionado=new E.a,this.subCategoria=new E.a,this.isScreamMd=!0,this.tamanioEstructura=0,this.mostrarCuenta=!0,this.mostrarSubCategoria=!1,this.vistaFormularioSC=!1,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new f.a,this.subCategorias=[],this.router.url.toString().indexOf("pedidoProductoCategoria")>-1&&(this.mostrarCuenta=!1),this.constantes=i.a,this.frmTitulo=i.a.TITULO_FILTROS,this.classTitulo=i.a.ICON_FILTRAR,this.inicializarAtajos(),this.subCategoria.invProductoSubcategoriaPK=new R.a}return e.prototype.ngOnInit=function(){this.empresaModal?(this.esModal=!0,this.activar=!0,this.listaEmpresas.push(this.empresaModal),this.empresaSeleccionada=this.listaEmpresas[0],i.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.buscarProductoCategorias(),this.buscarProductoSubCategoria(),this.cambiarEmpresaSeleccionada()):(this.listaEmpresas=this.route.snapshot.data.categoriaProductoInv,this.isPedidos=this.route.snapshot.data.pedidos,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),i.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSeleccionada())),this.isScreamMd=!(window.innerWidth<=i.a.WINDOW_WIDTH_XS),this.iniciarAgGrid()},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=i.a.WINDOW_WIDTH_XS)},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new p.Hotkey(i.a.ATAJO_ESC,function(){return e.cerrarCategoria(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscar");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimir");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportar");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevo");return t&&t.click(),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_EDITAR,function(t){return!e.vistaFormulario&&e.objetoSeleccionado&&e.editarProductoCategoria(e.objetoSeleccionado),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_ELIMINAR,function(t){return!e.vistaFormulario&&e.objetoSeleccionado&&e.eliminarProductoCategoria(e.objetoSeleccionado),!1})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_GUARDAR,function(t){if(e.vistaFormulario){var o=document.getElementById("btnGuardar");return o&&o.click(),!1}})),this.atajoService.add(new p.Hotkey(i.a.ATAJO_CANCELAR,function(t){return e.vistaFormulario&&e.resetearFormulario(),!1}))},e.prototype.verRestantesSubcategorias=function(){for(var e,t=0;t<i.a.LISTA_SUBCATEGORIAS.length;t++){e=!0;for(var o=0;o<this.listadoSubCategoria.length;o++)i.a.LISTA_SUBCATEGORIAS[t]==this.listadoSubCategoria[o].invProductoSubcategoriaPK.scatCodigo&&(e=!1);e&&this.subCategorias.push(i.a.LISTA_SUBCATEGORIAS[t])}this.subCategorias&&this.accionSC==i.a.ACCION_CREAR&&(this.subCategoria.invProductoSubcategoriaPK.scatCodigo=this.subCategorias[0])},e.prototype.espacios=function(){for(var e=this.invProductoCategoriaTO.catDetalle,t=0;t<e.length;t++)e=(e=(e=(e=(e=e.split("   ").join(" ")).split("  ").join(" ")).split("'").join("")).split("*").join("")).split("'").join("");this.invProductoCategoriaTO.catDetalle=e},e.prototype.cambiarEmpresaSeleccionada=function(){var e=this;i.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.invProductoCategoriaTO=new m.a,this.limpiarListado(),this.vistaFormulario=!1,this.activar=!1,this.accion=null,this.activar=!0;var t={empresa:this.empresaSeleccionada.empCodigo};this.planContableService.getTamanioListaConEstructura(t,i.a.KEY_EMPRESA_SELECT).then(function(t){e.tamanioEstructura=e.utilService.establecerLongitudPenultimoGrupo(t)}).catch(function(t){e.utilService.handleError(t,e)})},e.prototype.buscarProductoCategorias=function(){this.cargando=!0,this.accion=null,this.limpiarListado();var e={empresa:this.empresaSeleccionada.empCodigo};this.filasTiempo.iniciarContador(),this.categoriaService.listarInvProductoCategoriaTO(e,this,i.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvProductoCategoriaTO=function(e){this.filasTiempo.finalizarContador(),this.listadoResultado=e||[],this.cargando=!1},e.prototype.buscarProductoSubCategoria=function(){this.cargando=!0,this.accionSC=null;var e={empresa:this.empresaSeleccionada.empCodigo};this.categoriaService.listarInvProductoSubCategoria(e,this,i.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarSubCategoriaTO=function(e){this.listadoSubCategoria=e||[],this.cargando=!1},e.prototype.nuevoProductoSubCategoria=function(){this.accionSC=i.a.ACCION_CREAR,this.mostrarSubCategoria=!0,this.vistaFormularioSC=!0,this.vistaFormulario=!1,this.subCategoria=new E.a,this.subCategoria.invProductoSubcategoriaPK=new R.a,this.activar=!1,this.subCategorias=[],this.verRestantesSubcategorias()},e.prototype.editarProductoSubCategoria=function(e){this.cargando=!0,this.activar=!1,this.accionSC=i.a.ACCION_EDITAR,this.mostrarSubCategoria=!0,this.vistaFormularioSC=!0,this.frmTitulo=i.a.TITULO_FORM_EDITAR_PRODUCTO_SUBCATEGORIA,this.classTitulo=i.a.ICON_EDITAR,this.subCategoria=e,this.activar=!1,this.cargando=!1,this.subCategorias=[],this.subCategorias.push(this.subCategoria.invProductoSubcategoriaPK.scatCodigo)},e.prototype.agregarSubCategoria=function(){this.cargando=!0,this.accionSC=null,this.vistaFormulario=!1,this.mostrarSubCategoria=!0,this.activar=!0,this.iniciarAgGrid(),this.cargando=!1},e.prototype.guardarProductoSubCategoria=function(e){var t=this.utilService.establecerFormularioTocado(e);e&&e.valid&&t?(this.cargando=!0,this.subCategoria.invProductoSubcategoriaPK.scatEmpresa=i.a.KEY_EMPRESA_SELECT,this.subCategoria.usrEmpresa=i.a.KEY_EMPRESA_SELECT,this.subCategoria.usrCodigo=this.empresaSeleccionada.empSmtpUserName,this.categoriaService.guardarInvProductoSubCategoria({invProductoSubcategoria:this.subCategoria},this,i.a.KEY_EMPRESA_SELECT)):this.toastr.error(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS)},e.prototype.despuesDeGuardarSubCategoria=function(e){this.buscarProductoSubCategoria(),this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatCodigo=e.invProductoSubcategoriaPK.scatCodigo,this.cancelarSubCategoria(),this.subCategorias=[],this.cargando=!1},e.prototype.actualizarProductoSubCategoria=function(e){var t=this.utilService.establecerFormularioTocado(e);e&&e.valid&&t?(this.cargando=!0,this.subCategoria.invProductoSubcategoriaPK.scatEmpresa=i.a.KEY_EMPRESA_SELECT,this.subCategoria.usrEmpresa=i.a.KEY_EMPRESA_SELECT,this.subCategoria.usrCodigo=this.empresaSeleccionada.empSmtpUserName,this.categoriaService.modificarInvProductoSubCategoria({invProductoSubcategoria:this.subCategoria},this,i.a.KEY_EMPRESA_SELECT)):this.toastr.error(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS)},e.prototype.despuesDeModificarSubCategoria=function(e){this.buscarProductoSubCategoria(),this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatCodigo=e.invProductoSubcategoriaPK.scatCodigo,this.cancelarSubCategoria(),this.subCategorias=[],this.cargando=!1},e.prototype.eliminarProductoSubCategoria=function(){var e=this,t={title:i.a.MSJ_TITULO_ELIMINAR,texto:i.a.MSJ_PREGUNTA_ELIMINAR+"<br>"+i.a.TAG_PRODUCTO_CATEGORIA+": "+this.subCategoria.scatDetalle,type:i.a.SWAL_WARNING,confirmButtonText:i.a.MSJ_SI_ELIMINAR,cancelButtonText:i.a.MSJ_CANCELAR,confirmButtonColor:i.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&(e.cargando=!0,e.categoriaService.eliminarInvProductoSubCategoria({invProductoSubcategoriaPK:e.subCategoria.invProductoSubcategoriaPK},e,i.a.KEY_EMPRESA_SELECT))})},e.prototype.despuesDeEliminarSubCategoria=function(e){this.cargando=!1,this.buscarProductoSubCategoria(),this.cancelarSubCategoria(),this.subCategorias=[]},e.prototype.cancelarSubCategoria=function(){this.vistaFormularioSC=!1,this.vistaFormulario=!1,this.activar=!0,this.subCategoria=new E.a,this.subCategoria.invProductoSubcategoriaPK=new R.a},e.prototype.atrasFormulario=function(){this.vistaFormulario=!0,this.mostrarSubCategoria=!1,this.cargando=!0,this.activar=!1,this.cargando=!1},e.prototype.limpiarListado=function(){this.gridApi=null,this.gridColumnApi=null,this.filtroGlobal="",this.listadoResultado=[],this.accion=null,this.filasTiempo.resetearContador(),this.actualizarFilas()},e.prototype.nuevoProductoCategoria=function(){this.utilService.verificarPermiso(i.a.ACCION_CREAR,this,!0)&&(this.cargando=!0,this.activar=!1,this.accion=i.a.ACCION_CREAR,this.frmTitulo=i.a.TITULO_FORM_NUEVO_PRODUCTO_CATEGORIA,this.classTitulo=i.a.ICON_CREAR,this.invProductoCategoriaTO=new m.a,this.vistaFormulario=!0,this.cargando=!1,this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatCodigo="")},e.prototype.guardarProductoCategoria=function(e){var t=this;if(this.utilService.verificarPermiso(i.a.ACCION_CREAR,this,!0)){var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){this.cargando=!0,this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatEmpresa=i.a.KEY_EMPRESA_SELECT,this.invProductoCategoriaTO.scatCodigo=this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatCodigo,this.invProductoCategoriaTO.scatEmpresa=this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatEmpresa;var a=this.categoriaService.formatearInvProductoTipoTO(this.invProductoCategoriaTO,this),r={invProductoCategoriaTO:a,accion:"I"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoCategoria",r,i.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.objetoNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"I"),t.toastr.success(e.operacionMensaje,i.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,i.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS)}},e.prototype.resetearFormulario=function(){this.frmTitulo=i.a.TITULO_FILTROS,this.classTitulo=i.a.ICON_FILTRAR,this.invProductoCategoriaTO=new m.a,this.vistaFormulario=!1,this.activar=!0,this.cuentaCodigo=null,this.cuentaDetalle=null,this.accion=null,this.iniciarAgGrid()},e.prototype.editarProductoCategoria=function(e){if(this.utilService.verificarPermiso(i.a.ACCION_EDITAR,this,!0)){this.cargando=!0,this.activar=!1,this.accion=i.a.ACCION_EDITAR,this.frmTitulo=i.a.TITULO_FORM_EDITAR_PRODUCTO_CATEGORIA,this.classTitulo=i.a.ICON_EDITAR,this.invProductoCategoriaTO=new m.a(e),this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatCodigo=this.invProductoCategoriaTO.scatCodigo,this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatEmpresa=this.invProductoCategoriaTO.scatEmpresa,this.cuentaCodigo=e.ctaCodigo;var t={empresa:i.a.KEY_EMPRESA_SELECT,codigo:this.cuentaCodigo};this.planContableService.obtenerConCuenta(t,this,i.a.KEY_EMPRESA_SELECT),this.vistaFormulario=!0,this.activar=!1,this.cargando=!1}},e.prototype.despuesDeObtenerConCuenta=function(e){this.cuentaDetalle=e?e.ctaDetalle:""},e.prototype.actualizarProductoCategoria=function(e){var t=this;if(this.utilService.verificarPermiso(i.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatEmpresa=i.a.KEY_EMPRESA_SELECT,this.invProductoCategoriaTO.scatCodigo=this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatCodigo,this.invProductoCategoriaTO.scatEmpresa=this.subCategoriaSeleccionado.invProductoSubcategoriaPK.scatEmpresa;var a=this.categoriaService.formatearInvProductoTipoTO(this.invProductoCategoriaTO,this),r={invProductoCategoriaTO:a,accion:"M"};this.api.post("todocompuWS/inventarioWebController/accionInvProductoCategoria",r,i.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.objetoNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"U"),t.toastr.success(e.operacionMensaje,i.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,i.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(i.a.MSJ_CAMPOS_INVALIDOS,i.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarProductoCategoria=function(e){var t=this;if(this.utilService.verificarPermiso(i.a.ACCION_ELIMINAR,this,!0)){var o={title:i.a.MSJ_TITULO_ELIMINAR,texto:i.a.MSJ_PREGUNTA_ELIMINAR+"<br>"+i.a.TAG_PRODUCTO_CATEGORIA+": "+e.catDetalle,type:i.a.SWAL_WARNING,confirmButtonText:i.a.MSJ_SI_ELIMINAR,cancelButtonText:i.a.MSJ_CANCELAR,confirmButtonColor:i.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invProductoCategoriaPK:new C.a({catEmpresa:t.empresaSeleccionada.empCodigo,catCodigo:e.catCodigo})};t.api.post("todocompuWS/inventarioWebController/eliminarInvProductoCategoria",a,i.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?(t.refrescarTabla(e,"D"),t.toastr.success(o.operacionMensaje,i.a.TOAST_CORRECTO)):t.toastr.warning(o.operacionMensaje,i.a.TOAST_ADVERTENCIA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}})}},e.prototype.cerrarCategoria=function(){this.objetoNuevoSeleccionado=this.objetoNuevoSeleccionado&&""==this.objetoNuevoSeleccionado.catCodigo?null:this.objetoNuevoSeleccionado;var e={categoriaSeleccionado:this.objetoNuevoSeleccionado};this.activeModal.close(e)},e.prototype.buscarCuentaContable=function(e){var t=this;if(this.utilService.validarKeyBuscar(e.keyCode)&&!this.esCuentaCodigoValido())if(this.invProductoCategoriaTO.ctaCodigo&&this.invProductoCategoriaTO.ctaCodigo.length>0){var o={empresa:this.empresaSeleccionada.empCodigo,buscar:this.invProductoCategoriaTO.ctaCodigo,ctaGrupo:null};e.srcElement.blur(),e.preventDefault();var a=this.modalService.open(v.a,{size:"lg",windowClass:"miSize",backdrop:"static"});a.componentInstance.filtrosBusquedaPlanCuenta=o,a.componentInstance.tamanioEstructura=this.tamanioEstructura,a.result.then(function(e){t.cuentaCodigo=e?e.cuentaCodigo:null,t.invProductoCategoriaTO.ctaCodigo=e?e.cuentaCodigo:"",t.invProductoCategoriaTO.ctaEmpresa=e?e.empCodigo:"",t.cuentaDetalle=e?e.cuentaDetalle.trim():""},function(){})}else this.toastr.info(i.a.MSJ_ENTER_NO_DATA,i.a.TOAST_INFORMACION)},e.prototype.esCuentaCodigoValido=function(){return this.cuentaCodigo&&this.cuentaCodigo===this.invProductoCategoriaTO.ctaCodigo},e.prototype.validarCuentaCodigo=function(){this.cuentaCodigo!==this.invProductoCategoriaTO.ctaCodigo&&(this.cuentaCodigo=null,this.cuentaDetalle="",this.invProductoCategoriaTO.ctaCodigo="",this.invProductoCategoriaTO.ctaEmpresa="")},e.prototype.imprimir=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listadoInvProductoCategoriaTO:this.listadoResultado};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteInvProductoCategoriaTO",t,this.empresaSeleccionada).then(function(t){t._body.byteLength>0?e.utilService.descargarArchivoPDF("listaProductoCategoria_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(i.a.MSJ_ERROR_IMPRIMIR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportar=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listadoInvProductoCategoriaTO:this.listadoResultado};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteInvProductoCategoriaTO",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListadoCategoriasProducto_"):e.toastr.warning(i.a.MSJ_ERROR_EXPORTAR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.iniciarAgGrid=function(){this.mostrarSubCategoria?this.columnDefs=this.categoriaService.generarColumnasProductoSubCategoria():this.columnDefs=this.categoriaService.generarColumnasProductoCategoria(this.isPedidos),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:O.a,toolTip:S.a,inputEstado:I.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarFila(0),this.redimencionarColumnas()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.mostrarSubCategoria?(this.subCategoria=e,this.generarOpcionesSubCategoria()):(this.objetoSeleccionado=e,this.generarOpciones()),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.generarOpciones=function(){var e=this,t=this.objetoSeleccionado&&this.utilService.verificarPermiso(i.a.ACCION_EDITAR,this)&&!this.vistaFormulario,o=this.objetoSeleccionado&&this.utilService.verificarPermiso(i.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario;this.opciones=[{label:i.a.ACCION_EDITAR,icon:i.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editarProductoCategoria(e.objetoSeleccionado):null}},{label:i.a.ACCION_ELIMINAR,icon:i.a.ICON_ELIMINAR,disabled:!o,command:function(t){return o?e.eliminarProductoCategoria(e.objetoSeleccionado):null}}]},e.prototype.generarOpcionesSubCategoria=function(){var e=this,t=this.subCategoria&&this.utilService.verificarPermiso(i.a.ACCION_EDITAR,this)&&this.mostrarSubCategoria,o=this.subCategoria&&this.utilService.verificarPermiso(i.a.ACCION_ELIMINAR,this)&&this.mostrarSubCategoria;this.opciones=[{label:i.a.ACCION_EDITAR,icon:i.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editarProductoSubCategoria(e.subCategoria):null}},{label:i.a.ACCION_ELIMINAR,icon:i.a.ICON_ELIMINAR,disabled:!o,command:function(t){return o?e.eliminarProductoSubCategoria():null}}]},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listadoResultado.length>0)(a=this.listadoResultado.slice()).unshift(e),this.listadoResultado=a,this.seleccionarFila(0);break;case"U":var o=this.listadoResultado.findIndex(function(t){return t.catCodigo===e.catCodigo});(a=this.listadoResultado.slice())[o]=e,this.listadoResultado=a,this.seleccionarFila(o);break;case"D":var a;o=this.listadoResultado.findIndex(function(t){return t.catCodigo===e.catCodigo});(a=this.listadoResultado.slice()).splice(o,1),this.listadoResultado=a,this.listadoResultado.length>0&&this.seleccionarFila(0===o?0:o-1)}this.refreshGrid(),this.activar=!0},T([Object(a.ViewChild)("excelDownload"),_("design:type",Object)],e.prototype,"excelDownload",void 0),T([Object(a.Input)(),_("design:type",l.a)],e.prototype,"empresaModal",void 0),T([Object(a.Input)(),_("design:type",String)],e.prototype,"razonSocial",void 0),T([Object(a.ViewChild)("menuOpciones"),_("design:type",b.ContextMenu)],e.prototype,"menuOpciones",void 0),T([Object(a.HostListener)("window:resize",["$event"]),_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],e.prototype,"onResize",null),e=T([Object(a.Component)({selector:"app-producto-categoria",template:o("ltaV"),styles:[o("i8Yu")]}),_("design:paramtypes",[u.ActivatedRoute,d.a,r.a,n.b,s.a,A.a,c.a,p.HotkeysService,r.b,h.a,u.Router,g.a])],e)}()},es8l:function(e,t){e.exports='\x3c!--CABECERA--\x3e\r\n<form #frmContableDetalle=\'ngForm\' autocomplete="off">\r\n  <div class="card mb-1" [ngClass]="{\'card-accent-danger\': conContable.conReversado || conContable.conPendiente}">\r\n    <div class="card-header">\r\n      <strong>{{constantes.TAG_DATOS_GENERALES}}</strong>\r\n      <div class="card-header-actions">\r\n        <span class="mr-2 badge badge-pill" [ngClass]="{\'bg-danger\': conContable.conPendiente,\'bg-reversado\':conContable.conReversado}">{{conContable.conPendiente?constantes.ETIQUETA_PENDIENTE:\r\n          conContable.conAnulado?constantes.ETIQUETA_ANULADO:\r\n          conContable.conReversado?constantes.ETIQUETA_REVERSADO:\r\n          conContable.conBloqueado?constantes.ETIQUETA_BLOQUEADO:\'\'}}\r\n        </span>\r\n        <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionContable"\r\n          aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar" (click)="collpase()">\r\n          <i class="fa fa-minus"></i>\r\n        </a>\r\n      </div>\r\n    </div>\r\n    <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0 " id="collapseInformacionContable">\r\n      <div class="row">\r\n        \x3c!--Fecha--\x3e\r\n        <div class="col-lg-3 col-md-3">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_FECHA}}</strong>\r\n            </label>\r\n            <p-calendar inputId="iniFecha" name="iniFecha" [(ngModel)]="conContable.conFecha" dateFormat="dd/mm/yy"\r\n              [locale]="es" [showIcon]="true" [minDate]="fechaMin" [maxDate]="fechaMax" [appMinDate]="fechaMin"\r\n              [appMaxDate]="fechaMax" [inputStyleClass]="fechaValido ==false ?\'has-error\':\'\' " (ngModelChange)="verificarFechaValida()"\r\n              [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR || data.accion===constantes.ACCION_REVERSAR || data.accion===constantes.ACCION_ELIMINAR"\r\n              required></p-calendar>\r\n          </div>\r\n        </div>\r\n        \x3c!--Tipo de Comoprobante--\x3e\r\n        <div class="col-lg-3 col-md-3">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_TIPO_COMPROBANTES}}</b>\r\n            </label>\r\n            <label class="form-control form-control-sm text-uppercase label-input ocultar-en-tabla">{{tipoSeleccionado?.tipDetalle}}\r\n              ({{tipoSeleccionado?.tipCodigo}})</label>\r\n          </div>\r\n        </div>\r\n        \x3c!--Concepto--\x3e\r\n        <div class="col-lg-6 col-md-6">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_BENEFICIARIO}}</strong>\r\n            </label>\r\n            <label class="form-control form-control-sm text-uppercase label-input ocultar-en-tabla">{{conContable.conConcepto}}</label>\r\n          </div>\r\n        </div>\r\n        \x3c!--Detalle--\x3e\r\n        <div class="col-lg-6 col-md-6">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_DETALLE}}</strong>\r\n            </label>\r\n            <label class="form-control form-control-sm text-uppercase label-input ocultar-en-tabla">{{conContable.conDetalle}}</label>\r\n          </div>\r\n        </div>\r\n        \x3c!--Observaciones--\x3e\r\n        <div class="col-lg-6 col-md-6">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_OBSERVACIONES}}</strong>\r\n            </label>\r\n            <input [appDescripcion]="conContable.conObservaciones" appUppercase class="form-control form-control-sm text-uppercase"\r\n              type="text" [(ngModel)]="conContable.conObservaciones" placeholder="{{constantes.TAG_SIN_OBSERVACIONES}}"\r\n              [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR || data.accion===constantes.ACCION_REVERSAR || data.accion===constantes.ACCION_ELIMINAR"\r\n              (ngModelChange)="conContable.conObservaciones=conContable.conObservaciones.trim()" name="obs">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>'},fI90:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <form #frmProducto=\'ngForm\' name="frmProducto" class="card m-0 mb-2" autocomplete="off">\r\n      <fieldset [disabled]="vistaFormulario">\r\n        <div class="card-header">\r\n          <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n          <b>{{constantes.TITULO_FILTROS}}</b>\r\n        </div>\r\n        <div class="card-body  pb-0 pt-1">\r\n          \x3c!--FORMULARIO EMPRESA--\x3e\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSelect()">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_BUSQUEDA}}</b>\r\n            </label>\r\n            <input class="form-control form-control-sm mousetrap text-uppercase" placeholder="{{constantes.TAG_OBLIGATORIO}}" name="busqueda"\r\n              [(ngModel)]="busqueda" (ngModelChange)="limpiarResultado()" appUppercase [appFocus]="true">\r\n          </div>\r\n        </div>\r\n        <div class="card-footer text-muted">\r\n          <div class="text-right">\r\n            <div class="btn-group mr-1">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnBuscarProductos" (click)="listarProductos(false)"\r\n                title="{{constantes.ATAJO_BUSCAR}}" disabled="true">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split"\r\n                data-toggle="dropdown" id="btnInactivo" disabled="true">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="listarProductos(true)">{{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n              </div>\r\n            </div>\r\n            <button class="btn btn-sm btn-primary" type="button" id="btnNuevoProductos" [disabled]="!frmProducto.valid"\r\n              title="{{constantes.ATAJO_NUEVO}}" (click)="verificarPermiso(constantes.ACCION_CREAR, true) ? nuevoProducto() : null">\r\n              <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </fieldset>\r\n    </form>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <div [hidden]="!vistaListado || !parametro">\r\n      <app-listado-productos [parametrosBusqueda]="parametro" [empresaSeleccionada]="empresaSeleccionada"\r\n        (enviarActivar)="activar=$event" [listar]="listarProductosEstado" (enviarAccion)="accionLista($event)"\r\n        [objetoNuevoEditado]="objetoNuevoEditado" [activarAtajos]="vistaListado"></app-listado-productos>\r\n    </div>\r\n    <div *ngIf="vistaFormulario && !vistaListado && parametrosFormulario">\r\n      <app-formulario-productos [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n        [listadoCategorias]="listadoCategorias" (enviarAccion)="accionLista($event)" (enviarActivar)="activar=$event"></app-formulario-productos>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},faRU:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.fpSecuencial=null,this.fpDetalle="",this.ctaCodigo="",this.validar=!1,this.postFechados=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.fpSecuencial=e.fpSecuencial?e.fpSecuencial:this.fpSecuencial,this.fpDetalle=e.fpDetalle?e.fpDetalle:this.fpDetalle,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.validar=e.validar?e.validar:this.validar,this.postFechados=e.postFechados?e.postFechados:this.postFechados},e}()},fkj5:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var a=o("jy0O"),i=function(){function e(e){this.invPedidosOrdenCompraMotivoPK=new a.a,this.ocmDetalle="",this.usrCodigo="",this.usrFechaInserta=null,this.ocmNotificarProveedor=!0,this.ocmNotificarAprobador=!0,this.ocmCostoFijo=!1,this.ocmAprobacionAutomatica=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invPedidosOrdenCompraMotivoPK=e.invPedidosOrdenCompraMotivoPK?e.invPedidosOrdenCompraMotivoPK:this.invPedidosOrdenCompraMotivoPK,this.ocmDetalle=e.ocmDetalle?e.ocmDetalle:this.ocmDetalle,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.ocmNotificarProveedor=1==e.ocmNotificarProveedor||0==e.ocmNotificarProveedor?e.ocmNotificarProveedor:this.ocmNotificarProveedor,this.ocmNotificarAprobador=1==e.ocmNotificarAprobador||0==e.ocmNotificarAprobador?e.ocmNotificarAprobador:this.ocmNotificarAprobador,this.ocmCostoFijo=e.ocmCostoFijo?e.ocmNotificarProveedor:this.ocmCostoFijo,this.ocmAprobacionAutomatica=e.ocmAprobacionAutomatica?e.ocmAprobacionAutomatica:this.ocmAprobacionAutomatica},e}()},flmD:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var a=o("jC/Q"),i=function(){function e(e){this.prdSectorPK=new a.a,this.secNombre="",this.secLatitud="",this.secLongitud="",this.secActivo=!1,this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=new Date,this.prdSobrevivenciaList=[],this.prdPiscinaList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.prdSectorPK=e.prdSectorPK?e.prdSectorPK:this.prdSectorPK,this.secNombre=e.secNombre?e.secNombre:this.secNombre,this.secLatitud=e.secLatitud?e.secLatitud:this.secLatitud,this.secLongitud=e.secLongitud?e.secLongitud:this.secLongitud,this.secActivo=e.secActivo?e.secActivo:this.secActivo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.prdSobrevivenciaList=e.prdSobrevivenciaList?e.prdSobrevivenciaList:this.prdSobrevivenciaList,this.prdPiscinaList=e.prdPiscinaList?e.prdPiscinaList:this.prdPiscinaList},e}()},"g/5y":function(e,t){e.exports='<div class="card m-0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivar" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{titulo}} - {{empresaSeleccionada.empNombre}}</strong>\r\n    <div class="card-header-actions" *ngIf="!esContable">\r\n      <div class="btn-group">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="guardarPrestamo(frmDatos)"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n          (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n            aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{accion ===\r\n            constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class="card-header-actions" *ngIf="esContable">\r\n      <app-botones-accion [conContable]="conContable" [data]="data" (enviarAccion)="accionesBotones($event)"></app-botones-accion>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-1">\r\n    <fieldset [disabled]="!puedeEditarTabla">\r\n      <div class="p-0" *ngIf="esContable">\r\n        <app-contable-cabecera [data]="data" [conContable]="conContable" [tipoSeleccionado]="tipoSeleccionado"\r\n          [empresaSeleccionada]="empresaSeleccionada"></app-contable-cabecera>\r\n      </div>\r\n      <div class="card mb-1">\r\n        <div class="card-header">\r\n          <b> {{constantes.TAG_DATOS_GENERALES}}</b>\r\n          <div class="card-header-actions">\r\n            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseClienteInfo"\r\n              aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n              <i class="fa fa-minus"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseClienteInfo">\r\n          <form #frmDatos=\'ngForm\' name="frmDatos" autocomplete="off">\r\n            <div class="row">\r\n              <div class="form-group form-group-sm col-sm-4">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_MOTIVO}}</b>\r\n                </label>\r\n                <select class="form-control form-control-sm  mousetrap" name="prestamo" required [(ngModel)]="prestamoMotivoSeleccionado"\r\n                  [appFocus]="accion === constantes.ACCION_CREAR">\r\n                  <option selected disabled value=null>{{constantes.TAG_SELECCIONE}}</option>\r\n                  <option [ngValue]="prestamo" *ngFor="let prestamo of listaPrestamoMotivo">\r\n                    {{prestamo.rhPrestamoMotivoPK.motDetalle}}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class="form-group form-group-sm col-sm-4 has-feedback">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_TRABAJADOR}}</b>\r\n                </label>\r\n                <input type="text" name="trabajador" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="rhPrestamo.rhEmpleado.rhEmpleadoPK.empId"\r\n                  class="form-control form-control-sm text-uppercase mousetrap" (keydown)="abrirModalTrabajadores($event)"\r\n                  (blur)="validarEmpleado()" [ngbTooltip]="rhPrestamo.rhEmpleado.empNombres ? rhPrestamo.rhEmpleado.empNombres : null"\r\n                  required appUppercase>\r\n                <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_COINCIDENCIA_EMPLEADO}}"\r\n                  triggers="mouseenter:mouseleave" container="body" *ngIf="puedeEditarTabla"></span>\r\n              </div>\r\n              <div class="form-group form-group-sm col-sm-4">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_FECHA}}</b>\r\n                </label>\r\n                <p-calendar inputId="fechaHasta" class="mousetrap" name="fechaHasta" [(ngModel)]="fechaHasta"\r\n                  dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true" [maxDate]="fechaHasta"\r\n                  [appMaxDate]="fechaActual"></p-calendar>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="form-group form-group-sm col-sm-4">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_VALOR}}</b>\r\n                </label>\r\n                <input type="text" name="valor" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="rhPrestamo.preValor"\r\n                  class="form-control form-control-sm text-right mousetrap" [appAutonumeric]="configAutonumericReales"\r\n                  [appAutonumericValue]="rhPrestamo.preValor" value="{{rhPrestamo.preValor}}" (updateValue)="rhPrestamo.preValor = $event"\r\n                  [appMinNumber]="0" required>\r\n              </div>\r\n              <div class="form-group form-group-sm col-sm-4">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_NUMERO_PAGOS}}</b>\r\n                </label>\r\n                <input type="text" name="numeroPagos" placeholder="{{constantes.TAG_OBLIGATORIO}}" [appAutonumeric]="configAutonumericEnteros"\r\n                  required [appAutonumericValue]="rhPrestamo.preNumeroPagos" value="{{rhPrestamo.preNumeroPagos}}"\r\n                  [(ngModel)]="rhPrestamo.preNumeroPagos" class="form-control form-control-sm text-right mousetrap">\r\n              </div>\r\n              <div class="form-group form-group-sm col-sm-4">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_FORMA_PAGO}}</b>\r\n                </label>\r\n                <select class="form-control form-control-sm  mousetrap" name="formapago" required [(ngModel)]="rhComboFormaPagoTO"\r\n                  (ngModelChange)="validarDocumento()">\r\n                  <option selected disabled value=null>{{constantes.TAG_SELECCIONE}}</option>\r\n                  <option [ngValue]="formapago" *ngFor="let formapago of listaFormaPago">\r\n                    {{formapago.fpDetalle}}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="form-group form-group-sm col-sm-4">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_NUMERO_DOCUMENTO}}</b>\r\n                </label>\r\n                <input type="text" name="numeroDocumento" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="rhPrestamo.preDocumento"\r\n                  [ngClass]="{ \'has-error\':!documentoValido}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                  maxlength="100" (blur)="validarDocumento()">\r\n              </div>\r\n              <div class="form-group form-group-sm col-sm-4">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_OBSERVACION}}</b>\r\n                </label>\r\n                <input type="text" name="observacion" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="rhPrestamo.preObservaciones"\r\n                  appUppercase class="form-control form-control-sm text-uppercase mousetrap">\r\n              </div>\r\n              <div class="form-group col-sm-4 has-feedback pr-2">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_REVERSAR}}</b>\r\n                </label>\r\n                <div class="switch">\r\n                  <label>\r\n                    <input id="reversar" name="reversar" type="checkbox" [(ngModel)]="reversar">\r\n                    <span class="lever"></span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"g/d4":function(e,t){e.exports='<div class="modal-primary">\r\n  <div class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong> {{constantes.TAG_CODIGO_BARRAS}}</strong>\r\n    </span>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrar()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class="modal-body">\r\n    <div class="row">\r\n      <div class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card mb-0">\r\n          <div class="card-header p-1">\r\n            <i class="{{constantes.ICON_CREAR}}"></i>\r\n            <b>{{constantes.TAG_AGREGAR_CODIGO_BARRAS}}</b>\r\n            <div class="card-header-actions">\r\n              <button id="btnGuardar" type="button" (click)="guardar()" class="btn btn-sm btn-primary mr-1" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n                (click)="cerrar()">\r\n                <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            <form #frmCodigoBarras="ngForm" autocomplete="off">\r\n              <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_CODIGO}} 1</strong>\r\n                  </label>\r\n                  <input class="form-control form-control-sm text-uppercase mousetrap" name="proCodigoBarra" type="text"\r\n                    placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="codigoBarra.proCodigoBarra" appUppercase [appFocus]="true">\r\n                </div>\r\n                <div class="form-group col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_CODIGO}} 2</strong>\r\n                  </label>\r\n                  <input class="form-control form-control-sm text-uppercase mousetrap" name="proCodigoBarra2" type="text"\r\n                    placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="codigoBarra.proCodigoBarra2" appUppercase>\r\n                </div>\r\n                <div class="form-group col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_CODIGO}} 3</strong>\r\n                  </label>\r\n                  <input class="form-control form-control-sm text-uppercase mousetrap" name="proCodigoBarra3" type="text"\r\n                    placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="codigoBarra.proCodigoBarra3" appUppercase>\r\n                </div>\r\n                <div class="form-group col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_CODIGO}} 4</strong>\r\n                  </label>\r\n                  <input class="form-control form-control-sm text-uppercase mousetrap" name="proCodigoBarra4" type="text"\r\n                    placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="codigoBarra.proCodigoBarra4" appUppercase>\r\n                </div>\r\n                <div class="form-group col-sm-6">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_CODIGO}} 5</strong>\r\n                  </label>\r\n                  <input class="form-control form-control-sm text-uppercase mousetrap" name="proCodigoBarra5" type="text"\r\n                    placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="codigoBarra.proCodigoBarra5" appUppercase>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'},gKqU:function(e,t,o){"use strict";o.d(t,"a",function(){return v});var a=o("CcnG"),i=o("yqOf"),r=o("mwBN"),n=o("8fiX"),s=o("WCC+"),c=o("Vlg3"),l=o("ZYCi"),d=o("yccp"),p=o("lThc"),u=o("CEfs"),h=o("nR5P"),m=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},C=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,o,a,i,c){this.route=e,this.productoCategoriaService=t,this.productoService=o,this.atajoService=a,this.filasService=i,this.utilService=c,this.listaEmpresas=new Array,this.listadoCategorias=new Array,this.empresaSeleccionada=new n.a,this.categoriaSeleccionada=new s.a,this.parametro=null,this.parametrosFormulario=null,this.constantes=r.a,this.busqueda=null,this.cargando=!1,this.vistaFormulario=!1,this.vistaListado=!1,this.activar=!1,this.listarProductosEstado=!1,this.categoriaSeleccionada=new s.a,this.constantes=r.a,this.definirAtajosDeTeclado()}return e.prototype.ngOnInit=function(){this.listaEmpresas=this.route.snapshot.data.productoInv,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),r.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSelect())},e.prototype.cambiarEmpresaSelect=function(){r.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.categoriaSeleccionada=new s.a,this.activar=!1,this.vistaFormulario=!1,this.vistaListado=!1,this.filasService.actualizarFilas("0","0")},e.prototype.cargarCategoriasDeProducto=function(){this.cargando=!0,this.productoCategoriaService.listarInvProductoCategoriaTO({empresa:r.a.KEY_EMPRESA_SELECT},this,r.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvProductoCategoriaTO=function(e){var t=this;this.listadoCategorias=e,this.listadoCategorias.length>0?this.categoriaSeleccionada=this.categoriaSeleccionada&&this.categoriaSeleccionada.catCodigo?this.listadoCategorias.find(function(e){return e.catCodigo===t.categoriaSeleccionada.catCodigo}):this.listadoCategorias[0]:this.categoriaSeleccionada=null,this.cargando=!1},e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new d.Hotkey(r.a.ATAJO_BUSCAR,function(){var e=document.getElementById("btnBuscarProductos");return e&&e.click(),!1})),this.atajoService.add(new d.Hotkey(r.a.ATAJO_NUEVO,function(){var e=document.getElementById("btnNuevoProductos");return e&&e.click(),!1}))},e.prototype.verificarPermiso=function(e,t){return this.productoService.verificarPermiso(e,this,t)},e.prototype.validarBusqueda=function(){return this.busqueda&&""!==this.busqueda},e.prototype.listarProductos=function(e){this.limpiarResultado(),this.parametro={empresa:r.a.KEY_EMPRESA_SELECT,categoria:null,busqueda:this.busqueda,incluirInactivos:e,limite:!1,activar:!1},this.listarProductosEstado=!0,this.activar=!1,this.vistaListado=!0,this.vistaFormulario=!1},e.prototype.limpiarResultado=function(){this.parametro=null,this.parametrosFormulario=null,this.vistaListado=!1,this.vistaFormulario=!1,this.listarProductosEstado=!1,this.objetoNuevoEditado={producto:null,accion:null},this.filasService.actualizarFilas(0,0),this.busqueda?(document.getElementById("btnBuscarProductos").disabled=!1,document.getElementById("btnInactivo").disabled=!1):(document.getElementById("btnBuscarProductos").disabled=!0,document.getElementById("btnInactivo").disabled=!0)},e.prototype.nuevoProducto=function(){this.vistaFormulario=!0,this.vistaListado=!1,this.parametrosFormulario={accion:r.a.ACCION_CREAR,activar:this.activar,objetoSeleccionado:new p.a}},e.prototype.accionLista=function(e){switch(e.accion){case r.a.ACCION_CANCELAR:this.activar=!1,this.vistaListado=!0,this.parametrosFormulario=null,this.vistaFormulario=!1,this.listarProductosEstado=!1,this.objetoNuevoEditado={producto:null,accion:null};break;case r.a.ACCION_CREADO:case r.a.ACCION_MODIFICADO:this.objetoNuevoEditado={accion:e.accion,producto:e.objeto},this.parametrosFormulario=null,this.vistaFormulario=!1,this.activar=!1,this.vistaListado=!0,this.listarProductosEstado=!1;break;case r.a.ACCION_EDITAR:case r.a.ACCION_CONSULTAR:this.objetoNuevoEditado={accion:null,producto:null},this.mostrarFormulario(e);break;default:this.listarProductos(!1)}this.definirAtajosDeTeclado()},e.prototype.mostrarFormulario=function(e){this.vistaFormulario=!0,this.vistaListado=!1,this.activar=!0,this.parametrosFormulario={accion:e.accion,activar:!0,objetoSeleccionado:e.objetoSeleccionado}},e=m([Object(a.Component)({selector:"app-producto",template:o("fI90"),styles:[o("J2gc")]}),C("design:paramtypes",[l.ActivatedRoute,c.a,i.a,d.HotkeysService,u.a,h.a])],e)}()},gN6P:function(e,t){e.exports='<div class="card mb-0" *ngIf="listadoClientes?.length>0" [ngClass]="{\'modal-primary\': isModal}">\r\n  <div class="modal-header p-2" *ngIf="isModal">\r\n    <h4 class="modal-title">{{constantes.INVENTARIO_CLIENTE_LISTADO}}</h4>\r\n    <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class="card-header p-1" *ngIf="!isModal">\r\n    <button class="btn btn-sm btn-primary" id="btnActivarListado" *ngIf="isScreamMd" (click)="cambiarActivar(activar)"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <b> {{constantes.INVENTARIO_CLIENTE_LISTADO}}</b>\r\n    <div class="card-header-actions">\r\n      <div class="btn-group d-lg-none">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirCliente" (click)="imprimir()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n        </button>\r\n        \x3c!--Exportar filtrado--\x3e\r\n        <div class="btn-group">\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnExportarCliente" (click)="exportarTodos()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split mr-1" data-toggle="dropdown"\r\n            aria-haspopup="true" aria-expanded="false" (click)="abrirExportar()">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item">\r\n              <b>{{constantes.TAG_OPCIONES}}</b> &nbsp; &nbsp; <input type="checkbox" [(ngModel)]="exportarTodosEstado"\r\n                (change)="cambiarEstadoExportar()" />\r\n            </a>\r\n            <a class="dropdown-item" *ngFor="let item of columnDefsExportar"><input type="checkbox" [(ngModel)]="item.check"\r\n                (change)="cambiarEstadoItemExportar()" />&nbsp;{{item.headerName}}</a>\r\n            <a class="dropdown-item text-right">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnExportarCliente" (click)="exportar()">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              </button>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirBodega" (click)="imprimir()" placement="top"\r\n          ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n          <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n        </button>\r\n\r\n        \x3c!--Exportar filtrado--\x3e\r\n        <div class="btn-group">\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnExportarCliente" (click)="exportarTodos()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split mr-1" data-toggle="dropdown"\r\n            aria-haspopup="true" aria-expanded="false" (click)="abrirExportar()">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item"> <input type="checkbox" [(ngModel)]="exportarTodosEstado" (change)="cambiarEstadoExportar()" />&nbsp;\r\n              <b>{{constantes.TAG_OPCIONES}}</b> </a>\r\n            <a class="dropdown-item" *ngFor="let item of columnDefsExportar"><input type="checkbox" [(ngModel)]="item.check"\r\n                (change)="cambiarEstadoItemExportar()" />&nbsp;{{item.headerName}}</a>\r\n            <a class="dropdown-item text-right">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnExportarCliente" (click)="exportar()">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n              </button>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        \x3c!--Fin de exportar filtrado--\x3e\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body" style="padding: 0 0 0 0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n            size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \x3c!--listado de cliente listado--\x3e\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 206px);" class="ag-theme-balham"\r\n      [rowData]="listadoClientes" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n      [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n      [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n      (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="!this.isModal?mostrarContextMenu($event.data, $event.event):null"\r\n      (contextmenu)="!this.isModal?$event.preventDefault():null" (filterChanged)="actualizarFilas()"\r\n      (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="this.isModal?filaSeleccionar():consultarClientes();">\r\n    </ag-grid-angular>\r\n    \x3c!--end listado cliente listado--\x3e\r\n  </div>\r\n  <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},hBue:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.catEmpresa="",this.catCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.catEmpresa=e.catEmpresa?e.catEmpresa:this.catEmpresa,this.catCodigo=e.catCodigo?e.catCodigo:this.catCodigo},e}()},"hL/3":function(e,t){e.exports='<div *ngIf="listadoResultado?.length > 0">\r\n  <div class="row">\r\n    <div class="col-sm-5 col-md-6">\r\n      <div class="input-group p-1">\r\n        <input [(ngModel)]="filtroGlobal" type="text" class="form-control form-control-sm input-filter mousetrap" style="font-family: Arial, FontAwesome"\r\n          placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="filtrarRapido()">\r\n        <div class="input-group-append">\r\n          <button class="btn btn-sm btn-primary" (click)="filtrarRapido()" type="button"> <i class="{{constantes.ICON_BUSCAR}}"></i></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="col-sm-7 col-md-6">\r\n      <div class="float-right pr-1">\r\n        <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n          maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--195px--\x3e\r\n  <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listadoResultado"\r\n    [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n    [enableColResize]="true" [context]="context" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n    (filterChanged)="onFilterChanged($event)" (gridColumnsChanged)="redimencionarColumnas()"  [frameworkComponents]="frameworkComponents">\r\n  </ag-grid-angular>\r\n\r\n  <app-list-detail *ngIf="act" [rowData]="listaResultado" [columnDefs]="columnDefs"></app-list-detail>\r\n</div>'},hQId:function(e,t){e.exports=""},hg2a:function(e,t){e.exports=""},hgeU:function(e,t){e.exports='<div *ngIf="mostrarContable">\r\n  <form #frmContableDetalle="ngForm" novalidate autocomplete="off">\r\n    <div class="card mb-0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarContable" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="cambiarEstadoActivar()"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{tituloForm}} {{objetoContable.tipoSeleccionado.tipDetalle}} No.\r\n          {{conContable.conContablePK.conNumero}}:\r\n        </strong>\r\n        <strong class="text-primary">{{data.empresaSeleccionada.empNombre}}</strong>\r\n        <div class="btn-group pull-right">\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirContable" (click)="imprimirContable()"\r\n            title="{{constantes.ATAJO_IMPRIMIR}}" *ngIf="!conContable.conPendiente && !conContable.conAnulado && !conContable.conReversado && data.accion !== constantes.ACCION_NUEVO && data.accion !== constantes.ACCION_ANULAR && data.accion !== constantes.ACCION_REVERSAR">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" id="btnVerImagenesContable" (click)="verImagenes()"\r\n            *ngIf="isCompra">\r\n            <i class="{{constantes.ICON_IMAGENES}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMAGENES}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-danger mr-1" id="btnAnularContable" (click)="guardarAnularReversar()"\r\n            title="{{constantes.ATAJO_ANULAR}}" *ngIf="data.accion === constantes.ACCION_ANULAR">\r\n            <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_ANULAR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-danger mr-1" id="btnReversarContable" (click)="guardarAnularReversar()"\r\n            title="{{constantes.ATAJO_REVERSAR}}" *ngIf="data.accion === constantes.ACCION_REVERSAR">\r\n            <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_REVERSAR}}</span>\r\n          </button>\r\n          <div class="btn-group" *ngIf="data.accion === constantes.ACCION_MAYORIZAR">\r\n            <button type="button" class="btn btn-sm btn-primary" id="btnMayorizarContable" (click)="verificarSiGuardarComoPendiente(frmContableDetalle)"\r\n              title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              style="margin-right: 3px;">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="guardarMayorizarPendiente(frmContableDetalle)">\r\n                {{constantes.TAG_PENDIENTE}}</a>\r\n            </div>\r\n          </div>\r\n          <div class="btn-group" *ngIf="data.accion === constantes.ACCION_NUEVO">\r\n            <button type="button" class="btn btn-sm btn-primary" id="btnMayorizarContable" (click)="verificarSiGuardarComoPendiente(frmContableDetalle)"\r\n              title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_MAYORIZAR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              style="margin-right: 3px;">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="guardarNuevoContablePendiente(frmContableDetalle)">\r\n                {{constantes.TAG_PENDIENTE}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarContable" (click)="confirmacionCerrarContable()"\r\n            title="{{constantes.ATAJO_CANCELAR}}" *ngIf="!(data.accion === constantes.ACCION_CONSULTAR)">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarContable" (click)="confirmacionCerrarContable()"\r\n            title="{{constantes.ATAJO_CANCELAR}}" *ngIf="data.accion === constantes.ACCION_CONSULTAR">\r\n            <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-1">\r\n        \x3c!--CABECERA--\x3e\r\n        <div class="card mb-1" [ngClass]="{\'card-accent-danger\': conContable.conReversado || conContable.conPendiente}">\r\n          <div class="card-header">\r\n            <strong>{{constantes.TAG_DATOS_GENERALES}}</strong>\r\n            <div class="card-header-actions">\r\n              <span class="mr-2 badge badge-pill" [ngClass]="{\'bg-danger\': conContable.conPendiente,\'bg-reversado\':conContable.conReversado}">{{conContable.conPendiente?constantes.ETIQUETA_PENDIENTE:\r\n                conContable.conAnulado?constantes.ETIQUETA_ANULADO:\r\n                conContable.conReversado?constantes.ETIQUETA_REVERSADO:\r\n                conContable.conBloqueado?constantes.ETIQUETA_BLOQUEADO:\'\'}}\r\n              </span>\r\n              <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionContable"\r\n                aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar" (click)="collpase()">\r\n                <i class="fa fa-minus"></i>\r\n              </a>\r\n            </div>\r\n          </div>\r\n          <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0 " id="collapseInformacionContable">\r\n            <div class="row">\r\n              \x3c!--Fecha--\x3e\r\n              <div class="col-lg-3 col-md-3">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_FECHA}}</strong>\r\n                  </label>\r\n                  <p-calendar inputId="iniFecha" name="iniFecha" [(ngModel)]="conContable.conFecha" dateFormat="dd/mm/yy"\r\n                    [locale]="es" [showIcon]="true" [minDate]="fechaMin" [maxDate]="fechaMax" [appMinDate]="fechaMin"\r\n                    [appMaxDate]="fechaMax" [inputStyleClass]="fechaValido ==false ?\'has-error\':\'\' " (ngModelChange)="verificarFechaValida()"\r\n                    [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR || data.accion===constantes.ACCION_REVERSAR"\r\n                    required></p-calendar>\r\n                </div>\r\n              </div>\r\n              \x3c!--Tipo de Comoprobante--\x3e\r\n              <div class="col-lg-3 col-md-3">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_TIPO_COMPROBANTES}}</b>\r\n                    &nbsp;\r\n                    <a (click)="listarTipos()" *ngIf="data.accion ===constantes.ACCION_NUEVO || data.accion===constantes.ACCION_ANULAR || data.accion===constantes.ACCION_REVERSAR || data.accion===constantes.ACCION_MAYORIZAR">\r\n                      <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_TIPOS_COMPROBANTES}}"\r\n                        container="body"></span>\r\n                    </a>\r\n                  </label>\r\n                  <p-dropdown [options]="listaTipos" name="tipo" [required]="true" [(ngModel)]="tipoSeleccionado"\r\n                    optionLabel="tipDetalle" [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR || data.accion===constantes.ACCION_REVERSAR || data.accion===constantes.ACCION_MAYORIZAR">\r\n                    <ng-template let-item pTemplate="selectedItem">\r\n                      {{tipoSeleccionado?.tipDetalle}} ({{tipoSeleccionado?.tipCodigo}} )\r\n                    </ng-template>\r\n                    <ng-template let-fs pTemplate="item">\r\n                      <div class=""> {{fs.value.tipDetalle}} ({{fs.value.tipCodigo}})\r\n                      </div>\r\n                    </ng-template>\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n              \x3c!--Concepto--\x3e\r\n              <div class="col-lg-6 col-md-6">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{tipoConcepto}}</strong>\r\n                  </label>\r\n                  <input [appDescripcion]="conContable.conConcepto" appUppercase class="form-control form-control-sm text-uppercase"\r\n                    type="text" [(ngModel)]="conContable.conConcepto" placeholder="Sin Beneficiario" (ngModelChange)="conContable.conConcepto = conContable.conConcepto.trim()"\r\n                    [disabled]="(data.accion !== constantes.ACCION_NUEVO && data.accion !== constantes.ACCION_MAYORIZAR) || data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR || data.accion===constantes.ACCION_REVERSAR"\r\n                    name="beneficiario">\r\n                </div>\r\n              </div>\r\n              \x3c!--Detalle--\x3e\r\n              <div class="col-lg-6 col-md-6">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                  </label>\r\n                  <input [appDescripcion]="conContable.conDetalle" appUppercase class="form-control form-control-sm text-uppercase"\r\n                    type="text" [(ngModel)]="conContable.conDetalle" placeholder="{{constantes.TAG_SIN_DETALLE}}"\r\n                    (ngModelChange)="conContable.conDetalle = conContable.conDetalle.trim()" [disabled]="(data.accion !== constantes.ACCION_NUEVO && data.accion !== constantes.ACCION_MAYORIZAR) || data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR || data.accion===constantes.ACCION_REVERSAR"\r\n                    name="detalle">\r\n                </div>\r\n              </div>\r\n              \x3c!--Observaciones--\x3e\r\n              <div class="col-lg-6 col-md-6">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_OBSERVACIONES}}</strong>\r\n                  </label>\r\n                  <input [appDescripcion]="conContable.conObservaciones" appUppercase class="form-control form-control-sm text-uppercase"\r\n                    type="text" [(ngModel)]="conContable.conObservaciones" placeholder="{{constantes.TAG_SIN_OBSERVACIONES}}"\r\n                    [disabled]="data.accion===constantes.ACCION_CONSULTAR || data.accion===constantes.ACCION_ANULAR || data.accion===constantes.ACCION_REVERSAR"\r\n                    (ngModelChange)="conContable.conObservaciones=conContable.conObservaciones.trim()" name="obs">\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--LISTADO--\x3e\r\n        <div class="card mb-1">\r\n          <div class="card-header">\r\n            <strong>{{constantes.TAG_DETALLE_CONTABLE}}</strong>\r\n          </div>\r\n          <div class="card-body p-0">\r\n            <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listaFiltrado"\r\n              [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n              [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n              [rowDragManaged]="true" [animateRows]="true" [singleClickEdit]="true" [rowClassRules]="rowClassRules"\r\n              (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n              (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n              (cellEditingStopped)="celdaEditingStopped($event)" [stopEditingWhenGridLosesFocus]="true"\r\n              [suppressDragLeaveHidesColumns]="true" [pinnedBottomRowData]="pinnedBottomRowData" (gridColumnsChanged)="redimencionarColumnas()"\r\n              (gridSizeChanged)="redimencionarColumnas()">\r\n            </ag-grid-angular>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n<p-contextMenu #menuOpciones [model]="opcionesDetalle" appendTo="body"></p-contextMenu>'},hqLJ:function(e,t,o){"use strict";o.d(t,"a",function(){return s});var a=o("flmD"),i=o("1t1C"),r=o("0uIf"),n=o("UBxT"),s=function(){function e(e){this.rolSecuencial=null,this.rolDesde=null,this.rolHasta=null,this.rolFechaUltimoSueldo=null,this.rolDiasLaboradosReales=0,this.rolDiasFaltasReales=0,this.rolDiasExtrasReales=0,this.rolDiasDescansoReales=0,this.rolDiasPagadosReales=0,this.rolDiasPermisoMedico=0,this.rolSaldoAnterior=0,this.rolIngresos=0,this.rolHorasExtras=0,this.rolHorasExtras100=0,this.rolBonos=0,this.rolBonosnd=0,this.rolBonoFijo=0,this.rolBonoFijoNd=0,this.rolOtrosIngresos=0,this.rolOtrosIngresosNd=0,this.rolLiqFondoReserva=0,this.rolLiqXiii=0,this.rolLiqXiv=0,this.rolLiqVacaciones=0,this.rolLiqSalarioDigno=0,this.rolLiqDesahucio=0,this.rolLiqDesahucioIntempestivo=0,this.rolLiqBonificacion=0,this.rolAnticipos=0,this.rolPrestamos=0,this.rolPrestamoQuirografario=0,this.rolPrestamoHipotecario=0,this.rolIess=0,this.rolIessExtension=0,this.rolRetencionFuente=0,this.rolDescuentoPermisoMedico=0,this.rolTotal=0,this.rolAportePatronal=0,this.rolIece=0,this.rolSecap=0,this.rolXiii=0,this.rolXiv=0,this.rolFondoReserva=0,this.rolVacaciones=0,this.rolDesahucio=0,this.rolAuxiliar=!1,this.empSueldo=0,this.empBonoFijo=0,this.empBonoFijoNd=0,this.empOtrosIngresos=0,this.empOtrosIngresosNd=0,this.empDiasLaborados=0,this.empDiasDescanso=0,this.empCancelarXiiiSueldoMensualmente=!1,this.empCancelarXivSueldoMensualmente=!1,this.empCancelarFondoReservaMensualmente=!1,this.empSalarioNeto=!1,this.prdSector=new a.a,this.conCuentas=new i.a,this.conContable=new r.a,this.conContableProvision=new r.a,this.rhEmpleado=new n.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.rolSecuencial=e.rolSecuencial?e.rolSecuencial:this.rolSecuencial,this.rolDesde=e.rolDesde?e.rolDesde:this.rolDesde,this.rolFechaUltimoSueldo=e.rolFechaUltimoSueldo?e.rolFechaUltimoSueldo:this.rolFechaUltimoSueldo,this.rolDiasLaboradosReales=e.rolDiasLaboradosReales?e.rolDiasLaboradosReales:this.rolDiasLaboradosReales,this.rolDiasFaltasReales=e.rolDiasFaltasReales?e.rolDiasFaltasReales:this.rolDiasFaltasReales,this.rolDiasExtrasReales=e.rolDiasExtrasReales?e.rolDiasExtrasReales:this.rolDiasExtrasReales,this.rolDiasDescansoReales=e.rolDiasDescansoReales?e.rolDiasDescansoReales:this.rolDiasDescansoReales,this.rolDiasPagadosReales=e.rolDiasPagadosReales?e.rolDiasPagadosReales:this.rolDiasPagadosReales,this.rolDiasPermisoMedico=e.rolDiasPermisoMedico?e.rolDiasPermisoMedico:this.rolDiasPermisoMedico,this.rolSaldoAnterior=e.rolSaldoAnterior?e.rolSaldoAnterior:this.rolSaldoAnterior,this.rolIngresos=e.rolIngresos?e.rolIngresos:this.rolIngresos,this.rolHorasExtras=e.rolHorasExtras?e.rolHorasExtras:this.rolHorasExtras,this.rolBonos=e.rolBonos?e.rolBonos:this.rolBonos,this.rolBonosnd=e.rolBonosnd?e.rolBonosnd:this.rolBonosnd,this.rolBonoFijo=e.rolBonoFijo?e.rolBonoFijo:this.rolBonoFijo,this.rolOtrosIngresos=e.rolOtrosIngresos?e.rolOtrosIngresos:this.rolOtrosIngresos,this.rolOtrosIngresosNd=e.rolOtrosIngresosNd?e.rolOtrosIngresosNd:this.rolOtrosIngresosNd,this.rolLiqFondoReserva=e.rolLiqFondoReserva?e.rolLiqFondoReserva:this.rolLiqFondoReserva,this.rolLiqXiii=e.rolLiqXiii?e.rolLiqXiii:this.rolLiqXiii,this.rolLiqXiv=e.rolLiqXiv?e.rolLiqXiv:this.rolLiqXiv,this.rolLiqVacaciones=e.rolLiqVacaciones?e.rolLiqVacaciones:this.rolLiqVacaciones,this.rolLiqSalarioDigno=e.rolLiqSalarioDigno?e.rolLiqSalarioDigno:this.rolLiqSalarioDigno,this.rolLiqDesahucio=e.rolLiqDesahucio?e.rolLiqDesahucio:this.rolLiqDesahucio,this.rolLiqDesahucioIntempestivo=e.rolLiqDesahucioIntempestivo?e.rolLiqDesahucioIntempestivo:this.rolLiqDesahucioIntempestivo,this.rolLiqBonificacion=e.rolLiqBonificacion?e.rolLiqBonificacion:this.rolLiqBonificacion,this.rolAnticipos=e.rolAnticipos?e.rolAnticipos:this.rolAnticipos,this.rolPrestamos=e.rolPrestamos?e.rolPrestamos:this.rolPrestamos,this.rolPrestamoQuirografario=e.rolPrestamoQuirografario?e.rolPrestamoQuirografario:this.rolPrestamoQuirografario,this.rolPrestamoHipotecario=e.rolPrestamoHipotecario?e.rolPrestamoHipotecario:this.rolPrestamoHipotecario,this.rolIess=e.rolIess?e.rolIess:this.rolIess,this.rolIessExtension=e.rolIessExtension?e.rolIessExtension:this.rolIessExtension,this.rolRetencionFuente=e.rolRetencionFuente?e.rolRetencionFuente:this.rolRetencionFuente,this.rolDescuentoPermisoMedico=e.rolDescuentoPermisoMedico?e.rolDescuentoPermisoMedico:this.rolDescuentoPermisoMedico,this.rolTotal=e.rolTotal?e.rolTotal:this.rolTotal,this.rolFormaPago=e.rolFormaPago?e.rolFormaPago:this.rolFormaPago,this.rolDocumento=e.rolDocumento?e.rolDocumento:this.rolDocumento,this.rolObservaciones=e.rolObservaciones?e.rolObservaciones:this.rolObservaciones,this.rolAportePatronal=e.rolAportePatronal?e.rolAportePatronal:this.rolAportePatronal,this.rolIece=e.rolIece?e.rolIece:this.rolIece,this.rolSecap=e.rolSecap?e.rolSecap:this.rolSecap,this.rolXiii=e.rolXiii?e.rolXiii:this.rolXiii,this.rolXiv=e.rolXiv?e.rolXiv:this.rolXiv,this.rolFondoReserva=e.rolFondoReserva?e.rolFondoReserva:this.rolFondoReserva,this.rolVacaciones=e.rolVacaciones?e.rolVacaciones:this.rolVacaciones,this.rolDesahucio=e.rolDesahucio?e.rolDesahucio:this.rolDesahucio,this.rolAuxiliar=e.rolAuxiliar?e.rolAuxiliar:this.rolAuxiliar,this.empCargo=e.empCargo?e.empCargo:this.empCargo,this.empSueldo=e.empSueldo?e.empSueldo:this.empSueldo,this.empBonoFijo=e.empBonoFijo?e.empBonoFijo:this.empBonoFijo,this.empBonoFijoNd=e.empBonoFijoNd?e.empBonoFijoNd:this.empBonoFijoNd,this.empOtrosIngresos=e.empOtrosIngresos?e.empOtrosIngresos:this.empOtrosIngresos,this.empOtrosIngresosNd=e.empOtrosIngresosNd?e.empOtrosIngresosNd:this.empOtrosIngresosNd,this.empDiasLaborados=e.empDiasLaborados?e.empDiasLaborados:this.empDiasLaborados,this.empDiasDescanso=e.empDiasDescanso?e.empDiasDescanso:this.empDiasDescanso,this.empCancelarXiiiSueldoMensualmente=e.empCancelarXiiiSueldoMensualmente?e.empCancelarXiiiSueldoMensualmente:this.empCancelarXiiiSueldoMensualmente,this.empCancelarXivSueldoMensualmente=e.empCancelarXivSueldoMensualmente?e.empCancelarXivSueldoMensualmente:this.empCancelarXivSueldoMensualmente,this.empCancelarFondoReservaMensualmente=e.empCancelarFondoReservaMensualmente?e.empCancelarFondoReservaMensualmente:this.empCancelarFondoReservaMensualmente,this.empSalarioNeto=e.empSalarioNeto?e.empSalarioNeto:this.empSalarioNeto,this.prdSector=e.prdSector?e.prdSector:this.prdSector,this.conCuentas=e.conCuentas?e.conCuentas:this.conCuentas,this.conContable=e.conContable?e.conContable:this.conContable,this.conContableProvision=e.conContableProvision?e.conContableProvision:this.conContableProvision,this.rhEmpleado=e.rhEmpleado?e.rhEmpleado:this.rhEmpleado},e}()},hyxj:function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("Ungd"),l=o("+JJ7"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_NUEVO:case s.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear&&t.empresaSeleccionada.listaSisPermisoTO.gruCrearClientes;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar&&t.empresaSeleccionada.listaSisPermisoTO.gruModificarClientes;break;case s.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar;break;case s.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.ERROR_403_TITULO),a},e.prototype.listarPrdListaSectorTO=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/getListaSectorTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarSectores(e.extraInfo):(t.despuesDeListarSectores([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarSector=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/insertarPrdSectorTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeInsertarPiscina(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarSector=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/modificarPrdSectorTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeModificarPiscina(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.eliminarSector=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/eliminarPrdSectorTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO),t.despuesDeEliminarSector(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.cambiarEstadoSector=function(e,t,o){var a=this;this.api.post("todocompuWS/produccionWebController/modificarEstadoPrdSector",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO),t.despuesDeCambiarEstadoSector(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirSectores=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/produccionWebController/generarReporteSector",e,o).then(function(e){e?a.utilService.descargarArchivoPDF("ListaSectores"+a.utilService.obtenerHorayFechaActual()+".pdf",e):a.toastr.warning(s.a.MSJ_ERROR_IMPRIMIR,s.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.exportarSectores=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/produccionWebController/exportarReporteSector",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"ListaSectores_"):a.toastr.warning(s.a.MSJ_ERROR_EXPORTAR,s.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.generarColumnas=function(e){var t=[];return t=[{headerName:s.a.TAG_CODIGO,field:"secCodigo",width:110,minWidth:110},{headerName:s.a.TAG_NOMBRE,field:"secNombre",width:250,minWidth:250},{headerName:s.a.TAG_LATITUD,field:"secLatitud",width:150,minWidth:150},{headerName:s.a.TAG_LONGITUD,field:"secLongitud",width:150,minWidth:150}],e&&t.push(this.utilService.getSpanSelect()),e||t.push({headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",width:110,minWidth:110,cellRendererFramework:l.a,cellClass:"text-md-center",valueGetter:function(e){return!e.data.secActivo}},this.utilService.getColumnaOpciones()),t},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[i.a,r.b,n.a,c.a])],e)}()},i8Jn:function(e,t,o){"use strict";var a=function(){function e(e){this.perEmpresa="",this.perCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.perEmpresa=e.perEmpresa?e.perEmpresa:this.perEmpresa,this.perCodigo=e.perCodigo?e.perCodigo:this.perCodigo},e}(),i=o("cDNE");o.d(t,"a",function(){return r});var r=function(){function e(e){this.sisPeriodoPK=new a,this.perDetalle="",this.perDesde=new Date,this.perHasta=new Date,this.perCerrado=!1,this.usrCodigo="",this.usrFechaInsertaPeriodo=new Date,this.empCodigo=new i.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.sisPeriodoPK=e.sisPeriodoPK?e.sisPeriodoPK:this.sisPeriodoPK,this.perDetalle=e.perDetalle?e.perDetalle:this.perDetalle,this.perDesde=e.perDesde?e.perDesde:this.perDesde,this.perHasta=e.perHasta?e.perHasta:this.perHasta,this.perCerrado=e.perCerrado?e.perCerrado:this.perCerrado,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInsertaPeriodo=e.usrFechaInsertaPeriodo?e.usrFechaInsertaPeriodo:this.usrFechaInsertaPeriodo,this.empCodigo=e.empCodigo?e.empCodigo:this.empCodigo},e}()},i8Yu:function(e,t){e.exports=""},"i9k+":function(e,t){e.exports=""},"iHU/":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.transEmpresa=null,this.transPeriodo=null,this.transMotivo=null,this.transNumero=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.transEmpresa=e.transEmpresa?e.transEmpresa:this.transEmpresa,this.transPeriodo=e.transPeriodo?e.transPeriodo:this.transPeriodo,this.transMotivo=e.transMotivo?e.transMotivo:this.transMotivo,this.transNumero=e.transNumero?e.transNumero:this.transNumero},e}()},"iL+s":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.vendEmpresa=null,this.vendCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.vendEmpresa=e.vendEmpresa?e.vendEmpresa:this.vendEmpresa,this.vendCodigo=e.vendCodigo?e.vendCodigo:this.vendCodigo},e}()},iQoG:function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("SZbH"),r=o("z5Y/"),n=o("nR5P"),s=o("mwBN"),c=o("ydE8"),l=o("EF/R"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listarInvClienteCategoriaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvClienteCategoriaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvClienteCategoriaTO(e.extraInfo):(t.despuesDeListarInvClienteCategoriaTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.formatearInvClienteCategoria=function(e,t){var o=new c.a(e);return o.usrEmpresa=t.empresaSeleccionada.empCodigo,o.ccEmpresa=t.empresaSeleccionada.empCodigo,t.accion===s.a.ACCION_CREAR&&(o.usrCodigo=this.auth.getCodigoUser(),o.usrFechaInserta=null),o},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_CODIGO,field:"ccCodigo",width:60,minWidth:60},{headerName:s.a.TAG_DETALLE,field:"ccDetalle",width:250,minWidth:250},this.utilService.getColumnaOpciones()]},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[r.a,i.b,n.a,l.a])],e)}()},iVon:function(e,t,o){"use strict";o.d(t,"a",function(){return n});var a=o("9CJC"),i=o("/lcP"),r=o("SxCF"),n=function(){function e(e){this.detSecuencial=0,this.detOrden=0,this.detPendiente=!1,this.detCantidad=0,this.detValorPromedio=0,this.detValorUltimaCompra=0,this.detSaldo=0,this.secEmpresa=null,this.secCodigo=null,this.pisEmpresa=null,this.pisSector=null,this.pisNumero=null,this.invProducto=new a.a,this.invConsumos=new i.a,this.invBodega=new r.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencial=e.detSecuencial?e.detSecuencial:this.detSecuencial,this.detOrden=e.detOrden?e.detOrden:this.detOrden,this.detPendiente=e.detPendiente?e.detPendiente:this.detPendiente,this.detCantidad=e.detCantidad?e.detCantidad:this.detCantidad,this.detValorPromedio=e.detValorPromedio?e.detValorPromedio:this.detValorPromedio,this.detValorUltimaCompra=e.detValorUltimaCompra?e.detValorUltimaCompra:this.detValorUltimaCompra,this.detSaldo=e.detSaldo?e.detSaldo:this.detSaldo,this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.pisEmpresa=e.pisEmpresa?e.pisEmpresa:this.pisEmpresa,this.pisSector=e.pisSector?e.pisSector:this.pisSector,this.pisNumero=e.pisNumero?e.pisNumero:this.pisNumero,this.invProducto=e.invProducto?e.invProducto:this.invProducto,this.invConsumos=e.invConsumos?e.invConsumos:this.invConsumos,this.invBodega=e.invBodega?e.invBodega:this.invBodega},e}()},id9q:function(e,t){e.exports=""},"j/JE":function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_PRODUCTO_PRESENTACION_CAJA}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}\r\n      </strong>\r\n    </span>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrarPresCaja()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div [ngClass]="{\'modal-body\': esModal}">\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card m-0 mb-2">\r\n          <div class="card-header p-1">\r\n            <i class="{{classTitulo}}"></i>\r\n            <b>{{frmTitulo}}</b>\r\n            <div class="card-header-actions" *ngIf="vistaFormulario">\r\n              <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardarPresentacionCaja" type="button" (click)="guardarProductoPresentacionCajas(frmProductoPresentacionCajas)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardarPresentacionCaja" type="button" (click)="actualizarProductoPresentacionCajas(frmProductoPresentacionCajas)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button (click)="resetearFormulario()" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n                title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            <form #frmProductoPresentacionCajas="ngForm" autocomplete="off">\r\n              <div *ngIf="vistaFormulario">\r\n                <div class="form-group form-group-sm has-feedback">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                  </label>\r\n                  <p *ngIf="!(accion===constantes.ACCION_CREAR)" class="form-control input-sm">{{invProductoPresentacionCajasTO.prescCodigo}}</p>\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" type="text" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                    name="prescCodigo" [(ngModel)]="invProductoPresentacionCajasTO.prescCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="30" appUppercase>\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" triggers="mouseenter:mouseleave"\r\n                    container="body"></span>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                  </label>\r\n                  <input [appFocus]="accion===constantes.ACCION_EDITAR" name="prescDetalle" [(ngModel)]="invProductoPresentacionCajasTO.prescDetalle"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" pattern="{{constantes.PATTERN_SOLO_LETRAS}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="500" appUppercase>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_ABREVIADO}}</strong>\r\n                  </label>\r\n                  <input name="prescAbreviado" [(ngModel)]="invProductoPresentacionCajasTO.prescAbreviado" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_SOLO_LETRAS}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="500" appUppercase>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div class="card-footer" *ngIf="!vistaFormulario">\r\n            <div class="text-right">\r\n              <button id="btnBuscarPresentacionCaja" type="button" class="btn btn-sm btn-primary mr-1" (click)="buscarProductoPresentacionCajas()"\r\n                [disabled]="cargando" title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> &nbsp; {{constantes.LABEL_BUSCAR}}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div [ngClass]="{\'col-lg-8 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n        <div class="card m-0" *ngIf="listadoInvProductoPresentacionCajasComboListadoTO?.length > 0 && !vistaFormulario">\r\n          <div class="card-header p-1">\r\n            <b>{{constantes.INVENTARIO_PRODUCTO_PRESENTACION_SISTEMA_CAJA_LISTADO}}</b>\r\n            <div class="card-header-actions">\r\n              <div class="btn-group d-lg-none">\r\n                <button id="btnNuevoPresentacionCaja" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoProductoPresentacionCajas()"\r\n                  placement="top" title="{{constantes.ATAJO_NUEVO}}" ngbTooltip="{{constantes.LABEL_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirPresentacionCaja" (click)="imprimirPresentacionCaja()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                  <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarPresentacionCaja" (click)="exportarPresentacionCaja()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                  <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n                </button>\r\n              </div>\r\n              <div class="btn-group d-none d-lg-block">\r\n                <button id="btnNuevoPresentacionCaja" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoProductoPresentacionCajas()"\r\n                  placement="top" title="{{constantes.ATAJO_NUEVO}}" ngbTooltip="{{constantes.LABEL_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirPresentacionCaja" (click)="imprimirPresentacionCaja()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                  <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarPresentacionCaja" (click)="exportarPresentacionCaja()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                  <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n          <div class="card-body p-0">\r\n            \x3c!--La primera linea es para la seleccion--\x3e\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group p-1">\r\n                  <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                    size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                    size="100">\r\n                  <div class="input-group-append">\r\n                    <span class="input-group-text">\r\n                      <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div class="float-right pr-1">\r\n                  <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                    maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--listado de producto-presentacion-caja--\x3e\r\n            <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 220px);" class="ag-theme-balham"\r\n              [rowData]="listadoInvProductoPresentacionCajasComboListadoTO" [columnDefs]="columnDefsSelected"\r\n              [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true"\r\n              [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n              (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)" (rowSelected)="pPresentacionCajaSeleccionado = $event.node.data"\r\n              (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()"\r\n              (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)">\r\n            </ag-grid-angular>\r\n            \x3c!--end listado de presentacion-caja--\x3e\r\n            <p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},j8lp:function(e,t){e.exports='<form #frmEmpresaDatos=\'ngForm\' autocomplete="off" class="card m-0" *ngIf="accion !== constantes.ACCION_ELIMINAR && accion !== constantes.ACCION_EDITAR_ESTADO">\r\n  <div class="card-header p-1" style="padding: 0.5rem 0.5rem;">\r\n    <b class="pl-2"> {{accion}} {{constantes.TAG_EMPRESA}} - </b>\r\n    <strong class="text-primary">{{empresaSeleccionada.empNombre}}</strong>\r\n    <div class="card-header-actions">\r\n      <div class="btn-group d-lg-none">\r\n        <ng-template #tipContentGuardar>{{constantes.LABEL_GUARDAR}}</ng-template>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" [ngbTooltip]="tipContentGuardar" id="btnGuardarEmpresa1" *ngIf="accion === constantes.ACCION_EDITAR"\r\n          title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_EDITAR, true) ? actualizarEmpresa(frmEmpresaDatos) : null">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <ng-template #tipContentCancelar>{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </ng-template>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarEmpresa1"\r\n          [ngbTooltip]="tipContentCancelar" (click)="cerrarFormulario()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      \x3c!-- con etiquetas--\x3e\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarEmpresa" *ngIf="accion === constantes.ACCION_EDITAR"\r\n          title="{{constantes.ATAJO_GUARDAR}}" (click)="verificarPermiso(constantes.ACCION_EDITAR, true) ? actualizarEmpresa(frmEmpresaDatos) : null">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelarEmpresa" (click)="cerrarFormulario()">\r\n          <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="card-body p-1">\r\n    <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR" autocomplete="off">\r\n      \x3c!--informacion de Empresa--\x3e\r\n      <div class="mb-1" *ngIf="!administracion">\r\n        <div class="card-body mt-0 mb-0 pt-1 pb-0">\r\n          <div class="row form-group">\r\n            <div class="col-lg-4 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_CODIGO}}</strong>\r\n              </label>\r\n              <label class="form-control form-control-sm text-uppercase label-input">{{empresa.empCodigo}}</label>\r\n            </div>\r\n            <div class="col-lg-4 col-sm-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_RUC_ID}}</strong>\r\n              </label>\r\n              <label class="form-control form-control-sm text-uppercase label-input">{{empresa.empRuc}}</label>\r\n            </div>\r\n            <div class="col-lg-4 col-sm-12">\r\n              <label>\r\n                <strong>{{constantes.TAG_RAZON_SOCIAL}}</strong>\r\n              </label>\r\n              <label class="form-control form-control-sm text-uppercase label-input">{{empresa.empRazonSocial}}</label>\r\n            </div>\r\n          </div>\r\n          <div class="row form-group">\r\n            <div class="col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_EMAIL_NOTIFICACIONES}}</strong>\r\n              </label>\r\n              <input type="text" pKeyFilter="email" pattern="[a-zA-Z0-9_.-]+@[a-zA-Z0-9.-]+\\.[a-z]{2,}((;\\s?){1}[a-zA-Z0-9_]+@[a-zA-Z0-9.-]+\\.[a-z]{2,})*$"\r\n                name="empEmailNotificaciones" placeholder="{{constantes.TAG_OPCIONAL}}" (ngModelChange)="verificarCampos()"\r\n                (blur)="verificarCampos()" [(ngModel)]="empresa.empEmailNotificaciones" class="form-control form-control-sm mousetrap"\r\n                [required]="hayClave">\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>\r\n                <strong>{{constantes.TAG_CLAVE_NOTIFICACIONES}}</strong>\r\n              </label>\r\n              <input type="password" name="empClaveNotificaciones" placeholder="{{constantes.TAG_OPCIONAL}}" (blur)="verificarCampos()"\r\n                [(ngModel)]="empresa.empClaveNotificaciones" class="form-control form-control-sm mousetrap" (ngModelChange)="verificarCampos()"\r\n                autocomplete="new-password" [required]="hayEmail">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="mb-1" *ngIf="administracion">\r\n        <ul class="nav nav-tabs nav-justified nav-empresa" role="tablist" style="box-shadow: inset 0 -1px 0 #ddd;">\r\n          <li role="presentation" class="nav-item">\r\n            <a class="nav-link active p-1" href data-target="#general" aria-controls="general" role="tab" data-toggle="tab">\r\n              <b>{{constantes.TAG_DATOS_GENERALES}}</b>\r\n            </a>\r\n          </li>\r\n          <li role="presentation" class="nav-item">\r\n            <a class="nav-link p-1" href data-target="#administrativo" aria-controls="administrativo" role="tab" data-toggle="tab">\r\n              <b>{{constantes.TAG_DATOS_ADMINISTRATIVOS}}</b>\r\n            </a>\r\n          </li>\r\n          <li role="presentation" class="nav-item">\r\n            <a class="nav-link p-1" href data-target="#otros" aria-controls="otros" role="tab" data-toggle="tab">\r\n              <b>{{constantes.TAG_OTROS_DATOS}}</b>\r\n            </a>\r\n          </li>\r\n          <li role="presentation" class="nav-item">\r\n            <a class="nav-link p-1" href data-target="#logo" aria-controls="logo" role="tab" data-toggle="tab">\r\n              <b>{{constantes.TAG_LOGO}}</b>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n        <div class="tab-content panel" style="border-top-width: 0px;">\r\n          <div role="tabpanel" class="tab-pane fade show active" id="general">\r\n            <div class="panel-default">\r\n              <div class="panel-body">\r\n                <div class="row form-group">\r\n                  <div class="col-lg-4 col-sm-6">\r\n                    <label>\r\n                      <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                    </label>\r\n                    <input type="text" name="empCodigo" pattern="{{constantes.PATTERN_CODIGO}}" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empCodigo" class="form-control form-control-sm text-uppercase mousetrap"\r\n                      required *ngIf="accion === constantes.ACCION_CREAR" appUppercase>\r\n                    <label class="form-control form-control-sm text-uppercase label-input" *ngIf="accion !== constantes.ACCION_CREAR">{{empresa.empCodigo}}</label>\r\n                  </div>\r\n                  <div class="col-lg-4 col-sm-6">\r\n                    <label>\r\n                      <strong>{{constantes.TAG_RUC_ID}}</strong>\r\n                    </label>\r\n                    <input type="text" [appFocus]="accion === constantes.ACCION_EDITAR" name="empRuc" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                      [(ngModel)]="empresa.empRuc" class="form-control form-control-sm mousetrap text-uppercase" required appUppercase>\r\n                  </div>\r\n                  <div class="col-lg-4 col-sm-12">\r\n                    <label>\r\n                      <strong>{{constantes.TAG_RAZON_SOCIAL}}</strong>\r\n                    </label>\r\n                    <input type="text" name="empRazonSocial" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empRazonSocial"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" required appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="row form-group">\r\n                  <div class="col-lg-4 col-sm-12">\r\n                    <label>\r\n                      <strong>{{constantes.TAG_NOMBRE_COMERCIAL}}</strong>\r\n                    </label>\r\n                    <input type="text" name="empNombre" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empNombre" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      required appUppercase>\r\n                  </div>\r\n                  <div class="col-lg-4 col-sm-6">\r\n                    <label>\r\n                      <strong>{{constantes.TAG_ACTIVIDAD}}</strong>\r\n                    </label>\r\n                    <input type="text" name="empRuc" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empRuc" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      required appUppercase>\r\n                  </div>\r\n                  <div class="col-lg-4 col-sm-6">\r\n                    <label>\r\n                      <strong>{{constantes.TAG_TELEFONO}}</strong>\r\n                    </label>\r\n                    <input type="text" name="empTelefono" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="empresa.empTelefono" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      appUppercase>\r\n                  </div>\r\n                </div>\r\n                <div class="row form-group">\r\n                  <div class="col-lg-4 col-sm-6">\r\n                    <label>\r\n                      <strong>{{constantes.TAG_FAX}}</strong>\r\n                    </label>\r\n                    <input type="text" name="empFax" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="empresa.empFax" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      appUppercase>\r\n                  </div>\r\n                  <div class="col-lg-4 col-sm-6">\r\n                    <label>\r\n                      <strong>{{constantes.TAG_CIUDAD}}</strong>\r\n                    </label>\r\n                    <input type="text" name="empCiudad" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empCiudad" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      appUppercase required>\r\n                  </div>\r\n                  <div class="col-lg-4 col-sm-12">\r\n                    <label>\r\n                      <strong>{{constantes.TAG_DIRECCION}}</strong>\r\n                    </label>\r\n                    <input type="text" name="empDireccion" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empDireccion" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      appUppercase required>\r\n                  </div>\r\n                </div>\r\n                <div class="row form-group">\r\n                  <div class="col-lg-4 col-sm-12">\r\n                    <label ngbTooltip="{{constantes.SISTEMA_RES_CONTRIBUYENTE_COMPLETO}}">\r\n                      <strong>{{constantes.SISTEMA_RES_CONTRIBUYENTE}}</strong>\r\n                    </label>\r\n                    <input type="text" name="emResolucionContribuyenteEspecial" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="empresa.emResolucionContribuyenteEspecial"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" appUppercase>\r\n                  </div>\r\n                  <div class="col-lg-4 col-sm-6">\r\n                    <label>\r\n                      <strong>{{constantes.SISTEMA_OBLIGADO_A_LLEVAR_CONTABILIDAD}}</strong>\r\n                    </label>\r\n                    <input type="text" name="emObligadoLlevarContabilidad" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.emObligadoLlevarContabilidad"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" required appUppercase>\r\n                  </div>\r\n                  <div class="col-lg-4 col-sm-6">\r\n                    <label>\r\n                      <strong>{{constantes.SISTEMA_ESCOGER_POR}}</strong>\r\n                    </label>\r\n                    <input type="text" name="empDireccion" placeholder="{{constantes.TAG_OBLIGATORIO}}" appUppercase [(ngModel)]="empresa.empDireccion"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" required>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div role="tabpanel" class="tab-pane fade" id="administrativo">\r\n            <div class="row form-group">\r\n              <div class="col-lg-4 col-sm-6">\r\n                <label>\r\n                  <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                </label>\r\n                <input type="text" name="empCodigo" pattern="{{constantes.PATTERN_CODIGO}}" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                  placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empCodigo" class="form-control form-control-sm text-uppercase mousetrap"\r\n                  required *ngIf="accion === constantes.ACCION_CREAR" appUppercase>\r\n                <label class="form-control form-control-sm text-uppercase label-input" *ngIf="accion !== constantes.ACCION_CREAR">{{empresa.empCodigo}}</label>\r\n              </div>\r\n              <div class="col-lg-4 col-sm-6">\r\n                <label>\r\n                  <strong>{{constantes.TAG_RUC_ID}}</strong>\r\n                </label>\r\n                <input type="text" [appFocus]="accion === constantes.ACCION_EDITAR" name="empRuc" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                  [(ngModel)]="empresa.empRuc" class="form-control form-control-sm mousetrap text-uppercase" required appUppercase>\r\n              </div>\r\n              <div class="col-lg-4 col-sm-12">\r\n                <label>\r\n                  <strong>{{constantes.TAG_RAZON_SOCIAL}}</strong>\r\n                </label>\r\n                <input type="text" name="empRazonSocial" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empRazonSocial"\r\n                  class="form-control form-control-sm mousetrap text-uppercase" required appUppercase>\r\n              </div>\r\n            </div>\r\n            <div class="row form-group">\r\n              <div class="col-lg-4 col-sm-12">\r\n                <label>\r\n                  <strong>{{constantes.TAG_NOMBRE_COMERCIAL}}</strong>\r\n                </label>\r\n                <input type="text" name="empNombre" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empNombre" class="form-control form-control-sm mousetrap text-uppercase"\r\n                  required appUppercase>\r\n              </div>\r\n              <div class="col-lg-4 col-sm-6">\r\n                <label>\r\n                  <strong>{{constantes.TAG_ACTIVIDAD}}</strong>\r\n                </label>\r\n                <input type="text" name="empRuc" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empRuc" class="form-control form-control-sm mousetrap text-uppercase"\r\n                  required appUppercase>\r\n              </div>\r\n              <div class="col-lg-4 col-sm-6">\r\n                <label>\r\n                  <strong>{{constantes.TAG_TELEFONO}}</strong>\r\n                </label>\r\n                <input type="text" name="empTelefono" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="empresa.empTelefono" class="form-control form-control-sm mousetrap text-uppercase"\r\n                  appUppercase>\r\n              </div>\r\n            </div>\r\n            <div class="row form-group">\r\n              <div class="col-lg-4 col-sm-6">\r\n                <label>\r\n                  <strong>{{constantes.TAG_FAX}}</strong>\r\n                </label>\r\n                <input type="text" name="empFax" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="empresa.empFax" class="form-control form-control-sm mousetrap text-uppercase"\r\n                  appUppercase>\r\n              </div>\r\n              <div class="col-lg-4 col-sm-6">\r\n                <label>\r\n                  <strong>{{constantes.TAG_CIUDAD}}</strong>\r\n                </label>\r\n                <input type="text" name="empCiudad" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empCiudad" class="form-control form-control-sm mousetrap text-uppercase"\r\n                  appUppercase required>\r\n              </div>\r\n              <div class="col-lg-4 col-sm-12">\r\n                <label>\r\n                  <strong>{{constantes.TAG_DIRECCION}}</strong>\r\n                </label>\r\n                <input type="text" name="empDireccion" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.empDireccion" class="form-control form-control-sm mousetrap text-uppercase"\r\n                  appUppercase required>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div role="tabpanel" class="tab-pane fade" id="otros">\r\n            <div class="panel-default">\r\n              <div class="panel-body">\r\n                <div class="row form-group">\r\n                  <div class="col-lg-6 col-sm-6">\r\n                    <label ngbTooltip="{{constantes.SISTEMA_RES_CONTRIBUYENTE_COMPLETO}}">\r\n                      <strong>{{constantes.SISTEMA_RES_CONTRIBUYENTE}}</strong>\r\n                    </label>\r\n                    <input type="text" name="emResolucionContribuyenteEspecial" placeholder="{{constantes.TAG_OPCIONAL}}" [(ngModel)]="empresa.emResolucionContribuyenteEspecial"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" appUppercase>\r\n                  </div>\r\n                  <div class="col-lg-6 col-sm-6">\r\n                    <label>\r\n                      <strong>{{constantes.SISTEMA_OBLIGADO_A_LLEVAR_CONTABILIDAD}}</strong>\r\n                    </label>\r\n                    <input type="text" name="emObligadoLlevarContabilidad" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="empresa.emObligadoLlevarContabilidad"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" required appUppercase>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div role="tabpanel" class="tab-pane fade" id="logo">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </div>\r\n</form>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"jC/Q":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.secEmpresa="",this.secCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.secEmpresa=e.secEmpresa?e.secEmpresa:this.secEmpresa,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo},e}()},jEGE:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.tipEmpresa="",this.tipCodigo="",this.tipDetalle="",this.tipTipo="",this.tipActivo=!1,this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.tipEmpresa=e.tipEmpresa?e.tipEmpresa:this.tipEmpresa,this.tipCodigo=e.tipCodigo?e.tipCodigo:this.tipCodigo,this.tipDetalle=e.tipDetalle?e.tipDetalle:this.tipDetalle,this.tipTipo=e.tipTipo?e.tipTipo:this.tipTipo,this.tipActivo=e.tipActivo?e.tipActivo:this.tipActivo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},jKV4:function(e,t,o){"use strict";o.d(t,"a",function(){return p});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("EF/R"),l=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listarInvTransferenciaMotivoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaTransferenciaMotivoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvTransferenciaMotivoTO(e.extraInfo):(t.despuesDeListarInvTransferenciaMotivoTO([]),a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.setearValoresInvTransferenciaMotivo=function(e){e.usrEmpresa=s.a.KEY_EMPRESA_SELECT.trim(),e.usrCodigo=this.auth.getCodigoUser().trim()},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_CODIGO,field:"tmCodigo",width:100,minWidth:100},{headerName:s.a.TAG_DETALLE,field:"tmDetalle",width:400,minWidth:400},{headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"tmInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e=l([Object(a.Injectable)({providedIn:"root"}),d("design:paramtypes",[i.a,r.b,n.a,c.a])],e)}()},jXhD:function(e,t){e.exports=".close:hover, .close:focus {\r\n    color: black!important;\r\n  }"},jy0O:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.ocmEmpresa="",this.ocmSector="",this.ocmCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.ocmEmpresa=e.ocmEmpresa?e.ocmEmpresa:this.ocmEmpresa,this.ocmSector=e.ocmSector?e.ocmSector:this.ocmSector,this.ocmCodigo=e.ocmCodigo?e.ocmCodigo:this.ocmCodigo},e}()},kPjv:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("mwBN"),r=o("SZbH"),n=o("z5Y/"),s=o("nR5P"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvListaComprasFormaPagoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvComprasFormaPagoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvListaComprasFormaPagoTO(e.extraInfo):(t.despuesDeListarInvListaComprasFormaPagoTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarComboFormaPagoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getComboFormaPagoCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarComboFormaPagoTO(e.extraInfo):(t.despuesDeListarComboFormaPagoTO([]),a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case i.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case i.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar;break;case i.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar}return o&&!a&&this.toastr.warning(i.a.ERROR_403_TEXTO,i.a.ERROR_403_TITULO),a},e.prototype.seleccionarSector=function(e,t){return e.find(function(e){return e.secCodigo==t})},e.prototype.generarColumnas=function(){return[{headerName:i.a.TAG_CUENTA,field:"ctaCodigo",width:120,minWidth:120},{headerName:i.a.TAG_DETALLE,field:"fpDetalle",width:400,minWidth:400},{headerName:i.a.TAG_SECTOR,field:"secCodigo",width:90,minWidth:90},{headerName:i.a.TAG_INACTIVO,headerClass:"text-md-center",field:"fpInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[n.a,r.b,s.a])],e)}()},kYpn:function(e,t){e.exports=""},kZx3:function(e,t,o){"use strict";o.d(t,"a",function(){return I});var a=o("CcnG"),i=o("gIcY"),r=o("SZbH"),n=o("eUd/"),s=o("8fiX"),c=o("mwBN"),l=o("nR5P"),d=o("z5Y/"),p=o("kbPt"),u=o("KRTG"),h=o("ZYCi"),m=o("zkCp"),C=o("EnEm"),v=o("yccp"),A=o("madF"),f=o("gLZI"),g=o("rx3f"),b=o("CEfs"),O=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function(){function e(e,t,o,a,i,r,n,s,l){this.utilService=e,this.activeModal=t,this.toastr=o,this.atajoService=a,this.route=i,this.api=r,this.filasService=n,this.empresaService=s,this.etiquetasService=l,this.accion=null,this.pedidos=!1,this.vistaFormulario=!1,this.cargando=!1,this.constantes={},this.invProductoEtiquetas=new p.a,this.listaEmpresas=[],this.opciones=[],this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new C.a,this.rowClassRules={},this.constantes=c.a}return e.prototype.ngOnInit=function(){if(this.pedidos||(this.listaEmpresas=this.route.snapshot.data.configuracionPrecios),this.empresaSeleccionada&&this.accion)switch(c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.accion){case c.a.ACCION_CREAR:break;case c.a.ACCION_EDITAR:case c.a.ACCION_CONSULTAR:this.obtenerEtiquetas()}this.iniciarAtajos(),this.iniciarAgGrid()},e.prototype.cancelar=function(){var e=this;switch(this.accion){case c.a.ACCION_EDITAR:case c.a.ACCION_CREAR:if(this.utilService.puedoCancelar(this.valoresIniciales,this.frmProductoEtiquetas))this.vistaFormulario=!1;else{var t={title:c.a.MSJ_TITULO_CANCELAR,texto:c.a.MSJ_PREGUNTA_CANCELAR,type:c.a.SWAL_QUESTION,confirmButtonText:c.a.MSJ_SI_ACEPTAR,cancelButtonText:c.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){t&&(e.vistaFormulario=!1)})}break;default:this.vistaFormulario=!1}},e.prototype.extraerValoresIniciales=function(){var e=this;setTimeout(function(){e.valoresIniciales=JSON.parse(JSON.stringify(e.frmProductoEtiquetas?e.frmProductoEtiquetas.value:null))},50)},e.prototype.consultar=function(){this.accion=c.a.ACCION_CONSULTAR,this.obtenerEtiquetas()},e.prototype.editar=function(){this.accion=c.a.ACCION_EDITAR,this.obtenerEtiquetas()},e.prototype.iniciarAtajos=function(){this.atajoService.add(new v.Hotkey(c.a.ATAJO_GUARDAR,function(e){var t=document.getElementById("btnGuardar");return t&&t.click(),!1})),this.atajoService.add(new v.Hotkey(c.a.ATAJO_CANCELAR,function(e){var t=document.getElementById("btnCancelar");return t&&t.click(),!1}))},e.prototype.obtenerEtiquetas=function(){this.cargando=!0,c.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo;var e={empresa:c.a.KEY_EMPRESA_SELECT};this.etiquetasService.obtenerEtiquetas(e,this,c.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeObtenerEtiquetas=function(e){this.cargando=!1,this.vistaFormulario=!0,this.pedidos?e?this.invProductoEtiquetas=new p.a(e):this.activeModal.dismiss("Close"):this.accion==c.a.ACCION_EDITAR?e?this.invProductoEtiquetas=new p.a(e):(this.invProductoEtiquetas=new p.a,this.accion,c.a.ACCION_CREAR):e?this.invProductoEtiquetas=new p.a(e):this.vistaFormulario=!1,this.extraerValoresIniciales()},e.prototype.insertarProductoEtiquetas=function(e){var t=this;if(this.utilService.verificarPermiso(this.accion,this,!0))if(this.cargando=!0,this.utilService.establecerFormularioTocado(e)&&e&&e.valid){this.invProductoEtiquetas=this.formatearInvProductoEtiquetas(this.invProductoEtiquetas);var o={invProductoEtiquetas:this.invProductoEtiquetas};this.api.post("todocompuWS/inventarioWebController/insertarInvProductoEtiquetas",o,c.a.KEY_EMPRESA_SELECT).then(function(e){t.cargando=!1,e&&e.extraInfo?(t.toastr.success(e.operacionMensaje,c.a.TOAST_CORRECTO),t.vistaFormulario=!1,t.cerrarModal(e.extraInfo)):t.toastr.warning(e.operacionMensaje,c.a.TOAST_ERROR)}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.error(c.a.MSJ_CAMPOS_INVALIDOS,c.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},e.prototype.cerrarModal=function(e){this.activeModal.close(e)},e.prototype.minimizarModal=function(){this.activeModal.dismiss("Cerrar")},e.prototype.formatearInvProductoEtiquetas=function(e){var t=new p.a(e);return t.eempresa=c.a.KEY_EMPRESA_SELECT,t.ecosto01=t.ecosto01?t.ecosto01:null,t.ecosto02=t.ecosto02?t.ecosto02:null,t.ecosto03=t.ecosto03?t.ecosto03:null,t.ecosto04=t.ecosto04?t.ecosto04:null,t.ecosto05=t.ecosto05?t.ecosto05:null,t.eprecio01=t.eprecio01?t.eprecio01:"PVP",t.eprecio02=t.eprecio02?t.eprecio02:null,t.eprecio03=t.eprecio03?t.eprecio03:null,t.eprecio04=t.eprecio04?t.eprecio04:null,t.eprecio05=t.eprecio05?t.eprecio05:null,t.eprecio06=t.eprecio06?t.eprecio06:null,t.eprecio07=t.eprecio07?t.eprecio07:null,t.eprecio08=t.eprecio08?t.eprecio08:null,t.eprecio09=t.eprecio09?t.eprecio09:null,t.eprecio10=t.eprecio10?t.eprecio10:null,t.eprecio11=t.eprecio11?t.eprecio11:null,t.eprecio12=t.eprecio12?t.eprecio12:null,t.eprecio13=t.eprecio13?t.eprecio13:null,t.eprecio14=t.eprecio14?t.eprecio14:null,t.eprecio15=t.eprecio15?t.eprecio15:null,t.eprecio16=t.eprecio16?t.eprecio16:null,t},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.empresaService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:A.a,toolTip:f.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.empresaSeleccionada=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.generarOpciones=function(){var e=this,t=!!this.empresaSeleccionada&&this.empresaSeleccionada.listaSisPermisoTO.gruModificar;this.opciones=[{label:c.a.ACCION_CONSULTAR,icon:c.a.ICON_CONSULTAR,command:function(t){return e.consultar()}},{label:c.a.ACCION_EDITAR,icon:c.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editar():null}}]},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},O([Object(a.Input)(),S("design:type",s.a)],e.prototype,"empresaSeleccionada",void 0),O([Object(a.Input)(),S("design:type",String)],e.prototype,"accion",void 0),O([Object(a.Input)(),S("design:type",Boolean)],e.prototype,"pedidos",void 0),O([Object(a.ViewChild)("menuOpciones"),S("design:type",m.ContextMenu)],e.prototype,"menuOpciones",void 0),O([Object(a.ViewChild)("frmProductoEtiquetas"),S("design:type",i.NgForm)],e.prototype,"frmProductoEtiquetas",void 0),O([Object(a.HostListener)("window:resize",["$event"]),S("design:type",Function),S("design:paramtypes",[]),S("design:returntype",void 0)],e.prototype,"onResize",null),e=O([Object(a.Component)({selector:"app-producto-etiquetas",template:o("4464"),styles:[o("v32X")]}),S("design:paramtypes",[l.a,n.a,r.b,v.HotkeysService,h.ActivatedRoute,d.a,b.a,g.a,u.a])],e)}()},kbPt:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.eempresa="",this.ecosto01="",this.ecosto02="",this.ecosto03="",this.ecosto04="",this.ecosto05="",this.eprecio01="",this.eprecio02="",this.eprecio03="",this.eprecio04="",this.eprecio05="",this.eprecio06="",this.eprecio07="",this.eprecio08="",this.eprecio09="",this.eprecio10="",this.eprecio11="",this.eprecio12="",this.eprecio13="",this.eprecio14="",this.eprecio15="",this.eprecio16="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.eempresa=e.eempresa?e.eempresa:this.eempresa,this.ecosto01=e.ecosto01?e.ecosto01:this.ecosto01,this.ecosto02=e.ecosto02?e.ecosto02:this.ecosto02,this.ecosto03=e.ecosto03?e.ecosto03:this.ecosto03,this.ecosto04=e.ecosto04?e.ecosto04:this.ecosto04,this.ecosto05=e.ecosto05?e.ecosto05:this.ecosto05,this.eprecio01=e.eprecio01?e.eprecio01:this.eprecio01,this.eprecio02=e.eprecio02?e.eprecio02:this.eprecio02,this.eprecio03=e.eprecio03?e.eprecio03:this.eprecio03,this.eprecio04=e.eprecio04?e.eprecio04:this.eprecio04,this.eprecio05=e.eprecio05?e.eprecio05:this.eprecio05,this.eprecio06=e.eprecio06?e.eprecio06:this.eprecio06,this.eprecio07=e.eprecio07?e.eprecio07:this.eprecio07,this.eprecio08=e.eprecio08?e.eprecio08:this.eprecio08,this.eprecio09=e.eprecio09?e.eprecio09:this.eprecio09,this.eprecio10=e.eprecio10?e.eprecio10:this.eprecio10,this.eprecio11=e.eprecio11?e.eprecio11:this.eprecio11,this.eprecio12=e.eprecio12?e.eprecio12:this.eprecio12,this.eprecio13=e.eprecio13?e.eprecio13:this.eprecio13,this.eprecio14=e.eprecio14?e.eprecio14:this.eprecio14,this.eprecio15=e.eprecio15?e.eprecio15:this.eprecio15,this.eprecio16=e.eprecio16?e.eprecio16:this.eprecio16},e}()},lS66:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.presuEmpresa=null,this.presuCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.presuEmpresa=e.presuEmpresa?e.presuEmpresa:this.presuEmpresa,this.presuCodigo=e.presuCodigo?e.presuCodigo:this.presuCodigo},e}()},lThc:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.actProductoTO=null,this.proEmpresa="",this.proCodigoPrincipal="",this.proCodigoAlterno="",this.proCodigoBarra="",this.proCodigoBarra2="",this.proCodigoBarra3="",this.proCodigoBarra4="",this.proCodigoBarra5="",this.proEmpaque="",this.proNombre="",this.proDetalle="",this.proCantidad1=0,this.proCantidad2=0,this.proCantidad3=0,this.proCantidad4=0,this.proCantidad5=0,this.proPrecio1=0,this.proPrecio2=0,this.proPrecio3=0,this.proPrecio4=0,this.proPrecio5=0,this.proDescuento1=0,this.proDescuento2=0,this.proDescuento3=0,this.proDescuento4=0,this.proDescuento5=0,this.proMargenUtilidad1=0,this.proMargenUtilidad2=0,this.proMargenUtilidad3=0,this.proMargenUtilidad4=0,this.proMargenUtilidad5=0,this.proMinimo=0,this.proMaximo=0,this.proIva="",this.proCreditoTributario=!1,this.proCompuesto=!1,this.proInactivo=!1,this.proCuentaInventario=null,this.proCuentaGasto=null,this.proCuentaVenta=null,this.proCuentaTransferenciaIpp=null,this.catEmpresa="",this.catCodigo="",this.marEmpresa="",this.marCodigo="",this.presUEmpresa="",this.presUCodigo="",this.presCEmpresa="",this.presCCodigo="",this.tipEmpresa="",this.tipCodigo="",this.medEmpresa="",this.medCodigo="",this.usrEmpresa="",this.usrInsertaProducto="",this.usrFechaInsertaProducto=null,this.balFactorLibras=0,this.conCodigo=null,this.susCodigo=null,this.proFactorCajabulto=0,this.proCostoReferencial1=0,this.proCostoReferencial2=0,this.proCostoReferencial3=0,this.proCantidad6=0,this.proCantidad7=0,this.proCantidad8=0,this.proCantidad9=0,this.proCantidad10=0,this.proCantidad11=0,this.proCantidad12=0,this.proCantidad13=0,this.proCantidad14=0,this.proCantidad15=0,this.proCantidad16=0,this.proPrecio6=0,this.proPrecio7=0,this.proPrecio8=0,this.proPrecio9=0,this.proPrecio10=0,this.proPrecio11=0,this.proPrecio12=0,this.proPrecio13=0,this.proPrecio14=0,this.proPrecio15=0,this.proPrecio16=0,this.proDescuento6=0,this.proDescuento7=0,this.proDescuento8=0,this.proDescuento9=0,this.proDescuento10=0,this.proDescuento11=0,this.proDescuento12=0,this.proDescuento13=0,this.proDescuento14=0,this.proDescuento15=0,this.proDescuento16=0,this.proMargenUtilidad6=0,this.proMargenUtilidad7=0,this.proMargenUtilidad8=0,this.proMargenUtilidad9=0,this.proMargenUtilidad10=0,this.proMargenUtilidad11=0,this.proMargenUtilidad12=0,this.proMargenUtilidad13=0,this.proMargenUtilidad14=0,this.proMargenUtilidad15=0,this.proMargenUtilidad16=0,this.proCuentaCostoAutomatico="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.actProductoTO=e.actProductoTO?e.actProductoTO:this.actProductoTO,this.proEmpresa=e.proEmpresa?e.proEmpresa:this.proEmpresa,this.proCodigoPrincipal=e.proCodigoPrincipal?e.proCodigoPrincipal:this.proCodigoPrincipal,this.proCodigoAlterno=e.proCodigoAlterno?e.proCodigoAlterno:this.proCodigoAlterno,this.proCodigoBarra=e.proCodigoBarra?e.proCodigoBarra:this.proCodigoBarra,this.proCodigoBarra2=e.proCodigoBarra2?e.proCodigoBarra2:this.proCodigoBarra2,this.proCodigoBarra3=e.proCodigoBarra3?e.proCodigoBarra3:this.proCodigoBarra3,this.proCodigoBarra4=e.proCodigoBarra4?e.proCodigoBarra4:this.proCodigoBarra4,this.proCodigoBarra5=e.proCodigoBarra5?e.proCodigoBarra5:this.proCodigoBarra5,this.proEmpaque=e.proEmpaque?e.proEmpaque:this.proEmpaque,this.proNombre=e.proNombre?e.proNombre:this.proNombre,this.proDetalle=e.proDetalle?e.proDetalle:this.proDetalle,this.proCantidad1=e.proCantidad1?e.proCantidad1:this.proCantidad1,this.proCantidad2=e.proCantidad2?e.proCantidad2:this.proCantidad2,this.proCantidad3=e.proCantidad3?e.proCantidad3:this.proCantidad3,this.proCantidad4=e.proCantidad4?e.proCantidad4:this.proCantidad4,this.proCantidad5=e.proCantidad5?e.proCantidad5:this.proCantidad5,this.proPrecio1=e.proPrecio1?e.proPrecio1:this.proPrecio1,this.proPrecio2=e.proPrecio2?e.proPrecio2:this.proPrecio2,this.proPrecio3=e.proPrecio3?e.proPrecio3:this.proPrecio3,this.proPrecio4=e.proPrecio4?e.proPrecio4:this.proPrecio4,this.proPrecio5=e.proPrecio5?e.proPrecio5:this.proPrecio5,this.proDescuento1=e.proDescuento1?e.proDescuento1:this.proDescuento1,this.proDescuento2=e.proDescuento2?e.proDescuento2:this.proDescuento2,this.proDescuento3=e.proDescuento3?e.proDescuento3:this.proDescuento3,this.proDescuento4=e.proDescuento4?e.proDescuento4:this.proDescuento4,this.proDescuento5=e.proDescuento5?e.proDescuento5:this.proDescuento5,this.proMargenUtilidad1=e.proMargenUtilidad1?e.proMargenUtilidad1:this.proMargenUtilidad1,this.proMargenUtilidad2=e.proMargenUtilidad2?e.proMargenUtilidad2:this.proMargenUtilidad2,this.proMargenUtilidad3=e.proMargenUtilidad3?e.proMargenUtilidad3:this.proMargenUtilidad3,this.proMargenUtilidad4=e.proMargenUtilidad4?e.proMargenUtilidad4:this.proMargenUtilidad4,this.proMargenUtilidad5=e.proMargenUtilidad5?e.proMargenUtilidad5:this.proMargenUtilidad5,this.proMinimo=e.proMinimo?e.proMinimo:this.proMinimo,this.proMaximo=e.proMaximo?e.proMaximo:this.proMaximo,this.proIva=e.proIva?e.proIva:this.proIva,this.proCreditoTributario=e.proCreditoTributario?e.proCreditoTributario:this.proCreditoTributario,this.proCompuesto=e.proCompuesto?e.proCompuesto:this.proCompuesto,this.proInactivo=e.proInactivo?e.proInactivo:this.proInactivo,this.proCuentaInventario=e.proCuentaInventario?e.proCuentaInventario:this.proCuentaInventario,this.proCuentaGasto=e.proCuentaGasto?e.proCuentaGasto:this.proCuentaGasto,this.proCuentaVenta=e.proCuentaVenta?e.proCuentaVenta:this.proCuentaVenta,this.proCuentaTransferenciaIpp=e.proCuentaTransferenciaIpp?e.proCuentaTransferenciaIpp:this.proCuentaTransferenciaIpp,this.catEmpresa=e.catEmpresa?e.catEmpresa:this.catEmpresa,this.catCodigo=e.catCodigo?e.catCodigo:this.catCodigo,this.marEmpresa=e.marEmpresa?e.marEmpresa:this.marEmpresa,this.marCodigo=e.marCodigo?e.marCodigo:this.marCodigo,this.presUEmpresa=e.presUEmpresa?e.presUEmpresa:this.presUEmpresa,this.presUCodigo=e.presUCodigo?e.presUCodigo:this.presUCodigo,this.presCEmpresa=e.presCEmpresa?e.presCEmpresa:this.presCEmpresa,this.presCCodigo=e.presCCodigo?e.presCCodigo:this.presCCodigo,this.tipEmpresa=e.tipEmpresa?e.tipEmpresa:this.tipEmpresa,this.tipCodigo=e.tipCodigo?e.tipCodigo:this.tipCodigo,this.medEmpresa=e.medEmpresa?e.medEmpresa:this.medEmpresa,this.medCodigo=e.medCodigo?e.medCodigo:this.medCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrInsertaProducto=e.usrInsertaProducto?e.usrInsertaProducto:this.usrInsertaProducto,this.usrFechaInsertaProducto=e.usrFechaInsertaProducto?e.usrFechaInsertaProducto:this.usrFechaInsertaProducto,this.balFactorLibras=e.balFactorLibras?e.balFactorLibras:this.balFactorLibras,this.conCodigo=e.conCodigo?e.conCodigo:this.conCodigo,this.susCodigo=e.susCodigo?e.susCodigo:this.susCodigo,this.proFactorCajabulto=e.proFactorCajabulto?e.proFactorCajabulto:this.proFactorCajabulto,this.proCostoReferencial1=e.proCostoReferencial1?e.proCostoReferencial1:this.proCostoReferencial1,this.proCostoReferencial2=e.proCostoReferencial2?e.proCostoReferencial2:this.proCostoReferencial2,this.proCostoReferencial3=e.proCostoReferencial3?e.proCostoReferencial3:this.proCostoReferencial3,this.proCantidad6=e.proCantidad6?e.proCantidad6:this.proCantidad6,this.proCantidad7=e.proCantidad7?e.proCantidad7:this.proCantidad7,this.proCantidad8=e.proCantidad8?e.proCantidad8:this.proCantidad8,this.proCantidad9=e.proCantidad9?e.proCantidad9:this.proCantidad9,this.proCantidad10=e.proCantidad10?e.proCantidad10:this.proCantidad10,this.proCantidad11=e.proCantidad11?e.proCantidad11:this.proCantidad11,this.proCantidad12=e.proCantidad12?e.proCantidad12:this.proCantidad12,this.proCantidad13=e.proCantidad13?e.proCantidad13:this.proCantidad13,this.proCantidad14=e.proCantidad14?e.proCantidad14:this.proCantidad14,this.proCantidad15=e.proCantidad15?e.proCantidad15:this.proCantidad15,this.proCantidad16=e.proCantidad16?e.proCantidad16:this.proCantidad16,this.proPrecio6=e.proPrecio6?e.proPrecio6:this.proPrecio6,this.proPrecio7=e.proPrecio7?e.proPrecio7:this.proPrecio7,this.proPrecio8=e.proPrecio8?e.proPrecio8:this.proPrecio8,this.proPrecio9=e.proPrecio9?e.proPrecio9:this.proPrecio9,this.proPrecio10=e.proPrecio10?e.proPrecio10:this.proPrecio10,this.proPrecio11=e.proPrecio11?e.proPrecio11:this.proPrecio11,this.proPrecio12=e.proPrecio12?e.proPrecio12:this.proPrecio12,this.proPrecio13=e.proPrecio13?e.proPrecio13:this.proPrecio13,this.proPrecio14=e.proPrecio14?e.proPrecio14:this.proPrecio14,this.proPrecio15=e.proPrecio15?e.proPrecio15:this.proPrecio15,this.proPrecio16=e.proPrecio16?e.proPrecio16:this.proPrecio16,this.proDescuento6=e.proDescuento6?e.proDescuento6:this.proDescuento6,this.proDescuento7=e.proDescuento7?e.proDescuento7:this.proDescuento7,this.proDescuento8=e.proDescuento8?e.proDescuento8:this.proDescuento8,this.proDescuento9=e.proDescuento9?e.proDescuento9:this.proDescuento9,this.proDescuento10=e.proDescuento10?e.proDescuento10:this.proDescuento10,this.proDescuento11=e.proDescuento11?e.proDescuento11:this.proDescuento11,this.proDescuento12=e.proDescuento12?e.proDescuento12:this.proDescuento12,this.proDescuento13=e.proDescuento13?e.proDescuento13:this.proDescuento13,this.proDescuento14=e.proDescuento14?e.proDescuento14:this.proDescuento14,this.proDescuento15=e.proDescuento15?e.proDescuento15:this.proDescuento15,this.proDescuento16=e.proDescuento16?e.proDescuento16:this.proDescuento16,this.proMargenUtilidad6=e.proMargenUtilidad6?e.proMargenUtilidad6:this.proMargenUtilidad6,this.proMargenUtilidad7=e.proMargenUtilidad7?e.proMargenUtilidad7:this.proMargenUtilidad7,this.proMargenUtilidad8=e.proMargenUtilidad8?e.proMargenUtilidad8:this.proMargenUtilidad8,this.proMargenUtilidad9=e.proMargenUtilidad9?e.proMargenUtilidad9:this.proMargenUtilidad9,this.proMargenUtilidad10=e.proMargenUtilidad10?e.proMargenUtilidad10:this.proMargenUtilidad10,this.proMargenUtilidad11=e.proMargenUtilidad11?e.proMargenUtilidad11:this.proMargenUtilidad11,this.proMargenUtilidad12=e.proMargenUtilidad12?e.proMargenUtilidad12:this.proMargenUtilidad12,this.proMargenUtilidad13=e.proMargenUtilidad13?e.proMargenUtilidad13:this.proMargenUtilidad13,this.proMargenUtilidad14=e.proMargenUtilidad14?e.proMargenUtilidad14:this.proMargenUtilidad14,this.proMargenUtilidad15=e.proMargenUtilidad15?e.proMargenUtilidad15:this.proMargenUtilidad15,this.proMargenUtilidad16=e.proMargenUtilidad16?e.proMargenUtilidad16:this.proMargenUtilidad16,this.proCuentaCostoAutomatico=e.proCuentaCostoAutomatico?e.proCuentaCostoAutomatico:this.proCuentaCostoAutomatico},e}()},lgnl:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.prescEmpresa=null,this.prescCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.prescEmpresa=e.prescEmpresa?e.prescEmpresa:this.prescEmpresa,this.prescCodigo=e.prescCodigo?e.prescCodigo:this.prescCodigo},e}()},lpxS:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.vmCodigo="",this.vmDetalle="",this.vmTipo="",this.vmFormaContabilizar="",this.vmFormaImprimir="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.vmCodigo=e.vmCodigo?e.vmCodigo:this.vmCodigo,this.vmDetalle=e.vmDetalle?e.vmDetalle:this.vmDetalle,this.vmTipo=e.vmTipo?e.vmTipo:this.vmTipo,this.vmFormaContabilizar=e.vmFormaContabilizar?e.vmFormaContabilizar:this.vmFormaContabilizar,this.vmFormaImprimir=e.vmFormaImprimir?e.vmFormaImprimir:this.vmFormaImprimir},e}()},ltaV:function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_PRODUCTO_CATEGORIA}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}\r\n      </strong>\r\n    </span>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrarCategoria()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class="row" [ngClass]="{\'modal-body\': esModal}">\r\n    <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5 col-lg-12 col-md-12 col-sm-11">\r\n      <div class="card m-0 mb-2" *ngIf="!mostrarSubCategoria">\r\n        <div class="card-header p-1">\r\n          <i class="{{classTitulo}}"></i>\r\n          <b>{{frmTitulo}}</b>\r\n          <div class="card-header-actions" *ngIf="vistaFormulario">\r\n            <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardar" type="button" (click)="guardarProductoCategoria(frmProductoCategoria)"\r\n              class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n            <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardar" type="button" (click)="actualizarProductoCategoria(frmProductoCategoria)"\r\n              class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n            <button (click)="resetearFormulario()" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n              title="{{constantes.ATAJO_CANCELAR}}">\r\n              <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          <form #frmProductoCategoria="ngForm" autocomplete="off">\r\n            <div *ngIf="vistaFormulario">\r\n              <div class="row">\r\n                <div class="form-group form-group-sm has-feedback col-md-4">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                  </label>\r\n                  <input type="text" class="form-control input-sm" disabled="true" *ngIf="!(accion===constantes.ACCION_CREAR)"\r\n                    [(ngModel)]="invProductoCategoriaTO.catCodigo" name="catCodigo">\r\n                  \x3c!--<p *ngIf="!(accion===constantes.ACCION_CREAR)" class="form-control input-sm">{{invProductoCategoriaTO.catCodigo}}</p>--\x3e\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" type="text" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                    name="catCodigo" [(ngModel)]="invProductoCategoriaTO.catCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                    required minlength="1" maxlength="30" appUppercase>\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" triggers="mouseenter:mouseleave"\r\n                    container="body"></span>\r\n                </div>\r\n                <div class="form-group form-group-sm col-md-8">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                  </label>\r\n                  <input type="text" [appFocus]="accion===constantes.ACCION_EDITAR" name="catDetalle" [(ngModel)]="invProductoCategoriaTO.catDetalle"\r\n                    (blur)="espacios()" placeholder="{{constantes.TAG_OBLIGATORIO}}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                    required minlength="1" maxlength="250" appUppercase>\r\n                </div>\r\n              </div>\r\n              <div class="form-group row">\r\n                <div class="col-md-12">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_SUB_CATEGORIA}}</strong>\r\n                    &nbsp;\r\n                    <a (click)="agregarSubCategoria()">\r\n                      <span class="fa fa-plus-square" placement="top" ngbTooltip="A\xf1adir" container="body"></span>\r\n                    </a>\r\n                  </label>\r\n                  <select class="form-control form-control-sm text-uppercase mousetrap" name="grupo"\r\n                    [(ngModel)]="subCategoriaSeleccionado.invProductoSubcategoriaPK.scatCodigo" required>\r\n                    <option value="" disabled selected hidden>{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="subCategoria.invProductoSubcategoriaPK.scatCodigo" *ngFor="let subCategoria of listadoSubCategoria; let i = index">\r\n                      {{subCategoria.scatDetalle}} ({{listadoSubCategoria[i].invProductoSubcategoriaPK.scatCodigo}})</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              \x3c!--mostrarCuenta--\x3e\r\n              <div *ngIf="mostrarCuenta" class="form-group form-group-sm has-feedback row">\r\n                <div class="col-md-4">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CODIGO_CUENTA}}</strong>\r\n                  </label>\r\n                  <input name="ctaCodigo" [(ngModel)]="invProductoCategoriaTO.ctaCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                    maxlength="500" (keydown)="buscarCuentaContable($event)" (blur)="validarCuentaCodigo()"\r\n                    appUppercase>\r\n                  <span *ngIf="!(accion === constantes.ACCION_CONSULTAR)" class="fa fa-question-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_COD_CUENTA}}" triggers="mouseenter:mouseleave"\r\n                    container="body"></span>\r\n                </div>\r\n                <div class="col-md-8">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_DETALLE_CUENTA}}</strong>\r\n                  </label>\r\n                  <input name="cuentaDetalle" [(ngModel)]="cuentaDetalle" class="form-control form-control-sm mousetrap text-uppercase"\r\n                    readonly>\r\n                </div>\r\n              </div>\r\n              <div *ngIf="mostrarCuenta" class="text-md-center pb-2">\r\n                <label>\r\n                  <input name="catPrecioFijo" [(ngModel)]="invProductoCategoriaTO.catPrecioFijo" type="checkbox">\r\n                  <b>&nbsp;{{constantes.TAG_PRECIO_FIJO}}</b>\r\n                </label>\r\n              </div>\r\n              \x3c!--Fin de mostrarCuenta--\x3e\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--Card SubCategoria--\x3e\r\n      <div class="card m-0 mb-2" *ngIf="vistaFormularioSC">\r\n        <div class="card-header p-1">\r\n          <i class="{{classTitulo}}"></i>\r\n          <b>{{constantes.TITULO_FORM_NUEVO_PRODUCTO_SUBCATEGORIA}}</b>\r\n          <div class="card-header-actions">\r\n            <button *ngIf="accionSC === constantes.ACCION_CREAR" id="btnGuardar" type="button" (click)="guardarProductoSubCategoria(frmProductoSubCategoria)"\r\n              class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n            <button *ngIf="accionSC === constantes.ACCION_EDITAR" id="btnGuardar" type="button" (click)="actualizarProductoSubCategoria(frmProductoSubCategoria)"\r\n              class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n            <button (click)="cancelarSubCategoria()" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n              title="{{constantes.ATAJO_CANCELAR}}">\r\n              <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          <form #frmProductoSubCategoria="ngForm" autocomplete="off">\r\n            <div class="form-group form-group-sm has-feedback row">\r\n              <div class="col-md-6">\r\n                <label class="control-label">\r\n                  <strong>{{constantes.TAG_CODIGO}}\r\n                    <span class="fa fa-info-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                      autoClose="outside" ngbPopover="{{constantes.MSJ_CODIGO_SUBCATEGORIA}}" container="body"></span>\r\n                  </strong>\r\n                </label>\r\n                <select class="form-control input-sm height-26 mousetrap text-uppercase" name="codSubCategoria"\r\n                  [(ngModel)]="subCategoria.invProductoSubcategoriaPK.scatCodigo" [disabled]="accionSC===constantes.ACCION_EDITAR">\r\n                  <option selected *ngFor="let subcategoria of subCategorias">{{subcategoria}}</option>\r\n                </select>\r\n              </div>\r\n              <div class="col-md-6">\r\n                <label class="control-label">\r\n                  <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                </label>\r\n                <input class="form-control form-control-sm text-uppercase mousetrap" name="detalleSubCategoria"\r\n                  maxlength="30" type="text" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="subCategoria.scatDetalle"\r\n                  required appUppercase [appFocus]="true">\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n    <div class="col-lg-12 col-md-12 col-sm-12" *ngIf="activar">\r\n      <div class="card m-0" *ngIf="listadoResultado?.length > 0 && !vistaFormulario">\r\n        <div class="card-header p-1">\r\n          <b>{{mostrarSubCategoria ? constantes.INVENTARIO_SUBCATEGORIA_PRODUCTO_LISTADO :\r\n            constantes.INVENTARIO_CATEGORIA_PRODUCTO_LISTADO}}</b>\r\n          <div class="card-header-actions">\r\n            <div class="btn-group">\r\n              <button id="btnNuevo" class="btn btn-sm btn-primary mr-1" type="button" (click)="mostrarSubCategoria ? nuevoProductoSubCategoria() : nuevoProductoCategoria()"\r\n                container="body" title="{{constantes.ATAJO_NUEVO}}" ngbTooltip="{{constantes.LABEL_NUEVO}}" *ngIf="mostrarSubCategoria==true ? (listadoSubCategoria.length==11 ? false : true) : true">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n              </button>\r\n              <button (click)="atrasFormulario()" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n                title="{{constantes.ATAJO_CANCELAR}}" *ngIf="mostrarSubCategoria">\r\n                <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n              <button id="btnImprimir" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n                container="body" (click)="imprimir()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir"\r\n                title="{{constantes.ATAJO_IMPRIMIR}}" *ngIf="!mostrarSubCategoria">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n              </button>\r\n              <button id="btnExportar" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n                container="body" (click)="exportar()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar"\r\n                title="{{constantes.ATAJO_EXPORTAR}}" *ngIf="!mostrarSubCategoria">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="card-body p-0">\r\n          <div class="row">\r\n            <div class="col-sm-5 col-md-6">\r\n              <div class="input-group p-1">\r\n                <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                  size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                  size="100">\r\n                <div class="input-group-append">\r\n                  <span class="input-group-text">\r\n                    <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-7 col-md-6">\r\n              <div class="float-right pr-1">\r\n                <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                  maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \x3c!--Tabla--\x3e\r\n          <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n            [rowData]="mostrarSubCategoria ? listadoSubCategoria : listadoResultado" [columnDefs]="columnDefsSelected"\r\n            [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true"\r\n            [components]="components" [context]="context" [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()"\r\n            (gridReady)="onGridReady($event)" (rowSelected)="mostrarSubCategoria ? subCategoria : objetoSeleccionado = $event.node.data"\r\n            (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()"\r\n            (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()">\r\n          </ag-grid-angular>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"m/aa":function(e,t,o){"use strict";var a=o("CcnG"),i=o("zkCp"),r=o("8fiX"),n=o("mwBN"),s=o("M9xU"),c=o("UBxT"),l=o("EnEm"),d=o("eUd/"),p=o("CEfs"),u=o("nR5P"),h=o("Ungd"),m=o("SZbH"),C=o("z5Y/"),v=o("yccp"),A=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,o){this.api=e,this.atajoService=t,this.utilService=o}return e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new v.Hotkey(n.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivar");return t&&t.click(),!1})),this.atajoService.add(new v.Hotkey(n.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportar");return t&&t.click(),!1})),this.atajoService.add(new v.Hotkey(n.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimir");return t&&t.click(),!1}))},e=A([Object(a.Injectable)({providedIn:"root"}),f("design:paramtypes",[C.a,v.HotkeysService,u.a])],e)}();o.d(t,"a",function(){return S});var b=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},O=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=function(){function e(e,t,o,i,r,s,d){this.empleadosService=e,this.activeModal=t,this.filasService=o,this.utilService=i,this.archivoService=r,this.toastr=s,this.empleadoListadoService=d,this.parametrosBusqueda=null,this.tipoVista="A",this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.objetoSeleccionado=new c.a,this.listadoEmpleados=new Array,this.empleadosBusqueda=new Array,this.constantes=n.a,this.enterKey=0,this.filtroGlobal="",this.accion="",this.activar=!1,this.cargando=!1,this.filasTiempo=new l.a,this.columnDefs=[],this.columnDefsSelected=[]}return e.prototype.ngOnInit=function(){this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576),this.isModal&&this.buscarEmpleados(),this.empleadoListadoService.definirAtajosDeTeclado(),this.iniciarAgGrid()},e.prototype.buscarEmpleados=function(){this.filasTiempo.iniciarContador(),this.cargando=!0,"C"==this.tipoVista?(this.empleadosBusqueda=new Array,this.empleadosService.listarFunEmpleados(this.parametrosBusqueda,this,n.a.KEY_EMPRESA_SELECT)):(this.listadoEmpleados=new Array,this.empleadosService.listarEmpleados(this.parametrosBusqueda,this,n.a.KEY_EMPRESA_SELECT))},e.prototype.despuesDeListarEmpleados=function(e){this.filasTiempo.finalizarContador(),0===e.length?this.activeModal.dismiss():1===e.length&&this.isModal?this.activeModal.close(e[0]):this.listadoEmpleados=e,this.cargando=!1},e.prototype.despuesDeListarFunEmpleados=function(e){this.filasTiempo.finalizarContador(),0===e.length?this.activeModal.dismiss():1===e.length&&this.isModal?this.activeModal.close(e[0]):this.empleadosBusqueda=e,this.cargando=!1},e.prototype.imprimirEmpleados=function(){var e=this;if(this.utilService.verificarPermiso(n.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={tipoVista:this.tipoVista,lista:"A"===this.tipoVista?this.listadoEmpleados:this.empleadosBusqueda};this.archivoService.postPDF("todocompuWS/rrhhWebController/generarReporteRhEmpleado",t,this.empresaSeleccionada).then(function(t){t&&t._body&&t._body.byteLength>0?e.utilService.descargarArchivoPDF("ListadoEmpleados_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(n.a.MSJ_ERROR_IMPRIMIR,n.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.imprimiEmpleado=function(){var e=this;if(this.utilService.verificarPermiso(n.a.ACCION_IMPRIMIR,this,!0)){var t=new Array;t.push(this.objetoSeleccionado),this.cargando=!0;var o={tipoVista:"I",lista:t};this.archivoService.postPDF("todocompuWS/rrhhWebController/generarReporteRhEmpleado",o,this.empresaSeleccionada).then(function(t){t&&t._body&&t._body.byteLength>0?e.utilService.descargarArchivoPDF("Empleado_"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(n.a.MSJ_ERROR_IMPRIMIR,n.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportarEmpleados=function(){var e=this;if(this.utilService.verificarPermiso(n.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={tipoVista:this.tipoVista,lista:"A"===this.tipoVista?this.listadoEmpleados:this.empleadosBusqueda};this.archivoService.postExcel("todocompuWS/rrhhWebController/exportarEmpleado",t,this.empresaSeleccionada).then(function(t){t&&t._body&&t._body.byteLength>0?e.utilService.descargarArchivoExcel(t._body,"ListadoEmpleados_"):e.toastr.warning(n.a.MSJ_ERROR_EXPORTAR,n.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.consultar=function(){this.emitirAccion(n.a.ACCION_CONSULTAR,this.objetoSeleccionado)},e.prototype.generarOpciones=function(){var e=this,t=this.empresaSeleccionada.listaSisPermisoTO.gruModificarEmpleados,o=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificarEmpleados&&!this.objetoSeleccionado.empInactivo,i=this.empresaSeleccionada.listaSisPermisoTO.gruModificarEmpleados&&this.objetoSeleccionado.empInactivo,r=this.empresaSeleccionada.listaSisPermisoTO.gruImprimir;this.opciones=[{label:n.a.ACCION_CONSULTAR,icon:n.a.ICON_CONSULTAR,disabled:!1,command:function(){return e.emitirAccion(n.a.ACCION_CONSULTAR,e.objetoSeleccionado)}},{label:n.a.ACCION_EDITAR,icon:n.a.ICON_EDITAR,disabled:!t,command:function(){return t?e.emitirAccion(n.a.ACCION_EDITAR,e.objetoSeleccionado):null}},{label:n.a.ACCION_INACTIVAR,icon:n.a.ICON_INACTIVAR,disabled:!a,command:function(){return t?e.inactivar(!0):null}},{label:n.a.ACCION_ACTIVAR,icon:n.a.ICON_ACTIVAR,disabled:!i,command:function(){return i?e.inactivar(!1):null}},{label:n.a.ACCION_ELIMINAR,icon:n.a.ICON_ELIMINAR,disabled:!o,command:function(){return o?e.eliminarEmpleado():null}},{label:n.a.ACCION_IMPRIMIR,icon:n.a.ICON_IMPRIMIR,disabled:!r,command:function(){return r?e.imprimiEmpleado():null}}]},e.prototype.inactivar=function(e){var t,o=this;e?(this.accion=n.a.ACCION_INACTIVAR,t={title:n.a.ACCION_INACTIVAR,texto:n.a.MSJ_PREGUNTA_INACTIVAR+"<br> "+n.a.TAG_TRABAJADOR+": "+this.objetoSeleccionado.empApellidos+" "+this.objetoSeleccionado.empNombres,type:n.a.SWAL_QUESTION,confirmButtonText:n.a.LABEL_ACEPTAR,cancelButtonText:n.a.LABEL_CANCELAR}):(this.accion=n.a.ACCION_ACTIVAR,t={title:n.a.ACCION_ACTIVAR,texto:n.a.MSJ_PREGUNTA_ACTIVAR+"<br> "+n.a.TAG_TRABAJADOR+": "+this.objetoSeleccionado.empApellidos+" "+this.objetoSeleccionado.empNombres,type:n.a.SWAL_QUESTION,confirmButtonText:n.a.LABEL_ACEPTAR,cancelButtonText:n.a.LABEL_CANCELAR}),this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){o.cargando=!0,o.objetoSeleccionado.empInactivo=e;var a={pk:o.objetoSeleccionado.rhEmpleadoPK,activar:!e};o.empleadosService.cambiarEstadoRhEmpleado(a,o,n.a.KEY_EMPRESA_SELECT)}else o.cargando=!1})},e.prototype.despuesDeCambiarEstadoRhEmpleado=function(e){var t=this;switch(this.accion){case n.a.ACCION_ACTIVAR:this.objetoSeleccionado.empInactivo=!1;break;case n.a.ACCION_INACTIVAR:this.objetoSeleccionado.empInactivo=!0}var o=this.listadoEmpleados.findIndex(function(e){return e.rhEmpleadoPK.empId===t.objetoSeleccionado.rhEmpleadoPK.empId});this.listadoEmpleados[o]=this.objetoSeleccionado,this.gridApi.updateRowData({update:[this.objetoSeleccionado]}),this.toastr.success(e.operacionMensaje,n.a.TOAST_CORRECTO),this.cargando=!1},e.prototype.eliminarEmpleado=function(){var e=this;this.accion=n.a.ACCION_ELIMINAR;var t={title:n.a.MSJ_TITULO_ELIMINAR,texto:n.a.MSJ_PREGUNTA_ELIMINAR,type:n.a.SWAL_WARNING,confirmButtonText:n.a.MSJ_SI_ELIMINAR,cancelButtonText:n.a.MSJ_CANCELAR,confirmButtonColor:n.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(t).then(function(t){if(t){e.cargando=!0;var o={rhEmpleadoPK:e.objetoSeleccionado.rhEmpleadoPK};e.empleadosService.eliminarRhEmpleado(o,e,n.a.KEY_EMPRESA_SELECT)}else e.cargando=!1})},e.prototype.despuesDeEliminarRhEmpleado=function(e){this.cargando=!1,this.gridApi&&this.gridApi.updateRowData({remove:[this.objetoSeleccionado]})},e.prototype.filaSeleccionar=function(){this.enviarItem(this.objetoSeleccionado)},e.prototype.ejecutarSpanAccion=function(e,t){this.enviarItem(t)},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.emitirAccion=function(e,t){var o={accion:e,objetoSeleccionado:t};this.enviarAccion.emit(o)},e.prototype.ngOnChanges=function(e){this.empleadoListadoService.definirAtajosDeTeclado(),e.parametrosBusqueda&&(e.parametrosBusqueda.currentValue&&e.parametrosBusqueda.currentValue.listar?this.buscarEmpleados():e.parametrosBusqueda.currentValue&&e.parametrosBusqueda.currentValue.objetoSeleccionado?this.actualizarTabla(e.parametrosBusqueda.currentValue.objetoSeleccionado):this.listadoEmpleados=new Array)},e.prototype.actualizarTabla=function(e){var t=e,o=this.listadoEmpleados.findIndex(function(e){return e.rhEmpleadoPK.empId==t.rhEmpleadoPK.empId});o>=0?(this.listadoEmpleados[o]=t,this.gridApi&&this.gridApi.getRowNode(""+o).setData(t)):(this.listadoEmpleados.unshift(t),this.gridApi&&this.gridApi.updateRowData({add:[t]}))},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarActivar.emit(e)},e.prototype.iniciarAgGrid=function(){this.columnDefs="C"===this.tipoVista?this.empleadosService.generarColumnasConsulta(this.isModal):this.empleadosService.generarColumnas(this.isModal),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},e.prototype.mostrarOpciones=function(e,t){"A"==this.tipoVista&&this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.objetoSeleccionado=e,this.isModal||"A"!=this.tipoVista||(this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation())},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.objetoSeleccionado=t?t.data:null},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.handleKeyboardEvent=function(e){this.isModal&&13===e.keyCode&&(this.enterKey>0&&this.enviarItem(this.objetoSeleccionado),this.enterKey=this.enterKey+1)},e.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=n.a.WINDOW_WIDTH_XS)},b([Object(a.Input)(),O("design:type",Object)],e.prototype,"parametrosBusqueda",void 0),b([Object(a.Input)(),O("design:type",r.a)],e.prototype,"empresaSeleccionada",void 0),b([Object(a.Input)(),O("design:type",Boolean)],e.prototype,"isModal",void 0),b([Object(a.Input)(),O("design:type",String)],e.prototype,"tipoVista",void 0),b([Object(a.Output)(),O("design:type",Object)],e.prototype,"enviarActivar",void 0),b([Object(a.Output)(),O("design:type",Object)],e.prototype,"enviarAccion",void 0),b([Object(a.ViewChild)("menuOpciones"),O("design:type",i.ContextMenu)],e.prototype,"menuOpciones",void 0),b([Object(a.HostListener)("document:keydown",["$event"]),O("design:type",Function),O("design:paramtypes",[KeyboardEvent]),O("design:returntype",void 0)],e.prototype,"handleKeyboardEvent",null),b([Object(a.HostListener)("window:resize",["$event"]),O("design:type",Function),O("design:paramtypes",[]),O("design:returntype",void 0)],e.prototype,"onResize",null),e=b([Object(a.Component)({selector:"app-empleados-listado",template:o("DKqk")}),O("design:paramtypes",[s.a,d.a,p.a,u.a,h.a,m.b,g])],e)}()},m5XJ:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--FORMULARIO DE FILTRADO--\x3e\r\n    <div class="card">\r\n      <div class="card-header">\r\n        <i class="fa fa-filter"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmFiltroOrdenPedido="ngForm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada" (change)="cambiarempresaSeleccionada();limpiarResultado();"\r\n              required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_BODEGA}}</strong>\r\n              &nbsp;\r\n              <a (click)="listarBodegas()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_BODEGAS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaBodegas" name="bodega" [showClear]="true" [(ngModel)]="bodegaSeleccionada"\r\n              (ngModelChange)="limpiarResultado()" placeholder="{{constantes.TAG_TODOS}}" optionLabel="bodNombre">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{bodegaSeleccionada?.bodNombre}} ( {{bodegaSeleccionada?.bodCodigo}})\r\n              </ng-template>\r\n              <ng-template let-fs pTemplate="item">\r\n                <div> {{fs.value.bodNombre}} ({{fs.value.bodCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" (ngModelChange)="limpiarResultado();" [showIcon]="true"\r\n              [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" (ngChangeModel)="limpiarResultado()"\r\n              [required]="true" [disabled]="vistaFormulario" [maxDate]="fechaHasta" [appMaxDate]="fechaHasta"></p-calendar>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" (ngModelChange)="limpiarResultado();" [showIcon]="true"\r\n              [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" (ngChangeModel)="limpiarResultado()"\r\n              [required]="true" [disabled]="vistaFormulario" [minDate]="fechaDesde" [maxDate]="fechaActual"\r\n              [appMinDate]="fechaDesde" [appMaxDate]="fechaActual"></p-calendar>\r\n          </div>\r\n          <div class="form-group form-group-sm has-feedback">\r\n            <label class="control-label  ">\r\n              <strong>{{constantes.TAG_PRODUCTO}}</strong>\r\n            </label>\r\n            <input name="proCodigoPrincipal" id="idProducto" [(ngModel)]="productoSeleccionado.proCodigoPrincipal"\r\n              (change)="limpiarResultado();" pattern="{{constantes.PATTERN_CODIGO}}" class="form-control input-sm mousetrap text-uppercase"\r\n              placeholder="{{constantes.TAG_OBLIGATORIO}}" maxlength="500" (keydown)="buscarProducto($event)" (blur)="validarProducto()"\r\n              appUppercase required>\r\n            <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_ENTERTOMODAL}}"\r\n              triggers="mouseenter:mouseleave" container="body"></span>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_CATEGORIA}}</strong>\r\n            </label>\r\n            <input name="catCodigo" [(ngModel)]="productoSeleccionado.proCategoria" class="form-control input-sm mousetrap text-uppercase"\r\n              readonly disabled>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_NOMBRE}}</strong>\r\n            </label>\r\n            <input name="proNombre" [(ngModel)]="productoSeleccionado.proNombre" class="form-control input-sm mousetrap text-uppercase"\r\n              readonly disabled>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_UNIDAD_MEDIDA}}</strong>\r\n            </label>\r\n            <input name="medDetalle" [(ngModel)]="productoSeleccionado.detalleMedida" class="form-control input-sm mousetrap text-uppercase"\r\n              readonly disabled>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button id="btnBuscar" type="button" class="btn btn-sm btn-primary" (click)="buscarKardex(frmFiltroOrdenPedido,false)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarKardex(frmFiltroOrdenPedido,true)">{{constantes.TAG_INCLUIR_TODOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button id="btnCancelarKardex" type="button" class="btn btn-sm btn-default mr-1" (click)="cancelar()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_REGRESAR}}" *ngIf="objetoDesdeFuera && mostrarBtnRegresarFomulario"\r\n            container="body" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i> {{constantes.LABEL_REGRESAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    \x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n    <app-kardex-listado [parametrosBusqueda]="busquedaListado" [empresaSeleccionada]="empresaSeleccionada" [datos]="dataListado"\r\n      (enviarCancelar)="cancelar()" (enviarActivar)="activar=$event" (enviarMostrarBtnRegresarFormulario)="mostrarBtnRegresarFomulario = $event"></app-kardex-listado>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},mBg1:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.cliEmpresa=null,this.cliCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.cliEmpresa=e.cliEmpresa?e.cliEmpresa:this.cliEmpresa,this.cliCodigo=e.cliCodigo?e.cliCodigo:this.cliCodigo},e}()},mEBT:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.bodCodigo="",this.bodNombre="",this.secCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.bodCodigo=e.bodCodigo?e.bodCodigo:this.bodCodigo,this.bodNombre=e.bodNombre?e.bodNombre:this.bodNombre,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo},e}()},mmnz:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("mwBN"),r=o("z5Y/"),n=o("SZbH"),s=o("nR5P"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarInvListaInvVentasFormaCobroTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvVentasFormaCobroTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvListarInvVentasFormaCobroTO(e.extraInfo):(t.despuesDeListarInvListarInvVentasFormaCobroTO([]),a.toastr.warning(e.operacionMensaje,i.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case i.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case i.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar;break;case i.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar}return o&&!a&&this.toastr.warning(i.a.ERROR_403_TEXTO,i.a.ERROR_403_TITULO),a},e.prototype.seleccionarSector=function(e,t){return e.find(function(e){return e.secCodigo==t})},e.prototype.generarColumnas=function(){return[{headerName:i.a.TAG_CUENTA,field:"ctaCodigo",width:120,minWidth:120},{headerName:i.a.TAG_DETALLE,field:"fcDetalle",width:400,minWidth:400},{headerName:i.a.TAG_TIPO,field:"fcTipoPrincipal",width:150,minWidth:150},{headerName:i.a.TAG_SECTOR,field:"secCodigo",width:90,minWidth:90},{headerName:i.a.TAG_INACTIVO,headerClass:"text-md-center",field:"fcInactivo",width:115,minWidth:115,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[r.a,n.b,s.a])],e)}()},"n/Mz":function(e,t,o){"use strict";o.d(t,"a",function(){return r});var a=o("3IAp"),i=o("9CJC"),r=function(){function e(e){this.detSecuencial=0,this.detOrden=0,this.detCantidadSolicitada=0,this.detCantidadAprobada=0,this.detCantidadAdquirida=0,this.detPrecioReferencial=0,this.detPrecioReal=0,this.detObservacionesRegistra="",this.detObservacionesAprueba="",this.detObservacionesEjecuta="",this.detCompletado=!1,this.invPedidos=new a.a,this.invProducto=new i.a,this.proCodigoPrincipal=null,this.parcial=0,this.categoriaProductoValido=!0,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencial=e.detSecuencial?e.detSecuencial:this.detSecuencial,this.detOrden=e.detOrden?e.detOrden:this.detOrden,this.detCantidadSolicitada=e.detCantidadSolicitada?e.detCantidadSolicitada:this.detCantidadSolicitada,this.detCantidadAprobada=e.detCantidadAprobada?e.detCantidadAprobada:this.detCantidadAprobada,this.detCantidadAdquirida=e.detCantidadAdquirida?e.detCantidadAdquirida:this.detCantidadAdquirida,this.detPrecioReferencial=e.detPrecioReferencial?e.detPrecioReferencial:this.detPrecioReferencial,this.detPrecioReal=e.detPrecioReal?e.detPrecioReal:this.detPrecioReal,this.detObservacionesRegistra=e.detObservacionesRegistra?e.detObservacionesRegistra:this.detObservacionesRegistra,this.detObservacionesAprueba=e.detObservacionesAprueba?e.detObservacionesAprueba:this.detObservacionesAprueba,this.detObservacionesEjecuta=e.detObservacionesEjecuta?e.detObservacionesEjecuta:this.detObservacionesEjecuta,this.detCompletado=e.detCompletado?e.detCompletado:this.detCompletado,this.invPedidos=e.invPedidos?e.invPedidos:this.invPedidos,this.invProducto=e.invProducto?e.invProducto:this.invProducto,this.proCodigoPrincipal=this.invProducto&&this.invProducto.invProductoPK?this.invProducto.invProductoPK.proCodigoPrincipal:null},e}()},n1xb:function(e,t,o){"use strict";o.d(t,"a",function(){return m});var a=o("CcnG"),i=o("Ungd"),r=o("nR5P"),n=o("SZbH"),s=o("z5Y/"),c=o("mwBN"),l=o("Ip0R"),d=o("madF"),p=o("L5HG"),u=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.listarCarFunPagos=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/getCarFunPagosTO",e,o).then(function(e){e&&e.extraInfo?e.extraInfo.length>1?t.despuesDeListarCarFunPagos(e.extraInfo):(a.toastr.warning(c.a.MSJ_NO_DATA,"Aviso"),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,c.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirCarFunPagos=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarFunPagos",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("listadoCarFunPagos.pdf",e):a.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirPagosPorLote=function(e,t,o){var a=this;this.archivoService.postPDF("todocompuWS/carteraWebController/generarReportePorLotePagos",e,o).then(function(e){e._body.byteLength>0?a.utilService.descargarArchivoPDF("Pagos.pdf",e):a.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.MSJ_TITULO_REPORTE),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.exportarCarFunPagos=function(e,t,o){var a=this;this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarFunPagos",e,o).then(function(e){e?a.utilService.descargarArchivoExcel(e._body,"listadoCarFunPagos_"):a.toastr.warning(c.a.MSJ_NO_DATA,c.a.TAG_AVISO),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=[];return t.push({headerName:c.a.TAG_ESTADO,headerClass:"text-center",width:90,minWidth:90,maxWidth:90,cellClass:"text-center",cellRendererFramework:p.a,valueGetter:function(e){return!0===e.data.pagAnulado?(e.value=c.a.ETIQUETA_ANULADO,e.value):!0===e.data.pagPendiente?(e.value=c.a.ETIQUETA_PENDIENTE,e.value):""}},{headerName:c.a.TAG_NUMERO,field:"pagNumeroSistema",width:180,minWidth:180},{headerName:c.a.TAG_FECHA,field:"pagFecha",width:80,minWidth:80}),e.codigoProveedor||t.push({headerName:c.a.TAG_PROVEEDOR,field:"pagProveedor",width:250,minWidth:250,cellClass:function(e){return e.data.pagNumeroSistema?"text-whitespace":"tr-negrita"}}),t.push({headerName:c.a.TAG_VALOR,field:"pagValor",width:100,minWidth:100,valueFormatter:C,cellClass:function(e){return e.data.pagNumeroSistema?"text-whitespace text-right":"tr-negrita text-right"}},{headerName:c.a.TAG_OBSERVACIONES,field:"pagObservaciones",width:350,minWidth:300},{headerName:c.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:c.a.WIDTH_OPCIONES,minWidth:c.a.WIDTH_OPCIONES,cellRendererFramework:d.a,cellClass:function(e){return e.data.pagNumeroSistema?"text-center":"ag-hidden"},headerComponent:"toolTip",headerComponentParams:{class:c.a.ICON_OPCIONES,tooltip:c.a.TAG_OPCIONES,text:""}}),t},e=u([Object(a.Injectable)({providedIn:"root"}),h("design:paramtypes",[s.a,n.b,r.a,i.a])],e)}();function C(e){return new l.DecimalPipe("en-US").transform(e.value,"1.2-2")}},nCON:function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_PRODUCTO_MEDIDA}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}</strong>\r\n    </span>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrarProductoMedida()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div [ngClass]="{\'modal-body\': esModal}">\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card m-0">\r\n          <div class="card-header p-1">\r\n            <i class="{{classTitulo}}"></i>\r\n            <strong>{{frmTitulo}}</strong>\r\n            <div class="card-header-actions" *ngIf="vistaFormulario">\r\n              <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardarMedida" type="button" (click)="guardarProductoMedida(frmMedidaProducto)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardarMedida" type="button" (click)="actualizarProductoMedida(frmMedidaProducto)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button (click)="resetearFormulario()" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n                title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            <form #frmMedidaProducto="ngForm" autocomplete="off">\r\n              <div *ngIf="vistaFormulario">\r\n                <div class="form-group form-group-sm has-feedback">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                  </label>\r\n                  <p *ngIf="!(accion===constantes.ACCION_CREAR)" class="form-control input-sm">{{invProductoMedidaTO.medCodigo}}</p>\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" type="text" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                    name="medCodigo" [(ngModel)]="invProductoMedidaTO.medCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required maxlength="30" appUppercase>\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" triggers="mouseenter:mouseleave"\r\n                    container="body"></span>\r\n                </div>\r\n                <div class="form-group form-group-sm has-feedback">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                  </label>\r\n                  <input [appFocus]="accion===constantes.ACCION_EDITAR" name="medDetalle" [(ngModel)]="invProductoMedidaTO.medDetalle"\r\n                    class="form-control input-sm mousetrap text-uppercase" required minlength="3" maxlength="1000"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" pattern="{{constantes.PATTERN_SOLO_LETRAS}}"\r\n                    appUppercase>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CONVERSION_LIBRAS}}</strong>\r\n                  </label>\r\n                  <input type="text" name="medConvLibras" [(ngModel)]="invProductoMedidaTO.medConvLibras" class="form-control input-sm mousetrap"\r\n                    required placeholder="0.0000" [appAutonumeric]="configAutonumeric" value="{{invProductoMedidaTO.medConvLibras}}">\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CONVERSION_KILOS}}</strong>\r\n                  </label>\r\n                  <input type="text" name="medConvKilos" [(ngModel)]="invProductoMedidaTO.medConvKilos" class="form-control input-sm mousetrap"\r\n                    required placeholder="0.0000" [appAutonumeric]="configAutonumeric" value="{{invProductoMedidaTO.medConvKilos}}">\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n        <div class="card m-0" *ngIf="listadoResultado?.length > 0 && !vistaFormulario">\r\n          <div class="card-header p-1">\r\n            <strong>{{constantes.INVENTARIO_PRODUCTO_MEDIDA_LISTADO}}</strong>\r\n            <div class="card-header-actions">\r\n              <div class="btn-group">\r\n                <button id="btnNuevo" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoProductoMedida()"\r\n                  container="body" title="{{constantes.ATAJO_NUEVO}}" placement="top" ngbTooltip="{{constantes.LABEL_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                  <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n                </button>\r\n                <button id="btnImprimirMedida" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n                  container="body" (click)="imprimir()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir"\r\n                  title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                  <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                  <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n                </button>\r\n                <button id="btnExportarMedida" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n                  container="body" (click)="exportar()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar"\r\n                  title="{{constantes.ATAJO_EXPORTAR}}">\r\n                  <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n                  <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="card-body p-0">\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group p-1">\r\n                  <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                    size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                    size="100">\r\n                  <div class="input-group-append">\r\n                    <span class="input-group-text">\r\n                      <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div class="float-right pr-1">\r\n                  <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                    maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--Tabla--\x3e\r\n            <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n              [rowData]="listadoResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n              [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n              [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n              (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n              (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()">\r\n            </ag-grid-angular>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},nbXh:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var a=o("7klv"),i=function(){function e(e){this.scatDetalle="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=null,this.invProductoSubcategoriaPK=new a.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invProductoSubcategoriaPK=e.invProductoCategoriaPK?e.invProductoCategoriaPK:this.invProductoSubcategoriaPK,this.scatDetalle=e.scatDetalle?e.scatDetalle:this.scatDetalle,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},"nnK+":function(e,t,o){"use strict";var a=o("CcnG"),i=o("nR5P"),r=o("EF/R"),n=o("z5Y/"),s=o("SZbH"),c=o("GAfr"),l=o("QL9M"),d=o("mwBN"),p=o("n/Mz"),u=function(){function e(e){this.detSecuencialOrdenCompra=0,this.detOrden=0,this.detCantidad=0,this.detPrecioReferencial=0,this.detPrecioReal=0,this.detObservaciones="",this.invPedidosDetalle=new p.a,this.invPedidosOrdenCompra=new c.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencialOrdenCompra=e.detSecuencialOrdenCompra?e.detSecuencialOrdenCompra:this.detSecuencialOrdenCompra,this.detOrden=e.detOrden?e.detOrden:this.detOrden,this.detCantidad=e.detCantidad?e.detCantidad:this.detCantidad,this.detPrecioReferencial=e.detPrecioReferencial?e.detPrecioReferencial:this.detPrecioReferencial,this.detPrecioReal=e.detPrecioReal?e.detPrecioReal:this.detPrecioReal,this.detObservaciones=e.detObservaciones?e.detObservaciones:this.detObservaciones,this.invPedidosDetalle=e.invPedidosDetalle?e.invPedidosDetalle:this.invPedidosDetalle,this.invPedidosOrdenCompra=e.invPedidosOrdenCompra?e.invPedidosOrdenCompra:this.invPedidosOrdenCompra},e}(),h=function(){function e(e){this.detSecuencialOrdenCompra=0,this.detOrden=0,this.detCantidad=0,this.detPrecioReferencial=0,this.detPrecioReal=0,this.detObservaciones="",this.detSecuencial=0,this.detCantidadAprobada=0,this.detCantidadAdquirida=0,this.detCompletado=!1,this.proEmpresa=null,this.proCodigoPrincipal=null,this.proNombre="",this.proCostoReferencial1=0,this.proCostoReferencial2=0,this.proCostoReferencial3=0,this.medEmpresa=null,this.medCodigo=null,this.medDetalle=null,this.ocEmpresa="",this.ocSector="",this.ocMotivo="",this.ocNumero="",this.ocObsRegistra="",this.ocObsAprueba="",this.ocObsEjecuta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.detSecuencialOrdenCompra=e.detSecuencialOrdenCompra?e.detSecuencialOrdenCompra:this.detSecuencialOrdenCompra,this.detOrden=e.detOrden?e.detOrden:this.detOrden,this.detCantidad=e.detCantidad?e.detCantidad:this.detCantidad,this.detPrecioReferencial=e.detPrecioReferencial?e.detPrecioReferencial:this.detPrecioReferencial,this.detPrecioReal=e.detPrecioReal?e.detPrecioReal:this.detPrecioReal,this.detObservaciones=e.detObservaciones?e.detObservaciones:this.detObservaciones,this.detSecuencial=e.detSecuencial?e.detSecuencial:this.detSecuencial,this.detCantidadAprobada=e.detCantidadAprobada?e.detCantidadAprobada:this.detCantidadAprobada,this.detCantidadAdquirida=e.detCantidadAdquirida?e.detCantidadAdquirida:this.detCantidadAdquirida,this.detCompletado=e.detCompletado?e.detCompletado:this.detCompletado,this.proEmpresa=e.proEmpresa?e.proEmpresa:this.proEmpresa,this.proCodigoPrincipal=e.proCodigoPrincipal?e.proCodigoPrincipal:this.proCodigoPrincipal,this.proNombre=e.proNombre?e.proNombre:this.proNombre,this.medEmpresa=e.medEmpresa?e.medEmpresa:this.medEmpresa,this.medCodigo=e.medCodigo?e.medCodigo:this.medCodigo,this.medDetalle=e.medDetalle?e.medDetalle:this.medDetalle,this.ocEmpresa=e.ocEmpresa?e.ocEmpresa:this.ocEmpresa,this.ocSector=e.ocSector?e.ocSector:this.ocSector,this.ocMotivo=e.ocMotivo?e.ocMotivo:this.ocMotivo,this.ocNumero=e.ocNumero?e.ocNumero:this.ocNumero},e}(),m=o("Ungd"),C=o("VCY8"),v=o("L5HG");o.d(t,"a",function(){return g});var A=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,o,a,i){this.utilService=e,this.authService=t,this.api=o,this.toastr=a,this.archivoService=i}return e.prototype.obtenerOrdenCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/obtenerOrdenCompra",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerOrdenCompra(e.extraInfo):(t.despuesDeObtenerOrdenCompra(null),a.toastr.warning(e.operacionMensaje,d.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarOrdenesCompra=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/getListaInvPedidosOrdenCompraTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarOrdenesCompra(e.extraInfo):(a.toastr.warning(e.operacionMensaje,d.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.enviarNotificacionProveedor=function(e,t,o){var a=this;this.archivoService.completarInformacionReporte(e,t.empresaSeleccionada,""),this.api.post("todocompuWS/pedidosWebController/enviarPDFOrdenCompra",e,o).then(function(e){t.despuesDeEnviarNotificacion(e),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosGenerarInvPedidosOrdenCompra=function(e,t,o){var a=this;return this.api.post("todocompuWS/pedidosWebController/getDatosGenerarInvPedidosOrdenCompra",e,o).then(function(e){var t=null;return e&&e.estadoOperacion===d.a.KEY_EXITO&&e.extraInfo?e.extraInfo.listaInvPedidosDetalle?t=e.extraInfo:a.toastr.warning(d.a.MSJ_NO_DATA_ACCION,d.a.TAG_AVISO):a.toastr.warning(e.operacionMensaje,d.a.TAG_AVISO),t}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerDatosInvPedidosOrdenCompra=function(e,t,o){var a=this;return this.api.post("todocompuWS/pedidosWebController/obtenerInvPedidosOrdenCompra",e,o).then(function(e){var o=null;return e&&e.estadoOperacion===d.a.KEY_EXITO&&e.extraInfo?e.extraInfo.invPedidosOrdenCompra?o=e.extraInfo:a.toastr.warning(d.a.MSJ_NO_DATA_ACCION,d.a.TAG_AVISO):a.toastr.warning(e.operacionMensaje,d.a.TAG_AVISO),null===o&&(t.cargando=!1),o}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerListaOrdenCompraSeleccionadoIndividual=function(e){var t=Array();return e.forEach(function(e){t.push(new C.a(e))}),t},e.prototype.generarColumnasOrdenCompra=function(e){var t=[{headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:40,minWidth:40},{headerName:d.a.TAG_ESTADO,headerClass:"text-center",width:100,minWidth:90,cellClass:"text-center",cellRendererFramework:v.a,valueGetter:function(e){return e.data.ocAnulado?(e.value=d.a.ETIQUETA_ANULADO,e.value):e.data.ocAprobada?(e.value=d.a.ETIQUETA_OC_APROBADO,e.value):e.data.ocAprobada?"":(e.value=d.a.ETIQUETA_POR_APROBAR_OC,e.value)}},{headerName:d.a.TAG_NUMERO,field:"ocNumero",width:100,minWidth:100},{headerName:d.a.TAG_FECHA,field:"ocFecha",width:100,minWidth:100}];return e||t.push({headerName:d.a.TAG_APROBADOR,field:"usrAprueba",width:250,minWidth:250}),t.push({headerName:d.a.TAG_PROVEEDOR,field:"provRazonSocial",width:430,minWidth:400},{headerName:d.a.TAG_TOTAL,field:"ocMontoTotal",width:200,minWidth:200,cellClass:"text-right",valueFormatter:this.utilService.formatearA2Decimales},this.utilService.getColumnaOpciones()),t},e.prototype.formatearOrdenCompra=function(e,t){var o=new c.a(e);switch(t.accion){case d.a.ACCION_EJECUTAR:o.invPedidosOrdenCompraPK.ocEmpresa=t.empresaSeleccionada.empCodigo,o.invPedidosOrdenCompraPK.ocNumero=null,o.invPedidosOrdenCompraPK.ocSector=t.data.invPedidosPK.pedSector,o.invPedidosOrdenCompraPK.ocMotivo=t.motivoOCSeleccionado.ocmCodigo,o.ocAnulado=!1,o.ocValorRetencion=this.utilService.quitarComasNumero(t.invPedidosOrdenCompra.ocValorRetencion),o.usrCodigo=this.authService.getCodigoUser(),o.invPedidosOrdenCompraMotivo.invPedidosOrdenCompraMotivoPK.ocmEmpresa=t.motivoOCSeleccionado.ocmEmpresa,o.invPedidosOrdenCompraMotivo.invPedidosOrdenCompraMotivoPK.ocmSector=t.motivoOCSeleccionado.ocmSector,o.invPedidosOrdenCompraMotivo.invPedidosOrdenCompraMotivoPK.ocmCodigo=t.motivoOCSeleccionado.ocmCodigo}return o.ocFechaEmision=o.ocFechaEmision?new Date(o.ocFechaEmision).getTime():null,o.ocFechaHoraEntrega=o.ocFechaHoraEntrega?new Date(o.ocFechaHoraEntrega).getTime():null,o},e.prototype.crearInvOrdenCompraTO=function(e){var t=new l.a;return t.index=Math.round(20),t.ocEmpresa=e.invPedidosOrdenCompraPK.ocEmpresa,t.ocSector=e.invPedidosOrdenCompraPK.ocSector,t.ocMotivo=e.invPedidosOrdenCompraPK.ocMotivo,t.ocNumero=e.invPedidosOrdenCompraPK.ocNumero,t.ocFecha=e.ocFechaEmision,t.ocAnulado=e.ocAnulado,t.ocAprobada=e.ocAprobada,t.ocMontoTotal=e.ocMontoTotal,t.usrAprueba=e.usrAprueba,t.provRazonSocial=e.invProveedor.provRazonSocial,t.provCodigo=e.invProveedor.invProveedorPK.provCodigo,t.ocmDetalle=e.invPedidosOrdenCompraMotivo.ocmDetalle,t.provEmailOrdenCompra=e.invProveedor.provEmailOrdenCompra,t.ocmNotificarProveedor=e.invPedidosOrdenCompraMotivo.ocmNotificarProveedor,t},e.prototype.obtenerFormatoGenerarOrdenCompraDetalleList=function(e,t){var o=[];return e.forEach(function(e,a){var i=new h;i.detSecuencialOrdenCompra=null,i.detOrden=a,i.detSecuencial=e.detSecuencial,i.detCantidadAprobada=e.detCantidadAprobada,i.detCantidadAdquirida=e.detCantidadAdquirida,i.detCompletado=e.detCompletado,i.proEmpresa=e.invProducto.invProductoPK.proEmpresa,i.proCodigoPrincipal=e.invProducto.invProductoPK.proCodigoPrincipal,i.proNombre=e.invProducto.proNombre,i.proCostoReferencial1=e.invProducto.proCostoReferencial1,i.proCostoReferencial2=e.invProducto.proCostoReferencial2,i.proCostoReferencial3=e.invProducto.proCostoReferencial3,i.medEmpresa=e.invProducto.invProductoMedida.invProductoMedidaPK.medEmpresa,i.medCodigo=e.invProducto.invProductoMedida.invProductoMedidaPK.medCodigo,i.medDetalle=e.invProducto.invProductoMedida.medDetalle,i.ocObsRegistra=e.detObservacionesRegistra,i.ocObsAprueba=e.detObservacionesAprueba,i.ocObsEjecuta=e.detObservacionesEjecuta,t&&(i.detCantidad=e.detCantidadAprobada-e.detCantidadAdquirida),o.push(i)}),o},e.prototype.obtenerFormatoConsultaOrdenCompraDetalleList=function(e){var t=[];return e.forEach(function(e){var o=new h;o.detSecuencialOrdenCompra=e.detSecuencialOrdenCompra,o.detCantidad=e.detCantidad,o.detPrecioReferencial=e.detPrecioReferencial,o.detPrecioReal=e.detPrecioReal,o.detObservaciones=e.detObservaciones,o.detOrden=e.invPedidosDetalle.detOrden,o.detSecuencial=e.invPedidosDetalle.detSecuencial,o.detCantidadAprobada=e.invPedidosDetalle.detCantidadAprobada,o.detCantidadAdquirida=e.invPedidosDetalle.detCantidadAdquirida,o.detCompletado=e.invPedidosDetalle.detCompletado,o.proEmpresa=e.invPedidosDetalle.invProducto.invProductoPK.proEmpresa,o.proCodigoPrincipal=e.invPedidosDetalle.invProducto.invProductoPK.proCodigoPrincipal,o.proNombre=e.invPedidosDetalle.invProducto.proNombre,o.proCostoReferencial1=e.invPedidosDetalle.invProducto.proCostoReferencial1,o.proCostoReferencial2=e.invPedidosDetalle.invProducto.proCostoReferencial2,o.proCostoReferencial3=e.invPedidosDetalle.invProducto.proCostoReferencial3,o.medEmpresa=e.invPedidosDetalle.invProducto.invProductoMedida.invProductoMedidaPK.medEmpresa,o.medCodigo=e.invPedidosDetalle.invProducto.invProductoMedida.invProductoMedidaPK.medCodigo,o.medDetalle=e.invPedidosDetalle.invProducto.invProductoMedida.medDetalle,o.ocEmpresa=e.invPedidosOrdenCompra.invPedidosOrdenCompraPK.ocEmpresa,o.ocSector=e.invPedidosOrdenCompra.invPedidosOrdenCompraPK.ocSector,o.ocMotivo=e.invPedidosOrdenCompra.invPedidosOrdenCompraPK.ocMotivo,o.ocNumero=e.invPedidosOrdenCompra.invPedidosOrdenCompraPK.ocNumero,t.push(o)}),t},e.prototype.crearListaDetalleOrdenCompra=function(e){var t=[];return e.forEach(function(e,o){var a=new u;a.detSecuencialOrdenCompra=null,a.detOrden=o,a.detCantidad=e.detCantidad,a.detPrecioReferencial=e.detPrecioReferencial,a.detPrecioReal=e.detPrecioReal,a.detObservaciones=e.detObservaciones&&e.detObservaciones.trim().length>0?e.detObservaciones:" ",a.invPedidosDetalle=new p.a({detSecuencial:e.detSecuencial,detCompletado:e.detCompletado}),delete a.invPedidosDetalle.parcial,delete a.invPedidosDetalle.proCodigoPrincipal,delete a.invPedidosDetalle.categoriaProductoValido,a.invPedidosOrdenCompra=null,t.push(a)}),t},e.prototype.obtenerTotalDeListaInvPedidosOrdenCompraDetalle=function(e){var t=0;return e.forEach(function(e){t+=e.detCantidad*e.detPrecioReal}),this.utilService.redondearNDecimales(t,2)},e.prototype.establecerCantidadAdquiridaEnInvPedidosDetalle=function(e,t){var o=this,a=[];return t.forEach(function(t){var i=o.obtenerObjetoEnListaInvPedidosDetalle(e,t.detSecuencial);(i.cantidad>0&&i.detPrecioReal>0||i.detCompletado)&&(t.detCantidadAdquirida=t.detCantidadAdquirida+i.cantidad,t.detCompletado=i.detCompletado,a.push(t))}),a},e.prototype.obtenerObjetoEnListaInvPedidosDetalle=function(e,t){for(var o={},a=0,i=e;a<i.length;a++){var r=i[a];if(r.invPedidosDetalle.detSecuencial===t)return o={cantidad:r.detCantidad,detCompletado:r.invPedidosDetalle.detCompletado,detPrecioReal:r.detPrecioReal}}return o},e.prototype.obtenerCampoCostoDesdeEtiqueta=function(e){switch(e){case"proCostoReferencial1":return"ecosto01";case"proCostoReferencial2":return"ecosto02";case"proCostoReferencial3":return"ecosto03";case"proCostoReferencial4":return"ecosto04";case"proCostoReferencial5":return"ecosto05"}return null},e.prototype.mostrarSwalMasInformacion=function(e,t){var o={title:d.a.TOAST_INFORMACION,texto:e,type:d.a.SWAL_INFO,confirmButtonText:"<i class='"+d.a.ICON_AGREGAR+"'></i>  "+d.a.LABEL_MAS_INFORMACION,cancelButtonText:d.a.MSJ_ACEPTAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(e){e&&window.open(d.a.ENLACE_MANUAL_USUARIO,"_blank"),t.cerrarFormulario()})},e=A([Object(a.Injectable)({providedIn:"root"}),f("design:paramtypes",[i.a,r.a,n.a,s.b,m.a])],e)}()},"nxr/":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.secCodigo=null,this.nomSector=null,this.secLatitud=null,this.secLongitud=null,this.secActivo=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.nomSector=e.nomSector?e.nomSector:this.nomSector,this.secLatitud=e.secLatitud?e.secLatitud:this.secLatitud,this.secLongitud=e.secLongitud?e.secLongitud:this.secLongitud,this.secActivo=e.secActivo?e.secActivo:this.secActivo},e}()},o6Fk:function(e,t){e.exports='<div class="collection list-items">\r\n  <div class="collection-item detail col-hover" *ngFor="let data of rowData">\r\n    <div class="column-data" *ngFor="let colum of columnDefs">\r\n      <div class="row">\r\n        <div class="col-4">\r\n          <strong>{{colum.headerName}}</strong>\r\n        </div>\r\n        <div class="col-8">\r\n          <span>{{data[colum.field]}}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},oiVT:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.empCodigo="",this.estGrupo1=0,this.estGrupo2=0,this.estGrupo3=0,this.estGrupo4=0,this.estGrupo5=0,this.estGrupo6=0,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.empCodigo=e.empCodigo?e.empCodigo:this.empCodigo,this.estGrupo1=e.estGrupo1?e.estGrupo1:this.estGrupo1,this.estGrupo2=e.estGrupo2?e.estGrupo2:this.estGrupo2,this.estGrupo3=e.estGrupo3?e.estGrupo3:this.estGrupo3,this.estGrupo4=e.estGrupo4?e.estGrupo4:this.estGrupo4,this.estGrupo5=e.estGrupo5?e.estGrupo5:this.estGrupo5,this.estGrupo6=e.estGrupo6?e.estGrupo6:this.estGrupo6},e}()},owpy:function(e,t){e.exports=""},"p8K/":function(e,t){e.exports='<div class="card m-0" *ngIf="listaResultadoBonos?.length>0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarBonos" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="cambiarActivar()" type="button"\r\n      title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activarBonos?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{titulo}}</strong>\r\n\r\n    <div class="card-header-actions" *ngIf="!esContable">\r\n      <div class="btn-group d-lg-none">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarBonos" (click)="guardarBonos()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelar" title="{{constantes.ATAJO_CANCELAR}}"\r\n          (click)="cancelar()" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarBonos" (click)="guardarBonos()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_MAYORIZAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelar" title="{{constantes.ATAJO_CANCELAR}}"\r\n          (click)="cancelar()" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="card-header-actions" *ngIf="esContable">\r\n      <app-botones-accion [conContable]="conContableCopia" [data]="data" (enviarAccion)="accionesBotones($event)"></app-botones-accion>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="p-1" *ngIf="esContable">\r\n      <app-contable-cabecera [data]="data" [conContable]="conContableCopia" [tipoSeleccionado]="tipoSeleccionado"\r\n        [empresaSeleccionada]="empresaSeleccionada" (accionFechaValido)="fechaContableValido = $event"></app-contable-cabecera>\r\n    </div>\r\n    <div class="row" *ngIf="!esContable">\r\n\r\n      <div class="col-sm-4 col-md-4 pr-0">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="col-sm-6 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="observacionAdicional" class="form-control form-control-sm input-filter mousetrap text-uppercase"\r\n            style="font-family: Arial, FontAwesome;" placeholder="&#xf007; {{constantes.TAG_OBSERVACION_GENERAL}}..."\r\n            size="100" appUppercase>\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_EDITAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="col-sm-2 col-md-2">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div class="p-1">\r\n      <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listaResultadoBonos"\r\n        [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n        [enableColResize]="true" [components]="components" [context]="context" (gridReady)="onGridReady($event)"\r\n        (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)" [frameworkComponents]="frameworkComponents"\r\n        (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimensionarColumnas()" (gridSizeChanged)="redimensionarColumnas()"\r\n        [stopEditingWhenGridLosesFocus]="true" [singleClickEdit]="true" [pinnedBottomRowData]="pinnedBottomRowData"\r\n        [suppressDragLeaveHidesColumns]="true" (cellEditingStopped)="alCambiarValorDeCelda($event)" (contextmenu)="data && data.accion === constantes.ACCION_MAYORIZAR?$event.preventDefault():null"\r\n        (cellContextMenu)="data && data.accion === constantes.ACCION_MAYORIZAR?mostrarContextMenu($event.data, $event.event):null">\r\n      </ag-grid-angular>\r\n      <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n\r\n    </div>\r\n\r\n  </div>\r\n</div>'},pZ6e:function(e,t,o){"use strict";var a=o("mBg1"),i=o("iL+s"),r=function(){function e(e){this.invVendedorPK=new i.a,this.vendNombre=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invClienteList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invVendedorPK=e.invVendedorPK?e.invVendedorPK:this.invVendedorPK,this.vendNombre=e.vendNombre?e.vendNombre:this.vendNombre,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invClienteList=e.invClienteList?e.invClienteList:this.invClienteList},e}(),n=function(){function e(e){this.ccEmpresa=null,this.ccCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.ccEmpresa=e.ccEmpresa?e.ccEmpresa:this.ccEmpresa,this.ccCodigo=e.ccCodigo?e.ccCodigo:this.ccCodigo},e}(),s=function(){function e(e){this.invClienteCategoriaPK=new n,this.ccDetalle=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.invClienteList=[],e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invClienteCategoriaPK=e.invClienteCategoriaPK?e.invClienteCategoriaPK:this.invClienteCategoriaPK,this.ccDetalle=e.ccDetalle?e.ccDetalle:this.ccDetalle,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invClienteList=e.invClienteList?e.invClienteList:this.invClienteList},e}(),c=o("zvBE");o.d(t,"a",function(){return l});var l=function(){function e(e){this.invClientePK=new a.a,this.cliIdTipo=null,this.cliIdNumero=null,this.cliExtranjeroTipo=null,this.cliNombreComercial=null,this.cliRazonSocial=null,this.cliProvincia=null,this.cliCiudad=null,this.cliParroquia=null,this.cliZona=null,this.cliDireccion=null,this.cliTelefono=null,this.cliCelular=null,this.cliEmail=null,this.cliPrecio=0,this.cliDiasCredito=0,this.cliCupoCredito=0,this.cliObservaciones=0,this.cliRelacionado=!1,this.cliInactivo=!1,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,this.cliLugaresEntrega=null,this.invVendedor=new r,this.invClienteCategoria=new s,this.invProformasList=[],this.invVentasList=[],this.invClienteDetalleVentaAutomaticaList=[],this.invClienteGrupoEmpresarial=new c.a,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invClientePK=e.invClientePK?e.invClientePK:this.invClientePK,this.cliIdTipo=e.cliIdTipo?e.cliIdTipo:this.cliIdTipo,this.cliIdNumero=e.cliIdNumero?e.cliIdNumero:this.cliIdNumero,this.cliExtranjeroTipo=e.cliExtranjeroTipo?e.cliExtranjeroTipo:this.cliExtranjeroTipo,this.cliNombreComercial=e.cliNombreComercial?e.cliNombreComercial:this.cliNombreComercial,this.cliRazonSocial=e.cliRazonSocial?e.cliRazonSocial:this.cliRazonSocial,this.cliProvincia=e.cliProvincia?e.cliProvincia:this.cliProvincia,this.cliCiudad=e.cliCiudad?e.cliCiudad:this.cliCiudad,this.cliParroquia=e.cliParroquia?e.cliParroquia:this.cliParroquia,this.cliZona=e.cliZona?e.cliZona:this.cliZona,this.cliDireccion=e.cliDireccion?e.cliDireccion:this.cliDireccion,this.cliTelefono=e.cliTelefono?e.cliTelefono:this.cliTelefono,this.cliCelular=e.cliCelular?e.cliCelular:this.cliCelular,this.cliEmail=e.cliEmail?e.cliEmail:this.cliEmail,this.cliPrecio=e.cliPrecio?e.cliPrecio:this.cliPrecio,this.cliDiasCredito=e.cliDiasCredito?e.cliDiasCredito:this.cliDiasCredito,this.cliCupoCredito=e.cliCupoCredito?e.cliCupoCredito:this.cliCupoCredito,this.cliObservaciones=e.cliObservaciones?e.cliObservaciones:this.cliObservaciones,this.cliRelacionado=e.cliRelacionado?e.cliRelacionado:this.cliRelacionado,this.cliInactivo=e.cliInactivo?e.cliInactivo:this.cliInactivo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invVendedor=e.invVendedor?e.invVendedor:this.invVendedor,this.invClienteCategoria=e.invClienteCategoria?e.invVendedor:this.invClienteCategoria,this.invProformasList=e.invProformasList?e.invProformasList:this.invProformasList,this.invVentasList=e.invVentasList?e.invVentasList:this.invVentasList,this.invClienteDetalleVentaAutomaticaList=e.invClienteDetalleVentaAutomaticaList?e.invClienteDetalleVentaAutomaticaList:this.invClienteDetalleVentaAutomaticaList,this.invClienteGrupoEmpresarial=e.invClienteGrupoEmpresarial?e.invClienteGrupoEmpresarial:this.invClienteGrupoEmpresarial},e}()},pwhb:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.empCodigo="",this.cliCodigo="",this.cliTipoId="",this.cliExtranjeroTipo=null,this.cliId="",this.cliNombreComercial="",this.cliRazonSocial="",this.cliProvincia="",this.cliCiudad="",this.cliParroquia="",this.cliZona="",this.cliDireccion="",this.cliTelefono="",this.cliCelular="",this.cliEmail="",this.cliPrecio=0,this.cliDiasCredito=0,this.cliCupoCredito=0,this.cliObservaciones="",this.cliRelacionado=!1,this.cliInactivo=!1,this.vendEmpresa="",this.vendCodigo="",this.cliCategoria="",this.usrInsertaCliente="",this.usrFechaInsertaCliente="",this.geEmpresa="",this.geCodigo="",this.cliLugaresEntrega=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.empCodigo=e.empCodigo?e.empCodigo:this.empCodigo,this.cliCodigo=e.cliCodigo?e.cliCodigo:this.cliCodigo,this.cliTipoId=e.cliTipoId?e.cliTipoId:this.cliTipoId,this.cliExtranjeroTipo=e.cliExtranjeroTipo?e.cliExtranjeroTipo:this.cliExtranjeroTipo,this.cliId=e.cliId?e.cliId:this.cliId,this.cliNombreComercial=e.cliNombreComercial?e.cliNombreComercial:this.cliNombreComercial,this.cliRazonSocial=e.cliRazonSocial?e.cliRazonSocial:this.cliRazonSocial,this.cliProvincia=e.cliProvincia?e.cliProvincia:this.cliProvincia,this.cliCiudad=e.cliCiudad?e.cliCiudad:this.cliCiudad,this.cliParroquia=e.cliParroquia?e.cliParroquia:this.cliParroquia,this.cliZona=e.cliZona?e.cliZona:this.cliZona,this.cliDireccion=e.cliDireccion?e.cliDireccion:this.cliDireccion,this.cliTelefono=e.cliTelefono?e.cliTelefono:this.cliTelefono,this.cliCelular=e.cliCelular?e.cliCelular:this.cliCelular,this.cliEmail=e.cliEmail?e.cliEmail:this.cliEmail,this.cliPrecio=e.cliPrecio?e.cliPrecio:this.cliPrecio,this.cliDiasCredito=e.cliDiasCredito?e.cliDiasCredito:this.cliDiasCredito,this.cliCupoCredito=e.cliCupoCredito?e.cliCupoCredito:this.cliCupoCredito,this.cliObservaciones=e.cliObservaciones?e.cliObservaciones:this.cliObservaciones,this.cliRelacionado=e.cliRelacionado?e.cliRelacionado:this.cliRelacionado,this.cliInactivo=e.cliInactivo?e.cliInactivo:this.cliInactivo,this.vendEmpresa=e.vendEmpresa?e.vendEmpresa:this.vendEmpresa,this.vendCodigo=e.vendCodigo?e.vendCodigo:this.vendCodigo,this.cliCategoria=e.cliCategoria?e.cliCategoria:this.cliCategoria,this.usrInsertaCliente=e.usrInsertaCliente?e.usrInsertaCliente:this.usrInsertaCliente,this.usrFechaInsertaCliente=e.usrFechaInsertaCliente?e.usrFechaInsertaCliente:this.usrFechaInsertaCliente,this.geEmpresa=e.geEmpresa?e.geEmpresa:this.geEmpresa,this.geCodigo=e.geCodigo?e.geCodigo:this.geCodigo,this.cliLugaresEntrega=e.cliLugaresEntrega?e.cliLugaresEntrega:this.cliLugaresEntrega},e}()},q6bj:function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("nR5P"),r=o("z5Y/"),n=o("SZbH"),s=o("NOfB"),c=o("EF/R"),l=o("mwBN"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listarComboinvListaVendedorTOs=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getComboinvListaVendedorTOs",t,o).then(function(t){t&&t.extraInfo?e.despuesDeListarVendedorTOs(t.extraInfo):(e.despuesDeListarVendedorTOs([]),a.toastr.warning(t.operacionMensaje,"Aviso"),e.cargando=!1)}).catch(function(t){return a.utilService.handleError(t,e)})},e.prototype.formatearInvVendedor=function(e,t){var o=new s.a(e);return o.usrEmpresa=t.empresaSeleccionada.empCodigo,o.vendEmpresa=t.empresaSeleccionada.empCodigo,t.accion===l.a.ACCION_CREAR&&(o.usrCodigo=this.auth.getCodigoUser(),o.usrFechaInserta=null),o},e.prototype.convertirInvVendedorTODeInvVendedorComboListadoTO=function(e){var t=new s.a(e);return t.usrEmpresa=e.vendEmpresa,t.usrCodigo=this.auth.getCodigoUser(),t.usrFechaInserta=null,t},e.prototype.generarColumnas=function(){return[{headerName:l.a.TAG_CODIGO,field:"vendCodigo",width:100,minWidth:100},{headerName:l.a.TAG_DESCRIPCION,field:"vendNombre",width:200,minWidth:200},this.utilService.getColumnaOpciones()]},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[r.a,n.b,i.a,c.a])],e)}()},qFWa:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.id=0,this.consStatus="",this.consNumero="",this.consObservaciones="",this.consFecha="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.consStatus=e.consStatus?e.consStatus:this.consStatus,this.consNumero=e.consNumero?e.consNumero:this.consNumero,this.consObservaciones=e.consObservaciones?e.consObservaciones:this.consObservaciones,this.consFecha=e.consFecha?e.consFecha:this.consFecha},e}()},r6CG:function(e,t,o){"use strict";o.d(t,"a",function(){return p});var a=o("CcnG"),i=o("Ungd"),r=o("nR5P"),n=o("SZbH"),s=o("z5Y/"),c=o("mwBN"),l=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.archivoService=a}return e.prototype.accionCarCobrosForma=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/accionCarCobrosForma",e,o).then(function(o){o&&o.extraInfo?(o.formaCobro=e.carPagosCobrosFormaTO,t.despuesDeAccionCarCobroForma(o)):(t.despuesDeAccionCarCobroForma(null),a.toastr.warning(o.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarEstadoFormaCobro=function(e,t,o){var a=this;this.api.post("todocompuWS/carteraWebController/modificarEstadoCarCobroForma",e,o).then(function(o){o&&o.extraInfo?(o.formaCobro=e.carPagosCobrosFormaTO,t.despuesDeModificarEstadoFormaCobro(o)):(t.despuesDeModificarEstadoFormaCobro(null),a.toastr.warning(o.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.imprimirFormaCobro=function(e,t,o){var a=this;e.cargando=!0,this.archivoService.postPDF("todocompuWS/carteraWebController/generarReporteCarReporteFormaCobroPago",t,o).then(function(t){t._body.byteLength>0?a.utilService.descargarArchivoPDF("ListadoFormaCobro.pdf",t):a.toastr.warning(c.a.MSJ_ERROR_IMPRIMIR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.exportarFormaCobro=function(e,t,o){var a=this;e.cargando=!0,this.archivoService.postExcel("todocompuWS/carteraWebController/exportarReporteCarReporteFormaCobroPago",t,o).then(function(t){t?a.utilService.descargarArchivoExcel(t._body,"ListadoFormaCobro_"):a.toastr.warning(c.a.MSJ_ERROR_EXPORTAR,c.a.TAG_AVISO),e.cargando=!1}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case c.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case c.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar;break;case c.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar;break;case c.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case c.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(c.a.ERROR_403_TEXTO,c.a.ERROR_403_TITULO),a},e.prototype.seleccionarSector=function(e,t){return e.find(function(e){return e.secCodigo==t})},e=l([Object(a.Injectable)({providedIn:"root"}),d("design:paramtypes",[s.a,n.b,r.a,i.a])],e)}()},"rC/9":function(e,t){e.exports='<div [hidden]="vistaFormulario">\r\n  <div [ngClass]="{\'modal-primary\': isModal}">\r\n    <div *ngIf="isModal" class="modal-header p-2">\r\n      <h4 class="modal-title">{{constantes.TAG_KARDEX}}</h4>\r\n      <button type="button" class="close text-white" aria-label="Cerrar" (click)="activeModal.dismiss(\'Cerrar Modal\')">\r\n        <span aria-hidden="true">&times;</span>\r\n      </button>\r\n    </div>\r\n    <div [ngClass]="{\'modal-body\': isModal}">\r\n      <form #frmFiltroOrdenPedido="ngForm" class="card mb-2" *ngIf="isModal">\r\n        <div class="card-body p-1">\r\n          <div class="row pl-4 pr-4">\r\n            <div class="form-group col-md-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_BODEGA}}</b>\r\n              </label>\r\n              <select [(ngModel)]="parametrosBusqueda.bodega" class="form-control" name="bodegaSeleccionada" (change)="limpiarResultado();"\r\n                style="height: 27px; font-size: 12px;">\r\n                <option selected value=null>{{constantes.TAG_TODOS}}</option>\r\n                <option [ngValue]="bodega.bodCodigo" *ngFor="let bodega of listaBodegas">{{bodega.bodNombre}}\r\n                  ({{bodega.bodCodigo}})</option>\r\n              </select>\r\n            </div>\r\n            <div class="form-group col-md-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_DESDE}}</b>\r\n              </label>\r\n              <p-calendar name="fechaDesde" [(ngModel)]="fechaDesde" (ngModelChange)="limpiarResultado();" [showIcon]="true"\r\n                [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true" [maxDate]="fechaHasta"\r\n                [appMaxDate]="fechaHasta"></p-calendar>\r\n            </div>\r\n            <div class="form-group col-md-4">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_HASTA}}</b>\r\n              </label>\r\n              <p-calendar name="fechaHasta" [(ngModel)]="fechaHasta" (ngModelChange)="limpiarResultado();" [showIcon]="true"\r\n                [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true" [minDate]="fechaDesde"\r\n                [maxDate]="fechaActual" [appMinDate]="fechaDesde" [appMaxDate]="fechaActual"></p-calendar>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="card-footer" *ngIf="!deshabilitarOpciones">\r\n          <div class="text-right">\r\n            <div class="btn-group">\r\n              <button id="btnBuscar" type="button" class="btn btn-sm btn-primary" (click)="buscarKardex()" [disabled]="!frmFiltroOrdenPedido?.form.valid">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n                [disabled]="!frmFiltroOrdenPedido?.form.valid">\r\n              </button>\r\n              <div class="dropdown-menu">\r\n                <a class="dropdown-item" (click)="buscarKardex()">{{constantes.TAG_SOLO_INACTIVOS}}</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <div class="card m-0" *ngIf="listadoResultado?.length > 0">\r\n        <div class="card-header p-1" *ngIf="!isModal">\r\n          <button id="btnActivarKardex" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="cambiarActivar()"\r\n            type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n            <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n          </button>\r\n          <strong>{{parametrosBusqueda.vista === \'kardexValorizado\'?constantes.KARDEX_VALORIZADO_LISTADO:\r\n            constantes.PRODUCCION_KARDEX_LISTADO}}</strong>\r\n\r\n          <div class="card-header-actions" *ngIf="!isModal">\r\n            <div class="btn-group d-lg-none">\r\n              <button id="btnImprimirKardex" type="button" class="btn btn-sm btn-primary mr-1" (click)="imprimirKardex()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n              </button>\r\n              <button id="btnExportarKardex" type="button" class="btn btn-sm btn-primary mr-1" (click)="exportarKardex()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              </button>\r\n              <button id="btnCancelarKardex" type="button" class="btn btn-sm btn-default mr-1" (click)="cerrarKardex()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_REGRESAR}}" *ngIf="parametrosBusqueda.mostrarBtnRegresar"\r\n                container="body" title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n              </button>\r\n            </div>\r\n            <div class="btn-group d-none d-lg-block">\r\n              <button id="btnImprimirKardex" type="button" class="btn btn-sm btn-primary mr-1" (click)="imprimirKardex()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n              </button>\r\n              <button id="btnExportarKardex" type="button" class="btn btn-sm btn-primary mr-1" (click)="exportarKardex()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n              </button>\r\n              <button id="btnCancelarKardex" type="button" class="btn btn-sm btn-default mr-1" (click)="cerrarKardex()"\r\n                placement="top" ngbTooltip="{{constantes.LABEL_REGRESAR}}" *ngIf="parametrosBusqueda.mostrarBtnRegresar"\r\n                container="body" title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i> {{constantes.LABEL_REGRESAR}}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <div class="card-body p-0">\r\n          <div class="row">\r\n            <div class="col-sm-5 col-md-6">\r\n              <div class="input-group p-1">\r\n                <input type="text" class="form-control form-control-sm input-filter" size="100" style="font-family: Arial, FontAwesome;"\r\n                  placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100" (input)="gridApi?gridApi.setQuickFilter($event.target.value):null">\r\n                <div class="input-group-append">\r\n                  <span class="input-group-text"><i class="{{constantes.ICON_BUSCAR}}"></i></span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-7 col-md-6">\r\n              <div class="float-right pr-1">\r\n                <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                  maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \x3c!--195px--\x3e\r\n          <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listadoResultado"\r\n            [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n            [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n            (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="!isModal?mostrarContextMenu($event.data, $event.event):null"\r\n            (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" [rowClassRules]="rowClassRules"\r\n            (gridSizeChanged)="redimensionarColumnas()" (cellDoubleClicked)="!isModal?consultar():null" (cellFocused)="filaFocused($event)">\r\n          </ag-grid-angular>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n  <div *ngIf="cargando">\r\n    <app-cargando></app-cargando>\r\n  </div>\r\n</div>\r\n\r\n\x3c!--FORMULARIO DE VENTAS--\x3e\r\n<div *ngIf="vistaFormulario && parametrosFormulario">\r\n  <app-venta-formulario [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada" [tipoDocumento]="tipoDocumento"\r\n    (enviarAccion)="ejecutarAccion($event)"></app-venta-formulario>\r\n</div>\r\n\x3c!--FORMULARIO DE CONSUMOS--\x3e\r\n<div *ngIf="vistaFormulario && parametrosFormularioConsumo">\r\n  <app-consumo-formulario [parametros]="parametrosFormularioConsumo" [empresaSeleccionada]="empresaSeleccionada"\r\n    (enviarAccion)="ejecutarAccionConsumos($event)" (enviarActivar)="cambiarActivar()">\r\n  </app-consumo-formulario>\r\n</div>\r\n\x3c!--FORMULARIO DE TRANSFERENCIAS--\x3e\r\n<div *ngIf="vistaFormulario && parametrosFormularioTransferencia">\r\n  <app-transferencias-formulario [data]="parametrosFormularioTransferencia" [empresaSeleccionada]="empresaSeleccionada"\r\n    (enviarCancelar)="cancelar()" (enviarAccion)="ejecutarAccionTransferencia($event)" (activarEstado)="activar=$event"></app-transferencias-formulario>\r\n</div>\r\n\x3c!--FORMULARIO DE COMPRAS--\x3e\r\n<div *ngIf="vistaFormulario && parametrosCompra">\r\n  <app-compras-formulario [data]="parametrosCompra" [empresaSeleccionada]="empresaSeleccionada" (enviarAccion)="ejecutarAccionCompras($event)"></app-compras-formulario>\r\n</div>'},rLIa:function(e,t){e.exports='<div class="modal-primary">\r\n  <div class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_CONFIGURAR_CONTACTOS}} - {{empresaSeleccionada.empNombre}} {{razonSocial}}</strong>\r\n    </span>\r\n    <div class="card-header-actions">\r\n      <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n        <span aria-hidden="true">&times;</span>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11" *ngIf="vistaFormulario">\r\n        <div class="card m-3">\r\n          <div class="card-header p-1">\r\n            <b> <span> <i class="{{constantes.ICON_USUARIO}}"></i> {{accionContacto == constantes.ACCION_CONSULTAR ?\r\n                constantes.TAG_CONSULTAR_CONTACTO :\r\n                constantes.TAG_NUEVO_CONTACTO}}</span> </b>\r\n            <div class="card-header-actions">\r\n              <button type="button" *ngIf="vistaFormulario && accionContacto === constantes.ACCION_CREAR" class="btn btn-sm btn-primary mr-1"\r\n                id="btnGuardarGrupoEmp" (click)="apilarContactos(frmContactoDatos)" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button type="button" *ngIf="vistaFormulario && accionContacto === constantes.ACCION_EDITAR" class="btn btn-sm btn-primary mr-1"\r\n                id="btnGuardarGrupoEmp" (click)="editarContactos(frmContactoDatos)" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button class="btn btn-sm btn-default mr-1" *ngIf="vistaFormulario" type="button" (click)="resetear()"\r\n                title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline">\r\n                  {{accionContacto == constantes.ACCION_CONSULTAR ? constantes.LABEL_REGRESAR :\r\n                  constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <fieldset [disabled]="!accionContacto || accionContacto === constantes.ACCION_CONSULTAR" class="card-body pb-0 pt-0">\r\n            \x3c!--FORMULARIO OPERACIONES--\x3e\r\n            <form #frmContactoDatos=\'ngForm\' autocomplete="off">\r\n              <div *ngIf="vistaFormulario">\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_CONTACTO_NOMBRE}}</b>\r\n                  </label>\r\n                  <input name="contacto" [(ngModel)]="contacto.contacto" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    class="form-control form-control-sm mousetrap text-uppercase" appUppercase required [appFocus]="accionContacto!==constantes.ACCION_CONSULTAR ? true : false"\r\n                    id="contacto">\r\n                </div>\r\n                <div class="form-group form-group-sm row">\r\n                  <div class="col-md-6">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_CARGO_O_FUNCION}}</b>\r\n                    </label>\r\n                    <input name="cargo" id="cargo" [(ngModel)]="contacto.cargo" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" appUppercase>\r\n                  </div>\r\n                  <div class="col-md-6">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_TELEFONO}}</b>\r\n                    </label>\r\n                    <input name="telefono" [(ngModel)]="contacto.telefono" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" appUppercase (keypress)="soloNumeros($event)">\r\n                  </div>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label>\r\n                    <strong>{{constantes.TAG_EMAIL}}\r\n                      <span class="fa fa-info-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                        autoClose="outside" ngbPopover="{{constantes.MSJ_EMAIL}}" container="body"></span>\r\n                    </strong>\r\n                  </label>\r\n                  <span class="ui-fluid">\r\n                    <p-chips [(ngModel)]="correos" name="emails" class="mousetrap" [inputStyleClass]="accion===constantes.ACCION_CREAR || correos.length==0 ? \r\n                    \'form-control form-control-sm grande text-lowercase\' : \'form-control form-control-sm chico text-lowercase\'"\r\n                      [allowDuplicate]="false" (onAdd)="clickear()" addOnTab="false" id="chip" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                      [disabled]="accionContacto === constantes.ACCION_CONSULTAR" (onBlur)="tamanioGrande()" (onFocus)="tamanioChico()"\r\n                      id="correocontacto">\r\n                      <ng-template let-item pTemplate="item">\r\n                        {{item}}\r\n                      </ng-template>\r\n                    </p-chips>\r\n                  </span>\r\n                </div>\r\n                <div class="form-group form-group-sm row">\r\n                  <div class="col-md-6">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_LUGAR_ENTREGA}}</b>\r\n                    </label>\r\n                    <input name="lugarentrega" id="lugarentrega" [(ngModel)]="contacto.lugarEntrega" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" appUppercase>\r\n                  </div>\r\n                  <div class="col-md-6">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_LUGAR_ENTREGA_2}}</b>\r\n                    </label>\r\n                    <input name="lugarentrega2" id="lugarentrega2" [(ngModel)]="contacto.lugarEntrega2" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" appUppercase>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-sm row">\r\n                  <div class="col-md-6">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_LUGAR_DESTINO}}</b>\r\n                    </label>\r\n                    <input name="lugardestino" id="lugardestino" [(ngModel)]="contacto.lugarDestino" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                      class="form-control form-control-sm mousetrap text-uppercase" appUppercase>\r\n                  </div>\r\n                  <div class="col-md-6 has-feedback">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_TRANSPORTE}}</b>\r\n                    </label>\r\n                    <select class="form-control form-control-sm mousetrap text-uppercase" name="transporte"\r\n                      [(ngModel)]="contacto.transporte" required>\r\n                      <option [ngValue]="constantes.TAG_TERRESTRE" selected>{{constantes.TAG_TERRESTRE}}</option>\r\n                      <option [ngValue]="constantes.TAG_FLUVIAL">{{constantes.TAG_FLUVIAL}}</option>\r\n                      <option [ngValue]="constantes.TAG_MIXTO">{{constantes.TAG_MIXTO}}</option>\r\n                      <option [ngValue]="constantes.TAG_OTROS">{{constantes.TAG_OTROS}}</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_RECORDATORIO}}\r\n                      <span class="fa fa-info-circle text-primary" placement="right" triggers="mouseenter:mouseleave"\r\n                        autoClose="outside" ngbPopover="{{constantes.MSJ_RECORDATORIO}}" container="body"></span>\r\n                    </strong>\r\n                  </label>\r\n                  <input name="recordatorio" [(ngModel)]="contacto.recordatorio" placeholder="{{constantes.TAG_OPCIONAL}}"\r\n                    class="form-control form-control-sm mousetrap text-uppercase" appUppercase>\r\n                </div>\r\n                <div class="text-md-center pb-2">\r\n                  <input type="checkbox" name="predeterminado" [(ngModel)]="contacto.predeterminado">\r\n                  {{constantes.TAG_PREDETERMINADO}}\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </fieldset>\r\n        </div>\r\n      </div>\r\n      <div class="col-lg-12 col-md-12 col-sm-12">\r\n        <div class="card m-3" *ngIf="listaContactos?.length>0 && !vistaFormulario">\r\n          <div class="card-header p-1">\r\n            <strong>{{constantes.INVENTARIO_CONTACTO_LISTADO}}</strong>\r\n            <div class="card-header-actions">\r\n              <button type="button" *ngIf="accion !== constantes.ACCION_CONSULTAR && !vistaFormulario" class="btn btn-sm btn-primary mr-1"\r\n                id="btnNuevoGrupoEmp" (click)="nuevo()" container="body" title="{{constantes.ATAJO_NUEVO}}" ngbTooltip="{{constantes.LABEL_NUEVO}}">\r\n                <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body m-0 p-0">\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group p-1">\r\n                  <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                    size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                    size="100">\r\n                  <div class="input-group-append">\r\n                    <span class="input-group-text">\r\n                      <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div class="float-right pr-1">\r\n                  <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                    maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--listado de contactos--\x3e\r\n            <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 215px);" class="ag-theme-balham"\r\n              [rowData]="listaContactos" [columnDefs]="columnDefs" [enableSorting]="true" [rowSelection]="rowSelection"\r\n              [enableColResize]="true" [context]="context" (gridReady)="onGridReady($event)" (rowSelected)="detalleSeleccionado = $event.node.data"\r\n              (cellFocused)="filaFocused($event)" [frameworkComponents]="frameworkComponents" (contextmenu)="$event.preventDefault()"\r\n              (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (gridColumnsChanged)="redimensionarColumnas()"\r\n              (gridSizeChanged)="redimensionarColumnas()" [overlayNoRowsTemplate]="noDatos" (cellDoubleClicked)="consultar();">\r\n            </ag-grid-angular>\r\n            <p-contextMenu #menuOpciones [model]="opciones" appendTo="body" [baseZIndex]="1100"></p-contextMenu>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'},rT3V:function(e,t){e.exports='<div *ngIf="listaIA?.length === 0" class="text-center">\r\n  <button class="btn btn-sm btn-primary" [disabled]="!puedeEditar" type="button" (click)="agregarFila()">\r\n    <i class="{{constantes.ICON_SELECCIONAR}}"></i> {{constantes.TAG_AGREGAR_INFORMACION_ADICIONAL}}</button>\r\n</div>\r\n<div *ngIf="listaIA?.length > 0 && isScreamMd">\r\n  <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 900px);" class="ag-theme-balham"\r\n    [rowData]="listaIA" [columnDefs]="columnDefs" [enableSorting]="true" [rowSelection]="rowSelection"\r\n    [enableColResize]="true" [context]="context" [singleClickEdit]="true" (gridReady)="onGridReady($event)"\r\n    (rowSelected)="iaSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)" (contextmenu)="$event.preventDefault()"\r\n    (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" [stopEditingWhenGridLosesFocus]="true"\r\n    (gridColumnsChanged)="redimensionarColumnas()" (gridSizeChanged)="redimensionarColumnas()">\r\n  </ag-grid-angular>\r\n</div>\r\n<p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>'},rvcC:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.marEmpresa=null,this.marCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.marEmpresa=e.marEmpresa?e.marEmpresa:this.marEmpresa,this.marCodigo=e.marCodigo?e.marCodigo:this.marCodigo},e}()},rx3f:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.getColumnasEstadosFinancieros=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/getColumnasEstadosFinancieros",e,o).then(function(e){e&&e.extraInfo?t.despuesDeGetColumnasEstadosFinancieros(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerEmpresa=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/obtenerEmpresa",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerEmpresa(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarEmpresasParaAdministracion=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/getListaSisEmpresaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarEmpresasParaAdministracion(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarSisEmpresa=function(e,t,o){var a=this;this.api.post("todocompuWS/sistemaWebController/modificarSisEmpresa",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarSisEmpresa(e):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(){return[{headerName:s.a.TAG_RUC_ID,field:"empRuc",width:250},{headerName:s.a.TAG_NOMBRE,field:"empNombre",width:300},{headerName:s.a.TAG_ACTIVIDAD,width:250,valueGetter:function(e){return e.data.parametros&&e.data.parametros[0]?e.data.parametros[0].parActividad:e.data.parActividad}},{headerName:s.a.TAG_TELEFONO,field:"empTelefono",width:250},this.utilService.getColumnaOpciones()]},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar;break;case s.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar;break;case s.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.ERROR_403_TITULO),a},e=c([Object(a.Injectable)({providedIn:"root"}),l("design:paramtypes",[i.a,r.b,n.a])],e)}()},sOUC:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var a=o("hBue"),i=o("nbXh"),r=function(){function e(e){this.catPrecioFijo=!1,this.catActiva=!1,this.invProductoSubcategoria=new i.a,this.invProductoCategoriaPK=new a.a,this.catDetalle="",this.ctaEmpresa="",this.ctaCodigo="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.catPrecioFijo=e.catPrecioFijo?e.catPrecioFijo:this.catPrecioFijo,this.catActiva=e.catActiva?e.catActiva:this.catActiva,this.invProductoSubcategoria=e.invProductoSubcategoria?e.invProductoSubcategoria:this.invProductoSubcategoria,this.invProductoCategoriaPK=e.invProductoCategoriaPK?e.invProductoCategoriaPK:this.invProductoCategoriaPK,this.catDetalle=e.catDetalle?e.catDetalle:this.catDetalle,this.ctaEmpresa=e.ctaEmpresa?e.ctaEmpresa:this.ctaEmpresa,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta,this.invProductoList=e.invProductoList?e.invProductoList:this.invProductoList},e}()},sQV6:function(e,t){e.exports='<div *ngIf="vistaFormulario">\r\n  \x3c!-- FORMULARIO DE ORDEN DE PEDIDO --\x3e\r\n  <div class="card m-0">\r\n    <div class="card-header" style="padding: 0.5rem 0.5rem;">\r\n      <button id="btnActivarFormOrdenPedido" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="cambiarActivar()"\r\n        type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <strong>{{ frmTitulo }}\r\n        <strong *ngIf="accion!=constantes.ACCION_CREAR"> No. {{invPedidos.invPedidosPK.pedNumero}}</strong>\r\n        <span class="text-primary">: {{ empresaSeleccionada.empNombre }}</span>\r\n      </strong>\r\n      <div class="card-header-actions">\r\n        \x3c!--  BOTONES   --\x3e\r\n        <div class="btn-group">\r\n          \x3c!-- Registrador --\x3e\r\n          <div *ngIf="(accion === constantes.ACCION_CREAR|| accion === constantes.ACCION_MAYORIZAR) && !motivoSeleccionado.pmAprobacionAutomatica && funcionesUsuario.indexOf(\'Registrador\')>-1"\r\n            class="btn-group mr-1">\r\n            <button id="btnGuardarOrdenPedido" type="button" class="btn btn-sm btn-primary" placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}"\r\n              (click)="accion===constantes.ACCION_CREAR ? guardarOrdenPedido(frmOrdenPedido, false): actualizarOrdenPedido(frmOrdenPedido, false)">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="accion===constantes.ACCION_CREAR ? guardarOrdenPedido(frmOrdenPedido, true): actualizarOrdenPedido(frmOrdenPedido, true)">{{\r\n                constantes.LABEL_GUARDAR_PENDIENTE }}\r\n              </a>\r\n            </div>\r\n          </div>\r\n          \x3c!-- Registrador y aprobador --\x3e\r\n          <div *ngIf="(accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR) && motivoSeleccionado.pmAprobacionAutomatica && funcionesUsuario.indexOf(\'Registrador\')>-1 && funcionesUsuario.indexOf(\'Aprobador\')>-1"\r\n            class="btn-group mr-1">\r\n            <button id="btnGuardarOrdenPedido" type="button" class="btn btn-sm btn-primary" (click)="accion === constantes.ACCION_CREAR ? guardarOrdenPedido(frmOrdenPedido, false, \'registrar_aprobar\') : actualizarOrdenPedido(frmOrdenPedido, false,\'registrar_aprobar\')"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="accion === constantes.ACCION_CREAR ? guardarOrdenPedido(frmOrdenPedido, true) : actualizarOrdenPedido(frmOrdenPedido, true)">{{\r\n                constantes.LABEL_GUARDAR_PENDIENTE}}\r\n              </a>\r\n            </div>\r\n          </div>\r\n          \x3c!--Reporte historial Y exportar--\x3e\r\n          <button id="btnImprimirOrdenPedido" *ngIf="accion === constantes.ACCION_CONSULTAR && !invPedidos.pedPendiente && !invPedidos.pedAnulado"\r\n            type="button" class="btn btn-sm btn-primary mr-1" (click)="imprimirInvPedidos(false, true)" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" [disabled]="cargando">\r\n            <i class="fa fa-print" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button id="btnExportarOrdenPedido" *ngIf="accion === constantes.ACCION_CONSULTAR && !invPedidos.pedPendiente && !invPedidos.pedAnulado"\r\n            type="button" class="btn btn-sm btn-primary mr-1" (click)="exportarInvPedidos(true)" placement="top"\r\n            ngbTooltip="{{constantes.LABEL_EXPORTAR}}" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar && !cargando">\r\n            <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n          </button>\r\n          \x3c!-- Anular--\x3e\r\n          <button id="btnAnularOrdenPedido" *ngIf="accion === constantes.ACCION_ANULAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n            placement="top" ngbTooltip="{{constantes.ACCION_ANULAR}}" (click)="anularOrdenPedido()">\r\n            <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.ACCION_ANULAR}}</span>\r\n          </button>\r\n          \x3c!-- Eliminar --\x3e\r\n          <button id="btnEliminarOrdenPedido" *ngIf="accion === constantes.ACCION_ELIMINAR" type="button" class="btn btn-sm btn-danger mr-1"\r\n            placement="top" ngbTooltip="{{constantes.ACCION_ELIMINAR}}" (click)="eliminarOrdenPedido()">\r\n            <i class="{{constantes.ICON_ELIMINAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.ACCION_ELIMINAR}}</span>\r\n          </button>\r\n          \x3c!--Cancelar--\x3e\r\n          <button id="btnCancelarOrdenPedido" *ngIf="!(accion === constantes.ACCION_CONSULTAR)" type="button" class="btn btn-sm btn-default mr-1"\r\n            (click)="cancelarAccion()" placement="top" ngbTooltip="{{constantes.LABEL_CANCELAR}}" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n          </button>\r\n          <button id="btnCancelarOrdenPedido" *ngIf="accion === constantes.ACCION_CONSULTAR" type="button" class="btn btn-sm btn-default mr-1"\r\n            (click)="cancelarAccion()" placement="top" ngbTooltip="{{constantes.LABEL_REGRESAR}}" title="{{constantes.ATAJO_CANCELAR}}">\r\n            <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="card-body p-1">\r\n      <form #frmOrdenPedido="ngForm" autocomplete="off">\r\n        <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR || accion === constantes.ACCION_ELIMINAR || accion === constantes.ACCION_ANULAR">\r\n          \x3c!--Informacion general de orden de pedido--\x3e\r\n          <div class="card mb-1" [ngClass]="{\'card-accent-danger\': invPedidos.pedPendiente, \'card-accent-success\': invPedidos.pedAprobado && !invPedidos.pedEjecutado, \'card-accent-warning\': invPedidos.pedAprobado && invPedidos.pedEjecutado, \'card-accent-default\': invPedidos.pedAnulado}">\r\n            <div class="card-header">\r\n              <strong>{{ constantes.TAG_DATOS_GENERALES }}\r\n              </strong>\r\n              <div class="card-header-actions">\r\n                <span class="mr-2 badge badge-pill" [ngClass]="{\'badge-danger\': invPedidos.pedPendiente, \'badge-success\': invPedidos.pedAprobado && !invPedidos.pedEjecutado, \'badge-warning\': invPedidos.pedAprobado && invPedidos.pedEjecutado, \'badge-default\': invPedidos.pedAnulado}">{{pedidoEstado}}</span>\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionOrden"\r\n                  aria-expanded="true" placement="left" ngbTooltip="Ocultar/Mostrar" (click)="collpase()">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionOrden">\r\n              <div class="row">\r\n                \x3c!--fecha--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA}}</b>\r\n                    </label>\r\n                    <p-calendar inputId="pedFechaEmision" name="pedFechaEmision" [(ngModel)]="invPedidos.pedFechaEmision"\r\n                      [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true"></p-calendar>\r\n                  </div>\r\n                </div>\r\n                \x3c!--motivo--\x3e\r\n                <div class="col-md-3" *ngIf="accion === constantes.ACCION_CREAR">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_MOTIVO}}</b>\r\n                      &nbsp;\r\n                      <a (click)="listarMotivos()">\r\n                        <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                          container="body"></span>\r\n                      </a>\r\n                    </label>\r\n                    <select [(ngModel)]="motivoSeleccionado" class="form-control input-sm" name="motivoSeleccionado"\r\n                      (change)="traerConfiguracionPedidos()" required [compareWith]="inicializarMotivos">\r\n                      <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                      <option [ngValue]="motivo" *ngFor="let motivo of listaMotivos">{{motivo.pmDetalle}}\r\n                        ({{motivo.invPedidosMotivoPK.pmCodigo}})</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                \x3c!--Registrador--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_REGISTRADOR}}</b>\r\n                    </label>\r\n                    <input name="usrRegistradorNombre" [(ngModel)]="usrRegistradorNombre" class="form-control form-control-sm"\r\n                      disabled>\r\n                  </div>\r\n                </div>\r\n                \x3c!--Fecha y hora de entrega--\x3e\r\n                <div class="col-md-3" *ngIf="!motivoSeleccionado.pmExigirCliente || !invPedidos.invCliente">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA_HORA_ENTREGA}}</b>\r\n                    </label>\r\n                    <p-calendar name="pedidoFechaHora" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                      [showIcon]="true" [(ngModel)]="invPedidos.pedFechaHoraEntrega" showTime="true" hourFormat="24"\r\n                      [required]="true" [minDate]="invPedidos.pedFechaEmision" [appMinDate]="invPedidos.pedFechaEmision"></p-calendar>\r\n                  </div>\r\n                </div>\r\n                \x3c!--observaciones--\x3e\r\n                <div class="col-md-3" *ngIf="!motivoSeleccionado.pmExigirCliente || !invPedidos.invCliente">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <strong>{{constantes.TAG_OBSERVACIONES}} </strong>\r\n                    </label>\r\n                    <input id="pedObservacionesRegistra" name="pedObservacionesRegistra" [(ngModel)]="invPedidos.pedObservacionesRegistra"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                      maxlength="1000" required appUppercase>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          \x3c!--Informacion de cliente--\x3e\r\n          <div class="card mb-1" *ngIf="(motivoSeleccionado.pmExigirCliente && (accion === constantes.ACCION_CREAR  ||  accion === constantes.ACCION_MAYORIZAR))  ||  (accion !== constantes.ACCION_CREAR  &&  accion !== constantes.ACCION_MAYORIZAR && invPedidos.invCliente && invPedidos.invCliente.invClientePK.cliCodigo) ">\r\n            <div class="card-header">\r\n              <strong>{{ constantes.TAG_DATOS_CLIENTE }}<span class="text-primary">: {{\r\n                  invPedidos.invCliente.cliRazonSocial}}</span></strong>\r\n              <div class="card-header-actions">\r\n                <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseInformacionCliente"\r\n                  aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}" (click)="collpaseCliente()">\r\n                  <i class="fa fa-minus"></i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseInformacionCliente">\r\n              <div class="row">\r\n                \x3c!--Orden de compra--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <strong>{{constantes.TAG_ORDEN_COMPRA}} </strong>\r\n                    </label>\r\n                    <input id="pedOrdenCompra" name="pedOrdenCompra" [(ngModel)]="invPedidos.pedOrdenCompra"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      maxlength="1000" required appUppercase>\r\n                    <span class="fa fa-question-circle form-control-feedback" placement="right" ngbPopover="{{constantes.MSJ_CODIGO_ORDEN_COMPRA}}"\r\n                      container="body"></span>\r\n                  </div>\r\n                </div>\r\n                \x3c!--cliente--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_CODIGO_CLIENTE}}</b>\r\n                    </label>\r\n                    <input id="codCliente" name="txtCodigoCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      type="text" required (blur)="validarCliente()" (keydown)="buscarCliente($event);" [(ngModel)]="invPedidos.invCliente.invClientePK.cliCodigo"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" appUppercase>\r\n                  </div>\r\n                </div>\r\n                \x3c!--grupo empresarial--\x3e\r\n                <div class="col-md-3" *ngIf="invPedidos.invCliente.invClienteGrupoEmpresarial && invPedidos.invCliente.invClienteGrupoEmpresarial.geNombre">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.INVENTARIO_GRUPO_EMPRESARIAL}}</b>\r\n                    </label>\r\n                    <input id="grupoEmpresarialCliente" name="txtGrupoEmpresarialCliente" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      type="text" required (blur)="validarCliente()" [(ngModel)]="invPedidos.invCliente.invClienteGrupoEmpresarial.geNombre"\r\n                      disabled>\r\n                  </div>\r\n                </div>\r\n                \x3c!--Contacto--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label" [ngClass]="{\'mb-6-important\': accion === constantes.ACCION_CREAR  ||  accion === constantes.ACCION_MAYORIZAR}">\r\n                      <b>{{constantes.TAG_CONTACTO_NOMBRE}}</b>\r\n                    </label>\r\n                    <input id="pedContactoNombre" name="pedContactoNombre" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      type="text" required [(ngModel)]="invPedidos.pedContactoNombre" disabled *ngIf="accion !== constantes.ACCION_CREAR  &&  accion !== constantes.ACCION_MAYORIZAR">\r\n                    <span class="ui-fluid" *ngIf="accion === constantes.ACCION_CREAR  ||  accion === constantes.ACCION_MAYORIZAR">\r\n                      <p-autoComplete name="pedContactoNombre" isAutocomple="true" autofocus inputId="pedContactoNombre"\r\n                        required="true" [(ngModel)]="contactoPredeterminado" [suggestions]="arrayContactoFiltrada"\r\n                        (completeMethod)="filtrarContactos($event)" (onSelect)="seleccionarContacto()" field="contacto"\r\n                        placeholder="{{constantes.TAG_OBLIGATORIO}}" [dropdown]="true" [minLength]="1"\r\n                        [inputStyleClass]="\'text-uppercase\'">\r\n                      </p-autoComplete>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                \x3c!--lugar de entrega--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label" [ngClass]="{\'mb-6-important\': accion === constantes.ACCION_CREAR  ||  accion === constantes.ACCION_MAYORIZAR}">\r\n                      <b>{{constantes.TAG_LUGAR_ENTREGA}}</b>\r\n                    </label>\r\n                    <input id="pedLugarEntrega" name="pedLugarEntrega" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      type="text" required [(ngModel)]="invPedidos.pedLugarEntrega" disabled *ngIf="accion !== constantes.ACCION_CREAR  &&  accion !== constantes.ACCION_MAYORIZAR">\r\n                    <span class="ui-fluid" *ngIf="accion === constantes.ACCION_CREAR  ||  accion === constantes.ACCION_MAYORIZAR">\r\n                      <p-autoComplete name="pedLugarEntrega" isAutocomple="true" autofocus inputId="nombre" required="true"\r\n                        [(ngModel)]="lugarEntrega" [suggestions]="arrayContactoLugarEntregaFiltrada" (completeMethod)="filtrarLugarEntrega($event)"\r\n                        (onSelect)="seleccionarLugarEntrega()" field="nombre" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                        [dropdown]="true" [minLength]="1" [inputStyleClass]="\'text-uppercase\'">\r\n                      </p-autoComplete>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                \x3c!--telefono--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_TELEFONO}}</b>\r\n                    </label>\r\n                    <input name="pedidoTelefono" id="pedidoTelefono" class="form-control form-control-sm mousetrap text-uppercase"\r\n                      type="text" required [(ngModel)]="invPedidos.pedContactoTelefono" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                      (keypress)="soloNumeros($event)">\r\n                  </div>\r\n                </div>\r\n                \x3c!--Fecha y hora de entrega--\x3e\r\n                <div class="col-md-3">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <b>{{constantes.TAG_FECHA_HORA_ENTREGA}}</b>\r\n                    </label>\r\n                    <p-calendar name="pedidoFechaHora" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                      [showIcon]="true" [(ngModel)]="invPedidos.pedFechaHoraEntrega" showTime="true" hourFormat="24"\r\n                      [required]="true" [minDate]="invPedidos.pedFechaEmision" [appMinDate]="invPedidos.pedFechaEmision"></p-calendar>\r\n                  </div>\r\n                </div>\r\n                \x3c!--observaciones--\x3e\r\n                <div class="col-md-6">\r\n                  <div class="form-group form-group-sm">\r\n                    <label class="control-label">\r\n                      <strong>{{constantes.TAG_OBSERVACIONES}} </strong>\r\n                    </label>\r\n                    <input id="pedObservacionesRegistra" name="pedObservacionesRegistra" [(ngModel)]="invPedidos.pedObservacionesRegistra"\r\n                      placeholder="{{constantes.TAG_OBLIGATORIO}}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                      maxlength="1000" required appUppercase>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </fieldset>\r\n        \x3c!--Detalle de pedidos--\x3e\r\n        <div class="card mb-1">\r\n          <div class="card-header">\r\n            <strong>{{constantes.PEDIDOS_DETALLE}}</strong>\r\n          </div>\r\n          <div class="card-body m-0 p-0">\r\n            <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listadoResultado"\r\n              [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n              [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n              [rowDragManaged]="true" [animateRows]="true" [singleClickEdit]="true" [rowClassRules]="rowClassRules"\r\n              (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)"\r\n              (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n              (cellEditingStopped)="alCambiarValorDeCelda($event)" [stopEditingWhenGridLosesFocus]="true" (rowDragEnd)="refrescarOrdenDetallePedido()"\r\n              [suppressDragLeaveHidesColumns]="true" (gridColumnsChanged)="redimensionarColumnas()" (gridSizeChanged)="redimensionarColumnas()">\r\n            </ag-grid-angular>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n<p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},sXuD:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.id=0,this.proCodigoPrincipal="",this.proNombre="",this.proCategoria="",this.proEmpaque="",this.stockSaldo=0,this.stockUltimoCosto=0,this.stockCostoPromedio=0,this.detalleMedida="",this.proPrecio=0,this.proCantidad=0,this.proDescuento=0,this.proMargenUtilidad=0,this.proGravaIva="",this.tipTipo="",this.proInactivo=!1,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.id=e.id?e.id:this.id,this.proCodigoPrincipal=e.proCodigoPrincipal?e.proCodigoPrincipal:this.proCodigoPrincipal,this.proNombre=e.proNombre?e.proNombre:this.proNombre,this.proCategoria=e.proCategoria?e.proCategoria:this.proCategoria,this.proEmpaque=e.proEmpaque?e.proEmpaque:this.proEmpaque,this.stockSaldo=e.stockSaldo?e.stockSaldo:this.stockSaldo,this.stockUltimoCosto=e.stockUltimoCosto?e.stockUltimoCosto:this.stockUltimoCosto,this.stockCostoPromedio=e.stockCostoPromedio?e.stockCostoPromedio:this.stockCostoPromedio,this.detalleMedida=e.detalleMedida?e.detalleMedida:this.detalleMedida,this.proPrecio=e.proPrecio?e.proPrecio:this.proPrecio,this.proCantidad=e.proCantidad?e.proCantidad:this.proCantidad,this.proDescuento=e.proDescuento?e.proDescuento:this.proDescuento,this.proMargenUtilidad=e.proMargenUtilidad?e.proMargenUtilidad:this.proMargenUtilidad,this.proGravaIva=e.proGravaIva?e.proGravaIva:this.proGravaIva,this.tipTipo=e.tipTipo?e.tipTipo:this.tipTipo,this.proInactivo=e.proInactivo?e.proInactivo:this.proInactivo},e}()},sffu:function(e,t,o){"use strict";o.d(t,"a",function(){return m});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("EF/R"),l=o("wd/R"),d=o("IGT0"),p=o("+q+w"),u=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a,l.locale("es")}return e.prototype.getListaInvPedidosConfiguracion=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/getListaInvPedidosConfiguracion",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarConfiguracionPedido(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.esConfiguracionPedidoValida=function(e){return e.listAprobadores.length>0&&e.listEjecutores.length>0&&e.listRegistradores.length>0},e.prototype.generarColumnas=function(e,t){var o=[{headerName:s.a.TAG_CODIGO,width:110,minWidth:110,valueGetter:function(e){return e.data.usuario.usrCodigo}},{headerName:s.a.TAG_NOMBRE,width:200,editable:!0,minWidth:200,valueGetter:function(e){return e.data.usuario.usrNombre+" "+e.data.usuario.usrApellido}}];return t.accion!==s.a.ACCION_CONSULTAR&&o.push(this.utilService.getColumnaEliminar(e,t)),o},e.prototype.listarInvPedidosMotivo=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/getListaInvPedidosMotivo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarMotivos(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarInvPedidosMotivoTO=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/getListaInvPedidosMotivoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvPedidosMotivoTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerInvPedidosMotivo=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/getInvPedidosMotivo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerInvPedidosMotivo(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.convertirInvPedidosMotivoAInvPedidosMotivoTO=function(e){var t=new p.a;return t.pmEmpresa=e.invPedidosMotivoPK.pmEmpresa,t.pmCodigo=e.invPedidosMotivoPK.pmCodigo,t.pmSector=e.invPedidosMotivoPK.pmSector,t.pmDetalle=e.pmDetalle,t.pmHoraFin=e.pmHoraFin,t.pmHoraInicio=e.pmHoraInicio,t.pmInactivo=e.pmInactivo,t},e.prototype.formatearInvPedidosMotivo=function(e,t){var o=new d.a(e);return o.pmHoraInicio=e.pmHoraInicio.length>5?e.pmHoraInicio:e.pmHoraInicio+":0",o.pmHoraFin=e.pmHoraFin.length>5?e.pmHoraFin:e.pmHoraFin+":0",t.accion===s.a.ACCION_CREAR&&(o.invPedidosMotivoPK.pmEmpresa=t.empresaSeleccionada.empCodigo,o.invPedidosMotivoPK.pmSector=t.sectorSeleccionado.secCodigo,o.prdSector.prdSectorPK.secCodigo=t.sectorSeleccionado.secCodigo,o.prdSector.prdSectorPK.secEmpresa=t.empresaSeleccionada.empCodigo,o.usrCodigo=this.auth.getCodigoUser(),o.usrFechaInserta=null),t.categoriaSeleccionada?(o.invProductoCategoria.invProductoCategoriaPK.catEmpresa=t.empresaSeleccionada.empCodigo,o.invProductoCategoria.invProductoCategoriaPK.catCodigo=t.categoriaSeleccionada.catCodigo):o.invProductoCategoria=null,o},e.prototype.validarDiasSemana=function(e){return e.pmLunes||e.pmMartes||e.pmMiercoles||e.pmJueves||e.pmViernes||e.pmSabado||e.pmDomingo},e.prototype.validarUnoEnCadaTabla=function(e,t){var o=!1,a=!1,i=!1,r=e.listRegistradores;if(!(r&&r.length>0))return!1;for(var n=0;n<r.length;n++)if(r[n].activo){o=!0;break}if(t)a=!0;else{var s=e.listAprobadores;if(!(s&&s.length>0))return!1;for(n=0;n<s.length;n++)if(s[n].activo){a=!0;break}}var c=e.listEjecutores;if(!(c&&c.length>0))return!1;for(n=0;n<c.length;n++)if(c[n].activo){i=!0;break}return o&&a&&i},e.prototype.esValidoPeriodoInvMotivo=function(e,t,o){if(!e)return this.toastr.warning(s.a.MSJ_FECHA_NOVALIDA),!1;var a=this.utilService.getDayOfDate(e),i=new Date((new Date).toDateString()+" "+t.pmHoraInicio),r=new Date((new Date).toDateString()+" "+t.pmHoraFin),n=!1;(1===a&&t.pmLunes||2===a&&t.pmMartes||3===a&&t.pmMiercoles||4===a&&t.pmJueves||5===a&&t.pmViernes||6===a&&t.pmSabado||0===a&&t.pmDomingo)&&e>=i&&e<=r&&(n=!0);var c=this.getHorarioInvPedidoMotivo(t);if(!n){var l=this.obtenerDiasHabiles(t).join(),d=s.a.MSJ_PEDIDOS_HORARIO_REGISTRO+" "+l+". "+s.a.TAG_HORARIO+":"+c,p={title:s.a.TOAST_INFORMACION,texto:d,type:s.a.SWAL_INFO,confirmButtonText:"<i class='"+s.a.ICON_AGREGAR+"'></i>  "+s.a.LABEL_MAS_INFORMACION,cancelButtonText:s.a.MSJ_ACEPTAR};this.utilService.generarSwallConfirmacionHtml(p).then(function(e){})}return n},e.prototype.getHorarioInvPedidoMotivo=function(e){return e.pmHoraInicio.length>4&&e.pmHoraFin.length>4?e.pmHoraInicio.substring(0,5)+" - "+e.pmHoraFin.substring(0,5):""},e.prototype.obtenerDiasHabiles=function(e){var t=[];return e.pmLunes&&t.push(" "+s.a.TAG_LUNES),e.pmMartes&&t.push(" "+s.a.TAG_MARTES),e.pmMiercoles&&t.push(" "+s.a.TAG_MIERCOLES),e.pmJueves&&t.push(" "+s.a.TAG_JUEVES),e.pmViernes&&t.push(" "+s.a.TAG_VIERNES),e.pmSabado&&t.push(" "+s.a.TAG_SABADO),e.pmDomingo&&t.push(" "+s.a.TAG_DOMINGO),t},e.prototype.generarColumnasMotivoPedido=function(){return[{headerName:s.a.TAG_CODIGO,field:"pmCodigo",width:200},{headerName:s.a.TAG_DETALLE,field:"pmDetalle",width:600},{headerName:s.a.TAG_HORA_INICIO,field:"pmHoraInicio",width:100,valueFormatter:this.formatearFecha},{headerName:s.a.TAG_HORA_FIN,field:"pmHoraFin",width:100,valueFormatter:this.formatearFecha},{headerName:s.a.TAG_INACTIVO,field:"pmInactivo",width:100,minWidth:100,cellRenderer:"inputEstado",cellClass:"text-center"},this.utilService.getColumnaOpciones()]},e.prototype.formatearFecha=function(e){return e&&e.value?e.value.substring(0,5):""},e.prototype.insertarInvPedidosConfiguracion=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/insertarInvPedidosConfiguracion",e,o).then(function(e){e&&e.extraInfo?(t.despuesDeInsertarInvPedidosConfiguracion(e),t.cargando=!1):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.actualizarInvPedidosConfiguracion=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/modificarInvPedidosMotivo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeActualizarInvPedidosConfiguracion(e):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.actualizarEstadoInvPedidosConfiguracion=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/modificarEstadoInvPedidosMotivo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeActualizarEstadoInvPedidosConfiguracion(e):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.eliminarInvPedidosConfiguracion=function(e,t,o){var a=this;this.api.post("todocompuWS/pedidosWebController/eliminarInvPedidosMotivo",e,o).then(function(e){e&&e.extraInfo?t.despuesEliminarInvPedidosConfiguracion(e):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_INFORMACION),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.validarListados=function(e){switch(e.accion){case s.a.ACCION_NUEVO:case s.a.ACCION_CREAR:if(e.invPedidosConfiguracionTO&&e.invPedidosConfiguracionTO.listRegistradores&&e.invPedidosConfiguracionTO.listRegistradores.length>0)return!1;if(e.invPedidosConfiguracionTO&&e.invPedidosConfiguracionTO.listAprobadores&&e.invPedidosConfiguracionTO.listAprobadores.length>0)return!1;if(e.invPedidosConfiguracionTO&&e.invPedidosConfiguracionTO.listEjecutores&&e.invPedidosConfiguracionTO.listEjecutores.length>0)return!1;break;case s.a.ACCION_EDITAR:}return!0},e=u([Object(a.Injectable)({providedIn:"root"}),h("design:paramtypes",[i.a,r.b,n.a,c.a])],e)}()},siXs:function(e,t){e.exports='<div *ngIf="listadoUtilidades?.length>0">\r\n  <form #frmDatos=\'ngForm\' autocomplete="off" class="card m-0">\r\n    <div class="card-header p-1">\r\n      <button id="btnActivar" class="btn btn-sm btn-primary" *ngIf="isScreamMd" (click)="cambiarActivar(activar)" type="button"\r\n        title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n        <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n      </button>\r\n      <b> {{titulo}} - {{empresaSeleccionada.empNombre}}</b>\r\n      <div class="card-header-actions" *ngIf="!esContable">\r\n        \x3c!--Sin etiquetas--\x3e\r\n        <div class="btn-group d-lg-none">\r\n          \x3c!--Exportar--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnExportar" type="button" title="{{constantes.ATAJO_EXPORTAR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" (click)="exportar()">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"></span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Guardar--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnGuardar" type="button" title="{{constantes.ATAJO_GUARDAR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" (click)="guardar()">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"></span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Cancelar y/o regresar--\x3e\r\n          <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n            (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n            <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n              aria-hidden="true"></i>\r\n          </button>\r\n        </div>\r\n        \x3c!-- Con etiquetas--\x3e\r\n        <div class="btn-group d-none d-lg-block">\r\n          \x3c!--Exportar--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnExportar" type="button" title="{{constantes.ATAJO_EXPORTAR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" (click)="exportar()">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Guardar--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button id="btnGuardar" type="button" title="{{constantes.ATAJO_GUARDAR}}" class="btn btn-sm btn-primary mr-1"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_GUARDAR}}" (click)="guardar()">\r\n              <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n            </button>\r\n          </div>\r\n          \x3c!--Cancelar y/o regresar--\x3e\r\n          <button type="button" class="btn btn-sm btn-default mr-1" title="{{constantes.ATAJO_CANCELAR}}" id="btnCancelar"\r\n            (click)="cancelar()" ngbTooltip="{{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}">\r\n            <i class="{{accion === constantes.ACCION_CONSULTAR?constantes.ICON_REGRESAR:constantes.ICON_CANCELAR}}"\r\n              aria-hidden="true"></i>\r\n            {{accion === constantes.ACCION_CONSULTAR?constantes.LABEL_REGRESAR:constantes.LABEL_CANCELAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class="card-header-actions" *ngIf="esContable">\r\n        <app-botones-accion [conContable]="conContableCopia" [data]="data" (enviarAccion)="accionesBotones($event)"></app-botones-accion>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="card-body p-0">\r\n      <div class="p-1" *ngIf="esContable">\r\n        <app-contable-cabecera [data]="data" [conContable]="conContableCopia" [tipoSeleccionado]="tipoSeleccionado"\r\n          [empresaSeleccionada]="empresaSeleccionada" (accionFechaValido)="fechaContableValido = $event"></app-contable-cabecera>\r\n      </div>\r\n      <div class="row" *ngIf="!esContable">\r\n        <div class="col-sm-4 col-md-4 pr-0">\r\n          <div class="input-group p-1">\r\n            <input type="text" [(ngModel)]="filtroGlobal" name="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n              style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n            <div class="input-group-append">\r\n              <span class="input-group-text">\r\n                <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-sm-6 col-md-6">\r\n          <div class="input-group p-1">\r\n            <input type="text" [(ngModel)]="observacionesContable" appUppercase name="observacionesContable" class="form-control form-control-sm text-uppercase input-filter mousetrap"\r\n              style="font-family: Arial, FontAwesome;" placeholder="&#xf007; {{constantes.TAG_OBSERVACION_GENERAL}}..."\r\n              size="100">\r\n            <div class="input-group-append">\r\n              <span class="input-group-text">\r\n                <i class="{{constantes.ICON_EDITAR}}"></i>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-sm-2 col-md-2 pl-0">\r\n          <div class="float-right pr-1">\r\n            <p-multiSelect [options]="columnDefs" class="ocultar-en-tabla" [(ngModel)]="columnDefsSelected" name="columnDefsSelected"\r\n              optionLabel="headerName" maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n              defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="p-1">\r\n        <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listadoUtilidades"\r\n          [columnDefs]="columnDefsSelected" [enableSorting]="true" (gridSizeChanged)="redimensionarColumnas()"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [context]="context" (cellEditingStopped)="terminadoEditar($event)"\r\n          [pinnedBottomRowData]="pinnedBottomRowData" [suppressDragLeaveHidesColumns]="true" [suppressClickEdit]=true\r\n          (gridReady)="onGridReady($event)" [stopEditingWhenGridLosesFocus]="true" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n          (filterChanged)="actualizarFilas()" (cellFocused)="filaFocused($event)" (contextmenu)="data && data.accion === constantes.ACCION_MAYORIZAR?$event.preventDefault():null"\r\n          (cellContextMenu)="data && data.accion === constantes.ACCION_MAYORIZAR?mostrarContextMenu($event.data, $event.event):null">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n    <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n  </form>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"t+mx":function(e,t){e.exports=""},tHHr:function(e,t){e.exports=""},tmev:function(e,t,o){"use strict";o.d(t,"a",function(){return v});var a=o("CcnG"),i=o("oiVT"),r=o("LG3P"),n=o("mwBN"),s=o("eUd/"),c=o("6E6y"),l=o("nR5P"),d=o("madF"),p=o("gLZI"),u=o("EnEm"),h=o("CEfs"),m=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},C=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t,o,a,s){this.planCuentasService=e,this.activeModal=t,this.filasService=o,this.planContableService=a,this.utilService=s,this.tamanioEstructura=-1,this.filtrosBusquedaPlanCuenta=null,this.listaResultado=[],this.objetoSeleccionado=null,this.screamXS=!0,this.enterKey=0,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new u.a,this.conEstructuraTO=new i.a,this.objetoSeleccionado=new r.a,this.listaResultado=[],this.constantes=n.a}return e.prototype.ngOnInit=function(){this.screamXS=window.innerWidth<n.a.WINDOW_WIDTH_XS,-1===this.tamanioEstructura&&this.obtenerTamanioEstructura(),this.filtrosBusquedaPlanCuenta&&this.buscarPlanCuentas(),this.iniciarAgGrid(),this.iniciarAtajos()},e.prototype.onResize=function(){this.screamXS=window.innerWidth<n.a.WINDOW_WIDTH_XS},e.prototype.iniciarAtajos=function(){},e.prototype.obtenerTamanioEstructura=function(){var e=this,t={empresa:n.a.KEY_EMPRESA_SELECT};this.planContableService.getTamanioListaConEstructura(t,n.a.KEY_EMPRESA_SELECT).then(function(t){e.tamanioEstructura=t[0].estGrupo1+t[0].estGrupo2+t[0].estGrupo3+t[0].estGrupo4+t[0].estGrupo5+t[0].estGrupo6}).catch(function(t){e.utilService.handleError(t,e)})},e.prototype.buscarPlanCuentas=function(){var e=this;this.planCuentasService.getListaBuscarConCuentas(this.filtrosBusquedaPlanCuenta,n.a.KEY_EMPRESA_SELECT).then(function(t){0===t.length?e.activeModal.dismiss(null):1===t.length?e.enviarItem(t[0]):e.listaResultado=t})},e.prototype.enviarItem=function(e){e&&e.cuentaCodigo.length===this.tamanioEstructura&&this.activeModal.close(e)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.planContableService.generarColumnasPlanContable(this),this.columnDefs.pop(),this.columnDefs.pop(),this.columnDefs.push(this.utilService.getSpanSelect(this.tamanioEstructura)),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:d.a,toolTip:p.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,!this.filtrosBusquedaPlanCuenta&&this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.onCellDoubleClicked=function(e){this.enviarItem(e.data)},e.prototype.verificarTeclas=function(e){if(this.utilService.validarKeyBuscar(e.keyCode)){var t=this.gridApi?this.gridApi.getFocusedCell():null,o=t?t.rowIndex:-1,a=-1!==o?this.gridApi.getRowNode(o+""):null;this.objetoSeleccionado=a?a.data:null,this.enviarItem(this.objetoSeleccionado)}},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.ejecutarSpanAccion=function(e,t){this.enviarItem(t)},m([Object(a.Input)(),C("design:type",Number)],e.prototype,"tamanioEstructura",void 0),m([Object(a.Input)(),C("design:type",Object)],e.prototype,"filtrosBusquedaPlanCuenta",void 0),m([Object(a.HostListener)("window:resize",["$event"]),C("design:type",Function),C("design:paramtypes",[]),C("design:returntype",void 0)],e.prototype,"onResize",null),e=m([Object(a.Component)({selector:"app-listado-plan-cuentas",template:o("wZkA"),styles:[o("owpy")]}),C("design:paramtypes",[c.a,s.a,h.a,c.a,l.a])],e)}()},uPUy:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.bodEmpresa=null,this.bodCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.bodEmpresa=e.bodEmpresa?e.bodEmpresa:this.bodEmpresa,this.bodCodigo=e.bodCodigo?e.bodCodigo:this.bodCodigo},e}()},udyK:function(e,t,o){"use strict";o.d(t,"a",function(){return C});var a=o("CcnG"),i=o("z5Y/"),r=o("nR5P"),n=o("SZbH"),s=o("mwBN"),c=o("gLZI"),l=o("Ip0R"),d=o("mozY"),p=o("chRk"),u=o("OeYz"),h=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.autonumeric92=function(){return{decimalPlaces:2,decimalPlacesRawValue:2,decimalPlacesShownOnBlur:2,decimalPlacesShownOnFocus:2,maximumValue:"999999999.99",minimumValue:"0"}},e.prototype.obtenerDatosParaCrudAnticipos=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/obtenerDatosParaCrudAnticipos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaCrudAnticipos(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarRhAnticipo=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/insertarRhAnticipo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeInsertarRhAnticipo(e):(a.utilService.generarSwal(s.a.TAG_ANTICIPO,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarRhAnticipo=function(e,t,o){var a=this;this.api.post("todocompuWS/rrhhWebController/modificarRhAnticipo",e,o).then(function(e){e&&e.extraInfo?t.despuesDeModificarRhAnticipo(e):(a.utilService.generarSwal(s.a.TAG_ANTICIPO,s.a.SWAL_ERROR,e.operacionMensaje),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.generarColumnas=function(e){var t=this,o=[];return e.parametrosFormulario&&!e.parametrosFormulario.sector&&o.push({headerName:s.a.TAG_SECTOR,width:90,minWidth:90,valueGetter:function(e){return e.data.prSector}}),o.push({headerName:s.a.TAG_IDENTIFICACION,width:120,minWidth:120,valueGetter:function(e){return e.data.prId}},{headerName:s.a.TAG_APELLIDOS_Y_NOMBRES,width:300,minWidth:300,valueGetter:function(e){return e.data.prNombres}},{headerName:s.a.TAG_INGRESOS,field:"prIngresos",width:110,minWidth:110,cellClass:"text-right",valueFormatter:function(e){return e.node.rowPinned?null:t.formatearA2Decimales(e)}},{headerName:s.a.TAG_S_ANTICIPO,field:"prSaldoAnticipos",width:110,cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},valueFormatter:function(e){return e.node.rowPinned?null:t.formatearA2Decimales(e)},minWidth:110,headerComponentFramework:c.a,headerComponentParams:{tooltip:s.a.TAG_SALDO_ANTICIPO,text:s.a.TAG_S_ANTICIPO,enableSorting:!0}},{headerName:s.a.TAG_VALOR,field:"prValor",valueFormatter:this.formatearA2Decimales,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoAnticipos)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},width:110,minWidth:110,editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-right"},cellClassRules:{"cell-with-errors":function(o){return!(o.node.rowPinned||!e.puedeEditarTabla)&&(o.data.prValor>0&&!t.validarCantidad(o.data))}},cellEditorFramework:d.a,cellEditorParams:{name:"prValor",maxlength:12,placeholder:"0.00",configAutonumeric:e.autonumeric92}},{headerName:s.a.TAG_FORMA_PAGO,field:"fpSeleccionada",width:160,minWidth:160,suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoAnticipos)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"text-center"},cellClassRules:{"cell-with-errors":function(t){return!(t.node.rowPinned||!e.puedeEditarTabla)&&(t.data.prValor>0&&!(t.data.fpSeleccionada&&t.data.fpSeleccionada.fpDetalle))}},editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},cellEditorFramework:p.a,cellEditorParams:function(t){return{value:t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,name:"fpSeleccionada",obligatorio:!0,listValues:e.formasDePago?e.formasDePago:[],fieldsShow:["fpDetalle"]}},valueFormatter:function(t){return t.data.fpSeleccionada=t.data.fpSeleccionada?t.data.fpSeleccionada:e.fpSeleccionada,t.data.fpSeleccionada?t.node.rowPinned?t.data.fpSeleccionada:t.data.fpSeleccionada.fpDetalle:e.fpSeleccionada?e.fpSeleccionada.fpDetalle:""}},{headerName:s.a.TAG_NUMERO_DOCUMENTO,field:"documento",width:140,minWidth:140,cellClass:function(e){return e.node.rowPinned?"text-right tr-negrita":"mousetrap"},cellClassRules:{"cell-with-errors":function(t){return!(t.node.rowPinned||!e.puedeEditarTabla)&&(t.data.errorEnDocumento||t.data.documentoRepetido)}},editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoAnticipos)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:u.a,cellEditorParams:{name:"documento",inputClass:"text-uppercase"},headerComponentFramework:c.a,headerComponentParams:{tooltip:s.a.TAG_NUMERO_DOCUMENTO,text:s.a.TAG_N_DOCUMENTO,enableSorting:!0}},{headerName:s.a.TAG_OBSERVACION,field:"observacion",width:200,minWidth:200,cellClass:"mousetrap",editable:function(t){return!t.node.rowPinned&&e.puedeEditarTabla},suppressKeyboardEvent:function(o){if(o.editing&&!o.node.rowPinned)return t.utilService.desplazarTablaArribaAbajo(o.event.keyCode,o.node.rowIndex,e.listadoAnticipos)||t.utilService.desplazarseInputIzquierdaDerecha(o.event.keyCode)},cellEditorFramework:u.a,cellEditorParams:{name:"observacion",inputClass:"text-uppercase"}}),e.esContable&&e.puedeEditarTabla&&o.push(this.utilService.getColumnaEliminar()),o},e.prototype.generarPinnedBottonRowData=function(){return[{prSector:"",prId:"",prNombres:"",prIngresos:null,prSaldoAnticipos:s.a.TAG_TOTAL_PUNTOS,prValor:0,fpSeleccionada:s.a.TAG_N_ANTICIPOS,documento:0,observacion:""}]},e.prototype.validarCantidad=function(e){var t=this.matRound2(e.prIngresos),o=this.matRound2(e.prSaldoAnticipos),a=this.matRound2(t-o);return!(this.matRound2(e.prValor)>a)},e.prototype.matRound2=function(e){return e=this.utilService.quitarComasNumero(e),Math.round(100*e)/100},e.prototype.formatearA2Decimales=function(e){var t=e.value?e.value.toString().replace(/,/gi,""):0;return new l.DecimalPipe("en-US").transform(t,"1.2-2")},e=h([Object(a.Injectable)({providedIn:"root"}),m("design:paramtypes",[i.a,n.b,r.a])],e)}()},uhNP:function(e,t,o){"use strict";o.d(t,"a",function(){return O});var a=o("CcnG"),i=o("mwBN"),r=o("CEfs"),n=o("8fiX"),s=o("CDHH"),c=o("nR5P"),l=o("mBg1"),d=o("eUd/"),p=o("zkCp"),u=o("madF"),h=o("gLZI"),m=o("+JJ7"),C=o("EnEm"),v=o("yccp"),A=o("Ungd"),f=o("SZbH"),g=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t,o,r,n,s,c){this.clienteService=e,this.filasService=t,this.utilService=o,this.activeModal=r,this.archivoService=n,this.toastr=s,this.atajoService=c,this.enviarActivar=new a.EventEmitter,this.enviarAccion=new a.EventEmitter,this.activarAtajos=!1,this.listadoClientes=new Array,this.invClienteSeleccionado=null,this.constantes=i.a,this.columnas=[],this.isScreamMd=!0,this.activar=!1,this.cargando=!1,this.filtroGlobal="",this.filasTiempo=new C.a,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.exportarTodosEstado=!0,this.columnDefsExportar=[]}return e.prototype.ngOnInit=function(){this.isModal&&this.listarClientes(),this.definirAtajosDeTeclado(),this.innerWidth=window.innerWidth,this.isScreamMd=!(this.innerWidth<=576)},e.prototype.ngOnChanges=function(e){e.parametros&&e.parametros.currentValue&&e.parametros.currentValue.debeBuscar&&this.listarClientes()},e.prototype.generarOpciones=function(e){var t=this,o=e,a=e&&this.clienteService.verificarPermiso(i.a.ACCION_EDITAR,this),r=e&&this.clienteService.verificarPermiso(i.a.ACCION_ELIMINAR,this);this.opciones=[{label:i.a.ACCION_CONSULTAR,icon:i.a.ICON_CONSULTAR,disabled:!o,command:function(){return o?t.emitirAccion(i.a.ACCION_CONSULTAR,e):null}},{label:i.a.ACCION_EDITAR,icon:i.a.ICON_EDITAR,disabled:!a,command:function(){return a?t.emitirAccion(i.a.ACCION_EDITAR,e):null}}],this.parametros.soloEditarConsultar||this.opciones.push({label:i.a.ACCION_ELIMINAR,icon:i.a.ICON_ELIMINAR,disabled:!r,command:function(){return r?t.eliminar(e):null}},{label:i.a.ACCION_INACTIVAR,icon:i.a.ICON_INACTIVAR,disabled:!a||e.cliInactivo,command:function(){return a&&e.cliInactivo?null:t.cambiarEstado(i.a.ACCION_INACTIVAR,e)}},{label:i.a.ACCION_ACTIVAR,icon:i.a.ICON_ACTIVAR,disabled:!a||!e.cliInactivo,command:function(){return!a||e.cliInactivo?t.cambiarEstado(i.a.ACCION_ACTIVAR,e):null}})},e.prototype.consultarClientes=function(){this.emitirAccion(i.a.ACCION_CONSULTAR,this.invClienteSeleccionado)},e.prototype.emitirAccion=function(e,t){var o={accion:e,objetoSeleccionado:t};this.enviarAccion.emit(o)},e.prototype.eliminar=function(e){var t=this,o={title:i.a.MSJ_TITULO_ELIMINAR,texto:i.a.MSJ_PREGUNTA_ELIMINAR+"<br>"+i.a.TAG_CLIENTE+": "+e.cliRazonSocial,type:i.a.SWAL_WARNING,confirmButtonText:i.a.MSJ_SI_ELIMINAR,cancelButtonText:i.a.MSJ_NO_CANCELAR,confirmButtonColor:i.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invClientePK:new l.a({cliEmpresa:i.a.KEY_EMPRESA_SELECT,cliCodigo:e.cliCodigo})};t.clienteService.eliminarCliente(a,t,i.a.KEY_EMPRESA_SELECT)}})},e.prototype.cambiarEstado=function(e,t){var o,a,r=this,n=!0;e==i.a.ACCION_INACTIVAR?(o=i.a.MSJ_PREGUNTA_INACTIVAR,a=i.a.MSJ_TITULO_INACTIVAR):(o=i.a.MSJ_PREGUNTA_ACTIVAR,a=i.a.MSJ_TITULO_ACTIVAR,n=!1);var s={title:a,texto:o+"<br>"+i.a.TAG_CLIENTE+": "+t.cliRazonSocial,type:i.a.SWAL_QUESTION,confirmButtonText:i.a.MSJ_SI_ACEPTAR,cancelButtonText:i.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(s).then(function(e){if(e){r.cargando=!0;var o={estado:n,invClientePK:new l.a({cliEmpresa:i.a.KEY_EMPRESA_SELECT,cliCodigo:t.cliCodigo})};r.clienteService.cambiarEstadoCliente(o,r,i.a.KEY_EMPRESA_SELECT)}})},e.prototype.despuesDeEliminarCliente=function(){var e=this.listadoClientes.slice();e.splice(this.listadoClientes.indexOf(this.invClienteSeleccionado),1),this.listadoClientes=e,this.actualizarFilas(),this.refreshGrid(),this.cargando=!1},e.prototype.despuesDecambiarEstadoCliente=function(e){e&&(this.invClienteSeleccionado.cliInactivo=!this.invClienteSeleccionado.cliInactivo,this.refreshGrid()),this.cargando=!1},e.prototype.cambiarActivar=function(e){this.activar=!e,this.enviarActivar.emit(e)},e.prototype.definirAtajosDeTeclado=function(){var e=this;this.atajoService.add(new v.Hotkey(i.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var e=document.getElementById("btnActivarListado");return e&&e.click(),!1})),this.atajoService.add(new v.Hotkey(i.a.ATAJO_EDITAR,function(){return e.clienteService.verificarPermiso(i.a.ACCION_EDITAR,e)&&e.activarAtajos&&e.emitirAccion(i.a.ACCION_EDITAR,e.invClienteSeleccionado),!1})),this.atajoService.add(new v.Hotkey(i.a.ATAJO_CONSULTAR,function(){return e.clienteService.verificarPermiso(i.a.ACCION_CONSULTAR,e)&&e.activarAtajos&&e.emitirAccion(i.a.ACCION_CONSULTAR,e.invClienteSeleccionado),!1})),this.atajoService.add(new v.Hotkey(i.a.ATAJO_ELIMINAR,function(){return e.clienteService.verificarPermiso(i.a.ACCION_ELIMINAR,e)&&e.activarAtajos&&e.eliminar(e.invClienteSeleccionado),!1})),this.atajoService.add(new v.Hotkey(i.a.ATAJO_IMPRIMIR,function(){var e=document.getElementById("btnImprimirCliente");return e&&e.click(),!1})),this.atajoService.add(new v.Hotkey(i.a.ATAJO_EXPORTAR,function(){var e=document.getElementById("btnExportarCliente");return e&&e.click(),!1}))},e.prototype.filtrarGlobalmente=function(e){e.filterGlobal(this.filtroGlobal.toUpperCase(),"contains")},e.prototype.listarClientes=function(){this.filtroGlobal="",this.cargando=!0,this.filasTiempo.iniciarContador(),this.clienteService.listarInvFunListadoClientesTO(this.parametros,this,i.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarInvFunListadoClientesTO=function(e){this.filasTiempo.finalizarContador(),this.isModal?e?0===e.length?this.activeModal.dismiss(null):1==e.length?this.enviarItem(e[0]):this.listadoClientes=e:this.enviarItem(null):this.listadoClientes=e||new Array,this.cargando=!1,this.refreshGrid(),this.filtrarRapido(),this.iniciarAgGrid()},e.prototype.imprimir=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var t={listClientes:this.listadoClientes};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteCliente",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoPDF("ListaClientes"+e.utilService.obtenerHorayFechaActual()+".pdf",t):e.toastr.warning(i.a.MSJ_ERROR_IMPRIMIR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.exportar=function(){var e=this;if(this.utilService.verificarPermiso(i.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var t={listClientes:this.listadoClientes,listClientesFiltrado:this.columnDefsExportar};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteCliente",t,this.empresaSeleccionada).then(function(t){t?e.utilService.descargarArchivoExcel(t._body,"ListaClientes_"):e.toastr.warning(i.a.MSJ_ERROR_EXPORTAR,i.a.TAG_AVISO),e.cargando=!1}).catch(function(t){return e.utilService.handleError(t,e)})}},e.prototype.abrirExportar=function(){this.exportarTodosEstado=!0,this.columnDefsExportar=this.clienteService.generarColumnasTodo()},e.prototype.exportarTodos=function(){this.abrirExportar(),this.exportar()},e.prototype.cambiarEstadoExportar=function(){this.utilService.cambiarEstadoExportar(this.columnDefsExportar,this.exportarTodosEstado)},e.prototype.cambiarEstadoItemExportar=function(){this.utilService.cambiarEstadoItemExportar(this.columnDefsExportar,this)},e.prototype.handleKeyboardEvent=function(e){13===e.keyCode&&this.listadoClientes.length&&this.enviarItem(this.invClienteSeleccionado)},e.prototype.enviarItem=function(e){this.activeModal.close(e)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.clienteService.generarColumnas(this.isModal),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:u.a,toolTip:h.a,inputEstado:m.a},this.components={}},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.actualizarFilas(),this.redimencionarColumnas(),this.seleccionarPrimerFila()},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.invClienteSeleccionado=t?t.data:null},e.prototype.filaSeleccionar=function(){this.enviarItem(this.invClienteSeleccionado)},e.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.autoSizeAll=function(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.gridColumnApi.autoSizeColumns(e)},e.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var e=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,e)}},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.invClienteSeleccionado=e,this.generarOpciones(this.invClienteSeleccionado),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){var e=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){e.actualizarFilas()},50)},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.ejecutarSpanAccion=function(e,t){this.enviarItem(t)},g([Object(a.Input)(),b("design:type",Object)],e.prototype,"parametros",void 0),g([Object(a.Input)(),b("design:type",n.a)],e.prototype,"empresaSeleccionada",void 0),g([Object(a.Input)(),b("design:type",Boolean)],e.prototype,"isModal",void 0),g([Object(a.Output)(),b("design:type",Object)],e.prototype,"enviarActivar",void 0),g([Object(a.Output)(),b("design:type",Object)],e.prototype,"enviarAccion",void 0),g([Object(a.ViewChild)("menuOpciones"),b("design:type",p.ContextMenu)],e.prototype,"menuOpciones",void 0),g([Object(a.HostListener)("document:keydown",["$event"]),b("design:type",Function),b("design:paramtypes",[KeyboardEvent]),b("design:returntype",void 0)],e.prototype,"handleKeyboardEvent",null),e=g([Object(a.Component)({selector:"app-cliente-listado",template:o("gN6P"),styles:[o("KE7K")]}),b("design:paramtypes",[s.a,r.a,c.a,d.a,A.a,f.b,v.HotkeysService])],e)}()},uuNs:function(e,t,o){"use strict";o.d(t,"a",function(){return m});var a=o("CcnG"),i=o("yccp"),r=o("mwBN"),n=o("nR5P"),s=o("L5HG"),c=o("Ungd"),l=o("SZbH"),d=o("z5Y/"),p=o("madF"),u=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,o,a,i){this.api=e,this.atajoService=t,this.utilService=o,this.archivoService=a,this.toastr=i}return e.prototype.definirAtajosDeTeclado=function(){this.atajoService.add(new i.Hotkey(r.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(e){var t=document.getElementById("btnActivarListado");return t&&t.click(),!1}))},e.prototype.generarColumnasConsulta=function(){var e=[];return e.push({headerName:"",field:"",headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,width:40,minWidth:40,cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_ESTADO,headerClass:"text-center",width:100,minWidth:80,maxWidth:80,cellClass:"text-center",cellRendererFramework:s.a,valueGetter:function(e){return"ANULADO"===e.data.vtaStatus?(e.value=r.a.ETIQUETA_ANULADO,e.value):"PENDIENTE"===e.data.vtaStatus?(e.value=r.a.ETIQUETA_PENDIENTE,e.value):""},cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_NUMERO_DOCUMENTO,field:"vtaDocumentoNumero",cellClass:"text-whitespace",width:150,minWidth:140,maxWidth:140,cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_FECHA,field:"vtaFecha",width:100,minWidth:80,maxWidth:80,cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_CLIENTE,field:"cliCodigo",width:70,maxWidth:70,minWidth:70,cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_NOMBRE,field:"cliNombre",width:300,minWidth:300,cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_TOTAL,field:"vtaTotal",valueFormatter:this.utilService.formatearA2Decimales,width:100,minWidth:100,cellClass:"text-right",cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_FORMA_COBRO,field:"vtaFormaPago",width:150,minWidth:120,cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_NUMERO,field:"vtaNumero",width:200,minWidth:150,maxWidth:150,cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_CONTABLE,field:"conNumero",width:220,minWidth:140,maxWidth:140,cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}}},{headerName:r.a.TAG_OPCIONES,headerClass:"text-md-center",field:"",width:r.a.WIDTH_OPCIONES,minWidth:r.a.WIDTH_OPCIONES,cellClassRules:{"fila-pendiente":function(e){return"PENDIENTE"===e.data.vtaStatus}},cellRenderer:"botonOpciones",cellClass:"text-md-center",headerComponent:"toolTip",headerComponentParams:{class:r.a.ICON_OPCIONES,tooltip:r.a.TAG_OPCIONES,text:""}}),e},e.prototype.exportarVentas=function(e){var t=this;e.cargando=!0;var o={listInvListaConsultaVentaTO:e.listadoVentas};this.archivoService.postExcel("todocompuWS/inventarioWebController/exportarReporteInvListaConsultaVentaTO",o,e.empresaSeleccionada).then(function(o){o?t.utilService.descargarArchivoExcel(o._body,"ListaVentas_"+t.utilService.obtenerHorayFechaActual()+".xlsx"):t.toastr.warning(r.a.MSJ_NO_DATA,r.a.TAG_AVISO),e.cargando=!1}).catch(function(o){return t.utilService.handleError(o,e)})},e.prototype.imprimirVentas=function(e){var t=this;e.cargando=!0;var o={listInvListaConsultaVentaTO:e.listadoVentas};this.archivoService.postPDF("todocompuWS/inventarioWebController/generarReporteVentas",o,e.empresaSeleccionada).then(function(o){o?t.utilService.descargarArchivoPDF("listaUnidadesMedida"+t.utilService.obtenerHorayFechaActual()+".pdf",o):t.toastr.warning(r.a.MSJ_NO_DATA),e.cargando=!1}).catch(function(o){return t.utilService.handleError(o,e)})},e.prototype.listarInvFunVentasTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/listarInvFunVentasTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvFunVentasTO(e.extraInfo):(t.despuesDeListarInvFunVentasTO([]),a.toastr.warning(e.operacionMensaje,r.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,a)})},e.prototype.generarColumnasListadoVentas=function(){return[{headerName:r.a.TAG_NUMERO,field:"vtaNumeroSistema",cellClass:"text-center",width:200,minWidth:150,pinned:"left"},{headerName:r.a.TAG_FECHA,field:"vtaFecha",width:100,minWidth:100,pinned:"left"},{headerName:r.a.TAG_N_IDENTIFICACION,field:"vtaIdNumero",width:150,minWidth:150,pinned:"left",headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:r.a.TAG_NUMERO_IDENTIFICACION,text:r.a.TAG_N_IDENTIFICACION}},{headerName:r.a.TAG_CLIENTE,field:"vtaCliente",width:300,minWidth:200,pinned:"left",cellClass:function(e){return e.data.vtaIdNumero?"":"tr-negrita"}},{headerName:r.a.TAG_DOCUMENTO,field:"vtaDocumentoNumero",width:200,minWidth:180},{headerName:r.a.TAG_CANTIDAD,field:"vtaCantidad",valueFormatter:this.utilService.formatearA2Decimales,width:150,minWidth:150,cellClass:function(e){return e.data.vtaIdNumero?"text-right":"tr-negrita text-right"}},{headerName:r.a.TAG_BASE_0,field:"vtaBase0",valueFormatter:this.utilService.formatearA2Decimales,width:150,minWidth:150,cellClass:function(e){return e.data.vtaIdNumero?"text-right":"tr-negrita text-right"}},{headerName:r.a.TAG_BASE_IMPONIBLE,field:"vtaBaseImponible",valueFormatter:this.utilService.formatearA2Decimales,width:150,minWidth:150,cellClass:function(e){return e.data.vtaIdNumero?"text-right":"tr-negrita text-right"}},{headerName:r.a.TAG_MONTO_IVA,field:"vtaMontoIva",valueFormatter:this.utilService.formatearA2Decimales,width:150,minWidth:150,cellClass:function(e){return e.data.vtaIdNumero?"text-right":"tr-negrita text-right"}},{headerName:r.a.TAG_TOTAL,field:"vtaTotal",valueFormatter:this.utilService.formatearA2Decimales,width:150,minWidth:150,cellClass:function(e){return e.data.vtaIdNumero?"text-right":"tr-negrita text-right"}},{headerName:r.a.TAG_FORMA_COBRO,field:"vtaFormaPago",width:180,minWidth:150},{headerName:r.a.TAG_OBSERVACIONES,field:"vtaObservaciones",width:300,minWidth:250},{headerName:r.a.TAG_OPCIONES,headerClass:"cell-header-center",field:"",width:r.a.WIDTH_OPCIONES,minWidth:r.a.WIDTH_OPCIONES,cellRendererFramework:p.a,cellClass:function(e){return e.data.vtaIdNumero?"text-center":"ag-hidden"},headerComponent:"toolTip",headerComponentParams:{class:r.a.ICON_OPCIONES,tooltip:r.a.TAG_OPCIONES,text:""}}]},e=u([Object(a.Injectable)({providedIn:"root"}),h("design:paramtypes",[d.a,i.HotkeysService,n.a,c.a,l.b])],e)}()},uwAu:function(e,t){e.exports='<div class="modal-primary" *ngIf="mostrarModal">\r\n  <div class="modal-header p-2">\r\n    <h4 class="modal-title">{{titulo}}</h4>\r\n    <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n\r\n  <div class="modal-body">\r\n    \x3c!--FEchas--\x3e\r\n    <div class="card m-0">\r\n      <div class="card-header" style="border-top: 1px solid #c8ced3">\r\n        <b>{{constantes.TAG_DATOS_GENERALES}}</b>\r\n        <div class="card-header-actions" *ngIf="!vistaPreliminar">\r\n          <button type="button" id="bntImprimirComprobanteRol" class="btn btn-sm btn-primary mr-1"\r\n            (click)="imprimirComprobante()" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n          </button>\r\n          <button type="button" id="bntCancelarComprobanteRol" class="btn btn-sm btn-default mr-1" (click)="cerrarModal()"\r\n            placement="top" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n            <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i> {{constantes.LABEL_CANCELAR}}\r\n          </button>\r\n        </div>\r\n        <div class="card-header-actions" *ngIf="vistaPreliminar">\r\n          <button type="button" id="bntAceptarComprobanteRol" class="btn btn-sm btn-primary mr-1"\r\n            (click)="cerrarModal()" placement="top" ngbTooltip="{{constantes.LABEL_ACEPTAR}}">\r\n            <i class="{{constantes.ICON_OK_SWAL}}" aria-hidden="true"></i> {{constantes.LABEL_ACEPTAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class="card-body row">\r\n        \x3c!--cedula--\x3e\r\n        <div class="form-group form-group-sm col-lg-6">\r\n          <label class="control-label">\r\n            <strong>{{constantes.TAG_CEDULA}}</strong>\r\n          </label>\r\n          <label class="form-control form-control-sm text-uppercase label-input">\r\n            {{itemListaRolTO.rhRol.rhEmpleado.rhEmpleadoPK.empId}}</label>\r\n        </div>\r\n        \x3c!--Apellidos y nombres--\x3e\r\n        <div class="form-group form-group-sm col-lg-6">\r\n          <label class="control-label">\r\n            <strong>{{constantes.TAG_APELLIDOS_Y_NOMBRES}}</strong>\r\n          </label>\r\n          <label class="form-control form-control-sm text-uppercase label-input ocultar-en-tabla">\r\n            {{itemListaRolTO.rhRol.rhEmpleado.empApellidos}}, {{itemListaRolTO.rhRol.rhEmpleado.empNombres}}</label>\r\n        </div>\r\n        \x3c!--Desde--\x3e\r\n        <div class="form-group form-group-sm col-lg-6">\r\n          <label class="control-label">\r\n            <strong>{{constantes.TAG_FECHA_DESDE}}</strong>\r\n          </label>\r\n          <label class="form-control form-control-sm text-uppercase label-input">\r\n            {{itemListaRolTO.rolDesdeTexto}}</label>\r\n        </div>\r\n        \x3c!--Hasta--\x3e\r\n        <div class="form-group form-group-sm col-lg-6">\r\n          <label class="control-label">\r\n            <strong>{{constantes.TAG_FECHA_HASTA}}</strong>\r\n          </label>\r\n          <label *ngIf="!vistaPreliminar" class="form-control form-control-sm text-uppercase label-input">\r\n            {{itemListaRolTO.rolHastaTexto}}</label>\r\n          <p-calendar *ngIf="vistaPreliminar" class="mousetrap calendar" [disabled]="!puedeEditar" name="rolHastaTexto"\r\n            [inputStyleClass]="isFechaValido == false ? \'has-error height-26\' : \'height-26\' " [(ngModel)]="itemListaRolTO.rolHastaTexto"\r\n            [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}" [required]="true"\r\n            (ngModelChange)="cambioLaFecha()" placeholder="DD/MM/YYYY"></p-calendar>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <br>\r\n\r\n    <div class="row">\r\n      \x3c!--Informacion--\x3e\r\n      <div class="{{columnas}}">\r\n        <div class="card m-0">\r\n          <div class="card-header">\r\n            <strong>{{constantes.TOAST_INFORMACION}}</strong>\r\n          </div>\r\n          <div class="card-body p-1">\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolDiasLaboradosReales > 0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_LABORADOS}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right"> {{itemListaRolTO.rhRol.rolDiasLaboradosReales| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolDiasFaltasReales > 0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_FALTAS}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right"> {{itemListaRolTO.rhRol.rolDiasFaltasReales| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolDiasDescansoReales > 0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_DESCANSO}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right"> {{itemListaRolTO.rhRol.rolDiasDescansoReales| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolDiasPagadosReales > 0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_PAGADOS}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolDiasPagadosReales| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.empSueldo >0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_SUELDO}}:</strong>\r\n              </label>\r\n              <div class="col-lg-7">\r\n                <div class="pull-right"> {{itemListaRolTO.rhRol.empSueldo| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="card-footer">\r\n            <strong> {{constantes.TAG_TOTAL_A_PAGAR}}:</strong>\r\n            <div class="pull-right">\r\n              <strong>{{itemListaRolTO.totalPagar| number:\'1.2-2\'}}</strong>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \x3c!--Ingresos--\x3e\r\n      <div class="{{columnas}}">\r\n        <div class="card m-0">\r\n          <div class="card-header">\r\n            <strong>{{constantes.TAG_INGRESOS}}</strong>\r\n          </div>\r\n          <div class="card-body p-1">\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolSaldoAnterior >0">\r\n              <label class=" col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_SALDO_ANTERIOR}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolSaldoAnterior| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolIngresos >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong> {{constantes.TAG_INGRESOS}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolIngresos| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolBonos >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_BONOS}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolBonos| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolBonosnd >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_BONOS_ND}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolBonosnd| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolBonoFijo >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_BONOS_FIJO}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolBonoFijo| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolBonoFijoNd >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_BONOS_FIJO_ND}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolBonoFijoNd| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolOtrosIngresos >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_OTROS_INGRESOS}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolOtrosIngresos| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolOtrosIngresosNd >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_OTROS_INGRESOS_ND}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolOtrosIngresosNd| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolHorasExtras >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_HORAS_EXTRAS_50_PORCENTAJE}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolHorasExtras| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolHorasExtras100 >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_HORAS_EXTRAS_100_PORCENTAJE}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolHorasExtras100| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolFondoReserva >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_FONDO_RESERVA}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolFondoReserva| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolXiii >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.RRHH_XIII_SUELDO}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolXiii| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolXiv >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.RRHH_XIV_SUELDO}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolXiv| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="card-footer">\r\n            <strong>{{constantes.TAG_TOTAL_INGRESOS}}:</strong>\r\n            <div class="pull-right">\r\n              <strong>{{itemListaRolTO.totalIngresos| number:\'1.2-2\'}}</strong>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \x3c!--Descuentos--\x3e\r\n      <div class="{{columnas}}" *ngIf="mostrarDescuentos">\r\n        <div class="card m-0">\r\n          <div class="card-header">\r\n            <strong> {{constantes.TAG_DESCUENTOS}}</strong>\r\n          </div>\r\n          <div class="card-body p-1">\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolAnticipos >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_ANTICIPOS}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolAnticipos| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolIess >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_IESS}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolIess| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolIessExtension >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_EXTENSION_COBERTURA_IESS}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolIessExtension| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolPrestamoQuirografario >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_PRESTAMOS_QUIROGRAFARIOS}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolPrestamoQuirografario| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolPrestamoHipotecario >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_PRESTAMOS_HIPOTECARIOS}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolPrestamoHipotecario| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rolValorPrestamos >0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_PRESTAMOS}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right">{{itemListaRolTO.rolValorPrestamos| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rolImpuestoRenta >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_IMPUESTO_RENTA}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rolImpuestoRenta| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolDescuentoPermisoMedico >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_PERMISO_MEDICO}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolDescuentoPermisoMedico| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rolDescFondoReserva >0">\r\n              <label class="col-lg-6 control-label">\r\n                <strong>{{constantes.TAG_FONDO_RESERVA}}:</strong>\r\n              </label>\r\n              <div class="col-lg-6">\r\n                <div class="pull-right">{{itemListaRolTO.rolDescFondoReserva| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="card-footer">\r\n            <strong> {{constantes.TAG_TOTAL_DESCUENTOS}}:</strong>\r\n            <div class="pull-right">\r\n              <strong>{{itemListaRolTO.totalDescuentos| number:\'1.2-2\'}}</strong>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \x3c!--Liquidacion--\x3e\r\n      <div class="{{columnas}}" *ngIf="mostrarBeneficios">\r\n        <div class="card m-0">\r\n          <div class="card-header">\r\n            <strong> {{constantes.TAG_LIQUIDACION}}</strong>\r\n          </div>\r\n          <div class="card-body p-1">\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolLiqXiii >0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.RRHH_XIII_SUELDO}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolLiqXiii| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolLiqXiv >0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.RRHH_XIV_SUELDO}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolLiqXiv| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolLiqVacaciones >0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_VACACIONES}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolLiqVacaciones| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolLiqSalarioDigno >0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_SALARIO_DIGNO}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolLiqSalarioDigno| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolLiqDesahucio >0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_DESAHUCIO}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolLiqDesahucio| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolLiqDesahucioIntempestivo >0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_DESAHUCIO_INTEM}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolLiqDesahucioIntempestivo| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group-sm row" *ngIf="itemListaRolTO.rhRol.rolLiqBonificacion >0">\r\n              <label class="col-lg-5 control-label">\r\n                <strong>{{constantes.TAG_BONIFICACION}}:</strong>\r\n              </label>\r\n              <div class=" col-lg-7">\r\n                <div class="pull-right">{{itemListaRolTO.rhRol.rolLiqBonificacion| number:\'1.2-2\'}}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="card-footer">\r\n            <strong>{{constantes.TAG_TOTAL_BENEFICIOS}}:</strong>\r\n            <div class="pull-right">\r\n              <strong>{{itemListaRolTO.totalLiquidacion| number:\'1.2-2\'}}</strong>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <br>\r\n\r\n    \x3c!--Tabla--\x3e\r\n    <div class="card mb-1" *ngIf="itemListaRolTO.detalle.length > 0">\r\n      <div class="card-header">\r\n        <strong>{{constantes.TAG_DETALLE}}</strong>\r\n      </div>\r\n      <div class="card-body m-0 p-0">\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 903px);min-height: 135px" class="ag-theme-balham"\r\n          [rowData]="itemListaRolTO.detalle" [columnDefs]="columnDefs" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          (gridReady)="onGridReady($event)" (gridColumnsChanged)="redimensionarColumnas()" (gridSizeChanged)="redimensionarColumnas()">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"v+UO":function(e,t){e.exports='<div class="modal-primary">\r\n  <div class="card m-0">\r\n    <div class="modal-header p-2">\r\n      <h4 class="modal-title">{{constantes.TAG_DETALLE_VENTA}}</h4>\r\n      <button type="button" class="close" style="color: white;" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n        <span>&times;</span>\r\n      </button>\r\n    </div>\r\n    <fieldset class="modal-body" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n      \x3c!-- Es el detalle con los valores finales, sin inputs --\x3e\r\n      <form *ngIf="tipo === \'valores\'">\r\n        <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n          <ng-template pTemplate="colgroup" *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col [style.width]="\'80px\'">\r\n              <col [style.width]="\'80px\'">\r\n              <col [style.width]="\'80px\'">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="header">\r\n            <tr class="text-center">\r\n              <th style="width:80px" pResizableColumn></th>\r\n              <th style="width:80px" pResizableColumn>0%</th>\r\n              <th style="width:80px" pResizableColumn>{{venta.vtaIvaVigente}}%</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate="footer">\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_PARCIALES}}</td>\r\n              <td>\r\n                <span class="f-r">{{venta.vtaBase0 | number : \'1.2-2\'}}</span>\r\n              </td>\r\n              <td>\r\n                <span class="f-r">{{venta.vtaBaseImponible | number : \'1.2-2\'}}</span>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_RECARGO}}</td>\r\n              <td>\r\n                <span class="f-r">{{venta.vtaRecargoBase0 | number : \'1.2-2\'}}</span>\r\n              </td>\r\n              <td>\r\n                <span class="f-r">{{venta.vtaRecargoBaseImponible | number : \'1.2-2\'}}</span>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_DESCUENTOS}}</td>\r\n              <td>\r\n                <span class="f-r">{{venta.vtaDescuentoBase0 | number : \'1.2-2\'}}</span>\r\n              </td>\r\n              <td>\r\n                <span class="f-r">{{venta.vtaDescuentoBaseImponible | number : \'1.2-2\'}}</span>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_IVA}}</td>\r\n              <td></td>\r\n              <td>\r\n                <span class="f-r">{{venta.vtaMontoIva}}</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate="summary">\r\n            <h1>{{venta.vtaTotal}}</h1>\r\n          </ng-template>\r\n        </p-table>\r\n      </form>\r\n      \x3c!-- Es el detalle con recargo y decuentos --\x3e\r\n      <form *ngIf="tipo === \'detalle\' && !vistaSoloParcial">\r\n        <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n          <ng-template pTemplate="colgroup" *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col [style.width]="\'80px\'">\r\n              <col [style.width]="\'80px\'">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="footer">\r\n            \x3c!--CC--\x3e\r\n            <tr *ngIf="tipoEmpresa !== \'COMERCIAL\'">\r\n              <td class="totales-tabla">{{constantes.TAG_CC}}</td>\r\n              <td class="p-0">\r\n                <select class="form-control form-control-sm mousetrap" name="pisNumero" [(ngModel)]="itemCopia.pisNumero">\r\n                  <option selected>{{constantes.TAG_SELECCIONE}}</option>\r\n                  <option [ngValue]="pis.pisNumero" *ngFor="let pis of listadoPiscinaTO"> {{pis.pisNombre}}\r\n                    ({{pis.pisNumero}})</option>\r\n                </select>\r\n              </td>\r\n            </tr>\r\n            \x3c!--Parcial--\x3e\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_PARCIAL}}</td>\r\n              <td class="p-0">\r\n                <div class="input-group">\r\n                  <input class="form-control form-control-sm text-right"  id="parcial" [disabled]="(!caja.permisoCambiarPrecio && item.catPrecioFijo && item.estadoPrecio) || (caja.permisoCambiarPrecio && !item.catPrecioFijo && item.estadoPrecio) || !item.estadoProducto"\r\n                    required [(ngModel)]="itemCopia.parcial" name="parcial" [appAutonumeric]="autonumericCambios"\r\n                    [appAutonumericValue]="itemCopia.parcial" value="{{itemCopia.parcial}}" (blur)="calcularParcialInput(itemCopia)"\r\n                    maxlength="20">\r\n                  <span class="input-group-btn">\r\n                    <button class="btn btn-primary btn-sm pb-0 pt-0 pl-1 pr-1" tabindex="-1" type="button" (click)="verDatosParcial()"\r\n                      title="{{constantes.MSJ_VER_DATOS_PARCIAL}}" [disabled]="(!caja.permisoCambiarPrecio && item.catPrecioFijo && item.estadoPrecio) || (caja.permisoCambiarPrecio && !item.catPrecioFijo && item.estadoPrecio) || !item.estadoProducto">\r\n                      <i class="{{constantes.ICON_CALCULADORA}}"></i>\r\n                    </button>\r\n                  </span>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            \x3c!--Recargo--\x3e\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_RECARGO}}</td>\r\n              <td class="p-0">\r\n                <input [disabled]="(!caja.permisoCambiarPrecio && item.catPrecioFijo && item.estadoPrecio) || (caja.permisoCambiarPrecio && !item.catPrecioFijo && item.estadoPrecio) || !item.estadoProducto || !caja.permisoAplicarDescuentos"\r\n                  class="form-control form-control-sm text-right" required [(ngModel)]="itemCopia.detPorcentajeRecargo"\r\n                  name="detPorcentajeRecargo" [appAutonumeric]="autonumericCambios" [appAutonumericValue]="itemCopia.detPorcentajeRecargo"\r\n                  value="{{itemCopia.detPorcentajeRecargo}}" (blur)="calculoValoresDescuentoRecargo(itemCopia)">\r\n              </td>\r\n            </tr>\r\n            \x3c!--Descuentos--\x3e\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_DESCUENTOS}}</td>\r\n              <td class="p-0">\r\n                <input [disabled]="(!caja.permisoCambiarPrecio && item.catPrecioFijo && item.estadoPrecio) || (caja.permisoCambiarPrecio && !item.catPrecioFijo && item.estadoPrecio) || !item.estadoProducto || !caja.permisoAplicarDescuentos"\r\n                  class="form-control form-control-sm text-right" required [(ngModel)]="itemCopia.detPorcentajeDescuento"\r\n                  name="detPorcentajeDescuento" [value]="itemCopia.detPorcentajeDescuento" [appAutonumeric]="autonumericCambios"\r\n                  [appAutonumericValue]="itemCopia.detPorcentajeDescuento" value="{{itemCopia.detPorcentajeDescuento}}"\r\n                  (blur)="calculoValoresDescuentoRecargo(itemCopia)">\r\n              </td>\r\n            </tr>\r\n            \x3c!--iva--\x3e\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_IVA}}</td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label text-right">{{itemCopia.vtIva | number :\r\n                  \'1.2-2\'}}</label>\r\n              </td>\r\n            </tr>\r\n            \x3c!--total--\x3e\r\n            <tr *ngIf="accion === constantes.ACCION_CREAR || accion === constantes.ACCION_MAYORIZAR">\r\n              <td class="totales-tabla">{{constantes.TAG_TOTAL}}</td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label text-right">{{itemCopia.total | number :\r\n                  \'1.2-2\'}}</label>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </form>\r\n      \x3c!-- Es el detalle para cambiar la cantidad y calcular laconversion de bultos --\x3e\r\n      <form *ngIf="tipo === \'cantidad\'">\r\n        <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n          <ng-template pTemplate="colgroup" *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col [style.width]="\'80px\'">\r\n              <col [style.width]="\'80px\'">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="footer">\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_PRODUCTO}} </td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label">{{item.proNombre}}</label>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_PRODUCTO_MEDIDA}} </td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label">{{item.proMedida}}</label>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_CONVERSION}} </td>\r\n              <td class="p-0">\r\n                <label class="form-control form-control-sm input-label text-right">{{item.conversion | number :\r\n                  \'1.2-2\'}}</label>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_BULTOS}} </td>\r\n              <td class="p-0">\r\n                <input name="cantidad" id="bultos" type="text" [(ngModel)]="conversion" class="form-control form-control-sm text-right"\r\n                  [appAutonumeric]="configAutonumeric" [value]="conversion" required>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </form>\r\n      \x3c!-- Es el modal que permite cambiar el precio con input --\x3e\r\n      <form *ngIf="tipo === \'precio\'">\r\n        <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n          <ng-template pTemplate="colgroup" *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col [style.width]="\'80px\'">\r\n              <col [style.width]="\'80px\'">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="footer">\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_PRECIO}} </td>\r\n              <td class="p-0">\r\n                <input name="precio" id=\'precio\' type="text" [(ngModel)]="valor" class="form-control text-right" [appAutonumeric]="configAutonumeric"\r\n                  [value]="valor" required>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </form>\r\n      \x3c!-- Es el detalle que permite cambiar el parcial dentro del modal de detalle con recargo y descuento --\x3e\r\n      <form *ngIf="vistaSoloParcial">\r\n        <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n          <ng-template pTemplate="colgroup" *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col [style.width]="\'80px\'">\r\n              <col [style.width]="\'80px\'">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="footer">\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_PARCIAL}} </td>\r\n              <td class="p-0">\r\n                <input name="valorParcial" class="form-control input-sm text-right" required [(ngModel)]="valor"\r\n                  [appAutonumeric]="configAutonumeric" [value]="valor">\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </form>\r\n      \x3c!-- El detalle para dar vuelto --\x3e\r\n      <form *ngIf="tipo === \'cambio\'">\r\n        <p-table [resizableColumns]="true" [scrollable]="true" [resizableColumns]="true">\r\n          <ng-template pTemplate="colgroup" *ngIf="isScreamMd">\r\n            <colgroup>\r\n              <col [style.width]="\'80px\'">\r\n              <col [style.width]="\'80px\'">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate="footer">\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_TOTAL_VENTA}} </td>\r\n              <td class="text-right p-0">\r\n                <label class="form-control form-control-sm label-input text-right">{{venta.vtaTotal}}</label>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_EFECTIVO}}</td>\r\n              <td class="text-right p-0">\r\n                <input type="text" class="form-control input-sm text-right" [appAutonumeric]="autonumericCambios"\r\n                  [appAutonumericValue]="venta.vtaPagadoEfectivo" value="{{venta.vtaPagadoEfectivo}}" (blur)="calcularCambio()"\r\n                  name="efectivo" [(ngModel)]="venta.vtaPagadoEfectivo" required />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_DINERO_ELECTRONICO}}</td>\r\n              <td class="text-right p-0">\r\n                <input [disabled]="!validarElectronico" type="text" class="form-control input-sm text-right" name="dineroElectronico"\r\n                  [appAutonumeric]="autonumericCambios" [appAutonumericValue]="venta.vtaPagadoDineroElectronico" value="{{venta.vtaPagadoDineroElectronico}}"\r\n                  (blur)="calcularCambio();" [(ngModel)]="venta.vtaPagadoDineroElectronico" required />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_TARJETA_CREDITO}}</td>\r\n              <td class="text-right p-0">\r\n                <input [disabled]="!validarElectronico" type="text" class="form-control input-sm text-right" name="tarjetaCredito"\r\n                  [appAutonumeric]="autonumericCambios" [appAutonumericValue]="venta.vtaPagadoTarjetaCredito" value="{{venta.vtaPagadoTarjetaCredito}}"\r\n                  (blur)="calcularCambio();" [(ngModel)]="venta.vtaPagadoTarjetaCredito" required />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_OTROS}}</td>\r\n              <td class="text-right p-0">\r\n                <input type="text" class="form-control input-sm text-right" (blur)="calcularDiferenciaMontoTotal();"\r\n                  name="otro" [appAutonumeric]="autonumericCambios" [appAutonumericValue]="venta.vtaPagadoOtro" value="{{venta.vtaPagadoOtro}}"\r\n                  [(ngModel)]="venta.vtaPagadoOtro" required />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class="totales-tabla">{{constantes.TAG_CAMBIO}}</td>\r\n              <td class="text-right p-0 pr-11">\r\n                <label style="font-size: 50px; ">{{cambio| number : \'1.2-2\'}}</label>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </form>\r\n    </fieldset>\r\n    <div class="col-md-12 modal-footer">\r\n      <div class="text-center">\r\n        \x3c!--CAMBIO--\x3e\r\n        <div class="btn-group" *ngIf="tipo === \'cambio\'">\r\n          <div class="btn-group">\r\n            <button type="button" class="btn btn-sm btn-primary" data-loading-text="Guardando..." [disabled]="!montoTotalPagoValido"\r\n              (click)="aceptarVenta(false)" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GENERADO}}" aria-hidden="true"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n            <button type="button" data-loading-text="..." [disabled]="!montoTotalPagoValido" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split"\r\n              data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item p-1" (click)="aceptarVenta(true)">{{constantes.TAG_PENDIENTE}}</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <button *ngIf="tipo === \'cambio\'" class="btn btn-sm btn-primary ml-2" type="button" title="{{constantes.ATAJO_CANCELAR}}"\r\n          (click)="activeModal.dismiss(\'Cross click\')">\r\n          <i class="{{constantes.ICON_CANCELAR}}"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n        \x3c!--CANTIDAD--\x3e\r\n        <button *ngIf="tipo === \'cantidad\'" class="btn btn-sm btn-primary" type="button" title="{{constantes.ATAJO_ACEPTAR}}"\r\n          (click)="calcularCantidadBultos(item)">\r\n          <i class="{{constantes.ICON_OK_SWAL}}"></i> {{constantes.LABEL_ACEPTAR}}</button>\r\n        \x3c!--VALORES--\x3e\r\n        <button *ngIf="tipo === \'valores\'" class="btn btn-sm btn-primary" type="button" title="{{constantes.ATAJO_ACEPTAR}}"\r\n          (click)="activeModal.dismiss(\'Cross click\')">\r\n          <i class="{{constantes.ICON_OK_SWAL}}"></i> {{constantes.LABEL_ACEPTAR}}</button>\r\n        \x3c!--PRECIO--\x3e\r\n        <button *ngIf="tipo === \'precio\'" class="btn btn-sm btn-primary" type="button" title="{{constantes.ATAJO_ACEPTAR}}"\r\n          (click)="accion === constantes.ACCION_CONSULTAR?activeModal.dismiss(\'Cross click\'):calcularPrecio(item)">\r\n          <i class="{{constantes.ICON_OK_SWAL}}"></i> {{constantes.LABEL_ACEPTAR}}</button>\r\n        \x3c!--DETALLE--\x3e\r\n        <button *ngIf="tipo === \'detalle\' && !vistaSoloParcial" class="btn btn-sm btn-primary" type="button" title="{{constantes.ATAJO_ACEPTAR}}"\r\n          (click)="validarDetalle(itemCopia)">\r\n          <i class="{{constantes.ICON_OK_SWAL}}"></i> {{constantes.LABEL_ACEPTAR}}</button>\r\n        \x3c!--VISTA DE PARCIAL--\x3e\r\n        <button *ngIf="vistaSoloParcial" class="btn btn-sm btn-primary mr-1" type="button" title="{{constantes.ATAJO_ACEPTAR}}"\r\n          (click)="calcularParcialModal(item)">\r\n          <i class="{{constantes.ICON_OK_SWAL}}"></i> {{constantes.LABEL_ACEPTAR}}</button>\r\n        <button *ngIf="vistaSoloParcial" class="btn btn-sm btn-primary mr-1" type="button" title="{{constantes.ATAJO_CANCELAR}}"\r\n          (click)="cancelarParcial()">\r\n          <i class="{{constantes.ICON_CANCELAR}}"></i> {{constantes.LABEL_CANCELAR}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},v32X:function(e,t){e.exports=""},v7uh:function(e,t){e.exports='<div class="modal-primary">\r\n  <div class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_IMPRIMIR_CHEQUE}} - {{empresaSeleccionada.empNombre}}</strong>\r\n    </span>\r\n    <div class="card-header-actions">\r\n      <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n        <span aria-hidden="true">&times;</span>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div class="row">\r\n    <div class="col-lg-12 col-md-12 col-sm-11">\r\n      <div class="card m-3">\r\n        <div class="card-header p-1">\r\n          <b> <span> <i class="{{constantes.ICON_IMPRIMIR}}"></i>\r\n              {{cuentaComboSeleccionado.banNombre}} ({{cuentaComboSeleccionado.ctaNumero}})\r\n            </span> </b>\r\n          <div class="card-header-actions">\r\n            <div class="btn-group">\r\n              <button type="button" class="btn btn-sm btn-primary" id="btnGuardarGrupoEmp" title="{{constantes.ATAJO_IMPRIMIR}}"\r\n                [disabled]="chequeSeleccionado.chqNumero===\'\' || compararFechas(\'>=\')" (click)="imprimirCheque()">\r\n                \x3c!--editarContactos(frmContactoDatos)--\x3e\r\n                <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n              </button>\r\n              <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown" id="dropdownMenuButton"\r\n                aria-haspopup="true" aria-expanded="false">\r\n                \x3c!--disabled="false"--\x3e\r\n              </button>\r\n              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">\r\n                <a [ngClass]="{\'btn disabled\' : chequeSeleccionado.chqNumero===\'\' || compararFechas(\'>=\'), \r\n                  \'dropdown-item\':chequeSeleccionado.chqNumero!==\'\' || compararFechas(\'<\')}"\r\n                  (click)="imprimirChequeCruzado()">{{constantes.TAG_IMPRIMIR_CHEQUE_CRUZADO}}</a>\r\n                \x3c!--(click)=""--\x3e\r\n                <a class="dropdown-item" (click)="imprimirNoCheque()">{{constantes.TAG_NO_CHEQUE}}</a>\r\n              </div>\r\n            </div>&nbsp;\r\n            <button class="btn btn-sm btn-default mr-1" type="button" (click)="activeModal.dismiss(\'Cross click\')"\r\n              title="{{constantes.ATAJO_CANCELAR}}">\r\n              <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline">\r\n                {{constantes.LABEL_CANCELAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class="card-body pb-0 pt-1">\r\n          <form #frmCheque="ngForm" autocomplete="off">\r\n            <div class="form-group form-group-sm row">\r\n              <div class="offset-md-8 col-md-4">\r\n                <label class="control-label">\r\n                  <strong>{{constantes.TAG_CHEQUE_NUM}} {{chequeNoImpresion.chqNumero}}</strong>\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div class="form-group form-group-sm row">\r\n              <div class="col-md-8">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_PAGUESE_ORDEN_DE}}</b>\r\n                </label>\r\n                <input name="chqCuentaDetalle" [(ngModel)]="chequeNoImpresion.chqCuentaDetalle" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                  class="form-control form-control-sm mousetrap text-uppercase" appUppercase required [appFocus]="true"\r\n                  id="chqCuentaDetalle">\r\n              </div>\r\n              <div class="col-md-4">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_DOLAR}} </b>\r\n                </label>\r\n                <label class="form-control form-control-sm text-uppercase label-input"> {{chequeNoImpresion.chqValor}}</label>\r\n              </div>\r\n            </div>\r\n            <div class="form-group form-group-sm row">\r\n              <div class="col-md-8">\r\n                <label class="control-label">\r\n                  <b>{{chequeNoImpresion.valorChequeLetras}} {{constantes.TAG_DOLARES}}</b>\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div class="form-group form-group-sm row">\r\n              <div class="col-md-8">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_CIUDAD}}</b>\r\n                </label>\r\n                <label class="form-control form-control-sm text-uppercase label-input"> {{empresaSeleccionada.empCiudad}}</label>\r\n              </div>\r\n              <div class="col-md-4">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_FECHA}}</b>\r\n                </label>\r\n                <p-calendar inputId="fechaActual" class="mousetrap" name="fechaActual" [(ngModel)]="fechaActual"\r\n                  dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true" [required]="true"></p-calendar>\r\n              </div>\r\n            </div>\r\n            <div class="form-group form-group-sm row">\r\n              <div class="col-md-12">\r\n                <label class="control-label">\r\n                  <b>{{constantes.TAG_CTA}} {{chequeNoImpresion.chqCuentaCodigo}}</b>\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div class="form-group form-group-sm row">\r\n              <div class="col-md-12">\r\n                <label class="control-label">\r\n                  <b>{{empresaSeleccionada.empNombre}}</b>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},vEe0:function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{constantes.TAG_PRODUCTO_PRESENTACION_UNIDAD}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}</strong>\r\n    </span>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrarProductoPresentacion()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div [ngClass]="{\'modal-body\': esModal}">\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card m-0 mb-2">\r\n          <div class="card-header p-1">\r\n            <i class="{{classTitulo}}"></i>\r\n            <b>{{frmTitulo}}</b>\r\n            <div class="card-header-actions" *ngIf="vistaFormulario">\r\n              <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardarPresentacionMedida" type="button"\r\n                (click)="guardarProductoPresentacionUnidad(frnProductoPresentacionUnidad)" class="btn btn-sm btn-primary mr-1"\r\n                [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardarPresentacionMedida" type="button"\r\n                (click)="actualizarProductoPresentacionUnidad(frnProductoPresentacionUnidad)" class="btn btn-sm btn-primary mr-1"\r\n                [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button (click)="resetearFormulario()" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n                title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            <form #frnProductoPresentacionUnidad="ngForm" autocomplete="off">\r\n              <div *ngIf="vistaFormulario">\r\n                <div class="form-group form-group-sm has-feedback">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                  </label>\r\n                  <p *ngIf="!(accion===constantes.ACCION_CREAR)" class="form-control input-sm">{{invProductoPresentacionUnidadesTO.presuCodigo}}</p>\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" type="text" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                    name="presuCodigo" [(ngModel)]="invProductoPresentacionUnidadesTO.presuCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="30" appUppercase>\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" triggers="mouseenter:mouseleave"\r\n                    container="body"></span>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                  </label>\r\n                  <input [appFocus]="accion===constantes.ACCION_EDITAR" name="presuDetalle" [(ngModel)]="invProductoPresentacionUnidadesTO.presuDetalle"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" pattern="{{constantes.PATTERN_SOLO_LETRAS}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="1000" appUppercase>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_ABREVIADO}}</strong>\r\n                  </label>\r\n                  <input name="presuAbreviado" [(ngModel)]="invProductoPresentacionUnidadesTO.presuAbreviado"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" pattern="{{constantes.PATTERN_SOLO_LETRAS}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="1000" appUppercase>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div class="card-footer" *ngIf="!vistaFormulario">\r\n            <div class="text-right">\r\n              <button id="btnBuscarPresentacionMedida" type="button" class="btn btn-sm btn-primary mr-1" (click)="buscarProductoPresentacionUnidad()"\r\n                [disabled]="cargando" title="{{constantes.ATAJO_BUSCAR}}">\r\n                <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> &nbsp; {{constantes.LABEL_BUSCAR}}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div [ngClass]="{\'col-lg-8 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n        <div class="card m-0" *ngIf="listadoInvProductoPresentacionUnidadesComboListadoTO?.length > 0 && !vistaFormulario">\r\n          <div class="card-header p-1">\r\n            <b>{{constantes.INVENTARIO_PRODUCTO_PRESENTACION_UNIDAD_LISTADO}}</b>\r\n            <div class="card-header-actions">\r\n              <div class="btn-group d-lg-none">\r\n                <button id="btnNuevoPresentacionMedida" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoProductoPresentacionUnidad()"\r\n                  placement="top" title="{{constantes.ATAJO_NUEVO}}" ngbTooltip="{{constantes.LABEL_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirPresentacionMedida" (click)="imprimirPresentacionMedida()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                  <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarPresentacionMedida" (click)="exportarPresentacionMedida()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                  <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n                </button>\r\n              </div>\r\n              <div class="btn-group d-none d-lg-block">\r\n                <button id="btnNuevoPresentacionMedida" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoProductoPresentacionUnidad()"\r\n                  placement="top" title="{{constantes.ATAJO_NUEVO}}" ngbTooltip="{{constantes.LABEL_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirPresentacionMedida" (click)="imprimirPresentacionMedida()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                  <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarPresentacionMedida" (click)="exportarPresentacionMedida()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                  <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="card-body p-0">\r\n            \x3c!--La primera linea es para la seleccion--\x3e\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group p-1">\r\n                  <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                    size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                    size="100">\r\n                  <div class="input-group-append">\r\n                    <span class="input-group-text">\r\n                      <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div class="float-right pr-1">\r\n                  <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                    maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--listado de producto presentacion medida--\x3e\r\n            <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 220px);" class="ag-theme-balham"\r\n              [rowData]="listadoInvProductoPresentacionUnidadesComboListadoTO" [columnDefs]="columnDefsSelected"\r\n              [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true"\r\n              [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n              (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)" (rowSelected)="unidadSeleccionada = $event.node.data"\r\n              (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()"\r\n              (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)">\r\n            </ag-grid-angular>\r\n            \x3c!--end listado de presentacion medida--\x3e\r\n            <p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},vGAI:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.medEmpresa=null,this.medCodigo=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.medEmpresa=e.medEmpresa?e.medEmpresa:this.medEmpresa,this.medCodigo=e.medCodigo?e.medCodigo:this.medCodigo},e}()},vrQg:function(e,t,o){"use strict";o.d(t,"a",function(){return O});var a=o("CcnG"),i=o("eUd/"),r=o("SZbH"),n=o("nR5P"),s=o("FkBQ"),c=o("CEfs"),l=o("8fiX"),d=o("q6bj"),p=o("NOfB"),u=o("z5Y/"),h=o("iL+s"),m=o("yccp"),C=o("ZYCi"),v=o("mwBN"),A=o("zkCp"),f=o("EnEm"),g=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t,o,a,i,r,n,c){this.route=e,this.api=t,this.activeModal=o,this.toastr=a,this.utilService=i,this.filasService=r,this.atajoService=n,this.vendedorService=c,this.esModal=!1,this.empresaSeleccionada=new l.a,this.listaEmpresas=Array(),this.invVendedorTO=new p.a,this.vistaFormulario=!1,this.accion=null,this.listaInvVendedorComboListadoTO=Array(),this.vendedorSeleccionado=new s.a,this.vendedorNuevoSeleccionado=new s.a,this.isScreamMd=!0,this.filtroGlobal="",this.filasTiempo=new f.a,this.columnDefs=[],this.columnDefsSelected=[],this.constantes=v.a,this.frmTitulo=v.a.TITULO_FILTROS,this.classTitulo=v.a.ICON_FILTRAR,this.inicializarAtajos()}return e.prototype.ngOnInit=function(){this.empresaModal?(this.esModal=!0,this.activar=!0,this.listaEmpresas.push(this.empresaModal),this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),v.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSeleccionada(),this.buscarVendedores()):(this.listaEmpresas=this.route.snapshot.data.vendedor,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),v.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSeleccionada())),this.iniciarAgGrid(),this.isScreamMd=!(window.innerWidth<=576)},e.prototype.inicializarAtajos=function(){var e=this;this.atajoService.add(new m.Hotkey(v.a.ATAJO_ESC,function(){return e.cerrarVendedor(),!1})),this.atajoService.add(new m.Hotkey(v.a.ATAJO_BUSCAR,function(e){var t=document.getElementById("btnBuscarVendedor");return t&&t.click(),!1})),this.atajoService.add(new m.Hotkey(v.a.ATAJO_IMPRIMIR,function(e){var t=document.getElementById("btnImprimirVendedor");return t&&t.click(),!1})),this.atajoService.add(new m.Hotkey(v.a.ATAJO_EXPORTAR,function(e){var t=document.getElementById("btnExportarVendedor");return t&&t.click(),!1})),this.atajoService.add(new m.Hotkey(v.a.ATAJO_NUEVO,function(e){var t=document.getElementById("btnNuevoVendedor");return t&&t.click(),!1})),this.atajoService.add(new m.Hotkey(v.a.ATAJO_EDITAR,function(t){return!e.vistaFormulario&&e.listaInvVendedorComboListadoTO.length>0&&e.editarVendedor(e.vendedorSeleccionado),!1})),this.atajoService.add(new m.Hotkey(v.a.ATAJO_ELIMINAR,function(t){return!e.vistaFormulario&&e.listaInvVendedorComboListadoTO.length>0&&e.eliminarVendedor(e.vendedorSeleccionado),!1})),this.atajoService.add(new m.Hotkey(v.a.ATAJO_GUARDAR,function(t){if(e.vistaFormulario){var o=document.getElementById("btnGuardarVendedor");return o&&o.click(),!1}})),this.atajoService.add(new m.Hotkey(v.a.ATAJO_CANCELAR,function(t){return e.vistaFormulario&&e.resetearFormulario(),!1}))},e.prototype.cambiarEmpresaSeleccionada=function(){v.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.invVendedorTO=new p.a,this.limpiarListado(),this.vistaFormulario=!1,this.activar=!0,this.accion=null},e.prototype.buscarVendedores=function(){this.cargando=!0,this.accion=null,this.limpiarListado();var e={empresa:this.empresaSeleccionada.empCodigo};this.vendedorService.listarComboinvListaVendedorTOs(this,e,v.a.KEY_EMPRESA_SELECT)},e.prototype.despuesDeListarVendedorTOs=function(e){this.listaInvVendedorComboListadoTO=e||[],this.cargando=!1,0==this.listaInvVendedorComboListadoTO.length&&this.nuevoVendedor()},e.prototype.limpiarListado=function(){this.listaInvVendedorComboListadoTO=[],this.actualizarFilas()},e.prototype.generarOpciones=function(){var e=this,t=this.utilService.verificarPermiso(v.a.ACCION_EDITAR,this)&&!this.vistaFormulario,o=this.utilService.verificarPermiso(v.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario;this.opciones=[{label:v.a.ACCION_EDITAR,icon:v.a.ICON_EDITAR,disabled:!t,command:function(o){return t?e.editarVendedor(e.vendedorSeleccionado):null}},{label:v.a.ACCION_ELIMINAR,icon:v.a.ICON_ELIMINAR,disabled:!o,command:function(t){return o?e.eliminarVendedor(e.vendedorSeleccionado):null}}]},e.prototype.nuevoVendedor=function(){this.utilService.verificarPermiso(v.a.ACCION_CREAR,this,!0)&&(this.cargando=!0,this.accion=v.a.ACCION_CREAR,this.frmTitulo=v.a.TITULO_FORM_NUEVO_VENDEDOR,this.classTitulo=v.a.ICON_CREAR,this.invVendedorTO=new p.a,this.vistaFormulario=!0,this.cargando=!1,this.activar=!1)},e.prototype.guardarVendedor=function(e){var t=this;if(this.utilService.verificarPermiso(v.a.ACCION_CREAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.vendedorService.formatearInvVendedor(this.invVendedorTO,this),i={invVendedorTO:a,accion:"I"};this.api.post("todocompuWS/inventarioWebController/accionInvVendedorTO",i,v.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.vendedorNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"I"),t.toastr.success(e.operacionMensaje,v.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,v.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.warning(v.a.MSJ_CAMPOS_INVALIDOS,v.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.resetearFormulario=function(){this.activar=!0,this.frmTitulo=v.a.TITULO_FILTROS,this.classTitulo=v.a.ICON_FILTRAR,this.invVendedorTO=new p.a,this.vistaFormulario=!1,this.accion=null},e.prototype.editarVendedor=function(e){this.utilService.verificarPermiso(v.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.accion=v.a.ACCION_EDITAR,this.frmTitulo=v.a.TITULO_FORM_EDITAR_VENDEDOR,this.classTitulo=v.a.ICON_EDITAR,this.invVendedorTO=new p.a(e),this.vistaFormulario=!0,this.cargando=!1,this.activar=!1)},e.prototype.actualizarVendedor=function(e){var t=this;if(this.utilService.verificarPermiso(v.a.ACCION_EDITAR,this,!0)){this.cargando=!0;var o=this.utilService.establecerFormularioTocado(e);if(e&&e.valid&&o){var a=this.vendedorService.formatearInvVendedor(this.invVendedorTO,this),i={invVendedorTO:a,accion:"M"};this.api.post("todocompuWS/inventarioWebController/accionInvVendedorTO",i,v.a.KEY_EMPRESA_SELECT).then(function(e){e&&e.extraInfo?(t.vendedorNuevoSeleccionado=a,t.resetearFormulario(),t.refrescarTabla(a,"U"),t.toastr.success(e.operacionMensaje,v.a.TOAST_CORRECTO)):t.toastr.warning(e.operacionMensaje,v.a.TOAST_ERROR),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}else this.toastr.warning(v.a.MSJ_CAMPOS_INVALIDOS,v.a.MSJ_TITULO_INVALIDOS),this.cargando=!1}},e.prototype.eliminarVendedor=function(e){var t=this;if(this.utilService.verificarPermiso(v.a.ACCION_ELIMINAR,this,!0)){var o={title:v.a.MSJ_TITULO_ELIMINAR,texto:v.a.MSJ_PREGUNTA_ELIMINAR+"<br>"+v.a.TAG_CODIGO+": "+e.vendCodigo,type:v.a.SWAL_QUESTION,confirmButtonText:v.a.MSJ_SI_ACEPTAR,cancelButtonText:v.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(o).then(function(o){if(o){t.cargando=!0;var a={invVendedorPK:new h.a({vendEmpresa:e.vendEmpresa,vendCodigo:e.vendCodigo})};t.api.post("todocompuWS/inventarioWebController/eliminarInvVendedor",a,v.a.KEY_EMPRESA_SELECT).then(function(o){o&&o.extraInfo?(t.refrescarTabla(e,"D"),t.toastr.success(o.operacionMensaje,v.a.TOAST_CORRECTO),0==t.listaInvVendedorComboListadoTO.length&&t.nuevoVendedor()):t.toastr.warning(o.operacionMensaje,v.a.TOAST_ADVERTENCIA),t.cargando=!1}).catch(function(e){return t.utilService.handleError(e,t)})}})}},e.prototype.cerrarVendedor=function(){this.vendedorNuevoSeleccionado=this.vendedorNuevoSeleccionado&&""==this.vendedorNuevoSeleccionado.vendCodigo?null:this.vendedorNuevoSeleccionado;var e={vendedorSeleccionado:this.vendedorNuevoSeleccionado};this.activeModal.close(e)},e.prototype.iniciarAgGrid=function(){this.columnDefs=this.vendedorService.generarColumnas(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.noDatos=v.a.MSJ_NO_HAY_DATOS},e.prototype.onGridReady=function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.gridApi.sizeColumnsToFit(),this.seleccionarFila(0)},e.prototype.seleccionarFila=function(e){if(this.gridApi){var t=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(e,t)}},e.prototype.filaFocused=function(e){var t=this.gridApi?this.gridApi.getRowNode(e.rowIndex):null;this.vendedorSeleccionado=t?t.data:null},e.prototype.mostrarOpciones=function(e,t){this.mostrarContextMenu(t,e)},e.prototype.mostrarContextMenu=function(e,t){this.vendedorSeleccionado=e,this.generarOpciones(),this.menuOpciones.show(t),t.stopPropagation()},e.prototype.refreshGrid=function(){this.gridApi&&this.gridApi.refreshCells()},e.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},e.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},e.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},e.prototype.refrescarTabla=function(e,t){switch(t){case"I":if(this.listaInvVendedorComboListadoTO.length>0)(a=this.listaInvVendedorComboListadoTO.slice()).unshift(e),this.listaInvVendedorComboListadoTO=a,this.seleccionarFila(0);break;case"U":var o=this.listaInvVendedorComboListadoTO.findIndex(function(t){return t.vendCodigo===e.vendCodigo});(a=this.listaInvVendedorComboListadoTO.slice())[o]=e,this.listaInvVendedorComboListadoTO=a,this.seleccionarFila(o);break;case"D":var a;o=this.listaInvVendedorComboListadoTO.findIndex(function(t){return t.vendCodigo===e.vendCodigo});(a=this.listaInvVendedorComboListadoTO.slice()).splice(o,1),this.listaInvVendedorComboListadoTO=a,this.listaInvVendedorComboListadoTO.length>0&&this.seleccionarFila(0===o?0:o-1)}this.activar=!0},g([Object(a.Input)(),b("design:type",l.a)],e.prototype,"empresaModal",void 0),g([Object(a.Input)(),b("design:type",String)],e.prototype,"razonSocial",void 0),g([Object(a.Input)(),b("design:type",Object)],e.prototype,"vendedorSeleccionado",void 0),g([Object(a.ViewChild)("menuOpciones"),b("design:type",A.ContextMenu)],e.prototype,"menuOpciones",void 0),e=g([Object(a.Component)({selector:"app-vendedor",template:o("OiCm"),styles:[o("dsX2")]}),b("design:paramtypes",[C.ActivatedRoute,u.a,i.a,r.b,n.a,c.a,m.HotkeysService,d.a])],e)}()},"wFx/":function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong> {{constantes.TAG_PRODUCTO_TIPO}} - {{empresaSeleccionada.empNombre}}\r\n        ({{empresaSeleccionada.empCodigo}}) {{razonSocial}}</strong>\r\n    </span>\r\n    <h4 class="modal-title"></h4>\r\n    <button type="button" class="close" aria-label="Cerrar" (click)="cerrarTipo()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div [ngClass]="{\'modal-body\': esModal}">\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card m-0 mb-2">\r\n          <div class="card-header p-1">\r\n            <i class="{{classTitulo}}"></i>\r\n            <b>{{frmTitulo}}</b>\r\n            <div class="card-header-actions" *ngIf="vistaFormulario">\r\n              <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardarTipoProducto" type="button" (click)="guardarProductoTipo(frmProductoMarca)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardarTipoProducto" type="button" (click)="actualizarProductoTipo(frmProductoMarca)"\r\n                class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button (click)="resetearFormulario()" type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando"\r\n                title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_CANCELAR}}"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            <form #frmProductoMarca="ngForm" autocomplete="off">\r\n              <div *ngIf="vistaFormulario">\r\n                <div class="form-group form-group-sm has-feedback">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                  </label>\r\n                  <p *ngIf="!(accion===constantes.ACCION_CREAR)" class="form-control input-sm">{{invProductoTipoTO.tipCodigo}}</p>\r\n                  <input *ngIf="accion === constantes.ACCION_CREAR" type="text" [appFocus]="accion === constantes.ACCION_CREAR"\r\n                    name="tipCodigo" [(ngModel)]="invProductoTipoTO.tipCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                    pattern="{{constantes.PATTERN_CODIGO}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="30" appUppercase>\r\n                  <span *ngIf="accion === constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback"\r\n                    placement="right" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" triggers="mouseenter:mouseleave"\r\n                    container="body"></span>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                  </label>\r\n                  <input [appFocus]="accion===constantes.ACCION_EDITAR" name="tipDetalle" [(ngModel)]="invProductoTipoTO.tipDetalle"\r\n                    placeholder="{{constantes.TAG_OBLIGATORIO}}" pattern="{{constantes.PATTERN_SOLO_LETRAS}}" class="form-control input-sm mousetrap text-uppercase"\r\n                    required minlength="1" maxlength="500" appUppercase>\r\n                </div>\r\n                <div class="form-group form-group-sm">\r\n                  <label class="control-label  ">\r\n                    <strong>{{constantes.TAG_TIPO}}</strong>\r\n                  </label>\r\n                  <select [(ngModel)]="invProductoTipoTO.tipTipo" class="form-control input-sm mousetrap" name="tipTipo"\r\n                    required>\r\n                    <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n                    <option [ngValue]="tipo" *ngFor="let tipo of listaTipoProducto">{{tipo}}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n        <div class="card m-0" *ngIf="listadoInvProductoTipoComboTO?.length > 0 && !vistaFormulario">\r\n          <div class="card-header p-1">\r\n            <strong>{{constantes.INVENTARIO_PRODUCTO_TIPO_LISTADO}}</strong>\r\n            <div class="card-header-actions">\r\n              <div class="btn-group d-lg-none">\r\n                <button id="btnNuevoTipoProducto" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoProductoTipo()"\r\n                  title="{{constantes.ATAJO_NUEVO}}" placement="top" ngbTooltip="{{constantes.LABEL_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirTipoProducto" (click)="imprimirTipoProducto()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                  <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarTipoProducto" (click)="exportarTipoProducto()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                  <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n                </button>\r\n              </div>\r\n              <div class="btn-group d-none d-lg-block">\r\n                <button id="btnNuevoTipoProducto" class="btn btn-sm btn-primary mr-1" type="button" (click)="nuevoProductoTipo()"\r\n                  title="{{constantes.ATAJO_NUEVO}}" placement="top" ngbTooltip="{{constantes.LABEL_NUEVO}}">\r\n                  <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirTipoProducto" (click)="imprimirTipoProducto()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n                  <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n                </button>\r\n                <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarTipoProducto" (click)="exportarTipoProducto()"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n                  <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="card-body p-0">\r\n            <div class="row">\r\n              <div class="col-sm-5 col-md-6">\r\n                <div class="input-group p-1">\r\n                  <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                    size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                    size="100">\r\n                  <div class="input-group-append">\r\n                    <span class="input-group-text">\r\n                      <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-7 col-md-6">\r\n                <div class="float-right pr-1">\r\n                  <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                    maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--listado de tipo producto--\x3e\r\n            <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n              [rowData]="listadoInvProductoTipoComboTO" [columnDefs]="columnDefsSelected" [enableSorting]="true"\r\n              [multiSortKey]="multiSortKey" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n              [context]="context" [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()"\r\n              (gridReady)="onGridReady($event)" (rowSelected)="tipoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n              (contextmenu)="!this.isModal?$event.preventDefault():null" (filterChanged)="actualizarFilas()"\r\n              (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)">\r\n            </ag-grid-angular>\r\n            \x3c!--end listado de tipo producto--\x3e\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},wK6v:function(e,t){e.exports='<div [ngClass]="{\'modal-primary\': esModal}">\r\n  <div *ngIf="esModal" class="modal-header p-2">\r\n    <span class="modal-title">\r\n      <strong>{{empresaSeleccionada.empNombre}} ({{empresaSeleccionada.empCodigo}})</strong>\r\n    </span>\r\n    <button type="button" class="close" style="color: white;" aria-label="close" (click)="cerrarModal()">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div [ngClass]="{\'modal-body\': esModal}">\r\n    <div class="row">\r\n      <div [ngClass]="{\'sr-only\':activar}" class="col-lg-12 col-md-12 col-sm-11">\r\n        <div class="card m-0 mb-2">\r\n          <div class="card-header p-1">\r\n            <b>\r\n              <i class="{{constantes.ICON_EDITAR}}"></i>\r\n              <strong> {{constantes.INVENTARIO_CAMBIAR_FECHA_RECEPCION_COMPRAS}}</strong>\r\n            </b>\r\n            <div class="card-header-actions">\r\n              <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardar" (click)="insertar(frmCambiarFecha)"\r\n                title="{{constantes.ATAJO_GUARDAR}}">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              <button class="btn btn-sm btn-default mr-1" type="button" (click)="cerrarModal();" title="{{constantes.ATAJO_CANCELAR}}">\r\n                <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class="card-body pb-0 pt-1">\r\n            \x3c!--FORMULARIO OPERACIONES--\x3e\r\n            <form #frmCambiarFecha=\'ngForm\' autocomplete="off">\r\n              <div class="row">\r\n                <div class="form-group form-group-sm col-lg-6">\r\n                  \x3c!--PERIODO--\x3e\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_PERIODO}}</b>\r\n                  </label>\r\n                  <label class="form-control form-control-sm text-uppercase label-input">\r\n                    {{datosCambiarFecha.compPeriodo}}</label>\r\n                </div>\r\n                \x3c!--MOTIVO--\x3e\r\n                <div class="form-group form-group-sm col-lg-6">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_MOTIVO}}</b>\r\n                  </label>\r\n                  <label class="form-control form-control-sm text-uppercase label-input">\r\n                    {{datosCambiarFecha.compMotivo}}</label>\r\n                </div>\r\n                \x3c!--NUMERO--\x3e\r\n                <div class="form-group form-group-sm col-lg-6">\r\n                  <label class="control-label">\r\n                    <b>{{constantes.TAG_NUMERO}}</b>\r\n                  </label>\r\n                  <label class="form-control form-control-sm text-uppercase label-input">\r\n                    {{datosCambiarFecha.compNumero}}</label>\r\n                </div>\r\n                \x3c!--FECHA--\x3e\r\n                <div class="form-group form-group-sm col-lg-6">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_FECHA}}</strong>\r\n                  </label>\r\n                  <p-calendar name="fecha" [(ngModel)]="fecha" [showIcon]="true" [locale]="es" dateFormat="{{constantes.CALENDAR_FORMATO}}"\r\n                    [required]="true" [maxDate]="fechaActual" [appMaxDate]="fechaActual"></p-calendar>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},wSGy:function(e,t){e.exports=""},wZkA:function(e,t){e.exports='<div class="modal-primary" *ngIf="listaResultado?.length>0">\r\n  <div class="modal-header p-2">\r\n    <h4 class="modal-title">{{constantes.CONTABILIDAD_PLAN_CUENTAS_LISTADO}}</h4>\r\n    <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class="modal-body p-0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n            size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n      [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n      [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n      [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n      (keydown)="verificarTeclas($event)" (cellDoubleClicked)="onCellDoubleClicked($event)" (filterChanged)="actualizarFilas()"\r\n      (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()">\r\n    </ag-grid-angular>\r\n  </div>\r\n</div>'},xTDQ:function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5" *ngIf="!isModal">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{classIcon}}"></i><b>{{tituloForm}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        \x3c!--FORMULARIO EMPRESA--\x3e\r\n        <form #frmBodega=\'ngForm\' name="frmBodega">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer" *ngIf="mostrarNuevo">\r\n        <div class="text-right">\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscar" class="btn btn-sm btn-primary" (click)="listaBodegasTO(false)" title="{{constantes.ATAJO_BUSCAR}}"\r\n              *ngIf="!vistaFormulario">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              *ngIf="!vistaFormulario">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="listaBodegasTO(true)"> {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          <button type="button" class="btn btn-sm btn-primary" id="btnNuevo" (click)="operacionesBodega(constantes.ACCION_CREAR)"\r\n            title="{{constantes.ATAJO_NUEVO}}" *ngIf="!vistaFormulario">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_NUEVO}}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar || isModal}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="modal-header p-2" *ngIf="isModal">\r\n        <h4 class="modal-title">{{constantes.INVENTARIO_BODEGAS}}</h4>\r\n        <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n          <span aria-hidden="true">&times;</span>\r\n        </button>\r\n      </div>\r\n      <div class="card-header p-1" *ngIf="!isModal">\r\n        <button id="btnActivarBodega" class="btn btn-sm btn-primary mr-2" *ngIf="isScreamMd" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.INVENTARIO_BODEGA_LISTADO}}</strong>\r\n\r\n        <div class="card-header-actions">\r\n          <div class="btn-group d-lg-none">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirBodega" (click)="imprimirBodegas()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarBodega" (click)="exportarBodegas()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n            </button>\r\n          </div>\r\n          <div class="btn-group d-none d-lg-block">\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnImprimirBodega" (click)="imprimirBodegas()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i> {{constantes.LABEL_IMPRIMIR}}\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarBodega" (click)="exportarBodegas()"\r\n              placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="card-body" style="padding: 0 0 0 0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--listado de bodegas--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="!this.isModal?mostrarContextMenu($event.data, $event.event):null"\r\n          (contextmenu)="!this.isModal?$event.preventDefault():null" (filterChanged)="actualizarFilas()"\r\n          (gridColumnsChanged)="redimencionarColumnas()" (cellFocused)="filaFocused($event)" (cellDoubleClicked)="this.isModal?filaSeleccionar():null"\r\n          (cellDoubleClicked)="objetoSeleccionado = $event.node.data; operacionesBodega(constantes.ACCION_CONSULTAR)">\r\n        </ag-grid-angular>\r\n        \x3c!--end listado de bodegas--\x3e\r\n        <p-contextMenu #menuOpciones [model]="opciones" appendTo="body"></p-contextMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--Formulario Bodega--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    <app-bodega-formulario *ngIf="vistaFormulario" [parametros]="parametrosFormulario" [empresaSeleccionada]="empresaSeleccionada"\r\n      (enviarCancelar)="cancelar($event)" (enviarActivar)="activar=!$event" (enviarAccion)="ejecutarAccion($event)">\r\n    </app-bodega-formulario>\r\n  </div>\r\n\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},xbly:function(e,t,o){"use strict";o.d(t,"a",function(){return h});var a=o("CcnG"),i=o("nR5P"),r=o("z5Y/"),n=o("SZbH"),s=o("TjW0"),c=o("EF/R"),l=o("mwBN"),d=o("Ip0R"),p=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,o,a){this.api=e,this.toastr=t,this.utilService=o,this.auth=a}return e.prototype.listarInvMedidaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaInvMedidaTablaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvMedidaTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,"Aviso"),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarInvProductoMedidaTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvProductoMedidaTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvProductoMedidaTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,l.a.TAG_AVISO),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.formatearInvProductoMedidaTO=function(e,t){var o=new s.a(e);return t.accion===l.a.ACCION_CREAR&&(o.medEmpresa=t.empresaSeleccionada.empCodigo,o.usrEmpresa=t.empresaSeleccionada.empCodigo,o.usrCodigo=this.auth.getCodigoUser(),o.usrFechaInserta=null),o},e.prototype.generarColumnasProductoMedida=function(){return[{headerName:l.a.TAG_CODIGO,field:"medCodigo",width:100},{headerName:l.a.TAG_DETALLE,field:"medDetalle",width:250},{headerName:l.a.TAG_CONV_LIBRAS,field:"medConvLibras",cellClass:"text-md-right",width:100,valueFormatter:this.formatearDecimal4,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:l.a.TAG_CONVERSION_LIBRAS,text:l.a.TAG_CONV_LIBRAS,enableSorting:!0}},{headerName:l.a.TAG_CONV_KILOS,field:"medConvKilos",cellClass:"text-md-right",width:100,valueFormatter:this.formatearDecimal4,headerComponent:"toolTip",headerComponentParams:{class:"",tooltip:l.a.TAG_CONVERSION_KILOS,text:l.a.TAG_CONV_KILOS,enableSorting:!0}},this.utilService.getColumnaOpciones()]},e.prototype.formatearDecimal4=function(e){return new d.DecimalPipe("en-US").transform(e.value,"1.4-4")},e=p([Object(a.Injectable)({providedIn:"root"}),u("design:paramtypes",[r.a,n.b,i.a,c.a])],e)}()},xcWn:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.fpSecuencial=0,this.fpDetalle=null,this.fpInactivo=!1,this.secCodigo=null,this.ctaCodigo=null,this.usrEmpresa=null,this.usrCodigo=null,this.usrFechaInserta=null,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.fpSecuencial=e.fpSecuencial?e.fpSecuencial:this.fpSecuencial,this.fpDetalle=e.fpDetalle?e.fpDetalle:this.fpDetalle,this.fpInactivo=e.fpInactivo?e.fpInactivo:this.fpInactivo,this.secCodigo=e.secCodigo?e.secCodigo:this.secCodigo,this.ctaCodigo=e.ctaCodigo?e.ctaCodigo:this.ctaCodigo,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},xlRT:function(e,t){e.exports='<div class="card m-0" *ngIf="listaResultadoXivSueldo?.length>0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarxivSueldo" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="cambiarActivar()"\r\n      type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n      <i class="{{activarXivSueldo?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{titulo}} - {{empresaSeleccionada.empNombre}}</strong>\r\n\r\n    <div class="card-header-actions" *ngIf="!esContable">\r\n      <div class="btn-group d-lg-none">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarxivSueldo" (click)="exportarXivSueldo()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarxivSueldo" (click)="guardarXivSueldo()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarXivSueldo" title="{{constantes.ATAJO_CANCELAR}}"\r\n          (click)="cancelar()" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group d-none d-lg-block">\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnExportarxivSueldo" (click)="exportarXivSueldo()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i> {{constantes.LABEL_EXPORTAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-primary mr-1" id="btnGuardarxivSueldo" (click)="guardarXivSueldo()"\r\n          placement="top" ngbTooltip="{{constantes.LABEL_MAYORIZAR}}" container="body" title="{{constantes.ATAJO_GUARDAR}}">\r\n          <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i> {{constantes.LABEL_MAYORIZAR}}\r\n        </button>\r\n        <button type="button" class="btn btn-sm btn-default mr-1" id="btnCancelarXivSueldo" title="{{constantes.ATAJO_CANCELAR}}"\r\n          (click)="cancelar()" ngbTooltip="{{constantes.LABEL_CANCELAR}}">\r\n          <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n          {{constantes.LABEL_CANCELAR}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="card-header-actions" *ngIf="esContable">\r\n      <app-botones-accion [conContable]="conContableCopia" [data]="data" (enviarAccion)="accionesBotones($event)"></app-botones-accion>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="p-1" *ngIf="esContable">\r\n      <app-contable-cabecera [data]="data" [conContable]="conContableCopia" [tipoSeleccionado]="tipoSeleccionado"\r\n        [empresaSeleccionada]="empresaSeleccionada" (accionFechaValido)="fechaContableValido = $event"></app-contable-cabecera>\r\n    </div>\r\n    <div class="row" *ngIf="!esContable">\r\n\r\n      <div class="col-sm-4 col-md-4 pr-0">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="col-sm-6 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="observacionAdicional" class="form-control form-control-sm input-filter mousetrap text-uppercase"\r\n            style="font-family: Arial, FontAwesome;" placeholder="&#xf007; {{constantes.TAG_OBSERVACION_GENERAL}}..."\r\n            size="100" appUppercase>\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_EDITAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="col-sm-2 col-md-2 pl-0">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="p-1">\r\n      <ag-grid-angular #agGrid id="agGrid" [ngStyle]="estilos" class="ag-theme-balham" [rowData]="listaResultadoXivSueldo"\r\n        [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [rowSelection]="rowSelection"\r\n        [enableColResize]="true" [components]="components" [context]="context" (gridReady)="onGridReady($event)"\r\n        (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)" [frameworkComponents]="frameworkComponents"\r\n        (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimensionarColumnas()" (gridSizeChanged)="redimensionarColumnas()"\r\n        [stopEditingWhenGridLosesFocus]="true" [singleClickEdit]="true" [pinnedBottomRowData]="pinnedBottomRowData"\r\n        [suppressDragLeaveHidesColumns]="true" (cellEditingStopped)="alCambiarValorDeCelda($event)" (contextmenu)="data && data.accion === constantes.ACCION_MAYORIZAR?$event.preventDefault():null"\r\n        (cellContextMenu)="data && data.accion === constantes.ACCION_MAYORIZAR?mostrarContextMenu($event.data, $event.event):null">\r\n      </ag-grid-angular>\r\n      <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n    </div>\r\n\r\n  </div>\r\n</div>'},yaVs:function(e,t,o){"use strict";o.d(t,"a",function(){return l});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o}return e.prototype.listarAnxTipoComprobanteComboTO=function(e,t,o){var a=this;this.api.post("todocompuWS/anexosWebController/getListaAnxTipoComprobanteComboTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarAnxTipoComprobanteComboTO(e.extraInfo):(t.despuesDeListarAnxTipoComprobanteComboTO([]),a.toastr.warning(e.operacionMensaje,"Aviso")),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e=s([Object(a.Injectable)({providedIn:"root"}),c("design:paramtypes",[i.a,r.b,n.a])],e)}()},ydE8:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a=function(){function e(e){this.ccEmpresa="",this.ccCodigo="",this.ccDetalle="",this.usrEmpresa="",this.usrCodigo="",this.usrFechaInserta="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.ccEmpresa=e.ccEmpresa?e.ccEmpresa:this.ccEmpresa,this.ccCodigo=e.ccCodigo?e.ccCodigo:this.ccCodigo,this.ccDetalle=e.ccDetalle?e.ccDetalle:this.ccDetalle,this.usrEmpresa=e.usrEmpresa?e.usrEmpresa:this.usrEmpresa,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()},yqOf:function(e,t,o){"use strict";o.d(t,"a",function(){return u});var a=o("CcnG"),i=o("z5Y/"),r=o("SZbH"),n=o("nR5P"),s=o("mwBN"),c=o("Ip0R"),l=o("sXuD"),d=function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o){this.api=e,this.toastr=t,this.utilService=o,this.resultado=[]}return e.prototype.obtenerDatosParaCrudProductos=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerDatosParaCrudProductos",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerDatosParaCrudProductos(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.isModal&&t.activeModal.close()),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getListaProductosTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getListaProductosGeneralTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarProducto(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.isModal?t.activeModal.dismiss():t.despuesDeListarProducto([])),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.getListaInvFunListadoProductosTO=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvFunListadoProductosTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeListarInvFunListadoProductosTO(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.despuesDeListarInvFunListadoProductosTO([])),t.cargando=!1}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.listarProductos=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/getInvProductoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerProducto(e.extraInfo):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1,t.isModal&&t.activeModal.close())}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.obtenerProducto=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerProductoTO",e,o).then(function(e){e&&e.extraInfo?t.despuesDeObtenerProducto(e.extraInfo):(t.despuesDeObtenerProducto(null),a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.insertarProducto=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/insertarProductoTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeInsertarProducto(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.modificarProducto=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/modificarProductoTO",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeModificarProducto(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.eliminarProducto=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/eliminarInvProducto",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeEliminarProducto(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.cambiarEstadoProducto=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/cambiarEstadoInvProducto",e,o).then(function(e){e&&e.extraInfo?(a.toastr.success(e.operacionMensaje,s.a.TOAST_CORRECTO,{enableHtml:!0}),t.despuesDeCambiarEstadoProducto(e.extraInfo)):(a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.consultarImagenes=function(e,t,o){var a=this;this.api.post("todocompuWS/inventarioWebController/obtenerAdjuntosProducto",e,o).then(function(e){e&&e.extraInfo?t.despuesDeConsultarImagenes(e.extraInfo):(t.despuesDeConsultarImagenes([]),a.toastr.warning(e.operacionMensaje,s.a.TOAST_ADVERTENCIA),t.cargando=!1)}).catch(function(e){return a.utilService.handleError(e,t)})},e.prototype.verificarPermiso=function(e,t,o){var a=!1;switch(e){case s.a.ACCION_CREAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruCrear&&t.empresaSeleccionada.listaSisPermisoTO.gruCrearProductos;break;case s.a.ACCION_CONSULTAR:a=!0;break;case s.a.ACCION_EDITAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruModificar&&t.empresaSeleccionada.listaSisPermisoTO.gruModificarProductos;break;case s.a.ACCION_ELIMINAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruEliminar;break;case s.a.ACCION_IMPRIMIR:a=t.empresaSeleccionada.listaSisPermisoTO.gruImprimir;break;case s.a.ACCION_EXPORTAR:a=t.empresaSeleccionada.listaSisPermisoTO.gruExportar}return o&&!a&&this.toastr.warning(s.a.ERROR_403_TEXTO,s.a.ERROR_403_TITULO),a},e.prototype.convertirInvFunListadoProductosTOAInvListaProductosGeneralTO=function(e){var t=new l.a;return t.proCodigoPrincipal=e.prdCodigoPrincipal,t.proNombre=e.prdNombre,t.proCategoria=e.prdCategoria,t.proInactivo=e.prdInactivo,t},e.prototype.generarColumnasGenerales=function(e){if(e.isModal){var t=[{headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:50,minWidth:50},{headerName:s.a.TAG_DESCRIPCION,field:"proNombre",width:100,minWidth:100}];return e.isModal&&t.push({headerName:s.a.TAG_SALDO,field:"stockSaldo",cellClass:"text-right",valueFormatter:h,width:50,minWidth:50}),t.push(this.utilService.getSpanSelect()),t}return[{headerName:s.a.TAG_CODIGO,field:"proCodigoPrincipal",width:100},{headerName:s.a.TAG_DESCRIPCION,field:"proNombre",width:600},{headerName:s.a.TAG_INACTIVO,headerClass:"text-md-center",field:"proInactivo",width:100,cellRenderer:"inputEstado",cellClass:"text-md-center"},this.utilService.getColumnaOpciones()]},e.prototype.generarColumnasProductoListado=function(){return[{headerName:s.a.TAG_CODIGO,field:"prdCodigoPrincipal",width:100,minWidth:100},{headerName:s.a.TAG_DESCRIPCION,field:"prdNombre",width:200,minWidth:200},{headerName:s.a.TAG_MEDIDA,field:"prdMedida",width:100,minWidth:100},{headerName:s.a.TAG_CATEGORIA,field:"prdCategoria",width:200,minWidth:200},{headerName:s.a.TAG_PRECIO_1,field:"prdPrecio1",width:100,minWidth:100,valueFormatter:h,cellClass:"text-right"},{headerName:s.a.TAG_PRECIO_2,field:"prdPrecio2",width:100,minWidth:100,valueFormatter:h,cellClass:"text-right"},{headerName:s.a.TAG_PRECIO_3,field:"prdPrecio3",width:100,minWidth:100,valueFormatter:h,cellClass:"text-right"},{headerName:s.a.TAG_PRECIO_4,field:"prdPrecio4",width:100,minWidth:100,valueFormatter:h,cellClass:"text-right"},{headerName:s.a.TAG_PRECIO_5,field:"prdPrecio5",width:100,minWidth:100,valueFormatter:h,cellClass:"text-right"},this.utilService.getColumnaOpciones()]},e=d([Object(a.Injectable)({providedIn:"root"}),p("design:paramtypes",[i.a,r.b,n.a])],e)}();function h(e){return e.value||(e.value=0),new c.DecimalPipe("en-US").transform(e.value,"1.2-2")}},"yy+e":function(e,t){e.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5" *ngIf="!isModal">\r\n    <div class="card m-0 mb-2">\r\n      <div class="card-header">\r\n        <i class="{{classIcon}}"></i><b> {{constantes.TITULO_FILTROS}}</b>\r\n      </div>\r\n      \x3c!--FILTRO EMPRESA--\x3e\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmConceptoRetencion=\'ngForm\' name="frmConceptoRetencion">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control form-control-sm mousetrap" name="empresa" required [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSeleccionada()" [disabled]="accion">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas"> {{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      \x3c!--BOT\xd3N BUSCAR--\x3e\r\n      <div class="card-footer text-muted" *ngIf="!accion">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button type="button" class="btn btn-sm btn-primary" id="btnBuscar" (click)="listarConceptoRetencion(frmConceptoRetencion)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!--LISTADO CONCEPTO RETENCI\xd3N--\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar  || isModal}">\r\n    <div class="card m-0" *ngIf="listaResultado?.length>0">\r\n      <div class="modal-header p-2" *ngIf="isModal">\r\n        <h4 class="modal-title">{{constantes.TRIBUTACION_CONCEPTO_RETENCION_LISTADO}}</h4>\r\n        <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss(\'Cross click\')">\r\n          <span aria-hidden="true">&times;</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div class="card-header p-1" *ngIf="!isModal">\r\n        <button id="btnActivarConceptoR" class="btn btn-sm btn-primary mr-1" *ngIf="!screamXS" (click)="activar=!activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <strong>{{constantes.TRIBUTACION_CONCEPTO_RETENCION_LISTADO}}</strong>\r\n      </div>\r\n\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listaResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (filterChanged)="actualizarFilas()"\r\n          (cellFocused)="filaFocused($event)" (gridColumnsChanged)="redimencionarColumnas()" (gridSizeChanged)="redimencionarColumnas()"\r\n          (cellDoubleClicked)="isModal?enviarItem(objetoSeleccionado):null">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'},z4nk:function(e,t){e.exports='<div class="card m-0" [hidden]="vistaFormulario" *ngIf="listadoResultado?.length > 0">\r\n  <div class="card-header p-1">\r\n    <strong>{{titulo}}</strong>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName" maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}"\r\n            defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham" [rowData]="listadoResultado"\r\n      [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey" [suppressRowClickSelection]="true"\r\n      (gridSizeChanged)="redimensionarColumnas()" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n      [context]="context" [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)" (rowSelected)="empresaSeleccionada = $event.node.data"\r\n      (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (cellDoubleClicked)="empresaSeleccionada = $event.node.data; consultarEmpresa()">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>\r\n<app-empresa-formulario *ngIf="vistaFormulario" [empresaSeleccionada]="empresaSeleccionada" [administracion]="administracionEmpresa"\r\n  [accion]="accion" (enviarCancelar)="cancelar()"></app-empresa-formulario>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},"zeZ/":function(e,t){e.exports='\x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n<div class="card m-0" [hidden]="!vistaListado" *ngIf="listadoResultado?.length > 0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarOrdenCompra" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="cambiarActivar()"\r\n      type="button">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{constantes.PEDIDOS_ORDEN_COMPRA_LISTADO}}</strong>\r\n    <div class="card-header-actions">\r\n      <div class="btn-group">\r\n        <div class="btn-group mr-1">\r\n          <button id="btnImprimir" type="button" class="btn btn-sm btn-primary" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n            container="body" (click)="imprimir()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n            [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="imprimirIndividual()">{{constantes.LABEL_IMPRIMIR_INDIVIDUAL}}</a>\r\n          </div>\r\n        </div>\r\n        <button id="btnExportar" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n          container="body" (click)="exportar()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n            size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n      [rowData]="listadoResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n      [suppressRowClickSelection]="true" (gridSizeChanged)="redimensionarColumnas()" [rowSelection]="rowSelection"\r\n      [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n      (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n      (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (cellDoubleClicked)="onCellDoubleClicked($event)"\r\n      [rowClassRules]="rowClassRules">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>\r\n\r\n\x3c!-- ORDEN DE COMPRA --\x3e\r\n<app-formulario-generar-orden-compra *ngIf="dataFormularioCompra" [data]="dataFormularioCompra" [empresaSeleccionada]="empresaSeleccionada"\r\n  (enviarActivar)="cambiarActivarFormulario($event)" (enviarCancelar)="cancelar($event)" (enviarLista)="operacionEnLista($event)"></app-formulario-generar-orden-compra>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>\r\n<div class="row justify-content-end">\r\n  <a href="" id="excelDownload" #excelDownload></a>\r\n</div>'},zm0g:function(e,t){e.exports='<div class="card mb-1">\r\n  <div class="card-header">\r\n    <b> {{constantes.TAG_ANTICIPOS}}</b>\r\n    <div class="card-header-actions">\r\n      <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseAn"\r\n        aria-expanded="true" placement="top" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">\r\n        <i class="fa fa-minus"></i>\r\n      </a>\r\n    </div>\r\n  </div>\r\n  <div class="collapse show" id="collapseAn">\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%;" [gridAutoHeight]="true" class="ag-theme-balham" [rowData]="listadoPagosAnticipos"\r\n      [columnDefs]="columnDefsSelected" [enableSorting]="true" [rowSelection]="rowSelection" [enableColResize]="true"\r\n      [components]="components" [context]="context" [frameworkComponents]="frameworkComponents" [animateRows]="true"\r\n      [suppressClickEdit]=true (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data"\r\n      (cellFocused)="filaFocused($event)" (filterChanged)="actualizarFilas()" (contextmenu)="$event.preventDefault()"\r\n      (cellContextMenu)="mostrarContextMenu($event.data, $event.event)" (cellEditingStopped)="alCambiarValorDeCelda($event)"\r\n      [stopEditingWhenGridLosesFocus]="true" [overlayNoRowsTemplate]="noData" [suppressDragLeaveHidesColumns]="true"\r\n      (gridSizeChanged)="redimensionarColumnas()" (cellDoubleClicked)="objetoSeleccionado = $event.node.data;verContable(objetoSeleccionado)">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <div class="card-footer">\r\n    <div class="card-header-actions mr-3">\r\n      <h2>{{constantes.TAG_TOTAL}} : {{totales.anticipo | number:\'1.2-2\'}}</h2>\r\n    </div>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>'},zvBE:function(e,t,o){"use strict";var a=function(){function e(e){this.geEmpresa="",this.geCodigo="",e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.geEmpresa=e.geEmpresa?e.geEmpresa:this.geEmpresa,this.geCodigo=e.geCodigo?e.geCodigo:this.geCodigo},e}();o.d(t,"a",function(){return i});var i=function(){function e(e){this.invClienteGrupoEmpresarialPK=new a,this.geNombre="",this.usrCodigo="",this.usrFechaInserta=new Date,e&&this.hydrate(e)}return e.prototype.hydrate=function(e){this.invClienteGrupoEmpresarialPK=e.invClienteGrupoEmpresarialPK?e.invClienteGrupoEmpresarialPK:this.invClienteGrupoEmpresarialPK,this.geNombre=e.geNombre?e.geNombre:this.geNombre,this.usrCodigo=e.usrCodigo?e.usrCodigo:this.usrCodigo,this.usrFechaInserta=e.usrFechaInserta?e.usrFechaInserta:this.usrFechaInserta},e}()}}]);