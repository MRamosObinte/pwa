(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"8/Rn":function(o,i){o.exports='\x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n<div class="card m-0" [hidden]="!vistaListado" *ngIf="listadoResultado?.length > 0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarOrdenPedido" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="cambiarActivar()"\r\n      type="button">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{constantes.PEDIDOS_LISTADO}}</strong>\r\n    <div class="card-header-actions">\r\n      <div class="btn-group">\r\n        <div class="btn-group mr-1">\r\n          <button id="btnImprimirListado" type="button" class="btn btn-sm btn-primary" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n            container="body" (click)="imprimir()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n            [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="imprimirIndividual()">{{constantes.LABEL_IMPRIMIR_INDIVIDUAL}}</a>\r\n          </div>\r\n        </div>\r\n        <button id="btnExportarListado" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n          container="body" (click)="exportar()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n            size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n      [rowData]="listadoResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n      [suppressRowClickSelection]="true" (gridSizeChanged)="redimensionarColumnas()" [rowSelection]="rowSelection"\r\n      [enableColResize]="true" [components]="components" [context]="context" [frameworkComponents]="frameworkComponents"\r\n      (gridReady)="onGridReady($event)" (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n      (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (cellDoubleClicked)="consultarOrdenPedido()"\r\n      (cellFocused)="filaFocused($event)">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>\r\n\r\n\x3c!-- ORDEN DE PEDIDO --\x3e\r\n<app-aprobar-orden-pedido-formulario *ngIf="dataFormularioPedido" [data]="dataFormularioPedido" [empresaSeleccionada]="empresaSeleccionada"\r\n  (enviarActivar)="cambiarActivarFormulario($event)" (enviarCancelar)="cancelar()" (enviarLista)="operacionEnLista($event)"></app-aprobar-orden-pedido-formulario>\r\n\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>\r\n\r\n<div class="row justify-content-end">\r\n  <a href="" id="excelDownload" #excelDownload></a>\r\n</div>'},"8Fl+":function(o,i){o.exports='<div class="row" *ngIf="showIndex">\r\n    <div class="col-lg-5 col-md-4 pt-5">\r\n        <h1 class="text-center">Lo m\xe1s usado:</h1>\r\n        <div class="form-group form-group-sm text-center" *ngFor="let acceso of listaAccesoRapido">\r\n            <a routerLink="{{acceso.url}}" *ngIf="acceso.mostrar">\r\n                <button type="button" class="btn btn-primary btn-ancho-250"> {{acceso.item}}</button>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class="col-lg-7 col-md-8 pt-5">\r\n        <div class="text-center">\r\n            <img src="assets/images/pedidos.png" class="img-thumbnail">\r\n        </div>\r\n    </div>\r\n</div>\r\n<router-outlet></router-outlet>'},"95PV":function(o,i){o.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--FORMULARIO DE FILTRADO--\x3e\r\n    <div class="card mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmFiltroOrdenPedido="ngForm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n              [disabled]="deshabilitarOpciones" (change)="cambiarempresaSeleccionada();limpiarResultado();" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="listaSectores" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre" (ngModelChange)="listarMotivos();limpiarResultado()"\r\n              [disabled]="deshabilitarOpciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-elemento pTemplate="item">\r\n                <div class=""> {{elemento.value.secNombre}} ({{elemento.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_MOTIVO}}</b>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarMotivos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <select [(ngModel)]="motivoSeleccionado" class="form-control input-sm" name="motivoSeleccionado" [disabled]="deshabilitarOpciones"\r\n              (change)="traerConfiguracionPedidos();limpiarResultado();" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="motivo" *ngFor="let motivo of listaMotivos">{{motivo.pmDetalle}} ({{motivo.pmCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer" *ngIf="!deshabilitarOpciones">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button id="btnBuscar" type="button" class="btn btn-sm btn-primary" (click)="buscarOrdenesPedido(20)"\r\n              [disabled]="!frmFiltroOrdenPedido?.form.valid" title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              [disabled]="!frmFiltroOrdenPedido?.form.valid">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(50)">{{constantes.TAG_ULTIMOS_50}} </a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(100)">{{constantes.TAG_ULTIMOS_100}}</a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(null)">{{constantes.TAG_TODOS}}</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    \x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n    <app-listado-generar-orden-compra [hidden]="!vistaListado" [parametrosBusqueda]="dataListadoOrden"\r\n      [empresaSeleccionada]="empresaSeleccionada" [operacion]="operacionListado" (enviarCancelar)="cancelar()"\r\n      (enviarActivar)="cambiarActivar($event)" [filasTiempoRecargar]="filasTiempoRecargar"></app-listado-generar-orden-compra>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},FsoC:function(o,i){o.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--FORMULARIO DE FILTRADO--\x3e\r\n    <div class="card mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmFiltroOrdenCompra="ngForm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n              [disabled]="deshabilitarOpciones" (change)="cambiarempresaSeleccionada();limpiarResultado();" required>\r\n              <option selected disabled value="">Seleccione</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="listaSectores" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre" (ngModelChange)="listarMotivos();limpiarResultado()"\r\n              [disabled]="deshabilitarOpciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-elemento pTemplate="item">\r\n                <div class=""> {{elemento.value.secNombre}} ({{elemento.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_MOTIVO}}</strong>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarMotivos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaMotivos" name="motivoSeleccionado" [(ngModel)]="motivoSeleccionado" optionLabel="ocmDetalle"\r\n              (ngModelChange)="limpiarResultado()" [disabled]="deshabilitarOpciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{motivoSeleccionado?.ocmDetalle}} ({{motivoSeleccionado?.ocmCodigo}})\r\n              </ng-template>\r\n              <ng-template let-elemento pTemplate="item">\r\n                <div class=""> {{elemento.value.ocmDetalle}} ({{elemento.value.ocmCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          <div *ngIf="tipoVista===\'C\'">\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FECHA_DESDE}}</b>\r\n              </label>\r\n              <p-calendar name="fechaInicio" [(ngModel)]="fechaInicio" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true"\r\n                [required]="true" (ngModelChange)="limpiarResultado();" [maxDate]="fechaFin" [appMaxDate]="fechaFin"\r\n                [disabled]="deshabilitarOpciones"></p-calendar>\r\n            </div>\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n              </label>\r\n              <p-calendar name="fechaFin" [(ngModel)]="fechaFin" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true"\r\n                [required]="true" (ngModelChange)="limpiarResultado();" [minDate]="fechaInicio" [appMinDate]="fechaInicio"\r\n                [disabled]="deshabilitarOpciones"></p-calendar>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer" *ngIf="!deshabilitarOpciones">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button id="btnBuscar" type="button" class="btn btn-sm btn-primary" (click)="buscarOrdenesCompra(20)"\r\n              [disabled]="!frmFiltroOrdenCompra?.form.valid" title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              [disabled]="!frmFiltroOrdenCompra?.form.valid">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarOrdenesCompra(50)">{{constantes.TAG_ULTIMOS_50}} </a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesCompra(100)">{{constantes.TAG_ULTIMOS_100}}</a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesCompra(null)">{{constantes.TAG_TODOS}}</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    \x3c!--LISTADO DE ORDEN DE COMPRA --\x3e\r\n    <app-orden-compra-listado [hidden]="!vistaListado" [parametrosBusqueda]="dataListadoOrden" [empresaSeleccionada]="empresaSeleccionada"\r\n      [operacion]="operacionListado" (enviarCancelar)="cancelar()" (enviarActivar)="cambiarActivar($event)"></app-orden-compra-listado>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},RtTb:function(o,i){o.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--FORMULARIO DE FILTRADO--\x3e\r\n    <div class="card mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmFiltroOrdenPedido="ngForm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n              [disabled]="deshabilitarOpciones" (change)="cambiarempresaSeleccionada();limpiarResultado();" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="listaSectores" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre" (ngModelChange)="listarMotivos();limpiarResultado()"\r\n              [disabled]="deshabilitarOpciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-elemento pTemplate="item">\r\n                <div class=""> {{elemento.value.secNombre}} ({{elemento.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_MOTIVO}}</b>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarMotivos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <select [(ngModel)]="motivoSeleccionado" class="form-control input-sm" name="motivoSeleccionado" [disabled]="deshabilitarOpciones"\r\n              (ngModelChange)="traerConfiguracionPedidos();limpiarResultado()" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="motivo" *ngFor="let motivo of listaMotivos">{{motivo.pmDetalle}}\r\n                ({{motivo.pmCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_DESDE}}</b>\r\n            </label>\r\n            <p-calendar name="fechaInicio" [(ngModel)]="fechaInicio" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true"\r\n              [required]="true" (ngModelChange)="limpiarResultado();" [maxDate]="fechaFin" [appMaxDate]="fechaFin"\r\n              [disabled]="deshabilitarOpciones"></p-calendar>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_FECHA_HASTA}}</b>\r\n            </label>\r\n            <p-calendar name="fechaFin" [(ngModel)]="fechaFin" dateFormat="dd/mm/yy" [locale]="es" [showIcon]="true"\r\n              [required]="true" (ngModelChange)="limpiarResultado();" [minDate]="fechaInicio" [appMinDate]="fechaInicio"\r\n              [disabled]="deshabilitarOpciones"></p-calendar>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer" *ngIf="!deshabilitarOpciones">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button id="btnBuscarOrdenesPedidos" type="button" class="btn btn-sm btn-primary" (click)="buscarOrdenesPedido(false,false,false)">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(true,false,false)">Solo Registrados</a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(false,true,false)">Solo Aprobados</a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(false,false,true)">Solo ejecutados</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    \x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n    <app-listado-orden-pedido [hidden]="!vistaListado" [parametrosBusqueda]="dataListadoOrden" [empresaSeleccionada]="empresaSeleccionada"\r\n      [operacion]="operacionListado" (enviarCancelar)="cancelar()" (enviarActivar)="cambiarActivar($event)"></app-listado-orden-pedido>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},TaXX:function(o,i){o.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--Card Filtro--\x3e\r\n    <div class="card mb-2">\r\n      <div class="card-header">\r\n        <i class=" {{classTitulo}}"></i>\r\n        <b>{{frmTitulo}}</b>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmMotivoOrdenCompra="ngForm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n              [disabled]="vistaFormulario" (change)="cambiarEmpresaSelect();" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a *ngIf="!vistaFormulario" (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="listaSectores" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre" (ngModelChange)="!vistaFormulario?limpiarResultado():null"\r\n              [disabled]="vistaFormulario">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-elemento pTemplate="item">\r\n                <div class=""> {{elemento.value.secNombre}} ({{elemento.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n          <div *ngIf="mostrarDatosCrud">\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_USUARIOS}}</b>\r\n              </label>\r\n              <span class="ui-fluid">\r\n                <p-autoComplete [appFocus]="true" isAutocomple="true" inputId="inputAutocomplete" forceSelection="true"\r\n                  autofocus [(ngModel)]="listUsuarioSeleccionado" name="listUsuarioSeleccionado" [suggestions]="listaUsuariosFiltrada"\r\n                  (completeMethod)="filtrarUsuarioEmpresa($event)" styleClass="wid100" [minLength]="1" placeholder="usuarios"\r\n                  field="usrNombre" [multiple]="true">\r\n                  <ng-template let-usuariosRegistradores pTemplate="item">\r\n                    <div class="ui-helper-clearfix">\r\n                      <div>{{usuariosRegistradores.usrNombre}} {{usuariosRegistradores.usrApellido}}</div>\r\n                    </div>\r\n                  </ng-template>\r\n                </p-autoComplete>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer" *ngIf="vistaFormulario && mostrarDatosCrud">\r\n        <div class="text-right">\r\n          <button type="button" class="btn btn-sm btn-primary" (click)="agregarUsuario()">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_AGREGAR}} </button>&nbsp;\r\n          <button (click)="cancelarAgregarUsuario()" type="button" class="btn btn-sm btn-default" [disabled]="cargando">\r\n            <i class="{{constantes.ICON_CANCELAR}}"></i> {{constantes.LABEL_CANCELAR}} </button>\r\n        </div>\r\n      </div>\r\n      <div class="card-footer" *ngIf="!vistaFormulario">\r\n        <div class="text-right">\r\n          <button id="btnBuscarMotivoOC" type="button" class="btn btn-sm btn-primary mr-1" (click)="buscarOrdenCompraMotivo()"\r\n            title="{{constantes.ATAJO_BUSCAR}}">\r\n            <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n          <button id="btnNuevoMotivoOC" class="btn btn-sm btn-primary" type="button" (click)="nuevoOrdenCompraMotivo()"\r\n            [disabled]="!frmMotivoOrdenCompra.form.valid || !empresaSeleccionada.listaSisPermisoTO.gruCrear || !sectorSeleccionado?.secActivo"\r\n            title="{{constantes.ATAJO_NUEVO}}">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" [hidden]="vistaFormulario">\r\n    <div class="card m-0" *ngIf="listadoResultado?.length > 0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarMotivoOC" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="activar = !activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <b>{{constantes.TAG_CONFIGURACION_ORDEN_COMPRA}}</b>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group">\r\n            <button id="btnImprimirMotivoOC" type="button" class="btn btn-sm btn-primary mr-1" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_IMPRIMIR}}" container="body" (click)="imprimir()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir"\r\n              title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n            </button>\r\n            <button id="btnExportarMotivoOC" type="button" class="btn btn-sm btn-primary mr-1" placement="top"\r\n              ngbTooltip="{{constantes.LABEL_EXPORTAR}}" container="body" (click)="exportar()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar"\r\n              title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n                size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--Tabla--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listadoResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimensionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellFocused)="filaFocused($event)" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (gridColumnsChanged)="redimensionarColumnas()"\r\n          [overlayNoRowsTemplate]="noData">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="vistaFormulario">\r\n    <div class="card m-0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarMotivoOC" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="activar = !activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <b>{{constantes.TAG_CONFIGURACION_ORDEN_COMPRA}}</b>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group">\r\n            <button *ngIf="accion === constantes.ACCION_CREAR" id="btnGuardarMotivoOC" type="button" (click)="guardar(frmMotivoOC)"\r\n              class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n            <button *ngIf="accion === constantes.ACCION_EDITAR" id="btnGuardarMotivoOC" type="button" (click)="actualizar(frmMotivoOC)"\r\n              class="btn btn-sm btn-primary mr-1" [disabled]="cargando" title="{{constantes.ATAJO_GUARDAR}}">\r\n              <i class="{{constantes.ICON_GUARDAR}}"></i> {{constantes.LABEL_GUARDAR}}</button>\r\n            <button id="btnCancelarMotivoOC" *ngIf="accion!==constantes.ACCION_CONSULTAR" (click)="cancelarAccion()"\r\n              type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando" title="{{constantes.ATAJO_CANCELAR}}">\r\n              <i class="{{constantes.ICON_CANCELAR}}"></i> {{constantes.LABEL_CANCELAR}} </button>\r\n            <button id="btnCancelarMotivoOC" *ngIf="accion===constantes.ACCION_CONSULTAR" (click)="cancelarAccion()"\r\n              type="button" class="btn btn-sm btn-default mr-1" [disabled]="cargando" title="{{constantes.ATAJO_REGRESAR}}">\r\n              <i class="{{constantes.ICON_REGRESAR}}"></i> {{constantes.LABEL_REGRESAR}} </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <form #frmMotivoOC="ngForm" class="row">\r\n          <div [ngClass]="{\'col-lg-6 col-md-12 col-sm-12\':!invPedidosOrdenCompraMotivo.ocmAprobacionAutomatica,\'col-lg-12 col-md-12 col-sm-12\':invPedidosOrdenCompraMotivo.ocmAprobacionAutomatica}">\r\n            \x3c!--Aprobadores--\x3e\r\n            <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n\r\n              <div class="form-group form-group-sm has-feedback col-lg-12 col-md-6 col-sm-12">\r\n                <label class="control-label">\r\n                  <strong>{{constantes.TAG_CODIGO}}</strong>\r\n                </label>\r\n                <p *ngIf="!(accion===constantes.ACCION_CREAR)" class="form-control input-sm">{{invPedidosOrdenCompraMotivo.invPedidosOrdenCompraMotivoPK.ocmCodigo}}</p>\r\n                <input *ngIf="accion===constantes.ACCION_CREAR" [appFocus]="accion === constantes.ACCION_CREAR" name="ocmCodigo"\r\n                  [(ngModel)]="invPedidosOrdenCompraMotivo.invPedidosOrdenCompraMotivoPK.ocmCodigo" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                  pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                  maxlength="50" required appUppercase>\r\n                <span *ngIf="accion===constantes.ACCION_CREAR" class="fa fa-question-circle form-control-feedback mr-3"\r\n                  placement="left" ngbPopover="{{constantes.MSJ_INFOCODIGO}}" triggers="mouseenter:mouseleave"\r\n                  container="body"></span>\r\n              </div>\r\n\r\n              <div class="form-group form-group-sm col-lg-12 col-md-6 col-sm-12">\r\n                <label class="control-label">\r\n                  <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                </label>\r\n                <input [appFocus]="accion===constantes.ACCION_EDITAR" name="ocmDetalle" [(ngModel)]="invPedidosOrdenCompraMotivo.ocmDetalle"\r\n                  class="form-control form-control-sm text-uppercase mousetrap" required maxlength="1000" placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                  appUppercase>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <div class="form-group form-group-sm mb-2">\r\n                  <label class="control-label">\r\n                    <strong>{{constantes.TAG_NOTIFICAR_CORREO}} :</strong>\r\n                  </label>\r\n                  <div class="pt-2 pb-2">\r\n                    <p-toggleButton onLabel="{{constantes.TAG_APROBADOR}}" offLabel="{{constantes.TAG_APROBADOR}}" name="ocmNotificarAprobador"\r\n                      [(ngModel)]="invPedidosOrdenCompraMotivo.ocmNotificarAprobador" *ngIf="!invPedidosOrdenCompraMotivo.ocmAprobacionAutomatica"\r\n                      [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                    <p-toggleButton onLabel="{{constantes.TAG_PROVEEDOR}}" offLabel="{{constantes.TAG_PROVEEDOR}}" name="pmNotificarProveedor"\r\n                      [(ngModel)]="invPedidosOrdenCompraMotivo.ocmNotificarProveedor" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="form-group form-group-sm col-md-12 mb-2">\r\n                <label class="control-label">\r\n                  <strong>{{constantes.TAG_OTRAS_OPCIONES}}</strong>\r\n                </label>\r\n              </div>\r\n\r\n              <div class="form-group form-group-sm col-lg-4 col-md-6 col-sm-12">\r\n                <div class="switch">\r\n                  <label>\r\n                    <input id="ocmCostoFijo" name="ocmCostoFijo" type="checkbox" [(ngModel)]="invPedidosOrdenCompraMotivo.ocmCostoFijo">\r\n                    <span class="lever"></span>{{constantes.TAG_COSTO_FIJO}}\r\n                  </label>\r\n                </div>\r\n                <div class="switch">\r\n                  <label>\r\n                    <input id="ocmAprobacionAutomatica" name="ocmAprobacionAutomatica" type="checkbox" [(ngModel)]="invPedidosOrdenCompraMotivo.ocmAprobacionAutomatica">\r\n                    <span class="lever"></span>{{constantes.TAG_APROBACION_AUTOMATICA}}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n            </fieldset>\r\n          </div>\r\n          <div class="col-lg-6 col-md-12 col-sm-12" [hidden]="invPedidosOrdenCompraMotivo?.ocmAprobacionAutomatica">\r\n            \x3c!--AprObadores--\x3e\r\n            <div class="card m-1 mt-2">\r\n              <div class="card-header p-1">\r\n                <i class="{{constantes.ICON_USUARIO}}"></i>\r\n                <strong>{{constantes.PEDIDOS_CONFIGURACION_APROBADOR}}</strong>\r\n                <button type="button" *ngIf="accion != constantes.ACCION_CONSULTAR && !mostrarDatosCrud && !accionAgregarUsuario && empresaSeleccionada.listaSisPermisoTO.gruCrear"\r\n                  class="btn btn-sm btn-primary pull-right" (click)="mostrarAgregarUsuario(constantes.TAG_APROBADOR)"\r\n                  placement="top" ngbTooltip="{{constantes.LABEL_AGREGAR}}" container="body">\r\n                  <i class="{{constantes.ICON_AGREGAR}}"></i>\r\n                </button>\r\n              </div>\r\n              <div class="card-body" class="no-padding">\r\n                <div [hidden]="listadoAprobadores.length==0">\r\n                  <ag-grid-angular #agGridAprobador id="agGridAprobador" style="width: 100%;" class="ag-theme-balham"\r\n                    [rowData]="listadoAprobadores" [columnDefs]="columnAprobador" [enableCellChangeFlash]="true"\r\n                    [enableSorting]="true" [rowSelection]="rowSelection" [enableColResize]="true" [components]="components"\r\n                    [context]="context" [animateRows]="true" (gridSizeChanged)="redimencionarColumnas($event.api)"\r\n                    [gridAutoHeight]="true" (gridReady)="onGridReadyAprobador($event)" (rowSelected)="usuarioSeleccionado = $event.node.data"\r\n                    (contextmenu)="accion!==constantes.ACCION_CONSULTAR ? $event.preventDefault() : null"\r\n                    (cellContextMenu)="accion!==constantes.ACCION_CONSULTAR ? mostrarContextMenuAprobador($event.data, $event.event) : null"\r\n                    [overlayNoRowsTemplate]="noData">\r\n                  </ag-grid-angular>\r\n                </div>\r\n                <p-contextMenu #cma [model]="opcionesAprobador" appendTo=\'body\'></p-contextMenu>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},TfNB:function(o,i){o.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--FORMULARIO DE FILTRADO--\x3e\r\n    <div class="card mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmFiltroOrdenPedido="ngForm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n              [disabled]="deshabilitarOpciones" (change)="cambiarempresaSeleccionada();limpiarResultado();" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="listaSectores" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre" (ngModelChange)="listarMotivos();limpiarResultado()"\r\n              [disabled]="deshabilitarOpciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-elemento pTemplate="item">\r\n                <div class=""> {{elemento.value.secNombre}} ({{elemento.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_MOTIVO}}</b>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarMotivos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <select [(ngModel)]="motivoSeleccionado" class="form-control input-sm" name="motivoSeleccionado" [disabled]="deshabilitarOpciones"\r\n              (change)="traerConfiguracionPedidos();limpiarResultado();" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="motivo" *ngFor="let motivo of listaMotivos">{{motivo.pmDetalle}} ({{motivo.pmCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer" *ngIf="!deshabilitarOpciones">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button id="btnBuscar" type="button" class="btn btn-sm btn-primary" (click)="buscarOrdenesPedido(20)"\r\n              [disabled]="!frmFiltroOrdenPedido?.form.valid" title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              [disabled]="!frmFiltroOrdenPedido?.form.valid">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(50)">{{constantes.TAG_ULTIMOS_50}} </a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(100)">{{constantes.TAG_ULTIMOS_100}}</a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(null)">{{constantes.TAG_TODOS}}</a>\r\n            </div>&nbsp;\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    \x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n    <app-listado-aprobar-orden-pedido [hidden]="!vistaListado" [parametrosBusqueda]="dataListadoOrden"\r\n      [empresaSeleccionada]="empresaSeleccionada" [operacion]="operacionListado" (enviarCancelar)="cancelar()"\r\n      (enviarActivar)="cambiarActivar($event)" [filasTiempoRecargar]="filasTiempoRecargar"></app-listado-aprobar-orden-pedido>\r\n  </div>\r\n</div>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},Yozd:function(o,i){o.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    \x3c!--FORMULARIO DE FILTRADO--\x3e\r\n    <div class="card mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmFiltroOrdenPedido="ngForm" autocomplete="off">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select [(ngModel)]="empresaSeleccionada" class="form-control input-sm" name="empresaSeleccionada"\r\n              [disabled]="deshabilitarOpciones" (change)="cambiarempresaSeleccionada();limpiarResultado();" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <p-dropdown [options]="listaSectores" name="listaSectores" [showClear]="true" [(ngModel)]="sectorSeleccionado"\r\n              placeholder="{{constantes.TAG_TODOS}}" optionLabel="secNombre" (ngModelChange)="listarMotivos();limpiarResultado()"\r\n              [disabled]="deshabilitarOpciones">\r\n              <ng-template let-item pTemplate="selectedItem">\r\n                {{sectorSeleccionado?.secNombre}} ({{sectorSeleccionado?.secCodigo}})\r\n              </ng-template>\r\n              <ng-template let-elemento pTemplate="item">\r\n                <div class=""> {{elemento.value.secNombre}} ({{elemento.value.secCodigo}})</div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <div class="form-group form-group-sm" *ngIf="!dataFormularioOrden">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_MOTIVO}}</b>\r\n              &nbsp;\r\n              <a *ngIf="!deshabilitarOpciones" (click)="listarMotivos()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_MOTIVOS}}"\r\n                  container="body"></span>\r\n              </a>\r\n            </label>\r\n            <select [(ngModel)]="motivoSeleccionado" class="form-control input-sm" name="motivoSeleccionado" [disabled]="deshabilitarOpciones"\r\n              (change)="traerConfiguracionPedidos();limpiarResultado();" required>\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option [ngValue]="motivo" *ngFor="let motivo of listaMotivos">{{motivo.pmDetalle}}\r\n                ({{motivo.invPedidosMotivoPK.pmCodigo}})</option>\r\n            </select>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n      <div class="card-footer" *ngIf="!deshabilitarOpciones">\r\n        <div class="text-right">\r\n          <div class="btn-group">\r\n            <button id="btnBuscar" type="button" class="btn btn-sm btn-primary" (click)="buscarOrdenesPedido(20)"\r\n              [disabled]="!frmFiltroOrdenPedido?.form.valid" title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i> {{constantes.LABEL_BUSCAR}}</button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n              [disabled]="!frmFiltroOrdenPedido?.form.valid">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(50)">{{constantes.TAG_ULTIMOS_50}} </a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(100)">{{constantes.TAG_ULTIMOS_100}}</a>\r\n              <a class="dropdown-item" (click)="buscarOrdenesPedido(null)">{{constantes.TAG_TODOS}}</a>\r\n            </div>&nbsp;\r\n            <button id="btnNuevo" class="btn btn-sm btn-primary" type="button" (click)="nuevaOrdenPedido()" title="{{constantes.ATAJO_NUEVO}}"\r\n              [disabled]="!frmFiltroOrdenPedido?.form.valid || !empresaSeleccionada?.listaSisPermisoTO?.gruCrear || !(funcionesUsuario.indexOf(\'Registrador\')>-1) || !(motivoSeleccionado && !motivoSeleccionado.pmInactivo) || !(sectorSeleccionado && sectorSeleccionado.secActivo)">\r\n              <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i>&nbsp; {{constantes.ACCION_NUEVO}}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}">\r\n    \x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n    <app-listado-orden-pedido [hidden]="!vistaListado" [parametrosBusqueda]="dataListadoOrden" [empresaSeleccionada]="empresaSeleccionada"\r\n      [operacion]="operacionListado" (enviarCancelar)="cancelar()" (enviarActivar)="cambiarActivar($event)"\r\n      (enviarDatosOC)="accionLista($event)" [filasTiempoRecargar]="filasTiempoRecargar"></app-listado-orden-pedido>\r\n    \x3c!-- GENERAR ORDEN DE PEDIDO --\x3e\r\n    <app-orden-pedido-formulario *ngIf="dataFormularioOrden" [data]="dataFormularioOrden" [empresaSeleccionada]="empresaSeleccionada"\r\n      (enviarLista)="accionLista($event)" (enviarCancelar)="cancelar()" (enviarActivar)="cambiarActivar($event)"></app-orden-pedido-formulario>\r\n    \x3c!-- GENERAR ORDEN DE COMPRA --\x3e\r\n    <app-formulario-generar-orden-compra *ngIf="dataFormularioCompra" [data]="dataFormularioCompra"\r\n      [empresaSeleccionada]="empresaSeleccionada" (enviarActivar)="cambiarActivar($event)" (enviarCancelar)="cancelar($event)"\r\n      (enviarLista)="limpiarResultado()"></app-formulario-generar-orden-compra>\r\n  </div>\r\n</div>'},lIFE:function(o,i){o.exports='\x3c!--LISTADO DE ORDEN DE PEDIDO --\x3e\r\n<div class="card m-0" [hidden]="!vistaListado" *ngIf="listadoResultado?.length > 0">\r\n  <div class="card-header p-1">\r\n    <button id="btnActivarOrdenCompra" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="cambiarActivar()"\r\n      type="button">\r\n      <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n    </button>\r\n    <strong>{{constantes.PEDIDOS_LISTADO}}</strong>\r\n    <div class="card-header-actions">\r\n      <div class="btn-group">\r\n        <div class="btn-group mr-1">\r\n          <button id="btnImprimir" type="button" class="btn btn-sm btn-primary" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n            container="body" (click)="imprimir()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir" title="{{constantes.ATAJO_IMPRIMIR}}">\r\n            <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n            <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n          </button>\r\n          <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"\r\n            [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir">\r\n          </button>\r\n          <div class="dropdown-menu">\r\n            <a class="dropdown-item" (click)="imprimirIndividual()">{{constantes.LABEL_IMPRIMIR_INDIVIDUAL}}</a>\r\n          </div>\r\n        </div>\r\n        <button id="btnExportar" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n          container="body" (click)="exportar()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar" title="{{constantes.ATAJO_EXPORTAR}}">\r\n          <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n          <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card-body p-0">\r\n    <div class="row">\r\n      <div class="col-sm-5 col-md-6">\r\n        <div class="input-group p-1">\r\n          <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n            size="100" style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..."\r\n            size="100">\r\n          <div class="input-group-append">\r\n            <span class="input-group-text">\r\n              <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="col-sm-7 col-md-6">\r\n        <div class="float-right pr-1">\r\n          <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n            maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n      [rowData]="listadoResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n      [suppressRowClickSelection]="true" (gridSizeChanged)="redimensionarColumnas()" [rowSelection]="rowSelection"\r\n      [enableColResize]="true" [frameworkComponents]="frameworkComponents" [context]="context" (gridReady)="onGridReady($event)"\r\n      (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n      (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (cellDoubleClicked)="consultarOrdenPedido()"\r\n      (cellFocused)="filaFocused($event)">\r\n    </ag-grid-angular>\r\n  </div>\r\n  <p-contextMenu #menuOpciones appendTo="body" [model]="opciones"></p-contextMenu>\r\n</div>\r\n\r\n\x3c!-- ORDEN DE PEDIDO --\x3e\r\n<app-detalle-pedido-para-orden-compra [hidden]="!dataFormularioPedido || carrito" [data]="dataFormularioPedido"\r\n  [empresaSeleccionada]="empresaSeleccionada" (enviarActivar)="cambiarActivarFormulario($event)" (enviarAccion)="consultarOrdenCompra($event)"\r\n  (enviarCancelar)="cancelar()" (enviarLista)="operacionEnLista($event)"></app-detalle-pedido-para-orden-compra>\r\n\x3c!-- ORDEN DE COMPRA --\x3e\r\n<app-formulario-generar-orden-compra *ngIf="dataFormularioCompra" [data]="dataFormularioCompra" [empresaSeleccionada]="empresaSeleccionada"\r\n  (enviarActivar)="cambiarActivarFormulario($event)" (enviarCancelar)="cancelar($event)" (enviarLista)="operacionEnLista($event)"></app-formulario-generar-orden-compra>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>\r\n<div class="row justify-content-end">\r\n  <a href="" id="excelDownload" #excelDownload></a>\r\n</div>'},lOIP:function(o,i){o.exports='<div class="row">\r\n  <div [ngClass]="{\'sr-only\':activar}" class="col-lg-3 col-md-4 col-sm-5">\r\n    <div class="card mb-2">\r\n      <div class="card-header">\r\n        <i class="{{constantes.ICON_FILTRAR}}"></i>\r\n        <strong>{{constantes.TITULO_FILTROS}}</strong>\r\n      </div>\r\n      <div class="card-body pb-0 pt-1">\r\n        <form #frmConfiguracionPedido="ngForm">\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <b>{{constantes.TAG_EMPRESA}}</b>\r\n            </label>\r\n            <select class="form-control input-sm" name="empresaSeleccionada" [(ngModel)]="empresaSeleccionada"\r\n              (ngModelChange)="cambiarEmpresaSelect()" required [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option selected [ngValue]="empresa" *ngFor="let empresa of listaEmpresas">{{empresa.empNombre}}\r\n                ({{empresa.empCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          <div class="form-group form-group-sm">\r\n            <label class="control-label">\r\n              <strong>{{constantes.TAG_SECTOR}}</strong>\r\n              &nbsp;\r\n              <a *ngIf="!vistaFormulario" (click)="listarSectores()">\r\n                <span class="{{constantes.ICON_REFRESCAR}}" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_SECTORES}}"\r\n                  container="body" *ngIf="!vistaFormulario"></span>\r\n              </a>\r\n            </label>\r\n            <select class="form-control input-sm" name="sectorSeleccionado" [(ngModel)]="sectorSeleccionado" (change)="limpiarResultado()"\r\n              required [disabled]="vistaFormulario">\r\n              <option selected disabled value="">{{constantes.TAG_SELECCIONE}}</option>\r\n              <option selected [ngValue]="sector" *ngFor="let sector of listaSectores">{{sector.secNombre}}\r\n                ({{sector.secCodigo}})</option>\r\n            </select>\r\n          </div>\r\n          \x3c!--Agregar usuarios--\x3e\r\n          <div *ngIf="vistaFormulario && accionAgregarUsuario">\r\n            <div class="form-group form-group-sm">\r\n              <label class="control-label">\r\n                <b>{{constantes.TAG_USUARIOS}}</b>\r\n              </label>\r\n              <span class="ui-fluid">\r\n                <p-autoComplete [appFocus]="true" isAutocomple="true" inputId="inputAutocomplete" forceSelection="true"\r\n                  autofocus [(ngModel)]="listUsuarioSeleccionado" name="listUsuarioSeleccionado" [suggestions]="listaUsuariosFiltrada"\r\n                  (completeMethod)="filtrarUsuarioEmpresa($event)" styleClass="wid100" [minLength]="1" placeholder="usuarios"\r\n                  field="usrNombre" [multiple]="true">\r\n                  <ng-template let-usuariosRegistradores pTemplate="item">\r\n                    <div class="ui-helper-clearfix">\r\n                      <div>{{usuariosRegistradores.usrNombre}} {{usuariosRegistradores.usrApellido}}</div>\r\n                    </div>\r\n                  </ng-template>\r\n                </p-autoComplete>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="card-footer" *ngIf="vistaFormulario && accionAgregarUsuario">\r\n        <div class="text-right">\r\n          \x3c!--Agregar--\x3e\r\n          <button type="button" class="btn btn-sm btn-primary mr-1" (click)="agregarUsuario()" [disabled]="cargando">\r\n            <i class="{{constantes.ICON_AGREGAR}}" aria-hidden="true"></i> {{constantes.LABEL_AGREGAR}}\r\n          </button>\r\n          \x3c!--Cancelar--\x3e\r\n          <button (click)="cancelarAgregarUsuario()" type="button" class="btn btn-sm btn-default" [disabled]="cargando">\r\n            <i class="{{constantes.ICON_CANCELAR}}"></i> {{constantes.LABEL_CANCELAR}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class="card-footer" *ngIf="!vistaFormulario">\r\n        <div class="text-right">\r\n          \x3c!--Buscar--\x3e\r\n          <div class="btn-group mr-1">\r\n            <button type="button" id="btnBuscarConfiguracionPedidos" class="btn btn-sm btn-primary" (click)="listarConfiguracionPedidos(false)"\r\n              title="{{constantes.ATAJO_BUSCAR}}">\r\n              <i class="{{constantes.ICON_BUSCAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_BUSCAR}}</span>\r\n            </button>\r\n            <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">\r\n            </button>\r\n            <div class="dropdown-menu">\r\n              <a class="dropdown-item" (click)="listarConfiguracionPedidos(true)"> {{constantes.TAG_INCLUIR_INACTIVOS}}</a>\r\n            </div>\r\n          </div>\r\n          \x3c!--Nuevo--\x3e\r\n          <button id="btnNuevoConfiguracionPedidos" [disabled]="!frmConfiguracionPedido?.form.valid || !empresaSeleccionada?.listaSisPermisoTO?.gruCrear"\r\n            class="btn btn-sm btn-primary" type="button" (click)="frmConfiguracionPedido?.form.valid ? nuevoConfiguracionPedido() : null"\r\n            title="{{constantes.ATAJO_NUEVO}}">\r\n            <i class="{{constantes.ICON_NUEVO}}" aria-hidden="true"></i> {{constantes.LABEL_NUEVO}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!-------------CONFIGURACI\xd3N GENERAL-----------------\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="vistaFormulario">\r\n    <form #frmConfiguracionOP="ngForm" autocomplete="off">\r\n      <div class="card m-0">\r\n        <div class="card-header p-1">\r\n          <button id="btnActivarConfiguracionPedidos" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="activar = !activar"\r\n            type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n            <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n          </button>\r\n          <b>{{tituloFormulario}} </b>\r\n          <div class="card-header-actions">\r\n            <div class="btn-group">\r\n              \x3c!-- Guardar nuevo--\x3e\r\n              <button id="btnGuardarConfiguracionPedidos" type="button" class="btn btn-sm btn-primary mr-1" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" (click)="guardarConfiguracionPedido(frmConfiguracionOP)"\r\n                title="{{constantes.ATAJO_GUARDAR}}" *ngIf="accion === constantes.ACCION_CREAR">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              \x3c!--Guardar editar--\x3e\r\n              <button id="btnGuardarConfiguracionPedidos" type="button" class="btn btn-sm btn-primary mr-1" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_GUARDAR}}" container="body" (click)="actualizarConfiguracionPedido(frmConfiguracionOP)"\r\n                title="{{constantes.ATAJO_GUARDAR}}" *ngIf="accion === constantes.ACCION_EDITAR">\r\n                <i class="{{constantes.ICON_GUARDAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_GUARDAR}}</span>\r\n              </button>\r\n              \x3c!--Cancelar--\x3e\r\n              <button id="btnCancelarConfiguracionPedidos" type="button" class="btn btn-sm btn-default mr-1" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_CANCELAR}}" container="body" (click)="cancelarAccion()" [disabled]="cargando"\r\n                title="{{constantes.ATAJO_CANCELAR}}" *ngIf="!(accion === constantes.ACCION_CONSULTAR)">\r\n                <i class="{{constantes.ICON_CANCELAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_CANCELAR}}</span>\r\n              </button>\r\n              \x3c!--Regresar--\x3e\r\n              <button id="btnCancelarConfiguracionPedidos" type="button" class="btn btn-sm btn-default mr-1" placement="top"\r\n                ngbTooltip="{{constantes.LABEL_REGRESAR}}" container="body" (click)="cancelarConfiguracionPedido()"\r\n                [disabled]="cargando" *ngIf="(accion === constantes.ACCION_CONSULTAR)">\r\n                <i class="{{constantes.ICON_REGRESAR}}" aria-hidden="true"></i>\r\n                <span class="d-none d-md-inline"> {{constantes.LABEL_REGRESAR}}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <fieldset [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n          <div class="card-body p-0">\r\n            <div class="card m-1">\r\n              <div class="card-header">\r\n                <b>{{constantes.CONFIGURACION_GENERAL}}</b>\r\n                <div class="card-header-actions">\r\n                  <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#general"\r\n                    aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n                    <i class="fa fa-minus"></i>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="general">\r\n                <div class="row">\r\n                  <div class="col-lg-4 col-md-6 col-sm-12">\r\n                    <div class="form-group form-group-sm has-feedback">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_CODIGO}}</strong>&nbsp;\r\n                      </label>\r\n                      <input [appFocus]="accion === constantes.ACCION_CREAR" name="pmCodigo" [(ngModel)]="invPedidosMotivo.invPedidosMotivoPK.pmCodigo"\r\n                        placeholder="{{constantes.TAG_OBLIGATORIO}}" pattern="{{constantes.PATTERN_CODIGO}}" class="form-control form-control-sm text-uppercase mousetrap"\r\n                        required appUppercase [disabled]="accion !== constantes.ACCION_CREAR">\r\n                      <span class="fa fa-question-circle form-control-feedback" placement="left" ngbPopover="{{constantes.MSJ_INFOCODIGO}}"\r\n                        container="body" triggers="mouseenter:mouseleave" *ngIf="accion === constantes.ACCION_CREAR"></span>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-lg-4 col-md-6 col-sm-12">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label  ">\r\n                        <strong>{{constantes.TAG_DETALLE}}</strong>\r\n                      </label>\r\n                      <input [appFocus]="accion === constantes.ACCION_EDITAR" name="pmDetalle" [(ngModel)]="invPedidosMotivo.pmDetalle"\r\n                        class="form-control form-control-sm text-uppercase mousetrap" required placeholder="{{constantes.TAG_OBLIGATORIO}}"\r\n                        appUppercase>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-lg-4 col-md-6 col-sm-12">\r\n                    <div class="form-group form-group-sm cp">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_CATEGORIA}}</strong>&nbsp;\r\n                        <a (click)="listarCategorias()" *ngIf="!(accion===constantes.ACCION_CONSULTAR)">\r\n                          <span class="fa fa-refresh" placement="top" ngbTooltip="{{constantes.MSJ_RECARGAR_CATEGORIAS}}"\r\n                            container="body"></span>\r\n                        </a>\r\n                      </label>\r\n                      <p-dropdown [options]="listaCategorias" name="categoria" [showClear]="true" [(ngModel)]="categoriaSeleccionada"\r\n                        placeholder="{{constantes.TAG_TODOS}}" optionLabel="catDetalle" [disabled]="accion === constantes.ACCION_CONSULTAR">\r\n                        <ng-template let-item pTemplate="selectedItem">\r\n                          {{categoriaSeleccionada?.catDetalle}} ({{categoriaSeleccionada?.catCodigo}})\r\n                        </ng-template>\r\n                        <ng-template let-elemento pTemplate="item">\r\n                          <div class=""> {{elemento.value.catDetalle}} ({{elemento.value.catCodigo}})</div>\r\n                        </ng-template>\r\n                      </p-dropdown>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-lg-4 col-md-6 col-sm-12">\r\n                    <div class="form-group form-group-sm mb-0">\r\n                      <label class="control-label  ">\r\n                        <strong>{{constantes.MSJ_DIAS_PEDIDO}}</strong>\r\n                      </label>\r\n                      <div class="p-2">\r\n                        <p-toggleButton onLabel="{{constantes.TAG_LUN}}" offLabel="{{constantes.TAG_LUN}}" name="pmLunes"\r\n                          [(ngModel)]="invPedidosMotivo.pmLunes" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                        <p-toggleButton onLabel="{{constantes.TAG_MAR}}" offLabel="{{constantes.TAG_MAR}}" name="pmMartes"\r\n                          [(ngModel)]="invPedidosMotivo.pmMartes" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                        <p-toggleButton onLabel="{{constantes.TAG_MIE}}" offLabel="{{constantes.TAG_MIE}}" name="pmMiercoles"\r\n                          [(ngModel)]="invPedidosMotivo.pmMiercoles" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                        <p-toggleButton onLabel="{{constantes.TAG_JUE}}" offLabel="{{constantes.TAG_JUE}}" name="pmJueves"\r\n                          [(ngModel)]="invPedidosMotivo.pmJueves" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                        <p-toggleButton onLabel="{{constantes.TAG_VIE}}" offLabel="{{constantes.TAG_VIE}}" name="pmViernes"\r\n                          [(ngModel)]="invPedidosMotivo.pmViernes" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                        <p-toggleButton onLabel="{{constantes.TAG_SAB}}" offLabel="{{constantes.TAG_SAB}}" name="pmSabado"\r\n                          [(ngModel)]="invPedidosMotivo.pmSabado" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                        <p-toggleButton onLabel="{{constantes.TAG_DOM}}" offLabel="{{constantes.TAG_DOM}}" name="pmDomingo"\r\n                          [(ngModel)]="invPedidosMotivo.pmDomingo" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-lg-2 col-md-6 col-sm-12">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label  ">\r\n                        <strong>{{constantes.TAG_HORA_INICIO}}</strong>\r\n                      </label>\r\n                      <input name="pmHoraInicio" type="time" [(ngModel)]="invPedidosMotivo.pmHoraInicio" appMaxTime="pmHoraFin"\r\n                        reverse="true" required class="form-control form-control-sm mousetrap">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-lg-2 col-md-6 col-sm-12">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label  ">\r\n                        <strong>{{constantes.TAG_HORA_FIN}}</strong>\r\n                      </label>\r\n                      <input name="pmHoraFin" type="time" [(ngModel)]="invPedidosMotivo.pmHoraFin" appMinTime="pmHoraInicio"\r\n                        required class="form-control form-control-sm mousetrap">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-lg-4 col-md-6 col-sm-12">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_DIAS_VENCIMIENTO_ORDEN}} </strong>\r\n                      </label>\r\n                      <input type="text" [(ngModel)]="invPedidosMotivo.pmPlazoPredeterminado" name="pmPlazoPredeterminado"\r\n                        class="form-control form-control-sm mousetrap text-uppercase" placeholder="{{constantes.TAG_OBLIGATORIO}} ({{constantes.TAG_CANTIDAD_DIAS}})"\r\n                        appMinNumber="1" maxlength="3" appEnteroPositivo required>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-lg-4 col-md-6 col-sm-12">\r\n                    <div class="form-group form-group-sm">\r\n                      <label class="control-label">\r\n                        <strong>{{constantes.TAG_NOTIFICAR_CORREO}}</strong>\r\n                      </label>\r\n                      <div class="p-2">\r\n                        <p-toggleButton *ngIf="!invPedidosMotivo.pmRegistradorAprobador" onLabel="{{constantes.TAG_REGISTRADOR}}"\r\n                          offLabel="{{constantes.TAG_REGISTRADOR}}" name="pmNotificarRegistrador" [(ngModel)]="invPedidosMotivo.pmNotificarRegistrador"\r\n                          [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                        <p-toggleButton onLabel="{{constantes.TAG_APROBADOR}}" offLabel="{{constantes.TAG_APROBADOR}}"\r\n                          name="pmNotificarAprobador" [(ngModel)]="invPedidosMotivo.pmNotificarAprobador" *ngIf="!invPedidosMotivo.pmAprobacionAutomatica"\r\n                          [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                        <p-toggleButton onLabel="{{constantes.TAG_EJECUTOR}}" offLabel="{{constantes.TAG_EJECUTOR}}"\r\n                          name="pmNotificarEjecutor" [(ngModel)]="invPedidosMotivo.pmNotificarEjecutor" [disabled]="accion === constantes.ACCION_CONSULTAR"></p-toggleButton>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-lg-4 col-md-6 col-sm-12">\r\n                    <div class="switch">\r\n                      <label>\r\n                        <input id="pmAprobacionAutomatica" name="pmAprobacionAutomatica" type="checkbox" [(ngModel)]="invPedidosMotivo.pmAprobacionAutomatica">\r\n                        <span class="lever"></span>{{constantes.MSJ_APROBACION_AUTOMATICA}}\r\n                      </label>\r\n                    </div>\r\n                    <div class="switch">\r\n                      <label>\r\n                        <input id="pmExigirCliente" name="pmExigirCliente" type="checkbox" [(ngModel)]="invPedidosMotivo.pmExigirCliente">\r\n                        <span class="lever"></span> {{constantes.TAG_REQUERIR_CLIENTE}}\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="card m-1">\r\n              <div class="card-header">\r\n                <b>{{constantes.CONFIGURACION_USUARIO}}</b>\r\n                <div class="card-header-actions">\r\n                  <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#usuarios"\r\n                    aria-expanded="true" placement="top" ngbTooltip="Ocultar/Mostrar">\r\n                    <i class="fa fa-minus"></i>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="usuarios">\r\n                <div class="row">\r\n                  <div [ngClass]="{\'col-lg-4 col-md-12 col-sm-12\':!invPedidosMotivo?.pmAprobacionAutomatica,\'col-lg-6 col-md-6 col-sm-6\':invPedidosMotivo?.pmAprobacionAutomatica}"\r\n                    class="p-0">\r\n                    \x3c!--Registradores--\x3e\r\n                    <div class="card m-1">\r\n                      <div class="card-header p-1">\r\n                        <i class="{{constantes.ICON_USUARIO}}"></i>\r\n                        <strong>{{constantes.PEDIDOS_CONFIGURACION_REGISTRADOR}}</strong>\r\n                        <button type="button" *ngIf="!accionAgregarUsuario && empresaSeleccionada.listaSisPermisoTO.gruCrear && accion !== constantes.ACCION_CONSULTAR"\r\n                          class="btn btn-sm btn-primary pull-right" (click)="mostrarAgregarUsuario(constantes.TAG_REGISTRADOR)"\r\n                          placement="top" ngbTooltip="{{constantes.LABEL_AGREGAR}}" triggers="mouseenter:mouseleave"\r\n                          container="body">\r\n                          <i class="{{constantes.ICON_AGREGAR}}"></i>\r\n                        </button>\r\n                      </div>\r\n                      <div class="card-body" class="no-padding">\r\n                        <div [hidden]="invPedidosConfiguracionTO.listRegistradores.length==0">\r\n                          <ag-grid-angular #agGridRegistrador id="agGridRegistrador" style="width: 100%;" class="ag-theme-balham"\r\n                            [rowData]="invPedidosConfiguracionTO.listRegistradores" [columnDefs]="columnRegistrador"\r\n                            [enableCellChangeFlash]="true" [enableSorting]="true" [rowSelection]="rowSelection"\r\n                            [enableColResize]="true" [components]="components" [context]="context" [animateRows]="true"\r\n                            (gridSizeChanged)="redimencionarColumnasConfiguracion($event.api)" [gridAutoHeight]="true"\r\n                            (gridReady)="onGridReadyConfiguracion($event, constantes.TAG_REGISTRADOR)" (rowSelected)="usuarioSeleccionado = $event.node.data"\r\n                            (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenuConfiguracion($event.data, $event.event, cmr)"\r\n                            [overlayNoRowsTemplate]="overlayNoRowsTemplate">\r\n                          </ag-grid-angular>\r\n                        </div>\r\n                        <p-contextMenu #cmr [model]="opcionesRegistrador" appendTo=\'body\'></p-contextMenu>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div [ngClass]="{\'col-lg-4 col-md-12 col-sm-12\':!(invPedidosMotivo?.pmAprobacionAutomatica),\'col-lg-6 col-md-6 col-sm-6\': invPedidosMotivo?.pmAprobacionAutomatica}"\r\n                    class="p-0" *ngIf="!invPedidosMotivo.pmAprobacionAutomatica">\r\n                    \x3c!--Aprobadores--\x3e\r\n                    <div class="card m-1 ">\r\n                      <div class="card-header p-1">\r\n                        <i class="{{constantes.ICON_USUARIO}}"></i>\r\n                        <strong>{{constantes.PEDIDOS_CONFIGURACION_APROBADOR}}</strong>\r\n                        <button type="button" *ngIf="!accionAgregarUsuario && empresaSeleccionada.listaSisPermisoTO.gruCrear && accion !== constantes.ACCION_CONSULTAR"\r\n                          class="btn btn-sm btn-primary pull-right" (click)="mostrarAgregarUsuario(constantes.TAG_APROBADOR)"\r\n                          placement="top" ngbTooltip="{{constantes.LABEL_AGREGAR}}" container="body">\r\n                          <i class="{{constantes.ICON_AGREGAR}}"></i>\r\n                        </button>\r\n                      </div>\r\n                      <div class="card-body" class="no-padding">\r\n                        <div [hidden]="invPedidosConfiguracionTO.listAprobadores.length==0">\r\n                          <ag-grid-angular #agGridAprobador id="agGridAprobador" style="width: 100%;" class="ag-theme-balham"\r\n                            [rowData]="invPedidosConfiguracionTO.listAprobadores" [columnDefs]="columnAprobador"\r\n                            [enableCellChangeFlash]="true" [enableSorting]="true" [rowSelection]="rowSelection"\r\n                            [enableColResize]="true" [components]="components" [context]="context" [animateRows]="true"\r\n                            (gridSizeChanged)="redimencionarColumnasConfiguracion($event.api)" [gridAutoHeight]="true"\r\n                            (gridReady)="onGridReadyConfiguracion($event, constantes.TAG_APROBADOR)" (rowSelected)="usuarioSeleccionado = $event.node.data"\r\n                            (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenuConfiguracion($event.data, $event.event, cma)"\r\n                            [overlayNoRowsTemplate]="overlayNoRowsTemplate">\r\n                          </ag-grid-angular>\r\n                        </div>\r\n                        <p-contextMenu #cma [model]="opcionesAprobador" appendTo=\'body\'></p-contextMenu>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div [ngClass]="{\'col-lg-4 col-md-12 col-sm-12\':!invPedidosMotivo?.pmAprobacionAutomatica,\'col-lg-6 col-md-6 col-sm-6\':invPedidosMotivo?.pmAprobacionAutomatica}"\r\n                    class="p-0">\r\n                    \x3c!--Regitrador y aprobador--\x3e\r\n                    <div class="card m-1 ">\r\n                      <div class="card-header p-1">\r\n                        <i class="{{constantes.ICON_USUARIO}}"></i>\r\n                        <strong> {{constantes.PEDIDOS_CONFIGURACION_EJECUTOR}}</strong>\r\n                        <button type="button" *ngIf="!accionAgregarUsuario && empresaSeleccionada.listaSisPermisoTO.gruCrear && accion !== constantes.ACCION_CONSULTAR"\r\n                          class="btn btn-sm btn-primary pull-right" (click)="mostrarAgregarUsuario(constantes.TAG_EJECUTOR)"\r\n                          placement="top" ngbTooltip="{{constantes.LABEL_AGREGAR}}" container="body">\r\n                          <i class="{{constantes.ICON_AGREGAR}}"></i>\r\n                        </button>\r\n                      </div>\r\n                      <div class="card-body" class="no-padding">\r\n                        <div [hidden]="invPedidosConfiguracionTO.listEjecutores.length==0">\r\n                          <ag-grid-angular #agGridEjecutor id="agGridEjecutor" style="width: 100%;" class="ag-theme-balham"\r\n                            [rowData]="invPedidosConfiguracionTO.listEjecutores" [columnDefs]="columnEjecutor"\r\n                            [enableCellChangeFlash]="true" [enableSorting]="true" [rowSelection]="rowSelection"\r\n                            [enableColResize]="true" [components]="components" [context]="context" [animateRows]="true"\r\n                            (gridSizeChanged)="redimencionarColumnasConfiguracion($event.api)" [gridAutoHeight]="true"\r\n                            (gridReady)="onGridReadyConfiguracion($event,constantes.TAG_EJECUTOR)" (rowSelected)="usuarioSeleccionado = $event.node.data"\r\n                            (contextmenu)="$event.preventDefault()" (cellContextMenu)="mostrarContextMenuConfiguracion($event.data, $event.event, cme)"\r\n                            [overlayNoRowsTemplate]="overlayNoRowsTemplate">\r\n                          </ag-grid-angular>\r\n                        </div>\r\n                        <p-contextMenu #cme [model]="opcionesEjecutor" appendTo=\'body\'></p-contextMenu>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </fieldset>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  \x3c!---------------LISTADO DE MOTIVOS-------------------\x3e\r\n  <div [ngClass]="{\'col-lg-9 col-md-8 col-sm-7\':!activar,\'col-lg-12 col-md-12 col-sm-12\':activar}" *ngIf="!vistaFormulario">\r\n    <div class="card m-0" *ngIf="listadoResultado?.length > 0">\r\n      <div class="card-header p-1">\r\n        <button id="btnActivarConfiguracionPedidos" class="btn btn-sm btn-primary mr-1 d-none d-sm-inline" (click)="activar = !activar"\r\n          type="button" title="{{constantes.ATAJO_MOSTRAR_OCULTAR_FILTROS}}">\r\n          <i class="{{activar?constantes.ICON_MOSTRAR_FILTRO:constantes.ICON_OCULTAR_FILTRO}}" aria-hidden="true"></i>\r\n        </button>\r\n        <b>{{constantes.TITULO_CONFIGURACION_PEDIDOS}}</b>\r\n        <div class="card-header-actions">\r\n          <div class="btn-group">\r\n            <button id="btnImprimir" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_IMPRIMIR}}"\r\n              container="body" (click)="imprimir()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruImprimir"\r\n              title="{{constantes.ATAJO_IMPRIMIR}}">\r\n              <i class="{{constantes.ICON_IMPRIMIR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_IMPRIMIR}}</span>\r\n            </button>\r\n            <button id="btnExportar" type="button" class="btn btn-sm btn-primary mr-1" placement="top" ngbTooltip="{{constantes.LABEL_EXPORTAR}}"\r\n              container="body" (click)="exportar()" [disabled]="!empresaSeleccionada.listaSisPermisoTO.gruExportar"\r\n              title="{{constantes.ATAJO_EXPORTAR}}">\r\n              <i class="{{constantes.ICON_EXPORTAR}}" aria-hidden="true"></i>\r\n              <span class="d-none d-md-inline"> {{constantes.LABEL_EXPORTAR}}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="card-body p-0">\r\n        <div class="row">\r\n          <div class="col-sm-5 col-md-6">\r\n            <div class="input-group p-1">\r\n              <input type="text" [(ngModel)]="filtroGlobal" (input)="filtrarRapido()" class="form-control form-control-sm input-filter mousetrap"\r\n                style="font-family: Arial, FontAwesome;" placeholder="&#xf0b0; {{constantes.TAG_FILTRAR}}..." size="100">\r\n              <div class="input-group-append">\r\n                <span class="input-group-text">\r\n                  <i class="{{constantes.ICON_BUSCAR}}"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-sm-7 col-md-6">\r\n            <div class="float-right pr-1">\r\n              <p-multiSelect [options]="columnDefs" [(ngModel)]="columnDefsSelected" optionLabel="headerName"\r\n                maxSelectedLabels="1" selectedItemsLabel="{0} {{constantes.MSJ_COLUMNAS}}" defaultLabel="{{constantes.TAG_SELECCIONE}}"></p-multiSelect>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!--Tabla--\x3e\r\n        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 203px);" class="ag-theme-balham"\r\n          [rowData]="listadoResultado" [columnDefs]="columnDefsSelected" [enableSorting]="true" [multiSortKey]="multiSortKey"\r\n          [rowSelection]="rowSelection" [enableColResize]="true" [components]="components" [context]="context"\r\n          [frameworkComponents]="frameworkComponents" (gridSizeChanged)="redimencionarColumnas()" (gridReady)="onGridReady($event)"\r\n          (rowSelected)="objetoSeleccionado = $event.node.data" (cellContextMenu)="mostrarContextMenu($event.data, $event.event)"\r\n          (contextmenu)="$event.preventDefault()" (filterChanged)="actualizarFilas()" (cellFocused)="filaFocused($event)">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<p-contextMenu #menuOpciones appendTo="body" [model]="opciones" [baseZIndex]="1100"></p-contextMenu>\r\n<div *ngIf="cargando">\r\n  <app-cargando></app-cargando>\r\n</div>'},mgPJ:function(o,i,e){"use strict";e.r(i);var t=e("CcnG"),a=e("ZYCi"),r=e("LlOB"),n=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},s=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},c=function(){function o(o,i){var e=this;this.router=o,this.appSistemaService=i,this.showIndex=!1,this.router.events.subscribe(function(o){e.showIndex="/modulos/pedidos"===e.router.url})}return o.prototype.ngOnInit=function(){this.listaAccesoRapido=[{item:"Configuraci\xf3n de pedido",url:"configuracionPedido",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Archivo","configuracionPedido")},{item:"Producto",url:"pedidoProducto",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Archivo","pedidoProducto")},{item:"Generar \xf3rdenes de pedidos",url:"generarOrdenPedido",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Transacciones","generarOrdenPedido")},{item:"Aprobar \xf3rdenes de pedidos",url:"aprobarOrdenPedido",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Transacciones","aprobarOrdenPedido")},{item:"Generar \xf3rdenes de compra",url:"generarOrdenCompra",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Transacciones","generarOrdenCompra")},{item:"Aprobar \xf3rdenes de compra",url:"aprobarOrdenCompra",mostrar:this.appSistemaService.validarPermisoAccesoDirecto("Transacciones","aprobarOrdenCompra")}]},o=n([Object(t.Component)({selector:"app-pedidos",template:e("8Fl+")}),s("design:paramtypes",[a.Router,r.a])],o)}(),d=e("SZbH"),l=e("yccp"),p=e("hyxj"),u=e("+q+w"),m=e("sffu"),h=e("ax4V"),v=function(){function o(o){this.usrCodigo="",this.usrNombre="",this.usrApellido="",this.usrEmailUsuario="",o&&this.hydrate(o)}return o.prototype.hydrate=function(o){this.usrCodigo=o.usrCodigo?o.usrCodigo:this.usrCodigo,this.usrNombre=o.usrNombre?o.usrNombre:this.usrNombre,this.usrApellido=o.usrApellido?o.usrApellido:this.usrApellido,this.usrEmailUsuario=o.usrEmailUsuario?o.usrEmailUsuario:this.usrEmailUsuario},o}(),g=function(){function o(o){o&&this.hydrate(o)}return o.prototype.hydrate=function(o){this.detSecuencial=o.detSecuencial?o.detSecuencial:this.detSecuencial,this.invPedidosMotivoTO=o.invPedidosMotivoTO?new u.a(o.invPedidosMotivoTO):this.invPedidosMotivoTO,this.usuario=o.usuario?new v(o.usuario):this.usuario,this.activo=o.activo?o.activo:this.activo},o}(),A=function(){function o(o){this.hydrate(o)}return o.prototype.hydrate=function(o){this.detSecuencial=o.detSecuencial?o.detSecuencial:this.detSecuencial,this.invPedidosMotivoTO=o.invPedidosMotivoTO?new u.a(o.invPedidosMotivoTO):this.invPedidosMotivoTO,this.usuario=o.usuario?new v(o.usuario):this.usuario,this.activo=o.activo?o.activo:this.activo},o}(),f=function(){function o(o){this.hydrate(o)}return o.prototype.hydrate=function(o){this.detSecuencial=o.detSecuencial?o.detSecuencial:this.detSecuencial,this.invPedidosMotivoTO=o.invPedidosMotivoTO?new u.a(o.invPedidosMotivoTO):this.invPedidosMotivoTO,this.usuario=o.usuario?new v(o.usuario):this.usuario,this.activo=o.activo?o.activo:this.activo},o}(),C=e("jC/Q"),S=e("nR5P"),O=e("8fiX"),b=e("mwBN"),R=e("GGLN"),I=e("4sC9"),E=e("EnEm"),T=e("CEfs"),_=e("nxr/"),P=e("zkCp"),M=e("WCC+"),y=e("Vlg3"),L=e("madF"),N=e("gLZI"),D=e("gIcY"),w=e("Ungd"),U=e("IGT0"),F=e("+JJ7"),G=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},j=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},x=function(){function o(o,i,e,t,a,r,n,s,c,d,l){this.route=o,this.toastr=i,this.configuracionPedidoService=e,this.sistemaService=t,this.atajoService=a,this.sectorService=r,this.utilService=n,this.filasService=s,this.cdRef=c,this.categoriaService=d,this.archivoService=l,this.vistaFormulario=!1,this.empresaSeleccionada=new O.a,this.listaEmpresas=[],this.activar=!1,this.invPedidosConfiguracionTO=new h.a,this.listaUsuarios=[],this.listaUsuariosTodos=[],this.listaUsuariosFiltrada=[],this.listUsuarioSeleccionado=[],this.listaCategorias=[],this.usuarioSeleccionado={},this.motivoSeleccionado=new u.a,this.invPedidosMotivo=new U.a,this.categoriaSeleccionada=new M.a,this.sectorSeleccionado=new _.a,this.listaSectores=[],this.accionAgregarUsuario=!1,this.tipoUsuario="",this.cargando=!1,this.isScreamMd=!0,this.filasTiempo=new E.a,this.accion=null,this.listadoResultado=[],this.filtroGlobal="",this.tituloFormulario=b.a.TITULO_CONFIGURACION_PEDIDOS,this.opcionesRegistrador=[],this.opcionesEjecutor=[],this.opcionesAprobador=[],this.objetoSeleccionado=new u.a,this.columnAprobador=[],this.columnDefs=[],this.columnDefsSelected=[],this.columnRegistrador=[],this.columnEjecutor=[],this.components={},this.listRegistradores=new Array,this.rowIndexTabla=0,this.constantes=b.a}return o.prototype.ngOnInit=function(){this.listaEmpresas=this.route.snapshot.data.configuracionPedido,this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),this.listaEmpresas&&this.cambiarEmpresaSelect(),this.isScreamMd=!(window.innerWidth<=576),this.iniciarAgGrid(),this.inicializarAtajos()},o.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},o.prototype.inicializarAtajos=function(){var o=this;this.atajoService.add(new l.Hotkey(b.a.ATAJO_AYUDA,function(){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var o=document.getElementById("btnActivarConfiguracionPedidos");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_BUSCAR,function(){var o=document.getElementById("btnBuscarConfiguracionPedidos");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_NUEVO,function(){var o=document.getElementById("btnNuevoConfiguracionPedidos");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_GUARDAR,function(){var o=document.getElementById("btnGuardarConfiguracionPedidos");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_CANCELAR,function(){var o=document.getElementById("btnCancelarConfiguracionPedidos");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_IMPRIMIR,function(){var o=document.getElementById("btnImprimir");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_EXPORTAR,function(){var o=document.getElementById("btnExportar");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_CONSULTAR,function(){return!o.vistaFormulario&&o.objetoSeleccionado&&o.listadoResultado.length>0&&o.consultarInvPedidoMotivo(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_EDITAR,function(){return!o.vistaFormulario&&o.objetoSeleccionado&&o.listadoResultado.length>0&&o.editarInvPedidoMotivo(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_ELIMINAR,function(){return!o.vistaFormulario&&o.objetoSeleccionado&&o.listadoResultado.length>0&&o.eliminarInvPedidoMotivo(),!1}))},o.prototype.listarSectores=function(){this.cargando=!0,this.listaSectores=[];var o={empresa:b.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(o,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarSectores=function(o){var i=this;if(this.listaSectores=o,this.listaSectores.length>0){var e=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(o){return o.secCodigo===i.sectorSeleccionado.secCodigo}):this.listaSectores[0];this.sectorSeleccionado=e||this.listaSectores[0]}else this.sectorSeleccionado=null;this.cargando=!1},o.prototype.listarCategorias=function(){this.cargando=!0,this.listaCategorias=[];var o={empresa:this.empresaSeleccionada.empCodigo};this.categoriaService.listarInvProductoCategoriaTO(o,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarInvProductoCategoriaTO=function(o){var i=this;this.listaCategorias=o,this.listaCategorias.length>0?this.categoriaSeleccionada=this.categoriaSeleccionada&&this.categoriaSeleccionada.catCodigo?this.listaCategorias.find(function(o){return o.catCodigo===i.categoriaSeleccionada.catCodigo}):this.listaCategorias[0]:this.categoriaSeleccionada=null,this.cargando=!1},o.prototype.limpiarResultado=function(){this.listadoResultado=[],this.invPedidosConfiguracionTO=new h.a,this.rowIndexTabla=0,this.vistaFormulario=!1,this.accion=null,this.filasTiempo.resetearContador(),this.actualizarFilas()},o.prototype.cambiarEmpresaSelect=function(){b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.listaUsuarios=[],this.listaUsuariosTodos=[],this.listaSectores=[],this.sectorSeleccionado=null;var o={empresa:b.a.KEY_EMPRESA_SELECT,incluirInactivos:!1};this.sistemaService.getListaSisUsuario(o,this,b.a.KEY_EMPRESA_SELECT),this.listarSectores(),this.listarCategorias(),this.limpiarResultado()},o.prototype.despuesDeListarUsuario=function(o){this.listaUsuarios=o||[],this.listaUsuariosTodos=o||[]},o.prototype.mostrarAgregarUsuario=function(o){this.empresaSeleccionada.listaSisPermisoTO.gruCrear?(this.tipoUsuario=o,this.activar=!1,this.listaUsuarios=this.listaUsuariosTodos.slice(),this.listUsuarioSeleccionado=[],this.accionAgregarUsuario=!0,this.cdRef.detectChanges()):this.toastr.warning(b.a.ERROR_403_TEXTO,b.a.ERROR_403_TITULO)},o.prototype.agregarUsuario=function(){var o=this;if(0==this.listUsuarioSeleccionado.length)this.toastr.info(b.a.MSJ_SELECCIONE_USUARIO,"");else if(this.empresaSeleccionada.listaSisPermisoTO.gruCrear){var i=Object.assign({},this.invPedidosConfiguracionTO);switch(this.tipoUsuario){case b.a.TAG_REGISTRADOR:this.listUsuarioSeleccionado.forEach(function(e){var t=i.listRegistradores?i.listRegistradores.find(function(o){return o.usuario.usrCodigo===e.usrCodigo}):null;if(t)t.activo?o.toastr.warning(b.a.MSJ_REGISTRADOR_MISMA_IDENTIFICACION,b.a.PEDIDOS_CONFIGURACION_NUEVO):(t.activo=!0,o.gridRegistrador&&o.gridRegistrador.updateRowData({add:[t]}));else{var a=new g({activo:!0,detSecuencial:0,invPedidosMotivoTO:o.motivoSeleccionado});a.usuario=e,i.listRegistradores.push(a),o.gridRegistrador&&o.gridRegistrador.updateRowData({add:[a]})}});break;case b.a.TAG_EJECUTOR:this.listUsuarioSeleccionado.forEach(function(e){var t=i.listEjecutores?i.listEjecutores.find(function(o){return o.usuario.usrCodigo===e.usrCodigo}):null;if(t)t.activo?o.toastr.warning(b.a.MSJ_REGISTRADOR_MISMA_IDENTIFICACION,b.a.PEDIDOS_CONFIGURACION_NUEVO):(t.activo=!0,o.gridEjecutor&&o.gridEjecutor.updateRowData({add:[t]}));else{var a=new A({activo:!0,detSecuencial:0,invPedidosMotivoTO:o.motivoSeleccionado});a.usuario=e,i.listEjecutores.push(a),o.gridEjecutor&&o.gridEjecutor.updateRowData({add:[a]})}});break;case b.a.TAG_APROBADOR:this.listUsuarioSeleccionado.forEach(function(e){var t=i.listAprobadores?i.listAprobadores.find(function(o){return o.usuario.usrCodigo===e.usrCodigo}):null;if(t)t.activo?o.toastr.warning(b.a.MSJ_REGISTRADOR_MISMA_IDENTIFICACION,b.a.PEDIDOS_CONFIGURACION_NUEVO):(t.activo=!0,o.gridAprobador&&o.gridAprobador.updateRowData({add:[t]}));else{var a=new f({activo:!0,detSecuencial:0,invPedidosMotivoTO:o.motivoSeleccionado});a.usuario=e,i.listAprobadores.push(a),o.gridAprobador&&o.gridAprobador.updateRowData({add:[a]})}})}this.invPedidosConfiguracionTO=i,this.actualizarListaUsuario()}else this.toastr.warning(b.a.ERROR_403_TEXTO,b.a.ERROR_403_TITULO)},o.prototype.actualizarListaUsuario=function(){var o=this;this.listUsuarioSeleccionado.forEach(function(i){o.listaUsuarios.splice(o.listaUsuarios.findIndex(function(o){return o.usrCodigo===i.usrCodigo}),1)}),this.cancelarAgregarUsuario()},o.prototype.filtrarUsuarioEmpresa=function(o){var i=o.query,e=[];this.listaUsuarios.forEach(function(o){0!=o.usrNombre.toLowerCase().indexOf(i.toLowerCase())&&0!=o.usrApellido.toLowerCase().indexOf(i.toLowerCase())||e.push(o)}),this.listaUsuariosFiltrada=e},o.prototype.eliminarUsuarioLista=function(o){var i=this;if(this.empresaSeleccionada.listaSisPermisoTO.gruEliminar){var e={title:b.a.MSJ_TITULO_ELIMINAR,texto:b.a.MSJ_PREGUNTA_ELIMINAR,type:b.a.SWAL_WARNING,confirmButtonText:b.a.MSJ_SI_ELIMINAR,cancelButtonText:b.a.MSJ_CANCELAR,confirmButtonColor:b.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){if(e){var t=0;switch(o){case b.a.TAG_REGISTRADOR:(t=i.invPedidosConfiguracionTO.listRegistradores.findIndex(function(o){return o.usuario.usrCodigo===i.usuarioSeleccionado.usuario.usrCodigo}))>-1&&(i.invPedidosConfiguracionTO.listRegistradores[t].activo=!1),i.gridRegistrador&&i.gridRegistrador.updateRowData({remove:[i.invPedidosConfiguracionTO.listRegistradores[t]]});break;case b.a.TAG_EJECUTOR:(t=i.invPedidosConfiguracionTO.listEjecutores.findIndex(function(o){return o.usuario.usrCodigo===i.usuarioSeleccionado.usuario.usrCodigo}))>-1&&(i.invPedidosConfiguracionTO.listEjecutores[t].activo=!1),i.gridEjecutor&&i.gridEjecutor.updateRowData({remove:[i.invPedidosConfiguracionTO.listEjecutores[t]]});break;case b.a.TAG_APROBADOR:if((t=i.invPedidosConfiguracionTO.listAprobadores.findIndex(function(o){return o.usuario.usrCodigo===i.usuarioSeleccionado.usuario.usrCodigo}))>-1&&(i.invPedidosConfiguracionTO.listAprobadores[t].activo=!1),i.invPedidosConfiguracionTO.listAprobadores[t].activo=!1,i.invPedidosMotivo.pmAprobacionAutomatica){var a=i.invPedidosConfiguracionTO.listRegistradores.findIndex(function(o){return o.usuario.usrCodigo===i.usuarioSeleccionado.usuario.usrCodigo});a>-1&&(i.invPedidosConfiguracionTO.listRegistradores[a].activo=!1)}i.gridAprobador&&i.gridAprobador.updateRowData({remove:[i.invPedidosConfiguracionTO.listAprobadores[t]]})}if(t>-1)-1===i.listaUsuarios.findIndex(function(o){return o.usrCodigo===i.usuarioSeleccionado.usuario.usrCodigo})&&i.listaUsuarios.push(i.usuarioSeleccionado.usuario)}})}else this.toastr.warning(b.a.ERROR_403_TEXTO,b.a.ERROR_403_TITULO)},o.prototype.cancelarAgregarUsuario=function(){this.listUsuarioSeleccionado=[],this.listaUsuariosFiltrada=[],this.accionAgregarUsuario=!1},o.prototype.cancelarConfiguracionPedido=function(){this.usuarioSeleccionado=null,this.invPedidosConfiguracionTO=new h.a,this.invPedidosMotivo=new U.a,this.vistaFormulario=!1,this.accion=null,this.tituloFormulario=null,this.accionAgregarUsuario=!1,this.activar=!1,this.listaUsuarios=[]},o.prototype.cancelarAccion=function(){var o=this;if(this.sePuedeCancelar())this.cancelarConfiguracionPedido();else{var i={title:b.a.MSJ_TITULO_CANCELAR,texto:b.a.MSJ_PREGUNTA_CANCELAR,type:b.a.SWAL_QUESTION,confirmButtonText:b.a.MSJ_ACEPTAR,cancelButtonText:b.a.MSJ_CANCELAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){i&&o.cancelarConfiguracionPedido()})}},o.prototype.sePuedeCancelar=function(){return this.utilService.puedoCancelar(this.valoresIniciales,this.frmConfiguracionOP)&&this.utilService.compararObjetos(this.registradoresIniciales,this.invPedidosConfiguracionTO.listRegistradores)&&this.utilService.compararObjetos(this.ejecutoresIniciales,this.invPedidosConfiguracionTO.listEjecutores)&&this.utilService.compararObjetos(this.aprobadoresIniciales,this.invPedidosConfiguracionTO.listAprobadores)},o.prototype.aprobacionAutomatica=function(){this.invPedidosMotivo.pmAprobacionAutomatica&&(this.invPedidosConfiguracionTO.listAprobadores=this.invPedidosConfiguracionTO.listRegistradores)},o.prototype.refrescarTabla=function(o,i){switch(i){case"I":if(this.listadoResultado.length>0)(t=this.listadoResultado.slice()).unshift(o),this.listadoResultado=t,this.rowIndexTabla=0;break;case"U":var e=this.listadoResultado.findIndex(function(i){return i.pmCodigo===o.pmCodigo});(t=this.listadoResultado.slice())[e]=o,this.listadoResultado=t,this.rowIndexTabla=e,this.refreshGrid();break;case"D":var t;e=this.listadoResultado.findIndex(function(i){return i.pmCodigo===o.pmCodigo});(t=this.listadoResultado.slice()).splice(e,1),this.listadoResultado=t,this.rowIndexTabla=0}},o.prototype.ejecutarAccion=function(o){this.tipoUsuario=o,this.accion!=b.a.ACCION_CONSULTAR&&this.eliminarUsuarioLista(this.tipoUsuario)},o.prototype.generarOpciones=function(){var o=this,i=this.objetoSeleccionado&&this.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,this)&&!this.vistaFormulario&&this.sectorSeleccionado&&this.sectorSeleccionado.secActivo,e=this.objetoSeleccionado&&this.utilService.verificarPermiso(b.a.ACCION_EDITAR,this)&&!this.vistaFormulario,t=this.objetoSeleccionado&&this.utilService.verificarPermiso(b.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.objetoSeleccionado.pmInactivo,r=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&!this.objetoSeleccionado.pmInactivo;this.opciones=[{label:b.a.ACCION_CONSULTAR,icon:b.a.ICON_CONSULTAR,disabled:!i,command:function(){return i?o.consultarInvPedidoMotivo():null}},{label:b.a.ACCION_EDITAR,icon:b.a.ICON_EDITAR,disabled:!e,command:function(){return e?o.editarInvPedidoMotivo():null}},{label:b.a.ACCION_ELIMINAR,icon:b.a.ICON_ELIMINAR,disabled:!t,command:function(){return t?o.eliminarInvPedidoMotivo():null}},this.objetoSeleccionado.pmInactivo?{label:b.a.ACCION_ACTIVAR,icon:b.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?o.activarInactivarInvPedidoMotivo():null}}:{label:b.a.ACCION_INACTIVAR,icon:b.a.ICON_INACTIVAR,disabled:!r,command:function(){return r?o.activarInactivarInvPedidoMotivo():null}}]},o.prototype.mostrarOpciones=function(o,i){this.mostrarContextMenu(i,o)},o.prototype.mostrarContextMenu=function(o,i){this.objetoSeleccionado=o,this.generarOpciones(),this.menuOpciones.show(i),i.stopPropagation()},o.prototype.generarOpcionesConfiguracion=function(){var o=this,i=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar&&!this.accionAgregarUsuario;this.opcionesRegistrador=[{label:b.a.ACCION_ELIMINAR,icon:b.a.ICON_ELIMINAR,disabled:!i,command:i?function(){return o.eliminarUsuarioLista(b.a.TAG_REGISTRADOR)}:null}],this.opcionesEjecutor=[{label:b.a.ACCION_ELIMINAR,icon:b.a.ICON_ELIMINAR,disabled:!i,command:i?function(){return o.eliminarUsuarioLista(b.a.TAG_EJECUTOR)}:null}],this.opcionesAprobador=[{label:b.a.ACCION_ELIMINAR,icon:b.a.ICON_ELIMINAR,disabled:!i,command:i?function(){return o.eliminarUsuarioLista(b.a.TAG_APROBADOR)}:null}]},o.prototype.mostrarOpcionesConfiguracion=function(o,i,e){this.mostrarContextMenuConfiguracion(i,o,e)},o.prototype.mostrarContextMenuConfiguracion=function(o,i,e){this.usuarioSeleccionado=o,this.tipoUsuario="cmr"===e?b.a.TAG_REGISTRADOR:"cma"===e?b.a.TAG_APROBADOR:b.a.TAG_EJECUTOR,this.accion!==b.a.ACCION_CONSULTAR&&this.generarOpcionesConfiguracion(),this.accion!==b.a.ACCION_CONSULTAR&&e.show(i),this.accion!==b.a.ACCION_CONSULTAR&&i.stopPropagation()},o.prototype.iniciarAgGrid=function(){this.columnRegistrador=this.configuracionPedidoService.generarColumnas(b.a.TAG_REGISTRADOR,this),this.columnAprobador=this.configuracionPedidoService.generarColumnas(b.a.TAG_APROBADOR,this),this.columnEjecutor=this.configuracionPedidoService.generarColumnas(b.a.TAG_EJECUTOR,this),this.components={},this.overlayNoRowsTemplate=b.a.MSJ_NO_HAY_DATOS,this.columnDefs=this.configuracionPedidoService.generarColumnasMotivoPedido(),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:L.a,toolTip:N.a,inputEstado:F.a},this.components={}},o.prototype.onGridReady=function(o){this.gridApi=o.api,this.gridColumnApi=o.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimencionarColumnas()},o.prototype.filaFocused=function(o){var i=this.gridApi?this.gridApi.getRowNode(o.rowIndex):null;this.objetoSeleccionado=i?i.data:null},o.prototype.redimencionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},o.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var o=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(this.rowIndexTabla,o)}},o.prototype.refreshGrid=function(){var o=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){o.actualizarFilas()},50)},o.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},o.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},o.prototype.onGridReadyConfiguracion=function(o,i){switch(i){case b.a.TAG_REGISTRADOR:this.gridRegistrador=o.api,this.gridColumnApiRegistrador=o.columnApi,this.redimencionarColumnasConfiguracion(this.gridRegistrador),this.actualizarFilasConfiguracion(this.gridEjecutor);break;case b.a.TAG_APROBADOR:this.gridAprobador=o.api,this.gridColumnApiAprobador=o.columnApi,this.redimencionarColumnasConfiguracion(this.gridAprobador),this.actualizarFilasConfiguracion(this.gridEjecutor);break;case b.a.TAG_EJECUTOR:this.gridEjecutor=o.api,this.gridColumnApiEjecutor=o.columnApi,this.redimencionarColumnasConfiguracion(this.gridEjecutor),this.actualizarFilasConfiguracion(this.gridEjecutor)}},o.prototype.redimencionarColumnasConfiguracion=function(o){o&&o.sizeColumnsToFit()},o.prototype.actualizarFilasConfiguracion=function(o){this.filasTiempo.filas=o?o.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},o.prototype.nuevoConfiguracionPedido=function(){this.utilService.verificarPermiso(b.a.ACCION_CREAR,this,!0)&&(this.invPedidosConfiguracionTO=new h.a,this.categoriaSeleccionada=this.listaCategorias.length>0?this.listaCategorias[0]:null,this.accion=b.a.ACCION_CREAR,this.tituloFormulario=b.a.TITULO_FORM_NUEVO_CONFIGURACION_PEDIDOS,this.vistaFormulario=!0,this.iniciarAgGrid(),this.extraerValoresIniciales())},o.prototype.consultarInvPedidoMotivo=function(){this.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_CONSULTAR,this.tituloFormulario=b.a.TITULO_FORM_CONSULTAR_CONFIGURACION_PEDIDOS,this.obtenerInvPedidoMotivo(),this.iniciarAgGrid())},o.prototype.editarInvPedidoMotivo=function(){this.utilService.verificarPermiso(b.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_EDITAR,this.tituloFormulario=b.a.TITULO_FORM_EDITAR_CONFIGURACION_PEDIDOS,this.obtenerInvPedidoMotivo(),this.iniciarAgGrid())},o.prototype.extraerValoresIniciales=function(){var o=this;setTimeout(function(){o.valoresIniciales=JSON.parse(JSON.stringify(o.frmConfiguracionOP?o.frmConfiguracionOP.value:null)),o.ejecutoresIniciales=JSON.parse(JSON.stringify(o.invPedidosConfiguracionTO&&o.invPedidosConfiguracionTO.listEjecutores?o.invPedidosConfiguracionTO.listEjecutores:null)),o.aprobadoresIniciales=JSON.parse(JSON.stringify(o.invPedidosConfiguracionTO&&o.invPedidosConfiguracionTO.listAprobadores?o.invPedidosConfiguracionTO.listAprobadores:null)),o.registradoresIniciales=JSON.parse(JSON.stringify(o.invPedidosConfiguracionTO&&o.invPedidosConfiguracionTO.listRegistradores?o.invPedidosConfiguracionTO.listRegistradores:null))},50)},o.prototype.activarInactivarInvPedidoMotivo=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_EDITAR,this,!0)){var i={title:this.objetoSeleccionado.pmInactivo?b.a.MSJ_TITULO_ACTIVAR:b.a.MSJ_TITULO_INACTIVAR,texto:(this.objetoSeleccionado.pmInactivo?b.a.MSJ_PREGUNTA_ACTIVAR:b.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Motivo: "+this.objetoSeleccionado.pmDetalle,type:b.a.SWAL_QUESTION,confirmButtonText:b.a.MSJ_SI_ACEPTAR,cancelButtonText:b.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){if(i){o.cargando=!0;var e={invPedidosMotivoPK:new I.a({pmEmpresa:o.empresaSeleccionada.empCodigo,pmCodigo:o.objetoSeleccionado.pmCodigo,pmSector:o.sectorSeleccionado.secCodigo}),estado:!o.objetoSeleccionado.pmInactivo};o.configuracionPedidoService.actualizarEstadoInvPedidosConfiguracion(e,o,b.a.KEY_EMPRESA_SELECT)}})}},o.prototype.despuesDeActualizarEstadoInvPedidosConfiguracion=function(o){this.cargando=!1,this.cancelarConfiguracionPedido(),this.objetoSeleccionado.pmInactivo=!this.objetoSeleccionado.pmInactivo,this.toastr.success(o.operacionMensaje,b.a.TOAST_CORRECTO),this.refrescarTabla(this.objetoSeleccionado,"U")},o.prototype.obtenerInvPedidoMotivo=function(){this.invPedidosMotivo=new U.a;var o={invPedidosMotivoPK:new I.a(this.objetoSeleccionado)};this.configuracionPedidoService.obtenerInvPedidosMotivo(o,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeObtenerInvPedidosMotivo=function(o){var i=this;this.invPedidosMotivo=new U.a(o.motivo),this.invPedidosConfiguracionTO=o.configuracion;var e=this.invPedidosMotivo.invProductoCategoria?this.listaCategorias.findIndex(function(o){return o.catCodigo===i.invPedidosMotivo.invProductoCategoria.invProductoCategoriaPK.catCodigo}):-1;this.listaCategorias.length>0&&(this.categoriaSeleccionada=e>-1?this.listaCategorias[e]:null),this.activar=!1,this.vistaFormulario=!0,this.cargando=!1,this.extraerValoresIniciales()},o.prototype.listarConfiguracionPedidos=function(o){this.cargando=!0,this.limpiarResultado();var i=this.sectorSeleccionado?new C.a({secEmpresa:this.empresaSeleccionada.empCodigo,secCodigo:this.sectorSeleccionado.secCodigo}):null,e={empresa:this.empresaSeleccionada.empCodigo,incluirInactivos:o,prdSectorPK:i};this.filasTiempo.iniciarContador(),this.configuracionPedidoService.listarInvPedidosMotivoTO(e,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarInvPedidosMotivoTO=function(o){this.filasTiempo.finalizarContador(),this.listadoResultado=o||[],this.cargando=!1},o.prototype.guardarConfiguracionPedido=function(o){if(this.accion=b.a.ACCION_CREAR,this.empresaSeleccionada.listaSisPermisoTO.gruCrear&&this.utilService.verificarPermiso(this.accion,this,!0)){this.cargando=!0;var i=this.utilService.establecerFormularioTocado(o);if(this.configuracionPedidoService.validarDiasSemana(this.invPedidosMotivo))if(this.configuracionPedidoService.validarUnoEnCadaTabla(this.invPedidosConfiguracionTO,this.invPedidosMotivo.pmAprobacionAutomatica))if(i&&o&&o.valid){this.aprobacionAutomatica();var e={invPedidosMotivo:this.configuracionPedidoService.formatearInvPedidosMotivo(this.invPedidosMotivo,this),invPedidosConfiguracionTO:this.invPedidosConfiguracionTO};this.configuracionPedidoService.insertarInvPedidosConfiguracion(e,this,b.a.KEY_EMPRESA_SELECT)}else this.toastr.error(b.a.MSJ_CAMPOS_INVALIDOS,b.a.MSJ_TITULO_INVALIDOS),this.cargando=!1;else this.toastr.warning(b.a.MSJ_DEBE_COMPLETAR_UN_REGISTRO_POR_TABLA,b.a.TOAST_ADVERTENCIA),this.cargando=!1;else this.toastr.warning(b.a.MSJ_SELECCIONE_DIA,b.a.TOAST_ADVERTENCIA),this.cargando=!1}},o.prototype.despuesDeInsertarInvPedidosConfiguracion=function(o){this.cargando=!0,this.cancelarConfiguracionPedido();var i=this.configuracionPedidoService.convertirInvPedidosMotivoAInvPedidosMotivoTO(o.extraInfo);this.toastr.success(o.operacionMensaje,b.a.TOAST_CORRECTO),this.listadoResultado.length>0?this.refrescarTabla(i,"I"):this.listarConfiguracionPedidos(!1)},o.prototype.actualizarConfiguracionPedido=function(o){if(this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.utilService.verificarPermiso(this.accion,this,!0))if(this.sePuedeCancelar())this.cancelarConfiguracionPedido(),this.utilService.generarSwal(b.a.TITULO_CONFIGURACION_PEDIDOS,b.a.SWAL_SUCCESS,b.a.NO_REALIZO_NINGUN_CAMBIO);else{this.cargando=!0;var i=this.utilService.establecerFormularioTocado(o);if(this.configuracionPedidoService.validarDiasSemana(this.invPedidosMotivo))if(this.configuracionPedidoService.validarUnoEnCadaTabla(this.invPedidosConfiguracionTO,this.invPedidosMotivo.pmAprobacionAutomatica))if(i&&o&&o.valid){var e={invPedidosMotivo:this.configuracionPedidoService.formatearInvPedidosMotivo(this.invPedidosMotivo,this),invPedidosConfiguracionTO:this.invPedidosConfiguracionTO};this.configuracionPedidoService.actualizarInvPedidosConfiguracion(e,this,b.a.KEY_EMPRESA_SELECT)}else this.toastr.error(b.a.MSJ_CAMPOS_INVALIDOS,b.a.MSJ_TITULO_INVALIDOS),this.cargando=!1;else this.toastr.warning(b.a.MSJ_DEBE_COMPLETAR_UN_REGISTRO_POR_TABLA,b.a.TOAST_ADVERTENCIA),this.cargando=!1;else this.toastr.warning(b.a.MSJ_SELECCIONE_DIA,b.a.TOAST_ADVERTENCIA),this.cargando=!1}},o.prototype.despuesDeActualizarInvPedidosConfiguracion=function(o){this.cargando=!1,this.cancelarConfiguracionPedido();var i=this.configuracionPedidoService.convertirInvPedidosMotivoAInvPedidosMotivoTO(o.extraInfo);this.toastr.success(o.operacionMensaje,b.a.TOAST_CORRECTO),this.refrescarTabla(i,"U")},o.prototype.eliminarInvPedidoMotivo=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_ELIMINAR,this,!0)){var i={title:b.a.MSJ_TITULO_ELIMINAR,texto:b.a.MSJ_PREGUNTA_ELIMINAR,type:b.a.SWAL_WARNING,confirmButtonText:b.a.MSJ_SI_ELIMINAR,cancelButtonText:b.a.MSJ_CANCELAR,confirmButtonColor:b.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){if(i){o.cargando=!0;var e={invPedidosMotivoPK:new I.a({pmEmpresa:o.empresaSeleccionada.empCodigo,pmCodigo:o.objetoSeleccionado.pmCodigo,pmSector:o.sectorSeleccionado.secCodigo})};o.configuracionPedidoService.eliminarInvPedidosConfiguracion(e,o,b.a.KEY_EMPRESA_SELECT)}})}},o.prototype.despuesEliminarInvPedidosConfiguracion=function(o){this.cargando=!1,this.cancelarConfiguracionPedido(),this.toastr.success(o.operacionMensaje,b.a.TOAST_CORRECTO),this.refrescarTabla(this.objetoSeleccionado,"D")},o.prototype.imprimir=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var i={listadoInvPedidosMotivo:this.listadoResultado};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosMotivo",i,this.empresaSeleccionada).then(function(i){i._body.byteLength>0?o.utilService.descargarArchivoPDF("listaMotivoPedido"+o.utilService.obtenerHorayFechaActual()+".pdf",i):o.toastr.warning(b.a.MSJ_ERROR_IMPRIMIR),o.cargando=!1}).catch(function(i){return o.utilService.handleError(i,o)})}},o.prototype.exportar=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var i={listadoInvPedidosMotivo:this.listadoResultado};this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidosMotivo",i,this.empresaSeleccionada).then(function(i){i?o.utilService.descargarArchivoExcel(i._body,"ListadoMotivosPedido_"):o.toastr.warning(b.a.MSJ_NO_DATA),o.cargando=!1}).catch(function(i){return o.utilService.handleError(i,o)})}},o.prototype.unloadHandler=function(o){if(this.accion==b.a.ACCION_CONSULTAR||this.utilService.puedoCancelar(this.valoresIniciales,this.frmConfiguracionOP)||this.configuracionPedidoService.validarListados(this))return!0;o.returnValue=!1},G([Object(t.ViewChild)("menuOpciones"),j("design:type",P.ContextMenu)],o.prototype,"menuOpciones",void 0),G([Object(t.ViewChild)("cma"),j("design:type",P.ContextMenu)],o.prototype,"cma",void 0),G([Object(t.ViewChild)("cmr"),j("design:type",P.ContextMenu)],o.prototype,"cmr",void 0),G([Object(t.ViewChild)("cme"),j("design:type",P.ContextMenu)],o.prototype,"cme",void 0),G([Object(t.ViewChild)("frmConfiguracionOP"),j("design:type",D.NgForm)],o.prototype,"frmConfiguracionOP",void 0),G([Object(t.HostListener)("window:resize",["$event"]),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",void 0)],o.prototype,"onResize",null),G([Object(t.HostListener)("window:beforeunload",["$event"]),j("design:type",Function),j("design:paramtypes",[Event]),j("design:returntype",void 0)],o.prototype,"unloadHandler",null),o=G([Object(t.Component)({selector:"app-configuracion-pedido",template:e("lOIP")}),j("design:paramtypes",[a.ActivatedRoute,d.b,m.a,R.a,l.HotkeysService,p.a,S.a,T.a,t.ChangeDetectorRef,y.a,w.a])],o)}(),B=e("DixL"),J=e("a5FG"),k=e("wd/R"),V=e("UbKW"),z=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},K=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},Y=function(){function o(o,i,e,t,a,r,n){this.route=o,this.atajoService=i,this.sectorService=e,this.utilService=t,this.ordenPedidoService=a,this.filasService=r,this.configuracionPedidoService=n,this.activar=!1,this.listaEmpresas=[],this.empresaSeleccionada=new O.a,this.vistaListado=!1,this.deshabilitarOpciones=!1,this.configuracion=new h.a,this.listaSectores=[],this.sectorSeleccionado=new _.a,this.sectorCopia=new _.a,this.listaMotivos=[],this.motivoSeleccionado=new u.a,this.motivoCopia=null,this.cargando=!1,this.es={},this.funcionesUsuario=[],this.dataListadoOrden=null,this.operacionListado={},this.fechaInicio=null,this.fechaFin=null,k.locale("es"),this.constantes=b.a,this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.consultaOrdenesPedido,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas))}return o.prototype.ngOnInit=function(){this.cambiarempresaSeleccionada(),this.fechaInicio=this.utilService.obtenerFechaInicioMes(),this.fechaFin=this.utilService.obtenerFechaActual(),this.iniciarAtajos()},o.prototype.iniciarAtajos=function(){this.atajoService.add(new l.Hotkey(b.a.ATAJO_AYUDA,function(o){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_BUSCAR,function(o){return document.getElementById("btnBuscarOrdenesPedidos").click(),!1}))},o.prototype.cambiarempresaSeleccionada=function(){b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cargando=!0,this.listaSectores=[],this.listaMotivos=[],this.funcionesUsuario=[],this.configuracion=new h.a,this.sectorSeleccionado=new _.a,this.motivoSeleccionado=null,this.listarSectores()},o.prototype.listarSectores=function(){this.cargando=!0,this.listaMotivos=[],this.motivoSeleccionado=null,this.listaSectores=[],this.sectorCopia=this.sectorSeleccionado,this.sectorSeleccionado=null;var o={empresa:b.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(o,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarSectores=function(o){var i=this;if(this.listaSectores=o.slice(),this.listaSectores.length>0){var e=this.sectorCopia?this.listaSectores.filter(function(o){return o.secCodigo===i.sectorCopia.secCodigo}):[];this.sectorSeleccionado=e.length>0?e[0]:this.listaSectores[0]}this.sectorCopia=null,this.cargando=!1,this.listarMotivos()},o.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[],this.motivoCopia=this.motivoSeleccionado,this.motivoSeleccionado=null;var o=this.empresaSeleccionada.empCodigo,i={empresa:o,incluirInactivos:!1,prdSectorPK:this.sectorSeleccionado?new C.a({secEmpresa:o,secCodigo:this.sectorSeleccionado.secCodigo}):null,invProductoCategoriaPK:null};this.configuracionPedidoService.listarInvPedidosMotivoTO(i,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarInvPedidosMotivoTO=function(o){var i=this;if(this.listaMotivos=o.slice(),this.listaMotivos.length>0){var e=this.motivoCopia?this.listaMotivos.filter(function(o){return o.pmCodigo===i.motivoCopia.pmCodigo}):[];this.motivoSeleccionado=e.length>0?e[0]:this.listaMotivos[0]}this.motivoCopia=null,this.cargando=!1,this.traerConfiguracionPedidos()},o.prototype.traerConfiguracionPedidos=function(){if(this.funcionesUsuario=[],this.configuracion=new h.a,this.motivoSeleccionado){this.cargando=!0;var o={empresa:b.a.KEY_EMPRESA_SELECT,invPedidosMotivoPK:new I.a(this.motivoSeleccionado)};this.configuracionPedidoService.getListaInvPedidosConfiguracion(o,this,b.a.KEY_EMPRESA_SELECT)}},o.prototype.despuesDeListarConfiguracionPedido=function(o){this.configuracion=o,this.funcionesUsuario=this.ordenPedidoService.establecerFuncionesUsuario(this.configuracion),this.cargando=!1},o.prototype.limpiarResultado=function(){this.operacionListado={objeto:null,accion:b.a.LST_LIMPIAR},this.vistaListado=!1,this.filasService.actualizarFilas(0)},o.prototype.buscarOrdenesPedido=function(o,i,e){this.cargando=!0,this.filasService.actualizarFilas(0),this.dataListadoOrden=this.generarObjetoConsultaEnviar(o,i,e),this.vistaListado=!0,this.cargando=!1},o.prototype.cancelar=function(){this.activar=!1,this.deshabilitarOpciones=!1,this.vistaListado=!0},o.prototype.accionLista=function(o){this.operacionListado=o,this.cancelar()},o.prototype.cambiarActivar=function(o){this.activar=o.activar,o.deshabilitarOpciones&&(this.deshabilitarOpciones=!0),!1===o.vistaListado&&(this.vistaListado=!1)},o.prototype.generarObjetoConsultaEnviar=function(o,i,e){return{empresa:this.empresaSeleccionada.empCodigo,motivo:this.motivoSeleccionado?this.motivoSeleccionado.pmCodigo:null,tipoOrden:"",funcionesUsuario:this.funcionesUsuario,fechaInicio:this.fechaInicio,fechaFin:this.fechaFin,busqueda:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,soloRegistrados:o,soloAprobados:i,soloEjecutados:e,visualizarConsultaOrdenPedido:!0}},o=z([Object(t.Component)({selector:"app-consulta-orden-pedido",template:e("RtTb")}),K("design:paramtypes",[a.ActivatedRoute,l.HotkeysService,p.a,S.a,V.a,T.a,m.a])],o)}(),H=e("egWh"),q=e("40E6"),$=e("gKqU"),W=e("4b4a"),X=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},Q=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},Z=function(){function o(o,i,e,t,a,r,n,s){this.route=o,this.atajoService=i,this.sectorService=e,this.utilService=t,this.filasService=a,this.configuracionPedidoService=r,this.ordenPedidoService=n,this.toastr=s,this.activar=!1,this.listaEmpresas=[],this.empresaSeleccionada=new O.a,this.vistaListado=!1,this.deshabilitarOpciones=!1,this.configuracion=new h.a,this.listaSectores=[],this.sectorSeleccionado=new _.a,this.sectorCopia=new _.a,this.listaMotivos=[],this.motivoSeleccionado=new u.a,this.motivoCopia=null,this.cargando=!1,this.es={},this.funcionesUsuario=[],this.dataListadoOrden=null,this.operacionListado={},this.dataFormularioOrden=null,this.filasTiempoRecargar=!1,k.locale("es"),this.constantes=b.a,this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.aprobarOrdenPedido,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas))}return o.prototype.ngOnInit=function(){this.cambiarempresaSeleccionada(),this.iniciarAtajos()},o.prototype.iniciarAtajos=function(){this.atajoService.add(new l.Hotkey(b.a.ATAJO_AYUDA,function(){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_BUSCAR,function(){var o=document.getElementById("btnBuscar");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_NUEVO,function(){var o=document.getElementById("btnNuevo");return o&&o.click(),!1}))},o.prototype.cambiarempresaSeleccionada=function(){b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cargando=!0,this.listaSectores=[],this.listaMotivos=[],this.funcionesUsuario=[],this.configuracion=new h.a,this.sectorSeleccionado=new _.a,this.motivoSeleccionado=null,this.listarSectores()},o.prototype.listarSectores=function(){this.cargando=!0,this.listaMotivos=[],this.motivoSeleccionado=null,this.listaSectores=[],this.sectorCopia=this.sectorSeleccionado,this.sectorSeleccionado=null;var o={empresa:b.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(o,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarSectores=function(o){var i=this;if(this.listaSectores=o.slice(),this.listaSectores.length>0){var e=this.sectorCopia?this.listaSectores.filter(function(o){return o.secCodigo===i.sectorCopia.secCodigo}):[];this.sectorSeleccionado=e.length>0?e[0]:this.listaSectores[0]}this.sectorCopia=null,this.cargando=!1,this.listarMotivos()},o.prototype.limpiarResultado=function(){this.operacionListado={objeto:null,accion:b.a.LST_LIMPIAR},this.dataFormularioOrden=null,this.vistaListado=!1,this.filasService.actualizarFilas(0)},o.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[],this.motivoCopia=this.motivoSeleccionado,this.motivoSeleccionado=null;var o=this.empresaSeleccionada.empCodigo,i={empresa:o,incluirInactivos:!1,prdSectorPK:this.sectorSeleccionado?new C.a({secEmpresa:o,secCodigo:this.sectorSeleccionado.secCodigo}):null,invProductoCategoriaPK:null};this.configuracionPedidoService.listarInvPedidosMotivoTO(i,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarInvPedidosMotivoTO=function(o){var i=this;if(this.listaMotivos=o.slice(),this.listaMotivos.length>0){var e=this.motivoCopia?this.listaMotivos.filter(function(o){return o.pmCodigo===i.motivoCopia.pmCodigo}):[];this.motivoSeleccionado=e.length>0?e[0]:this.listaMotivos[0]}this.motivoCopia=null,this.cargando=!1,this.traerConfiguracionPedidos()},o.prototype.traerConfiguracionPedidos=function(){if(this.funcionesUsuario=[],this.configuracion=new h.a,this.motivoSeleccionado){this.cargando=!0;var o={empresa:b.a.KEY_EMPRESA_SELECT,invPedidosMotivoPK:new I.a(this.motivoSeleccionado)};this.configuracionPedidoService.getListaInvPedidosConfiguracion(o,this,b.a.KEY_EMPRESA_SELECT)}},o.prototype.despuesDeListarConfiguracionPedido=function(o){this.configuracion=o,this.funcionesUsuario=this.ordenPedidoService.establecerFuncionesUsuario(this.configuracion),this.cargando=!1},o.prototype.buscarOrdenesPedido=function(o){this.cargando=!0,this.filasService.actualizarFilas(0),this.dataListadoOrden=this.generarObjetoConsultaEnviar(o),this.dataFormularioOrden=null,this.vistaListado=!0,this.cargando=!1},o.prototype.generarObjetoConsultaEnviar=function(o){return{empresa:this.empresaSeleccionada.empCodigo,motivo:this.motivoSeleccionado?this.motivoSeleccionado.pmCodigo:null,pmAprobacionAutomatica:this.motivoSeleccionado?this.motivoSeleccionado.pmAprobacionAutomatica:null,funcionesUsuario:this.funcionesUsuario,nroRegistros:o||null,tipo:"APROBAROP",busqueda:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null}},o.prototype.cancelar=function(){this.filasTiempoRecargar=!this.filasTiempoRecargar,this.activar=!1,this.deshabilitarOpciones=!1,this.dataFormularioOrden=null,this.vistaListado=!0},o.prototype.accionLista=function(o){this.operacionListado=o,this.cancelar()},o.prototype.cambiarActivar=function(o){this.activar=o.activar,o.deshabilitarOpciones&&(this.deshabilitarOpciones=!0),!1===o.vistaListado&&(this.vistaListado=!1),o.gridApi&&o.gridApi.sizeColumnsToFit()},o=X([Object(t.Component)({selector:"app-aprobar-orden-pedido",template:e("TfNB")}),Q("design:paramtypes",[a.ActivatedRoute,l.HotkeysService,p.a,S.a,T.a,m.a,V.a,d.b])],o)}(),oo=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},io=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},eo=function(){function o(o,i,e,t,a,r,n){this.route=o,this.atajoService=i,this.sectorService=e,this.utilService=t,this.filasService=a,this.configuracionPedidoService=r,this.ordenPedidoService=n,this.activar=!1,this.listaEmpresas=[],this.empresaSeleccionada=new O.a,this.vistaListado=!1,this.deshabilitarOpciones=!1,this.configuracion=new h.a,this.listaSectores=[],this.sectorSeleccionado=new _.a,this.sectorCopia=new _.a,this.listaMotivos=[],this.motivoSeleccionado=new u.a,this.motivoCopia=null,this.cargando=!1,this.es={},this.funcionesUsuario=[],this.dataListadoOrden=null,this.operacionListado={},this.dataFormularioOrden=null,this.filasTiempoRecargar=!1,k.locale("es"),this.constantes=b.a,this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.generarOrdenCompra,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas))}return o.prototype.ngOnInit=function(){this.cambiarempresaSeleccionada(),this.iniciarAtajos()},o.prototype.iniciarAtajos=function(){this.atajoService.add(new l.Hotkey(b.a.ATAJO_AYUDA,function(){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_BUSCAR,function(){var o=document.getElementById("btnBuscar");return o&&o.click(),!1}))},o.prototype.cambiarempresaSeleccionada=function(){b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cargando=!0,this.listaSectores=[],this.listaMotivos=[],this.funcionesUsuario=[],this.configuracion=new h.a,this.sectorSeleccionado=new _.a,this.motivoSeleccionado=null,this.listarSectores()},o.prototype.listarSectores=function(){this.cargando=!0,this.listaMotivos=[],this.motivoSeleccionado=null,this.listaSectores=[],this.sectorCopia=this.sectorSeleccionado,this.sectorSeleccionado=null;var o={empresa:b.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(o,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarSectores=function(o){var i=this;if(this.listaSectores=o.slice(),this.listaSectores.length>0){var e=this.sectorCopia?this.listaSectores.filter(function(o){return o.secCodigo===i.sectorCopia.secCodigo}):[];this.sectorSeleccionado=e.length>0?e[0]:this.listaSectores[0]}this.sectorCopia=null,this.cargando=!1,this.listarMotivos()},o.prototype.limpiarResultado=function(){this.operacionListado={objeto:null,accion:b.a.LST_LIMPIAR},this.dataFormularioOrden=null,this.vistaListado=!1,this.filasService.actualizarFilas(0)},o.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[],this.motivoCopia=this.motivoSeleccionado,this.motivoSeleccionado=null;var o=this.empresaSeleccionada.empCodigo,i={empresa:o,incluirInactivos:!1,prdSectorPK:this.sectorSeleccionado?new C.a({secEmpresa:o,secCodigo:this.sectorSeleccionado.secCodigo}):null,invProductoCategoriaPK:null};this.configuracionPedidoService.listarInvPedidosMotivoTO(i,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarInvPedidosMotivoTO=function(o){var i=this;if(this.listaMotivos=o.slice(),this.listaMotivos.length>0){var e=this.motivoCopia?this.listaMotivos.filter(function(o){return o.pmCodigo===i.motivoCopia.pmCodigo}):[];this.motivoSeleccionado=e.length>0?e[0]:this.listaMotivos[0]}this.motivoCopia=null,this.cargando=!1,this.traerConfiguracionPedidos()},o.prototype.traerConfiguracionPedidos=function(){if(this.funcionesUsuario=[],this.configuracion=new h.a,this.motivoSeleccionado){this.cargando=!0;var o={empresa:b.a.KEY_EMPRESA_SELECT,invPedidosMotivoPK:new I.a(this.motivoSeleccionado)};this.configuracionPedidoService.getListaInvPedidosConfiguracion(o,this,b.a.KEY_EMPRESA_SELECT)}},o.prototype.despuesDeListarConfiguracionPedido=function(o){this.configuracion=o,this.funcionesUsuario=this.ordenPedidoService.establecerFuncionesUsuario(this.configuracion),this.cargando=!1},o.prototype.buscarOrdenesPedido=function(o){this.cargando=!0,this.filasService.actualizarFilas(0),this.dataListadoOrden=this.generarObjetoConsultaEnviar(o),this.dataFormularioOrden=null,this.vistaListado=!0,this.cargando=!1},o.prototype.cancelar=function(){this.filasTiempoRecargar=!this.filasTiempoRecargar,this.activar=!1,this.deshabilitarOpciones=!1,this.dataFormularioOrden=null,this.vistaListado=!0},o.prototype.accionLista=function(o){this.operacionListado=o,this.cancelar()},o.prototype.cambiarActivar=function(o){this.activar=o.activar,o.deshabilitarOpciones&&(this.deshabilitarOpciones=!0),!1===o.vistaListado&&(this.vistaListado=!1),o.gridApi&&o.gridApi.sizeColumnsToFit()},o.prototype.generarObjetoConsultaEnviar=function(o){return{empresa:this.empresaSeleccionada.empCodigo,motivo:this.motivoSeleccionado?this.motivoSeleccionado.pmCodigo:null,pmAprobacionAutomatica:this.motivoSeleccionado?this.motivoSeleccionado.pmAprobacionAutomatica:null,funcionesUsuario:this.funcionesUsuario,nroRegistros:o||null,tipo:"GENERAROC",sector:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:"",busqueda:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null}},o=oo([Object(t.Component)({selector:"app-generar-orden-compra",template:e("95PV")}),io("design:paramtypes",[a.ActivatedRoute,l.HotkeysService,p.a,S.a,T.a,m.a,V.a])],o)}(),to=e("ZJV5"),ao=e("bPTo"),ro=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},no=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},so=function(){function o(o,i,e,t,a,r,n){this.route=o,this.motivoOCService=i,this.atajoService=e,this.sectorService=t,this.utilService=a,this.filasService=r,this.toastr=n,this.activar=!1,this.listaEmpresas=[],this.empresaSeleccionada=new O.a,this.vistaListado=!1,this.deshabilitarOpciones=!1,this.configuracion=new h.a,this.listaSectores=[],this.sectorSeleccionado=new _.a,this.sectorCopia=new _.a,this.listaMotivos=[],this.motivoSeleccionado=new to.a,this.motivoCopia=null,this.cargando=!1,this.es={},this.funcionesUsuario=[],this.fechaInicio=null,this.fechaFin=null,this.dataListadoOrden=null,this.operacionListado={},this.tipoVista="T",k.locale("es"),this.constantes=b.a,this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.aprobarOrdenCompra,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas)),this.tipoVista=this.route.snapshot.data.tipoVista}return o.prototype.ngOnInit=function(){this.cambiarempresaSeleccionada(),this.fechaInicio=this.utilService.obtenerFechaInicioMes(),this.fechaFin=this.utilService.obtenerFechaActual(),this.iniciarAtajos()},o.prototype.iniciarAtajos=function(){this.atajoService.add(new l.Hotkey(b.a.ATAJO_AYUDA,function(o){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_BUSCAR,function(o){var i=document.getElementById("btnBuscar");return i&&i.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_NUEVO,function(o){var i=document.getElementById("btnNuevo");return i&&i.click(),!1}))},o.prototype.cambiarempresaSeleccionada=function(){b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cargando=!0,this.listaSectores=[],this.listaMotivos=[],this.funcionesUsuario=[],this.configuracion=new h.a,this.sectorSeleccionado=new _.a,this.motivoSeleccionado=null,this.listarSectores()},o.prototype.listarSectores=function(){this.cargando=!0,this.listaMotivos=[],this.motivoSeleccionado=null,this.listaSectores=[],this.sectorCopia=this.sectorSeleccionado,this.sectorSeleccionado=null;var o={empresa:b.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(o,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarSectores=function(o){var i=this;if(this.listaSectores=o.slice(),this.listaSectores.length>0){var e=this.sectorCopia?this.listaSectores.filter(function(o){return o.secCodigo===i.sectorCopia.secCodigo}):[];this.sectorSeleccionado=e.length>0?e[0]:this.listaSectores[0]}this.sectorCopia=null,this.cargando=!1,this.listarMotivos()},o.prototype.limpiarResultado=function(){this.operacionListado={objeto:null,accion:b.a.LST_LIMPIAR},this.vistaListado=!1,this.filasService.actualizarFilas(0)},o.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[],this.motivoCopia=this.motivoSeleccionado,this.motivoSeleccionado=null;var o=this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,i={empresa:b.a.KEY_EMPRESA_SELECT,sector:o};this.motivoOCService.listarInvPedidosOrdenCompraMotivoTO(i,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarInvPedidosOrdenCompraMotivoTO=function(o){var i=this;if(this.listaMotivos=o.slice(),this.listaMotivos.length>0){var e=this.motivoCopia?this.listaMotivos.filter(function(o){return o.ocmCodigo===i.motivoCopia.ocmCodigo}):[];this.motivoSeleccionado=e.length>0?e[0]:this.listaMotivos[0]}this.motivoCopia=null,this.cargando=!1},o.prototype.buscarOrdenesCompra=function(o){this.cargando=!0,this.filasService.actualizarFilas(0),this.dataListadoOrden=this.generarObjetoConsultaEnviar(o),this.vistaListado=!0,this.cargando=!1},o.prototype.cancelar=function(){this.activar=!1,this.deshabilitarOpciones=!1,this.vistaListado=!0},o.prototype.accionLista=function(o){this.operacionListado=o,this.cancelar()},o.prototype.cambiarActivar=function(o){this.activar=o.activar,o.deshabilitarOpciones&&(this.deshabilitarOpciones=!0),!1===o.vistaListado&&(this.vistaListado=!1)},o.prototype.generarObjetoConsultaEnviar=function(o){return{empresa:this.empresaSeleccionada.empCodigo,motivo:this.motivoSeleccionado?this.motivoSeleccionado.ocmCodigo:null,aprobacionAutomatica:this.motivoSeleccionado?this.motivoSeleccionado.ocmAprobacionAutomatica:null,incluirAnulados:!0,fechaInicio:"C"===this.tipoVista?this.fechaInicio:null,fechaFin:"C"===this.tipoVista?this.fechaFin:null,busqueda:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,nroRegistros:o}},o=ro([Object(t.Component)({selector:"app-aprobar-orden-compra",template:e("FsoC")}),no("design:paramtypes",[a.ActivatedRoute,ao.a,l.HotkeysService,p.a,S.a,T.a,d.b])],o)}(),co=e("fkj5"),lo=e("jy0O"),po=function(){function o(o){this.hydrate(o)}return o.prototype.hydrate=function(o){this.detSecuencial=o.detSecuencial?o.detSecuencial:this.detSecuencial,this.invPedidosOrdenCompraMotivo=o.invPedidosOrdenCompraMotivo?new co.a(o.invPedidosOrdenCompraMotivo):this.invPedidosOrdenCompraMotivo,this.usuario=o.usuario?new v(o.usuario):this.usuario,this.activo=o.activo?o.activo:this.activo},o}(),uo=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},mo=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},ho=function(){function o(o,i,e,t,a,r,n){this.motivoService=o,this.sectorService=i,this.route=e,this.toastr=t,this.filasService=a,this.sistemaService=r,this.utilService=n,this.cargando=!1,this.activar=!1,this.accion=null,this.isScreamMd=!0,this.mostrarDatosCrud=!1,this.empresaSeleccionada=new O.a,this.listaEmpresas=[],this.listaSectores=[],this.sectorSeleccionado=null,this.sectorCopia=null,this.objetoSeleccionado=new to.a,this.listadoResultado=[],this.invPedidosOrdenCompraMotivo=new co.a,this.listaUsuarios=[],this.listaUsuariosTodos=[],this.listaUsuariosFiltrada=[],this.listUsuarioSeleccionado=[],this.usuarioSeleccionado={},this.listadoAprobadores=new Array,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new E.a,this.opcionesAprobador=[],this.columnAprobador=[],this.noData=b.a.MSJ_NO_HAY_DATOS,this.constantes=b.a,this.listaEmpresas=this.route.snapshot.data.configuracionOrdenCompra,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas),b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cambiarEmpresaSelect()),this.frmTitulo=b.a.TITULO_FILTROS,this.classTitulo=b.a.ICON_FILTRAR,this.motivoService.inicializarAtajos(this)}return o.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=b.a.WINDOW_WIDTH_XS),this.iniciarAgGrid()},o.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=b.a.WINDOW_WIDTH_XS)},o.prototype.cambiarEmpresaSelect=function(){b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.invPedidosOrdenCompraMotivo=new co.a,this.objetoSeleccionado=null,this.vistaFormulario=!1,this.activar=!1,this.accion=null,this.limpiarResultado();var o={empresa:b.a.KEY_EMPRESA_SELECT,incluirInactivos:!1};this.sistemaService.getListaSisUsuario(o,this,b.a.KEY_EMPRESA_SELECT),this.listarSectores()},o.prototype.limpiarResultado=function(){this.gridApi=null,this.gridColumnApi=null,this.filtroGlobal="",this.listadoResultado=[],this.objetoSeleccionado=null,this.filasTiempo.resetearContador(),this.accion=null,this.actualizarFilas()},o.prototype.listarSectores=function(){this.cargando=!0,this.listaSectores=[],this.sectorCopia=this.sectorSeleccionado,this.sectorSeleccionado=null;var o={empresa:b.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(o,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarSectores=function(o){this.listaSectores=o,this.sectorSeleccionado=this.utilService.getObjetoSeleccionadoComboObligatorio(this.listaSectores,this.sectorCopia,"secCodigo"),this.cargando=!1},o.prototype.despuesDeListarUsuario=function(o){this.listaUsuarios=o||[],this.listaUsuariosTodos=o||[]},o.prototype.buscarOrdenCompraMotivo=function(){this.cargando=!0,this.limpiarResultado();var o=this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,i={empresa:b.a.KEY_EMPRESA_SELECT,sector:o};this.filasTiempo.iniciarContador(),this.motivoService.listarInvPedidosOrdenCompraMotivoTO(i,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarInvPedidosOrdenCompraMotivoTO=function(o){this.filasTiempo.finalizarContador(),this.listadoResultado=o||[],this.cargando=!1},o.prototype.nuevoOrdenCompraMotivo=function(){this.utilService.verificarPermiso(b.a.ACCION_CREAR,this,!0)&&(this.accion=b.a.ACCION_CREAR,this.frmTitulo=b.a.PEDIDOS_COMPRA_MOTIVO_NUEVO,this.classTitulo=b.a.ICON_CREAR,this.listaUsuarios=this.listaUsuariosTodos.slice(),this.columnAprobador=this.motivoService.generarColumnasAprobador(this),this.invPedidosOrdenCompraMotivo=new co.a,this.vistaFormulario=!0,this.extraerValoresIniciales())},o.prototype.editarOrdenCompraMotivo=function(o){this.utilService.verificarPermiso(b.a.ACCION_EDITAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_EDITAR,this.columnAprobador=this.motivoService.generarColumnasAprobador(this),this.obtenerOrdenCompraMotivo(o))},o.prototype.consultarOrdenCompraMotivo=function(o){this.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_CONSULTAR,this.columnAprobador=this.motivoService.generarColumnasAprobador(this),this.obtenerOrdenCompraMotivo(o))},o.prototype.extraerValoresIniciales=function(){var o=this;setTimeout(function(){o.valoresIniciales=JSON.parse(JSON.stringify(o.frmMotivoOC?o.frmMotivoOC.value:null)),o.listadoInicial=JSON.parse(JSON.stringify(o.listadoAprobadores?o.listadoAprobadores:null))},50)},o.prototype.obtenerOrdenCompraMotivo=function(o){this.invPedidosOrdenCompraMotivo=new co.a;var i={invPedidosOrdenCompraMotivoPK:new lo.a(o)};this.motivoService.obtenerInvPedidosOrdenCompraMotivo(i,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeObtenerInvPedidosOrdenCompraMotivo=function(o){var i=this;this.invPedidosOrdenCompraMotivo=new co.a(o.motivo),o.aprobadores?(this.listadoAprobadores=o.aprobadores,this.reestablecerListadoUsuarios()):this.listaUsuarios=this.listaUsuariosTodos.slice();var e=this.listaSectores.filter(function(o){return o.secCodigo===i.invPedidosOrdenCompraMotivo.invPedidosOrdenCompraMotivoPK.ocmSector});this.sectorSeleccionado=e.length>0?e[0]:null,this.accion===b.a.ACCION_EDITAR&&(this.frmTitulo=b.a.PEDIDOS_COMPRA_MOTIVO_EDITAR,this.classTitulo=b.a.ICON_EDITAR),this.activar=!1,this.vistaFormulario=!0,this.cargando=!1,this.extraerValoresIniciales()},o.prototype.activarInactivarOrdenCompraMotivo=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_EDITAR,this,!0)){var i={title:this.objetoSeleccionado.ocmInactivo?b.a.MSJ_TITULO_ACTIVAR:b.a.MSJ_TITULO_INACTIVAR,texto:(this.objetoSeleccionado.ocmInactivo?b.a.MSJ_PREGUNTA_ACTIVAR:b.a.MSJ_PREGUNTA_INACTIVAR)+"<br>Motivo: "+this.objetoSeleccionado.ocmDetalle,type:b.a.SWAL_QUESTION,confirmButtonText:b.a.MSJ_SI_ACEPTAR,cancelButtonText:b.a.MSJ_NO_CANCELAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){if(i){o.cargando=!0;var e={invPedidosOrdenCompraMotivoPK:new lo.a({ocmEmpresa:o.empresaSeleccionada.empCodigo,ocmCodigo:o.objetoSeleccionado.ocmCodigo,ocmSector:o.sectorSeleccionado.secCodigo}),estado:!o.objetoSeleccionado.ocmInactivo};o.motivoService.actualizarEstadoInvPedidosOrdenCompraMotivo(e,o,b.a.KEY_EMPRESA_SELECT)}})}},o.prototype.despuesDeActualizarEstadoInvPedidosOrdenCompraMotivo=function(o){this.cargando=!1,this.resetearFormulario(),this.objetoSeleccionado.ocmInactivo=!this.objetoSeleccionado.ocmInactivo,this.toastr.success(o.operacionMensaje,b.a.TOAST_CORRECTO),this.refrescarTabla(this.objetoSeleccionado,"U")},o.prototype.eliminarOrdenCompraMotivo=function(o){var i=this;if(this.utilService.verificarPermiso(b.a.ACCION_ELIMINAR,this,!0)){var e={title:b.a.MSJ_TITULO_ELIMINAR,texto:b.a.MSJ_PREGUNTA_ELIMINAR,type:b.a.SWAL_WARNING,confirmButtonText:b.a.MSJ_SI_ELIMINAR,cancelButtonText:b.a.MSJ_CANCELAR,confirmButtonColor:b.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(e).then(function(e){if(e){i.cargando=!0;var t={invPedidosOrdenCompraMotivoPK:new lo.a(o)};i.motivoService.eliminarInvPedidosOrdenCompraMotivo(t,i,b.a.KEY_EMPRESA_SELECT)}})}},o.prototype.guardar=function(o){if(this.utilService.verificarPermiso(b.a.ACCION_CREAR,this,!0))if(this.cargando=!0,this.utilService.establecerFormularioTocado(o)&&o&&o.valid){var i={invPedidosOrdenCompraMotivo:this.motivoService.formatearInvPedidosOrdenCompraMotivo(this.invPedidosOrdenCompraMotivo,this),aprobadores:this.listadoAprobadores};this.motivoService.guardarInvPedidosOrdenCompraMotivo(i,this,b.a.KEY_EMPRESA_SELECT)}else this.toastr.error(b.a.MSJ_CAMPOS_INVALIDOS,b.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},o.prototype.actualizar=function(o){if(this.utilService.verificarPermiso(b.a.ACCION_CREAR,this,!0))if(this.sePuedeCancelar())this.resetearFormulario(),this.toastr.warning(b.a.NO_REALIZO_NINGUN_CAMBIO,b.a.TAG_AVISO);else if(this.cargando=!0,this.utilService.establecerFormularioTocado(o)&&o&&o.valid){var i={invPedidosOrdenCompraMotivo:this.motivoService.formatearInvPedidosOrdenCompraMotivo(this.invPedidosOrdenCompraMotivo,this),aprobadores:this.listadoAprobadores};this.motivoService.actualizarInvPedidosOrdenCompraMotivo(i,this,b.a.KEY_EMPRESA_SELECT)}else this.toastr.error(b.a.MSJ_CAMPOS_INVALIDOS,b.a.MSJ_TITULO_INVALIDOS),this.cargando=!1},o.prototype.imprimir=function(){if(this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var o={listaInvPedidosOrdenCompraMotivoTO:this.listadoResultado};this.motivoService.imprimirInvPedidosOrdenCompraMotivo(o,this,this.empresaSeleccionada)}},o.prototype.exportar=function(){if(this.utilService.verificarPermiso(b.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var o={listaInvPedidosOrdenCompraMotivoTO:this.listadoResultado};this.motivoService.exportarInvPedidosOrdenCompraMotivo(o,this,this.empresaSeleccionada)}},o.prototype.mostrarAgregarUsuario=function(){this.empresaSeleccionada.listaSisPermisoTO.gruCrear?(this.classTitulo=b.a.ICON_CREAR,this.activar=!1,this.listaUsuarios=this.listaUsuariosTodos.slice(),this.listUsuarioSeleccionado=[],this.generarListaUsuarios(),this.mostrarDatosCrud=!0):this.toastr.warning(b.a.ERROR_403_TEXTO,b.a.ERROR_403_TITULO)},o.prototype.generarListaUsuarios=function(){this.reestablecerListadoUsuarios()},o.prototype.cancelarAgregarUsuario=function(){this.classTitulo=b.a.ICON_FILTRAR,this.listUsuarioSeleccionado=[],this.listaUsuariosFiltrada=[],this.mostrarDatosCrud=!1},o.prototype.filtrarUsuarioEmpresa=function(o){var i=o.query,e=[];this.listaUsuarios.forEach(function(o){0!=o.usrNombre.toLowerCase().indexOf(i.toLowerCase())&&0!=o.usrApellido.toLowerCase().indexOf(i.toLowerCase())||e.push(o)}),this.listaUsuariosFiltrada=e},o.prototype.agregarUsuario=function(){var o=this;0==this.listUsuarioSeleccionado.length?this.toastr.info(b.a.MSJ_SELECCIONE_USUARIO,""):this.empresaSeleccionada.listaSisPermisoTO.gruCrear?(this.listUsuarioSeleccionado.forEach(function(i){var e=new po({activo:!0,detSecuencial:0,invPedidosMotivoTO:o.invPedidosOrdenCompraMotivo});e.usuario=i;var t=o.listadoAprobadores.findIndex(function(o){return o.usuario.usrCodigo===i.usrCodigo});t<0?o.listadoAprobadores.push(e):o.listadoAprobadores[t].activo=!0,o.gridAprobador&&o.gridAprobador.updateRowData({add:[e]})}),this.actualizarListaUsuario()):this.toastr.warning(b.a.ERROR_403_TEXTO,b.a.ERROR_403_TITULO)},o.prototype.eliminarUsuarioLista=function(){var o=this;if(this.empresaSeleccionada.listaSisPermisoTO.gruEliminar){var i={title:b.a.MSJ_TITULO_ELIMINAR,texto:b.a.MSJ_PREGUNTA_ELIMINAR,type:b.a.SWAL_WARNING,confirmButtonText:b.a.MSJ_SI_ELIMINAR,cancelButtonText:b.a.MSJ_CANCELAR,confirmButtonColor:b.a.COLOR_ELIMINAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){if(i){var e;if((e=o.listadoAprobadores.findIndex(function(i){return i.usuario.usrCodigo===o.usuarioSeleccionado.usuario.usrCodigo}))>-1&&(o.listadoAprobadores[e].activo=!1),o.listadoAprobadores[e].activo=!1,o.invPedidosOrdenCompraMotivo.ocmAprobacionAutomatica){var t=o.listadoAprobadores.findIndex(function(i){return i.usuario.usrCodigo===o.usuarioSeleccionado.usuario.usrCodigo});t>-1&&(o.listadoAprobadores[t].activo=!1)}if(o.gridAprobador&&o.gridAprobador.updateRowData({remove:[o.listadoAprobadores[e]]}),e>-1)-1===o.listaUsuarios.findIndex(function(i){return i.usrCodigo===o.usuarioSeleccionado.usuario.usrCodigo})&&o.listaUsuarios.push(o.usuarioSeleccionado.usuario)}})}else this.toastr.warning(b.a.ERROR_403_TEXTO,b.a.ERROR_403_TITULO)},o.prototype.actualizarListaUsuario=function(){var o=this;this.listUsuarioSeleccionado.forEach(function(i){o.listaUsuarios.splice(o.listaUsuarios.findIndex(function(o){return o.usrCodigo===i.usrCodigo}),1)}),this.cancelarAgregarUsuario()},o.prototype.reestablecerListadoUsuarios=function(){var o=this;this.listadoAprobadores.forEach(function(i){o.listaUsuarios.splice(o.listaUsuarios.findIndex(function(o){return o.usrCodigo===i.usuario.usrCodigo&&i.activo}),1)})},o.prototype.resetearFormulario=function(){this.frmTitulo=b.a.TITULO_FILTROS,this.classTitulo=b.a.ICON_FILTRAR,this.invPedidosOrdenCompraMotivo=new co.a,this.listadoAprobadores=[],this.mostrarDatosCrud=!1,this.vistaFormulario=!1,this.accion=null},o.prototype.cancelarAccion=function(){var o=this;if(this.sePuedeCancelar())this.resetearFormulario();else{var i={title:b.a.MSJ_TITULO_CANCELAR,texto:b.a.MSJ_PREGUNTA_CANCELAR,type:b.a.SWAL_QUESTION,confirmButtonText:b.a.MSJ_ACEPTAR,cancelButtonText:b.a.MSJ_CANCELAR};this.utilService.generarSwallConfirmacionHtml(i).then(function(i){i&&o.resetearFormulario()})}},o.prototype.sePuedeCancelar=function(){return this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoOC)&&this.utilService.compararObjetos(this.listadoInicial,this.listadoAprobadores)},o.prototype.iniciarAgGrid=function(){this.columnDefs=this.motivoService.generarColumnasMotivoPedidoOrdenCompra(),this.columnAprobador=this.motivoService.generarColumnasAprobador(this),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="single",this.context={componentParent:this},this.frameworkComponents={botonOpciones:L.a,toolTip:N.a,inputEstado:F.a},this.components={}},o.prototype.onGridReady=function(o){this.gridApi=o.api,this.gridColumnApi=o.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},o.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},o.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var o=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,o)}},o.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},o.prototype.filaFocused=function(o){var i=this.gridApi?this.gridApi.getRowNode(o.rowIndex):null;this.objetoSeleccionado=i?i.data:null},o.prototype.mostrarOpciones=function(o,i){this.mostrarContextMenu(i,o)},o.prototype.mostrarContextMenu=function(o,i){this.objetoSeleccionado=o,this.generarOpciones(),this.menuOpciones.show(i),i.stopPropagation()},o.prototype.generarOpciones=function(){var o=this,i=this.utilService.verificarPermiso(b.a.ACCION_EDITAR,this)&&!this.vistaFormulario,e=this.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,this)&&!this.vistaFormulario,t=this.utilService.verificarPermiso(b.a.ACCION_ELIMINAR,this)&&!this.vistaFormulario,a=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&this.objetoSeleccionado.ocmInactivo,r=this.empresaSeleccionada.listaSisPermisoTO.gruModificar&&!this.objetoSeleccionado.ocmInactivo;this.opciones=[{label:b.a.ACCION_CONSULTAR,icon:b.a.ICON_CONSULTAR,disabled:!e,command:function(i){return e?o.consultarOrdenCompraMotivo(o.objetoSeleccionado):null}},{label:b.a.ACCION_EDITAR,icon:b.a.ICON_EDITAR,disabled:!i,command:function(e){return i?o.editarOrdenCompraMotivo(o.objetoSeleccionado):null}},{label:b.a.ACCION_ELIMINAR,icon:b.a.ICON_ELIMINAR,disabled:!t,command:function(i){return t?o.eliminarOrdenCompraMotivo(o.objetoSeleccionado):null}},this.objetoSeleccionado.ocmInactivo?{label:b.a.ACCION_ACTIVAR,icon:b.a.ICON_ACTIVAR,disabled:!a,command:function(){return a?o.activarInactivarOrdenCompraMotivo():null}}:{label:b.a.ACCION_INACTIVAR,icon:b.a.ICON_INACTIVAR,disabled:!r,command:function(){return r?o.activarInactivarOrdenCompraMotivo():null}}]},o.prototype.refreshGrid=function(){var o=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){o.actualizarFilas()},50)},o.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},o.prototype.refrescarTabla=function(o,i){switch(i){case"I":if(this.listadoResultado.length>0)(t=this.listadoResultado.slice()).unshift(o),this.listadoResultado=t;break;case"U":var e=this.listadoResultado.findIndex(function(i){return i.ocmCodigo===o.ocmCodigo});(t=this.listadoResultado.slice())[e]=o,this.listadoResultado=t;break;case"D":var t;e=this.listadoResultado.findIndex(function(i){return i.ocmCodigo===o.ocmCodigo});(t=this.listadoResultado.slice()).splice(e,1),this.listadoResultado=t}this.refreshGrid()},o.prototype.ejecutarAccion=function(o){this.accion!==b.a.ACCION_CONSULTAR&&this.eliminarUsuarioLista()},o.prototype.onGridReadyAprobador=function(o){this.gridAprobador=o.api,this.gridColumnApiAprobador=o.columnApi,this.redimencionarColumnas(this.gridAprobador),this.actualizarFilas()},o.prototype.mostrarOpcionesAprobador=function(o,i){this.mostrarContextMenuAprobador(i,o)},o.prototype.mostrarContextMenuAprobador=function(o,i){this.usuarioSeleccionado=o,this.generarOpcionesAprobador(),this.cma.show(i),i.stopPropagation()},o.prototype.generarOpcionesAprobador=function(){var o=this,i=this.empresaSeleccionada.listaSisPermisoTO.gruEliminar;this.opcionesAprobador=[{label:b.a.ACCION_ELIMINAR,icon:b.a.ICON_ELIMINAR,disabled:!i,command:i?function(i){return o.eliminarUsuarioLista()}:null}]},o.prototype.redimencionarColumnas=function(o){o&&o.sizeColumnsToFit()},o.prototype.unloadHandler=function(o){if(this.accion==b.a.ACCION_CONSULTAR||this.utilService.puedoCancelar(this.valoresIniciales,this.frmMotivoOC)||this.utilService.compararObjetos(this.listadoInicial,this.listadoAprobadores))return!0;o.returnValue=!1},uo([Object(t.ViewChild)("menuOpciones"),mo("design:type",P.ContextMenu)],o.prototype,"menuOpciones",void 0),uo([Object(t.ViewChild)("cma"),mo("design:type",P.ContextMenu)],o.prototype,"cma",void 0),uo([Object(t.ViewChild)("frmMotivoOC"),mo("design:type",D.NgForm)],o.prototype,"frmMotivoOC",void 0),uo([Object(t.HostListener)("window:resize",["$event"]),mo("design:type",Function),mo("design:paramtypes",[]),mo("design:returntype",void 0)],o.prototype,"onResize",null),uo([Object(t.HostListener)("window:beforeunload",["$event"]),mo("design:type",Function),mo("design:paramtypes",[Event]),mo("design:returntype",void 0)],o.prototype,"unloadHandler",null),o=uo([Object(t.Component)({selector:"app-configuracion-orden-compra",template:e("TaXX")}),mo("design:paramtypes",[ao.a,p.a,a.ActivatedRoute,d.b,T.a,R.a,S.a])],o)}(),vo=e("XYH7"),go=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},Ao=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},fo=function(){function o(o,i,e,t,a,r,n,s){this.route=o,this.atajoService=i,this.sectorService=e,this.utilService=t,this.filasService=a,this.configuracionPedidoService=r,this.ordenPedidoService=n,this.toastr=s,this.activar=!1,this.listaEmpresas=[],this.empresaSeleccionada=new O.a,this.vistaListado=!1,this.deshabilitarOpciones=!1,this.configuracion=new h.a,this.listaSectores=[],this.listaMotivos=[],this.sectorSeleccionado=new _.a,this.motivoSeleccionado=new U.a,this.cargando=!1,this.es={},this.funcionesUsuario=[],this.dataListadoOrden=null,this.operacionListado={},this.dataFormularioOrden=null,this.filasTiempoRecargar=!1,this.dataFormularioCompra=null,k.locale("es"),this.constantes=b.a,this.es=this.utilService.setLocaleDate(),this.listaEmpresas=this.route.snapshot.data.ordenPedido,this.listaEmpresas&&(this.empresaSeleccionada=this.utilService.seleccionarEmpresa(this.listaEmpresas))}return o.prototype.ngOnInit=function(){this.cambiarempresaSeleccionada(),this.iniciarAtajos()},o.prototype.iniciarAtajos=function(){this.atajoService.add(new l.Hotkey(b.a.ATAJO_AYUDA,function(){return window.open("http://google.com","_blank"),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_BUSCAR,function(){var o=document.getElementById("btnBuscar");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_NUEVO,function(){var o=document.getElementById("btnNuevo");return o&&o.click(),!1}))},o.prototype.cambiarempresaSeleccionada=function(){b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo,this.cargando=!0,this.listaSectores=[],this.listaMotivos=[],this.funcionesUsuario=[],this.configuracion=new h.a,this.sectorSeleccionado=new _.a,this.motivoSeleccionado=null,this.listarSectores()},o.prototype.limpiarResultado=function(){this.operacionListado={objeto:null,accion:b.a.LST_LIMPIAR},this.dataFormularioOrden=null,this.dataFormularioCompra=null,this.vistaListado=!1,this.filasService.actualizarFilas(0)},o.prototype.listarSectores=function(){this.cargando=!0,this.listaMotivos=[],this.listaSectores=[],this.sectorSeleccionado=null,this.motivoSeleccionado=null;var o={empresa:b.a.KEY_EMPRESA_SELECT,mostrarInactivo:!1};this.sectorService.listarPrdListaSectorTO(o,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarSectores=function(o){var i=this;this.listaSectores=o.slice(),this.listaSectores.length>0?this.sectorSeleccionado=this.sectorSeleccionado&&this.sectorSeleccionado.secCodigo?this.listaSectores.find(function(o){return o.secCodigo===i.sectorSeleccionado.secCodigo}):this.listaSectores[0]:this.sectorSeleccionado=null,this.cargando=!1,this.listarMotivos()},o.prototype.listarMotivos=function(){this.cargando=!0,this.listaMotivos=[];var o=this.sectorSeleccionado?new C.a({secEmpresa:this.empresaSeleccionada.empCodigo,secCodigo:this.sectorSeleccionado.secCodigo}):null,i={empresa:this.empresaSeleccionada.empCodigo,incluirInactivos:!1,prdSectorPK:o,invProductoCategoriaPK:null};this.configuracionPedidoService.listarInvPedidosMotivo(i,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarMotivos=function(o){var i=this;this.listaMotivos=o.slice(),this.listaMotivos.length>0?this.motivoSeleccionado=this.motivoSeleccionado&&this.motivoSeleccionado.invPedidosMotivoPK.pmCodigo?this.listaMotivos.find(function(o){return o.invPedidosMotivoPK.pmCodigo===i.motivoSeleccionado.invPedidosMotivoPK.pmCodigo}):this.listaMotivos[0]:this.motivoSeleccionado=null,this.cargando=!1,this.traerConfiguracionPedidos()},o.prototype.traerConfiguracionPedidos=function(){if(this.funcionesUsuario=[],this.configuracion=new h.a,this.motivoSeleccionado&&this.motivoSeleccionado.invPedidosMotivoPK.pmCodigo){this.cargando=!0;var o={empresa:b.a.KEY_EMPRESA_SELECT,invPedidosMotivoPK:this.motivoSeleccionado.invPedidosMotivoPK};this.configuracionPedidoService.getListaInvPedidosConfiguracion(o,this,b.a.KEY_EMPRESA_SELECT)}},o.prototype.despuesDeListarConfiguracionPedido=function(o){this.configuracion=o,this.funcionesUsuario=this.ordenPedidoService.establecerFuncionesUsuario(this.configuracion),this.cargando=!1},o.prototype.cancelar=function(o){this.dataFormularioOrden=null,this.dataFormularioCompra=null,this.cargando=!1,this.activar=!1,this.deshabilitarOpciones=!1,this.vistaListado=!o||o.accion!==b.a.ACCION_EJECUTAR,o&&o.accion===b.a.ACCION_EJECUTAR&&(this.filasTiempoRecargar=!this.filasTiempoRecargar)},o.prototype.accionLista=function(o){this.cancelar(),o&&o.accion===b.a.ACCION_EJECUTAR?(this.vistaListado=!1,this.ejecutarOrdenPedido(o.objeto)):this.operacionListado=o},o.prototype.cambiarActivar=function(o){this.activar=o.activar,o.deshabilitarOpciones&&(this.deshabilitarOpciones=!0),!1===o.vistaListado&&(this.vistaListado=!1),o.gridApi&&o.gridApi.sizeColumnsToFit()},o.prototype.buscarOrdenesPedido=function(o){this.cargando=!0,this.filasService.actualizarFilas(0),this.dataListadoOrden=this.generarObjetoConsultaEnviar(o),this.dataFormularioOrden=null,this.vistaListado=!0,this.cargando=!1},o.prototype.nuevaOrdenPedido=function(){this.cargando=!0,this.ordenPedidoService.verificarPermiso(b.a.ACCION_CREAR,this,!0)&&(this.motivoSeleccionado&&!this.motivoSeleccionado.pmInactivo&&this.sectorSeleccionado&&this.sectorSeleccionado.secActivo?this.dataFormularioOrden=this.generarObjetoFormulario():this.toastr.warning(b.a.MSJ_MOTIVO_SECTOR_INACTIVOS,b.a.TOAST_INFORMACION)),this.cargando=!1},o.prototype.generarObjetoFormulario=function(){return{accion:b.a.ACCION_CREAR,listaMotivos:this.listaMotivos,motivoSeleccionado:this.motivoSeleccionado,empresaSeleccionada:this.empresaSeleccionada,invPedidosPK:new vo.a({pedEmpresa:this.empresaSeleccionada.empCodigo,pedMotivo:this.motivoSeleccionado.invPedidosMotivoPK.pmCodigo,pedSector:this.motivoSeleccionado.invPedidosMotivoPK.pmSector,pedNumero:null})}},o.prototype.generarObjetoConsultaEnviar=function(o){return{empresa:this.empresaSeleccionada.empCodigo,motivo:this.motivoSeleccionado?this.motivoSeleccionado.invPedidosMotivoPK.pmCodigo:null,pmAprobacionAutomatica:this.motivoSeleccionado?this.motivoSeleccionado.pmAprobacionAutomatica:null,funcionesUsuario:this.funcionesUsuario,nroRegistros:o||null,tipo:"GENERAROP",busqueda:this.sectorSeleccionado?this.sectorSeleccionado.secCodigo:null,visualizarConsultaOrdenPedido:!1}},o.prototype.ejecutarOrdenPedido=function(o){this.utilService.verificarPermiso(b.a.ACCION_EJECUTAR,this,!0)&&(this.dataFormularioOrden=null,this.dataFormularioCompra={accion:b.a.ACCION_EJECUTAR,invPedidosPK:new vo.a({pedEmpresa:o.codigoempresa,pedMotivo:o.codigomotivo,pedNumero:o.pedidonumero,pedSector:o.codigosector})})},o=go([Object(t.Component)({selector:"app-orden-pedido",template:e("Yozd")}),Ao("design:paramtypes",[a.ActivatedRoute,l.HotkeysService,p.a,S.a,T.a,m.a,V.a,d.b])],o)}(),Co=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},So=[{path:"",component:c,children:[{path:"pedidoProductoCategoria",component:H.a,resolve:{categoriaProductoInv:B.a,breadcrumb:J.a,pedidos:"true"},runGuardsAndResolvers:"always"},{path:"pedidoProductoUnidaMedida",component:q.a,resolve:{medidaProducto:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"pedidoProducto",component:$.a,resolve:{productoInv:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"configuracionPedido",component:x,resolve:{configuracionPedido:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"configuracionOrdenCompra",component:ho,resolve:{configuracionOrdenCompra:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"generarOrdenPedido",component:fo,resolve:{ordenPedido:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"aprobarOrdenPedido",component:Z,resolve:{aprobarOrdenPedido:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"generarOrdenCompra",component:eo,resolve:{generarOrdenCompra:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"aprobarOrdenCompra",component:so,resolve:{aprobarOrdenCompra:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"consultaOrdenesPedido",component:Y,resolve:{consultaOrdenesPedido:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"consultaOrdenesCompra",component:so,resolve:{aprobarOrdenCompra:B.a,tipoVista:"C",breadcrumb:J.a},runGuardsAndResolvers:"always"},{path:"configuracionCorreo",component:W.a,resolve:{configuracionCorreo:B.a,breadcrumb:J.a},runGuardsAndResolvers:"always"}]}],Oo=function(){function o(){}return o=Co([Object(t.NgModule)({imports:[a.RouterModule.forChild(So)],exports:[a.RouterModule],providers:[{provide:"true",useValue:function(o,i){return"true"}},{provide:"T",useValue:function(o,i){return"T"}},{provide:"C",useValue:function(o,i){return"C"}}]})],o)}(),bo=e("Q8hO"),Ro=e("EBa0"),Io=e("z5Y/"),Eo=e("L5HG"),To=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},_o=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},Po=function(){function o(o,i,e,a,r,n,s){this.toastr=o,this.atajoService=i,this.ordenPedidoService=e,this.utilService=a,this.filasService=r,this.api=n,this.archivoService=s,this.parametrosBusqueda=null,this.empresaSeleccionada=new O.a,this.filasTiempoRecargar=!1,this.enviarCancelar=new t.EventEmitter,this.enviarActivar=new t.EventEmitter,this.constantes=b.a,this.opciones=[],this.es={},this.activar=!1,this.cargando=!1,this.accion=null,this.vistaListado=!1,this.listadoResultado=[],this.objetoSeleccionado=new Ro.a,this.dataFormularioPedido=null,this.columnDefs=[],this.columnDefsSelected=[],this.components={},this.filtroGlobal="",this.filasTiempo=new E.a,this.funcionesUsuario=[]}return o.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576),this.iniciarAtajos()},o.prototype.ngOnChanges=function(o){if(o.parametrosBusqueda&&(this.reiniciarValores(),this.empresaSeleccionada&&this.parametrosBusqueda)){b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo;var i=this.parametrosBusqueda.pmAprobacionAutomatica;this.filtroGlobal="",this.listarOrdenesPedido(),this.iniciarAgGrid(i)}o.filasTiempoRecargar&&this.actualizarFilas(),o.operacion&&this.operacionEnLista(this.operacion)},o.prototype.iniciarAtajos=function(){var o=this;this.atajoService.add(new l.Hotkey(b.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var o=document.getElementById("btnActivarOrdenPedido");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_IMPRIMIR,function(){var o=document.getElementById("btnImprimirListado");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_EXPORTAR,function(){var o=document.getElementById("btnExportarListado");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_CONSULTAR,function(){return o.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,o,!0)&&o.objetoSeleccionado&&o.consultarOrdenPedido(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_ANULAR,function(){return o.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,o,!0)&&o.objetoSeleccionado&&o.objetoSeleccionado&&o.ordenPedidoService.verificarPermiso(b.a.ACCION_ANULAR,o)&&o.ordenPedidoService.getEstadoInvPedidoTO(o.objetoSeleccionado)===b.a.ETIQUETA_PEDIDO_APROBADO&&o.ordenPedidoService.getEstadoInvPedidoTO(o.objetoSeleccionado)!==b.a.ETIQUETA_PENDIENTE&&o.ordenPedidoService.getEstadoInvPedidoTO(o.objetoSeleccionado)!==b.a.ETIQUETA_ANULADO&&o.anularOrdenPedido(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_RESTAURAR,function(){return o.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,o,!0)&&o.objetoSeleccionado&&o.objetoSeleccionado&&o.ordenPedidoService.verificarPermiso(b.a.ACCION_RESTAURAR,o)&&o.ordenPedidoService.getEstadoInvPedidoTO(o.objetoSeleccionado)===b.a.ETIQUETA_ANULADO&&o.resturarOrdenPedido(),!1}))},o.prototype.consultarOrdenPedido=function(){this.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_CONSULTAR,this.mostrarObjetoParaAccion(this.objetoSeleccionado))},o.prototype.aprobarOrdenPedido=function(o){this.ordenPedidoService.verificarPermiso(b.a.ACCION_APROBAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_APROBAR,this.mostrarObjetoParaAccion(o))},o.prototype.desAprobarOrdenPedido=function(o){this.ordenPedidoService.verificarPermiso(b.a.ACCION_DESAPROBAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_DESAPROBAR,this.mostrarObjetoParaAccion(o))},o.prototype.anularOrdenPedido=function(){this.ordenPedidoService.verificarPermiso(b.a.ACCION_ANULAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_ANULAR,this.mostrarObjetoParaAccion(this.objetoSeleccionado))},o.prototype.resturarOrdenPedido=function(){var o=this;if(this.ordenPedidoService.verificarPermiso(b.a.ACCION_RESTAURAR,this,!0)){this.cargando=!0;var i=new vo.a({pedEmpresa:this.objetoSeleccionado.codigoempresa,pedSector:this.objetoSeleccionado.codigosector,pedMotivo:this.objetoSeleccionado.codigomotivo,pedNumero:this.objetoSeleccionado.pedidonumero});this.api.post("todocompuWS/pedidosWebController/restaturarInvPedidos",{invPedidosPK:i},b.a.KEY_EMPRESA_SELECT).then(function(i){i&&i.extraInfo?(o.objetoSeleccionado.estado=b.a.ETIQUETA_POR_APROBAR_PEDIDO,o.objetoSeleccionado.pedanulado=!1,o.refreshGrid(),o.toastr.success(i.operacionMensaje,b.a.TOAST_CORRECTO)):o.toastr.warning(i.operacionMensaje,b.a.TAG_AVISO),o.cargando=!1}).catch(function(i){return o.utilService.handleError(i,o)})}},o.prototype.listarOrdenesPedido=function(){this.filasTiempo.filas=0,this.cargando=!0,this.limpiarResultado(),this.parametrosBusqueda.fechaInicio&&this.parametrosBusqueda.fechaFin&&(this.parametrosBusqueda.fechaInicio=this.utilService.formatearDateToStringDDMMYYYY(this.parametrosBusqueda.fechaInicio),this.parametrosBusqueda.fechaFin=this.utilService.formatearDateToStringDDMMYYYY(this.parametrosBusqueda.fechaFin)),this.funcionesUsuario=this.parametrosBusqueda?this.parametrosBusqueda.funcionesUsuario:null,this.ordenPedidoService.listarOrdenesPedido(this.parametrosBusqueda,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarOrdenPedido=function(o){this.listadoResultado=o||[],this.actualizarFilas(),this.vistaListado=!0,this.cargando=!1},o.prototype.imprimirOrdenPedido=function(o){var i=this;if(this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={invPedidosPK:new vo.a({pedEmpresa:o.codigoempresa,pedNumero:o.pedidonumero,pedMotivo:o.codigomotivo,pedSector:o.codigosector}),nombreReporte:b.a.NOMBRE_REPORTE_APROBAR_ORDEN_PEDIDO};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosGeneral",e,this.empresaSeleccionada).then(function(o){o?i.utilService.descargarArchivoPDF("ordenDePedido "+i.utilService.obtenerHorayFechaActual()+".pdf",o):i.toastr.warning(b.a.MSJ_NO_DATA),i.cargando=!1}).catch(function(o){return i.utilService.handleError(o,i)})}},o.prototype.imprimir=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var i=this.utilService.getAGSelectedData(this.gridApi);if(0===i.length)this.toastr.info(b.a.MSJ_NO_ITEM_SELECCIONADO,b.a.TOAST_INFORMACION),this.cargando=!1;else{var e=this.utilService.enviarListadoPedidosSeleccionados(i.slice());if(e.conStatus)this.cargando=!1,this.toastr.warning(e.mensaje,b.a.TAG_AVISO);else if(e.listadoResultado.length>0){var t={codigoSector:this.parametrosBusqueda&&this.parametrosBusqueda.busqueda?this.parametrosBusqueda.busqueda:"",codigoMotivo:this.parametrosBusqueda&&this.parametrosBusqueda.motivo?this.parametrosBusqueda.motivo:"",listadoInvPedidosTO:i,nombreReporte:b.a.NOMBRE_REPORTE_APROBAR_ORDEN_PEDIDO_LISTADO};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosTO",t,this.empresaSeleccionada).then(function(i){i._body.byteLength>0?o.utilService.descargarArchivoPDF("ListadoOrdenesPedido_"+o.utilService.obtenerHorayFechaActual()+".pdf",i):o.toastr.warning(b.a.MSJ_ERROR_IMPRIMIR,b.a.TAG_AVISO),o.cargando=!1}).catch(function(i){return o.utilService.handleError(i,o)})}}}},o.prototype.imprimirIndividual=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var i=this.utilService.getAGSelectedData(this.gridApi),e=this.ordenPedidoService.formatearImprimirPedidosIndividual(i);if(0===e.length)this.toastr.info(b.a.MSJ_NO_ITEM_SELECCIONADO,b.a.TOAST_INFORMACION),this.cargando=!1;else{var t=this.utilService.enviarListadoPedidosSeleccionados(i.slice());if(t.conStatus)this.cargando=!1,this.toastr.warning(t.mensaje,b.a.TAG_AVISO);else if(t.listadoResultado.length>0){var a={listaInvPedidosPK:e,nombreReporte:b.a.NOMBRE_REPORTE_APROBAR_ORDEN_PEDIDO_LOTE};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosLote",a,this.empresaSeleccionada).then(function(i){i._body.byteLength>0?o.utilService.descargarArchivoPDF("OrdenesPedidos_"+o.utilService.obtenerHorayFechaActual()+".pdf",i):o.toastr.warning(b.a.MSJ_ERROR_IMPRIMIR,b.a.TAG_AVISO),o.cargando=!1}).catch(function(i){return o.utilService.handleError(i,o)})}}}},o.prototype.exportar=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var i=this.utilService.getAGSelectedData(this.gridApi);if(0===i.length)this.toastr.info(b.a.MSJ_NO_ITEM_SELECCIONADO,b.a.TOAST_INFORMACION),this.cargando=!1;else{var e={codigoMotivo:this.parametrosBusqueda&&this.parametrosBusqueda.motivoSeleccionado?this.parametrosBusqueda.motivoSeleccionado.pmCodigo:"",listadoInvPedidosTO:i};this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidosTO",e,this.empresaSeleccionada).then(function(i){i?o.utilService.descargarArchivoExcel(i._body,"ListadoOrdenesPedido_"):o.toastr.warning(b.a.MSJ_NO_DATA),o.cargando=!1}).catch(function(i){return o.utilService.handleError(i,o)})}}},o.prototype.reiniciarValores=function(){this.filasTiempo.filas=0,this.activar=!1,this.accion=null,this.dataFormularioPedido=null,this.vistaListado=!1},o.prototype.limpiarResultado=function(){this.vistaListado=!1,this.listadoResultado=[],this.objetoSeleccionado=new Ro.a,this.filasTiempo.resetearContador(),this.actualizarFilas()},o.prototype.mostrarObjetoParaAccion=function(o){this.dataFormularioPedido={accion:this.accion,invPedidosPK:new vo.a({pedEmpresa:o.codigoempresa,pedMotivo:o.codigomotivo,pedNumero:o.pedidonumero,pedSector:o.codigosector}),tipo:"APROBAROP",invPedidoTO:o},this.cargando=!1},o.prototype.operacionEnLista=function(o){switch(o.accion){case b.a.LST_ACTUALIZAR:this.refrescarTabla(o.objeto,"U");break;case b.a.LST_LIMPIAR:this.limpiarResultado()}this.cancelar()},o.prototype.refrescarTabla=function(o,i){switch(i){case"U":o.pedfecha=JSON.parse(JSON.stringify(this.utilService.convertirFechaStringYYYYMMDD(o.pedfecha)));var e=this.listadoResultado.findIndex(function(i){return i.pedidonumero===o.pedidonumero}),t=this.listadoResultado.slice();t[e]=o,this.listadoResultado=t}this.refreshGrid()},o.prototype.cancelar=function(){this.dataFormularioPedido=null,this.vistaListado=!0,this.accion=null,this.enviarCancelar.emit(),this.iniciarAtajos()},o.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!1,gridApi:this.gridApi}),this.gridApi&&this.gridApi.sizeColumnsToFit()},o.prototype.cambiarActivarFormulario=function(o){this.vistaListado=o.vistaListado;var i={activar:o.activar,deshabilitarOpciones:!0};this.enviarActivar.emit(i)},o.prototype.generarOpciones=function(){var o=this,i=this.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,this),e=this.ordenPedidoService.verificarPermiso(b.a.ACCION_APROBAR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===b.a.ETIQUETA_POR_APROBAR_PEDIDO,t=this.ordenPedidoService.verificarPermiso(b.a.ACCION_DESAPROBAR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===b.a.ETIQUETA_PEDIDO_APROBADO&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==b.a.ETIQUETA_PENDIENTE&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==b.a.ETIQUETA_ANULADO,a=this.utilService.verificarPermiso(b.a.ACCION_ANULAR,this)&&this.funcionesUsuario.indexOf("Aprobador")>-1&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===b.a.ETIQUETA_PEDIDO_APROBADO&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==b.a.ETIQUETA_PENDIENTE&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==b.a.ETIQUETA_ANULADO,r=this.utilService.verificarPermiso(b.a.ACCION_RESTAURAR,this)&&this.funcionesUsuario.indexOf("Aprobador")>-1&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===b.a.ETIQUETA_ANULADO,n=this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==b.a.ETIQUETA_ANULADO;this.opciones=[{label:b.a.ACCION_CONSULTAR,icon:b.a.ICON_CONSULTAR,disabled:!i,command:function(){return i?o.consultarOrdenPedido():null}},{label:b.a.ACCION_APROBAR,icon:b.a.ICON_APROBAR,disabled:!e,command:function(){return e?o.aprobarOrdenPedido(o.objetoSeleccionado):null}},{label:b.a.ACCION_DESAPROBAR,icon:b.a.ICON_DESAPROBAR,disabled:!t,command:function(){return t?o.desAprobarOrdenPedido(o.objetoSeleccionado):null}},{label:b.a.ACCION_ANULAR,icon:b.a.ICON_ANULAR,disabled:!a,command:function(){return a?o.anularOrdenPedido():null}},{label:b.a.ACCION_RESTAURAR,icon:b.a.ICON_RESTAURAR,disabled:!r,command:function(){return r?o.resturarOrdenPedido():null}},{label:b.a.ACCION_IMPRIMIR,icon:b.a.ICON_IMPRIMIR,disabled:!n,command:function(){return n?o.imprimirOrdenPedido(o.objetoSeleccionado):null}}]},o.prototype.mostrarOpciones=function(o,i){this.mostrarContextMenu(i,o)},o.prototype.mostrarContextMenu=function(o,i){this.objetoSeleccionado=o,this.generarOpciones(),this.menuOpciones.show(i),i.stopPropagation()},o.prototype.iniciarAgGrid=function(o){this.columnDefs=this.ordenPedidoService.generarColumnasOrdenPedidoAprobar(o),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={botonOpciones:L.a,toolTip:N.a,iconoEstado:Eo.a},this.components={}},o.prototype.onGridReady=function(o){this.gridApi=o.api,this.gridColumnApi=o.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},o.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},o.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var o=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,o)}},o.prototype.filaFocused=function(o){var i=this.gridApi?this.gridApi.getRowNode(o.rowIndex):null;this.objetoSeleccionado=i?i.data:null},o.prototype.refreshGrid=function(){var o=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){o.actualizarFilas()},50)},o.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},o.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},o.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},To([Object(t.ViewChild)("menuOpciones"),_o("design:type",P.ContextMenu)],o.prototype,"menuOpciones",void 0),To([Object(t.Input)(),_o("design:type",Object)],o.prototype,"parametrosBusqueda",void 0),To([Object(t.Input)(),_o("design:type",O.a)],o.prototype,"empresaSeleccionada",void 0),To([Object(t.Input)(),_o("design:type",Object)],o.prototype,"operacion",void 0),To([Object(t.Input)(),_o("design:type",Boolean)],o.prototype,"filasTiempoRecargar",void 0),To([Object(t.Output)(),_o("design:type",t.EventEmitter)],o.prototype,"enviarCancelar",void 0),To([Object(t.Output)(),_o("design:type",t.EventEmitter)],o.prototype,"enviarActivar",void 0),To([Object(t.HostListener)("window:resize",["$event"]),_o("design:type",Function),_o("design:paramtypes",[]),_o("design:returntype",void 0)],o.prototype,"onResize",null),o=To([Object(t.Component)({selector:"app-listado-aprobar-orden-pedido",template:e("8/Rn")}),_o("design:paramtypes",[d.b,l.HotkeysService,V.a,S.a,T.a,Io.a,w.a])],o)}(),Mo=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},yo=function(o,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,i)},Lo=function(){function o(o,i,e,a,r,n){this.toastr=o,this.atajoService=i,this.ordenPedidoService=e,this.utilService=a,this.filasService=r,this.archivoService=n,this.parametrosBusqueda=null,this.empresaSeleccionada=new O.a,this.filasTiempoRecargar=!1,this.enviarCancelar=new t.EventEmitter,this.enviarActivar=new t.EventEmitter,this.opciones=[],this.es={},this.activar=!1,this.cargando=!1,this.carrito=!1,this.accion=null,this.vistaListado=!1,this.listadoResultado=[],this.objetoSeleccionado=new Ro.a,this.dataFormularioPedido=null,this.dataFormularioCompra=null,this.columnDefs=[],this.columnDefsSelected=[],this.filtroGlobal="",this.filasTiempo=new E.a,this.funcionesUsuario=[],k.locale("es"),this.constantes=b.a,this.es=a.setLocaleDate()}return o.prototype.ngOnInit=function(){this.isScreamMd=!(window.innerWidth<=576)},o.prototype.ngOnChanges=function(o){if(o.parametrosBusqueda&&(this.reiniciarValores(),this.empresaSeleccionada&&this.parametrosBusqueda)){b.a.KEY_EMPRESA_SELECT=this.empresaSeleccionada.empCodigo;var i=this.parametrosBusqueda.pmAprobacionAutomatica;this.filtroGlobal="",this.buscarOrdenesPedido(),this.iniciarAgGrid(i)}o.filasTiempoRecargar&&this.actualizarFilas(),o.operacion&&this.operacionEnLista(this.operacion),this.iniciarAtajos()},o.prototype.iniciarAtajos=function(){var o=this;this.atajoService.add(new l.Hotkey(b.a.ATAJO_MOSTRAR_OCULTAR_FILTROS,function(){var o=document.getElementById("btnActivarOrdenCompra");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_IMPRIMIR,function(){var o=document.getElementById("btnImprimir");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_EXPORTAR,function(){var o=document.getElementById("btnExportar");return o&&o.click(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_CONSULTAR,function(){return o.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,o,!0)&&o.objetoSeleccionado&&o.consultarOrdenPedido(),!1})),this.atajoService.add(new l.Hotkey(b.a.ATAJO_ELIMINAR,function(){return o.dataFormularioPedido||o.eliminarOrdenPedido(o.objetoSeleccionado),!1}))},o.prototype.reiniciarValores=function(){this.filasTiempo.filas=0,this.activar=!1,this.accion=null,this.dataFormularioPedido=null,this.dataFormularioCompra=null,this.vistaListado=!1},o.prototype.buscarOrdenesPedido=function(){this.filasTiempo.filas=0,this.cargando=!0,this.limpiarResultado(),this.parametrosBusqueda.fechaInicio&&this.parametrosBusqueda.fechaFin&&(this.parametrosBusqueda.fechaInicio=this.utilService.formatearDateToStringDDMMYYYY(this.parametrosBusqueda.fechaInicio),this.parametrosBusqueda.fechaFin=this.utilService.formatearDateToStringDDMMYYYY(this.parametrosBusqueda.fechaFin)),this.funcionesUsuario=this.parametrosBusqueda?this.parametrosBusqueda.funcionesUsuario:null,this.ordenPedidoService.listarOrdenesPedido(this.parametrosBusqueda,this,b.a.KEY_EMPRESA_SELECT)},o.prototype.despuesDeListarOrdenPedido=function(o){this.listadoResultado=o||[],this.actualizarFilas(),this.vistaListado=!0,this.cargando=!1},o.prototype.limpiarResultado=function(){this.vistaListado=!1,this.listadoResultado=[],this.objetoSeleccionado=new Ro.a,this.filasTiempo.resetearContador(),this.actualizarFilas()},o.prototype.imprimir=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var i=this.utilService.getAGSelectedData(this.gridApi);if(0===i.length)this.toastr.info(b.a.MSJ_NO_ITEM_SELECCIONADO,b.a.TOAST_INFORMACION),this.cargando=!1;else{var e={codigoMotivo:this.parametrosBusqueda&&this.parametrosBusqueda.motivo?this.parametrosBusqueda.motivo:"",codigoSector:this.parametrosBusqueda&&this.parametrosBusqueda.sector?this.parametrosBusqueda.sector:"",listadoInvPedidosTO:i,nombreReporte:b.a.NOMBRE_REPORTE_APROBAR_ORDEN_PEDIDO_LISTADO};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosTO",e,this.empresaSeleccionada).then(function(i){i._body.byteLength>0?o.utilService.descargarArchivoPDF("ListadoOrdenesPedido_"+o.utilService.obtenerHorayFechaActual()+".pdf",i):o.toastr.warning(b.a.MSJ_ERROR_IMPRIMIR,b.a.TAG_AVISO),o.cargando=!1}).catch(function(i){return o.utilService.handleError(i,o)})}}},o.prototype.imprimirIndividual=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var i=this.utilService.getAGSelectedData(this.gridApi),e=this.ordenPedidoService.formatearImprimirPedidosIndividual(i);if(0===e.length)this.toastr.info(b.a.MSJ_NO_ITEM_SELECCIONADO,b.a.TOAST_INFORMACION),this.cargando=!1;else{var t={listaInvPedidosPK:e,nombreReporte:b.a.NOMBRE_REPORTE_APROBAR_ORDEN_PEDIDO_LOTE};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosLote",t,this.empresaSeleccionada).then(function(i){i._body.byteLength>0?o.utilService.descargarArchivoPDF("OrdenesPedidos_"+o.utilService.obtenerHorayFechaActual()+".pdf",i):o.toastr.warning(b.a.MSJ_ERROR_IMPRIMIR,b.a.TAG_AVISO),o.cargando=!1}).catch(function(i){return o.utilService.handleError(i,o)})}}},o.prototype.exportar=function(){var o=this;if(this.utilService.verificarPermiso(b.a.ACCION_EXPORTAR,this,!0)){this.cargando=!0;var i=this.utilService.getAGSelectedData(this.gridApi);if(0===i.length)this.toastr.info(b.a.MSJ_NO_ITEM_SELECCIONADO,b.a.TOAST_INFORMACION),this.cargando=!1;else{var e={codigoMotivo:this.parametrosBusqueda&&this.parametrosBusqueda.motivoSeleccionado?this.parametrosBusqueda.motivoSeleccionado.pmCodigo:"",listadoInvPedidosTO:i};this.archivoService.postExcel("todocompuWS/pedidosWebController/exportarReporteInvPedidosTO",e,this.empresaSeleccionada).then(function(i){i?o.utilService.descargarArchivoExcel(i._body,"ListadoOrdenesPedido_"):o.toastr.warning(b.a.MSJ_NO_DATA),o.cargando=!1}).catch(function(i){return o.utilService.handleError(i,o)})}}},o.prototype.generarOpciones=function(){var o=this,i=this.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,this),e=this.ordenPedidoService.verificarPermiso(b.a.ACCION_ELIMINAR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===b.a.ETIQUETA_PENDIENTE,t=this.ordenPedidoService.verificarPermiso(b.a.ACCION_EJECUTAR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)===b.a.ETIQUETA_PEDIDO_APROBADO,a=this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this)&&this.ordenPedidoService.getEstadoInvPedidoTO(this.objetoSeleccionado)!==b.a.ETIQUETA_PENDIENTE;this.opciones=[{label:b.a.ACCION_CONSULTAR,icon:b.a.ICON_CONSULTAR,disabled:!i,command:function(){return i?o.consultarOrdenPedido():null}},{label:b.a.ACCION_GENERAR_ORDEN_COMPRA,icon:b.a.ICON_EJECUTAR,disabled:!t,command:function(){return t?o.ejecutarOrdenPedido(o.objetoSeleccionado):null}},{label:b.a.ACCION_ELIMINAR,icon:b.a.ICON_ELIMINAR,disabled:!e,command:function(){return e?o.eliminarOrdenPedido(o.objetoSeleccionado):null}},{label:b.a.ACCION_IMPRIMIR,icon:b.a.ICON_IMPRIMIR,disabled:!a,command:function(){return a?o.imprimirOrdenPedido(o.objetoSeleccionado):null}}]},o.prototype.consultarOrdenPedido=function(){this.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_CONSULTAR,this.mostrarObjetoParaAccion(this.objetoSeleccionado))},o.prototype.ejecutarOrdenPedido=function(o){this.utilService.verificarPermiso(b.a.ACCION_EJECUTAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_EJECUTAR,this.mostrarObjetoParaAccion(o))},o.prototype.eliminarOrdenPedido=function(o){this.ordenPedidoService.verificarPermiso(b.a.ACCION_ELIMINAR,this,!0)&&(this.cargando=!0,this.accion=b.a.ACCION_ELIMINAR,this.mostrarObjetoParaAccion(o))},o.prototype.imprimirOrdenPedido=function(o){var i=this;if(this.utilService.verificarPermiso(b.a.ACCION_IMPRIMIR,this,!0)){this.cargando=!0;var e={invPedidosPK:new vo.a({pedEmpresa:o.codigoempresa,pedNumero:o.pedidonumero,pedMotivo:o.codigomotivo,pedSector:o.codigosector}),nombreReporte:"reportOrdenPedidoAprobado.jrxml"};this.archivoService.postPDF("todocompuWS/pedidosWebController/generarReporteInvPedidosGeneral",e,this.empresaSeleccionada).then(function(o){o?i.utilService.descargarArchivoPDF("ordenDePedido "+i.utilService.obtenerHorayFechaActual()+".pdf",o):i.toastr.warning(b.a.MSJ_NO_DATA),i.cargando=!1}).catch(function(o){return i.utilService.handleError(o,i)})}},o.prototype.consultarOrdenCompra=function(o){o.accion&&o.detSecuencial&&this.utilService.verificarPermiso(b.a.ACCION_CONSULTAR,this,!0)&&o.accion===b.a.ACCION_CARRITO&&(this.dataFormularioCompra={accion:b.a.ACCION_CARRITO,detSecuencial:o.detSecuencial,vista:"ordencompra",pmAprobacionAutomatica:!!this.parametrosBusqueda.pmAprobacionAutomatica&&this.parametrosBusqueda.pmAprobacionAutomatica})},o.prototype.mostrarObjetoParaAccion=function(o){this.accion===b.a.ACCION_EJECUTAR?this.dataFormularioCompra={accion:this.accion,pmAprobacionAutomatica:!!this.parametrosBusqueda.pmAprobacionAutomatica&&this.parametrosBusqueda.pmAprobacionAutomatica,invPedidosPK:new vo.a({pedEmpresa:o.codigoempresa,pedMotivo:o.codigomotivo,pedNumero:o.pedidonumero,pedSector:o.codigosector})}:this.dataFormularioPedido={accion:this.accion,invPedidosPK:new vo.a({pedEmpresa:o.codigoempresa,pedMotivo:o.codigomotivo,pedNumero:o.pedidonumero,pedSector:o.codigosector}),invPedidoTO:o},this.cargando=!1},o.prototype.cancelar=function(o){o&&o.accion===b.a.ACCION_CARRITO?(this.dataFormularioCompra=null,this.carrito=!1):(this.dataFormularioCompra=null,this.dataFormularioPedido=null,this.vistaListado=!0,this.accion=null,this.enviarCancelar.emit())},o.prototype.cambiarActivar=function(){this.activar=!this.activar,this.enviarActivar.emit({activar:this.activar,deshabilitarOpciones:!1,gridApi:this.gridApi}),this.gridApi&&this.gridApi.sizeColumnsToFit()},o.prototype.cambiarActivarFormulario=function(o){this.vistaListado=o.vistaListado;var i={activar:o.activar,deshabilitarOpciones:!0};this.enviarActivar.emit(i),o&&o.accion===b.a.ACCION_CARRITO&&(this.carrito=!0)},o.prototype.operacionEnLista=function(o){switch(o.accion){case b.a.LST_INSERTAR:this.refrescarTabla(o.objeto,"I");case b.a.LST_ACTUALIZAR:this.refrescarTabla(o.objeto,"U");break;case b.a.LST_ELIMINAR:this.refrescarTabla(o.objeto,"D");break;case b.a.LST_LIMPIAR:this.limpiarResultado()}this.cancelar()},o.prototype.iniciarAgGrid=function(o){this.columnDefs=this.ordenPedidoService.generarColumnasOrdenPedidoAprobar(o),this.columnDefsSelected=this.columnDefs.slice(),this.rowSelection="multiple",this.context={componentParent:this},this.frameworkComponents={iconoEstado:Eo.a}},o.prototype.onGridReady=function(o){this.gridApi=o.api,this.gridColumnApi=o.columnApi,this.actualizarFilas(),this.seleccionarPrimerFila(),this.redimensionarColumnas()},o.prototype.redimensionarColumnas=function(){this.gridApi&&this.gridApi.sizeColumnsToFit()},o.prototype.seleccionarPrimerFila=function(){if(this.gridApi){var o=this.gridColumnApi.getAllDisplayedColumns()[0];this.gridApi.setFocusedCell(0,o)}},o.prototype.filaFocused=function(o){var i=this.gridApi?this.gridApi.getRowNode(o.rowIndex):null;this.objetoSeleccionado=i?i.data:null},o.prototype.filtrarRapido=function(){this.gridApi&&this.gridApi.setQuickFilter(this.filtroGlobal)},o.prototype.mostrarOpciones=function(o,i){this.mostrarContextMenu(i,o)},o.prototype.mostrarContextMenu=function(o,i){this.objetoSeleccionado=o,this.generarOpciones(),this.menuOpciones.show(i),i.stopPropagation()},o.prototype.refreshGrid=function(){var o=this;this.gridApi&&this.gridApi.refreshCells(),setTimeout(function(){o.actualizarFilas()},50)},o.prototype.actualizarFilas=function(){this.filasTiempo.filas=this.gridApi?this.gridApi.getDisplayedRowCount():0,this.filasService.actualizarFilas(this.filasTiempo.filas,this.filasTiempo.getTiempo())},o.prototype.getDataSelected=function(){return this.utilService.getAGSelectedData(this.gridApi)},o.prototype.refrescarTabla=function(o,i){switch(i){case"I":if(this.listadoResultado.length>0){var e=this.listadoResultado.slice();o.pedfecha=JSON.parse(JSON.stringify(this.utilService.convertirFechaStringYYYYMMDD(o.pedfecha))),e.unshift(o),this.listadoResultado=e}break;case"U":var t=this.listadoResultado.findIndex(function(i){return i.pedidonumero===o.pedidonumero});(e=this.listadoResultado.slice())[t]=o,this.listadoResultado=e;break;case"D":t=this.listadoResultado.findIndex(function(i){return i.pedidonumero===o.pedidonumero});(e=this.listadoResultado.slice()).splice(t,1),this.listadoResultado=e}this.refreshGrid()},o.prototype.onResize=function(){this.isScreamMd=!(window.innerWidth<=576)},Mo([Object(t.ViewChild)("menuOpciones"),yo("design:type",P.ContextMenu)],o.prototype,"menuOpciones",void 0),Mo([Object(t.Input)(),yo("design:type",Object)],o.prototype,"parametrosBusqueda",void 0),Mo([Object(t.Input)(),yo("design:type",O.a)],o.prototype,"empresaSeleccionada",void 0),Mo([Object(t.Input)(),yo("design:type",Object)],o.prototype,"operacion",void 0),Mo([Object(t.Input)(),yo("design:type",Boolean)],o.prototype,"filasTiempoRecargar",void 0),Mo([Object(t.Output)(),yo("design:type",t.EventEmitter)],o.prototype,"enviarCancelar",void 0),Mo([Object(t.Output)(),yo("design:type",t.EventEmitter)],o.prototype,"enviarActivar",void 0),Mo([Object(t.ViewChild)("excelDownload"),yo("design:type",Object)],o.prototype,"excelDownload",void 0),Mo([Object(t.HostListener)("window:resize",["$event"]),yo("design:type",Function),yo("design:paramtypes",[]),yo("design:returntype",void 0)],o.prototype,"onResize",null),o=Mo([Object(t.Component)({selector:"app-listado-generar-orden-compra",template:e("lIFE")}),yo("design:paramtypes",[d.b,l.HotkeysService,V.a,S.a,T.a,w.a])],o)}();e.d(i,"PedidosModule",function(){return Do});var No=function(o,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(o,i,e,t);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},Do=function(){function o(){}return o=No([Object(t.NgModule)({imports:[Oo,bo.a],declarations:[c,x,fo,Y,Z,Po,eo,so,Lo,ho],exports:[],providers:[V.a]})],o)}()}}]);