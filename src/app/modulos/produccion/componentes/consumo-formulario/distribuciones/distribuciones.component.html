<form #frmDistribucion='ngForm' autocomplete="off" class="card m-0">
  <div class="card-body p-1">
    <fieldset>
      <div class="card mb-1">
        <div class="card-header">
          <b> {{constantes.TAG_PRODUCTO_INFORMACION}}</b>
          <div class="card-header-actions">
            <a href="#" class="card-header-action btn-minimize" data-toggle="collapse" data-target="#collapseProducto"
              aria-expanded="true" placement="left" ngbTooltip="{{constantes.TAG_MOSTRAR_OCULTAR}}">
              <i class="fa fa-minus"></i>
            </a>
          </div>
        </div>
        <div class="card-body collapse show mt-0 mb-0 pt-1 pb-0" id="collapseProducto">
          <div class="row">
            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">
              <label>
                <strong>{{constantes.TAG_PRODUCTO}}</strong>
              </label>
              <input type="text" [appFocus]="true" (keydown)="abrirModalProducto($event)" appUppercase class="form-control form-control-sm text-uppercase mousetrap"
                id="producto" name="producto" placeholder="{{constantes.TAG_OBLIGATORIO}}" [(ngModel)]="codigoPrincipal"
                (blur)="validarProducto()" required>
            </div>
            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">
              <label>
                <strong>{{constantes.TAG_NOMBRE}}</strong>
              </label>
              <input type="text" appUppercase class="form-control form-control-sm text-uppercase mousetrap" id="proNombre"
                name="proNombre" [(ngModel)]="invProducto.proNombre" disabled>
            </div>
            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">
              <label>
                <strong>{{constantes.TAG_MEDIDA}}</strong>
              </label>
              <input type="text" appUppercase class="form-control form-control-sm text-uppercase mousetrap" id="proMedida"
                name="proMedida" [(ngModel)]="invProducto.invProductoMedida.medDetalle" disabled>
            </div>
            <div class="form-group form-group-sm col-md-3 col-sm-6 has-feedback pr-2">
              <label>
                <strong>{{constantes.TAG_CANTIDAD}}</strong>
              </label>
              <input type="text" class="form-control form-control-sm text-uppercase mousetrap" id="cantidad" name="cantidad"
                [appAutonumeric]="configAutonumeric" [appAutonumericValue]="cantidad" placeholder="{{constantes.TAG_OBLIGATORIO}}"
                [(ngModel)]="cantidad" (blur)="onSelectionChanged()" required>
            </div>
          </div>
        </div>
      </div>
    </fieldset>
    <div class="card mb-1">
      <div class="card-header">
        <strong>{{constantes.TAG_DETALLE}}</strong>
      </div>
      <div class="card-body m-0 p-0">
        <ag-grid-angular #agGrid id="agGrid" style="width: 100%; height: calc(100vh - 520px);" class="ag-theme-balham"
          [rowData]="listadoPiscinas" [columnDefs]="columnDefs" [enableSorting]="true" [rowSelection]="rowSelection"
          [enableColResize]="true" [components]="components" [context]="context" (gridReady)="onGridReady($event)"
          [overlayNoRowsTemplate]="noData" [suppressDragLeaveHidesColumns]="true" (gridSizeChanged)="redimensionarColumnas()"
          (selectionChanged)="onSelectionChanged()" [suppressRowClickSelection]="true">
        </ag-grid-angular>
      </div>
    </div>
  </div>
</form>
<div *ngIf="cargando">
  <app-cargando></app-cargando>
</div>